/*! For license information please see schemio.app.js.LICENSE.txt */
(()=>{var e={7010:function(e){"undefined"!=typeof self&&self,e.exports=function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=8)}([function(e,t){function i(e,t){var i=e[1]||"",n=e[3];if(!n)return i;if(t&&"function"==typeof btoa){var r=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(n);return[i].concat(n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}))).concat([r]).join("\n")}return""+i}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=i(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},r=0;this.length>r;r++){var s=this[r][0];"number"==typeof s&&(n[s]=!0)}for(r=0;e.length>r;r++){var o=e[r];"number"==typeof o[0]&&n[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),t.push(o))}},t}},function(e,t){e.exports="data:application/vnd.ms-fontobject;base64,aAUAAMQEAAABAAIAAAAAAAAAAAAAAAAAAAABAJABAAAAAExQAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAUdPJHwAAAAAAAAAAAAAAAAAAAAAAAA4AaQBjAG8AbQBvAG8AbgAAAA4AUgBlAGcAdQBsAGEAcgAAABYAVgBlAHIAcwBpAG8AbgAgADEALgAwAAAADgBpAGMAbwBtAG8AbwBuAAAAAAAAAQAAAAsAgAADADBPUy8yDxIFrAAAALwAAABgY21hcBdW0okAAAEcAAAAVGdhc3AAAAAQAAABcAAAAAhnbHlmpZ+jMAAAAXgAAAD8aGVhZA/FmAgAAAJ0AAAANmhoZWEHgAPIAAACrAAAACRobXR4EgABvgAAAtAAAAAcbG9jYQCSAOIAAALsAAAAEG1heHAACQAfAAAC/AAAACBuYW1lmUoJ+wAAAxwAAAGGcG9zdAADAAAAAASkAAAAIAADA4ABkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAAAAAAAEAAAOkCA8D/wABAA8AAQAAAAAEAAAAAAAAAAAAAACAAAAAAAAMAAAADAAAAHAABAAMAAAAcAAMAAQAAABwABAA4AAAACgAIAAIAAgABACDpAv/9//8AAAAAACDpAP/9//8AAf/jFwQAAwABAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAVgEBA74CgQAcAAABMhceARcWFwcmJy4BJyYjIgYHFyERFzY3PgE3NgIWSkNDbykpF2QQIB9VMzQ5P3AtnP6AmB0iIkspKAJVFxhSODlCIDMrKz4REislmgGAmhkVFBwICAABANYAgQMqAtUACwAAAQcXBycHJzcnNxc3Ayru7jzu7jzu7jzu7gKZ7u487u487u487u4AAQCSAIEDgAK9AAUAACUBFwEnNwGAAcQ8/gDuPPkBxDz+AO48AAAAAAEAAAAAAAAfydNRXw889QALBAAAAAAA1nUqGwAAAADWdSobAAAAAAO+AtUAAAAIAAIAAAAAAAAAAQAAA8D/wAAABAAAAAAAA74AAQAAAAAAAAAAAAAAAAAAAAcEAAAAAAAAAAAAAAACAAAABAAAVgQAANYEAACSAAAAAAAKABQAHgBQAGoAfgABAAAABwAdAAEAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEABwAAAAEAAAAAAAIABwBgAAEAAAAAAAMABwA2AAEAAAAAAAQABwB1AAEAAAAAAAUACwAVAAEAAAAAAAYABwBLAAEAAAAAAAoAGgCKAAMAAQQJAAEADgAHAAMAAQQJAAIADgBnAAMAAQQJAAMADgA9AAMAAQQJAAQADgB8AAMAAQQJAAUAFgAgAAMAAQQJAAYADgBSAAMAAQQJAAoANACkaWNvbW9vbgBpAGMAbwBtAG8AbwBuVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwaWNvbW9vbgBpAGMAbwBtAG8AbwBuaWNvbW9vbgBpAGMAbwBtAG8AbwBuUmVndWxhcgBSAGUAZwB1AGwAYQByaWNvbW9vbgBpAGMAbwBtAG8AbwBuRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="},function(e,t,i){function n(e){for(var t=0;e.length>t;t++){var i=e[t],n=h[i.id];if(n){n.refs++;for(var r=0;n.parts.length>r;r++)n.parts[r](i.parts[r]);for(;i.parts.length>r;r++)n.parts.push(s(i.parts[r]));n.parts.length>i.parts.length&&(n.parts.length=i.parts.length)}else{var o=[];for(r=0;i.parts.length>r;r++)o.push(s(i.parts[r]));h[i.id]={id:i.id,refs:1,parts:o}}}}function r(){var e=document.createElement("style");return e.type="text/css",d.appendChild(e),e}function s(e){var t,i,n=document.querySelector("style["+v+'~="'+e.id+'"]');if(n){if(m)return f;n.parentNode.removeChild(n)}if(y){var s=p++;n=u||(u=r()),t=o.bind(null,n,s,!1),i=o.bind(null,n,s,!0)}else n=r(),t=a.bind(null,n),i=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else i()}}function o(e,t,i,n){var r=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=x(t,r);else{var s=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function a(e,t){var i=t.css,n=t.media,r=t.sourceMap;if(n&&e.setAttribute("media",n),g.ssrId&&e.setAttribute(v,t.id),r&&(i+="\n/*# sourceURL="+r.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=i(15),h={},d=l&&(document.head||document.getElementsByTagName("head")[0]),u=null,p=0,m=!1,f=function(){},g=null,v="data-vue-ssr-id",y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,i,r){m=i,g=r||{};var s=c(e,t);return n(s),function(t){for(var i=[],r=0;s.length>r;r++){var o=s[r];(a=h[o.id]).refs--,i.push(a)}for(t?n(s=c(e,t)):s=[],r=0;i.length>r;r++){var a;if(0===(a=i[r]).refs){for(var l=0;a.parts.length>l;l++)a.parts[l]();delete h[a.id]}}}};var x=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e,t,i,n,r,s){var o,a=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(o=e,a=e.default);var c,h="function"==typeof a?a.options:a;if(t&&(h.render=t.render,h.staticRenderFns=t.staticRenderFns,h._compiled=!0),i&&(h.functional=!0),r&&(h._scopeId=r),s?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},h._ssrRegister=c):n&&(c=n),c){var d=h.functional,u=d?h.render:h.beforeCreate;d?(h._injectStyles=c,h.render=function(e,t){return c.call(t),u(e,t)}):h.beforeCreate=u?[].concat(u,c):[c]}return{esModule:o,exports:a,options:h}}},function(e,t,i){"use strict";var n=i(16),r=i.n(n),s=i(5),o=i(6),a=i(20),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.a={name:"VueTagsInput",components:{TagInput:o.a},props:a.a,data:function(){return{newTag:null,tagsCopy:null,tagsEditStatus:null,deletionMark:null,deletionMarkTime:null,selectedItem:null,focused:null}},computed:{autocompleteOpen:function(){return!!this.autocompleteAlwaysOpen||null!==this.newTag&&this.newTag.length>=this.autocompleteMinLength&&this.filteredAutocompleteItems.length>0&&this.focused},filteredAutocompleteItems:function(){var e=this,t=this.autocompleteItems.map((function(t){return Object(s.c)(t,e.tags,e.validation,e.isDuplicate)}));return this.autocompleteFilterDuplicates?t.filter(this.duplicateFilter):t}},methods:{createClasses:s.b,getSelectedIndex:function(e){var t=this.filteredAutocompleteItems,i=this.selectedItem,n=t.length-1;if(0!==t.length)return null===i?0:"before"===e&&0===i?n:"after"===e&&i===n?0:"after"===e?i+1:i-1},selectDefaultItem:function(){this.selectedItem=this.addOnlyFromAutocomplete&&this.filteredAutocompleteItems.length>0?0:null},selectItem:function(e,t){e.preventDefault(),this.selectedItem=this.getSelectedIndex(t)},isSelected:function(e){return this.selectedItem===e},isMarked:function(e){return this.deletionMark===e},invokeDelete:function(){var e=this;if(this.deleteOnBackslash&&0>=this.newTag.length){var t=this.tagsCopy.length-1;null===this.deletionMark?(this.deletionMarkTime=setTimeout((function(){return e.deletionMark=null}),1e3),this.deletionMark=t):this.performDeleteTag(t)}},addTagsFromPaste:function(){var e=this;this.addFromPaste&&setTimeout((function(){return e.performAddTags(e.newTag)}),10)},performEditTag:function(e){var t=this;this.allowEditTags&&(this._events["before-editing-tag"]||this.editTag(e),this.$emit("before-editing-tag",{index:e,tag:this.tagsCopy[e],editTag:function(){return t.editTag(e)}}))},editTag:function(e){this.allowEditTags&&(this.toggleEditMode(e),this.focus(e))},toggleEditMode:function(e){this.allowEditTags&&!this.disabled&&this.$set(this.tagsEditStatus,e,!this.tagsEditStatus[e])},createChangedTag:function(e,t){var i=this.tagsCopy[e];i.text=t?t.target.value:this.tagsCopy[e].text,this.$set(this.tagsCopy,e,Object(s.c)(i,this.tagsCopy,this.validation,this.isDuplicate))},focus:function(e){var t=this;this.$nextTick((function(){var i=t.$refs.tagCenter[e].querySelector("input.tag-input");i&&i.focus()}))},quote:function(e){return e.replace(/([()[{*+.$^\\|?])/g,"\\$1")},cancelEdit:function(e){this.tags[e]&&(this.tagsCopy[e]=Object(s.a)(Object(s.c)(this.tags[e],this.tags,this.validation,this.isDuplicate)),this.$set(this.tagsEditStatus,e,!1))},hasForbiddingAddRule:function(e){var t=this;return e.some((function(e){var i=t.validation.find((function(t){return e===t.type}));return!!i&&i.disableAdd}))},createTagTexts:function(e){var t=this;return e.split(RegExp(this.separators.map((function(e){return t.quote(e)})).join("|"))).map((function(e){return{text:e}}))},performDeleteTag:function(e){var t=this;this._events["before-deleting-tag"]||this.deleteTag(e),this.$emit("before-deleting-tag",{index:e,tag:this.tagsCopy[e],deleteTag:function(){return t.deleteTag(e)}})},deleteTag:function(e){this.disabled||(this.deletionMark=null,clearTimeout(this.deletionMarkTime),this.tagsCopy.splice(e,1),this._events["update:tags"]&&this.$emit("update:tags",this.tagsCopy),this.$emit("tags-changed",this.tagsCopy))},noTriggerKey:function(e,t){var i=-1!==this[t].indexOf(e.keyCode)||-1!==this[t].indexOf(e.key);return i&&e.preventDefault(),!i},performAddTags:function(e,t,i){var n=this;if(!(this.disabled||t&&this.noTriggerKey(t,"addOnKey")||"string"==typeof e&&0===e.trim().length)){var r=[];"object"===(void 0===e?"undefined":l(e))&&(r=[e]),"string"==typeof e&&(r=this.createTagTexts(e)),r.forEach((function(e){e=Object(s.c)(e,n.tags,n.validation,n.isDuplicate),n._events["before-adding-tag"]||n.addTag(e,i),n.$emit("before-adding-tag",{tag:e,addTag:function(){return n.addTag(e,i)}})}))}},duplicateFilter:function(e){return this.isDuplicate?!this.isDuplicate(this.tagsCopy,e):!this.tagsCopy.find((function(t){return t.text===e.text}))},addTag:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"new-tag-input",n=this.filteredAutocompleteItems.map((function(e){return e.text}));this.addOnlyFromAutocomplete&&-1===n.indexOf(e.text)||this.$nextTick((function(){return t.maxTags&&t.tagsCopy.length>=t.maxTags?t.$emit("max-tags-reached",e):t.avoidAddingDuplicates&&!t.duplicateFilter(e)?t.$emit("adding-duplicate",e):void(!e.valid&&t.hasForbiddingAddRule(e.tiClasses)||(t.$emit("input",""),t.tagsCopy.push(e),t._events["update:tags"]&&t.$emit("update:tags",t.tagsCopy),"autocomplete"===i&&t.$refs.newTagInput.focus(),t.$emit("tags-changed",t.tagsCopy)))}))},performSaveTag:function(e,t){var i=this,n=this.tagsCopy[e];this.disabled||t&&this.noTriggerKey(t,"addOnKey")||0!==n.text.trim().length&&(this._events["before-saving-tag"]||this.saveTag(e,n),this.$emit("before-saving-tag",{index:e,tag:n,saveTag:function(){return i.saveTag(e,n)}}))},saveTag:function(e,t){if(this.avoidAddingDuplicates){var i=Object(s.a)(this.tagsCopy),n=i.splice(e,1)[0];if(this.isDuplicate?this.isDuplicate(i,n):-1!==i.map((function(e){return e.text})).indexOf(n.text))return this.$emit("saving-duplicate",t)}!t.valid&&this.hasForbiddingAddRule(t.tiClasses)||(this.$set(this.tagsCopy,e,t),this.toggleEditMode(e),this._events["update:tags"]&&this.$emit("update:tags",this.tagsCopy),this.$emit("tags-changed",this.tagsCopy))},tagsEqual:function(){var e=this;return!this.tagsCopy.some((function(t,i){return!r()(t,e.tags[i])}))},updateNewTag:function(e){var t=e.target.value;this.newTag=t,this.$emit("input",t)},initTags:function(){this.tagsCopy=Object(s.d)(this.tags,this.validation,this.isDuplicate),this.tagsEditStatus=Object(s.a)(this.tags).map((function(){return!1})),this._events["update:tags"]&&!this.tagsEqual()&&this.$emit("update:tags",this.tagsCopy)},blurred:function(e){this.$el.contains(e.target)||(this.addOnBlur&&this.focused&&this.performAddTags(this.newTag),this.focused=!1)}},watch:{value:function(e){this.addOnlyFromAutocomplete||(this.selectedItem=null),this.newTag=e},tags:{handler:function(){this.initTags()},deep:!0},autocompleteOpen:"selectDefaultItem"},created:function(){this.newTag=this.value,this.initTags()},mounted:function(){this.selectDefaultItem(),document.addEventListener("click",this.blurred)},destroyed:function(){document.removeEventListener("click",this.blurred)}}},function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return s})),i.d(t,"d",(function(){return o})),i.d(t,"a",(function(){return n}));var n=function(e){return JSON.parse(JSON.stringify(e))},r=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments[3];void 0===e.text&&(e={text:e});var s=function(e,t){return t.filter((function(t){return"string"==typeof t.rule?!RegExp(t.rule).test(e):t.rule instanceof RegExp?!t.rule.test(e):"[object Function]"==={}.toString.call(t.rule)?t.rule(e):void 0})).map((function(e){return e.type}))}(e.text,i),o=function(e,t){for(var i=0;e.length>i;){if(t(e[i],i,e))return i;i++}return-1}(t,(function(t){return t===e})),a=n(t),l=-1!==o?a.splice(o,1)[0]:n(e);return(r?r(a,l):-1!==a.map((function(e){return e.text})).indexOf(l.text))&&s.push("duplicate"),s.push(0===s.length?"valid":"invalid"),s},s=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;t>s;s++)i[s-1]=arguments[s];void 0===e.text&&(e={text:e});var o=n(e);return o.tiClasses=r.apply(void 0,[e].concat(i)),o},o=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;t>n;n++)i[n-1]=arguments[n];return e.map((function(t){return s.apply(void 0,[t,e].concat(i))}))}},function(e,t,i){"use strict";var n=i(7),r=i(19);t.a=i(3)(n.a,r.a,!1,(function(e){i(17)}),"data-v-5d05513b",null).exports},function(e,t,i){"use strict";t.a={name:"TagInput",props:["scope"]}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(9),r=i(5),s=i(6);i.d(t,"VueTagsInput",(function(){return n.a})),i.d(t,"createClasses",(function(){return r.b})),i.d(t,"createTag",(function(){return r.c})),i.d(t,"createTags",(function(){return r.d})),i.d(t,"TagInput",(function(){return s.a})),n.a.install=function(e){return e.component(n.a.name,n.a)},"undefined"!=typeof window&&window.Vue&&window.Vue.use(n.a),t.default=n.a},function(e,t,i){"use strict";var n=i(4),r=i(21);t.a=i(3)(n.a,r.a,!1,(function(e){i(10)}),"data-v-523b8ea9",null).exports},function(e,t,i){var n=i(11);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(2)("3e3f1cb8",n,!0,{})},function(e,t,i){var n=i(12);(e.exports=i(0)(!1)).push([e.i,"@font-face{font-family:icomoon;src:url("+n(i(1))+");src:url("+n(i(1))+'#iefix) format("embedded-opentype"),url('+n(i(13))+') format("truetype"),url('+n(i(14))+') format("woff");font-weight:400;font-style:normal}[class*=" icon-"][data-v-523b8ea9],[class^=icon-][data-v-523b8ea9]{font-family:icomoon!important;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-check[data-v-523b8ea9]:before{content:"\\E902"}.icon-close[data-v-523b8ea9]:before{content:"\\E901"}.icon-undo[data-v-523b8ea9]:before{content:"\\E900"}ul[data-v-523b8ea9]{margin:0;padding:0;list-style-type:none}[data-v-523b8ea9],[data-v-523b8ea9]:after,[data-v-523b8ea9]:before{-webkit-box-sizing:border-box;box-sizing:border-box}input[data-v-523b8ea9]:focus{outline:none}input[disabled][data-v-523b8ea9]{background-color:transparent}.vue-tags-input[data-v-523b8ea9]{max-width:450px;position:relative;background-color:#fff}.vue-tags-input.vue-tags-input.disabled[data-v-523b8ea9]{opacity:.5}.vue-tags-input.vue-tags-input.disabled [data-v-523b8ea9]{cursor:default}.input[data-v-523b8ea9]{border:1px solid #ccc;padding:4px}.input[data-v-523b8ea9],.tags[data-v-523b8ea9]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.tags[data-v-523b8ea9]{width:100%}.tag[data-v-523b8ea9]{background-color:#5c6bc0;color:#fff;border-radius:2px;display:-webkit-box;display:-ms-flexbox;display:flex;padding:3px 5px;margin:2px;font-size:.85em}.tag[data-v-523b8ea9]:focus{outline:none}.tag .content[data-v-523b8ea9]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.tag .tag-center[data-v-523b8ea9]{position:relative}.tag span[data-v-523b8ea9]{line-height:inherit}.tag span.hidden[data-v-523b8ea9]{padding-left:14px;visibility:hidden;height:0;white-space:pre}.tag .actions[data-v-523b8ea9]{margin-left:2px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:1.15em}.tag .actions i[data-v-523b8ea9]{cursor:pointer}.tag[data-v-523b8ea9]:last-child{margin-right:4px}.tag.invalid[data-v-523b8ea9],.tag.tag.deletion-mark[data-v-523b8ea9]{background-color:#e54d42}.new-tag-input-wrapper[data-v-523b8ea9]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto;padding:3px 5px;margin:2px;font-size:.85em}.new-tag-input-wrapper input[data-v-523b8ea9]{-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto;min-width:100px;border:none;padding:0;margin:0}.new-tag-input[data-v-523b8ea9]{line-height:inherit}.autocomplete[data-v-523b8ea9]{border:1px solid #ccc;border-top:none;position:absolute;width:100%;background-color:#fff;z-index:20}.item>div[data-v-523b8ea9]{cursor:pointer;padding:3px 6px;width:100%}.selected-item[data-v-523b8ea9]{background-color:#5c6bc0;color:#fff}',""])},function(e,t){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e,t){e.exports="data:font/ttf;base64,AAEAAAALAIAAAwAwT1MvMg8SBawAAAC8AAAAYGNtYXAXVtKJAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZqWfozAAAAF4AAAA/GhlYWQPxZgIAAACdAAAADZoaGVhB4ADyAAAAqwAAAAkaG10eBIAAb4AAALQAAAAHGxvY2EAkgDiAAAC7AAAABBtYXhwAAkAHwAAAvwAAAAgbmFtZZlKCfsAAAMcAAABhnBvc3QAAwAAAAAEpAAAACAAAwOAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpAgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6QL//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAFYBAQO+AoEAHAAAATIXHgEXFhcHJicuAScmIyIGBxchERc2Nz4BNzYCFkpDQ28pKRdkECAfVTM0OT9wLZz+gJgdIiJLKSgCVRcYUjg5QiAzKys+ERIrJZoBgJoZFRQcCAgAAQDWAIEDKgLVAAsAAAEHFwcnByc3JzcXNwMq7u487u487u487u4Cme7uPO7uPO7uPO7uAAEAkgCBA4ACvQAFAAAlARcBJzcBgAHEPP4A7jz5AcQ8/gDuPAAAAAABAAAAAAAAH8nTUV8PPPUACwQAAAAAANZ1KhsAAAAA1nUqGwAAAAADvgLVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAO+AAEAAAAAAAAAAAAAAAAAAAAHBAAAAAAAAAAAAAAAAgAAAAQAAFYEAADWBAAAkgAAAAAACgAUAB4AUABqAH4AAQAAAAcAHQABAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGljb21vb24AaQBjAG8AbQBvAG8AblZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGljb21vb24AaQBjAG8AbQBvAG8Abmljb21vb24AaQBjAG8AbQBvAG8AblJlZ3VsYXIAUgBlAGcAdQBsAGEAcmljb21vb24AaQBjAG8AbQBvAG8AbkZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="},function(e,t){e.exports="data:font/woff;base64,d09GRgABAAAAAAUQAAsAAAAABMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgDxIFrGNtYXAAAAFoAAAAVAAAAFQXVtKJZ2FzcAAAAbwAAAAIAAAACAAAABBnbHlmAAABxAAAAPwAAAD8pZ+jMGhlYWQAAALAAAAANgAAADYPxZgIaGhlYQAAAvgAAAAkAAAAJAeAA8hobXR4AAADHAAAABwAAAAcEgABvmxvY2EAAAM4AAAAEAAAABAAkgDibWF4cAAAA0gAAAAgAAAAIAAJAB9uYW1lAAADaAAAAYYAAAGGmUoJ+3Bvc3QAAATwAAAAIAAAACAAAwAAAAMDgAGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA6QIDwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADgAAAAKAAgAAgACAAEAIOkC//3//wAAAAAAIOkA//3//wAB/+MXBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQBWAQEDvgKBABwAAAEyFx4BFxYXByYnLgEnJiMiBgcXIREXNjc+ATc2AhZKQ0NvKSkXZBAgH1UzNDk/cC2c/oCYHSIiSykoAlUXGFI4OUIgMysrPhESKyWaAYCaGRUUHAgIAAEA1gCBAyoC1QALAAABBxcHJwcnNyc3FzcDKu7uPO7uPO7uPO7uApnu7jzu7jzu7jzu7gABAJIAgQOAAr0ABQAAJQEXASc3AYABxDz+AO48+QHEPP4A7jwAAAAAAQAAAAAAAB/J01FfDzz1AAsEAAAAAADWdSobAAAAANZ1KhsAAAAAA74C1QAAAAgAAgAAAAAAAAABAAADwP/AAAAEAAAAAAADvgABAAAAAAAAAAAAAAAAAAAABwQAAAAAAAAAAAAAAAIAAAAEAABWBAAA1gQAAJIAAAAAAAoAFAAeAFAAagB+AAEAAAAHAB0AAQAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAHAAAAAQAAAAAAAgAHAGAAAQAAAAAAAwAHADYAAQAAAAAABAAHAHUAAQAAAAAABQALABUAAQAAAAAABgAHAEsAAQAAAAAACgAaAIoAAwABBAkAAQAOAAcAAwABBAkAAgAOAGcAAwABBAkAAwAOAD0AAwABBAkABAAOAHwAAwABBAkABQAWACAAAwABBAkABgAOAFIAAwABBAkACgA0AKRpY29tb29uAGkAYwBvAG0AbwBvAG5WZXJzaW9uIDEuMABWAGUAcgBzAGkAbwBuACAAMQAuADBpY29tb29uAGkAYwBvAG0AbwBvAG5pY29tb29uAGkAYwBvAG0AbwBvAG5SZWd1bGFyAFIAZQBnAHUAbABhAHJpY29tb29uAGkAYwBvAG0AbwBvAG5Gb250IGdlbmVyYXRlZCBieSBJY29Nb29uLgBGAG8AbgB0ACAAZwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAC4AAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},function(e,t){e.exports=function(e,t){for(var i=[],n={},r=0;t.length>r;r++){var s=t[r],o=s[0],a={id:e+":"+r,css:s[1],media:s[2],sourceMap:s[3]};n[o]?n[o].parts.push(a):i.push(n[o]={id:o,parts:[a]})}return i}},function(e,t,i){"use strict";var n=Array.isArray,r=Object.keys,s=Object.prototype.hasOwnProperty;e.exports=function e(t,i){if(t===i)return!0;if(t&&i&&"object"==typeof t&&"object"==typeof i){var o,a,l,c=n(t),h=n(i);if(c&&h){if((a=t.length)!=i.length)return!1;for(o=a;0!=o--;)if(!e(t[o],i[o]))return!1;return!0}if(c!=h)return!1;var d=t instanceof Date,u=i instanceof Date;if(d!=u)return!1;if(d&&u)return t.getTime()==i.getTime();var p=t instanceof RegExp,m=i instanceof RegExp;if(p!=m)return!1;if(p&&m)return""+t==""+i;var f=r(t);if((a=f.length)!==r(i).length)return!1;for(o=a;0!=o--;)if(!s.call(i,f[o]))return!1;for(o=a;0!=o--;)if(!e(t[l=f[o]],i[l]))return!1;return!0}return t!=t&&i!=i}},function(e,t,i){var n=i(18);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(2)("85656b4e",n,!0,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,".tag-input[data-v-5d05513b]{background-color:transparent;color:inherit;border:none;padding:0;margin:0;display:-webkit-box;display:-ms-flexbox;display:flex;top:0;position:absolute;width:100%;line-height:inherit}.tag-input[data-v-5d05513b]::-ms-clear{display:none}input[data-v-5d05513b]:focus{outline:none}input[disabled][data-v-5d05513b]{background-color:transparent}",""])},function(e,t,i){"use strict";t.a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.scope.edit?i("input",{directives:[{name:"model",rawName:"v-model",value:e.scope.tag.text,expression:"scope.tag.text"}],staticClass:"tag-input",attrs:{type:"text",maxlength:e.scope.maxlength,size:"1"},domProps:{value:e.scope.tag.text},on:{input:[function(t){t.target.composing||e.$set(e.scope.tag,"text",t.target.value)},function(t){e.scope.validateTag(e.scope.index,t)}],blur:function(t){e.scope.cancelEdit(e.scope.index)},keydown:function(t){e.scope.performSaveTag(e.scope.index,t)}}}):e._e()},staticRenderFns:[]}},function(e,t,i){"use strict";var n=function(e){return!e.some((function(e){var t=!e.text;t&&console.warn('Missing property "text"',e);var i=!1;return e.classes&&(i="string"!=typeof e.classes),i&&console.warn('Property "classes" must be type of string',e),t||i}))},r=function(e){return!e.some((function(e){if("number"==typeof e){var t=isFinite(e)&&Math.floor(e)===e;return t||console.warn("Only numerics are allowed for this prop. Found:",e),!t}if("string"==typeof e){var i=/\W|[a-z]|!\d/i.test(e);return i||console.warn("Only alpha strings are allowed for this prop. Found:",e),!i}return console.warn("Only numeric and string values are allowed. Found:",e),!1}))};t.a={value:{type:String,default:"",required:!0},tags:{type:Array,default:function(){return[]},validator:n},autocompleteItems:{type:Array,default:function(){return[]},validator:n},allowEditTags:{type:Boolean,default:!1},autocompleteFilterDuplicates:{default:!0,type:Boolean},addOnlyFromAutocomplete:{type:Boolean,default:!1},autocompleteMinLength:{type:Number,default:1},autocompleteAlwaysOpen:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"Add Tag"},addOnKey:{type:Array,default:function(){return[13]},validator:r},saveOnKey:{type:Array,default:function(){return[13]},validator:r},maxTags:{type:Number},maxlength:{type:Number},validation:{type:Array,default:function(){return[]},validator:function(e){return!e.some((function(e){var t=!e.rule;t&&console.warn('Property "rule" is missing',e);var i=e.rule&&("string"==typeof e.rule||e.rule instanceof RegExp||"[object Function]"==={}.toString.call(e.rule));i||console.warn("A rule must be type of string, RegExp or function. Found:",JSON.stringify(e.rule));var n=!e.type;n&&console.warn('Property "type" is missing',e);var r=e.type&&"string"!=typeof e.type;return r&&console.warn('Property "type" must be type of string. Found:',e),!i||t||n||r}))}},separators:{type:Array,default:function(){return[";"]},validator:function(e){return!e.some((function(e){var t="string"!=typeof e;return t&&console.warn("Separators must be type of string. Found:",e),t}))}},avoidAddingDuplicates:{type:Boolean,default:!0},addOnBlur:{type:Boolean,default:!0},isDuplicate:{type:Function,default:null},addFromPaste:{type:Boolean,default:!0},deleteOnBackslash:{default:!0,type:Boolean}}},function(e,t,i){"use strict";t.a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vue-tags-input",class:[{disabled:e.disabled},{"ti-focus":e.focused}]},[i("div",{staticClass:"input"},[e.tagsCopy?i("ul",{staticClass:"tags"},[e._l(e.tagsCopy,(function(t,n){return i("li",{key:n,staticClass:"tag",class:[{editing:e.tagsEditStatus[n]},t.tiClasses,t.classes,{"deletion-mark":e.isMarked(n)}],style:t.style,attrs:{tabindex:n+1},on:{click:function(i){e.$emit("tag-clicked",{tag:t,index:n})}}},[i("div",{staticClass:"content"},[e.$scopedSlots.tagLeft?i("div",{staticClass:"tag-left"},[e._t("tagLeft",null,{tag:t,index:n,edit:e.tagsEditStatus[n],performSaveEdit:e.performSaveTag,performDelete:e.performDeleteTag,performCancelEdit:e.cancelEdit,performOpenEdit:e.performEditTag,deletionMark:e.isMarked(n)})],2):e._e(),e._v(" "),i("div",{ref:"tagCenter",refInFor:!0,staticClass:"tag-center"},[e.$scopedSlots.tagCenter?e._e():i("span",{class:{hidden:e.tagsEditStatus[n]},on:{click:function(t){e.performEditTag(n)}}},[e._v(e._s(t.text))]),e._v(" "),e.$scopedSlots.tagCenter?e._e():i("tag-input",{attrs:{scope:{edit:e.tagsEditStatus[n],maxlength:e.maxlength,tag:t,index:n,validateTag:e.createChangedTag,cancelEdit:e.cancelEdit,performSaveTag:e.performSaveTag}}}),e._v(" "),e._t("tagCenter",null,{tag:t,index:n,maxlength:e.maxlength,edit:e.tagsEditStatus[n],performSaveEdit:e.performSaveTag,performDelete:e.performDeleteTag,performCancelEdit:e.cancelEdit,validateTag:e.createChangedTag,performSaveTag:e.performSaveTag,performOpenEdit:e.performEditTag,deletionMark:e.isMarked(n)})],2),e._v(" "),e.$scopedSlots.tagRight?i("div",{staticClass:"tag-right"},[e._t("tagRight",null,{tag:t,index:n,edit:e.tagsEditStatus[n],performSaveEdit:e.performSaveTag,performDelete:e.performDeleteTag,performCancelEdit:e.cancelEdit,performOpenEdit:e.performEditTag,deletionMark:e.isMarked(n)})],2):e._e()]),e._v(" "),i("div",{staticClass:"actions"},[e.$scopedSlots.tagActions?e._e():i("i",{directives:[{name:"show",rawName:"v-show",value:e.tagsEditStatus[n],expression:"tagsEditStatus[index]"}],staticClass:"icon-undo",on:{click:function(t){e.cancelEdit(n)}}}),e._v(" "),e.$scopedSlots.tagActions?e._e():i("i",{directives:[{name:"show",rawName:"v-show",value:!e.tagsEditStatus[n],expression:"!tagsEditStatus[index]"}],staticClass:"icon-close",on:{click:function(t){e.performDeleteTag(n)}}}),e._v(" "),e.$scopedSlots.tagActions?e._t("tagActions",null,{tag:t,index:n,edit:e.tagsEditStatus[n],performSaveEdit:e.performSaveTag,performDelete:e.performDeleteTag,performCancelEdit:e.cancelEdit,performOpenEdit:e.performEditTag,deletionMark:e.isMarked(n)}):e._e()],2)])})),e._v(" "),i("li",{staticClass:"new-tag-input-wrapper"},[i("input",e._b({ref:"newTagInput",staticClass:"new-tag-input",class:[e.createClasses(e.newTag,e.tags,e.validation,e.isDuplicate)],attrs:{type:"text",size:"1",placeholder:e.placeholder,maxlength:e.maxlength,disabled:e.disabled},domProps:{value:e.newTag},on:{paste:e.addTagsFromPaste,keydown:[function(t){e.performAddTags(e.filteredAutocompleteItems[e.selectedItem]||e.newTag,t)},function(t){return"button"in t||8===t.keyCode?e.invokeDelete(t):null},function(t){if(!("button"in t)&&38!==t.keyCode)return null;e.selectItem(t,"before")},function(t){if(!("button"in t)&&40!==t.keyCode)return null;e.selectItem(t,"after")}],input:e.updateNewTag,blur:function(t){e.$emit("blur",t)},focus:function(t){e.focused=!0,e.$emit("focus",t)},click:function(t){!e.addOnlyFromAutocomplete&&(e.selectedItem=null)}}},"input",e.$attrs,!1))])],2):e._e()]),e._v(" "),e._t("between-elements"),e._v(" "),e.autocompleteOpen?i("div",{staticClass:"autocomplete",on:{mouseout:function(t){e.selectedItem=null}}},[e._t("autocompleteHeader"),e._v(" "),i("ul",e._l(e.filteredAutocompleteItems,(function(t,n){return i("li",{key:n,staticClass:"item",class:[t.tiClasses,t.classes,{"selected-item":e.isSelected(n)}],style:t.style,on:{mouseover:function(t){!e.disabled&&(e.selectedItem=n)}}},[e.$scopedSlots.autocompleteItem?e._t("autocompleteItem",null,{item:t,index:n,performAdd:function(t){return e.performAddTags(t,void 0,"autocomplete")},selected:e.isSelected(n)}):i("div",{on:{click:function(i){e.performAddTags(t,void 0,"autocomplete")}}},[e._v(e._s(t.text)+"\n        ")])],2)}))),e._v(" "),e._t("autocompleteFooter")],2):e._e()],2)},staticRenderFns:[]}}])},9669:(e,t,i)=>{e.exports=i(1609)},5448:(e,t,i)=>{"use strict";var n=i(4867),r=i(6026),s=i(4372),o=i(5327),a=i(4097),l=i(4109),c=i(7985),h=i(5061),d=i(5655),u=i(5263);e.exports=function(e){return new Promise((function(t,i){var p,m=e.data,f=e.headers,g=e.responseType;function v(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}n.isFormData(m)&&delete f["Content-Type"];var y=new XMLHttpRequest;if(e.auth){var x=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";f.Authorization="Basic "+btoa(x+":"+b)}var w=a(e.baseURL,e.url);function C(){if(y){var n="getAllResponseHeaders"in y?l(y.getAllResponseHeaders()):null,s={data:g&&"text"!==g&&"json"!==g?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:n,config:e,request:y};r((function(e){t(e),v()}),(function(e){i(e),v()}),s),y=null}}if(y.open(e.method.toUpperCase(),o(w,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,"onloadend"in y?y.onloadend=C:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(C)},y.onabort=function(){y&&(i(h("Request aborted",e,"ECONNABORTED",y)),y=null)},y.onerror=function(){i(h("Network Error",e,null,y)),y=null},y.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded",n=e.transitional||d.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(h(t,e,n.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",y)),y=null},n.isStandardBrowserEnv()){var P=(e.withCredentials||c(w))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;P&&(f[e.xsrfHeaderName]=P)}"setRequestHeader"in y&&n.forEach(f,(function(e,t){void 0===m&&"content-type"===t.toLowerCase()?delete f[t]:y.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),g&&"json"!==g&&(y.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){y&&(i(!e||e&&e.type?new u("canceled"):e),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),m||(m=null),y.send(m)}))}},1609:(e,t,i)=>{"use strict";var n=i(4867),r=i(1849),s=i(321),o=i(7185),a=function e(t){var i=new s(t),a=r(s.prototype.request,i);return n.extend(a,s.prototype,i),n.extend(a,i),a.create=function(i){return e(o(t,i))},a}(i(5655));a.Axios=s,a.Cancel=i(5263),a.CancelToken=i(4972),a.isCancel=i(6502),a.VERSION=i(7288).version,a.all=function(e){return Promise.all(e)},a.spread=i(8713),a.isAxiosError=i(6268),e.exports=a,e.exports.default=a},5263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},4972:(e,t,i)=>{"use strict";var n=i(5263);function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var i=this;this.promise.then((function(e){if(i._listeners){var t,n=i._listeners.length;for(t=0;t<n;t++)i._listeners[t](e);i._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},e((function(e){i.reason||(i.reason=new n(e),t(i.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},r.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r},6502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,i)=>{"use strict";var n=i(4867),r=i(5327),s=i(782),o=i(3572),a=i(7185),l=i(4875),c=l.validators;function h(e){this.defaults=e,this.interceptors={request:new s,response:new s}}h.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&l.assertOptions(t,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var i=[],n=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(n=n&&t.synchronous,i.unshift(t.fulfilled,t.rejected))}));var r,s=[];if(this.interceptors.response.forEach((function(e){s.push(e.fulfilled,e.rejected)})),!n){var h=[o,void 0];for(Array.prototype.unshift.apply(h,i),h=h.concat(s),r=Promise.resolve(e);h.length;)r=r.then(h.shift(),h.shift());return r}for(var d=e;i.length;){var u=i.shift(),p=i.shift();try{d=u(d)}catch(e){p(e);break}}try{r=o(d)}catch(e){return Promise.reject(e)}for(;s.length;)r=r.then(s.shift(),s.shift());return r},h.prototype.getUri=function(e){return e=a(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){h.prototype[e]=function(t,i){return this.request(a(i||{},{method:e,url:t,data:(i||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){h.prototype[e]=function(t,i,n){return this.request(a(n||{},{method:e,url:t,data:i}))}})),e.exports=h},782:(e,t,i)=>{"use strict";var n=i(4867);function r(){this.handlers=[]}r.prototype.use=function(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},4097:(e,t,i)=>{"use strict";var n=i(1793),r=i(7303);e.exports=function(e,t){return e&&!n(t)?r(e,t):t}},5061:(e,t,i)=>{"use strict";var n=i(481);e.exports=function(e,t,i,r,s){var o=new Error(e);return n(o,t,i,r,s)}},3572:(e,t,i)=>{"use strict";var n=i(4867),r=i(8527),s=i(6502),o=i(5655),a=i(5263);function l(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){return l(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return l(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(l(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},481:e=>{"use strict";e.exports=function(e,t,i,n,r){return e.config=t,i&&(e.code=i),e.request=n,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},7185:(e,t,i)=>{"use strict";var n=i(4867);e.exports=function(e,t){t=t||{};var i={};function r(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function s(i){return n.isUndefined(t[i])?n.isUndefined(e[i])?void 0:r(void 0,e[i]):r(e[i],t[i])}function o(e){if(!n.isUndefined(t[e]))return r(void 0,t[e])}function a(i){return n.isUndefined(t[i])?n.isUndefined(e[i])?void 0:r(void 0,e[i]):r(void 0,t[i])}function l(i){return i in t?r(e[i],t[i]):i in e?r(void 0,e[i]):void 0}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return n.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||s,r=t(e);n.isUndefined(r)&&t!==l||(i[e]=r)})),i}},6026:(e,t,i)=>{"use strict";var n=i(5061);e.exports=function(e,t,i){var r=i.config.validateStatus;i.status&&r&&!r(i.status)?t(n("Request failed with status code "+i.status,i.config,null,i.request,i)):e(i)}},8527:(e,t,i)=>{"use strict";var n=i(4867),r=i(5655);e.exports=function(e,t,i){var s=this||r;return n.forEach(i,(function(i){e=i.call(s,e,t)})),e}},5655:(e,t,i)=>{"use strict";var n=i(4867),r=i(6016),s=i(481),o={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(l=i(5448)),l),transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)||t&&"application/json"===t["Content-Type"]?(a(t,"application/json"),function(e,t,i){if(n.isString(e))try{return(0,JSON.parse)(e),n.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||c.transitional,i=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,o=!i&&"json"===this.responseType;if(o||r&&n.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw s(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){c.headers[e]=n.merge(o)})),e.exports=c},7288:e=>{e.exports={version:"0.22.0"}},1849:e=>{"use strict";e.exports=function(e,t){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return e.apply(t,i)}}},5327:(e,t,i)=>{"use strict";var n=i(4867);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,i){if(!t)return e;var s;if(i)s=i(t);else if(n.isURLSearchParams(t))s=t.toString();else{var o=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),o.push(r(t)+"="+r(e))})))})),s=o.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,i)=>{"use strict";var n=i(4867);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,i,r,s,o){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),n.isString(r)&&a.push("path="+r),n.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},6268:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},7985:(e,t,i)=>{"use strict";var n=i(4867);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function r(e){var n=e;return t&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=r(window.location.href),function(t){var i=n.isString(t)?r(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return!0}},6016:(e,t,i)=>{"use strict";var n=i(4867);e.exports=function(e,t){n.forEach(e,(function(i,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[n])}))}},4109:(e,t,i)=>{"use strict";var n=i(4867),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,i,s,o={};return e?(n.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=n.trim(e.substr(0,s)).toLowerCase(),i=n.trim(e.substr(s+1)),t){if(o[t]&&r.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([i]):o[t]?o[t]+", "+i:i}})),o):o}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},4875:(e,t,i)=>{"use strict";var n=i(7288).version,r={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){r[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}}));var s={};r.transitional=function(e,t,i){function r(e,t){return"[Axios v"+n+"] Transitional option '"+e+"'"+t+(i?". "+i:"")}return function(i,n,o){if(!1===e)throw new Error(r(n," has been removed"+(t?" in "+t:"")));return t&&!s[n]&&(s[n]=!0,console.warn(r(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,n,o)}},e.exports={assertOptions:function(e,t,i){if("object"!=typeof e)throw new TypeError("options must be an object");for(var n=Object.keys(e),r=n.length;r-- >0;){var s=n[r],o=t[s];if(o){var a=e[s],l=void 0===a||o(a,s,e);if(!0!==l)throw new TypeError("option "+s+" must be "+l)}else if(!0!==i)throw Error("Unknown option "+s)}},validators:r}},4867:(e,t,i)=>{"use strict";var n=i(1849),r=Object.prototype.toString;function s(e){return"[object Array]"===r.call(e)}function o(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==r.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===r.call(e)}function h(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),s(e))for(var i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:l,isUndefined:o,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:c,isStream:function(e){return a(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:h,merge:function e(){var t={};function i(i,n){l(t[n])&&l(i)?t[n]=e(t[n],i):l(i)?t[n]=e({},i):s(i)?t[n]=i.slice():t[n]=i}for(var n=0,r=arguments.length;n<r;n++)h(arguments[n],i);return t},extend:function(e,t,i){return h(t,(function(t,r){e[r]=i&&"function"==typeof t?n(t,i):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},2643:(e,t,i)=>{"use strict";i.d(t,{I:()=>s,o:()=>r});var n=i(4691);function r(e,t){if(!e)return null;const i={};let n=!0;for(let s in e)if(e.hasOwnProperty(s)){let o,a=!0;if(t.hasOwnProperty("*")?o=t["*"]:t.hasOwnProperty(s)&&(o=t[s]),void 0!==o&&typeof e[s]==typeof o)if(Array.isArray(e[s]))if(i[s]=[],Array.isArray(o)&&1===o.length){e[s].length>0&&(n=!1);for(let t=0;t<e[s].length;t++){const n=r(e[s][t],o[0]);i[s][t]=void 0!==n?n:{}}a=!1}else a=!0;else if("object"==typeof e[s]){const t=r(e[s],o);void 0!==t?(i[s]=t,a=!1,n=!1):a=!1}else e[s]===o&&(a=!1);a&&(i[s]=e[s],n=!1)}return n?void 0:i}function s(e,t){if(e){for(let i in t)if(t.hasOwnProperty(i))if("*"===i)for(let i in e)s(e[i],t["*"]);else{const r=t[i];if(!e.hasOwnProperty(i)||null===e[i]||typeof e[i]!=typeof r||Array.isArray(r)&&!Array.isArray(e[i]))Array.isArray(r)?e[i]=[]:e[i]=n.Z.clone(r);else if("object"!=typeof r||Array.isArray(r)){if(Array.isArray(r)&&1===r.length)for(let t=0;t<e[i].length;t++)s(e[i][t],r[0])}else s(e[i],r)}return e}}},3762:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r,v:()=>s});const n=i(1036);function r(e){const t=e.replaceAll(/<p>\s*<\/p>/g,"<br/>");return n(t,{allowedTags:["blockquote","code","div","em","li","ol","br","p","strong","b","s","i","u","ul","img","a","h1","h2","h3","h4","h5","h6"],allowedSchemes:["http","https"],allowedAttributes:{a:["href"],img:["src"]}})}function s(e){return n(e,{allowedTags:[]})}},2217:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(4670),r=i.n(n),s=i(6234);class o{constructor(){this.enabled=!0,this.entityId=null,this.id=r().generate()}init(){return!0}play(e){return!1}destroy(){}svg(e,t,i){const n=document.createElementNS("http://www.w3.org/2000/svg",e);return this._enrichDomElement(n,t,i),n}html(e,t,i){const n=document.createElement(e);return this._enrichDomElement(n,t,i),n}_enrichDomElement(e,t,i){t&&(0,s.Ed)(t,((t,i)=>{e.setAttribute(i,t)})),i&&(0,s.Ed)(i,(t=>{e.appendChild(t)}))}stop(){this.enabled=!1}}},9737:(e,t,i)=>{"use strict";i.d(t,{XS:()=>h,aG:()=>p,oK:()=>u});var n=i(4670),r=i.n(n),s=i(6234);const o=new Map,a=new Map;class l{constructor(e){this.id=r().generate(),this.editorId=e,this.animationsEnabled=!0,this.isAlreadyLooping=!1,this.animations=[]}play(e,t,i){for(let t=0;t<this.animations.length;t++)if(this.animations[t].id===e.id){this.animations[t].enabled=!1;try{this.animations[t].enabled=!1}catch(e){console.error(e),this.animations[t].destroy()}this.animations.splice(t,1);break}e.entityId=t,e.animationId=i,i&&function(e,t,i){(0,s.Ed)(e.animations,(e=>{e.entityId===t&&e.animationId===i&&(e.enabled=!1)}))}(this,t,i);let n=!1;try{e.enabled=!0,n=e.init()}catch(e){console.error("Could not initialize animation",e)}if(n)this.animations.push(e),(r=this).animationsEnabled&&!r.isAlreadyLooping&&(r.isAlreadyLooping=!0,window.requestAnimationFrame((()=>c(r,performance.now(),0))));else try{e.destroy()}catch(e){console.error(e)}var r}stopAllAnimations(){const e=this.animations;this.animations=[],(0,s.Ed)(e,(e=>{try{e.destroy()}catch(e){console.error(e)}}))}disableAnimations(){this.animationsEnabled=!1}enableAnimations(){this.animationsEnabled=!0}stopAllAnimationsForEntity(e){(0,s.Ed)(this.animations,(t=>{t.entityId===e&&(t.enabled=!1)}))}destroy(){this.stopAllAnimations(),o.has(this.id)&&o.delete(this.id)}}function c(e,t,i){if(0!==e.animations.length)if(e.animationsEnabled){let n=0;for(;n<e.animations.length;){let t=e.animations[n],r=!0;try{r=!!t.enabled&&t.play(Math.min(100,i))}catch(e){r=!1,console.error(e)}if(r)n+=1;else{try{t.destroy()}catch(e){console.error(e)}e.animations.splice(n,1)}}window.requestAnimationFrame((()=>{const i=performance.now();c(e,i,i-t)}))}else e.isAlreadyLooping=!1;else e.isAlreadyLooping=!1}function h(e){const t=new l(e);return o.set(t.id,t),a.set(e,t.id),t}function d(e,t){if(!a.has(e))return;const i=a.get(e);o.has(i)&&t(o.get(i))}function u(e,t,i,n){d(e,(e=>{e.play(t,i,n)}))}function p(e,t){d(e,(e=>{e.stopAllAnimationsForEntity(t)}))}},8370:(e,t,i)=>{"use strict";i.d(t,{QI:()=>k,_p:()=>_,qK:()=>C,uR:()=>w,yl:()=>A});var n=i(6234),r=i(3363),s=i(4691),o=i(3805),a=i(6012),l=i(2217),c=i(1179),h=i(9375),d=i(8595);const u=!0,p="number",m="color",f="advanced-color",g="boolean",v="string",y=new Set([p,m,v,g,"choice"]),x=new Map([["area.x",{type:p,name:"Position X"}],["area.y",{type:p,name:"Position Y"}],["area.w",{type:p,name:"Width"}],["area.h",{type:p,name:"Height"}],["area.r",{type:p,name:"Rotation"}],["area.sx",{type:p,name:"Scale X"}],["area.sy",{type:p,name:"Scale Y"}],["opacity",{type:p,name:"Opacity"}],["selfOpacity",{type:p,name:"Self opacity"}],["visible",{type:g,name:"Visible"}],["blendMode",{type:v,options:c.W,name:"Blend mode"}]]),b=new Map([["style.backgroundColor",{type:m,name:"Background color"}]]);function w(e){return b.get(e)}function C(e,t){const i=x.get(t);if(i)return i;if(t.startsWith("shapeProps.")){const i=t.split(".");if(i.length<=1)return null;const n=r.Z.find(e.shape);if(!n)return null;const s=r.Z.getShapePropDescriptor(n,i[1]);if(!s)return null;if(s.type===m||s.type===f&&3===i.length&&i[2]===m)return{type:m,name:s.name};if(y.has(s.type))return s}return null}function P(e,t){e.sort(((e,t)=>e.frame-t.frame));const i=[],r=(e,t,n)=>{const r={prevIdx:t,nextIdx:n};for(let t=0;t<e;t++)i.push(r)};let s=-1;return(0,n.Ed)(e,(e=>{if(s>=0&&i[s].frame.frame===e.frame)return;const t={frame:e,prevIdx:s,nextIdx:-1};e.frame-1>i.length&&r(e.frame-1-i.length,s,e.frame-1),i.push(t),s>=0&&(i[s].nextIdx=e.frame-1),s=e.frame-1})),i.length<t&&r(t-i.length,s,-1),i}function k(e,t,i,n){if(e===p)return t*(1-n)+n*i;if(e===m){const e=(0,a.l)(t),r=(0,a.l)(i),s={r:e.r*(1-n)+n*r.r,g:e.g*(1-n)+n*r.g,b:e.b*(1-n)+n*r.b,a:e.a*(1-n)+n*r.a};return(0,a.N)(s)}return t}function S(e,t,i,n){if(t.kind===o.jU.STEP)return t.value;if(n===p||n===m){let r=i.frame-t.frame;if(r>0&&e>=t.frame&&e<=i.frame){const s=(0,o.rJ)((e-t.frame)/r,t.kind);return k(n,t.value,i.value,s)}}return t.value}function I(e,t,i,n,r,o,a){if(!n)return null;const l=i.split("."),c=P(r,o);return{toggleFrame(i){if(i<1)return;const r=Math.floor(i);let o=null;o=r<=c.length?c[r-1]:c[c.length-1];let h=o;if(!o.frame){if(o.prevIdx<0)return;h=c[o.prevIdx]}let p=null;o.nextIdx>=0&&(p=c[o.nextIdx]);let m=h.frame.value;p&&(m=S(i,h.frame,p.frame,n.type)),s.Z.setObjectProperty(t,l,m),a&&"area"===l[0]&&e.readjustItemAndDescendants(t.id,u),a&&"visible"===l[0]&&e.updateVisibility(t),a&&d.Z.item.changed.specific.$emit(e.editorId,t.id)}}}function A(e,t){const i=[],r={};return(0,n.Ed)(e.shapeProps.animations,(n=>{if("item"===n.kind){const r=t.findItemById(n.itemId);if(r){const s=C(r,n.property),o=I(t,r,n.property,s,n.frames,e.shapeProps.totalFrames,!0);o&&i.push(o)}}else if("function"===n.kind)r.hasOwnProperty(n.funcId)||(r[n.funcId]={}),r[n.funcId][n.property]=n;else if("scheme"===n.kind){const r=w(n.property),s=I(t,t.scheme,n.property,r,n.frames,e.shapeProps.totalFrames,!1);s&&i.push(s)}})),i.concat(function(e,t,i){const r=[];return(0,n.Ed)(e.shapeProps.animations,(s=>{if("function"!==s.kind||!s.funcId)return;const o=e.shapeProps.functions[s.funcId];if(!o)return;if(!t[s.funcId])return;const a=h.Z[o.functionId];if(!a)return;const l=a.create(o.args,i),c={};(0,n.Ed)(a.inputs,((e,i)=>{t[s.funcId][i]?c[i]=t[s.funcId][i]:c[i]={kind:"function",functionId:s.funcId,property:i,frames:[{frame:0,kind:"linear",value:e.value}]}}));const d=function(e,t,i,r){const s={};return(0,n.Ed)(i,((e,t)=>{s[t]=P(e.frames,r)})),{toggleFrame(i){if(i<1)return;const r=Math.floor(i),o={};let a=!1;(0,n.Ed)(s,((t,n)=>{let s=null;s=r<=t.length?t[r-1]:t[t.length-1];let l=s;if(!s.frame){if(s.prevIdx<0)return void(a=!0);l=t[s.prevIdx]}let c=null;s.nextIdx>=0&&(c=t[s.nextIdx]);let h=l.frame.value;c&&(h=S(i,l.frame,c.frame,e.inputs[n].type)),o[n]=h})),a||e.execute(t,o)}}}(a,l,c,e.shapeProps.totalFrames);d&&r.push(d)})),r}(e,r,t))}class _ extends l.Z{constructor(e,t,i){super(),this.totalTimePassed=0,this.currentFrame=0,this.startFrame=1,this.fps=e,this.totalFrames=t,this.compiledAnimations=i,this.onFrame=null,this.onFinish=null,this.stopFrame=-1}setFrame(e){this.startFrame=e,this.currentFrame=Math.floor(e)-1}setStopFrame(e){this.stopFrame=e}init(){return this.totalTimePassed=0,!0}setCallbacks({onFrame:e,onFinish:t}){this.onFrame=e,this.onFinish=t}play(e){this.totalTimePassed+=e;let t=this.startFrame+this.totalTimePassed*Math.max(this.fps,.01)/1e3,i=Math.floor(t);i>this.currentFrame&&(this.currentFrame=i,this.onFrame&&this.onFrame(this.currentFrame));const n=Math.floor(t);return this.stopFrame>0&&n===this.stopFrame?(this.onFrame&&this.onFrame(this.stopFrame),this.toggleFrame(this.stopFrame),!1):(this.toggleFrame(t),i<this.totalFrames)}toggleFrame(e){this.startFrame=e,this.totalTimePassed=0,this.currentFrame=e,(0,n.Ed)(this.compiledAnimations,(t=>{t.toggleFrame(e)}))}destroy(){this.onFinish&&this.onFinish()}}},3805:(e,t,i)=>{"use strict";i.d(t,{ZP:()=>o,jU:()=>r,rJ:()=>s});var n=i(2217);const r={LINEAR:"linear",STEP:"step",SMOOTH:"smooth",EASE_IN:"ease-in",EASE_OUT:"ease-out",EASE_IN_OUT:"ease-in-out",BOUNCE:"bounce",values(){return[this.LINEAR,this.STEP,this.SMOOTH,this.EASE_IN,this.EASE_OUT,this.EASE_IN_OUT,this.BOUNCE]}};function s(e,t){return t===r.SMOOTH?Math.sin(e*Math.PI/2):t===r.EASE_IN?e*e:t===r.EASE_OUT?1-(e-1)*(e-1):t===r.EASE_IN_OUT?.5-Math.cos(e*Math.PI)/2:"bounce"===t?1-Math.pow(3,-10*e)*Math.cos(10*Math.PI*e):e}class o extends n.Z{constructor(e){super(),this.updateCallback=null,this.durationMillis=1e3,this.elapsedTime=0,this.initCallback=null,this.destroyCallback=null,this.animationType="ease-out",e&&(e.durationMillis&&(this.durationMillis=e.durationMillis),e.update&&(this.updateCallback=e.update),e.init&&(this.initCallback=e.init),e.destroy&&(this.destroyCallback=e.destroy),e.animationType&&(this.animationType=e.animationType))}init(){return!!this.updateCallback&&(this.initCallback&&this.initCallback(),!0)}play(e){if(this.elapsedTime+=e,this.elapsedTime>=this.durationMillis){try{this.updateCallback(1)}catch(e){console.error(e)}return!1}const t=this.elapsedTime/this.durationMillis;try{this.updateCallback(s(t,this.animationType))}catch(e){return console.error(e),!1}return!0}destroy(){this.destroyCallback&&this.destroyCallback()}}},9375:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={moveAlongPath:i(3277).Z}},3277:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(8595),r=i(3363),s=i(3590);const o={name:"Move along path",args:{item:{name:"Item",type:"element",value:null},path:{name:"Path",type:"element",value:null},rotateItem:{name:"Rotate item",type:"boolean",value:!1,description:"Adjust rotation of the item to path"},rotationOffset:{name:"Rotation offset",type:"number",value:0,description:"Rotation angle offset",depends:{rotateItem:!0}}},inputs:{distance:{name:"Distance (%)",type:"number",value:0,endValue:100}},create(e,t){const i=t.findFirstElementBySelector(e.item);if(!i)return null;const n=t.findFirstElementBySelector(e.path);if(!n)return null;if(!r.Z.find(n.shape))return null;const s=t.getSvgOutlineOfItem(n);return s?{path:s,item:i,pathItem:n,schemeContainer:t,totalLength:s.getTotalLength(),rotateItem:e.rotateItem,rotationOffset:e.rotationOffset}:null},getFullName(e,t){const i=e=>{const i=t.findFirstElementBySelector(e);return i?i.name:"unknown"};return`Move "${i(e.item)}" along the path of "${i(e.path)}"`},execute({path:e,item:t,pathItem:i,schemeContainer:r,totalLength:o,rotateItem:a,rotationOffset:l},{distance:c}){const h=c*o/100,d=e.getPointAtLength(h);let u=r.worldPointOnItem(d.x,d.y,i);if(a){const n=e.getPointAtLength(h+2),o=r.worldPointOnItem(n.x,n.y,i),a=o.x-u.x,c=o.y-u.y,d=a*a+c*c;if(!s.Z.tooSmall(d)){const e=Math.sqrt(d),i=a/e,n=c/e,r=180*s.Z.fullAngleForNormalizedVector(i,n)/Math.PI;t.area.r=r,isFinite(l)&&(t.area.r+=l)}}let p=u;if(t.meta&&t.meta.parentId){const e=r.findItemById(t.meta.parentId);e&&(p=r.localPointOnItem(u.x,u.y,e))}t.area.x=p.x-t.area.w/2,t.area.y=p.y-t.area.h/2,r.updateChildTransforms(t),n.Z.item.changed.specific.$emit(r.editorId,t.id)}}},6234:(e,t,i)=>{"use strict";function n(e,t){let i=-1;for(let n=0;n<t.length;n++){const r=t[n];if(r.startsWith(e)){const t=r.substring(e.length).trim();if(t.length>0){if(!isNaN(t)){const e=parseInt(t);e>i&&(i=e)}}else i<0&&(i=1)}}return i>=0?`${e} ${i+1}`:e}function r(e,t){Array.isArray(e)?e.forEach(t):s(e,t)}function s(e,t){if(e&&"object"==typeof e)for(let i in e)e.hasOwnProperty(i)&&t(e[i],i)}function o(e,t){return Array.isArray(e)?e.map(t):a(e,t)}function a(e,t){if(!e)return e;if("object"!=typeof e)return e;const i={};for(let n in e)e.hasOwnProperty(n)&&(i[n]=t(e[n],n));return i}function l(e,t){return Array.isArray(e)?e.filter(t):[]}function c(e,t){return Array.isArray(e)?e.find(t):null}function h(e,t){return Array.isArray(e)?e.findIndex(t):null}function d(e,t){if(!e)return e;if("object"!=typeof e)return e;for(let i in e)if(e.hasOwnProperty(i)&&t(e[i],i))return i;return null}function u(e,t){if(!Array.isArray(e))return-1;if("function"==typeof t){for(let i=0;i<e.length;i++)if(t(e[i],i))return i;return-1}return e.indexOf(t)}function p(e){if(!Array.isArray(e))return[];const t=new Set;return e.filter((e=>!t.has(e)&&(t.add(e),!0)))}i.d(t,{Ed:()=>r,O3:()=>a,UI:()=>o,b0:()=>s,cq:()=>u,cx:()=>h,hX:()=>l,jj:()=>p,lc:()=>n,sE:()=>c,w_:()=>d})},6012:(e,t,i)=>{"use strict";function n(e){return`rgba(${e.r},${e.g},${e.b},${e.a})`}function r(e){e=e.toLowerCase();try{const t=e.indexOf("("),i=e.indexOf(")");if(t>0&&i>0){const n=e.substring(0,t).trim();if("rgb"===n||"rgba"===n)return function(e){const t=e.split(",");let i=0,n=0,r=0,s=1;return t.length>0&&(i=parseInt(t[0])),t.length>1&&(n=parseInt(t[1])),t.length>2&&(r=parseInt(t[2])),t.length>3&&(s=parseFloat(t[3])),{r:i,g:n,b:r,a:s}}(e.substring(t+1,i))}if("#"===e.charAt(0))return function(e){let t=0,i=0,n=0;return 3===e.length?(t=parseInt(`${e[0]}${e[0]}`,16),i=parseInt(`${e[1]}${e[1]}`,16),n=parseInt(`${e[2]}${e[2]}`,16)):(e.length>=2&&(t=parseInt(e.substring(0,2),16)),e.length>=4&&(i=parseInt(e.substring(2,4),16)),e.length>=6&&(n=parseInt(e.substring(4,6),16))),{r:t,g:i,b:n,a:1}}(e.substring(1))}catch(e){}return{r:0,g:0,b:0,a:1}}i.d(t,{N:()=>n,l:()=>r})},8595:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var n=i(2934),r=i.n(n);const s=new(i(2017).Yd)("EditorEventBus"),o=new(r())({});function a(e,t,i){let n=e+"/"+t;return i&&i.length>0?n+"/"+i.join("/"):n}function l(e,t,i,n){if(!e)throw new Error("editorId should be specified, got: ",e);o.$on(a(e,t,i),n)}function c(e,t,i,n){if(!e)throw new Error("editorId should be specified, got: ",e);o.$off(a(e,t,i),n)}function h(e,t,i,...n){if(!e)throw new Error("editorId should be specified, got: ",e);const r=a(e,t,i);s.infoEvent(r,n),o.$emit(r,...n)}const d={custom:{$on:(e,t,i)=>l(e,`custom-${t}`,[],i),$off:(e,t,i)=>c(e,`custom-${t}`,[],i),$emit:(e,t,...i)=>h(e,`custom-${t}`,[],...i)},schemeChangeCommitted:{$on:(e,t)=>l(e,"scheme-change-committed",[],t),$off:(e,t)=>c(e,"scheme-change-committed",[],t),$emit:(e,t)=>h(e,"scheme-change-committed",[],t)},patchedSchemeUpdated:{$on:(e,t)=>l(e,"patched-scheme-updated",[],t),$off:(e,t)=>c(e,"patched-scheme-updated",[],t),$emit:(e,t)=>h(e,"patched-scheme-updated",[],t)},schemeRebased:{$on:(e,t)=>l(e,"scheme-rebased",[],t),$off:(e,t)=>c(e,"scheme-rebased",[],t),$emit:(e,t)=>h(e,"scheme-rebased",[],t)},item:{custom:{$on:(e,t,i,n)=>l(t,e,[i],n),$off:(e,t,i,n)=>c(t,e,[i],n),$emit:(e,t,i,...n)=>h(t,e,[i],...n)},userEvent:{$on:(e,t)=>l(e,"shape-custom-event",[],t),$off:(e,t)=>c(e,"shape-custom-event",[],t),$emit:(e,t,i,...n)=>{h(e,"shape-custom-event",[],...[t,i].concat(n))}},selected:{any:{$on:(e,t)=>l(e,"any-item-selected",[],t),$off:(e,t)=>c(e,"any-item-selected",[],t),$emit:(e,t)=>h(e,"any-item-selected",[],t)},specific:{$on:(e,t,i)=>l(e,"item-selected",[t],i),$off:(e,t,i)=>c(e,"item-selected",[t],i),$emit:(e,t)=>{d.item.selected.any.$emit(e,t),h(e,"item-selected",[t])}}},deselected:{any:{$on:(e,t)=>l(e,"any-item-deselected",[],t),$off:(e,t)=>c(e,"any-item-deselected",[],t),$emit:(e,t)=>h(e,"any-item-deselected",[],t)},specific:{$on:(e,t,i)=>l(e,"item-deselected",[t],i),$off:(e,t,i)=>c(e,"item-deselected",[t],i),$emit:(e,t)=>{d.item.deselected.any.$emit(e,t),h(e,"item-deselected",[t])}}},clicked:{any:{$on:(e,t)=>l(e,"any-item-clicked",[],t),$off:(e,t)=>c(e,"any-item-clicked",[],t),$emit:(e,t)=>h(e,"any-item-clicked",[],t)}},changed:{any:{$on:(e,t)=>l(e,"any-item-changed",[],t),$off:(e,t)=>c(e,"any-item-changed",[],t),$emit:(e,t,i)=>h(e,"any-item-changed",[],t,i)},specific:{$on:(e,t,i)=>l(e,"item-changed",[t],i),$off:(e,t,i)=>c(e,"item-changed",[t],i),$emit:(e,t,i)=>{d.item.changed.any.$emit(e,t,i),h(e,"item-changed",[t],t,i)}}},linksShowRequested:{any:{$on:(e,t)=>l(e,"item-links-show-requested",[],t),$off:(e,t)=>c(e,"item-links-show-requested",[],t),$emit:(e,t)=>h(e,"item-links-show-requested",[],t)}},templateSelected:{$on:(e,t)=>l(e,"item-template-selected",[],t),$off:(e,t)=>c(e,"item-template-selected",[],t),$emit:(e,t,i)=>{h(e,"item-template-selected",[],t,i)}},templateArgsUpdated:{specific:{$on:(e,t,i)=>l(e,"item-template-args-changed",[t],i),$off:(e,t,i)=>c(e,"item-template-args-changed",[t],i),$emit:(e,t)=>{h(e,"item-template-args-changed",[t],t)}}}},textSlot:{triggered:{any:{$on:(e,t)=>l(e,"any-text-slot-triggered",[],t),$off:(e,t)=>c(e,"any-text-slot-triggered",[],t),$emit:(e,t,i,n,r,s)=>{h(e,"any-text-slot-triggered",[],t,i,n,r,s)}},specific:{$on:(e,t,i)=>l(e,"text-slot-triggered",[t],i),$off:(e,t,i)=>c(e,"text-slot-triggered",[t],i),$emit:(e,t,i,n,r,s)=>{d.textSlot.triggered.any.$emit(e,t,i,n,r,s),h(e,"text-slot-triggered",[t.id],t,i,n,r,s)}}},canceled:{any:{$on:(e,t)=>l(e,"any-text-slot-canceled",[],t),$off:(e,t)=>c(e,"any-text-slot-canceled",[],t),$emit:(e,t,i)=>{h(e,"any-text-slot-canceled",[],t,i)}},specific:{$on:(e,t,i)=>l(e,"text-slot-canceled",[t],i),$off:(e,t,i)=>c(e,"text-slot-canceled",[t],i),$emit:(e,t,i)=>{d.textSlot.canceled.any.$emit(e,t,i),h(e,"text-slot-canceled",[t.id],t,i)}}},moved:{$on:(e,t)=>l(e,"text-slot-moved",[],t),$off:(e,t)=>c(e,"text-slot-moved",[],t),$emit:(e,t,i,n)=>{h(e,"text-slot-moved",[],t,i,n)}}},inPlaceTextEditor:{created:{$on:(e,t)=>l(e,"in-place-text-editor-created",[],t),$off:(e,t)=>c(e,"in-place-text-editor-created",[],t),$emit:(e,t)=>{h(e,"in-place-text-editor-created",[],t)}}},void:{clicked:{$on:(e,t)=>l(e,"void-clicked",[],t),$off:(e,t)=>c(e,"void-clicked",[],t),$emit:e=>h(e,"void-clicked",[])},doubleClicked:{$on:(e,t)=>l(e,"void-double-clicked",[],t),$off:(e,t)=>c(e,"void-double-clicked",[],t),$emit:(e,t,i,n,r)=>h(e,"void-double-clicked",[],t,i,n,r)}},component:{loadRequested:{any:{$on:(e,t)=>l(e,"any-component-load-requested",[],t),$off:(e,t)=>c(e,"any-component-load-requested",[],t),$emit:(e,t)=>h(e,"any-component-load-requested",[],t)},specific:{$on:(e,t,i)=>l(e,"component-load-requested",[t],i),$off:(e,t,i)=>c(e,"component-load-requested",[t],i),$emit:(e,t,i)=>{d.component.loadRequested.any.$emit(e,i),h(e,"component-load-requested",[t],i)}}},loadFailed:{any:{$on:(e,t)=>l(e,"any-component-load-failed",[],t),$off:(e,t)=>c(e,"any-component-load-failed",[],t),$emit:(e,t)=>h(e,"any-component-load-failed",[],t)},specific:{$on:(e,t,i)=>l(e,"component-load-failed",[t],i),$off:(e,t,i)=>c(e,"component-load-failed",[t],i),$emit:(e,t,i)=>{d.component.loadFailed.any.$emit(e,i),h(e,"component-load-failed",[t],i)}}},mounted:{any:{$on:(e,t)=>l(e,"any-component-mounted",[],t),$off:(e,t)=>c(e,"any-component-mounted",[],t),$emit:(e,t)=>h(e,"any-component-mounted",[],t)},specific:{$on:(e,t,i)=>l(e,"component-mounted",[t],i),$off:(e,t,i)=>c(e,"component-mounted",[t],i),$emit:(e,t,i)=>{d.component.mounted.any.$emit(e,i),h(e,"component-mounted",[t],i)}}}},zoomToAreaRequested:{$on:(e,t)=>l(e,"zoom-to-area-requested",[],t),$off:(e,t)=>c(e,"zoom-to-area-requested",[],t),$emit:(e,t,i)=>h(e,"zoom-to-area-requested",[],t,i)},elementPick:{requested:{$on:(e,t)=>l(e,"element-pick-requested",[],t),$off:(e,t)=>c(e,"element-pick-requested",[],t),$emit:(e,t)=>h(e,"element-pick-requested",[],t)},canceled:{$on:(e,t)=>l(e,"element-pick-canceled",[],t),$off:(e,t)=>c(e,"element-pick-canceled",[],t),$emit:e=>h(e,"element-pick-canceled",[])}},screenTransformUpdated:{$on:(e,t)=>l(e,"screen-transform-updated",[],t),$off:(e,t)=>c(e,"screen-transform-updated",[],t),$emit:(e,t)=>h(e,"screen-transform-updated",[],t)},itemSurround:{created:{$on:(e,t)=>l(e,"item-surround-created",[],t),$off:(e,t)=>c(e,"item-surround-created",[],t),$emit:(e,t,i,n)=>h(e,"item-surround-created",[],t,i,n)}},behaviorPanel:{requested:{$on:(e,t)=>l(e,"behavior-panel-requested",[],t),$off:(e,t)=>c(e,"behavior-panel-requested",[],t),$emit:e=>h(e,"behavior-panel-requested",[])}},editBox:{updated:{$on:(e,t)=>l(e,"edit-box-items-updated",[],t),$off:(e,t)=>c(e,"edit-box-items-updated",[],t),$emit:e=>h(e,"edit-box-items-updated",[])},fillEnabled:{$on:(e,t)=>l(e,"edit-box-fill-enabled",[],t),$off:(e,t)=>c(e,"edit-box-fill-enabled",[],t),$emit:e=>h(e,"edit-box-fill-enabled",[])},fillDisabled:{$on:(e,t)=>l(e,"edit-box-fill-disabled",[],t),$off:(e,t)=>c(e,"edit-box-fill-disabled",[],t),$emit:e=>h(e,"edit-box-fill-disabled",[])}},framePlayer:{prepared:{$on:(e,t)=>l(e,"frame-player-prepared",[],t),$off:(e,t)=>c(e,"frame-player-prepared",[],t),$emit:(e,t,i)=>h(e,"frame-player-prepared",[],t,i)}},clickableMarkers:{toggled:{$on:(e,t)=>l(e,"clickable-markers-toggled",[],t),$off:(e,t)=>c(e,"clickable-markers-toggled",[],t),$emit:e=>h(e,"clickable-markers-toggled",[])}},colorControlToggled:{$on:(e,t)=>l(e,"color-control-toggled",[],t),$off:(e,t)=>c(e,"color-control-toggled",[],t),$emit:(e,t)=>h(e,"color-control-toggled",[],t)},editorResized:{$on:(e,t)=>l(e,"editor-resized",[],t),$off:(e,t)=>c(e,"editor-resized",[],t),$emit:e=>h(e,"editor-resized",[])}},u=d},9874:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var n=i(6234);const r=[{name:"default",fontAwesomeSymbol:"",cssClass:"fas fa-link"},{name:"doc",fontAwesomeSymbol:"",cssClass:"fas fa-project-diagram"},{name:"logs",fontAwesomeSymbol:"",cssClass:"fas fa-stream"},{name:"graphs",fontAwesomeSymbol:"",cssClass:"fas fa-chart-line"},{name:"video",fontAwesomeSymbol:"",cssClass:"fas fa-video"},{name:"file",fontAwesomeSymbol:"",cssClass:"fa-solid fa-file"}],s={default:{fontAwesomeSymbol:"",cssClass:"fa-solid fa-file"},pdf:{fontAwesomeSymbol:"",cssClass:"fa-solid fa-file-pdf"}};function o(e,t){t.forEach((t=>s[t]=e))}o({fontAwesomeSymbol:"",cssClass:"fa-regular fa-file-image"},["jpg","png","bmp","gif","tiff"]),o({fontAwesomeSymbol:"",cssClass:"fa-solid fa-file"},["doc","docx","odt","rtf"]),o({fontAwesomeSymbol:"",cssClass:"fa-solid fa-file-excel"},["xls","xlsx"]),o({fontAwesomeSymbol:"",cssClass:"fa-solid fa-file-zipper"},["zip","gz","bz2","iso"]);const a={knownTypes:r,findTypeByNameOrDefault:e=>(0,n.sE)(r,(t=>t.name===e))||r[0],findFileIcon:e=>s.hasOwnProperty(e)?s[e]:s.default}},4525:(e,t,i)=>{"use strict";i.d(t,{sV:()=>L,mQ:()=>M,XT:()=>N,oY:()=>$,zp:()=>D,gs:()=>O});var n=i(4670),r=i.n(n),s=i(6234),o=i(7196),a=i(1377),l=i(8814),c=i(4691),h=i(8595);function d(e,t){return{findItemByTemplatedId:u(t),moveNativeChildren:f(t),copyNativeChildren:g(t),swapNativeChildren:v(t),duplicateItem:m(t),updateItem:p(e,t),clone:e=>c.Z.clone(e)}}function u(e){return t=>y(e,t)}function p(e,t){return(i,n)=>{const r=y(t,i);r&&(n(r),(0,a.z9)(r),h.Z.item.changed.specific.$emit(e,r.id),h.Z.schemeChangeCommitted.$emit(e))}}function m(e){return(t,i,n)=>{const s=x(e,t);if(!s)return;const o=s.item,a=s.parentItem,l={id:r().generate(),name:n,args:{templated:!0,templatedId:i}};for(let e in o)o.hasOwnProperty(e)&&"childItems"!==e&&"meta"!==e&&"args"!==e&&"id"!==e&&"name"!==e&&(l[e]=c.Z.clone(o[e]));a.childItems.push(l)}}function f(e){return(t,i)=>{const n=y(e,t),r=y(e,i);n&&r&&(r.childItems=n.childItems||[],n.childItems=[])}}function g(e){return(t,i)=>{const n=y(e,t),s=y(e,i);n&&s&&Array.isArray(n.childItems)&&(Array.isArray(s.childItems)||(s.childItems=[]),n.childItems.forEach((e=>{e.args&&e.args.templatedId&&!e.args.templateRef||s.childItems.push(function(e){const t=c.Z.clone(e);return(0,o.Hp)([t],(e=>{e.id=r().generate(),e.meta={}})),t}(e))})))}}function v(e){return(t,i)=>{const n=y(e,t),r=y(e,i);if(!n||!r)return;const s=r.childItems;r.childItems=n.childItems||[],n.childItems=s}}function y(e,t){if(e.args&&e.args.templatedId===t)return e;if(!Array.isArray(e.childItems))return null;let i=[].concat(e.childItems);for(;i.length>0;){const e=i.shift();if(e.args&&e.args.templatedId===t)return e;e.args&&e.args.templatedId&&!e.args.templateRef&&Array.isArray(e.childItems)&&(i=i.concat(e.childItems))}return null}function x(e,t){if(!Array.isArray(e.childItems))return null;for(let i=0;i<e.childItems.length;i++){const n=e.childItems[i];if(n.args&&n.args.templated&&!n.args.templateRef){if(n.args.templatedId===t)return{item:n,parentItem:e};const i=x(n,t);if(i)return i}}return null}var b=i(8197),w=i(9532),C=i(387);function P(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function k(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?P(Object(i),!0).forEach((function(t){S(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):P(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function S(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i(8457);const I={BUILD:"build",POST_BUILD:"post-build",EVENT:"event"};class A{constructor(e,t,i){this.phase=e,this.eventName=t,this.eventId=i}}const _={panels:[]};function E(e){(0,a.z9)(e),Array.isArray(e.childItems)&&e.childItems.forEach(E)}function T(e){const t=e.join("\n");return(0,w.BJ)(t)}function M(e,t,i){const n=B(t.init),r=(0,l.nh)({"$-eval":n,controls:t.controls||[]}),o=(0,l.nh)({"$-eval":n,item:t.item}),a=(0,l.nh)({item:t.item}),c=(0,l.nh)({"$-eval":n,editor:t.editor||_}),h=T(n),u={};t.handlers&&(0,s.b0)(t.handlers,((e,t)=>{const i=B(e);u[t]=T(i)}));const p={};return(0,s.b0)(t.args,((e,t)=>{p[t]=e})),{name:t.name,description:t.description,preview:t.preview,defaultArea:t.defaultArea||{x:0,y:0,w:350,h:200,px:.5,py:.5,sx:1,sy:1},templateRef:i,args:t.args||{},argsDef:t.args,defaultArgs:p,hasHandler:e=>u.hasOwnProperty(e),triggerTemplateEvent(i,n,r){if(!u.hasOwnProperty(n))return null;const o=k(k(k(k({},p),i.args.templateArgs),d(e,i)),{},{width:i.area.w,height:i.area.h,context:new A(I.EVENT,n,i.id)}),a=new C.s(o);h.evalNode(a),(0,s.b0)(r,((e,t)=>{a.set(t,e)})),u[n].evalNode(a);const l=a.getData(),c={};return(0,s.b0)(t.args,((e,t)=>{c[t]=l[t]})),l.hasOwnProperty("width")&&(c.width=l.width),l.hasOwnProperty("height")&&(c.height=l.height),i.args.templateArgs=c,l},onDeleteItem(e,t,i){return this.triggerTemplateEvent(e,"delete",{itemId:t,item:i})},onAreaUpdate(e,t,i,n){return this.triggerTemplateEvent(e,"area",{itemId:t,item:i,area:n})},onCopyItem(e,t,i){return this.triggerTemplateEvent(e,"copy",{itemId:t,item:i})},onPasteItemInto(e,t,i){return this.triggerTemplateEvent(e,"paste",{itemId:t,items:i})},buildItem:(e,t,i,n)=>n?a(k(k({},e),{},{width:t,height:i,context:new A(I.POST_BUILD,null,"")})).item:o(k(k({},e),{},{width:t,height:i,context:new A(I.BUILD,null,"")})).item,buildEditor:(t,i,r,s,o)=>function(e,t,i,n,r,s){const o=k({selectedItemIds:new b.a(...s)},d(e,n)),a=k(k(k({},r),o),{},{context:new A(I.EVENT,"editor","")}),c=t(a).editor;return c&&Array.isArray(c.panels)?{panels:c.panels.map((e=>{let t=()=>!0;e.condition&&(t=(0,l.at)(e.condition,a));let r=null;if(e.click){const t=(0,l.QQ)(i.concat([e.click]),{context:new A(I.EVENT,"panel-click",e.id)});r=e=>{const i=k(k(k({},n.args&&n.args.templateArgs?n.args.templateArgs:{}),{},{width:n.area.w,height:n.area.h},o),{},{panelItem:e});return t(i)}}const s=(e.items||[]).map((e=>(E(e),e)));return k(k({},e),{},{slotSize:e.slotSize||{width:100,height:60},items:s,condition:t,click:r})})).filter((e=>e.condition()))}:_}(e,c,n,t,k(k({},i),{},{width:r,height:s}),o),buildControls:(t,i,s)=>r(k(k({},t),{},{width:i,height:s,context:new A(I.EVENT,"control","")})).controls.map((r=>{const o=[].concat(n).concat(B(r.click)),a=(0,l.QQ)(o,k(k({},t),{},{width:i,height:s,context:new A(I.EVENT,"control",r.id)}));return k(k({},r),{},{click:t=>a(k({control:r},d(e,t)))})})),getDefaultArgs(){const e={};return(0,s.b0)(t.args||{},((t,i)=>{e[i]=t.value})),e}}}function $(e,t,i,n,r=!1){const l=e.buildItem(t,i,n,r);return l.area.w=i,l.area.h=n,(0,o.Hp)([l],((e,t)=>{e.args||(e.args={}),null===t||e.hasOwnProperty("locked")||(e.locked=!0),e.args.templatedId=e.id,e.args.templated=!0,(0,a.z9)(e)})),l.args.templateRef=e.templateRef,l.args.templateArgs={},(0,s.b0)(e.args,((e,i)=>{t.hasOwnProperty(i)&&(l.args.templateArgs[i]=t[i])})),l}function O(e,t,i,n,r){return D(e,t,i,n,r,!0)}function D(e,t,i,n,a,l=!1){i||(i={}),i.hasOwnProperty("width")&&(n=i.width,e.area.w=n),i.hasOwnProperty("height")&&(a=i.height,e.area.h=a);const c=k(k({},t.getDefaultArgs()),i),h=$(t,c,n,a,l),d=new Map,u=new Map;(0,o.tb)([e],((e,t,i)=>!t||e.args&&e.args.templatedId&&!e.args.templateRef?(d.set(e.args.templatedId,e),!0):(u.has(t.args.templatedId)?u.get(t.args.templatedId).push(e):u.set(t.args.templatedId,[e]),!1)));const p=[],m=new Map;(0,o.Hp)([h],((e,t,i)=>{const n=d.get(e.args.templatedId);if(!n){const t=r().generate();return m.set(e.id,t),e.id=t,void p.push(e)}const o=function(e){if(!Array.isArray(e))return()=>!1;const t=e.map((e=>new RegExp(e)));return e=>{for(let i=0;i<t.length;i++)if(t[i].test(e))return!0;return!1}}(e.args&&e.args.templateIgnoredProps||[]);n.childItems=e.childItems;const a=e;for(let e in a){let i=a.hasOwnProperty(e)&&"id"!==e&&"meta"!==e&&"description"!==e&&"childItems"!==e&&"_childItems"!==e&&"textSlots"!==e;i&&!t&&(i="name"!==e&&"description"!==e&&"tags"!==e&&"area"!==e&&"autoLayout"!==e),i&&("shapeProps"===e&&a.shapeProps?(n.shapeProps||(n.shapeProps={}),(0,s.b0)(a.shapeProps,((e,t)=>{o(`shapeProps.${t}`)||(n.shapeProps[t]=e)}))):o(e)||("behavior"===e?n.behavior=R(a.behavior,n.behavior):n[e]=a[e]))}m.set(e.args.templatedId,n.id),t&&(t.childItems[i]=n,p.push(n))}));const f=e=>{const t=u.get(e.args.templatedId);t&&t.length>0&&(e.childItems||(e.childItems=[]),e.childItems=e.childItems.concat(t))};f(e);for(let e=0;e<p.length;e++)f(p[e]);return m}function B(e){return Array.isArray(e)?[e.join("\n")]:"string"==typeof e?[e]:[]}function L(e){(0,o.Hp)([e],(e=>{e.args&&(delete e.args.templateArgs,delete e.args.templateIgnoredProps,delete e.args.templateRef,delete e.args.templatedId,delete e.args.templated),e.meta&&(delete e.meta.templateRef,delete e.meta.templateRootId,delete e.meta.templated)}))}function R(e,t){const i=[],n=new Map;t.events.forEach((e=>{n.has(e.event)?n.get(e.event).push(e):n.set(e.event,[e])}));const s=new Set,o=e=>{const t=s.has(e.id)?r().generate():e.id;i.push(k(k({},e),{},{id:t}))};return e.events.forEach((e=>{const t=n.get(e.event);t&&t.shift(),o(e)})),n.forEach((e=>{0!==e.length&&e.forEach((e=>{o(e)}))})),k(k({},e),{},{events:i})}function N(e,t,i){const n=function(e){const t=c.Z.clone(e);return(0,o.Hp)([t],(e=>{"component"===e.shape&&(e.args||(e.args={}),e.args.templateIgnoredProps=["shapeProps.kind","shapeProps.schemeId","shapeProps.referenceItem"]);const t="template-ignore-";Array.isArray(e.tags)&&e.tags.forEach((i=>{if(i.startsWith(t)){const i=t.substring(16);e.args||(e.args={}),Array.isArray(e.args.templateIgnoredProps)||(e.args.templateIgnoredProps=[]),e.args.templateIgnoredProps.push(i)}}))})),t}(e.items[0]);return M(i,{name:e.name,args:{},defaultArea:{x:0,y:0,w:100,h:100},item:n},"#doc:"+t)}},4502:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});const n={solid:()=>"",dotted:e=>`${e} ${2*e}`,dashed:e=>`${4*e} ${4*e}`,"dashed-2":e=>`${4*e} ${2*e}`,"dashed-3":e=>`${4*e} ${8*e}`,"dashed-dotted":e=>`${4*e} ${2*e} ${2*e} ${2*e}`,"dashed-dotted-2":e=>`${4*e} ${e} ${e} ${e}`,"dashed-dotted-3":e=>`${8*e} ${4*e} ${4*e} ${4*e}`,"dashed-dotted-4":e=>`${8*e} ${2*e} ${2*e} ${2*e}`},r={createDashArray(e,t){const i=n[e];return i?i(t):""},generateStrokeHtml(e,t,i,n,r){return`<svg width="${n}px" height="${r}px"><path d="M0 ${i} l ${n} 0" fill="none" stroke="#111111" stroke-width="${t}" stroke-dasharray="${this.createDashArray(e,t)}"/></svg>`},patterns:Object.keys(n),SOLID:"solid",DASHED:"dashed",DOTTED:"dotted"}},6942:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={shapeConfig:{shapeType:"standard",id:"bracket",menuItems:[{name:"Curly Bracket",group:"General",iconUrl:"assets/images/items/curly-bracket.svg",item:{shapeProps:{fill:{type:"none"},style:"curly"}},size:{w:20,h:200},previewArea:{x:5,y:30,w:130,h:15,r:0}},{name:"Square Bracket",group:"General",iconUrl:"assets/images/items/square-bracket.svg",item:{shapeProps:{fill:{type:"none"},style:"square"}},size:{w:20,h:200},previewArea:{x:5,y:30,w:130,h:15,r:0}},{name:"Round Bracket",group:"General",iconUrl:"assets/images/items/round-bracket.svg",item:{shapeProps:{fill:{type:"none"},style:"round"}},size:{w:20,h:200},previewArea:{x:5,y:30,w:130,h:15,r:0}}],getPins:e=>({}),getTextSlots:e=>[],computePath(e){const t={x:0,y:0},i={x:0,y:1};let n=e.area.h;const r={x:1,y:0};let s=e.area.w;e.area.w<e.area.h&&(i.x=1,i.y=0,n=e.area.w,r.x=0,r.y=-1,s=e.area.h,t.x=0,t.y=e.area.h);let o=[];o="curly"===e.shapeProps.style?function(e,t,i,n,r){const s=Math.min(40,.2*r),o=Math.min(20,.2*r);return[e,{type:"Q",x1:e.x+t.x*n/2,y1:e.y+t.y*n/2,x2:e.x+t.x*n/2+i.x*s,y2:e.y+t.y*n/2+i.y*s},{x:e.x+t.x*n/2+i.x*(r/2-o),y:e.y+t.y*n/2+i.y*(r/2-o)},{type:"Q",x1:e.x+t.x*n/2+i.x*(r/2),y1:e.y+t.y*n/2+i.y*r/2,x2:e.x+t.x*n+i.x*(r/2),y2:e.y+t.y*n+i.y*(r/2)},{type:"Q",x1:e.x+t.x*n/2+i.x*(r/2),y1:e.y+t.y*n/2+i.y*r/2,x2:e.x+t.x*n/2+i.x*(r/2+o),y2:e.y+t.y*n/2+i.y*(r/2+o)},{x:e.x+t.x*n/2+i.x*(r-s),y:e.y+t.y*n/2+i.y*(r-s)},{type:"Q",x1:e.x+i.x*r+t.x*n/2,y1:e.y+i.y*r+t.y*n/2,x2:e.x+i.x*r,y2:e.y+i.y*r}]}(t,i,r,n,s):"curly-sharp"===e.shapeProps.style?function(e,t,i,n,r){const s=Math.min(40,.2*r),o=Math.min(20,.2*r);return[e,{x:e.x+t.x*n/2+i.x*s,y:e.y+t.y*n/2+i.y*s},{x:e.x+t.x*n/2+i.x*(r/2-o),y:e.y+t.y*n/2+i.y*(r/2-o)},{x:e.x+t.x*n+i.x*(r/2),y:e.y+t.y*n+i.y*(r/2)},{x:e.x+t.x*n/2+i.x*(r/2+o),y:e.y+t.y*n/2+i.y*(r/2+o)},{x:e.x+t.x*n/2+i.x*(r-s),y:e.y+t.y*n/2+i.y*(r-s)},{x:e.x+i.x*r,y:e.y+i.y*r}]}(t,i,r,n,s):"round"===e.shapeProps.style?function(e,t,i,n,r){const s=.3;return[e,{type:"C",x1:e.x+t.x*n+i.x*s,y1:e.y+t.y*n+i.y*s,x2:e.x+t.x*n+i.x*(r-s),y2:e.y+t.y*n+i.y*(r-s),x3:e.x+i.x*r,y3:e.y+i.y*r}]}(t,i,r,n,s):function(e,t,i,n,r){return[e,{x:e.x+t.x*n,y:e.y+t.y*n},{x:e.x+t.x*n+i.x*r,y:e.y+t.y*n+i.y*r},{x:e.x+i.x*r,y:e.y+i.y*r}]}(t,i,r,n,s);let a=`M ${o[0].x} ${o[0].y}`;for(let e=1;e<o.length;e++)"C"===o[e].type?a+=` C ${o[e].x1} ${o[e].y1} ${o[e].x2} ${o[e].y2} ${o[e].x3} ${o[e].y3}`:"Q"===o[e].type?a+=` Q ${o[e].x1} ${o[e].y1} ${o[e].x2} ${o[e].y2}`:a+=` L ${o[e].x} ${o[e].y}`;return a},args:{style:{type:"choice",value:"curly",name:"Style",options:["curly","curly-sharp","square","round"]}}}}},1008:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(6234),r=i(3590);const s={tail:function(e){let t=0,i=0;return"top"===e.shapeProps.tailSide?(t=e.shapeProps.tailPosition,i=-e.shapeProps.tailLength):"bottom"===e.shapeProps.tailSide?(t=e.shapeProps.tailPosition,i=e.area.h+e.shapeProps.tailLength):"left"===e.shapeProps.tailSide?(t=-e.shapeProps.tailLength,i=e.shapeProps.tailPosition):"right"===e.shapeProps.tailSide&&(t=e.area.w+e.shapeProps.tailLength,i=e.shapeProps.tailPosition),{x:t,y:i}},tailWidth:function(e){const t=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4),i=e.area.w,n=e.area.h;let s=0,o=0;const a=Math.max(0,e.shapeProps.tailWidth);if("top"===e.shapeProps.tailSide){let n=0;const l=Math.max(0,i-2*t);l>0&&(n=r.Z.clamp(e.shapeProps.tailPosition/l,0,1)),s=t+a+(l-a)*n,o=0}else if("bottom"===e.shapeProps.tailSide){let l=0;const c=Math.max(0,i-2*t);c>0&&(l=1-r.Z.clamp(e.shapeProps.tailPosition/c,0,1)),s=i-t-a-(c-a)*l,o=n}else if("left"===e.shapeProps.tailSide){let i=0;const l=Math.max(0,n-2*t);l>0&&(i=1-r.Z.clamp(e.shapeProps.tailPosition/l,0,1)),s=0,o=n-t-a-(l-a)*i}else if("right"===e.shapeProps.tailSide){let l=0;const c=Math.max(0,n-2*t);c>0&&(l=r.Z.clamp(e.shapeProps.tailPosition/c,0,1)),s=i,o=t+a+(c-a)*l}return{x:s,y:o}},cornerRadius:function(e){return{x:Math.min(e.area.w,Math.max(e.area.w-e.shapeProps.cornerRadius,e.area.w/2)),y:0}}},o={shapeConfig:{shapeType:"standard",id:"comment",menuItems:[{group:"Basic Shapes",name:"Comment",iconUrl:"assets/images/items/comment.svg",item:{shapeProps:{cornerRadius:5,tailLength:20,tailWidth:20,tailSide:"bottom",tailPosition:10}},previewArea:{x:5,y:5,w:130,h:60,r:0}}],computePath(e){const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4);let s=`M 0 ${n} `,o=[{name:"top",length:t-2*n,invertT:!0,p1x:n,p1y:0,vx:1,vy:0,nx:0,ny:-1,ax:1,ay:-1},{name:"right",length:i-2*n,invertT:!0,p1x:t,p1y:n,vx:0,vy:1,nx:1,ny:0,ax:1,ay:1},{name:"bottom",length:t-2*n,invertT:!1,p1x:t-n,p1y:i,vx:-1,vy:0,nx:0,ny:1,ax:-1,ay:1},{name:"left",length:i-2*n,invertT:!1,p1x:0,p1y:i-n,vx:0,vy:-1,nx:-1,ny:0,ax:-1,ay:-1}];const a=Math.max(0,e.shapeProps.tailWidth);for(let t=0;t<o.length;t++){const i=o[t];if(s+=`a ${n} ${n} 0 0 1 ${n*i.ax} ${n*i.ay} `,e.shapeProps.tailSide===i.name){const t=e.shapeProps.tailLength,n=Math.min(Math.max(0,i.length-a),a);let o=0;i.length>0&&(o=r.Z.clamp(e.shapeProps.tailPosition/i.length,0,1)),i.invertT&&(o=1-o);const l=(i.length-n)*(1-o),c=(i.length-n)*o,h=l*i.vx,d=l*i.vy,u=i.p1x+h,p=i.p1y+d,m=u+n*i.vx,f=p+n*i.vy,g=m+c*i.vx,v=f+c*i.vy;let y=0,x=0;"bottom"===i.name||"top"===i.name?(y=e.shapeProps.tailPosition,x=i.p1y+t*i.ny):(x=e.shapeProps.tailPosition,y=i.p1x+t*i.nx),s+=`L ${i.p1x} ${i.p1y} L ${u} ${p} L ${y} ${x}  L ${m} ${f} L ${g} ${v} `}else s+=`l ${i.length*i.vx} ${i.length*i.vy} `}return s+=" z",s},controlPoints:{make(e,t){if(t)return s[t](e);{const t={};return(0,n.Ed)(s,((i,n)=>{t[n]=i(e)})),t}},handleDrag(e,t,i,n,s,o){"tail"===t?function(e,t,i,n,s){let o=t+n,a=i+s,l=3;r.Z.identifyPointSideAgainstLine(o,a,r.Z.createLineEquation(0,0,e.area.w,e.area.h))<0&&(l&=1),r.Z.identifyPointSideAgainstLine(o,a,r.Z.createLineEquation(0,e.area.h,e.area.w,0))<0&&(l&=2),0===l?(e.shapeProps.tailSide="top",e.shapeProps.tailPosition=o,e.shapeProps.tailLength=-a):3===l&&(e.shapeProps.tailSide="bottom",e.shapeProps.tailPosition=o,e.shapeProps.tailLength=a-e.area.h),2==l?(e.shapeProps.tailSide="left",e.shapeProps.tailPosition=a,e.shapeProps.tailLength=-o):1==l&&(e.shapeProps.tailSide="right",e.shapeProps.tailPosition=a,e.shapeProps.tailLength=o-e.area.w)}(e,i,n,s,o):"cornerRadius"===t?e.shapeProps.cornerRadius=Math.max(0,e.area.w-Math.max(e.area.w/2,i+s)):"tailWidth"===t&&function(e,t,i,n,s){const o=t+n,a=i+s,l=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4),c=e.area.w,h=e.area.h,d=Math.max(0,e.shapeProps.tailWidth);if("top"===e.shapeProps.tailSide){let t=0;const i=Math.max(0,c-2*l);i>0&&(t=r.Z.clamp(e.shapeProps.tailPosition/i,0,1));const n=l+(i-d)*t;e.shapeProps.tailWidth=r.Z.clamp(o-n,0,i/2)}else if("bottom"===e.shapeProps.tailSide){let t=0;const i=Math.max(0,c-2*l);i>0&&(t=1-r.Z.clamp(e.shapeProps.tailPosition/i,0,1));const n=c-l-(i-d)*t;e.shapeProps.tailWidth=r.Z.clamp(n-o,0,i/2)}else if("left"===e.shapeProps.tailSide){let t=0;const i=Math.max(0,h-2*l);i>0&&(t=1-r.Z.clamp(e.shapeProps.tailPosition/i,0,1));const n=h-l-(i-d)*t;e.shapeProps.tailWidth=r.Z.clamp(n-a,0,i/2)}else if("right"===e.shapeProps.tailSide){let t=0;const i=Math.max(0,h-2*l);i>0&&(t=r.Z.clamp(e.shapeProps.tailPosition/i,0,1));const n=l+(i-d)*t;e.shapeProps.tailWidth=r.Z.clamp(a-n,0,i/2)}}(e,i,n,s,o)}},args:{cornerRadius:{type:"number",value:10,name:"Corner radius",min:0},tailLength:{type:"number",value:30,name:"Tail Length"},tailWidth:{type:"number",value:40,name:"Tail Width"},tailSide:{type:"choice",value:"bottom",name:"Tail Side",options:["top","bottom","left","right"]},tailPosition:{type:"number",value:0,name:"Tail Position"}}}}},125:(e,t,i)=>{"use strict";function n(e){return{hollow:!1,renderFunc:e}}function r(e){return{hollow:!0,renderFunc:e}}i.d(t,{g:()=>l,j:()=>a});const s={empty:null,triangle:n(((e,t,i,n)=>h(e,t,i,n,1,2,!0))),"triangle-1":n(((e,t,i,n)=>h(e,t,i,n,1,1,!0))),"triangle-2":n(((e,t,i,n)=>h(e,t,i,n,1,3,!0))),arrow:n(((e,t,i,n)=>h(e,t,i,n,1,2,!1))),"arrow-1":n(((e,t,i,n)=>h(e,t,i,n,1,1,!1))),"arrow-2":n(((e,t,i,n)=>h(e,t,i,n,1,3,!1))),"triangle-h":r(((e,t,i,n)=>h(e,t,i,n,1,2,!0))),"triangle-h-1":r(((e,t,i,n)=>h(e,t,i,n,1,1,!0))),"triangle-h-2":r(((e,t,i,n)=>h(e,t,i,n,1,3,!0))),circle:n(((e,t,i,n)=>{const r=i*i+n*n;if(r>.01){let s=Math.sqrt(r)/2;return{path:` M ${e+i/2-s}, ${t+n/2} a ${s},${s} 0 1,0 ${2*s},0 a ${s},${s} 0 1,0 -${2*s},0`,hollow:!1,entryPoint:{x:e+i,y:t+n}}}return null})),"circle-cross":r(((e,t,i,n)=>{const r=i*i+n*n;if(r>.01){let s=Math.sqrt(r)/2;const o=e+i/2,a=t+n/2,l=Math.cos(Math.PI/4)*s;return{path:` M ${o-s}, ${a} a ${s},${s} 0 1,0 ${2*s},0 a ${s},${s} 0 1,0 -${2*s},0 z M ${o-l} ${a-l} L ${o+l} ${a+l}  M ${o+l} ${a-l} L ${o-l} ${a+l}`,hollow:!0,entryPoint:{x:e+i,y:t+n}}}return null})),"double-arrow":n(((e,t,i,n)=>h(e,t,i,n,2,2,!1))),"double-arrow-1":n(((e,t,i,n)=>h(e,t,i,n,2,1,!1))),"double-arrow-2":n(((e,t,i,n)=>h(e,t,i,n,2,3,!1))),"double-triangle":n(((e,t,i,n)=>h(e,t,i,n,2,2,!0))),"double-triangle-1":n(((e,t,i,n)=>h(e,t,i,n,2,1,!0))),"double-triangle-2":n(((e,t,i,n)=>h(e,t,i,n,2,3,!0))),"double-triangle-h":r(((e,t,i,n)=>h(e,t,i,n,2,2,!0))),"double-triangle-h-1":r(((e,t,i,n)=>h(e,t,i,n,2,1,!0))),"double-triangle-h-2":r(((e,t,i,n)=>h(e,t,i,n,2,3,!0))),diamond:n(((e,t,i,n)=>d(e,t,i,n,.5))),"diamond-1":n(((e,t,i,n)=>d(e,t,i,n,1))),"diamond-2":n(((e,t,i,n)=>d(e,t,i,n,1.5))),"diamond-h":r(((e,t,i,n)=>d(e,t,i,n,.5))),"diamond-h-1":r(((e,t,i,n)=>d(e,t,i,n,1))),"diamond-h-2":r(((e,t,i,n)=>d(e,t,i,n,1.5))),line:n(((e,t,i,n)=>c(e,t,i,n,1))),"double-line":n(((e,t,i,n)=>c(e,t,i,n,2))),"tripple-line":n(((e,t,i,n)=>c(e,t,i,n,3)))},o=Object.keys(s);function a(){return o}function l(e,t,i,n,r){const o=s[r];if(o){const r=o.renderFunc(e,t,i,n);return o.hollow&&(r.hollow=!0),r}return null}function c(e,t,i,n,r){let s="";const o=n/2,a=-i/2;for(let l=0;l<r;l++){const c=e+i*(l+1)/(r+1),h=t+n*(l+1)/(r+1);s+=`M ${c+o} ${h+a} L ${c-o} ${h-a} `}return{path:s,hollow:!0,prolongLine:!0,entryPoint:{x:e+i,y:t+n}}}function h(e,t,i,n,r,s,o){let a="";const l=n/(2*s),c=-i/(2*s);for(let s=0;s<r;s++){const h=e+i*s/r,d=t+n*s/r;a+=`M ${h+i/r+l} ${d+n/r+c} L ${h} ${d} L ${h+i/r-l} ${d+n/r-c} `,o&&(a+=" z ")}return{path:a,hollow:!o,prolongLine:!o,entryPoint:{x:e+i,y:t+n}}}function d(e,t,i,n,r){const s=r*n/2,o=-r*i/2;return{path:`M ${e} ${t} L ${e+i/2-s} ${t+n/2-o} L ${e+i} ${t+n} L ${e+i/2+s} ${t+n/2+o} z`,hollow:!1,entryPoint:{x:e+i,y:t+n}}}},1484:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(3590);const r={shapeConfig:{shapeType:"standard",id:"donut_segment",menuItems:[{group:"Basic Shapes",name:"Donut Segment",iconUrl:"assets/images/items/donut-segment.svg",size:{w:60,h:60},previewArea:{x:0,y:0,w:150,h:150,r:0}}],computePath(e){const t=e.area.w/2,i=e.area.h/2,r=Math.min(e.area.w,e.area.h)/2,s=r*n.Z.clamp(e.shapeProps.hole,0,100)/100;if(e.shapeProps.percent<1e-4)return`M ${t} ${i-s} L ${t} ${i-r}`;if(e.shapeProps.percent>99.99)return`M ${t-r} ${i}\n                    A ${r} ${r} 0 1 1 ${t+r} ${i}\n                    A ${r} ${r} 0 1 1 ${t-r} ${i}\n                    M ${t+s} ${i}\n                    A ${s} ${s} 0 1 0 ${t-s} ${i}\n                    A ${s} ${s} 0 1 0 ${t+s} ${i} Z`;const o=2*Math.PI*e.shapeProps.percent/100,a=t+Math.sin(o)*r,l=i-Math.cos(o)*r,c=t+Math.sin(o)*s,h=i-Math.cos(o)*s,d=e.shapeProps.percent<50?0:1;return`M ${t} ${i-s}\n                L ${t} ${i-r}\n                A ${r} ${r} 0 ${d} 1 ${a} ${l}\n                L ${c} ${h}\n                A ${s} ${s} 0 ${d} 0 ${t} ${i-s} Z`},args:{percent:{type:"number",value:75,min:0,max:100,name:"Segment Percent (%)",description:"Percent of the donut area that should be filled"},hole:{type:"number",value:75,min:0,max:100,name:"Donut Percent (%)"}}}}},8915:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(9498);const r={shapeConfig:{shapeType:"standard",id:"ellipse",menuItems:[{group:"Basic Shapes",name:"Ellipse",iconUrl:"assets/images/items/ellipse.svg"}],getPins:e=>(0,n.Fb)(e),computePath:e=>(0,n.Iv)(e.area.w,e.area.h)}}},5664:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={shapeConfig:{shapeType:"standard",id:"npoly",menuItems:[{group:"Basic Shapes",name:"N-Polygon",iconUrl:"assets/images/items/npolygon.svg",size:{w:60,h:60},previewArea:{x:0,y:0,w:150,h:150,r:0}}],computePath(e){const t=e.area.w/2,i=e.area.h/2,n=Math.max(3,e.shapeProps.corners);let r="";for(let s=0;s<n;s++){const o=e.area.w/2*Math.cos(2*s*Math.PI/n-Math.PI/2+e.shapeProps.angle*Math.PI/180)+t,a=e.area.h/2*Math.sin(2*s*Math.PI/n-Math.PI/2+e.shapeProps.angle*Math.PI/180)+i;0===s&&(r=`M ${o} ${a} `),r+=` L ${o} ${a}`}return r+" Z"},args:{corners:{type:"number",value:6,name:"Corners"},angle:{type:"number",value:0,name:"Angle"}}}}},9831:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(9498);const r={shapeConfig:{shapeType:"empty",id:"none",menuItems:[{group:"General",name:"Text",iconUrl:"assets/images/items/text.svg",item:{textSlots:{body:{text:"Text ...",paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0}}}}],getPins:e=>(0,n.Fb)(e),computePath(e){const t=e.area.w,i=e.area.h;return`M 0 0  L ${t} 0  L ${t} ${i}  L 0 ${i} Z`},args:{}}}},6227:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={shapeConfig:{shapeType:"standard",id:"pie_segment",menuItems:[{group:"Basic Shapes",name:"Pie Segment",iconUrl:"assets/images/items/pie-segment.svg",size:{w:60,h:60},previewArea:{x:0,y:0,w:150,h:150,r:0}}],computePath(e){const t=e.area.w/2,i=e.area.h/2,n=Math.min(e.area.w,e.area.h)/2;if(e.shapeProps.percent<1e-4)return`M ${t} ${i} L ${t} ${i-n}`;if(e.shapeProps.percent>99.99)return`M ${t-n} ${i} A ${n} ${n} 0 1 1 ${t+n} ${i}  A ${n} ${n} 0 1 1 ${t-n} ${i} Z`;const r=2*Math.PI*e.shapeProps.percent/100,s=t+Math.sin(r)*n,o=i-Math.cos(r)*n;return`M ${t} ${i-n} A ${n} ${n} 0 ${e.shapeProps.percent<50?0:1} 1 ${s} ${o} L ${t} ${i} Z`},args:{percent:{type:"number",value:75,min:0,max:100,name:"Percent (%)",description:"Percent of the circle area that should be filled"}}}}},1969:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(3590),r=i(9498);const s={shapeConfig:{shapeType:"standard",id:"rect",menuItems:[{group:"Basic Shapes",name:"Rect",iconUrl:"assets/images/items/rect.svg",item:{shapeProps:{cornerRadius:0}}},{group:"Basic Shapes",name:"Rounded Rect",iconUrl:"assets/images/items/rounded-rect.svg",item:{shapeProps:{cornerRadius:20}}},{group:"General",name:"Overlay",iconUrl:"assets/images/items/overlay.svg",description:"\n                It lets you create a clickable area on the image (or any other element of the scheme) and treat it like an object.\n                E.g. you can select it, trigger events or connect it to other items on the page.\n            ",item:{cursor:"pointer",opacity:5,shapeProps:{cornerRadius:0},behavior:{events:[{event:"mousein",actions:[{element:"self",method:"set",args:{field:"opacity",value:50,animated:!0,animationDuration:.2,transition:"ease-in-out"}}]},{event:"mouseout",actions:[{element:"self",method:"set",args:{field:"opacity",value:5,animated:!0,animationDuration:.2,transition:"ease-in-out"}}]}]}}},{group:"General",name:"Button",iconUrl:"assets/images/items/button.svg",item:{cursor:"pointer",opacity:100,shapeProps:{cornerRadius:20,fill:{type:"gradient",color:"rgba(29, 108, 176, 1)",gradient:{colors:[{c:"rgba(25, 121, 204, 1)",p:0},{c:"rgba(86, 172, 246, 1)",p:100}],type:"linear",direction:0}},strokeColor:"rgba(39, 132, 211, 1)",strokeSize:2,strokePattern:"solid"},textSlots:{body:{bold:!0,text:"<p>Button</p>",color:"rgba(255, 255, 255, 1)",halign:"center",valign:"middle"}},behavior:{events:[{event:"mousein",actions:[{element:"self",method:"set",args:{field:"opacity",value:90}}]},{event:"mouseout",actions:[{element:"self",method:"set",args:{field:"opacity",value:100}}]}]}},previewArea:{x:0,y:0,w:140,h:60,r:0}}],getPins:e=>(0,r.Fb)(e),computePath:e=>(0,r.Qb)(e.area.w,e.area.h,e.shapeProps.cornerRadius),editorProps:{},controlPoints:{make:e=>({cornerRadius:{x:Math.min(e.area.w,Math.max(e.area.w-e.shapeProps.cornerRadius,e.area.w/2)),y:0}}),handleDrag(e,t,i,r,s,o){"cornerRadius"===t&&(e.shapeProps.cornerRadius=Math.max(0,n.Z.roundPrecise(e.area.w-Math.max(e.area.w/2,i+s),1)))}},args:{cornerRadius:{type:"number",value:0,name:"Corner radius",min:0}}}}},3363:(e,t,i)=>{"use strict";i.d(t,{Z:()=>w});var n=i(6234),r=i(3590),s=i(4691),o=i(7113);const a=i(2291).Z,l=i(9849).Z;let c=[i(1969).Z,i(9831).Z,i(8915).Z,i(5664).Z,i(3730).Z,i(2513).Z,i(6942).Z,i(477).Z,i(1008).Z,i(1061).Z,i(1526).Z,i(3055).Z,i(5120).Z,i(4530).Z,i(2270).Z,i(5198).Z,i(7022).Z,i(6227).Z,i(1484).Z,i(9354).Z,i(2629).ZP,i(6453).Z,i(4643).Z,i(8733).Z,i(9078).Z,i(1533).Z,i(5845).Z,i(5906).Z,i(9699).Z,i(3652).Z,i(9880).Z,i(4437).Z,i(2517).Z,i(4387).Z,i(4358).Z,i(7569).Z,i(6852).Z,i(7153).Z,i(8396).Z,i(3486).Z,i(1693).Z,i(8723).Z,i(5576).Z,i(8398).Z,i(2401).Z];function h(e){return[]}c=c.concat(a.shapes).concat(l.shapes);const d={description:"rich",onlyEditMode:!1,customTextRendering:!1,disableEventLayer:!1},u={fill:{name:"Fill",type:"advanced-color"},strokeColor:{name:"Stroke",type:"color"},strokeSize:{name:"Stroke Size",type:"number"},strokePattern:{name:"Stroke Pattern",type:"stroke-pattern"}};function p(e){return[{name:"body",area:{x:0,y:0,w:e.area.w,h:e.area.h}}]}function m(e){return{c:{x:e.area.w/2,y:e.area.h/2}}}function f(e,t,i){return r.Z.worldPointInArea(e,t,i.area,i.meta&&i.meta.transformMatrix?i.meta.transformMatrix:null)}function g(e){const t=f(0,0,e),i=f(e.area.w,0,e),n=f(e.area.w,e.area.h,e),r=f(0,e.area.h,e),s=[];return e.area.w>1e-4&&(Math.abs(t.y-i.y)<1e-4&&s.push({item:e,snapperType:"horizontal",value:t.y}),Math.abs(n.y-r.y)<1e-4&&s.push({item:e,snapperType:"horizontal",value:n.y}),Math.abs(t.x-r.x)<1e-4&&s.push({item:e,snapperType:"vertical",value:t.x}),Math.abs(i.x-n.x)<1e-4&&s.push({item:e,snapperType:"vertical",value:i.x})),s}function v(e){return{x:r.Z.clamp(5,e.area.w-15-5,e.area.w-15),y:r.Z.clamp(5,0,e.area.h-15),w:15,h:15}}function y(e,t){let i={};e.shapeConfig&&(i=e.shapeConfig),i.shapeType||console.error(`Missing shapeType for shape "${t}"`);const r={};return"standard"===i.shapeType&&(0,n.Ed)(u,((e,t)=>{r[t]=s.Z.clone(e)})),i.args&&(0,n.Ed)(i.args,((e,t)=>{r[t]=s.Z.clone(e),e.onUpdate&&(r[t].onUpdate=e.onUpdate)})),{shapeType:i.shapeType,editorProps:i.editorProps||d,args:r,computePath:i.computePath,computePrimitives:i.computePrimitives,computeOutline:i.computeOutline||i.computePath,readjustItem:i.readjustItem,getTextSlots:i.getTextSlots||p,getEvents:i.getEvents||h,controlPoints:i.controlPoints||null,getDetailsMarker:i.getDetailsMarker||v,getPins:i.getPins||m,shapeEvents:{beforeCreate:i.beforeCreate,mounted:i.mounted},fixItem:i.fixItem,getSnappers:i.getSnappers||g,vueComponent:"vue"===i.shapeType?e:null,menuItems:i.menuItems||[],onMouseDown:i.onMouseDown,onMouseMove:i.onMouseMove,onMouseOut:i.onMouseOut,onTextSlotTextUpdate:i.onTextSlotTextUpdate,computeCustomAreas:i.computeCustomAreas,scriptFunctions:i.scriptFunctions||null,argType(e){return this.args&&this.args[e]?this.args[e].type:"standard"===this.shapeType&&u[e]?u[e].type:null}}}const x={};function b(e,t){const i=(0,o.W)(t);i.shapeConfig.id=e,x[e]=y(i)}(0,n.Ed)(c,(function(e){if(e.shapeConfig.id){if("raw"===e.shapeConfig.shapeType)throw new Error("Raw shapes are not supported");if("templated"===e.shapeConfig.shapeType)try{b(e.shapeConfig.id,e.shapeConfig)}catch(t){console.error(`Failed to register shape ${e.shapeConfig.id}`,t)}else x[e.shapeConfig.id]=y(e)}}));const w={getShapeIds:()=>Object.keys(x),find:e=>x[e],standardShapeProps:u,getShapePropDescriptor:function(e,t){return"standard"===e.shapeType&&u.hasOwnProperty(t)?u[t]:e.args&&e.args.hasOwnProperty(t)?e.args[t]:null},getRegistry:function(){return x},getShapeArgs:function(e){if("standard"===e.shapeType||e.includeStandardArgs){const t={},i=(e,i)=>t[i]=e;return(0,n.Ed)(u,i),(0,n.Ed)(e.args,i),t}return e.args},registerTemplatedShape:b}},9498:(e,t,i)=>{"use strict";function n(e){const t=e.area.w,i=e.area.h;return{c:{x:t/2,y:i/2},t:{x:t/2,y:0,nx:0,ny:-1},b:{x:t/2,y:i,nx:0,ny:1},l:{x:0,y:i/2,nx:-1,ny:0},r:{x:t,y:i/2,nx:1,ny:0}}}function r(e,t){const i=e/2,n=t/2;return`M 0 ${n} A ${i} ${n} 0 1 1 ${e} ${n}  A ${i} ${n} 0 1 1 0 ${n} Z`}function s(e,t,i){const n=Math.min(i,e/2,t/2);return`M ${e-n} ${t}  L ${n} ${t} a ${n} ${n} 0 0 1 ${-n} ${-n}  L 0 ${n}  a ${n} ${n} 0 0 1 ${n} ${-n}   L ${e-n} 0   a ${n} ${n} 0 0 1 ${n} ${n}  L ${e} ${t-n}   a ${n} ${n} 0 0 1 ${-n} ${n} Z`}i.d(t,{Fb:()=>n,Iv:()=>r,Qb:()=>s})},8270:(e,t,i)=>{"use strict";i.d(t,{DC:()=>o,FI:()=>l,VL:()=>d,Vk:()=>c,oJ:()=>h});var n=i(6234),r=i(3590);function s(e){return r.Z.roundPrecise2(e)}const o=100;function a(e,t){return"A"===e.t?function(e,t,i,n,o){const a=r.Z.distanceBetweenPoints(e,t,i,n),l=a*o/100;if(r.Z.tooSmall(l)||r.Z.tooSmall(a))return`L ${s(i)} ${s(n)} `;const c=Math.abs(l/2+a*a/(8*l));let h=Math.abs(l)>a/2?1:0,d=o>0?1:0;return`A ${s(c)} ${s(c)} 0 ${h} ${d} ${s(i)} ${s(n)}`}(e.x,e.y,t.x,t.y,e.h):"L"===e.t&&"B"===t.t?`Q ${s(t.x1+t.x)} ${s(t.y1+t.y)} ${s(t.x)} ${s(t.y)} `:"B"===e.t&&"B"!==t.t?`Q ${s(e.x2+e.x)} ${s(e.y2+e.y)} ${s(t.x)} ${s(t.y)} `:"B"===e.t&&"B"===t.t?`C ${s(e.x2+e.x)} ${s(e.y2+e.y)} ${s(t.x1+t.x)} ${s(t.y1+t.y)} ${s(t.x)} ${s(t.y)} `:`L ${s(t.x)} ${s(t.y)} `}function l(e,t,i,r){if(i.length<2)return null;let o="",l=null,c=null;return(0,n.Ed)(i,(i=>{const n=h(i,e,t);c||(c=n),o+=l?a(l,n):`M ${s(n.x)} ${s(n.y)} `,l=n})),r&&l&&c&&(o+=a(l,c),o+=" Z"),o}function c(e,t,i){let n=1,s=1;return r.Z.tooSmall(t)&&(t=1,n=0),r.Z.tooSmall(i)&&(i=1,s=0),"B"===e.t?{t:"B",x:r.Z.roundPrecise2(e.x*o*n/t),y:r.Z.roundPrecise2(e.y*o*s/i),x1:r.Z.roundPrecise2(e.x1*o*n/t),y1:r.Z.roundPrecise2(e.y1*o*s/i),x2:r.Z.roundPrecise2(e.x2*o*n/t),y2:r.Z.roundPrecise2(e.y2*o*s/i)}:"A"===e.t?{t:e.t,x:r.Z.roundPrecise2(e.x*o*n/t),y:r.Z.roundPrecise2(e.y*o*s/i),h:e.h||50}:{t:"L",x:r.Z.roundPrecise2(e.x*o*n/t),y:r.Z.roundPrecise2(e.y*o*s/i)}}function h(e,t,i){return"B"===e.t?{t:e.t,x:r.Z.roundPrecise2(t*e.x/o),y:r.Z.roundPrecise2(i*e.y/o),x1:r.Z.roundPrecise2(t*e.x1/o),y1:r.Z.roundPrecise2(i*e.y1/o),x2:r.Z.roundPrecise2(t*e.x2/o),y2:r.Z.roundPrecise2(i*e.y2/o)}:"A"===e.t?{t:e.t,x:r.Z.roundPrecise2(t*e.x/o),y:r.Z.roundPrecise2(i*e.y/o),h:e.h}:{t:"L",x:r.Z.roundPrecise2(t*e.x/o),y:r.Z.roundPrecise2(i*e.y/o)}}function d(e,t){return"path"===t.type?function(e,t){if(!Array.isArray(t.paths))return null;let i=t.paths;"absolute"===t.transformType&&(i=t.paths.map((t=>({closed:t.closed,id:t.id,points:t.points.map((t=>c(t,e.area.w,e.area.h)))}))));let r="";return(0,n.Ed)(i,(t=>{const i=l(e.area.w,e.area.h,t.points,t.closed);r+=i+" "})),r}(e,t):"ellipse"===t.type?function(e,t){if(!t.area)return null;const{x:i,y:n,w:r,h:s}=t.area,o=r/2,a=s/2;return`M ${i} ${n+a} A ${o} ${a} 0 1 1 ${i+r} ${n+a}  A ${o} ${a} 0 1 1 ${i} ${n+a} Z`}(0,t):(console.error("Uknown raw shape type: "+t.type),null)}},7113:(e,t,i)=>{"use strict";i.d(t,{W:()=>c});var n=i(3590),r=i(8814),s=i(8270);function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e){const t=e.args||{},i=e.includeStandardArgs?{fill:{type:"advanced-color",value:{type:"solid",color:"rgba(255,255,255,1)"},name:"Fill"},strokeColor:{type:"color",value:"#111111",name:"Stroke color"},strokeSize:{type:"number",value:2,name:"Stroke Size"},strokePattern:{type:"stroke-pattern",value:"solid",name:"Stroke pattern"}}:{};return{shapeConfig:{id:e.id,shapeType:"templated",menuItems:e.menuItems,computeOutline:f(e.init,e.outlines),computePrimitives:m(e.init,e.primitives),getPins:u(e.init,e.pins),getTextSlots:p(e.init,e.textSlots||[]),controlPoints:d(e.init,e.controlPoints),args:a(a({},i),t),editorProps:e.editorProps}}}function h(e){return{name:e.name,width:e.area.w,height:e.area.h,args:e.shapeProps}}function d(e,t){const i=(0,r.nh)({"$-eval":e||[],controlPoints:t||[]}),s=e=>i(h(e)).controlPoints;return{make(e){const t={};return s(e).forEach((i=>{const r=(n.Z.clamp(e.shapeProps[i.updates],i.min,i.max)-i.min)/(i.max-i.min);t[i.id]={x:i.start.x*(1-r)+i.end.x*r,y:i.start.y*(1-r)+i.end.y*r}})),t},handleDrag(e,t,i,r,o,a){const l=s(e).find((e=>e.id===t));if(!l)return;const c=l.end.x-l.start.x,h=l.end.y-l.start.y,d=i+o-l.start.x,u=r+a-l.start.y,p=Math.abs(n.Z.projectVectorToVector(d,u,c,h)),m=c*c+h*h;if(n.Z.tooSmall(m))return;const f=n.Z.clamp(p/Math.sqrt(m),0,1);e.shapeProps[l.updates]=l.min*(1-f)+l.max*f}}}function u(e,t){if(!Array.isArray(t))return null;const i=(0,r.nh)({"$-eval":e||[],pins:t});return e=>{const t=i(h(e)),n={};return t.pins.forEach((e=>{const t=e.id;delete e.id,n[t]=e})),n}}function p(e,t){if(!t)return null;const i=(0,r.nh)({"$-eval":e||[],obj:t});return e=>i(h(e)).obj}function m(e,t){const i=(0,r.nh)({"$-eval":e||[],primitives:t});return e=>Array.isArray(t)?i(h(e)).primitives.map((t=>{if("text"===t.type){if("relative"===t.transformType){const{x:i,y:n,w:r,h:s}=t.area;t.area={x:i*e.area.w/100,y:n*e.area.h/100,w:r*e.area.w/100,h:s*e.area.h/100}}return{type:t.type,text:t.text||"",fontSize:t.fontSize||12,fontColor:t.fontColor||"rgba(0, 0, 0, 1.0)",area:t.area||{x:0,y:0,w:e.area.w,h:e.area.h}}}return{fill:t.fill||{type:"none"},strokeColor:t.strokeColor||"rgba(0,0,0,1.0)",strokeSize:t.hasOwnProperty("strokeSize")?t.strokeSize:0,strokePattern:t.hasOwnProperty("strokePattern")?t.strokePattern:"solid",type:t.type,svgPath:(0,s.VL)(e,t)}})):[]}function f(e,t){const i=(0,r.nh)({"$-eval":e||[],outlines:t});return e=>{if(!Array.isArray(t))return null;const n=i(h(e));let r="";return n.outlines.forEach((t=>{const i=(0,s.VL)(e,t);i&&(r+=i+" ")})),r}}},5198:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(9498);const r={shapeConfig:{shapeType:"standard",id:"basic_diamond",menuItems:[{group:"Basic Shapes",name:"Diamond",iconUrl:"assets/images/items/basic-diamond.svg"},{group:"UML",name:"Decision",iconUrl:"assets/images/items/basic-diamond.svg"}],computePath:e=>function(e){const t=e.area.w,i=e.area.h;return`M ${t/2} 0  L ${t} ${i/2}  L ${t/2} ${i}  L 0 ${i/2} Z`}(e),getPins:e=>(0,n.Fb)(e),args:{}}}},2270:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(3590);const r={shapeConfig:{shapeType:"standard",id:"basic_triangle",computePath(e){const t=e.area.w*e.shapeProps.skewP/100;return`M 0 ${e.area.h}  L ${t} 0  L ${e.area.w} ${e.area.h} Z`},controlPoints:{make:e=>({skewP:{x:e.area.w*e.shapeProps.skewP/100,y:0}}),handleDrag(e,t,i,r,s,o){"skewP"===t&&e.area.w>.01&&(e.shapeProps.skewP=n.Z.roundPrecise1(n.Z.clamp(100*(i+s)/e.area.w,0,100)))}},getPins(e){const t=e.area.w*e.shapeProps.skewP/100;return{c:{x:(t+e.area.w)/3,y:2*e.area.h/3},c1:{x:t,y:0},c2:{x:e.area.w,y:e.area.h},c3:{x:0,y:e.area.h},e1:{x:t/2,y:e.area.h/2},e2:{x:t+(e.area.w-t)/2,y:e.area.h/2},e3:{x:e.area.w/2,y:e.area.h}}},menuItems:[{group:"Basic Shapes",name:"Triangle",iconUrl:"assets/images/items/basic-triangle.svg",item:{textSlots:{body:{valign:"bottom",halign:"center"}},shapeProps:{skewP:50}}},{group:"Basic Shapes",name:"Left Triangle",iconUrl:"assets/images/items/basic-triangle-left.svg",item:{textSlots:{body:{valign:"bottom",halign:"center"}},shapeProps:{skewP:0}}},{group:"Basic Shapes",name:"Right Triangle",iconUrl:"assets/images/items/basic-triangle-right.svg",item:{textSlots:{body:{valign:"bottom",halign:"center"}},shapeProps:{skewP:100}}}],args:{skewP:{type:"number",value:50,min:0,max:100,name:"Skew (%)"}}}}},2291:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={group:"Basic Shapes",shapes:[{name:"Cloud",shapeConfig:{shapeType:"templated",pins:[],textSlots:[{name:"body",area:{x:0,y:0,w:{"$-expr":"width"},h:{"$-expr":"height"}}}],primitives:[{type:"path",transformType:"relative",paths:[{points:[{t:"B",x:14.78,y:99.73,x1:20.52,y1:-.26,x2:-4,y2:-.83},{t:"B",x:1.75,y:83.05,x1:2.27,y1:9.24,x2:-2.27,y2:-9.24},{t:"B",x:4.61,y:54.04,x1:-3.38,y1:6.25,x2:3.38,y2:-6.25},{t:"B",x:20.33,y:44.28,x1:-6.34,y1:-2.84,x2:-.13,y2:-4.08},{t:"B",x:26,y:25.05,x1:-4.97,y1:5.3,x2:4.97,y2:-5.3},{t:"B",x:40.28,y:23.09,x1:-5.33,y1:-3.41,x2:1.77,y2:-4},{t:"B",x:51,y:4.46,x1:-7.36,y1:6.04,x2:7.36,y2:-6.04},{t:"B",x:73.5,y:6.14,x1:-6.5,y1:-6.82,x2:6.5,y2:6.82},{t:"B",x:83.92,y:44,x1:1.06,y1:-18.27,x2:2.39,y2:.82},{t:"B",x:96.86,y:56.14,x1:-4.23,y1:-10.86,x2:4.23,y2:10.86},{t:"B",x:93.52,y:92.91,x1:5.91,y1:-6.68,x2:-5.91,y2:6.68},{t:"L",x:83.92,y:99.73}],closed:!0}],strokeColor:{"$-expr":"args.strokeColor"},strokeSize:{"$-expr":"1*args.strokeSize"},strokePattern:{"$-expr":"args.strokePattern"},fill:{"$-expr":"args.fill"}}],outlines:[{type:"path",transformType:"relative",paths:[{points:[{t:"B",x:14.78,y:99.72,x1:20.52,y1:-.26,x2:-4,y2:-.83},{t:"B",x:1.75,y:83.04,x1:2.27,y1:9.24,x2:-2.27,y2:-9.24},{t:"B",x:4.61,y:54.04,x1:-3.38,y1:6.25,x2:3.38,y2:-6.25},{t:"B",x:20.33,y:44.26,x1:-6.34,y1:-2.84,x2:-.13,y2:-4.08},{t:"B",x:26,y:25.05,x1:-4.97,y1:5.3,x2:4.97,y2:-5.3},{t:"B",x:40.28,y:23.09,x1:-5.33,y1:-3.41,x2:1.77,y2:-4},{t:"B",x:51,y:4.45,x1:-7.36,y1:6.04,x2:7.36,y2:-6.04},{t:"B",x:73.5,y:6.13,x1:-6.5,y1:-6.82,x2:6.5,y2:6.82},{t:"B",x:83.92,y:44,x1:1.06,y1:-18.28,x2:2.39,y2:.82},{t:"B",x:96.86,y:56.13,x1:-4.23,y1:-10.86,x2:4.23,y2:10.86},{t:"B",x:93.52,y:92.9,x1:5.91,y1:-6.69,x2:-5.91,y2:6.69},{t:"L",x:83.92,y:99.72}],closed:!0}]}],includeStandardArgs:!0,id:"basic_cloud",menuItems:[{group:"Basic Shapes",name:"Cloud",iconUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNDIgMjUuNjY2NjY2NjY2NjY2NjY0IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNDJweCIgaGVpZ2h0PSIyNS42NjY2NjY2NjY2NjY2NjRweCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMywgMykiPjxwYXRoIGQ9Ik0gNS4zMiAxOS42MSBDIDMuODggMTkuNDUgMS40NSAxOC4xNSAwLjYzIDE2LjMzIEMgLTAuMTkgMTQuNTEgMC40NCAxMS44NiAxLjY2IDEwLjYzIEMgMi44OCA5LjQgNS4wNCA4LjE1IDcuMzIgOC43MSBDIDcuMjcgNy45MSA3LjU3IDUuOTcgOS4zNiA0LjkzIEMgMTEuMTUgMy44OSAxMi41OCAzLjg3IDE0LjUgNC41NCBDIDE1LjE0IDMuNzUgMTUuNzEgMi4wNyAxOC4zNiAwLjg4IEMgMjEuMDEgLTAuMzEgMjQuMTIgLTAuMTMgMjYuNDYgMS4yMSBDIDI4LjggMi41NSAzMC41OSA1LjA2IDMwLjIxIDguNjUgQyAzMS4wNyA4LjgxIDMzLjM1IDguOSAzNC44NyAxMS4wNCBDIDM2LjM5IDEzLjE4IDM1LjggMTYuOTYgMzMuNjcgMTguMjcgUSAzMS41NCAxOS41OCAzMC4yMSAxOS42MSBRIDEyLjcxIDE5LjU2IDUuMzIgMTkuNjEgIFogIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMxMTExMTEiIHN0cm9rZS13aWR0aD0iMnB4IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9nPjwvc3ZnPg==",size:{w:80,h:48.9},previewArea:{x:0,y:0,w:150,h:91.7,r:0}}]}}],preview:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSItMTAgLTEwIDEyMCAxMjAiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIxMzBweCIgaGVpZ2h0PSIxMzBweCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwgMTUuNTU1NTU1NTU1NTU1NTU3KSI+PHBhdGggZD0iTSAxMS44MiA0OC43NiBDIDguNjIgNDguMzUgMy4yMiA0NS4xMiAxLjQgNDAuNiBDIC0wLjQyIDM2LjA4IDAuOTkgMjkuNDggMy42OSAyNi40MiBDIDYuMzkgMjMuMzYgMTEuMTkgMjAuMjYgMTYuMjYgMjEuNjUgQyAxNi4xNiAxOS42NiAxNi44MiAxNC44NCAyMC44IDEyLjI1IEMgMjQuNzggOS42NiAyNy45NiA5LjYyIDMyLjIyIDExLjI5IEMgMzMuNjQgOS4zMyAzNC45MSA1LjEzIDQwLjggMi4xOCBDIDQ2LjY5IC0wLjc3IDUzLjYgLTAuMzMgNTguOCAzIEMgNjQgNi4zMyA2Ny45OSAxMi41OCA2Ny4xNCAyMS41MSBDIDY5LjA1IDIxLjkxIDc0LjExIDIyLjE0IDc3LjQ5IDI3LjQ1IEMgODAuODcgMzIuNzYgNzkuNTUgNDIuMTUgNzQuODIgNDUuNDIgUSA3MC4wOSA0OC42OSA2Ny4xNCA0OC43NiBRIDI4LjI0IDQ4LjYzIDExLjgyIDQ4Ljc2ICBaICIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMTExMTExIiBzdHJva2Utd2lkdGg9IjJweCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvZz48L3N2Zz4="}},7022:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={name:"Star",shapeConfig:{id:"basic_star",shapeType:"templated",init:["R = max(min(width, height) / 2, 0.0001)"],menuItems:[{group:"Basic Shapes",name:"Star",size:{w:80,h:80},previewArea:{x:0,y:0,w:130,h:130,r:0},iconUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMsIDMpIj48cGF0aCBkPSJNIDEzIDAgTCAxNS40OSA3IEwgMjIuMTkgMy44MSBMIDE5LjAxIDEwLjUyIEwgMjYgMTMgTCAxOS4wMSAxNS40OCBMIDIyLjE5IDIyLjE5IEwgMTUuNDkgMTkuMDEgTCAxMyAyNiBMIDEwLjUyIDE5LjAxIEwgMy44MSAyMi4xOSBMIDYuOTkgMTUuNDggTCAwIDEzIEwgNi45OSAxMC41MiBMIDMuODEgMy44MSBMIDEwLjUyIDYuOTkgTCAxMyAwICBaICIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMTExMTExIiBzdHJva2Utd2lkdGg9IjJweCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvZz48L3N2Zz4="}],pins:[{id:"c",x:{"$-expr":"width/2"},y:{"$-expr":"height/2"}},{"$-for":{start:0,until:{"$-expr":"args.spikes*2"},it:"idx"},id:{"$-expr":"`p${idx}`"},x:{"$-expr":"width/2 + ifcond(idx%2 == 0, R, R*args.spikeHeight) * cos(PI()*(2*idx/(args.spikes*2)-0.5))*width/(2*R)"},y:{"$-expr":"height/2 + ifcond(idx%2 == 0, R, R*args.spikeHeight) * sin(PI()*(2*idx/(args.spikes*2)-0.5))*height/(2*R)"},nx:{"$-expr":"cos(2*PI()*idx/(args.spikes))"},ny:{"$-expr":"sin(2*PI()*idx/(args.spikes))"}}],includeStandardArgs:!0,args:{spikes:{type:"number",value:8,min:3,max:100,name:"Spikes"},spikeHeight:{type:"number",value:.5,min:0,max:1,name:"Spike height"}},primitives:[{type:"path",fill:{"$-expr":"args.fill"},strokeColor:{"$-expr":"args.strokeColor"},strokeSize:{"$-expr":"args.strokeSize"},strokePattern:{"$-expr":"args.strokePattern"},transformType:"absolute",paths:[{closed:!0,points:[{"$-for":{start:0,until:{"$-expr":"args.spikes * 2"},it:"idx"},x:{"$-expr":"width/2 + ifcond(idx%2 == 0, R, R*args.spikeHeight) * cos(PI()*(2*idx/(args.spikes*2)-0.5))*width/(2*R)"},y:{"$-expr":"height/2 + ifcond(idx%2 == 0, R, R*args.spikeHeight) * sin(PI()*(2*idx/(args.spikes*2)-0.5))*height/(2*R)"},t:"L"}]}]}],outlines:[{type:"path",transformType:"absolute",paths:[{closed:"true",points:[{"$-for":{start:0,until:{"$-expr":"args.spikes * 2"},it:"idx"},x:{"$-expr":"width/2 + ifcond(idx%2 == 0, R, R*args.spikeHeight) * cos(PI()*(2*idx/(args.spikes*2)-0.5))*width/(2*R)"},y:{"$-expr":"height/2 + ifcond(idx%2 == 0, R, R*args.spikeHeight) * sin(PI()*(2*idx/(args.spikes*2)-0.5))*height/(2*R)"},t:"L"}]}]}],controlPoints:[{id:"spikeHeight",min:0,max:1,start:{x:{"$-expr":"width/2"},y:{"$-expr":"height/2"}},end:{x:{"$-expr":"width/2"},y:{"$-expr":"0"}},updates:"spikeHeight"}],textSlots:[{name:"body",area:{x:0,y:0,w:{"$-expr":"width"},h:{"$-expr":"height"}}}]}}},9078:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var n=i(3590),r=i(9498);function s(e){return n.Z.clamp(n.Z.roundPrecise1(Math.max(e.shapeProps.headerHeight,e.shapeProps.cornerRadius)),0,e.area.h)}function o(e,t){return n.Z.clamp(n.Z.roundPrecise1((e.area.h-t)*Math.max(e.shapeProps.sectionRatio,10)/100+t),0,e.area.h)}const a={shapeConfig:{shapeType:"standard",id:"uml_class",menuItems:[{group:"UML",name:"Class",iconUrl:"assets/images/items/uml-class.svg",item:{textSlots:{title:{text:"Class",bold:!0,fontSize:16,halign:"center",valign:"middle",paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0},section1:{text:"",fontSize:14,font:"Courier New",halign:"left",valign:"top",paddingLeft:5,paddingTop:5,paddingRight:5,paddingBottom:5},section2:{text:"",fontSize:14,font:"Courier New",halign:"left",valign:"top",paddingLeft:5,paddingTop:5,paddingRight:5,paddingBottom:5}}},size:{w:140,h:100}}],getPins:e=>(0,r.Fb)(e),computePath(e){const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4),r=s(e);return`M ${t-n} ${i}  L ${n} ${i} a ${n} ${n} 0 0 1 ${-n} ${-n}  L 0 ${n}  a ${n} ${n} 0 0 1 ${n} ${-n}  L ${t-n} 0   a ${n} ${n} 0 0 1 ${n} ${n}  L ${t} ${i-n}   a ${n} ${n} 0 0 1 ${-n} ${n} ZM 0 ${r} l ${t} 0M 0 ${o(e,r)} l ${t} 0`},computeOutline(e){const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4);return`M ${t-n} ${i}  L ${n} ${i} a ${n} ${n} 0 0 1 ${-n} ${-n}  L 0 ${n}  a ${n} ${n} 0 0 1 ${n} ${-n}  L ${t-n} 0   a ${n} ${n} 0 0 1 ${n} ${n}  L ${t} ${i-n}   a ${n} ${n} 0 0 1 ${-n} ${n} Z`},getTextSlots(e){const t=s(e),i=o(e,t);return[{name:"title",area:{x:0,y:0,w:e.area.w,h:t}},{name:"section1",area:{x:0,y:t,w:e.area.w,h:i-t}},{name:"section2",area:{x:0,y:i,w:e.area.w,h:e.area.h-i}}]},controlPoints:{make:e=>({sectionRatio:{x:e.area.w/2,y:o(e,s(e))},headerHeight:{x:e.area.w/2,y:e.shapeProps.headerHeight},cornerRadius:{x:e.area.w-e.shapeProps.cornerRadius,y:0}}),handleDrag(e,t,i,r,o,a){if("headerHeight"===t)e.shapeProps.headerHeight=n.Z.clamp(n.Z.roundPrecise1(r+a),0,e.area.h);else if("cornerRadius"===t)e.shapeProps.cornerRadius=n.Z.clamp(n.Z.roundPrecise1(e.area.w-i-o),0,Math.min(e.area.w/4,e.area.h/4));else if("sectionRatio"===t){const t=s(e),i=Math.max(0,e.area.h-t);i>0&&(e.shapeProps.sectionRatio=n.Z.clamp(n.Z.roundPrecise1(100*Math.max(0,r+a-t)/i),0,100))}}},args:{cornerRadius:{type:"number",value:0,name:"Corner radius",min:0},headerHeight:{type:"number",value:30,name:"Header Height",min:0},sectionRatio:{type:"number",value:50,name:"Section Ratio (%)",min:0,max:100}}}}},2517:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(3590),r=i(9498);const s={shapeConfig:{shapeType:"standard",id:"uml_database",menuItems:[{group:"UML",name:"Database",iconUrl:"assets/images/items/uml-database.svg",size:{w:100,h:130}}],computePath(e){const t=e.area.w,i=e.area.h,r=n.Z.clamp(e.shapeProps.skew,0,e.area.h/3),s=r/2,o=e.area.w/4,a=t/2;return`M ${t} ${r} L ${t} ${i-r} C ${t} ${i-s}  ${t-o} ${i} ${a} ${i} C ${o} ${i} 0 ${i-s} 0 ${i-r} L 0 ${r}C 0 ${s} ${o} 0 ${a} 0  C ${t-o} 0 ${t} ${s} ${t} ${r}C ${t} ${r+s} ${t-o} ${2*r} ${a} ${2*r} C ${o} ${2*r} 0 ${r+s} 0 ${r}`},getPins:e=>(0,r.Fb)(e),computeOutline(e){const t=e.area.w,i=e.area.h,r=n.Z.clamp(e.shapeProps.skew,0,e.area.h/3),s=r/2,o=e.area.w/4,a=t/2;return`M ${t} ${r} L ${t} ${i-r} C ${t} ${i-s}  ${t-o} ${i} ${a} ${i} C ${o} ${i} 0 ${i-s} 0 ${i-r} L 0 ${r}C 0 ${s} ${o} 0 ${a} 0  C ${t-o} 0 ${t} ${s} ${t} ${r}`},controlPoints:{make:e=>({skew:{x:e.area.w/2,y:2*n.Z.clamp(e.shapeProps.skew,0,e.area.h/3)}}),handleDrag(e,t,i,r,s,o){"skew"===t&&(e.shapeProps.skew=n.Z.clamp((r+o)/2,0,e.area.h/3))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},4437:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(3590),r=i(9498);const s={shapeConfig:{shapeType:"standard",id:"uml_dataflow",menuItems:[{group:"UML",name:"Data Flow",iconUrl:"assets/images/items/uml-dataflow.svg"}],getPins:e=>(0,r.Fb)(e),computePath(e){const t=e.area.w,i=e.area.h,r=n.Z.clamp(e.shapeProps.skew,0,e.area.w/3),s=e.area.h/4,o=i/2;return`M ${t-r} ${i} L ${r} ${i}  Q 0 ${i-s} 0 ${o}  Q 0 ${s} ${r} 0 L ${t-r} 0 Q ${t} ${s} ${t} ${o} Q ${t} ${i-s} ${t-r} ${i} Q ${t-2*r} ${i-s} ${t-2*r} ${o} Q ${t-2*r} ${s} ${t-r} 0`},computeOutline(e){const t=e.area.w,i=e.area.h,r=n.Z.clamp(e.shapeProps.skew,0,e.area.w/3),s=e.area.h/4,o=i/2;return`M ${t-r} ${i} L ${r} ${i}  Q 0 ${i-s} 0 ${o}  Q 0 ${s} ${r} 0 L ${t-r} 0 Q ${t} ${s} ${t} ${o} Q ${t} ${i-s} ${t-r} ${i}`},controlPoints:{make:e=>({skew:{x:e.area.w-2*n.Z.clamp(e.shapeProps.skew,0,e.area.w/3),y:e.area.h/2}}),handleDrag(e,t,i,r,s,o){"skew"===t&&(e.shapeProps.skew=n.Z.clamp((e.area.w-i-s)/2,0,e.area.w/3))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},4387:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(3590),r=i(9498);const s={shapeConfig:{shapeType:"standard",id:"uml_delay",menuItems:[{group:"UML",name:"Delay",iconUrl:"assets/images/items/uml-delay.svg"}],getPins:e=>(0,r.Fb)(e),computePath:e=>function(e){const t=e.area.w,i=e.area.h,r=e.area.h/2,s=n.Z.clamp(t-r,0);return`M 0 0 L ${s} 0 A ${Math.min(r,t-s)} ${r} 0 0 1 ${s} ${i} L 0 ${i} Z`}(e),args:{}}}},9880:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={shapeConfig:{shapeType:"standard",id:"uml_document",menuItems:[{group:"UML",name:"Document",iconUrl:"assets/images/items/uml-document.svg",size:{w:140,h:100}}],getPins(e){const t=e.area.h/8,i=e.area.w,n=e.area.h-t;return[{x:i/2,y:n/2},{x:i/2,y:0,nx:0,ny:-1},{x:i/2,y:n,nx:0,ny:1},{x:0,y:n/2,nx:-1,ny:0},{x:i,y:n/2,nx:1,ny:0}]},computePath:e=>function(e){const t=e.area.h/8,i=e.area.w,n=e.area.h-t,r=n/2;return`M 0 0 L ${i} 0 L ${i} ${n} C ${i/2} ${n-r} ${i/2} ${n+r} 0 ${n} Z`}(e),args:{}}}},8398:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(3590),r=i(7196),s=i(9498);const o={shapeConfig:{shapeType:"standard",id:"uml_group",menuItems:[{group:"UML",name:"Group",iconUrl:"assets/images/items/uml-group.svg",item:{textSlots:{title:{text:"Group",bold:!0,color:"#969696",fontSize:16,halign:"center",valign:"middle",paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0}},shapeProps:{fill:{type:"none"},strokeSize:3,strokeColor:"rgba(160,160,160,1.0)"}},size:{w:140,h:100}}],getPins:e=>(0,s.Fb)(e),computePath(e){const t=e.area.w,i=e.area.h,r=Math.max(0,e.shapeProps.cornerRadius),s=Math.min(r,e.area.w/4,e.area.h/4),o=e.area.w-2*s,a=n.Z.clamp(e.shapeProps.gap,0,o);let l=0,c=0;return"begin"===e.shapeProps.align?(l=0,c=o-a):"middle"===e.shapeProps.align?(l=(o-a)/2,c=l):(l=o-a,c=0),"bottom"===e.shapeProps.pos?`M ${t-s} 0  a ${s} ${s} 0 0 1 ${s} ${s} L ${t} ${i-s} a ${s} ${s} 0 0 1 ${-s} ${s}L ${t-s-c} ${i} M ${s+l} ${i} L ${s} ${i} a ${s} ${s} 0 0 1 ${-s} ${-s} L 0 ${s}  a ${s} ${s} 0 0 1 ${s} ${-s} L ${t-s} 0`:`M ${t-s-c} 0  L ${t-s} 0 a ${s} ${s} 0 0 1 ${s} ${s} L ${t} ${i-s} a ${s} ${s} 0 0 1 ${-s} ${s}L ${s} ${i} a ${s} ${s} 0 0 1 ${-s} ${-s} L 0 ${s}  a ${s} ${s} 0 0 1 ${s} ${-s}  L ${s+l} 0`},computeOutline:r.bL,getTextSlots(e){const t=Math.min(Math.max(0,e.shapeProps.cornerRadius),e.area.w/4,e.area.h/4),i=e.area.w-2*t,r=n.Z.clamp(e.shapeProps.gap,0,i);let s=0;s="begin"===e.shapeProps.align?0:"middle"===e.shapeProps.align?(i-r)/2:i-r;const o=n.Z.clamp(e.area.h/2,10,50);return[{name:"title",area:{x:t+s,y:-o/2+("bottom"===e.shapeProps.pos?e.area.h:0),w:r,h:o}}]},controlPoints:{make(e){const t=Math.min(Math.max(0,e.shapeProps.cornerRadius),e.area.w/4,e.area.h/4),i=e.area.w-2*t,r=n.Z.clamp(e.shapeProps.gap,0,i);let s=0;return s="begin"===e.shapeProps.align?t+r:"middle"===e.shapeProps.align?(e.area.w+r)/2:e.area.w-t-r,{cornerRadius:{x:e.area.w-e.shapeProps.cornerRadius,y:0},gap:{x:s,y:"top"===e.shapeProps.pos?0:e.area.h}}},handleDrag(e,t,i,r,s,o){if("gap"===t){const t=Math.min(Math.max(0,e.shapeProps.cornerRadius),e.area.w/4,e.area.h/4),r=e.area.w-2*t;let o=0,a=i+s;o="begin"===e.shapeProps.align?a-t:"middle"===e.shapeProps.align?2*a-e.area.w:e.area.w-t-a,e.shapeProps.gap=n.Z.clamp(o,0,r)}else"cornerRadius"===t&&(e.shapeProps.cornerRadius=n.Z.clamp(e.area.w-i-s,0,Math.min(e.area.w/4,e.area.h/4)))}},args:{gap:{type:"number",value:150,name:"Gap size",min:0},pos:{type:"choice",value:"top",name:"Title placement",options:["top","bottom"]},align:{type:"choice",value:"middle",name:"Title alignment",options:["begin","middle","end"]},cornerRadius:{type:"number",value:20,name:"Corner radius",min:0}}}}},3652:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(3590);function r(e){const t=e.area.w,i=e.area.h,r=n.Z.clamp(e.shapeProps.skew,0,t/2);return`M ${r} 0 L ${t} 0 L ${t-r} ${i} L 0 ${i} Z`}const s={shapeConfig:{shapeType:"standard",id:"uml_input",menuItems:[{group:"UML",name:"Input/Output",iconUrl:"assets/images/items/uml-input.svg",size:{w:140,h:100}}],getPins(e){const t=e.area.w,i=e.area.h,r=n.Z.clamp(e.shapeProps.skew,0,e.area.w/2);return[{x:t/2,y:i/2},{x:t/2,y:0,nx:0,ny:-1},{x:t/2,y:i,nx:0,ny:1},{x:r/2,y:i/2,nx:-1,ny:0},{x:t-r/2,y:i/2,nx:1,ny:0}]},computePath:e=>r(e),computeOutline:e=>r(e),controlPoints:{make:e=>({skew:{x:n.Z.clamp(e.shapeProps.skew,0,e.area.w/2),y:0}}),handleDrag(e,t,i,r,s,o){"skew"===t&&(e.shapeProps.skew=n.Z.clamp(i+s,0,e.area.w/2))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},7569:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(3590),r=i(9498);const s={shapeConfig:{shapeType:"standard",id:"uml_loop_limit",menuItems:[{group:"UML",name:"Loop Limit",iconUrl:"assets/images/items/uml-loop-limit.svg"}],getPins:e=>(0,r.Fb)(e),computePath:e=>function(e){const t=e.area.w,i=e.area.h,r=n.Z.clamp(e.shapeProps.skew,0,Math.min(t/4,i/2));return`M ${r} 0 L ${t-r} 0 L ${t} ${r} L ${t} ${i} L 0 ${i} L 0 ${r} Z`}(e),controlPoints:{make:e=>({skew:{x:e.area.w-n.Z.clamp(e.shapeProps.skew,0,Math.min(e.area.w/4,e.area.h/2)),y:0}}),handleDrag(e,t,i,r,s,o){"skew"===t&&(e.shapeProps.skew=n.Z.clamp(e.area.w-i-s,0,Math.min(e.area.w/4,e.area.h/2)))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},1533:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(3590);const r={shapeConfig:{shapeType:"standard",id:"uml_module",menuItems:[{group:"UML",name:"Module",iconUrl:"assets/images/items/uml-module.svg",item:{textSlots:{title:{text:"Module",bold:!0,halign:"center"},body:{text:"",halign:"left"}}},size:{w:140,h:100}}],controlPoints:{make:e=>({brick:{x:Math.min(e.shapeProps.brickWidth,e.area.w/2),y:4*n.Z.clamp(e.shapeProps.brickHeight,0,e.area.h)}}),handleDrag(e,t,i,r,s,o){"brick"===t&&(e.shapeProps.brickWidth=n.Z.clamp(i+s,0,e.area.w/2),e.shapeProps.brickHeight=n.Z.clamp((r+o)/4,0,e.area.h/4))}},getPins(e){const t=Math.min(e.shapeProps.brickWidth,e.area.w/2)/2,i=e.area.w,n=e.area.h,r=e.area.w-t;return{c:{x:t+r/2,y:n/2},t:{x:t+r/2,y:0,nx:0,ny:-1},b:{x:t+r/2,y:n,nx:0,ny:1},r:{x:t,y:n/2,nx:-1,ny:0},l:{x:i,y:n/2,nx:1,ny:0}}},computePath(e){const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.brickWidth,e.area.w/2),r=Math.min(e.shapeProps.brickHeight,e.area.h/4),s=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4,r,n);return`M ${t-s} ${i}  L ${n/2+s} ${i} a ${s} ${s} 0 0 1 ${-s} ${-s} L ${n/2} ${4*r} L ${n} ${4*r} L ${n} ${3*r} L ${n/2} ${3*r} L ${n/2} ${2*r} L ${n} ${2*r} L ${n} ${r} L ${n/2} ${r} L ${n/2} ${s}a ${s} ${s} 0 0 1 ${s} ${-s}   L ${t-s} 0   a ${s} ${s} 0 0 1 ${s} ${s}  L ${t} ${i-s}   a ${s} ${s} 0 0 1 ${-s} ${s} ZM 0 ${r} l ${n} 0  l 0 ${r} l ${-n} 0 ZM 0 ${3*r} l ${n} 0  l 0 ${r} l ${-n} 0 Z`},computeOutline(e){const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.brickWidth,e.area.w/2),r=Math.min(e.shapeProps.brickHeight,e.area.h/4),s=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4,r,n);return`M ${t-s} ${i}  L ${n/2+s} ${i} a ${s} ${s} 0 0 1 ${-s} ${-s} L ${n/2} ${4*r} L 0 ${4*r} L 0 ${3*r} L ${n/2} ${3*r} L ${n/2} ${2*r} L 0 ${2*r} L 0 ${r} L ${n/2} ${r} L ${n/2} ${s}a ${s} ${s} 0 0 1 ${s} ${-s}   L ${t-s} 0   a ${s} ${s} 0 0 1 ${s} ${s}  L ${t} ${i-s}   a ${s} ${s} 0 0 1 ${-s} ${s} Z`},getTextSlots(e){const t=Math.max(e.shapeProps.brickWidth,0);return[{name:"body",area:{x:t,y:0,w:Math.max(0,e.area.w-t),h:e.area.h}}]},args:{cornerRadius:{type:"number",value:0,name:"Corner radius",min:0},brickWidth:{type:"number",value:70,name:"Brick Width",min:0},brickHeight:{type:"number",value:20,name:"Brick Height",min:0}}}}},5906:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(3590),r=i(9498);const s=e=>{let t=e.shapeProps.depth;const i=Math.min(e.area.w,e.area.h)/2;return t>i&&(t=i),t},o={shapeConfig:{shapeType:"standard",id:"uml_node",menuItems:[{group:"UML",name:"Node",iconUrl:"assets/images/items/uml-node.svg",size:{w:140,h:100}}],controlPoints:{make(e){const t=s(e);return{depth:{x:n.Z.clamp(e.area.w-t,0,e.area.w),y:n.Z.clamp(t,0,e.area.h)}}},handleDrag(e,t,i,r,s,o){"depth"===t&&(e.shapeProps.depth=n.Z.clamp(r+o,0,Math.min(e.area.w,e.area.h)/2))}},getPins:e=>(0,r.Fb)(e),getTextSlots(e){const t=s(e);return[{name:"body",area:{x:0,y:t,w:e.area.w-t,h:e.area.h-t}}]},computePath(e){const t=e.area.w,i=e.area.h,n=s(e);return`M 0 ${n}  L ${t-n} ${n}  L ${t-n} ${i} L 0 ${i} ZM 0 ${n} L ${n} 0 L ${t} 0 L ${t-n} ${n} ZM ${t-n} ${n} L ${t} 0 L ${t} ${i-n} L ${t-n} ${i} Z`},computeOutline(e){const t=e.area.w,i=e.area.h,n=s(e);return`M 0 ${n}  L ${n} 0  L ${t} 0  L ${t} ${i-n} L ${t-n} ${i} L 0 ${i} Z`},args:{depth:{type:"number",value:20,name:"Depth"}}}}},6852:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(3590),r=i(9498);const s={shapeConfig:{shapeType:"standard",id:"uml_note",menuItems:[{group:"UML",name:"Note",iconUrl:"assets/images/items/uml-note.svg"}],getPins:e=>(0,r.Fb)(e),computePath:e=>function(e){const t=e.area.w,i=e.area.h,r=n.Z.clamp(e.shapeProps.skew,0,Math.min(t/2,i/2));return`M ${t} ${r} L ${t} ${i} L 0 ${i} L 0 0 L ${t-r} 0 L ${t} ${r} L ${t-r} ${r} L ${t-r} 0`}(e),computeOutline:e=>function(e){const t=e.area.w,i=e.area.h,r=n.Z.clamp(e.shapeProps.skew,0,Math.min(t/2,i/2));return`M ${t} ${r} L ${t} ${i} L 0 ${i} L 0 0 L ${t-r} 0 Z`}(e),controlPoints:{make(e){const t=n.Z.clamp(e.shapeProps.skew,0,Math.min(e.area.w/2,e.area.h/2));return{skew:{x:e.area.w-t,y:t}}},handleDrag(e,t,i,r,s,o){const a=e.area.w-i-s,l=r+o;"skew"===t&&(e.shapeProps.skew=n.Z.clamp(Math.max(a,l),0,Math.min(e.area.w/2,e.area.h/2)))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},8733:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(3590),r=i(9498);const s={shapeConfig:{shapeType:"standard",id:"uml_object",menuItems:[{group:"UML",name:"Object",iconUrl:"assets/images/items/uml-object.svg",item:{textSlots:{title:{text:"Object",bold:!0,fontSize:16,halign:"center",valign:"middle",paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0},body:{text:"",fontSize:14,font:"Courier New",halign:"left",valign:"top",paddingLeft:5,paddingTop:5,paddingRight:5,paddingBottom:5}}},size:{w:140,h:100}}],getPins:e=>(0,r.Fb)(e),computePath(e){const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4);return`M ${t-n} ${i}  L ${n} ${i} a ${n} ${n} 0 0 1 ${-n} ${-n}  L 0 ${n}  a ${n} ${n} 0 0 1 ${n} ${-n}  L ${t-n} 0   a ${n} ${n} 0 0 1 ${n} ${n}  L ${t} ${i-n}   a ${n} ${n} 0 0 1 ${-n} ${n} ZM 0 ${Math.min(e.area.h,Math.max(e.shapeProps.headerHeight,e.shapeProps.cornerRadius))} l ${t} 0`},computeOutline(e){const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4);return`M ${t-n} ${i}  L ${n} ${i} a ${n} ${n} 0 0 1 ${-n} ${-n}  L 0 ${n}  a ${n} ${n} 0 0 1 ${n} ${-n}  L ${t-n} 0   a ${n} ${n} 0 0 1 ${n} ${n}  L ${t} ${i-n}   a ${n} ${n} 0 0 1 ${-n} ${n} Z`},getTextSlots:e=>[{name:"title",area:{x:0,y:0,w:e.area.w,h:e.shapeProps.headerHeight}},{name:"body",area:{x:0,y:e.shapeProps.headerHeight,w:e.area.w,h:Math.max(10,e.area.h-e.shapeProps.headerHeight)}}],controlPoints:{make:e=>({headerHeight:{x:e.area.w/2,y:e.shapeProps.headerHeight},cornerRadius:{x:e.area.w-e.shapeProps.cornerRadius,y:0}}),handleDrag(e,t,i,r,s,o){"headerHeight"===t?e.shapeProps.headerHeight=n.Z.clamp(r+o,0,e.area.h):"cornerRadius"===t&&(e.shapeProps.cornerRadius=n.Z.clamp(e.area.w-i-s,0,Math.min(e.area.w/4,e.area.h/4)))}},args:{cornerRadius:{type:"number",value:0,name:"Corner radius",min:0},headerHeight:{type:"number",value:30,name:"Header Height",min:0}}}}},5845:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(3590);const r={shapeConfig:{shapeType:"standard",id:"uml_package",menuItems:[{group:"UML",name:"Package",iconUrl:"assets/images/items/uml-package.svg",size:{w:140,h:100}}],controlPoints:{make:e=>({brick:{x:Math.min(e.shapeProps.brickWidth,e.area.w/2),y:n.Z.clamp(e.shapeProps.brickHeight,0,e.area.h/2)}}),handleDrag(e,t,i,r,s,o){"brick"===t&&(e.shapeProps.brickWidth=n.Z.clamp(i+s,0,e.area.w/2),e.shapeProps.brickHeight=n.Z.clamp(r+o,0,e.area.h/2))}},getPins(e){const t=e.area.w,i=e.area.h,n=Math.min(Math.max(0,e.shapeProps.brickHeight),e.area.h/2),r=i-n;return{c:{x:t/2,y:n+r/2},t:{x:t/2,y:n,nx:0,ny:-1},b:{x:t/2,y:i,nx:0,ny:1},l:{x:0,y:n+r/2,nx:-1,ny:0},r:{x:t,y:n+r/2,nx:1,ny:0}}},computePath(e){const t=e.area.w,i=e.area.h,n=Math.min(Math.max(0,e.shapeProps.brickWidth),e.area.w/2),r=Math.min(Math.max(0,e.shapeProps.brickHeight),e.area.h/2);return`M 0 0  L ${n} 0 L ${n} ${r} L 0 ${r} ZM 0 ${r} L ${t} ${r} L ${t} ${i} L 0 ${i} Z`},computeOutline(e){const t=e.area.w,i=e.area.h,n=Math.min(Math.max(0,e.shapeProps.brickWidth),e.area.w/2),r=Math.min(Math.max(0,e.shapeProps.brickHeight),e.area.h/2);return`M 0 0  L ${n} 0 L ${n} ${r}  L ${t} ${r} L ${t} ${i} L 0 ${i} Z`},args:{brickWidth:{type:"number",value:60,name:"Brick width",min:0},brickHeight:{type:"number",value:20,name:"Brick height",min:0}}}}},4358:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(3590),r=i(9498);const s={shapeConfig:{shapeType:"standard",id:"uml_preparation",menuItems:[{group:"UML",name:"Preparation",iconUrl:"assets/images/items/uml-preparation.svg"}],getPins:e=>(0,r.Fb)(e),computePath:e=>function(e){const t=e.area.w,i=e.area.h,r=n.Z.clamp(e.shapeProps.skew,0,t/3),s=i/2;return`M ${r} 0 L ${t-r} 0 L ${t} ${s} L ${t-r} ${i} L ${r} ${i} L 0 ${s} Z`}(e),controlPoints:{make:e=>({skew:{x:e.area.w-n.Z.clamp(e.shapeProps.skew,0,e.area.w/3),y:0}}),handleDrag(e,t,i,r,s,o){"skew"===t&&(e.shapeProps.skew=n.Z.clamp(e.area.w-i-s,0,e.area.w/3))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},1693:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(3590),r=i(9498);const s={shapeConfig:{shapeType:"standard",id:"uml_process",menuItems:[{group:"UML",name:"Process",iconUrl:"assets/images/items/uml-process.svg"}],getPins:e=>(0,r.Fb)(e),computePath:e=>function(e){const t=e.area.w,i=e.area.h,r=n.Z.clamp(e.shapeProps.skew,0,t/4);return`M 0 0 L ${t} 0 L ${t} ${i} L 0 ${i} Z  M ${r} 0 L ${r} ${i} M ${t-r} 0 L ${t-r} ${i}`}(e),computeOutline:e=>function(e){const t=e.area.w,i=e.area.h;return`M 0 0 L ${t} 0 L ${t} ${i} L 0 ${i} Z`}(e),controlPoints:{make:e=>({skew:{x:e.area.w-n.Z.clamp(e.shapeProps.skew,0,e.area.w/4),y:0}}),handleDrag(e,t,i,r,s,o){"skew"===t&&(e.shapeProps.skew=n.Z.clamp(e.area.w-i-s,0,e.area.w/4))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},8396:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(3590);function r(e){const t=e.area.w,i=e.area.h;return`M 0 0 L ${t} 0 L ${t} ${i} L 0 ${i} L ${n.Z.clamp(i/2,0,t)} ${i/2} Z`}const s={shapeConfig:{shapeType:"standard",id:"uml_receive_signal",menuItems:[{group:"UML",name:"Receive Signal",iconUrl:"assets/images/items/uml-receive-signal.svg"}],getPins(e){const t=e.area.w,i=e.area.h;return{c:{x:t/2,y:i/2},t:{x:t/2,y:0,nx:0,ny:-1},b:{x:t/2,y:i,nx:0,ny:1},l:{x:n.Z.clamp(i/2,0,t),y:i/2,nx:-1,ny:0},r:{x:t,y:i/2,nx:1,ny:0}}},computePath:e=>r(e),computeOutline:e=>r(e),args:{}}}},7153:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(3590),r=i(9498);function s(e){const t=e.area.w,i=e.area.h,r=n.Z.clamp(i/2,0,t);return`M 0 0 L ${t-r} 0 L ${t} ${i/2} L ${t-r} ${i} L 0 ${i} Z`}const o={shapeConfig:{shapeType:"standard",id:"uml_send_signal",menuItems:[{group:"UML",name:"Send Signal",iconUrl:"assets/images/items/uml-send-signal.svg"}],getPins:e=>(0,r.Fb)(e),computePath:e=>s(e),computeOutline:e=>s(e),args:{}}}},9849:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={group:"UML",shapes:[{name:"User",shapeConfig:{shapeType:"templated",pins:[],textSlots:[{name:"body",area:{x:{"$-expr":"width * 0"},y:{"$-expr":"height * 0"},w:{"$-expr":"width * 1"},h:{"$-expr":"height * 1"},r:0}}],primitives:[{type:"ellipse",area:{x:{"$-expr":"width * 0.5 - height * 0.4/2"},y:0,w:{"$-expr":"height*0.4"},h:{"$-expr":"height*0.4"}},strokeColor:{"$-expr":"args.strokeColor"},strokeSize:{"$-expr":"1*args.strokeSize"},strokePattern:{"$-expr":"args.strokePattern"},fill:{"$-expr":"args.fill"}},{type:"path",transformType:"relative",paths:[{points:[{t:"L",x:0,y:100},{t:"B",x:50,y:40,x1:-50,y1:0,x2:50,y2:0},{t:"L",x:100,y:100}],closed:!0}],strokeColor:{"$-expr":"args.strokeColor"},strokeSize:{"$-expr":"1*args.strokeSize"},strokePattern:{"$-expr":"args.strokePattern"},fill:{"$-expr":"args.fill"}}],outlines:[{type:"ellipse",area:{x:{"$-expr":"width * 0.5 - height * 0.4/2"},y:0,w:{"$-expr":"height*0.4"},h:{"$-expr":"height*0.4"}}},{type:"path",transformType:"relative",paths:[{points:[{t:"L",x:0,y:100},{t:"B",x:50,y:40,x1:-50,y1:0,x2:50,y2:0},{t:"L",x:100,y:100}],closed:!0}]}],includeStandardArgs:!0,id:"uml_user",menuItems:[{group:"UML",name:"User",iconUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMsIDMpIj48cGF0aCBkPSJNIDcuOCA1LjIgQSA1LjIgNS4yIDAgMSAxIDE4LjIgNS4yICBBIDUuMiA1LjIgMCAxIDEgNy44IDUuMiBaIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMxMTExMTEiIHN0cm9rZS13aWR0aD0iMnB4IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PHBhdGggZD0iTSAwIDI2IFEgMCAxMC40IDEzIDEwLjQgUSAyNiAxMC40IDI2IDI2IEwgMCAyNiAgWiAiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzExMTExMSIgc3Ryb2tlLXdpZHRoPSIycHgiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L2c+PC9zdmc+",size:{w:80,h:80},previewArea:{x:0,y:0,w:150,h:150,r:0},item:{textSlots:{body:{valign:"bottom",paddingBottom:10}}}}]}}],preview:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSItMTAgLTEwIDEyMCAxMjAiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIxMzBweCIgaGVpZ2h0PSIxMzBweCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwgMCkiPjxwYXRoIGQ9Ik0gMjQgMTYgQSAxNiAxNiAwIDEgMSA1NiAxNiAgQSAxNiAxNiAwIDEgMSAyNCAxNiBaIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMxMTExMTEiIHN0cm9rZS13aWR0aD0iMnB4IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PHBhdGggZD0iTSAwIDgwIFEgMCAzMiA0MCAzMiBRIDgwIDMyIDgwIDgwIEwgMCA4MCAgWiAiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzExMTExMSIgc3Ryb2tlLXdpZHRoPSIycHgiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L2c+PC9zdmc+"}},9699:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(9498);function r(e){const t=e.area.w,i=e.area.h,n=Math.min(t,i)/2;return`M ${n} 0 L ${t-n} 0 A ${n} ${n} 0 0 1 ${t-n} ${i} L ${n} ${i} A ${n} ${n} 0 0 1 ${n} 0 Z`}const s={shapeConfig:{shapeType:"standard",id:"uml_start",menuItems:[{group:"UML",name:"Start/End",iconUrl:"assets/images/items/uml-start.svg"}],getPins:e=>(0,n.Fb)(e),computePath:e=>r(e),computeOutline:e=>r(e),args:{}}}},3486:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(3590);function r(e){const t=e.area.w,i=e.area.h,r=n.Z.clamp(e.shapeProps.skew,0,e.area.w/3),s=e.area.h/4,o=i/2;return`M ${t} ${i} L ${r} ${i}  Q 0 ${i-s} 0 ${o}  Q 0 ${s} ${r} 0 L ${t} 0 Q ${t-r} ${s} ${t-r} ${o} Q ${t-r} ${i-s} ${t} ${i} Z`}const s={shapeConfig:{shapeType:"standard",id:"uml_storage",menuItems:[{group:"UML",name:"Storage",iconUrl:"assets/images/items/uml-storage.svg"}],getPins(e){const t=e.area.w,i=e.area.h;return{c:{x:t/2,y:i/2},t:{x:t/2,y:0,nx:0,ny:-1},b:{x:t/2,y:i,nx:0,ny:1},l:{x:0,y:i/2,nx:-1,ny:0},r:{x:t-n.Z.clamp(e.shapeProps.skew,0,e.area.w/3),y:i/2,nx:1,ny:0}}},computePath:e=>r(e),computeOutline:e=>r(e),controlPoints:{make:e=>({skew:{x:e.area.w-n.Z.clamp(e.shapeProps.skew,0,e.area.w/3),y:e.area.h/2}}),handleDrag(e,t,i,r,s,o){"skew"===t&&(e.shapeProps.skew=n.Z.clamp(e.area.w-i-s,0,e.area.w/3))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},5576:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var n=i(3590),r=i(1377),s=i(8595);function o(e){return e.shapeProps.vertical?e.area.w:e.area.h}function a(e){return e.shapeProps.vertical?e.area.h:e.area.w}function l(e){return`M 0 0 L ${e.area.w} 0 L ${e.area.w} ${e.area.h} L 0 ${e.area.h} Z`}function c(e,t){let i=0;for(let n=1;n<=t;n++)i+=e.shapeProps[`colw${n}`]*o(e)/100;return e.shapeProps.vertical?{x:n.Z.clamp(i,0,o(e)),y:0}:{x:0,y:n.Z.clamp(i,0,o(e))}}function h(e,t,i){const n=t.shapeProps.columns;t.shapeProps.columns=i,d(0,t,i,n),s.Z.item.changed.specific.$emit(e,t.id,"shapeProps.column"),s.Z.schemeChangeCommitted.$emit(e,`item.${t.id}.shapeProps.columns`)}function d(e,t,i,s){const a=[];let l=0,c=o(t);for(let e=1;e<s;e++){const i=t.shapeProps[`colw${e}`]*c/100;a.push(i),l+=i}if(i>s&&i>1&&!n.Z.tooSmall(c)){const e=c/(i-1);t.shapeProps.vertical?t.area.w+=e:t.area.h+=e,c=o(t),t.shapeProps["colw"+(i-1)]=100*e/c;for(let e=1;e<s;e++)t.shapeProps[`colw${e}`]=100*a[e-1]/c;t.textSlots[`col${i}`]||(t.textSlots[`col${i}`]={text:`Title ${i}`,bold:!0},(0,r.q4)(t.textSlots[`col${i}`]))}if(i<s&&i>0&&!n.Z.tooSmall(c)&&(t.shapeProps.vertical?t.area.w=l:t.area.h=l,c=o(t),!n.Z.tooSmall(c)))for(let e=1;e<i;e++)t.shapeProps[`colw${e}`]=100*a[e-1]/c}const u={shapeConfig:{shapeType:"standard",id:"uml_swim_lane",menuItems:[{group:"Tables",name:"Swim Lane",iconUrl:"assets/images/items/uml-swim-lane.svg",item:{shapeProps:{columns:3,colw1:33.33333,colw2:33.33333,colw3:33.33333},textSlots:{col1:{text:"Todo",bold:!0},col2:{text:"In Progress",bold:!0},col3:{text:"Done",bold:!0}}},previewArea:{x:5,y:5,w:200,h:100},size:{w:800,h:400}},{group:"Tables",name:"Swim Lane (Horizontal)",iconUrl:"assets/images/items/uml-swim-lane-horizontal.svg",item:{shapeProps:{columns:3,vertical:!1,headerHeight:110,colw1:33.33333,colw2:33.33333,colw3:33.33333},textSlots:{col1:{text:"Todo",bold:!0},col2:{text:"In Progress",bold:!0},col3:{text:"Done",bold:!0}}},previewArea:{x:5,y:5,w:200,h:100},size:{w:800,h:400}}],computePath:function(e){const t=n.Z.clamp(e.shapeProps.headerHeight,0,a(e));let i=l(e);e.shapeProps.vertical?i+=` M 0 ${t} L ${e.area.w} ${t}`:i+=` M ${t} 0 L ${t} ${e.area.h}`;let r=0;for(let t=1;t<e.shapeProps.columns;t++){let s=n.Z.clamp(r+Math.abs(e.shapeProps[`colw${t}`]),0,100);const l=s*o(e)/100;e.shapeProps.vertical?i+=` M ${l} 0 L ${l} ${a(e)}`:i+=` M 0 ${l} L ${a(e)} ${l}`,r=s}return i},computeOutline:l,getTextSlots:function(e){const t=[],i=o(e);let r=0,s=0;for(let o=1;o<=e.shapeProps.columns;o++){let a=n.Z.clamp(r+Math.abs(e.shapeProps[`colw${o}`]),0,100);const l=a*i/100;let c=l-s;o===e.shapeProps.columns&&(c=i-s),e.shapeProps.vertical?t.push({name:`col${o}`,area:{x:s,y:0,w:c,h:e.shapeProps.headerHeight}}):t.push({name:`col${o}`,area:{x:0,y:s,w:e.shapeProps.headerHeight,h:c}}),r=a,s=l}return t},beforeCreate(e,t){const i=n.Z.clamp(t.shapeProps.columns,1,12),r=100/i;for(let e=0;e<i;e++)t.shapeProps[`colw${e}`]=r},editorProps:{textSlotTabsDisabled:!0,editBoxControls:(e,t)=>{const i=t.shapeProps.vertical,n=[];return t.shapeProps.columns<100&&n.push({name:"Add Column",type:"button",hPlace:i?"right":"center",vPlace:i?"center":"bottom",iconClass:"fa-solid fa-plus",position:i?{x:30,y:0}:{x:0,y:30},click:()=>{!function(e,t){t.shapeProps.columns>=100||h(e,t,t.shapeProps.columns+1)}(e,t)}}),t.shapeProps.columns>1&&n.push({name:"Remove Column",type:"button",hPlace:i?"right":"left",vPlace:i?"top":"bottom",iconClass:"fa-solid fa-minus",position:i?{x:0,y:30}:{x:30,y:0},click:()=>{!function(e,t){t.shapeProps.columns<=1||h(e,t,t.shapeProps.columns-1)}(e,t)}}),n}},controlPoints:{make(e){const t={};e.shapeProps.vertical?t.headerHeight={x:0,y:n.Z.clamp(e.shapeProps.headerHeight,0,e.area.h)}:t.headerHeight={x:n.Z.clamp(e.shapeProps.headerHeight,0,e.area.w),y:0};for(let i=e.shapeProps.columns-1;i>0;i--)t[`colw${i}`]=c(e,i);return t},handleDrag(e,t,i,r,s,l){if(0===t.indexOf("colw")){let a=i+s;e.shapeProps.vertical||(a=r+l);const c=o(e),h=Math.max(1,e.shapeProps.columns);if(n.Z.tooSmall(c))return;const d=parseInt(t.substr(4));let u=0;for(let t=1;t<d;t++)u+=e.shapeProps[`colw${t}`]*c/100;const p=Math.max(0,a-u),m=5/h,f=100-5/h;e.shapeProps[`colw${d}`]=n.Z.clamp(100*p/c,m,f)}else if("headerHeight"===t){let t=r+l;e.shapeProps.vertical||(t=i+s),e.shapeProps.headerHeight=n.Z.clamp(t,0,a(e))}}},args:{columns:{type:"number",value:3,name:"Columns",min:1,max:100,onUpdate:d},headerHeight:{type:"number",value:50,name:"Header Height",min:0,hidden:!0},vertical:{type:"boolean",value:!0,name:"Vertical"},colw1:{type:"number",value:20,name:"Column Width 1",min:0,max:100,hidden:!0},colw2:{type:"number",value:20,name:"Column Width 2",min:0,max:100,hidden:!0},colw3:{type:"number",value:20,name:"Column Width 3",min:0,max:100,hidden:!0},colw4:{type:"number",value:20,name:"Column Width 4",min:0,max:100,hidden:!0},colw5:{type:"number",value:20,name:"Column Width 5",min:0,max:100,hidden:!0},colw6:{type:"number",value:20,name:"Column Width 6",min:0,max:100,hidden:!0},colw7:{type:"number",value:20,name:"Column Width 7",min:0,max:100,hidden:!0},colw8:{type:"number",value:20,name:"Column Width 8",min:0,max:100,hidden:!0},colw9:{type:"number",value:20,name:"Column Width 9",min:0,max:100,hidden:!0},colw10:{type:"number",value:20,name:"Column Width 10",min:0,max:100,hidden:!0},colw11:{type:"number",value:20,name:"Column Width 11",min:0,max:100,hidden:!0},colw12:{type:"number",value:20,name:"Column Width 12",min:0,max:100,hidden:!0}}}}},5635:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(3086);function r(e){const t={color:e.color,"font-size":e.fontSize+"px","font-family":(0,n.It)(e.font),"padding-left":e.paddingLeft+"px","padding-right":e.paddingRight+"px","padding-top":e.paddingTop+"px","padding-bottom":e.paddingBottom+"px","text-align":e.halign,"vertical-align":e.valign,"white-space":e.whiteSpace,display:"table-cell","box-sizing":"border-box"};return e.letterSpacing>0&&(t["letter-spacing"]=e.letterSpacing+"px"),e.bold&&(t["font-weight"]="bold"),t}},1068:(e,t,i)=>{"use strict";function n(e){return e.changedTouches&&e.changedTouches.length>0?{pageX:e.changedTouches[0].pageX,pageY:e.changedTouches[0].pageY}:e.touches&&e.touches.length>0?{pageX:e.touches[0].pageX,pageY:e.touches[0].pageY}:{pageX:e.pageX,pageY:e.pageY}}function r(e){const t=n(e);return{originalEvent:e,originalPageX:t.pageX,originalPageY:t.pageY,draggedElement:null,droppableClass:null,scrollableElemet:null,callbacks:{onDrag:()=>{},onDragOver:()=>{},onDrop:()=>{},onDragStart:()=>{},onSimpleClick:()=>{},onDone:()=>{}},withScrollableElement(e){return this.scrollableElemet=e,this},withDraggedElement(e){return this.draggedElement=e,this},withDroppableClass(e){return this.droppableClass=e,this},onDragStart(e){return this.callbacks.onDragStart=e,this},onDrag(e){return this.callbacks.onDrag=e,this},onDragOver(e){return this.callbacks.onDragOver=e,this},onDrop(e){return this.callbacks.onDrop=e,this},onSimpleClick(e){return this.callbacks.onSimpleClick=e,this},onDone(e){return this.callbacks.onDone=e,this},build(){let t=0,i=!1,r=e.touches?"touchmove":"mousemove",s=e.touches?"touchend":"mouseup";const o=t=>{document.removeEventListener(r,f),document.removeEventListener(s,g),i||2===e.button||this.callbacks.onSimpleClick(t),i=!1,this.callbacks.onDone()},a=(e,t)=>{if(this.droppableClass){const i=e.target.closest(`.${this.droppableClass}`);i&&t(i)}};let l=null,c=0;const h=e=>{l&&c===e||(d(),c=e,l=setInterval((()=>{this.scrollableElemet.scrollTop+=e}),10))},d=()=>{l&&(clearInterval(l),l=null,c=0)},u=n(this.originalEvent),p=u.pageX,m=u.pageY,f=e=>{if(0===e.buttons)return void o(e);const{pageX:r,pageY:s}=n(e);if(t+=Math.abs(r-this.originalPageX)+Math.abs(s-this.originalPageY),i){if(this.draggedElement&&(this.draggedElement.style.left=`${r+4}px`,this.draggedElement.style.top=`${s+4}px`),this.callbacks.onDrag(e,r,s,p,m),a(e,(t=>this.callbacks.onDragOver(e,t,r,s))),this.scrollableElemet){const e=this.scrollableElemet.getBoundingClientRect();e.bottom-s<20?h(2):e.top-s>-20?h(-2):d()}}else t>5&&(i=!0,this.callbacks.onDragStart(e,p,m))},g=e=>{const{pageX:t,pageY:r}=n(e);d();try{i&&a(e,(i=>this.callbacks.onDrop(e,i,t,r)))}catch(e){console.error(e)}o(e)};document.addEventListener(r,f),document.addEventListener(s,g)}}}i.d(t,{E:()=>r})},2017:(e,t,i)=>{"use strict";i.d(t,{$D:()=>p,Jw:()=>f,Yd:()=>l,c7:()=>o,qc:()=>c});var n=i(6234);function r(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function s(){const e=new Date;return e.toLocaleTimeString()+"."+e.getMilliseconds()}const o={loggers:{},filterRegex:null,registerLogger(e){const t=Math.abs(r(e))%360;let i=!1;this.loggers.hasOwnProperty(e)&&(i=this.loggers[e].enabled),this.loggers[e]={enabled:i,background:`hsl(${t}, 75%, 35%)`}},showLoggers(){console.log("%cSchemio Log Config!","color: white; display: inline-block; padding: 5px 10px; background: #00aaff; font-family: Helvetica; font-size: 20px; font-weight: bold"),(0,n.Ed)(this.loggers,((e,t)=>{console.log(t)}))},enable(e){this.loggers[e]||console.error("Unknown logger: "+e),this.loggers[e].enabled=!0,d()},disable(e){this.loggers[e]||console.error("Unknown logger: "+e),this.loggers[e].enabled=!1,d()},filter(e){this.filterRegex=e?new RegExp(e):null,d()}};function a(e,t){if(e){let i="";for(let e=0;e<t.length;e++){const n=t[e];"string"==typeof n&&(i=i+" "+n)}return e.test(i)}return!0}class l{constructor(e){this.name=e,this.timers={},o.registerLogger(e)}info(...e){const t=o.loggers[this.name];if(t&&t.enabled&&a(o.filterRegex,e)){const i=s();console.log.apply(console,[`${i} %c${this.name}`,`display: inline-block; font-weight: bold; background: ${t.background}; text-shadow: 0 0 4px rgba(0, 0, 0, 0.5); padding: 2px 5px; border-radius: 2px; color: white`,...e])}}time(e){this.timers[e]=performance.now()}timeEnd(e){const t=o.loggers[this.name];if(t&&t.enabled)if(this.timers[e]){if(a(o.filterRegex,`${this.name} ${e}`)){const i=performance.now()-this.timers[e],n=s();console.log.apply(console,[`${n} %c${this.name}%c Timer: %c${e}%c took ${i} ms`,`display: inline-block; font-weight: bold; background: ${t.background}; text-shadow: 0 0 4px rgba(0, 0, 0, 0.5); padding: 2px 5px; border-radius: 2px; color: white`,"","display: inline-block; font-weight: bold; background: hsl(142, 45%, 30%); padding: 2px 5px; border-radius: 2px; color: white",""])}}else console.error(`Could not measure time in ${this.name}. Missing timer ${e} initialisation`)}infoEvent(e,t){const i=o.loggers[this.name];if(i&&i.enabled&&a(o.filterRegex,t)){const n=Math.abs(r(e))%360,o=s();console.log.apply(console,[`${o} %c${this.name} %c${e}`,`display: inline-block; font-weight: bold; background: ${i.background}; text-shadow: 0 0 4px rgba(0, 0, 0, 0.5) padding: 2px 5px; padding: 2px 5px; border-radius: 2px; color: white; margin-right: 10px`,`display: inline-block; font-weight: bold; background: hsl(${n}, 70%, 30%); padding: 2px 5px; border-radius: 2px; color: white;`,...t])}}}const c={objects:[],register(e,t){this.objects.push({type:e,obj:t})}},h="SchemioLogConfig";function d(){"undefined"==typeof window&&window.localStorage&&window.localStorage.setItem(h,JSON.stringify(o))}!function(){if(!window||!window.localStorage)return;const e=window.localStorage.getItem(h);if(e)try{const t=JSON.parse(e);if(!t.loggers)return;(0,n.Ed)(t.loggers,((e,t)=>{o.loggers[t]={enabled:e.enabled||!1}}))}catch(e){}}();let u=null;function p(e){u=e}"undefined"!=typeof window&&(window.SchemioDebugger=c,window.SchemioLogConfig=()=>{u&&u()});const m=[],f={log(...e){this.write("info",e)},error(...e){this.write("error",e)},write(e,...t){m.length>1e3&&m.shift();let i="";t.forEach(((e,t)=>{i+=(0===t?"":" ")+e})),m.push({level:e,text:i})},getLogEntries:()=>m}},3590:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});const n=1e-5;function r(e){return Math.abs(e)<n}function s(e,t,i,n){const s=e*e+t*t;if(!r(s)){const o=i*i+n*n;if(!r(o)){const r=Math.sqrt(s),a=Math.sqrt(o);return Math.asin((e*n-t*i)/(r*a))}}return 0}function o(e,t){return t>=0?Math.acos(e):-Math.acos(e)}function a(e,t,i,n){return{a:t-n,b:i-e,c:e*n-i*t}}function l(e,t,{a:i,b:n,c:s}){return r(i)&&r(n)?0:Math.abs(i*e+n*t+s)/Math.sqrt(i*i+n*n)}function c(e,t,i,n){if(n-i<2)return[e[i],e[n]];const r=a(e[i].x,e[i].y,e[n].x,e[n].y);let s=i+1,o=0;for(let t=i+1;t<n;t++){const i=l(e[t].x,e[t].y,r);i>o&&(o=i,s=t)}if(o>t){const r=c(e,t,i,s),o=c(e,t,s,n);return o.splice(0,1),r.concat(o)}return[e[i],e[n]]}const h={sameFloatingValue:(e,t,i)=>(null==i&&(i=1e-4),Math.abs(e-t)<i),tooSmall:r,roundPrecise(e,t){if(t>0){const i=Math.pow(10,t);return Math.round(e*i)/i}return Math.round(e)},roundPrecise1(e){return this.roundPrecise(e,1)},roundPrecise2(e){return this.roundPrecise(e,2)},clamp:(e,t,i)=>e<t?t:e>i?i:e,vectorLength:(e,t)=>Math.sqrt(e*e+t*t),vectorPlusVector:(e,t)=>({x:e.x+t.x,y:e.y+t.y}),vectorMinusVector:(e,t)=>({x:e.x-t.x,y:e.y-t.y}),distanceBetweenPoints:(e,t,i,n)=>Math.sqrt((i-e)*(i-e)+(n-t)*(n-t)),normalizedVector(e,t){const i=e*e+t*t;if(this.tooSmall(i))return null;const n=Math.sqrt(i);return{x:e/n,y:t/n}},angleBetweenVectors:s,cosineAngleBetweenVectors:function(e,t,i,n){const r=e*e+t*t;if(r>.001){const s=i*i+n*n;if(s>.001){const o=Math.sqrt(r),a=Math.sqrt(s);return Math.acos((e*i+t*n)/(o*a))}}return 0},fullAngleForNormalizedVector:o,fullAngleForVector:function(e,t){const i=e*e+t*t;if(!r(i)){const n=Math.sqrt(i);return o(e/n,t/n)}return 0},createLineEquation:a,distanceFromPointToLine:l,linesIntersection(e,t){const i=e.a*t.b-t.a*e.b;if(this.tooSmall(i))return null;const n=(t.a*e.c-e.a*t.c)/i;let r=0;if(this.tooSmall(e.a)){if(this.tooSmall(t.a))return null;r=(-t.b*n-t.c)/t.a}else r=(-e.b*n-e.c)/e.a;return{x:r,y:n}},identifyPointSideAgainstLine:(e,t,{a:i,b:n,c:r})=>i*e+n*t+r>=0?1:-1,isPointInArea:(e,t,i)=>e>=i.x&&e<=i.x+i.w&&t>=i.y&&t<=i.y+i.h,isAreaInArea:(e,t)=>e.x>=t.x&&e.y>=t.y&&e.x+e.w<t.x+t.w&&e.y+e.h<t.y+t.h,overlappingArea(e,t){const i=e.x,n=e.y,r=e.x+e.w,s=e.y+e.h,o=t.x,a=t.y,l=t.x+t.w,c=t.y+t.h;let h=0,d=0,u=0,p=0;return u=o>=i?o:i,p=l>=r?r:l,h=a>=n?a:n,d=c>=s?s:c,d>=h&&p>=u?{x:u,y:h,w:p-u,h:d-h}:null},isPointWithinLineSegment(e,t,i){var n=t.x-e.x,r=t.y-e.y,s=i.x-e.x,o=i.y-e.y,a=i.x-t.x,l=i.y-t.y;return a*a+l*l>(n+s)*(n+s)+(r+o)*(r+o)},worldPointInArea(e,t,i,n){if(!i)return{x:0,y:0};n||(n=this.identityMatrix());const r=this.standardTransformWithArea(n,i);return this.transformPoint(r,e,t)},localPointInArea(e,t,i,n){if(!i)return{x:0,y:0};n||(n=this.identityMatrix());const r=this.standardTransformWithArea(n,i),s=this.inverseMatrix3x3(r);return s?this.transformPoint(s,e,t):{x:0,y:0}},closestPointOnPath(e,t,i,n){let r,s,o=2,a=.5;n&&void 0!==n.startDistance&&(r=n.startDistance),n&&void 0!==n.stopDistance&&(s=n.stopDistance),n&&void 0!==n.precision&&(o=n.precision),a=1/Math.max(o,2);const l=i.getTotalLength();if(l<1e-7){const e=i.getPointAtLength(0);return e.distance=0,e}let c=0,h=0;if(void 0===r||void 0===s){const n=Math.max(8,Math.min(l/40,20)),r=l/n;let s=0,o=0;for(let a=0;a<n;a++){const n=i.getPointAtLength(a*r+r/2),l=(e-n.x)*(e-n.x)+(t-n.y)*(t-n.y);0===a?(s=a,o=l):o>l&&(o=l,s=a)}c=s*r,h=(s+1)*r}else c=Math.min(r,l),h=Math.min(s,l);const d=(c+h)/2,u=[c,d],p=[d,h];let m=(h-c)/2,f=i.getPointAtLength(c);for(f.distance=c;m>a;){const n=m/2;let r=i.getPointAtLength(u[0]+n);r.distance=u[0]+n;let s=i.getPointAtLength(p[0]+n);s.distance=p[0]+n,m=n,(e-r.x)*(e-r.x)+(t-r.y)*(t-r.y)<(e-s.x)*(e-s.x)+(t-s.y)*(t-s.y)?(f=r,u[1]=u[0]+m):(f=s,u[0]=p[0],u[1]=u[0]+m),p[0]=u[1],p[1]=p[0]+m}return f},worldPointToViewport:(e,t,i)=>({x:(t+e.x)/e.scale,y:(i+e.y)/e.scale}),viewportPointToWorld:(e,t,i)=>({x:t*e.scale-e.x,y:i*e.scale-e.y}),_snapScales:[500,100,20,5,1,.2,.04,.008],getSnappingWidthForScale(e){const t=Math.round(Math.log(e)/Math.log(5))+2;return t>0&&t<this._snapScales.length?this._snapScales[t]:t>this._snapScales.length?this._snapScales[this._snapScales.length-1]:this._snapScales[0]},simplifyPathPointsUsingRDP:(e,t)=>c(e,t,0,e.length-1),smoothPathPoints(e){if(e.length<=2)return e;const t=[e[0]];for(let i=1;i<e.length-1;i++){let n=e[i-1],r=e[i],o=e[i+1];const a=(r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y),l=(r.x-o.x)*(r.x-o.x)+(r.y-o.y)*(r.y-o.y),c=s(n.x-r.x,n.y-r.y,o.x-r.x,o.y-r.y);if(a<1e4&&l<1e4||Math.abs(c)<.1){const e=o.x-n.x,i=o.y-n.y;t.push({t:"B",x:r.x,y:r.y,x1:-e/8,y1:-i/8,x2:e/8,y2:i/8})}else t.push(r)}return t.push(e[e.length-1]),t},multiplyMatrices(...e){if(0===e.length)return this.identityMatrix();let t=e[0];for(let i=1;i<e.length;i++)t=this.multiplyTwoMatrices(t,e[i]);return t},multiplyTwoMatrices(e,t){let i=e.length,n=e[0].length,r=t[0].length,s=new Array(i);for(let o=0;o<i;o++){s[o]=new Array(r);for(let i=0;i<r;i++){s[o][i]=0;for(let r=0;r<n;r++)s[o][i]+=e[o][r]*t[r][i]}}return s},translationMatrix:(e,t)=>[[1,0,e],[0,1,t],[0,0,1]],rotationMatrixInDegrees(e){return this.rotationMatrixInRadians(e*Math.PI/180)},rotationMatrixInRadians:e=>[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]],scaleMatrix(e,t){if(isNaN(e))throw new Error("nan");return[[e,0,0],[0,t,0],[0,0,1]]},identityMatrix:()=>[[1,0,0],[0,1,0],[0,0,1]],pointMatrix:(e,t)=>[[e],[t],[1]],standardTransformWithArea(e,t){const i=t.w*t.px,n=t.h*t.py,r=Math.cos(t.r*Math.PI/180),s=Math.sin(t.r*Math.PI/180),o=[[0,0,0],[0,0,0],[0,0,0]],a=t.x+i,l=t.y+n,c=-i,h=-n,d=e;for(let e=0;e<3;e++)o[e][0]=t.sx*(d[e][0]*r+d[e][1]*s),o[e][1]=t.sy*(d[e][1]*r-d[e][0]*s),o[e][2]=o[e][0]*c+o[e][1]*h+d[e][0]*a+d[e][1]*l+d[e][2];return o},transformPoint(e,t,i){const n=this.multiplyMatrices(e,[[t],[i],[1]]);return{x:n[0][0],y:n[1][0]}},transformVector(e,t,i){const n=this.transformPoint(e,0,0),r=this.transformPoint(e,t,i);return{x:r.x-n.x,y:r.y-n.y}},inverseMatrix3x3(e){const t=(t,i)=>{const n=[0,1,2],r=[0,1,2];return n.splice(t,1),r.splice(i,1),e[n[0]][r[0]]*e[n[1]][r[1]]-e[n[0]][r[1]]*e[n[1]][r[0]]},i=e[0][0]*t(0,0)-e[0][1]*t(0,1)+e[0][2]*t(0,2);if(this.tooSmall(i))return null;const n=[[0,0,0],[0,0,0],[0,0,0]];let r=2;for(let e=0;e<3;e++)for(let s=0;s<3;s++){const o=r%2==0?1:-1;n[s][e]=o*t(e,s)/i,r++}return n},findTranslationMatchingWorldPoint(e,t,i,n,r,s){let o=this.identityMatrix();if(s&&(o=this.inverseMatrix3x3(s)),o){const s=r.px*r.w,a=r.py*r.h,l=o,c=this.multiplyMatrices(this.translationMatrix(s,a),this.rotationMatrixInDegrees(r.r),this.scaleMatrix(r.sx,r.sy),this.translationMatrix(-s,-a)),h=i*c[2][0]+n*c[2][1]+c[2][2];if(!this.tooSmall(h)){const r=i*c[0][0]+n*c[0][1]+c[0][2],s=i*c[1][0]+n*c[1][1]+c[1][2];return{x:(l[0][0]*e+l[0][1]*t+l[0][2]-r)/h,y:(l[1][0]*e+l[1][1]*t+l[1][2]-s)/h}}}return null},nonNullNumber:e=>null==e?0:e,averagePoint(...e){let t=0,i=0;return e.forEach((e=>{t+=e.x,i+=e.y})),e.length>0?{x:t/e.length,y:i/e.length}:{x:t,y:i}},calculateRotationOffsetForSameCenter(e,t,i,n,r){const s=e-i,o=t-n,a=Math.cos(r),l=Math.sin(r);return{x:i+(s*a-o*l),y:n+(s*l+o*a)}},rotateVector90Clockwise:(e,t)=>({x:-t,y:e}),rotateVector90CounterClockwise:(e,t)=>({x:t,y:-e}),projectVectorToVector(e,t,i,n){const r=i*i+n*n;return this.tooSmall(r)?0:(e*i+t*n)/Math.sqrt(r)},stringHash(e,t=0){let i=3735928559^t,n=1103547991^t;for(let t,r=0;r<e.length;r++)t=e.charCodeAt(r),i=Math.imul(i^t,2654435761),n=Math.imul(n^t,1597334677);return i=Math.imul(i^i>>>16,2246822507),i^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(i^i>>>13,3266489909),4294967296*(2097151&n)+(i>>>0)},stringHash(e){var t=2166136261;for(let i=0;i<e.length;++i)t^=e.charCodeAt(i),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0},solveQuadratic(e,t,i){const n=t*t-4*e*i;if(n<=0)return null;const r=Math.sqrt(n);return{v1:(-t-r)/(2*e),v2:(r-t)/(2*e)}}}},9087:(e,t,i)=>{"use strict";i.d(t,{A9:()=>I,BH:()=>f,RL:()=>v,SU:()=>S,So:()=>s,X9:()=>a,Xs:()=>h,Yn:()=>x,ZU:()=>m,bn:()=>A,ks:()=>g,o0:()=>P,qO:()=>C,rh:()=>c,s0:()=>o,sM:()=>k,tA:()=>u,u1:()=>p,vZ:()=>d,vf:()=>w,wK:()=>l,xH:()=>y,zD:()=>b});var n=i(3590),r=i(2644);function s(e,t){const i={left:n.Z.roundPrecise1(e.area.x),top:n.Z.roundPrecise1(e.area.y),right:n.Z.roundPrecise1(t.area.w-e.area.x-e.area.w),bottom:n.Z.roundPrecise1(t.area.h-e.area.y-e.area.h)};return e.area.x>.6*t.area.w&&(i.width=n.Z.roundPrecise1(e.area.w),delete i.left),e.area.y>.6*t.area.h&&(i.height=n.Z.roundPrecise1(e.area.h),delete i.top),e.area.w+e.area.x<.4*t.area.w&&(i.width=n.Z.roundPrecise1(e.area.w),delete i.right),e.area.h+e.area.y<.4*t.area.h&&(i.height=n.Z.roundPrecise1(e.area.h),delete i.bottom),{on:!0,rules:i}}function o(e,t,i){const r={x:0,y:0,w:10,h:10,r:0,px:.5,py:.5,sx:1,sy:1};if(i.hasOwnProperty("width")?r.w=n.Z.roundPrecise1(i.width):i.hasOwnProperty("relWidth")&&(r.w=n.Z.roundPrecise1(i.relWidth*t.area.w/100)),i.hasOwnProperty("height")?r.h=n.Z.roundPrecise1(i.height):i.hasOwnProperty("relHeight")&&(r.h=n.Z.roundPrecise1(i.relHeight*t.area.h/100)),i.hcenter)r.x=n.Z.roundPrecise1(t.area.w/2-r.w/2);else{let e=!1;if(i.hasOwnProperty("left")?(e=!0,r.x=n.Z.roundPrecise1(i.left)):i.hasOwnProperty("relLeft")&&(e=!0,r.x=n.Z.roundPrecise1(i.relLeft*t.area.w/100)),i.hasOwnProperty("right"))e?r.w=n.Z.roundPrecise1(t.area.w-i.right-r.x):r.x=n.Z.roundPrecise1(t.area.w-i.right-r.w);else if(i.hasOwnProperty("relRight")){const s=i.relRight*t.area.w/100;e?r.w=n.Z.roundPrecise1(t.area.w-s-r.x):r.x=n.Z.roundPrecise1(t.area.w-s-r.w)}}if(i.vcenter)r.y=n.Z.roundPrecise1(t.area.h/2-r.h/2);else{let e=!1;if(i.hasOwnProperty("top")?(e=!0,r.y=n.Z.roundPrecise1(i.top)):i.hasOwnProperty("relTop")&&(e=!0,r.y=n.Z.roundPrecise1(i.relTop*t.area.h/100)),i.hasOwnProperty("bottom"))e?r.h=n.Z.roundPrecise1(t.area.h-i.bottom-r.y):r.y=n.Z.roundPrecise1(t.area.h-i.bottom-r.h);else if(i.hasOwnProperty("relBottom")){const s=i.relBottom*t.area.h/100;e?r.h=n.Z.roundPrecise1(t.area.h-s-r.y):r.y=n.Z.roundPrecise1(t.area.h-s-r.h)}}return r.w<0&&(r.w=0),r.h<0&&(r.h=0),r}function a(e,t){if(e.autoLayout.rules.hcenter)return;let i=0,r=t.area.w;e.autoLayout.rules.hasOwnProperty("left")?(i=e.autoLayout.rules.left,delete e.autoLayout.rules.left):e.autoLayout.rules.hasOwnProperty("relLeft")&&(i=n.Z.roundPrecise1(e.autoLayout.rules.relLeft*t.area.w/100),delete e.autoLayout.rules.relLeft),e.autoLayout.rules.hasOwnProperty("right")?(r=t.area.w-e.autoLayout.rules.right,delete e.autoLayout.rules.right):e.autoLayout.rules.hasOwnProperty("relRight")&&(r=t.area.w-n.Z.roundPrecise1(e.autoLayout.rules.relRight*t.area.w/100),delete e.autoLayout.rules.relRight),e.autoLayout.rules.hasOwnProperty("width")||(e.autoLayout.rules.width=Math.abs(n.Z.roundPrecise1(r-i))),e.autoLayout.rules.hcenter=!0}function l(e,t){if(e.autoLayout.rules.vcenter)return;let i=0,r=t.area.w;e.autoLayout.rules.hasOwnProperty("top")?(i=e.autoLayout.rules.top,delete e.autoLayout.rules.top):e.autoLayout.rules.hasOwnProperty("relTop")&&(i=n.Z.roundPrecise1(e.autoLayout.rules.relTop*t.area.w/100),delete e.autoLayout.rules.relTop),e.autoLayout.rules.hasOwnProperty("bottom")?(r=t.area.h-e.autoLayout.rules.bottom,delete e.autoLayout.rules.bottom):e.autoLayout.rules.hasOwnProperty("relBottom")&&(r=t.area.h-n.Z.roundPrecise1(e.autoLayout.rules.relBottom*t.area.w/100),delete e.autoLayout.rules.relBottom),e.autoLayout.rules.hasOwnProperty("height")||(e.autoLayout.rules.height=Math.abs(n.Z.roundPrecise1(r-i))),e.autoLayout.rules.vcenter=!0}function c(e,t){e.autoLayout.rules.vcenter?(e.autoLayout.rules.bottom=n.Z.roundPrecise1(t.area.h-e.area.y-e.area.h),e.autoLayout.rules.height=n.Z.roundPrecise1(e.area.h),e.autoLayout.rules.vcenter=!1):(e.autoLayout.rules.hasOwnProperty("top")||e.autoLayout.rules.hasOwnProperty("relTop"))&&(e.autoLayout.rules.hasOwnProperty("height")||e.autoLayout.rules.hasOwnProperty("relHeight")?e.autoLayout.rules.bottom=n.Z.roundPrecise1(t.area.h-e.area.y-e.area.h):(e.autoLayout.rules.height=n.Z.roundPrecise1(e.area.h),e.autoLayout.rules.hasOwnProperty("bottom")&&e.autoLayout.rules.hasOwnProperty("relBottom")||(e.autoLayout.rules.bottom=n.Z.roundPrecise1(t.area.h-e.area.y-e.area.h)))),delete e.autoLayout.rules.top,delete e.autoLayout.rules.relTop}function h(e,t){e.autoLayout.rules.vcenter&&(e.autoLayout.rules.vcenter=!1),e.autoLayout.rules.top=n.Z.roundPrecise1(e.area.y),(e.autoLayout.rules.hasOwnProperty("bottom")||e.autoLayout.rules.hasOwnProperty("relBottom"))&&(delete e.autoLayout.rules.height,delete e.autoLayout.rules.relHeight)}function d(e,t){e.autoLayout.rules.vcenter&&(e.autoLayout.rules.vcenter=!1);let i=0;n.Z.tooSmall(t.area.h)||(i=n.Z.roundPrecise1(100*e.area.y/t.area.h)),e.autoLayout.rules.relTop=i,delete e.autoLayout.rules.top,(e.autoLayout.rules.hasOwnProperty("bottom")||e.autoLayout.rules.hasOwnProperty("relBottom"))&&(delete e.autoLayout.rules.height,delete e.autoLayout.rules.relHeight)}function u(e,t){e.autoLayout.rules.vcenter?(e.autoLayout.rules.top=n.Z.roundPrecise1(e.area.x),e.autoLayout.rules.height=n.Z.roundPrecise1(e.area.h),e.autoLayout.rules.vcenter=!1):(e.autoLayout.rules.hasOwnProperty("bottom")||e.autoLayout.rules.hasOwnProperty("relBottom"))&&(e.autoLayout.rules.hasOwnProperty("height")||e.autoLayout.rules.hasOwnProperty("relHeight")?e.autoLayout.rules.top=n.Z.roundPrecise1(e.area.x):(e.autoLayout.rules.height=n.Z.roundPrecise1(e.area.h),e.autoLayout.rules.hasOwnProperty("top")&&e.autoLayout.rules.hasOwnProperty("relTop")||(e.autoLayout.rules.top=n.Z.roundPrecise1(e.area.x)))),delete e.autoLayout.rules.bottom,delete e.autoLayout.rules.relBottom}function p(e,t){e.autoLayout.rules.vcenter&&(e.autoLayout.rules.vcenter=!1),e.autoLayout.rules.bottom=n.Z.roundPrecise1(t.area.h-e.area.y-e.area.h),(e.autoLayout.rules.hasOwnProperty("top")||e.autoLayout.rules.hasOwnProperty("relTop"))&&(delete e.autoLayout.rules.height,delete e.autoLayout.rules.relHeight)}function m(e,t){e.autoLayout.rules.vcenter&&(e.autoLayout.rules.vcenter=!1);let i=0;n.Z.tooSmall(t.area.h)||(i=n.Z.roundPrecise1(100*(t.area.h-e.area.y-e.area.h)/t.area.h)),e.autoLayout.rules.relBottom=i,delete e.autoLayout.rules.bottom,(e.autoLayout.rules.hasOwnProperty("top")||e.autoLayout.rules.hasOwnProperty("relTop"))&&(delete e.autoLayout.rules.height,delete e.autoLayout.rules.relHeight)}function f(e,t){e.autoLayout.rules.hcenter?(e.autoLayout.rules.right=n.Z.roundPrecise1(t.area.w-e.area.x-e.area.w),e.autoLayout.rules.width=n.Z.roundPrecise1(e.area.w),e.autoLayout.rules.hcenter=!1):(e.autoLayout.rules.hasOwnProperty("left")||e.autoLayout.rules.hasOwnProperty("relLeft"))&&(e.autoLayout.rules.hasOwnProperty("width")||e.autoLayout.rules.hasOwnProperty("relWidth")?e.autoLayout.rules.right=n.Z.roundPrecise1(t.area.w-e.area.x-e.area.w):(e.autoLayout.rules.width=n.Z.roundPrecise1(e.area.w),e.autoLayout.rules.hasOwnProperty("right")&&e.autoLayout.rules.hasOwnProperty("relRight")||(e.autoLayout.rules.right=n.Z.roundPrecise1(t.area.w-e.area.x-e.area.w)))),delete e.autoLayout.rules.left,delete e.autoLayout.rules.relLeft}function g(e,t){e.autoLayout.rules.hcenter&&(e.autoLayout.rules.hcenter=!1),e.autoLayout.rules.left=n.Z.roundPrecise1(e.area.x),(e.autoLayout.rules.hasOwnProperty("right")||e.autoLayout.rules.hasOwnProperty("relRight"))&&(delete e.autoLayout.rules.width,delete e.autoLayout.rules.relWidth)}function v(e,t){e.autoLayout.rules.hcenter&&(e.autoLayout.rules.hcenter=!1);let i=0;n.Z.tooSmall(t.area.w)||(i=n.Z.roundPrecise1(100*e.area.x/t.area.w)),e.autoLayout.rules.relLeft=i,delete e.autoLayout.rules.left,(e.autoLayout.rules.hasOwnProperty("right")||e.autoLayout.rules.hasOwnProperty("relRight"))&&(delete e.autoLayout.rules.width,delete e.autoLayout.rules.relWidth)}function y(e,t){e.autoLayout.rules.hcenter?(e.autoLayout.rules.left=n.Z.roundPrecise1(e.area.x),e.autoLayout.rules.width=n.Z.roundPrecise1(e.area.w),e.autoLayout.rules.hcenter=!1):(e.autoLayout.rules.hasOwnProperty("right")||e.autoLayout.rules.hasOwnProperty("relRight"))&&(e.autoLayout.rules.hasOwnProperty("width")||e.autoLayout.rules.hasOwnProperty("relWidth")?e.autoLayout.rules.left=n.Z.roundPrecise1(e.area.x):(e.autoLayout.rules.width=n.Z.roundPrecise1(e.area.w),e.autoLayout.rules.hasOwnProperty("left")&&e.autoLayout.rules.hasOwnProperty("relLeft")||(e.autoLayout.rules.left=n.Z.roundPrecise1(e.area.x)))),delete e.autoLayout.rules.right,delete e.autoLayout.rules.relRight}function x(e,t){e.autoLayout.rules.hcenter&&(e.autoLayout.rules.hcenter=!1),e.autoLayout.rules.right=n.Z.roundPrecise1(t.area.w-e.area.x-e.area.w),(e.autoLayout.rules.hasOwnProperty("left")||e.autoLayout.rules.hasOwnProperty("relLeft"))&&(delete e.autoLayout.rules.width,delete e.autoLayout.rules.relWidth)}function b(e,t){e.autoLayout.rules.hcenter&&(e.autoLayout.rules.hcenter=!1);let i=0;n.Z.tooSmall(t.area.w)||(i=n.Z.roundPrecise1(100*(t.area.w-e.area.x-e.area.w)/t.area.w)),e.autoLayout.rules.relRight=i,delete e.autoLayout.rules.right,(e.autoLayout.rules.hasOwnProperty("left")||e.autoLayout.rules.hasOwnProperty("relLeft"))&&(delete e.autoLayout.rules.width,delete e.autoLayout.rules.relWidth)}function w(e,t){e.autoLayout.rules.hcenter=!1,e.autoLayout.rules.hasOwnProperty("left")||e.autoLayout.rules.hasOwnProperty("relLeft")||(e.autoLayout.rules.left=n.Z.roundPrecise1(e.area.x)),e.autoLayout.rules.hasOwnProperty("right")||e.autoLayout.rules.hasOwnProperty("relRight")||(e.autoLayout.rules.right=n.Z.roundPrecise1(t.area.w-e.area.x-e.area.w)),delete e.autoLayout.rules.width,delete e.autoLayout.rules.relWidth}function C(e,t){if(delete e.autoLayout.rules.relWidth,e.autoLayout.rules.width=n.Z.roundPrecise1(e.area.w),e.autoLayout.rules.hcenter)return;const i=e.autoLayout.rules.hasOwnProperty("left")||e.autoLayout.rules.hasOwnProperty("relLeft"),r=e.autoLayout.rules.hasOwnProperty("right")||e.autoLayout.rules.hasOwnProperty("relRight");i&&r&&(delete e.autoLayout.rules.right,delete e.autoLayout.rules.relRight)}function P(e,t){if(delete e.autoLayout.rules.width,e.autoLayout.rules.relWidth=n.Z.tooSmall(t.area.w)?0:n.Z.roundPrecise1(100*e.area.w/t.area.w),e.autoLayout.rules.hcenter)return;const i=e.autoLayout.rules.hasOwnProperty("left")||e.autoLayout.rules.hasOwnProperty("relLeft"),r=e.autoLayout.rules.hasOwnProperty("right")||e.autoLayout.rules.hasOwnProperty("relRight");i&&r&&(delete e.autoLayout.rules.right,delete e.autoLayout.rules.relRight)}function k(e,t){e.autoLayout.rules.vcenter=!1,e.autoLayout.rules.hasOwnProperty("top")||e.autoLayout.rules.hasOwnProperty("relTop")||(e.autoLayout.rules.top=n.Z.roundPrecise1(e.area.y)),e.autoLayout.rules.hasOwnProperty("bottom")||e.autoLayout.rules.hasOwnProperty("relBottom")||(e.autoLayout.rules.bottom=n.Z.roundPrecise1(t.area.h-e.area.y-e.area.h)),delete e.autoLayout.rules.height,delete e.autoLayout.rules.relHeight}function S(e,t){if(delete e.autoLayout.rules.relHeight,e.autoLayout.rules.height=n.Z.roundPrecise1(e.area.h),e.autoLayout.rules.vcenter)return;const i=e.autoLayout.rules.hasOwnProperty("top")||e.autoLayout.rules.hasOwnProperty("relTop"),r=e.autoLayout.rules.hasOwnProperty("bottom")||e.autoLayout.rules.hasOwnProperty("relBottom");i&&r&&(delete e.autoLayout.rules.bottom,delete e.autoLayout.rules.relBottom)}function I(e,t){if(delete e.autoLayout.rules.height,e.autoLayout.rules.relHeight=n.Z.tooSmall(t.area.h)?0:n.Z.roundPrecise1(100*e.area.h/t.area.h),e.autoLayout.rules.hcenter)return;const i=e.autoLayout.rules.hasOwnProperty("top")||e.autoLayout.rules.hasOwnProperty("relTop"),r=e.autoLayout.rules.hasOwnProperty("bottom")||e.autoLayout.rules.hasOwnProperty("relBottom");i&&r&&(delete e.autoLayout.rules.bottom,delete e.autoLayout.rules.relBottom)}function A(e,t){if(!e.autoLayout||!e.autoLayout.on||!e.autoLayout.rules)return[];const i=[],s=(0,r.rs)(e.area.w/2,0,e),o=(0,r.rs)(e.area.x+e.area.w/2,0,t),a=(0,r.rs)(e.area.w,e.area.h/2,e),l=(0,r.rs)(t.area.w,e.area.y+e.area.h/2,t),c=(0,r.rs)(e.area.w/2,e.area.h,e),h=(0,r.rs)(e.area.x+e.area.w/2,t.area.h,t),d=(0,r.rs)(0,e.area.h/2,e),u=(0,r.rs)(0,e.area.y+e.area.h/2,t),p=e.autoLayout.rules;return p.hcenter?(i.push({t:"line",p1:d,p2:u}),i.push({t:"line",p1:a,p2:l}),i.push({t:"label",text:"center",x:(d.x+u.x)/2,y:(d.y+u.y)/2,limit:n.Z.distanceBetweenPoints(d.x,d.y,u.x,u.y)}),i.push({t:"label",text:"center",x:(a.x+l.x)/2,y:(a.y+l.y)/2,limit:n.Z.distanceBetweenPoints(a.x,a.y,l.x,l.y)})):((p.hasOwnProperty("left")||p.hasOwnProperty("relLeft"))&&(i.push({t:"line",p1:d,p2:u}),p.hasOwnProperty("relLeft")?i.push({t:"label",text:n.Z.roundPrecise1(p.relLeft)+" %",x:(d.x+u.x)/2,y:(d.y+u.y)/2,limit:n.Z.distanceBetweenPoints(d.x,d.y,u.x,u.y)}):i.push({t:"label",text:""+n.Z.roundPrecise1(p.left),x:(d.x+u.x)/2,y:(d.y+u.y)/2,limit:n.Z.distanceBetweenPoints(d.x,d.y,u.x,u.y)})),(p.hasOwnProperty("right")||p.hasOwnProperty("relRight"))&&(i.push({t:"line",p1:a,p2:l}),p.hasOwnProperty("relRight")?i.push({t:"label",text:n.Z.roundPrecise1(p.relRight)+" %",x:(a.x+l.x)/2,y:(a.y+l.y)/2,limit:n.Z.distanceBetweenPoints(a.x,a.y,l.x,l.y)}):i.push({t:"label",text:""+n.Z.roundPrecise1(p.right),x:(a.x+l.x)/2,y:(a.y+l.y)/2,limit:n.Z.distanceBetweenPoints(a.x,a.y,l.x,l.y)}))),p.vcenter?(i.push({t:"line",p1:s,p2:o}),i.push({t:"line",p1:c,p2:h}),i.push({t:"label",text:"center",x:(s.x+o.x)/2,y:(s.y+o.y)/2,limit:n.Z.distanceBetweenPoints(s.x,s.y,o.x,o.y)}),i.push({t:"label",text:"center",x:(c.x+h.x)/2,y:(c.y+h.y)/2,limit:n.Z.distanceBetweenPoints(c.x,c.y,h.x,h.y)})):((p.hasOwnProperty("top")||p.hasOwnProperty("relTop"))&&(i.push({t:"line",p1:s,p2:o}),p.hasOwnProperty("relTop")?i.push({t:"label",text:n.Z.roundPrecise1(p.relTop)+" %",x:(s.x+o.x)/2,y:(s.y+o.y)/2,limit:n.Z.distanceBetweenPoints(s.x,s.y,o.x,o.y)}):i.push({t:"label",text:""+n.Z.roundPrecise1(p.top),x:(s.x+o.x)/2,y:(s.y+o.y)/2,limit:n.Z.distanceBetweenPoints(s.x,s.y,o.x,o.y)})),(p.hasOwnProperty("bottom")||p.hasOwnProperty("relBottom"))&&(i.push({t:"line",p1:c,p2:h}),p.hasOwnProperty("relBottom")?i.push({t:"label",text:n.Z.roundPrecise1(p.relBottom)+" %",x:(c.x+h.x)/2,y:(c.y+h.y)/2,limit:n.Z.distanceBetweenPoints(c.x,c.y,h.x,h.y)}):i.push({t:"label",text:""+n.Z.roundPrecise1(p.bottom),x:(c.x+h.x)/2,y:(c.y+h.y)/2,limit:n.Z.distanceBetweenPoints(c.x,c.y,h.x,h.y)}))),i}},3086:(e,t,i)=>{"use strict";i.d(t,{It:()=>a,_W:()=>l,vq:()=>o});const n=["Arial, Helvetica, sans-serif",'"Arial Black", Gadget, sans-serif','"Book Antiqua", Palatino, serif','"Comic Sans MS", cursive, sans-serif','"Courier New", Courier, monospace',"Georgia, serif","Helvetica, sans-serif","Impact, Charcoal, sans-serif",'"Lucida Grande", sans-serif','"Lucida Sans Unicode", "Lucida Grande", sans-serif','"Lucida Console", Monaco, monospace',"Monaco, monospace",'"Palatino Linotype", "Book Antiqua", Palatino, serif',"Tahoma, Geneva, sans-serif",'"Times New Roman", Times, serif','"Trebuchet MS", Helvetica, sans-serif',"Verdana, Geneva, sans-serif","Alfa Slab One","Cherry Swash","Caveat Brush","Heebo","Carter One","Permanent Marker","Josefin Sans","Cherry Swash","Josefin Sans","Knewave","Nunito","Caveat","Indie-Flower","Single-Day"],r=function(){const e={};for(let t=0;t<n.length;t++){let i=n[t].indexOf(","),r=n[t].trim();i>0&&(r=n[t].substring(0,i).trim()),'"'===r.charAt(0)&&'"'===r.charAt(r.length-1)&&(r=r.substring(1,r.length-1)),e[r]=n[t]}return e}(),s=function(e){const t=[];for(let i in e)e.hasOwnProperty(i)&&t.push({name:i,family:e[i]});return t.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)),t}(r);function o(){return"Arial"}function a(e){return r[e]||"Arial, Helvetica, sans-serif"}function l(){return s}},7196:(e,t,i)=>{"use strict";i.d(t,{$9:()=>m,DD:()=>g,FR:()=>A,Ho:()=>c,Hp:()=>w,Kp:()=>d,Oy:()=>b,U3:()=>S,XZ:()=>y,_U:()=>E,bL:()=>T,eN:()=>h,f0:()=>k,kT:()=>v,pp:()=>l,qv:()=>u,tb:()=>C,td:()=>p,u2:()=>_});var n=i(4691),r=i(3363),s=i(3086),o=i(6234),a=i(2643);const l={NONE:"none",SIDE_PANEL:"side-panel",TOOLTIP:"tooltip",values(){return n.Z.enumerateConstants(this)}},c=[{name:"Wrap",value:"normal"},{name:"No Wrap",value:"nowrap"},{name:"Preserved",value:"pre"},{name:"Preserved + Wrap",value:"pre-wrap"}],h=[{field:"color",name:"Color",type:"color"},{field:"bold",name:"Bold",type:"boolean"},{field:"halign",name:"Horizontal Align",type:"choice",options:["left","center","right"]},{field:"valign",name:"Vertical Align",type:"choice",options:["top","middle","bottom"]},{field:"fontSize",name:"Font Size",type:"number"},{field:"whiteSpace",name:"White Space",type:"choice",options:c.map((e=>e.value))},{field:"font",name:"Font",type:"choice",options:(0,o.UI)((0,s._W)(),(e=>e.name))},{field:"paddingLeft",name:"Padding Left",type:"number"},{field:"paddingRight",name:"Padding Right",type:"number"},{field:"paddingTop",name:"Padding Top",type:"number"},{field:"paddingBottom",name:"Padding Bottom",type:"number"},{field:"letterSpacing",name:"Letter spacing",type:"number",min:0}];function d(e){for(let t=0;t<h.length;t++)if(h[t].field===e)return h[t].name;return e}const u={none:{id:"none",name:"None",description:"Cannot be dragged"},free:{id:"free",name:"Free",description:"Can be dragged and dropped anywhere on the scene"},path:{id:"path",name:"Path",description:"Can be dragged only along specified path"},dragndrop:{id:"dragndrop",name:"Drag-n-drop",description:"Can be dragged but has to be dropped to designated drop area, otherwise the item will return to its original position"}},p={text:"",bold:!1,color:"rgba(0,0,0,1.0)",halign:"center",valign:"middle",fontSize:14,whiteSpace:"normal",font:(0,s.vq)(),paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,letterSpacing:0},m={fill:{type:"solid",color:"rgba(240,240,240,1.0)"},strokeColor:"rgba(30,30,30,1.0)",strokeSize:2,strokePattern:"solid"},f={x:0,y:0,w:0,h:0,r:0,px:.5,py:.5,sx:1,sy:1},g={opacity:{type:"number",name:"Opacity"},selfOpacity:{type:"number",name:"Self opacity"},visible:{type:"boolean",name:"Visible"},clip:{type:"boolean",name:"Clip"},"behavior.dragging":{type:"choice",name:"Dragging",options:["none","free","path","dragndrop"]}},v={area:f,opacity:100,selfOpacity:100,visible:!0,tags:[],links:[],blendMode:"normal",cursor:"default",shape:"none",clip:!1,mount:!0,effects:[],textSlots:{"*":p},description:"",interactionMode:l.TOOLTIP,autoLayout:{on:!1,rules:{}},behavior:{events:[],dragging:"none",dropTo:"",dragPath:"",dragPathAlign:!1,dragPathRotation:0},shapeProps:{},tooltipBackground:"rgba(230,230,230,1.0)",tooltipColor:"rgba(30,30,30,1.0)"},y={cursor:"default",area:f,shape:"empty",opacity:100,blendMode:"normal",name:"",description:"",links:[],textSlots:{},autoLayout:{on:!1},behavior:{events:[],dragging:"none",dropTo:"",dragPath:""}},x={};function b(e){const t=e.shape,i=(0,a.o)(e,v),s=(0,a.o)(i.shapeProps,function(e){if(x[e])return x[e];const t=r.Z.find(e);return t?(x[e]={},(0,o.Ed)(t.args,((t,i)=>{x[e][i]=n.Z.clone(t.value)})),"standard"===t.shapeType&&(0,o.Ed)(m,((t,i)=>{x[e][i]=n.Z.clone(t)})),x[e]):{}}(t));return s?i.shapeProps=s:delete i.shapeProps,i}function w(e,t){P(e,null,t)}function C(e,t){P(e,null,t,!0)}function P(e,t,i,n){Array.isArray(e)&&e.forEach(((e,r)=>{const s=i(e,t,r);n&&!s||(e.childItems&&P(e.childItems,e,i,n),e._childItems&&P(e._childItems,e,i,n))}))}function k(e,t){let i=[].concat(e);for(;i.length>0;){const e=i.shift();if(t(e))return e;e.childItems&&e.childItems.length>0&&(i=i.concat(e.childItems)),e._childItems&&e._childItems.length>0&&(i=i.concat(e._childItems))}return null}function S(e){return e.description.trim().length>8}const I=new Set(["color","advanced-color","stroke-pattern","path-cap","number"]);function A(e,t){const i=r.Z.find(e.shape);if(!i)return;const s=r.Z.find(t.shape);s&&((0,o.Ed)(e.shapeProps,((e,o)=>{const a=r.Z.getShapePropDescriptor(i,o),l=r.Z.getShapePropDescriptor(s,o);a&&l&&a.type===l.type&&I.has(a.type)&&(t.shapeProps[o]=n.Z.clone(e))})),(0,o.Ed)(e.textSlots,((e,i)=>{t.textSlots.hasOwnProperty(i)&&(0,o.Ed)(p,((r,s)=>{"text"!==s&&(t.textSlots[i][s]=n.Z.clone(e[s]))}))})))}function _(e,t){const i=g[t];if(i)return i;if(e&&0===t.indexOf("shapeProps.")){const i=t.substr(11);if("standard"===e.shapeType&&r.Z.standardShapeProps.hasOwnProperty(i))return r.Z.standardShapeProps[i];if(e.args.hasOwnProperty(i))return e.args[i]}else if(0===t.indexOf("textSlots.")){const e=t.indexOf(".",11),i=t.substr(e+1),n=(0,o.sE)(h,(e=>e.field===i));if(n)return n}return null}function E(e){const t=e.area.w,i=e.area.h;return`M ${t} ${i}  L 0 ${i} L 0 0  L ${t} 0  L ${t} ${i} Z`}function T(e){const t=e.area.w,i=e.area.h;return`M 0 0 L ${t} 0  M ${t} 0 L ${t} ${i} M ${t} ${i} L 0 ${i} M 0 ${i} L 0 0`}},1179:(e,t,i)=>{"use strict";i.d(t,{W:()=>n});const n=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","difference","exclusion","hue","saturation","color","luminosity"]},1377:(e,t,i)=>{"use strict";i.d(t,{EC:()=>m,GO:()=>v,q4:()=>g,z9:()=>f});var n=i(7196),r=i(3363),s=i(4670),o=i.n(s),a=i(2643),l=i(8270),c=i(2196),h=i(6234),d=i(4691);function u(e){e.id||(e.id=o().generate())}function p(e){u(e),e.hasOwnProperty("on")||(e.on=!0);const t=c.Z.main[e.method];return!!t&&(e.args||(e.args={}),(0,h.Ed)(t.args,((t,i)=>{e.args.hasOwnProperty(i)||(e.args[i]=t.value)})),(0,h.Ed)(e.args,((i,n)=>{t.args.hasOwnProperty(n)||delete e.args[n]})),!0)}function m(e){const t=r.Z.find(e.shape);if(!t)return;const i=r.Z.getShapeArgs(t);(0,h.Ed)(e.shapeProps,((t,n)=>{i.hasOwnProperty(n)||delete e.shapeProps[n]}))}function f(e){var t;e.textSlots||(e.textSlots={}),e.shape||(e.shape="none"),e.meta||(e.meta={strokeOffset:0}),"curve"===e.shape&&function(e){e.shape="path",!Array.isArray(e.shapeProps.paths)&&Array.isArray(e.shapeProps.points)&&(e.shapeProps.paths=[{points:e.shapeProps.points,closed:e.shapeProps.closed}],delete e.shapeProps.points,delete e.shapeProps.closed)}(e),"connector"===e.shape&&function(e){e.shapeProps&&Array.isArray(e.shapeProps.points)&&e.shapeProps.points.forEach((e=>{e.hasOwnProperty("id")||(e.id=o().generate()),(e.hasOwnProperty("bx")||e.hasOwnProperty("by"))&&(e.nx=e.bx,e.ny=e.by,delete e.bx,delete e.by)}))}(e),"path"===e.shape&&function(e){Array.isArray(e.shapeProps.paths)&&e.shapeProps.paths.forEach((t=>{t.id||(t.id=o().generate()),Array.isArray(t.points)||(t.points=[]),"relative"!==t.pos&&(t.pos="relative",t.points=t.points.map((t=>(0,l.Vk)(t,e.area.w,e.area.h)))),t.points.forEach((e=>{e.hasOwnProperty("id")||(e.id=o().generate())}))}))}(e),"frame_player"===e.shape&&function(e){e.shapeProps||(e.shapeProps={}),Array.isArray(e.shapeProps.animations)||(e.shapeProps.animations=[]),e.shapeProps.animations.forEach((e=>{"item"===e.kind?(e.hasOwnProperty("itemId")||(e.itemId=e.id,e.id=o().generate()),e.hasOwnProperty("id")||(e.id=o().generate())):"function"===e.kind&&(e.hasOwnProperty("funcId")||(e.funcId=e.id,e.id=o().generate()),e.hasOwnProperty("id")||(e.id=o().generate()))}))}(e),(0,a.I)(e,n.kT),function(e){if(Array.isArray(e.groups)){const t=new Set(e.groups);Array.isArray(e.tags)&&e.tags.forEach((e=>t.add(e))),e.tags=Array.from(t),delete e.groups}}(e),t=e.behavior,(0,h.Ed)(t.events,(e=>{u(e),(0,h.Ed)(e.actions,p);for(let t=e.actions.length-1;t>=0;t--)p(e.actions[t])||e.actions.splice(t,1)})),(0,h.Ed)(e.links,u);let i=r.Z.find(e.shape);if(!i)return;e.shapeProps||(e.shapeProps={}),i.fixItem&&i.fixItem(e),(0,h.Ed)(e.shapeProps,((t,n)=>{i.args&&i.args.hasOwnProperty(n)||delete e.shapeProps[n]})),(0,h.Ed)(i.args,((t,n)=>{e.shapeProps.hasOwnProperty(n)?"object"==typeof e.shapeProps[n]&&(0,a.I)(e.shapeProps[n],i.args[n].value):e.shapeProps[n]=d.Z.clone(t.value)})),"standard"===i.shapeType&&function(e){(0,a.I)(e.shapeProps,n.$9)}(e);const s=i.getTextSlots(e);s&&(0,h.Ed)(s,(t=>{e.textSlots.hasOwnProperty(t.name)||(e.textSlots[t.name]={},g(e.textSlots[t.name]))}))}function g(e){return(0,a.I)(e,n.td)}function v(e){const t=r.Z.find(e.shape);t&&t.args&&(e.shapeProps||(e.shapeProps={}),(0,h.Ed)(t.args,((t,i)=>{e.shapeProps.hasOwnProperty(i)||(e.shapeProps[i]=t.value)})))}},2644:(e,t,i)=>{"use strict";i.d(t,{I4:()=>g,Ls:()=>v,N5:()=>c,aR:()=>f,av:()=>p,ht:()=>h,mo:()=>d,pD:()=>m,rs:()=>l,uI:()=>u});var n=i(6234),r=i(3363),s=i(2017),o=i(3590);const a=new s.Yd("ItemMath");function l(e,t,i){return o.Z.worldPointInArea(e,t,i.area,i.meta&&i.meta.transformMatrix?i.meta.transformMatrix:null)}function c(e,t,i){return o.Z.localPointInArea(e,t,i.area,i.meta&&i.meta.transformMatrix?i.meta.transformMatrix:null)}function h(e,t,i,n){const r=l(e,t,i);return c(r.x,r.y,n)}function d(e){const t=u(e.area.w,0,e);return 180*o.Z.fullAngleForVector(t.x,t.y)/Math.PI}function u(e,t,i){const n=l(0,0,i),r=l(e,t,i);return{x:r.x-n.x,y:r.y-n.y}}function p(e){if(!e||0===e.length)return{x:0,y:0,w:0,h:0};let t=null;return(0,n.Ed)(e,(e=>{const i=[l(0,0,e),l(e.area.w,0,e),l(e.area.w,e.area.h,e),l(0,e.area.h,e)];(0,n.Ed)(i,(e=>{t?(t.x1>e.x&&(t.x1=e.x),t.x2<e.x&&(t.x2=e.x),t.y1>e.y&&(t.y1=e.y),t.y2<e.y&&(t.y2=e.y)):t={x1:e.x,x2:e.x,y1:e.y,y2:e.y}}))})),{x:t.x1,y:t.y1,w:t.x2-t.x1,h:t.y2-t.y1}}function m(e){const t=u(1,0,e),i=u(0,1,e);return{x:o.Z.vectorLength(t.x,t.y),y:o.Z.vectorLength(i.x,i.y)}}function f(e){const t=e.meta&&e.meta.transformMatrix?e.meta.transformMatrix:o.Z.identityMatrix();return o.Z.standardTransformWithArea(t,e.area)}function g(e,t){return!(!e.meta||!Array.isArray(e.meta.ancestorIds))&&e.meta.ancestorIds.indexOf(t)>=0}function v(e){a.info("Computing shape outline for item",e.id,e.name);const t=r.Z.find(e.shape);if(t){const i=t.computeOutline(e);if(i){const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d",i),e}}return null}},8537:(e,t,i)=>{"use strict";i.d(t,{GL:()=>l,mY:()=>c,wS:()=>h});var n=i(2643),r=i(7196),s=i(6234),o=i(4691);const a={name:"",description:"",tags:[],items:[],settings:{screen:{draggable:!0}},style:{backgroundColor:"rgba(240, 240, 240, 1.0)",gridColor:"rgba(128 ,128, 128, 0.2)",boundaryBoxColor:"rgba(36, 182, 255, 1)",controlPointsColor:"rgba(4,177,23, 1.0)"}};function l(e){(0,n.I)(e,a)}function c(e){const t=(0,n.o)(e,a);return t.items=(0,s.UI)(t.items,(e=>(0,r.Oy)(e))),t}function h(e){const t=o.Z.clone(e);return c(o.Z.sanitizeScheme(t))}},3341:(e,t,i)=>{"use strict";i.d(t,{W4:()=>E,pf:()=>T,hG:()=>M,ZP:()=>Z});var n=i(6234);class r{constructor(e,t,i){this.point={x:e,y:t},this.value=i,this.nw=null,this.ne=null,this.sw=null,this.se=null}addPoint(e,t,i){e>=this.point.x&&t>=this.point.y?this.se=s(this.se,e,t,i):e<=this.point.x&&t>=this.point.y?this.sw=s(this.sw,e,t,i):e>=this.point.x&&t<=this.point.y?this.ne=s(this.ne,e,t,i):this.nw=s(this.nw,e,t,i)}forEachInRange(e,t,i,n,r){e<=this.point.x&&this.point.x<=i&&t<=this.point.y&&this.point.y<=n&&r(this.value,this.point),this.se&&(e>=this.point.x||i>=this.point.x)&&(t>=this.point.y||n>=this.point.y)&&this.se.forEachInRange(e,t,i,n,r),this.sw&&(e<=this.point.x||i<=this.point.x)&&(t>=this.point.y||n>=this.point.y)&&this.sw.forEachInRange(e,t,i,n,r),this.ne&&(e>=this.point.x||i>=this.point.x)&&(t<=this.point.y||n<=this.point.y)&&this.ne.forEachInRange(e,t,i,n,r),this.nw&&(e<=this.point.x||i<=this.point.x)&&(t<=this.point.y||n<=this.point.y)&&this.nw.forEachInRange(e,t,i,n,r)}}function s(e,t,i,n){return e?(e.addPoint(t,i,n),e):new r(t,i,n)}class o{constructor(){this.root=null}addPoint(e,t,i){this.root?this.root.addPoint(e,t,i):this.root=new r(e,t,i)}forEachInRange(e,t,i,n,r){if(!this.root)return[];this.root.forEachInRange(e,t,i,n,r)}}var a=i(3590),l=i(4691),c=i(4670),h=i.n(c),d=i(3363),u=i(2629),p=i(7196),m=i(1377),f=i(8537),g=i(2017),v=i(2196),y=i(8370),x=i(2643),b=i(9375),w=i(8595),C=i(4525),P=i(2644),k=i(9087);function S(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function I(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?S(Object(i),!0).forEach((function(t){A(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function A(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const _=new g.Yd("SchemeContainer"),E={id:"",moved:!0,rotated:!1,resized:!1},T={moved:!1,rotated:!1,resized:!0,id:""},M={moved:!1,rotated:!0,resized:!1,id:""};function $(e){const t=(0,p.f0)(e,(e=>"dummy"===e.shape&&e.shapeProps.screenBounds)),i=t?[t]:e;if(!i||0===i.length)return{x:0,y:0,w:0,h:0};let r=null;return(0,n.Ed)(i,(e=>{const t=[{x:e.area.x,y:e.area.y},{x:e.area.x+e.area.w,y:e.area.y},{x:e.area.x+e.area.w,y:e.area.y+e.area.h},{x:e.area.x,y:e.area.y+e.area.h}];(0,n.Ed)(t,(e=>{r?(r.x1>e.x&&(r.x1=e.x),r.x2<e.x&&(r.x2=e.x),r.y1>e.y&&(r.y1=e.y),r.y2<e.y&&(r.y2=e.y)):r={x1:e.x,x2:e.x,y1:e.y,y2:e.y}}))})),{x:r.x1,y:r.y1,w:r.x2-r.x1,h:r.y2-r.y1}}function O(e,t){!e.args||!e.args.templated||e.args.templateRef&&e.args.templateRef!==t||D([e],t,e.id)}function D(e,t,i){e.forEach((e=>{!e.args||!e.args.templated||e.args.templateRef&&e.args.templateRef!==t||(e.meta||(e.meta={}),e.meta.templated=!0,e.meta.templateRef=t,e.meta.templateRootId=i,Array.isArray(e.childItems)&&D(e.childItems,t,i),Array.isArray(e._childItems)&&D(e._childItems,t,i))}))}function B(){const e=l.Z.clone(p.XZ);return e.shape="rect",(0,m.z9)(e),e}function L(e){e.meta.revision=((e.meta.revision||0)+1)%1e3}function R(e,t,i,n,r,s){if(e){i||(i=a.Z.identityMatrix()),r||(r=[]),void 0===s&&(s=!0);for(let o=0;o<e.length;o++){(0,x.I)(e[o].area,p.kT.area),t(e[o],i,n,r,s);const l=a.Z.standardTransformWithArea(i,e[o].area);e[o].childItems&&R(e[o].childItems,t,l,e[o],r.concat([e[o].id]),s),e[o]._childItems&&R(e[o]._childItems,t,l,e[o],r.concat([e[o].id]),!1)}}}class N{constructor(e){this.itemPaths=new Map,this.cacheMissFallback=e}get(e){const t=this.itemPaths.get(e.id);return t&&t.revision===e.meta.revision?t.value:this.forceUpdate(e)}forceUpdate(e){const t=this.cacheMissFallback(e);return this.itemPaths.set(e.id,{revision:e.meta.revision,value:t}),t}}const Z=class{constructor(e,t,i,n,r){g.qc.register("SchemioContainer",this),this.scheme=e,this.editorId=t,this.mode=i,this.apiClient=n,this.listener=r,this.screenTransform={x:0,y:0,scale:1},this.screenSettings={width:700,height:400,x1:-1e6,y1:-1e6,x2:1e6,y2:1e6},this.selectedItems=[],this.selectedConnectorPoints=[],this.compiledTemplates=new Map,this.selectedItemsMap={},this.activeBoundaryBox=null,this.itemMap={},this._itemArray=[],this.revision=0,this.hudItems=[],this.worldItems=[],this.worldItemAreas=new Map,this.dependencyItemMap={},this.itemCloneIds=new Map,this.itemCloneReferenceIds=new Map,this._itemTagsToIds={},this.itemTags=[],this.framePlayers=[],this.spatialIndex=new o,this.pinSpatialIndex=new o,this.connectorSpatialIndex=new o,this.framesAnimations={},this.componentItems=[],this.svgOutlinePathCache=new N(P.Ls),this.relativeSnappers={horizontal:[],vertical:[]},this.editBox=null,(0,f.GL)(this.scheme),this.reindexTimeoutId=null,this.reindexItems()}hasDependencyOnItem(e,t){const i=this.dependencyItemMap[e];if(!i||0===i.length)return!1;for(let e=0;e<i.length;e++)if(i[e]===t)return!0;return!1}updateVisibility(e){const t=e.meta&&e.meta.parentId?this.findItemById(e.meta.parentId):null,i=!t||t.visible,n=t?t.opacity:100;(0,p.Hp)([e],((t,r)=>{t.id===e.id?t.meta.calculatedVisibility=i&&n>0&&t.visible&&t.opacity>0:t.meta.calculatedVisibility=r.visible&&r.opacity>0&&t.visible&&t.opacity>0}))}updateChildTransforms(e){if(!e.childItems)return;let t=a.Z.identityMatrix();if(e.meta&&e.meta.parentId){const i=this.findItemById(e.meta.parentId);i&&(t=(0,P.aR)(i))}const i=a.Z.standardTransformWithArea(t,e.area);R(e.childItems,((e,t,i,n)=>{e.meta||(e.meta={}),e.meta.transformMatrix=t}),i,e,e.meta.ancestorIds)}delayFullReindex(){this.reindexTimeoutId&&clearTimeout(this.reindexTimeoutId),this.reindexTimeoutId=setTimeout((()=>{this.reindexItems(),this.reindexTimeoutId=null}),1e3)}reindexItems(){_.info("reindexItems()",this),_.time("reindexItems"),this.itemMap={},this.itemsByName=new Map,this._itemArray=[],this.itemsByName=new Map,this.worldItems=[],this._itemTagsToIds={},this.worldItemAreas=new Map,this.relativeSnappers.horizontal=[],this.relativeSnappers.vertical=[],this.spatialIndex=new o,this.pinSpatialIndex=new o,this.connectorSpatialIndex=new o,this.dependencyItemMap={},this.itemCloneIds=new Map,this.itemCloneReferenceIds=new Map,this.framePlayers=[],this.componentItems=[],this.scheme.items&&(this.reindexSpecifiedItems(this.scheme.items),this.reindexComponents(),this.fixComponentCyclicDependencies(),_.timeEnd("reindexItems"))}reindexComponents(){(0,n.Ed)(this.componentItems,(e=>this.reindexEmbeddedComponent(e)))}reindexEmbeddedComponent(e){if(e.meta.referenceItemId=null,"embedded"===e.shapeProps.kind&&e.shapeProps.referenceItem){const t=this.findFirstElementBySelector(e.shapeProps.referenceItem);if(t){e.meta.referenceItemId=t.id;const i=I(I({},t),{},{meta:I(I({},t.meta),{},{componentRoot:!0}),visible:!0});this.attachItemsToComponentItem(e,[i]),w.Z.item.changed.specific.$emit(this.editorId,e.id)}}}fixComponentCyclicDependencies(){this.componentItems.forEach((e=>e.meta.cyclicComponent=!1)),this.componentItems.forEach((e=>{"embedded"===e.shapeProps.kind&&this.checkComponentForCyclicDependencies(e)}))}checkComponentForCyclicDependencies(e){if("embedded"!==e.shapeProps.kind)return;const t=this.findItemById(e.meta.referenceItemId);if(!t)return;const i=[e],r=e=>{(0,n.Ed)(e,(e=>{i.push(e)}))};let s=!0;for(;i.length>0;){const n=i.shift();if(n.meta.referenceItemId===t.id){if(!s)return e.meta.cyclicComponent=!0,void(e._childItems=[]);s=!1}if("component"===n.shape&&"embedded"===n.shapeProps.kind){const e=this.findItemById(n.meta.referenceItemId);e&&i.push(e)}r(n.childItems),r(n._childItems)}}isolateItemTags(e){const t=new Map;(0,p.Hp)(e,(e=>{Array.isArray(e.tags)&&(e.tags=e.tags.map((e=>{if(t.has(e))return t.get(e);const i=`${e}-${h().generate()}`;return t.set(e,i),i})))}));const i=e=>{if(!e)return e;const i=e.indexOf(":");if(i>0&&"tag"===e.substring(0,i).trim()){const n=e.substr(i+1).trim();if(t.has(n))return`tag: ${t.get(n)}`}return e};(0,p.Hp)(e,(e=>{e.behavior&&Array.isArray(e.behavior.events)&&(e.behavior.dragPath&&(e.behavior.dragPath=i(e.behavior.dragPath)),e.behavior.dropTo&&(e.behavior.dropTo=i(e.behavior.dropTo)),e.behavior.events.forEach((e=>{Array.isArray(e.actions)&&e.actions.forEach((e=>{if(e.element=i(e.element),e.args&&v.Z.main.hasOwnProperty(e.method)){const t=v.Z.main[e.method].args;(0,n.Ed)(t,((t,n)=>{"element"===t.type&&(e.args[n]=i(e.args[n]))}))}}))})))}))}attachItemsToComponentItem(e,t){if(!t)return;const i=this.cloneItems(t,!0,!0);"external"===e.shapeProps.kind&&this.isolateItemTags(i);const r=$(t);(0,n.Ed)(i,(e=>{e.area.x-=r.x,e.area.y-=r.y,e.opacity=100,e.selfOpacity=100,e.visible=!0}));let s=1,o=0,l=0,c=Math.max(r.w,1e-5),d=Math.max(r.h,1e-5),p=e.area.w/c,m=e.area.h/d;"centered"===e.shapeProps.placement&&(s=Math.min(p,m),p=s,m=s,o=(e.area.w-c*p)/2,l=(e.area.h-d*m)/2);const f=B();f.id=h().generate(),f.area.x=0,f.area.y=0,f.area.w=e.area.w,f.area.h=e.area.h,f.selfOpacity=0,f.meta={isComponentContainer:!0},f.name="Overlay container";const g=B();if(g.shape="dummy",g.selfOpacity=0,g.id=h().generate(),g.meta={isComponentContainer:!0},g.name="Scaled container",g.area.x=o,g.area.y=l,g.area.w=c,g.area.h=d,g.area.px=0,g.area.py=0,g.area.sx=p,g.area.sy=m,g._childItems=i,f._childItems=[g],"external"===e.shapeProps.kind){const t=(0,u.Si)(e,f,this.screenTransform,this.screenSettings.width,this.screenSettings.height);t&&f._childItems.push(t)}e._childItems=[f];const v=a.Z.standardTransformWithArea(e.meta.transformMatrix,e.area);this.reindexSpecifiedItems(e._childItems,v,e,e.meta.ancestorIds.concat([e.id]),!1)}readjustComponentContainerRect(e){if(!e._childItems||0===e._childItems.length)return;if(!e._childItems[0]._childItems||0===e._childItems[0]._childItems.length)return;const t=e._childItems[0]._childItems[0];if(0===t._childItems.length)return;const i=[];t._childItems.forEach((e=>{const t=this.itemCloneReferenceIds.get(e.id);t&&i.push(this.findItemById(t))}));const n=$(i);let r=1,s=0,o=0,a=Math.max(n.w,1e-5),l=Math.max(n.h,1e-5),c=e.area.w/a,h=e.area.h/l;"centered"===e.shapeProps.placement&&(r=Math.min(c,h),c=r,h=r,s=(e.area.w-a*c)/2,o=(e.area.h-l*h)/2),t.area.x=s,t.area.y=o,t.area.w=a,t.area.h=l,t.area.sx=c,t.area.sy=h}reindexChildItems(e){const t=a.Z.standardTransformWithArea(e.meta.transformMatrix,e.area);e.childItems&&this.reindexSpecifiedItems(e.childItems,t,e,e.meta.ancestorIds.concat([e.id]))}reindexSpecifiedItems(e,t,i,r,s){void 0===s&&(s=!0);const o={},a=(e,t)=>{let i=o[e]||[];i.push(t),o[e]=i},l=this.revision+1;R(e,((e,t,i,r,s)=>{s&&this._itemArray.push(e),this.itemsByName.set(e.name,e),e.args&&e.args.templateRef&&e.args.templated&&(O(e,e.args.templateRef),"edit"===this.mode&&this.fetchAndCompileTemplate(e.args.templateRef)),(0,m.z9)(e),this.enrichItemMeta(e,t,i,r),e.tags&&this.indexItemTags(e.id,e.tags),i&&(i.meta.isInHUD||"hud"===i.shape)&&(e.meta.isInHUD=!0),"none"!==e.behavior.dragging?(e.cursor="grab",e.meta.ancestorDraggableId=null):i&&("none"!==i.behavior.dragging?(e.meta.ancestorDraggableId=i.id,e.cursor="grab"):i.meta.ancestorDraggableId&&(e.meta.ancestorDraggableId=i.meta.ancestorDraggableId,e.cursor="grab")),"component"===e.shape&&this.componentItems.push(e),"frame_player"===e.shape&&this.framePlayers.push(e),i||this.worldItems.push(e),"hud"===e.shape&&this.hudItems.push(e),e.id&&(this.itemMap[e.id]=e),"connector"===e.shape&&(e.shapeProps.sourceItem&&a(e.shapeProps.sourceItem,e.id),e.shapeProps.destinationItem&&a(e.shapeProps.destinationItem,e.id));let o=!0;i&&(o=i.meta.calculatedVisibility),e.meta.calculatedVisibility=o&&e.visible&&e.opacity>0;const l=this.generateItemSnappers(e);if(l&&(0,n.Ed)(l,(e=>{"horizontal"===e.snapperType?this.relativeSnappers.horizontal.push(e):"vertical"===e.snapperType&&this.relativeSnappers.vertical.push(e)})),s){const t=d.Z.find(e.shape);t&&this.indexItemPins(e,t),this.indexItemOutlinePoints(e)}"connector"===e.shape&&this.indexConnectorPoints(e),this.worldItemAreas.set(e.id,this.calculateItemWorldArea(e))}),t,i,r,s),s&&this.buildDependencyItemMapFromElementSelectors(this.dependencyItemMap,o),this.itemTags=Object.keys(this._itemTagsToIds),this.itemTags.sort(),this.revision=l}reindexTags(){this._itemTagsToIds={},R(this.scheme.items,((e,t,i,n)=>{e.tags&&this.indexItemTags(e.id,e.tags)})),this.itemTags=Object.keys(this._itemTagsToIds),this.itemTags.sort()}fetchAndCompileTemplate(e){this.compiledTemplates.has(e)||this.getTemplate(e).then((t=>{this.compiledTemplates.set(e,t)})).catch((t=>{console.error(`Failed to compile template: ${e}`,t)}))}getTemplate(e){if(this.compiledTemplates.has(e))return Promise.resolve(this.compiledTemplates.get(e));{let t=null;if(e.startsWith("#doc:")){const i=e.substring(5);t=this.apiClient.getScheme(i).then((e=>(0,C.XT)(e.scheme,i,this.editorId)))}else t=this.apiClient.getTemplate(e).then((t=>(0,C.mQ)(this.editorId,t,e)));return t.then((t=>(this.compiledTemplates.set(e,t),t))).catch((t=>{throw console.error(`Failed to compile template: ${e}`,t),t}))}}indexSingleCloneItem(e,t){let i=null;this.itemCloneIds.has(e)?i=this.itemCloneIds.get(e):(i=new Set,this.itemCloneIds.set(e,i)),this.itemCloneReferenceIds.set(t,e),i.add(t)}getItemCloneIds(e){return this.itemCloneIds.get(e)}calculateItemWorldArea(e){const t=[{x:0,y:0},{x:e.area.w,y:0},{x:e.area.w,y:e.area.h},{x:0,y:e.area.h}],i=(0,n.UI)(t,(t=>(0,P.rs)(t.x,t.y,e))),r={x:i[0].x,y:i[0].y,w:0,h:0};return(0,n.Ed)(i,(e=>{if(r.x>e.x){const t=r.x;r.x=e.x,r.w=t+r.w-e.x}else e.x>r.x+r.w&&(r.w=e.x-r.x);if(r.y>e.y){const t=r.y;r.y=e.y,r.h=t+r.h-e.y}else e.y>r.y+r.h&&(r.h=e.y-r.y)})),r}getItemWorldPinPoint(e,t){const i=d.Z.find(e.shape);if(!i)return null;const n=i.getPins(e);if(!n)return null;const r=n[t];if(!r)return null;const s=(0,P.rs)(r.x,r.y,e);if(r.nx||r.ny){const t=(0,P.rs)(0,0,e),i=(0,P.rs)(r.nx,r.ny,e);s.nx=i.x-t.x,s.ny=i.y-t.y}return s}indexConnectorPoints(e){Array.isArray(e.shapeProps.points)&&e.shapeProps.points.forEach(((t,i)=>{const n=(0,P.rs)(t.x,t.y,e);this.connectorSpatialIndex.addPoint(n.x,n.y,{itemId:e.id,pointIdx:i})}))}selectByBoundaryBox(e,t){t||this.deselectAllItems();const i=[],r=new Map;(0,n.Ed)(this.getItems(),(t=>{const n=[{x:0,y:0},{x:t.area.w,y:0},{x:t.area.w,y:t.area.h},{x:0,y:t.area.h}];let s=!0;for(let i=0;i<n.length&&s;i++){const r=(0,P.rs)(n[i].x,n[i].y,t);s=a.Z.isPointInArea(r.x,r.y,e)}s&&(i.push(t),r.set(t.id))})),this.connectorSpatialIndex.forEachInRange(e.x,e.y,e.x+e.w,e.y+e.h,(e=>{r.has(e.itemId)||this.selectConnectorPoint(e.itemId,e.pointIdx)}));const s=new Set,o=new Map;this.selectedConnectorPoints.forEach((e=>{if(!o.has(e.itemId)){const t=this.findItemById(e.itemId);o.set(e.itemId,t.shapeProps.points.length*(t.shapeProps.points.length+1)/2)}const t=o.get(e.itemId)-e.pointIdx-1;t<=0&&s.add(e.itemId),o.set(e.itemId,t)})),s.forEach((e=>{const t=this.findItemById(e);i.push(t)}));for(let e=this.selectedConnectorPoints.length-1;e>=0;e--){const t=this.selectedConnectorPoints[e];s.has(t.itemId)&&(this.selectedConnectorPoints.splice(e,1),delete this.selectedItemsMap[`${t.itemId}.points.${t.pointIdx}`])}this.selectMultipleItems(i,!0)}selectConnectorPoint(e,t){if(t<0)return;const i=`${e}.points.${t}`;if(this.selectedItemsMap[i]||this.selectedItemsMap[e])return;const n=this.findItemById(e);n&&"connector"===n.shape&&(t>=n.shapeProps.points.length||(this.selectedConnectorPoints.push({itemId:e,pointIdx:t}),this.selectedItemsMap[i]=!0))}indexItemPins(e,t){t&&(0,n.Ed)(t.getPins(e),((t,i)=>{const n=(0,P.rs)(t.x,t.y,e);if(t.hasOwnProperty("nx")){const i=(0,P.rs)(0,0,e),r=(0,P.rs)(t.nx,t.ny,e);n.nx=r.x-i.x,n.ny=r.y-i.y}this.pinSpatialIndex.addPoint(n.x,n.y,{itemId:e.id,pinId:i,worldPinPoint:n})}))}indexItemOutlinePoints(e){const t=this.getSvgOutlineOfItem(e);if(!t)return;const i=t.getTotalLength();let n=[[0,Math.max(1,Math.ceil(i/20))]];for(;n.length>0;){const i=[];for(let r=0;r<n.length;r++){const s=n[r][0],o=n[r][1];let a=-1,l=o-s;if(l>=2){const e=Math.floor((s+o)/2);a=20*e,e>s&&i.push([s,e-1]),e<o&&i.push([e+1,o])}else l>=1?(a=20*o,i.push([s,s])):l>=0&&(a=20*s);if(a>=0){const i=t.getPointAtLength(a),n=(0,P.rs)(i.x,i.y,e);this.spatialIndex.addPoint(n.x,n.y,{itemId:e.id,pathDistance:a})}}n=i}}buildDependencyItemMapFromElementSelectors(e,t){(0,n.Ed)(t,((t,i)=>{const n=this.findFirstElementBySelector(i);n&&((t,i)=>{let n=e[t]||[];n=n.concat(i),e[t]=n})(n.id,t)}))}indexItemTags(e,t){(0,n.Ed)(t,(t=>{this._itemTagsToIds.hasOwnProperty(t)||(this._itemTagsToIds[t]=[]),this._itemTagsToIds[t].push(e)}))}enrichItemMeta(e,t,i,n){e.meta||(e.meta={strokeOffset:0,collapsed:!1,collapseBitMask:0}),e.meta.transformMatrix=t,e.meta.ancestorIds=n,e.meta.collapseBitMask=i?i.meta.collapseBitMask<<n.length|(i.meta.collapsed?1:0):0,e.meta.parentId=i?i.id:null}worldPointOnItem(e,t,i){return(0,P.rs)(e,t,i)}localPointOnItem(e,t,i){return(0,P.N5)(e,t,i)}relativePointForItem(e,t,i){if(i.meta.parentId){const n=this.findItemById(i.meta.parentId);if(n)return this.localPointOnItem(e,t,n)}return{x:e,y:t}}findClosestPointToItems(e,t,i,n,r){let s=null;if(this.pinSpatialIndex.forEachInRange(e-i,t-i,e+i,t+i,(({itemId:i,pinId:r,worldPinPoint:o},a)=>{if(i!==n){const n=(e-a.x)*(e-a.x)+(t-a.y)*(t-a.y);(!s||s.distance>n)&&(s={itemId:i,pinId:r,point:o,distance:n})}})),s){const e={x:s.point.x,y:s.point.y,distanceOnPath:0,itemId:s.itemId,pinId:s.pinId};return s.point.hasOwnProperty("nx")&&(e.nx=s.point.nx,e.ny=s.point.ny),e}const o=new Map,a=Math.max(i,40);this.spatialIndex.forEachInRange(e-a,t-a,e+a,t+a,(({itemId:i,pathDistance:n},r)=>{const s=(e-r.x)*(e-r.x)+(t-r.y)*(t-r.y);o.has(i)?o.get(i).squaredDistanceToPoint>s&&o.set(i,{pathDistance:n,squaredDistanceToPoint:s}):o.set(i,{pathDistance:n,squaredDistanceToPoint:s})}));let l={x:e,y:t},c=null,h=1e5;return o.forEach(((e,t)=>{const s=this.findItemById(t);if(s.id===n)return;if(r&&!s.meta.calculatedVisibility)return;const o=this.closestPointToItemOutline(s,l,{startDistance:Math.max(0,e.pathDistance-a),stopDistance:e.pathDistance+a,precision:Math.min(i/2,.5),withNormal:!0});if(!o)return;const d=(o.x-l.x)*(o.x-l.x)+(o.y-l.y)*(o.y-l.y);if(d<i*i){const e={x:o.x,y:o.y,distanceOnPath:o.distanceOnPath,itemId:s.id};o.hasOwnProperty("nx")&&(e.nx=o.nx,e.ny=o.ny),(!c||h>d)&&(c=e,h=d)}})),c}getBoundingBoxOfItems(e){return(0,P.av)(e)}readjustItemAndDescendants(e,t=!1,i=E,n=1){this._readjustItemAndDescendants(e,{},t,i,n)}_readjustItemAndDescendants(e,t,i,r,s){this._readjustItem(e,t,i,r,s);const o=this.findItemById(e);o&&(0,n.Ed)(o.childItems,(e=>{this._readjustItemAndDescendants(e.id,t,i,r,s)}))}readjustItem(e,t=!1,i=E,n=4){isNaN(n)&&(n=4),this._readjustItem(e,{},t,i,n)}_readjustItem(e,t,i,r,s){if(isNaN(s)&&(s=4),t[e])return;t[e]=!0;const o=this.findItemById(e);o&&(this._readjustSingleItem(o,t,i,r,s),this.dependencyItemMap[e]&&(0,n.Ed)(this.dependencyItemMap[e],(e=>{this._readjustItem(e,t,i,r,s)})),(0,n.Ed)(o.childItems,(e=>{if(e.autoLayout&&e.autoLayout.on&&e.args&&e.args.templated&&e.args.templateRef){const n=this.compiledTemplates.get(e.meta.templateRef);n?(t[e.id]=!0,this._readjustSingleItem(e,t,i,r,s),this.regenerateTemplatedItem(e,n,e.args.templateArgs,e.area.w,e.area.h)):this._readjustItem(e.id,t,i,r,s)}else this._readjustItem(e.id,t,i,r,s)})),o.meta.revision=(o.meta.revision||1)+1)}_readjustSingleItem(e,t,i,n,r){_.info("Readjusting item",e.id,e.name),"connector"===e.shape&&this._readjustConnectorItem(e,n,r);const s=d.Z.find(e.shape);let o=!1;s&&s.readjustItem&&(s.readjustItem(e,this,i,n,r),o=!0);const a=e.meta&&e.meta.parentId?this.findItemById(e.meta.parentId):null;a&&e.autoLayout&&e.autoLayout.on&&e.autoLayout.rules&&(e.area=(0,k.s0)(e,a,e.autoLayout.rules),o=!0),o&&(L(e),w.Z.item.changed.specific.$emit(this.editorId,e.id),this.svgOutlinePathCache.forceUpdate(e))}_readjustConnectorItem(e,t,i){_.info("readjusting connector item",e.id);const n=(n,r,s,o)=>{const l=e.shapeProps.points[o],c=this.findFirstElementBySelector(n);if(!c)return null;if(s){const t=d.Z.find(c.shape);if(!t||!t.getPins)return null;const i=this.getItemWorldPinPoint(c,s);if(!i)return null;const n=(0,P.N5)(i.x,i.y,e),r={x:n.x,y:n.y};return i.hasOwnProperty("nx")&&(r.nx=i.nx,r.ny=i.ny),r}const h=this.getSvgOutlineOfItem(c);if(!h)return null;if(t.resized||t.controlPoint||"connector"===c.shape||"path"===c.shape){const t=`${e.id}-points-${o}`;let n=l;this.editBox&&(this.editBox.cache.has(t)?n=this.editBox.cache.get(t):this.editBox.itemIds.has(e.id)||this.editBox.cache.set(t,l));const r=(0,P.rs)(n.x,n.y,e),s=this.closestPointToItemOutline(c,r,{withNormal:!0,precision:i});if(!s)return;const h=(0,P.N5)(s.x,s.y,e);return a.Z.distanceBetweenPoints(r.x,r.y,s.x,s.y)<.8&&(h.x=n.x,h.y=n.y),{x:h.x,y:h.y,nx:s.nx,ny:s.ny}}const u=h.getPointAtLength(r),p=(0,P.rs)(u.x,u.y,c),m=(0,P.N5)(p.x,p.y,e),f=this.calculateNormalOnPointInItemOutline(c,r,h);return{x:m.x,y:m.y,nx:f.x,ny:f.y}},r=n(e.shapeProps.sourceItem,e.shapeProps.sourceItemPosition,e.shapeProps.sourcePin,0);r&&(e.shapeProps.points[0]=r);const s=n(e.shapeProps.destinationItem,e.shapeProps.destinationItemPosition,e.shapeProps.destinationPin,e.shapeProps.points.length-1);s&&(e.shapeProps.points[e.shapeProps.points.length-1]=s)}doesItemDependOn(e,t){const i=this.dependencyItemMap[t];return!!i&&(0,n.cq)(i,e)>=0}remountItemToRoot(e){const t=this.scheme.items.length;this.remountItemInsideOtherItem(e,null,t)}remountItemInsideOtherItemAtTheBottom(e,t){if(!t)return;const i=this.findItemById(t);if(!i)return;let n=0;i.childItems&&(n=i.childItems.length),this.remountItemInsideOtherItem(e,t,n)}remountItemInsideOtherItem(e,t,i){const r=this.findItemById(e);if(!r)return;let s=null;if(t&&(s=this.findItemById(t),!s))return;if(isNaN(i)&&(i=0,s.childItems&&(i=s.childItems.length)),s&&(0,n.cq)(s.meta.ancestorIds,r.id)>=0)return;const o=(0,P.rs)(0,0,r);let l=0,c=0,h=a.Z.identityMatrix();s&&(h=(0,P.aR)(s),c=(0,P.mo)(s));let d=null,u=null,p=this.scheme.items;if(r.meta.parentId){if(d=this.findItemById(r.meta.parentId),!d)return;u=d.id,p=d.childItems,l=(0,P.mo)(d)}const m=(0,n.cx)(p,(t=>t.id===e));if(m<0)return;r.autoLayout&&r.autoLayout.on&&u!==t&&(r.autoLayout.on=!1,r.autoLayout.rules={}),p.splice(m,1);let f=this.scheme.items,g=null;s&&(s.childItems||(s.childItems=[]),f=s.childItems,g=s.id);let v=0;if(u===g&&m<i&&(v=-1),f.splice(i+v,0,r),u!==t){r.area.r+=l-c;const e=a.Z.findTranslationMatchingWorldPoint(o.x,o.y,0,0,r.area,h);e&&(r.area.x=e.x,r.area.y=e.y)}u&&w.Z.item.changed.specific.$emit(this.editorId,u),g&&w.Z.item.changed.specific.$emit(this.editorId,g),this.listener&&this.listener.onSchemeChangeCommitted(this.editorId),this.reindexItems(),this.updateEditBox()}remountItemAfterOtherItem(e,t){this.remountItemWithOffsetToOtherItem(e,t,1)}remountItemBeforeOtherItem(e,t){this.remountItemWithOffsetToOtherItem(e,t,0)}remountItemWithOffsetToOtherItem(e,t,i){const r=this.findItemById(t);if(!r)return;let s=this.scheme.items,o=null;if(r.meta.parentId){if(o=this.findItemById(r.meta.parentId),!o)return;o.childItems||(o.childItems=[]),s=o.childItems}const a=(0,n.cx)(s,(e=>e.id===t));if(a<0)return;let l=null;o&&(l=o.id),this.remountItemInsideOtherItem(e,l,a+i)}getSvgOutlineOfItem(e){return this.svgOutlinePathCache.get(e)}closestPointToItemOutline(e,t,{withNormal:i,startDistance:n,stopDistance:r,precision:s}){const o=this.localPointOnItem(t.x,t.y,e),l=this.svgOutlinePathCache.get(e);if(!l)return null;const c=a.Z.closestPointOnPath(o.x,o.y,l,{startDistance:n,stopDistance:r,precision:s}),h=(0,P.rs)(c.x,c.y,e);if(h.distanceOnPath=c.distance,i){const t=this.calculateNormalOnPointInItemOutline(e,c.distance,l);h.nx=t.x,h.ny=t.y}return h}calculateNormalOnPointInItemOutline(e,t,i){if(!i&&!(i=this.svgOutlinePathCache.get(e)))return{x:1,y:0};let n=t-2;n<0&&(n=i.getTotalLength()-n);const r=i.getPointAtLength(n),s=i.getPointAtLength((t+2)%Math.max(1,i.getTotalLength()));let o=s.x-r.x,l=s.y-r.y,c=o;o=l,l=-c;const h=(0,P.rs)(0,0,e),d=(0,P.rs)(o,l,e);let u=d.x-h.x,p=d.y-h.y;const m=Math.sqrt(u*u+p*p);return m>1e-4&&(u/=m,p/=m),{x:a.Z.roundPrecise(u,4),y:a.Z.roundPrecise(p,4)}}getSelectedItems(){return this.selectedItems}deleteItem(e){this._deleteItem(e),this.reindexItems()}deleteItems(e){(0,n.Ed)(e,(e=>{this._deleteItem(e)})),this.reindexItems()}_deleteItem(e){let t=this.scheme.items,i=null;if(e.meta.parentId){if(i=this.findItemById(e.meta.parentId),!i||!i.childItems)return;t=i.childItems}const r=(0,n.cx)(t,(t=>t.id===e.id));r<0||(t.splice(r,1),i&&w.Z.item.changed.specific.$emit(this.editorId,i.id))}deleteNonIndexableItems(e){const t=new Set;(0,n.Ed)(e,(e=>t.add(e.id)));for(let e=this.scheme.items.length-1;e>=0&&t.size>0;e--){const i=this.scheme.items[e];t.has(i.id)&&(delete this.itemMap[i.id],this.worldItemAreas.delete(i.id),t.delete(i.id),this.scheme.items.splice(e,1))}}deleteSelectedItems(){if(this.selectedItems&&this.selectedItems.length>0)for(let e=this.selectedItems.length-1;e>=0;e--){const t=this.selectedItems[e];if(t.meta.templated&&t.meta.templateRootId&&t.meta.templateRootId!==t.id){const e=this.findItemById(t.meta.templateRootId);e&&e.args.templateRef&&this.getTemplate(e.args.templateRef).then((i=>{i.onDeleteItem(e,t.args.templatedId,t),this.regenerateTemplatedItem(e,i,e.args.templateArgs,e.area.w,e.area.h)}))}else delete this.selectedItemsMap[t.id],this._deleteItem(t),this.selectedItems.splice(e,1)}const e=new Map;this.selectedConnectorPoints.sort(((e,t)=>t.pointIdx-e.pointIdx)).forEach((t=>{const i=this.findItemById(t.itemId);i&&"connector"===i.shape&&(i.shapeProps.points.splice(t.pointIdx,1),i.shapeProps.points.length<2?(this._deleteItem(i),e.delete(i.id)):e.set(i.id,i))})),e.forEach((e=>{L(e),w.Z.item.changed.specific.$emit(this.editorId,e.id)})),this.selectedConnectorPoints=[],this.reindexItems(),this.editBox=null,w.Z.item.deselected.any.$emit(this.editorId)}enrichItem(e){(0,m.z9)(e),e.hasOwnProperty("meta")||(e.meta={}),e.id||(e.id=h().generate())}addItem(e){return this.enrichItem(e),this.scheme.items.push(e),this.reindexSpecifiedItems([e]),"component"===e.shape&&"embedded"===e.shapeProps.kind&&this.reindexEmbeddedComponent(e),e}addNonIndexableItem(e){return this.enrichItem(e),this.scheme.items.push(e),this.reindexSpecifiedItems([e],null,null,[],!1),e}getItems(){return this._itemArray}getTopLevelItems(){return this.worldItems}filterNonHUDItems(e){return(0,n.hX)(e,(e=>"hud"!==e.shape&&!e.meta.isInHUD))}isItemInHUD(e){return"hud"===e.shape||e.meta.isInHUD}setActiveBoundaryBox(e){this.activeBoundaryBox=e}isItemSelected(e){return this.selectedItemsMap[e.id]||!1}rebaseScheme(){const e=[];this.selectedItemsMap={},this.selectedItems.forEach((t=>{const i=this.findItemById(t.id);i&&(e.push(i),this.selectedItemsMap[i.id]=!0,i.meta.selected=!0)})),this.selectedItems=e,this.rebaseEditBox()}rebaseEditBox(){if(!this.editBox)return;_.info("rebasing edit box",this.editBox);const e=this.generateEditBox(this.selectedItems,this.selectedConnectorPoints);for(let t in e)e.hasOwnProperty(t)&&"id"!==t&&(this.editBox[t]=e[t])}selectItem(e,t){if(t)this.selectItemInclusive(e),this.selectedItemsMap[e.id]=!0,e.meta.selected=!0,w.Z.item.selected.specific.$emit(this.editorId,e.id);else{this.deselectConnectorPoints();const t=[];(0,n.Ed)(this.selectedItems,(i=>{i.id!==e.id&&t.push(i.id)})),this.selectedItems=[],(0,n.Ed)(t,(t=>{this.selectedItemsMap[t]=!1,e.meta.selected=!1,w.Z.item.deselected.specific.$emit(this.editorId,t)})),this.selectItemInclusive(e),w.Z.item.selected.specific.$emit(this.editorId,e.id)}this.updateEditBox()}selectMultipleItems(e,t){t||this.deselectAllItems(),(0,n.Ed)(e,(e=>{this.selectedItemsMap[e.id]||(this.selectedItems.push(e),this.selectedItemsMap[e.id]=!0,e.meta.selected=!0,w.Z.item.selected.specific.$emit(this.editorId,e.id))})),this.updateEditBox()}selectAllItems(){this.selectMultipleItems(this._itemArray)}selectItemInclusive(e){for(var t=!1,i=0;i<this.selectedItems.length;i++)if(this.selectedItems[i]===e){t=!0;break}t||(this.selectedItems.push(e),this.selectedItemsMap[e.id]=!0,e.meta.selected=!0),this.sortSelectedItemsByAncestors()}sortSelectedItemsByAncestors(){this.selectedItems&&(this.selectedItems=this.selectedItems.sort(((e,t)=>{let i=0,n=0;return e.meta.ancestorIds&&(i=e.meta.ancestorIds.length),t.meta.ancestorIds&&(n=t.meta.ancestorIds.length),i-n})))}deselectConnectorPoints(){(0,n.Ed)(this.selectedConnectorPoints,(e=>{this.selectedItemsMap[`${e.itemId}.points.${e.pointIdx}`]=!1})),this.selectedConnectorPoints=[]}updateItem(e,t,i){const n=this.findItemById(e);n&&(i(n),w.Z.item.changed.specific.$emit(this.editorId,e,t))}deselectItem(e){this.selectedItemsMap[e.id]&&(this.selectedItemsMap[e.id]=!1,e.meta.selected=!1);for(let t=0;t<this.selectedItems.length;t++)if(this.selectedItems[t].id===e.id){this.selectedItems.splice(t,1);break}w.Z.item.deselected.specific.$emit(this.editorId,e.id),this.updateEditBox()}deselectAllItems(){this.deselectConnectorPoints();const e=(0,n.UI)(this.selectedItems,(e=>e.id));(0,n.Ed)(this.selectedItems,(e=>{this.selectedItemsMap[e.id]=!1,e.meta.selected=!1})),this.selectedItems=[],(0,n.Ed)(e,(e=>w.Z.item.deselected.specific.$emit(this.editorId,e))),this.updateEditBox()}bringSelectedItemsToBack(e){e||(e=this.scheme.items);let t=0,i=[];for(;t<e.length;)e[t].childItems&&this.bringSelectedItemsToBack(e[t].childItems),this.isItemSelected(e[t])?(i.push(e[t]),e.splice(t,1)):t++;(0,n.Ed)(i,(t=>{e.splice(0,0,t)}))}bringSelectedItemsToFront(e){e||(e=this.scheme.items);let t=0,i=[];for(;t<e.length;)e[t].childItems&&this.bringSelectedItemsToFront(e[t].childItems),this.isItemSelected(e[t])?(i.push(e[t]),e.splice(t,1)):t++;(0,n.Ed)(i,(t=>{e.push(t)}))}findItemByName(e){return this.itemsByName.get(e)}findItemById(e){return this.itemMap[e]}findItemsByTag(e){const t=this._itemTagsToIds[e],i=[];return t&&(0,n.Ed)(t,(e=>{const t=this.findItemById(e);t&&i.push(t)})),i}findFirstElementBySelector(e,t){const i=this.findElementsBySelector(e,t);return i.length>0?i[0]:null}findElementsBySelector(e,t){if(!e)return[];if("self"===e)return[t];if("#"===e.charAt(0)){const t=e.substring(1),i=this.findItemById(t);if(i)return[i]}else{const t=e.indexOf(":");if(t>0&&"tag"===e.substring(0,t).trim())return this.findItemsByTag(e.substring(t+1).trim())}return[]}copySelectedItems(){const e=[],t=new Set;return(0,n.Ed)(this.selectedItems,(i=>{t.has(i.id)||((0,p.Hp)([i],(e=>{t.add(e.id)})),e.push(l.Z.clone(i)))})),this.triggerCopyEventForTemplatedItems(e).then((()=>JSON.stringify(e)))}triggerCopyEventForTemplatedItems(e){const t=[];return e.forEach((e=>{if(!e.meta.templated||!e.meta.templateRootId)return;const i=this.findItemById(e.meta.templateRootId);i&&i.args&&i.args.templateRef&&t.push(this.getTemplate(i.args.templateRef).then((t=>{t.onCopyItem(i,e.args.templatedId,e)})).catch((e=>{console.error(e)})))})),Promise.all(t)}decodeItemsFromText(e){let t=null;try{t=JSON.parse(e)}catch(e){return null}if(!Array.isArray(t))return null;for(let e=0;e<t.length;e++){const i=t[e];if("object"!=typeof i.area||null===i.area)return null;if("string"!=typeof i.shape||null===i.shape)return null}return t}setPropertyForItem(e,t){t(e),this.updatePropertyForClones(e,t)}updatePropertyForClones(e,t,i){const n=this.getItemCloneIds(e.id);n&&n.forEach((e=>{const n=this.findItemById(e);n&&(i&&n.meta.componentRoot||(this.setPropertyForItem(n,t),w.Z.item.changed.specific.$emit(this.editorId,n.id)))}))}updateItemClones(e){const t=this.getItemCloneIds(e.id);t&&t.forEach((t=>{const i=this.findItemById(t);if(i){this.updateItemClones(i);const t=l.Z.clone(e);i.shapeProps=t.shapeProps,i.opacity=t.opacity,i.selfOpacity=t.selfOpacity,i.textSlots=t.textSlots,w.Z.item.changed.specific.$emit(this.editorId,i.id)}}))}cloneItems(e,t=!1,i=!1){const r={},s=[];(0,n.Ed)(e,(e=>{if(!(0,n.sE)(e.meta.ancestorIds,(e=>1===r[e]))){r[e.id]=1;const i=(0,P.rs)(e.area.px*e.area.w,e.area.py*e.area.h,e),n=(0,P.mo)(e),o=this.copyItem(e);o.name=t?e.name:this.copyNameAndMakeUnique(e.name),o.area.r=n;const l=a.Z.findTranslationMatchingWorldPoint(i.x,i.y,e.area.px*e.area.w,e.area.py*e.area.h,e.area,e.meta.transformMatrix);if(l)o.area.x=l.x,o.area.y=l.y;else{const t=(0,P.rs)(0,0,e);o.area.x=t.x,o.area.y=t.y}e.meta.componentRoot&&(o.meta.componentRoot=!0),s.push(o)}}));const o=new Map;return(0,p.Hp)(s,(e=>{o.set(e.meta.oldId,e.id),i&&this.indexSingleCloneItem(e.meta.oldId,e.id)})),this.fixItemsReferences(s,o),s}fixItemsReferences(e,t){const i=e=>{if(e&&0===e.indexOf("#")){const i=e.substr(1);if(t.has(i))return"#"+t.get(i)}return e};(0,p.Hp)(e,(e=>{"connector"===e.shape&&(e.shapeProps.sourceItem=i(e.shapeProps.sourceItem),e.shapeProps.destinationItem=i(e.shapeProps.destinationItem)),e.behavior.dragPath&&(e.behavior.dragPath=i(e.behavior.dragPath)),"frame_player"===e.shape&&((0,n.Ed)(e.shapeProps.animations,(e=>{"item"===e.kind&&(e.itemId=t.get(e.itemId))})),(0,n.Ed)(e.shapeProps.functions,(e=>{const t=b.Z[e.functionId];t&&(0,n.Ed)(t.args,((t,n)=>{"element"===t.type&&(e.args[n]=i(e.args[n]))}))}))),(0,n.Ed)(e.behavior.events,(e=>{(0,n.Ed)(e.actions,(e=>{e.element=i(e.element),v.Z.main[e.method]&&(0,n.Ed)(v.Z.main[e.method].args,((t,n)=>{"element"===t.type&&e.args[n]&&(e.args[n]=i(e.args[n]))}))}))}))}))}pasteItemsInto(e,t){let i=Promise.resolve(!1);if(t.meta.templated&&t.meta.templateRootId&&t.args.templatedId){const n=this.findItemById(t.meta.templateRootId);n&&n.args.templated&&n.args.templateRef&&(i=this.getTemplate(n.args.templateRef).then((i=>{if(i.hasHandler("paste")){const r=i.onPasteItemInto(n,t.args.templatedId,e);return this.regenerateTemplatedItemWithExistingScopeData(n,i,r,n.area.w,n.area.h),w.Z.schemeChangeCommitted.$emit(this.editorId),w.Z.item.templateArgsUpdated.specific.$emit(this.editorId,n.id),!0}return!1})))}i.then((i=>{i||this._pasteItemsIntoRegularItem(e,t)}))}_pasteItemsIntoRegularItem(e,t){if(!e||0===e.length)return;const i=this.cloneItems(e),n=new Set;let r=e[0].area.x,s=e[0].area.y;for(let t=1;t<e.length;t++){const i={x:e[t].area.x,y:e[t].area.y};r=Math.min(r,i.x),s=Math.min(s,i.y)}const o=Math.min(10,t.area.w)-r,a=Math.min(10,t.area.h)-s;i.forEach((e=>{n.add(e.id),e.locked=!1,this.itemMap[e.id]=e,e.area.x+=o,e.area.y+=a,t.childItems||(t.childItems=[]),t.childItems.push(e),this.itemMap[e.id]=e})),this.fixPastedConnectors(i,n),this.reindexItems(),this.selectMultipleItems(i,!1),w.Z.schemeChangeCommitted.$emit(this.editorId)}pasteItems(e,t,i){if(!e||0===e.length)return;const r=this.cloneItems(e),s=new Set;if((0,n.Ed)(r,(e=>{s.add(e.id),e.locked=!1,this.scheme.items.push(e),this.itemMap[e.id]=e})),this.fixPastedConnectors(r,s),this.selectMultipleItems(r,!1),this.editBox){const e=this.editBox.area,n=t-(e.x+e.w/2),r=i-(e.y+e.h/2);e.x+=n,e.y+=r,this.updateEditBoxItems(this.editBox,!1,E)}this.reindexItems(),w.Z.schemeChangeCommitted.$emit(this.editorId)}fixPastedConnectors(e,t){(0,n.Ed)(e,(e=>{if("connector"===e.shape){const i=e=>{if("#"===e[0]){const i=e.substring(1);return t.has(i)}return!0};e.shapeProps.sourceItem&&!i(e.shapeProps.sourceItem)&&(e.shapeProps.sourceItem=null),e.shapeProps.destinationItem&&!i(e.shapeProps.destinationItem)&&(e.shapeProps.destinationItem=null)}}))}copyItem(e){const t={id:h().generate(),meta:{oldId:e.id}};return(0,n.Ed)(e,((e,i)=>{"childItems"===i||"_childItems"===i?t[i]=(0,n.UI)(e,(e=>this.copyItem(e))):"id"!==i&&"meta"!==i&&(t[i]=l.Z.clone(e))})),t}updateEditBoxItems(e,t,i,r){_.info("updateEditBoxItems","isSoft:",t,"precision:",r),void 0===r&&(r=4),i||(i=E);const s=new Map;Array.isArray(e.items)&&e.items.forEach((e=>{s.set(e.id,e)}));const o=new Set,l=t=>a.Z.worldPointInArea(t.x*e.area.w,t.y*e.area.h,e.area),c=new Map;e.connectorPoints.forEach((e=>{const t=s.has(e.itemId)?s.get(e.itemId):this.findItemById(e.itemId);if(o.add(t.id),0!==e.pointIdx&&e.pointIdx!==t.shapeProps.points.length-1||c.set(`${t.id}.points.${e.pointIdx}`,{item:t,pointIdx:e.pointIdx}),i.controlPoint)return;const n=l(e.projection),r=(0,P.N5)(n.x,n.y,t);t.shapeProps.points[e.pointIdx].x=r.x,t.shapeProps.points[e.pointIdx].y=r.y})),(0,n.Ed)(e.items,(r=>{if("connector"===r.shape)return;o.add(r.id);const c=r.meta&&r.meta.ancestorIds&&(0,n.sE)(r.meta.ancestorIds,(e=>o.has(e))),h=c&&(i.moved||i.rotated)&&!i.resized;if(!r.locked&&!h){const n=e.itemProjections[r.id];c||(r.area.r=n.r+e.area.r);let o=a.Z.identityMatrix();const h=s.has(r.meta.parentId)?s.get(r.meta.parentId):this.findItemById(r.meta.parentId);h&&(o=(0,P.aR)(h));const d=l(n.topLeft),u=a.Z.findTranslationMatchingWorldPoint(d.x,d.y,0,0,r.area,o),p={x:r.area.x,y:r.area.y,w:r.area.w,h:r.area.h};if(u&&(p.x=u.x,p.y=u.y),i.resized){const e=l(n.bottomRight),t=(0,P.N5)(e.x,e.y,r);p.w=Math.max(0,t.x),p.h=Math.max(0,t.y)}if(r.meta&&r.meta.templated&&r.meta.templateRootId&&r.meta.templateRootId!==r.id&&r.args&&r.args.templatedId){if(r.args&&"controlled"===r.args.tplArea){const e=this.findItemById(r.meta.templateRootId);if(!e||!e.args||!e.args.templateRef)return;this.getTemplate(e.args.templateRef).then((i=>{i.onAreaUpdate(e,r.args.templatedId,r,p),r.area.x=p.x,r.area.y=p.y,r.area.w=p.w,r.area.h=p.h,t||this.regenerateTemplatedItem(e,i,e.args.templateArgs,e.area.w,e.area.h),w.Z.item.templateArgsUpdated.specific.$emit(this.editorId,e.id)}))}}else r.area.x=p.x,r.area.y=p.y,r.area.w=p.w,r.area.h=p.h;i.resized&&"component"===r.shape&&"embedded"===r.shapeProps.kind&&this.readjustComponentContainerRect(r)}})),i.controlPoint||c.forEach((e=>{this.tryReattachingConnector(e.item,this.editBox,e.pointIdx)})),o.forEach((e=>{const n=this.findItemById(e);n&&(this.updateChildTransforms(n),L(n),this.readjustItemAndDescendants(n.id,t,i,r),w.Z.item.changed.specific.$emit(this.editorId,n.id,"area"),this.updatePropertyForClones(n,(e=>{e.area.x=n.area.x,e.area.y=n.area.y,e.area.w=n.area.w,e.area.h=n.area.h,e.area.r=n.area.r,e.area.px=n.area.px,e.area.py=n.area.py}),!0))})),w.Z.editBox.updated.$emit(this.editorId)}tryReattachingConnector(e,t,i){_.info("trying to reattach connector","pointIdx:",i);const n=t.connectorOriginalAttachments.get(e.id);if(!n||e.shapeProps.points.length<2)return;const r=0===i?"source":"destination",s=0===i?n.sourceItem:n.destinationItem,o=0===i?n.sourceProjection:n.destinationProjection,l=((e,i)=>{const n=this.findFirstElementBySelector(e);if(!n)return null;const r=a.Z.worldPointInArea(i.x*t.area.w,i.y*t.area.h,t.area),s=this.closestPointToItemOutline(n,r,{precision:4});if(!s)return null;const o=a.Z.tooSmall(this.screenTransform.scale)?50:50/this.screenTransform.scale;return a.Z.distanceBetweenPoints(r.x,r.y,s.x,s.y)>o?null:s})(s,o);if(l){e.shapeProps[`${r}Item`]=s,e.shapeProps[`${r}ItemPosition`]=l.distanceOnPath;const t=(0,P.N5)(l.x,l.y,e);e.shapeProps.points[i].x=t.x,e.shapeProps.points[i].y=t.y}else if(e.shapeProps[`${r}Item`]=null,delete e.shapeProps.points[i].nx,delete e.shapeProps.points[i].ny,o){const n=a.Z.worldPointInArea(o.x*t.area.w,o.y*t.area.h,t.area),r=(0,P.N5)(n.x,n.y,e);e.shapeProps.points[i].x=r.x,e.shapeProps.points[i].y=r.y}}generateUniqueName(e){const t=(0,n.UI)(this.getItems(),(e=>e.name));return(0,n.lc)(e,t)}copyNameAndMakeUnique(e){const t=e.trim().split(" ");return t.length>1&&!isNaN(t[t.length-1])?(t.splice(t.length-1,1),this.generateUniqueName(t.join(" ").trim())):this.generateUniqueName(e)}updateEditBoxConnectorPoints(){this.editBox&&this.editBox.connectorPoints.forEach((e=>{const t=this.findItemById(e.itemId),i=t.shapeProps.points[e.pointIdx],n=(0,P.rs)(i.x,i.y,t),r=a.Z.localPointInArea(n.x,n.y,this.editBox.area);e.x=r.x,e.y=r.y}))}updateEditBox(){_.info("updateEditBox");const e=this.selectedItems.map((e=>this.findItemById(e.id))).filter((e=>e));e.length>0||this.selectedConnectorPoints.length>0?this.editBox=this.generateEditBox(e,this.selectedConnectorPoints):this.editBox=null}updateEditBoxAreaOnly(){if(this.editBox&&this.selectedItems.length>0){const e=this.generateEditBox(this.selectedItems,this.selectedConnectorPoints);this.editBox.area.x=e.area.x,this.editBox.area.y=e.area.y,this.editBox.area.w=e.area.w,this.editBox.area.h=e.area.h,this.editBox.area.r=e.area.r,this.editBox.area.sx=e.area.sx,this.editBox.area.sy=e.area.sy}}generateEditBox(e,t){_.info("generating edit box","items:",e.length,"connectorPointRefs:",t.length);let i=null,r=!0;const s={x:.5,y:.5},o=new Map,c=[].concat(t);if(e.forEach((e=>{o.set(e.id,e),"connector"===e.shape&&Array.isArray(e.shapeProps.points)&&!e.locked&&e.shapeProps.points.forEach(((t,i)=>{c.push({itemId:e.id,pointIdx:i})}))})),1!==e.length||e[0].meta.templated&&e[0].meta.templateRootId!==e[0].id)e.length>0&&(i=function(e){let t=null,i=null;const r=[e=>({x:0,y:0}),e=>({x:e.area.w,y:0}),e=>({x:e.area.w,y:e.area.h}),e=>({x:0,y:e.area.h})];return(0,n.Ed)(e,(e=>{(0,n.Ed)(r,(n=>{const r=n(e),s=(0,P.rs)(r.x,r.y,e);t?(t.x=Math.min(t.x,s.x),t.y=Math.min(t.y,s.y)):t={x:s.x,y:s.y},i?(i.x=Math.max(i.x,s.x),i.y=Math.max(i.y,s.y)):i={x:s.x,y:s.y}}))})),{x:t.x,y:t.y,w:i.x-t.x,h:i.y-t.y,r:0,px:0,py:0,sx:1,sy:1}}(e));else{const t=(0,P.rs)(0,0,e[0]),n=(0,P.rs)(e[0].area.w,0,e[0]),r=(0,P.rs)(0,e[0].area.h,e[0]);let o=0;o=a.Z.tooSmall(e[0].area.w)?180*a.Z.fullAngleForVector(r.x-t.x,r.y-t.y)/Math.PI-90:180*a.Z.fullAngleForVector(n.x-t.x,n.y-t.y)/Math.PI,i={x:t.x,y:t.y,r:o,w:a.Z.distanceBetweenPoints(t.x,t.y,n.x,n.y),h:a.Z.distanceBetweenPoints(t.x,t.y,r.x,r.y),px:0,py:0,sx:1,sy:1},s.x=e[0].area.px,s.y=e[0].area.py}const d=[];if(c.forEach((e=>{const t=o.has(e.itemId)?o.get(e.itemId):this.findItemById(e.itemId);if(!t||"connector"!==t.shape)return;if(e.pointIdx<0||e.pointIdx>=t.shapeProps.points.length)return;const n=t.shapeProps.points[e.pointIdx],r=(0,P.rs)(n.x,n.y,t);i?(i.x>r.x?(i.w+=i.x-r.x,i.x=r.x):i.x+i.w<r.x&&(i.w=r.x-i.x),i.y>r.y?(i.h+=i.y-r.y,i.y=r.y):i.y+i.h<r.y&&(i.h=r.y-i.y)):i=I(I({},r),{},{r:0,w:0,h:0,px:.5,py:.5,sx:1,sy:1}),d.push(I(I({},r),e))})),!i)throw new Error("Could not calculate edit box area");const u={},p={},m=new Set,f=(e,t)=>{const n=a.Z.localPointInArea(e,t,i);return i.w>0&&(n.x=n.x/i.w),i.h>0&&(n.y=n.y/i.h),n},g=new Map;d.forEach((e=>{e.projection=f(e.x,e.y);const t=a.Z.localPointInArea(e.x,e.y,i);e.x=t.x,e.y=t.y,(e=>{if(g.has(e.id))return;if(e.shapeProps.points.length<2)return;const t=e.shapeProps.points[0],i=e.shapeProps.points[e.shapeProps.points.length-1],n=(0,P.rs)(t.x,t.y,e),r=(0,P.rs)(i.x,i.y,e);g.set(e.id,{sourceItem:e.shapeProps.sourceItem,sourceItemPosition:e.shapeProps.sourceItemPosition,destinationItem:e.shapeProps.destinationItem,destinationItemPosition:e.shapeProps.destinationItemPosition,sourceProjection:f(n.x,n.y),destinationProjection:f(r.x,r.y)})})(o.has(e.itemId)?o.get(e.itemId):this.findItemById(e.itemId)),m.add(e.itemId)})),(0,n.Ed)(e,(e=>{p[e.id]={originalArea:l.Z.clone(e.area)},m.add(e.id),e.locked||e.autoLayout&&e.autoLayout.on||(r=!1);const t=(0,P.rs)(0,0,e),n=(0,P.rs)(e.area.w,e.area.h,e);u[e.id]={topLeft:f(t.x,t.y),bottomRight:f(n.x,n.y),r:e.area.r-i.r},"path"===e.shape&&(p[e.id].originalCurvePaths=l.Z.clone(e.shapeProps.paths))})),d.length>0&&(r=!1);let v=null,y=null,x=!0,b=!0;if(1===e.length){const t=e[0];if(t.args&&t.args.templated){if(t.args.templateRef)y=t,v=t.args.templateRef;else{const e=this.findAncestor(t,(e=>e.args&&e.args.templateRef));e&&(v=e.args.templateRef,y=e)}v&&"off"===t.args.tplRotation&&(x=!1),v&&"off"===t.args.tplConnector&&(b=!1)}}let w=[];if(1===e.length&&e[0].meta.parentId){const t=this.findItemById(e[0].meta.parentId);t&&(w=(0,k.bn)(e[0],t))}return{id:h().generate(),locked:r,items:e,itemIds:m,itemData:p,area:i,itemProjections:u,pivotPoint:s,rotationEnabled:x,connectorStarterEnabled:b,connectorPoints:d,connectorOriginalAttachments:g,cache:new Map,templateRef:v,templateItemRoot:y,ruleGuides:w,worldPivotPoint:a.Z.worldPointInArea(s.x*i.w,s.y*i.h,i)}}findAncestor(e,t){if(!e.meta.parentId)return null;const i=this.findItemById(e.meta.parentId);return i?t(i)?i:this.findAncestor(i,t):null}generateItemSnappers(e){const t=d.Z.find(e.shape);return t?t.getSnappers(e):null}findItemSuitableForParent(e,t){const i=this.calculateItemWorldArea(e),n=this.getItems();for(let r=n.length-1;r>=0;r--){const s=n[r];if(s.id!==e.id&&s.mount&&s.visible&&"connector"!==s.shape&&(!t||t(s))){const e=this.worldItemAreas.get(s.id);if(e&&i.w+i.h<e.w+e.h){const t=a.Z.overlappingArea(e,i),n=i.w*i.h;if(t&&!a.Z.tooSmall(n)&&t.w*t.h/n>=.5)return s}}}return null}prepareFrameAnimations(){this.prepareFrameAnimationsForItems()}prepareFrameAnimationsForItems(){this.frameAnimations={},(0,n.Ed)(this.framePlayers,(e=>{const t=(0,y.yl)(e,this);this.frameAnimations[e.id]=new y._p(e.shapeProps.fps,e.shapeProps.totalFrames,t)}))}getFrameAnimation(e){return this.frameAnimations[e]}alignItemsHorizontally(e){if(e.length<2)return;let t=0;const i=[];(0,n.Ed)(e,(e=>{const n=this.getBoundingBoxOfItems([e]);i.push({bbox:n,item:e}),t+=n.y+n.h/2}));const r=t/i.length;i.sort(((e,t)=>e.bbox.x-t.bbox.x));let s=0,o=0;for(let e=0;e<i.length-1;e++){const t=i[e+1].bbox.x-(i[e].bbox.x+i[e].bbox.w);t>0&&(s+=t,o++)}const l=s/Math.max(1,o);let c=i[0].bbox.x;for(let e=0;e<i.length;e++){const t=i[e].item;let n=0;e>0&&(n=c+l-i[e].bbox.x);const s=r-i[e].bbox.y-i[e].bbox.h/2;let o=a.Z.identityMatrix();if(t.meta.parentId){const e=this.findItemById(t.meta.parentId);e&&(o=(0,P.aR)(e))}const h=a.Z.transformVector(o,n,s);c=n+i[e].bbox.x+i[e].bbox.w,t.area.x+=h.x,t.area.y+=h.y,w.Z.item.changed.specific.$emit(this.editorId,t.id,"area")}this.listener&&this.listener.onSchemeChangeCommitted(this.editorId),this.updateEditBox()}alignItemsVertically(e){if(e.length<2)return;let t=0;const i=[];(0,n.Ed)(e,(e=>{const n=this.getBoundingBoxOfItems([e]);i.push({bbox:n,item:e}),t+=n.x+n.w/2}));const r=t/i.length;i.sort(((e,t)=>e.bbox.y-t.bbox.y));let s=0,o=0;for(let e=0;e<i.length-1;e++){const t=i[e+1].bbox.y-(i[e].bbox.y+i[e].bbox.h);t>0&&(s+=t,o++)}const l=s/Math.max(1,o);let c=i[0].bbox.y;for(let e=0;e<i.length;e++){const t=i[e].item;let n=0;e>0&&(n=c+l-i[e].bbox.y);const s=r-i[e].bbox.x-i[e].bbox.w/2;let o=a.Z.identityMatrix();if(t.meta.parentId){const e=this.findItemById(t.meta.parentId);e&&(o=(0,P.aR)(e))}const h=a.Z.transformVector(o,s,n);c=n+i[e].bbox.y+i[e].bbox.h,t.area.x+=h.x,t.area.y+=h.y,w.Z.item.changed.specific.$emit(this.editorId,t.id,"area")}this.listener&&this.listener.onSchemeChangeCommitted(this.editorId),this.updateEditBox()}alignItemsHorizontallyInParent(e){this._alignItemsWith(e,((e,t)=>{e.area.x+=t.x}))}alignItemsVerticallyInParent(e){this._alignItemsWith(e,((e,t)=>{e.area.y+=t.y}))}alignItemsCenteredInParent(e){this._alignItemsWith(e,((e,t)=>{e.area.x+=t.x,e.area.y+=t.y}))}generateItemFromTemplate(e,t,i,n){const r=(0,C.oY)(e,t,i,n),[s]=this.cloneItems([r],!0,!1);return s.args.templateRef=e.templateRef,s.args.templateArgs=t,s}regenerateTemplatedItem(e,t,i,n,r){_.info("regenerateTemplatedItem",e.id,e.name,t.templateRef,i);const s=e.meta.parentId?this.findItemById(e.meta.parentId):null,o=(0,C.zp)(e,t,i,n,r);this.fixItemsReferences([e],o),this.updateChildTransforms(e),this._reindexRegeneratedTemplatedItem(e,s),this.readjustItem(e.id),(0,p.Hp)([e],(e=>{w.Z.item.changed.specific.$emit(this.editorId,e.id)}))}regenerateTemplatedItemWithExistingScopeData(e,t,i,n,r){_.info("regenerateTemplatedItemWithExistingScopeData",e.id,e.name,t.templateRef,i);const s=e.meta.parentId?this.findItemById(e.meta.parentId):null,o=(0,C.gs)(e,t,i,n,r);this.fixItemsReferences([e],o),this.updateChildTransforms(e),this._reindexRegeneratedTemplatedItem(e,s),this.readjustItem(e.id),(0,p.Hp)([e],(e=>{w.Z.item.changed.specific.$emit(this.editorId,e.id)}))}_reindexRegeneratedTemplatedItem(e,t){this.itemMap[e.id]=e,e.meta.ancestorIds=t?t.meta.ancestorIds.concat([t.id]):[],e.meta.parentId=t?t.id:null,(0,p.Hp)([e],((t,i)=>{t.id!==e.id&&(this.itemMap[t.id]=t,t.meta.ancestorIds=i?i.meta.ancestorIds.concat([i.id]):[],t.meta.parentId=i?i.id:null)}))}_alignItemsWith(e,t){this._breakItemsByParents(e).forEach(((e,i)=>{const r=this._findCenteringCorrection(e,i);(0,n.Ed)(e,(e=>{t(e,r),w.Z.item.changed.specific.$emit(this.editorId,e.id,"area")}))})),this.listener&&this.listener.onSchemeChangeCommitted(this.editorId),this.updateEditBox()}_findCenteringCorrection(e,t){if(0===e.length)return{x:0,y:0};const i=this.findItemById(t);if(!i)return;let r=e[0].area.x,s=e[0].area.x,o=e[0].area.y,a=e[0].area.y;(0,n.Ed)(e,(e=>{r=Math.min(r,e.area.x),s=Math.max(s,e.area.x+e.area.w),o=Math.min(o,e.area.y),a=Math.max(a,e.area.y+e.area.h)}));const l=r,c=i.area.w-s,h=o;return{x:(c-l)/2,y:(i.area.h-a-h)/2}}_breakItemsByParents(e){const t=new Map;return(0,n.Ed)(e,(e=>{const i=e.meta.parentId;i&&(t.has(i)||t.set(i,[]),t.get(i).push(e))})),t}}},4925:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(6234),r=i(3363),s=i(2644);const o={setItemControlPoints(e,t){if(t.meta.templated&&t.meta.templateRootId)return void this.clearItemControlPoints(e);const i=r.Z.find(t.shape);if(i&&i.controlPoints){const r=i.controlPoints.make(t),o=(0,s.pD)(t);(0,n.Ed)(r,(e=>{e.x=e.x*o.x,e.y=e.y*o.y})),e.dispatch("setItemControlPoints",r)}else this.clearItemControlPoints(e)},clearItemControlPoints(e){e.dispatch("clearItemControlPoints")},setMultiSelectBox(e,t){e.dispatch("setMultiSelectBox",t)},setSelectedConnector(e,t){const i=t?r.Z.find(t.shape).computeOutline(t):null;e.dispatch("setSelectedConnectorWithPath",{item:t,path:i})},setItemSnapper(e,t){e.dispatch("setItemSnapper",t)},clearItemSnappers(e){e.dispatch("clearItemSnappers")},toggleAutoRemount(e){e.dispatch("toggleAutoRemount")},togglePivot(e){e.dispatch("togglePivot")},toggleItemDetailMarkers(e){e.dispatch("toggleItemDetailMarkers")},proposeConnectorDestinationItems(e,t,i,n){e.dispatch("proposeConnectorDestinationItems",{connectorItemId:t,mx:i,my:n})},disableProposeConnectorDestinationItems(e){e.dispatch("disableProposeConnectorDestinationItems")},addInfoSystemMessage(e,t,i,n=null){e.dispatch("addSystemMessage",{status:"info",message:t,id:i,iconClass:n})},addErrorSystemMessage(e,t,i,n=null){e.dispatch("addSystemMessage",{status:"error",message:t,id:i,iconClass:n})},removeSystemMessage(e,t){e.dispatch("removeSystemMessage",t)},setDefaultConnectorSmoothing(e,t){e.dispatch("setDefaultConnectorSmoothing",t)},copyItemStyle(e,t){e.dispatch("copyItemStyle",t)},setCurrentConnector(e,t){e.dispatch("setCurrentConnector",t)},addArtPack(e,t,i){e.dispatch("addArtPack",{artPack:i,artPackId:t})},removeArtPack(e,t){e.dispatch("removeArtPack",t)},registerShapeGroupId(e,t){e.dispatch("registerShapeGroupId",t)}}},9532:(e,t,i)=>{"use strict";function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){s(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{BJ:()=>O,hz:()=>D});const o={START_BRACKET:1,END_BRACKET:2,TERM:3,STRING:4,STRING_TEMPLATE:5,NUMBER:6,OPERATOR:7,WHITESPACE:8,NEWLINE:9,DELIMITER:10,COMMA:11,NOT:12,COMMENT:13,START_CURLY:14,END_CURLY:15,RESERVED:16,TOKEN_GROUP:17,COLON:18,FIELD_ACCESSOR:19},a={IF:"if",ELSE:"else",WHILE:"while",TRUE:"true",FALSE:"false",FOR:"for",NULL:"null",STRUCT:"struct",FUNC:"func",LOCAL:"local"},l=new Set(Object.values(a));function c(e){return l.has(e)}function h(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e}function d(e){return"0"<=e&&e<="9"}function u(e){return" "===e||"\t"===e}const p=new Map(Object.entries({",":{t:o.COMMA},"(":{t:o.START_BRACKET},")":{t:o.END_BRACKET},"+":{t:o.OPERATOR,v:"+"},"-":{t:o.OPERATOR,v:"-"},"*":{t:o.OPERATOR,v:"*"},"/":{t:o.OPERATOR,v:"/"},"%":{t:o.OPERATOR,v:"%"},"<":{t:o.OPERATOR,v:"<"},">":{t:o.OPERATOR,v:">"},"=":{t:o.OPERATOR,v:"="},";":{t:o.DELIMITER,v:";"},":":{t:o.COLON,v:":"},"!":{t:o.NOT,v:"!"},"{":{t:o.START_CURLY,v:"{"},"}":{t:o.END_CURLY,v:"}"},".":{t:o.FIELD_ACCESSOR,v:"."}})),m=new Map(Object.entries({"==":{t:o.OPERATOR,v:"=="},"!=":{t:o.OPERATOR,v:"!="},"||":{t:o.OPERATOR,v:"||"},"&&":{t:o.OPERATOR,v:"&&"},"<=":{t:o.OPERATOR,v:"<="},">=":{t:o.OPERATOR,v:">="},"+=":{t:o.OPERATOR,v:"+="},"-=":{t:o.OPERATOR,v:"-="},"*=":{t:o.OPERATOR,v:"*="},"/=":{t:o.OPERATOR,v:"/="},"=>":{t:o.OPERATOR,v:"=>"},"++":{t:o.OPERATOR,v:"++"},"--":{t:o.OPERATOR,v:"--"}})),f=new Map(Object.entries({"\\":"\\",t:"\t",n:"\n",'"':'"',"'":"'"}));class g{constructor(e){this.idx=0,this.text=e,this.currentLine=0}scanToken(){if(this.idx>=this.text.length)return null;const e=this.text[this.idx];if("\n"===e)return this.idx++,this.currentLine++,{t:o.NEWLINE,idx:this.idx-1,line:this.currentLine-1,text:""};if(h(e))return this.scanTerm();if(function(e){return d(e)||"."===e}(e))return this.scanNumber();if(u(e))return this.scanWhitespace();if('"'===e||"'"===e)return this.idx++,this.scanString(e);if("`"===e)return this.idx++,r(r({},this.scanString(e)),{},{t:o.STRING_TEMPLATE});if(this.idx<this.text.length-1){const e=this.text.substring(this.idx,this.idx+2);if("//"===e)return this.idx+=2,this.scanComment("\n");if("/*"===e)return this.idx+=2,this.scanComment("*/");if(m.has(e))return this.idx+=2,r(r({},m.get(e)),{},{text:e,idx:this.idx-2,line:this.currentLine})}if(p.has(e))return this.idx++,r(r({},p.get(e)),{},{text:e,idx:this.idx-1,line:this.currentLine});throw new Error("Invalid symbol: "+e)}scanComment(e){let t="";const i=this.idx;for(;this.idx<=this.text.length;){if(this.text.substring(this.idx,this.idx+e.length)===e){this.idx+=e.length,"\n"===e&&(this.idx-=1);break}t+=this.text[this.idx],this.idx++}return{t:o.COMMENT,text:t,idx:i,line:this.currentLine}}scanTerm(){let e="",t=this.idx;for(let t=this.idx;t<this.text.length;t++){const i=this.text[t];if(!h(i)&&!d(i))break;e+=i,this.idx=t+1}return c(e)?{t:o.RESERVED,v:e,text:e,idx:t,line:this.currentLine}:{t:o.TERM,v:e,text:e,idx:t,line:this.currentLine}}scanNumber(){let e="",t=!1;const i=this.idx;if("."===this.text[this.idx]&&this.idx<this.text.length-1&&!d(this.text[this.idx+1]))return this.idx++,{t:o.FIELD_ACCESSOR,v:".",text:"."};for(let i=this.idx;i<this.text.length;i++){const n=this.text[i];if(d(n))e+=n,this.idx=i+1;else{if("."!==n)break;if(t)break;t=!0,e+=n,this.idx=i+1}}return{t:o.NUMBER,v:parseFloat(e),text:e,idx:i,line:this.currentLine}}scanWhitespace(){const e=this.idx;for(let e=this.idx;e<this.text.length&&u(this.text[e]);e++)this.idx=e+1;return{t:o.WHITESPACE,text:" ",idx:e,line:this.currentLine}}scanString(e){let t="";const i=this.idx;for(;this.idx<this.text.length;){const n=this.text[this.idx];if(n===e)return this.idx++,{t:o.STRING,v:t,text:t,idx:i,line:this.currentLine};if("\\"===n){if(!(this.idx<this.text.length-1))throw new Error("Invalid use of escape symbol in string");{const e=this.text[this.idx+1];if(!f.has(e))throw new Error(`Unknown escape symbol: ${e}`);t+=f.get(e),this.idx++}}else t+=n;this.idx++}throw new Error("Unterminated string: "+t)}}function v(e){if(e===o.START_BRACKET)return o.END_BRACKET;if(e===o.START_CURLY)return o.END_CURLY;throw new Error("Don't know inverse token for "+e)}var y=i(1722),x=i(8457);class b{constructor(e){this.tokens=e,this.idx=0,this.line=0}hasMore(){return this.idx<this.tokens.length}scanToken(){if(this.idx>=this.tokens.length)return null;const e=this.tokens[this.idx];return this.idx++,e.t===o.NEWLINE&&this.line++,e}peekToken(){return this.idx>=this.tokens.length?null:this.tokens[this.idx]}peekAfterNewlineToken(){if(this.idx>=this.tokens.length)return null;for(let e=this.idx;e<this.tokens.length;e++)if(this.tokens[e].t!==o.NEWLINE)return this.tokens[e];return null}scanUntilNewLine(){const e=[];for(;this.hasMore();){const t=this.scanToken();if(!t||t.t===o.NEWLINE)break;e.push(t)}return e}skipToken(){this.idx++}skipNewlines(){for(;;){const e=this.peekToken();if(!e||e.t!==o.NEWLINE)return;this.line++,this.skipToken()}}skipNewlinesAndDelimeters(){for(;;){const e=this.peekToken();if(!e||e.t!==o.NEWLINE&&e.t!==o.DELIMITER)return;e.t===o.NEWLINE&&this.line++,this.skipToken()}}}class w extends x.QV{constructor(e,t,i){super("struct"),this.name=e,this.fieldDefinitions=t,this.functionDefinitions=i}evalNode(e){e.set(this.name,((...t)=>{const i={},n=e.newScope({this:i});return this.fieldDefinitions.forEach(((e,r)=>{r<t.length?i[e.name]=t[r]:i[e.name]=e.value.evalNode(n)})),this.functionDefinitions.forEach((e=>{i[e.name]=e.body.evalNode(n)})),i}))}}function C(e){const t=[],i=new b(e);for(;i.hasMore();){const e=i.scanToken();if(e.t===o.TOKEN_GROUP)t.push({groupCode:e.groupCode,t:e.t,v:e.v,text:e.text,groupTokens:C(e.groupTokens)});else if(P(e)){const n=i.peekToken();n&&n.t===o.NEWLINE&&i.skipNewlines(),t.push(e)}else if(e.t===o.NEWLINE){const n=i.peekAfterNewlineToken();n&&P(n)?i.skipNewlines():t.push(e)}else t.push(e)}return t}function P(e){return e&&(e.t===o.OPERATOR&&"++"!==e.v&&"--"!==e.v||e.t===o.FIELD_ACCESSOR||e.t===o.RESERVED&&e.v===a.ELSE)}const k=new Map(Object.entries({"*":5,"/":5,"%":5,"+":4,"-":4,"<":3,">":3,"<=":3,">=":3,"!=":2,"==":2,"&&":1,"||":0,"=":-1}));function S(e){return k.has(e)?k.get(e):0}const I=new Map(Object.entries({"+":x.f$,"-":x.BK,"*":x.rh,"/":x.O9,"%":x.PR,"<":x.KJ,">":x.H6,"<=":x.O$,">=":x.JB,"==":x.$X,"!=":x.HJ,"&&":x.J1,"||":x.lV,"=":x.Ke,"+=":x.b9,"-=":x.ao,"*=":x.EQ,"/=":x.j7}));function A(e){if(I.has(e))return I.get(e);throw new Error("Unknown operator: "+e)}function _(e,t,i){return{a:e,opClass:t,precedence:i,make:i=>new t(e,i)}}function E(e,t){const i=[];let n=[];i.push(n),t.forEach((t=>{if(t.t===o.COMMA){if(!n)throw new Error(`Invalid arguments declaration in function: "${e.print()}"`);n=[],i.push(n)}else n.push(t)}));const r=i[i.length-1];(0===r.length||1===r.length&&r[0].t===o.NEWLINE)&&i.pop();for(let e=0;e<i.length;e++){const t=i[e];if(0===t.length||1===t.length&&t[0].t===o.NEWLINE)throw new Error(`Missing argument #${e} in function invokation`)}return new x.W9(e,i.map($))}class T extends b{constructor(e,t){super(e),this.originalText=t}parse(){if(!this.tokens||0===this.tokens.length)return new x.JR(null);const e=[];for(;this.hasMore();){const t=this.parseSingleExpression();t&&e.push(t)}return 1===e.length?e[0]:e.length>1?new x.G$(e):new x.JR(null)}parseSingleExpression(){this.skipNewlinesAndDelimeters();let e=this.parseTerm();if(!e)return null;const t=[],i=e=>null===e||e.t===o.COMMA||e.t===o.DELIMITER||e.t===o.NEWLINE;for(;this.hasMore();){let n=this.peekToken();if(i(n))break;if(this.skipToken(),n.t!==o.OPERATOR)throw new Error(`Expected operator but got unexpected token (at ${n.idx}, line ${n.line}): (${n.t}) "${n.text}"`);if("++"===n.v||"--"===n.v){if(!(e instanceof x.wr))throw new Error(`Unexpected ${n.v} operator`);e=new x.cP(e,!1,"++"===n.v?1:-1)}else{const i=S(n.v),r=A(n.v),s=this.parseTerm();if(null===s)throw new Error(`Missing right term after the "${n.v}" operator at ${n.idx}, line ${n.line}`);const a=this.peekToken(),l=a&&a.t===o.OPERATOR?a.v:null,c=l?S(l):-100;if(i>=c)for(e=new r(e,s);t.length>0;){const i=t[t.length-1];if(i.precedence<c)break;e=i.make(e),t.pop()}else t.push(_(e,r,i)),e=s}}return(()=>{for(;t.length>0;){const i=t.pop();e=i.make(e)}return e})()}parseTermGroup(e){let t=this.peekToken();if(!t)return e;for(;t;)if(t.t===o.TOKEN_GROUP&&t.groupCode===o.START_BRACKET)e=E(e,t.groupTokens),this.skipToken(),t=this.peekToken();else{if(t.t!==o.FIELD_ACCESSOR)break;{if(this.skipToken(),t=this.peekToken(),!t)throw new Error("Missing field name definition after '.'");if(t.t!==o.TERM)throw new Error(`Expected field name after '.', but got: ${t.text}`);const i=t;this.skipToken(),t=this.peekToken();let n=null;t&&t.t===o.TOKEN_GROUP&&t.groupCode===o.START_BRACKET?(n=E(new x.wr(i.v),t.groupTokens),this.skipToken(),t=this.peekToken()):n=new x.wr(i.v),e=new x.yS(e,n)}}return e}parseTerm(){this.skipNewlines();const e=this.peekToken();if(null===e)return null;if(this.skipToken(),e.t===o.TOKEN_GROUP){if(e.groupCode===o.START_BRACKET){const t=this.peekToken();if(t&&t.t===o.OPERATOR&&"=>"===t.v)return this.skipToken(),this.skipNewlines(),M(e,this.scanToken());const i=$(e.groupTokens);return this.parseTermGroup(i)}throw new Error(`Unexpected token group "${e.v}"`)}if(e.t===o.NUMBER)return new x.JR(e.v);if(e.t===o.RESERVED){if(e.v===a.IF)return this.parseIfExpression();if(e.v===a.WHILE)return this.parseWhileExpression();if(e.v===a.FOR)return this.parseForLoop();if(e.v===a.TRUE)return new x.JR(!0);if(e.v===a.FALSE)return new x.JR(!1);if(e.v===a.NULL)return new x.JR(null);if(e.v===a.STRUCT)return this.parseStruct();if(e.v===a.FUNC)return this.parseFunctionDeclaration();if(e.v===a.LOCAL)return this.parseLocalVarDeclaration()}else{if(e.t===o.TERM)return this.parseTermGroup(new x.wr(e.v));if(e.t===o.STRING)return this.parseTermGroup(new x.ew(e.v));if(e.t===o.OPERATOR&&"-"===e.v){const e=this.parseTerm();if(!e)throw new Error('Expected term token after "-"');return new x.U8(e)}if(e.t===o.OPERATOR&&("++"===e.v||"--"===e.v)){const t=this.scanToken();if(!t)throw new Error(`Missing term after ${e.v} operator`);if(t.t!==o.TERM||c(t.v))throw new Error(`Unexpected token after ${e.v} operator: ${t.text}`);return new x.cP(new x.wr(t.v),!0,"++"===e.v?1:-1)}if(e.t===o.NOT){const e=this.parseTerm();if(!e)throw new Error('Expected term token after "!"');return new x.H5(e)}if(e.t===o.STRING_TEMPLATE)return new x._D((0,y.J)(e.v))}throw new Error(`Unexpected token: ${e.t} "${e.text}"`)}parseWhileExpression(){this.skipNewlines();let e=this.scanToken();if(!e||e.t!==o.TOKEN_GROUP||e.groupCode!==o.START_BRACKET)throw new Error(`Expected "(" symbol after while (at ${e.idx}, line ${e.line})`);const t=$(e.groupTokens);if(!t)throw new Error(`Missing condition expression for while statement (at ${e.idx}, line ${e.line})`);if(this.skipNewlines(),e=this.scanToken(),!e||e.t!==o.TOKEN_GROUP||e.groupCode!==o.START_CURLY)throw new Error(`Missing "{" symbol after "while" expression (at ${e.idx}, line ${e.line})`);const i=$(e.groupTokens);return new x.JY(t,i)}parseLocalVarDeclaration(){const e=this.parseSingleExpression();if(!e)throw new Error('Expected variable declaration after "local"');if(e instanceof x.wr)return new x.tE(e.varName,null);if(e instanceof x.Ke&&e.a instanceof x.wr)return new x.tE(e.a.varName,e);throw new Error("Invalid local variable declaration")}parseFunctionDeclaration(){this.skipNewlines();const e=this.scanToken();if(!e)throw new Error('Missing function name after "func"');if(e.t!==o.TERM)throw new Error(`Unexpected token after "func": "${e.text}"`);this.skipNewlines();const t=this.scanToken();if(!t)throw new Error(`Missing function args declaration for "${e.v}" function`);if(t.t!==o.TOKEN_GROUP||t.groupCode!==o.START_BRACKET)throw new Error(`Expected function args declaration for "${e.v}" function, got: "${t.text}"`);this.skipNewlines();const i=this.scanToken();if(!i)throw new Error(`Missing function body declaration for "${e.v}" function`);if(i.t!==o.TOKEN_GROUP||i.groupCode!==o.START_CURLY)throw new Error(`Expected function body declaration for "${e.v}" function, got: "${i.text}"`);const n=M(t,i);return new x.Ke(new x.wr(e.v),n)}parseStruct(){this.skipNewlines();const e=this.scanToken();if(!e||e.t!==o.TERM)throw new Error(`Missing struct name after "struct" (at ${e.idx}, line ${e.line})`);this.skipNewlines();const t=this.scanToken();if(!t||t.t!==o.TOKEN_GROUP||t.groupCode!==o.START_CURLY)throw new Error(`Missing "{" symbol for struct (at ${t.idx}, line ${t.line})`);return function(e,t){const i=[],n=[],r=new b(t);for(;r.hasMore();){r.skipNewlines();const t=r.scanToken();if(!t)break;if(t.t!==o.TERM)throw new Error(`Cannot parse struct "${e}". Expected struct field name definition, got: ${t.t} "${t.text}"`);let s=r.peekToken();if(!s){i.push({name:t.v,value:new x.JR(null)});break}if(s.t===o.COLON){if(r.skipNewlines(),s=r.scanToken(),!s)throw new Error(`Missing value definition for struct field "${t.v}"`);const e=r.peekToken();if(s.t===o.TOKEN_GROUP&&s.groupCode===o.START_BRACKET&&e&&e.t===o.OPERATOR&&"=>"===e.v){r.skipToken(),r.skipNewlines();const e=s,n=r.scanToken();if(!n||n.t!==o.TOKEN_GROUP||n.groupCode!==o.START_CURLY)throw new Error(`Expected function definition for struct field "${t.v}", get: ${n.t} ${n.v}`);const a=M(e,n);i.push({name:t.v,value:a})}else{const e=$(r.scanUntilNewLine());i.push({name:t.v,value:e})}}else if(s.t===o.TOKEN_GROUP&&s.groupCode===o.START_BRACKET){if(r.skipToken(),r.skipNewlines(),!r.peekToken())throw new Error(`Missing function body for "${t.v}" struct function`);const e=r.scanToken();if(e.t!==o.TOKEN_GROUP||e.groupCode!==o.START_CURLY)throw new Error(`Unexpected token for function body of "${t.v}" struct function: ${e.t} ${e.text}`);const i=M(s,e);n.push({name:t.v,body:i})}else{if(i.push({name:t.v,value:new x.JR(null)}),s.t!==o.COMMA)throw new Error(`Unxpected token after "${t.v}" struct field definition: ${s.t} ${s.text}`);r.skipToken()}}return new w(e,i,n)}(e.v,t.groupTokens)}parseForLoop(){this.skipNewlines();let e=this.scanToken();if(!e||e.t!==o.TOKEN_GROUP||e.groupCode!==o.START_BRACKET)throw new Error(`Expected "(" symbol after for (at ${e.idx}, line ${e.line})`);const t=[[]];if(e.groupTokens.forEach((e=>{e.t!==o.DELIMITER?t[t.length-1].push(e):t.push([])})),3!==t.length)throw new Error(`Invalid for loop declaration. Expected exactly two ";" (at ${e.idx}, line ${e.line})`);if(this.skipNewlines(),e=this.scanToken(),!e||e.t!==o.TOKEN_GROUP||e.groupCode!==o.START_CURLY)throw new Error(`Missing "{" symbol after "for" expression (at ${e.idx}, line ${e.line})`);const i=$(e.groupTokens),n=$(t[0]),r=$(t[1]),s=$(t[2]);return new x.Qi(n,r,s,i)}parseIfExpression(){this.skipNewlines();let e=this.scanToken();if(!e||e.t!==o.TOKEN_GROUP||e.groupCode!==o.START_BRACKET)throw new Error(`Missing "(" symbol after "if" (at ${e.idx}, line ${e.line})`);const t=$(e.groupTokens);if(this.skipNewlines(),e=this.scanToken(),!e||e.t!==o.TOKEN_GROUP||e.groupCode!==o.START_CURLY)throw new Error('Missing "{" for if statement');const i=$(e.groupTokens);e=this.peekToken();let n=null;if(e&&e.t===o.RESERVED&&e.v===a.ELSE){if(this.skipToken(),this.skipNewlines(),e=this.scanToken(),!e)throw new Error('Missing expression after "else"');if(e.t===o.RESERVED&&e.v===a.IF)n=this.parseIfExpression();else{if(e.t!==o.TOKEN_GROUP||e.groupCode!==o.START_CURLY)throw new Error('Expected "{" after "else"');n=$(e.groupTokens)}}return new x.OM(t,i,n)}}function M(e,t){if(!e)throw new Error("Cannot parse function declaration. Missing arguments definition");if(!t)throw new Error('Cannot parse function declaration. Missing "{"');if(e.t!==o.TOKEN_GROUP||e.groupCode!==o.START_BRACKET)throw new Error('Cannot parse function arguments definition. Expected "(", got: ',e.v);if(t.t!==o.TOKEN_GROUP||t.groupCode!==o.START_CURLY)throw new Error('Cannot parse function definition. Expected "{", got: ',e.v);const i=[];let n=!1;e.groupTokens.forEach((e=>{if(e.t===o.TERM){if(n)throw new Error('Cannot parse function arguments. Expected ",", got: ',e.v);i.push(e.v),n=!0}else{if(!n||e.t!==o.COMMA)throw new Error("Cannot parse function arguments. Unexpected token: ",e.v);n=!1}}));const r=$(t.groupTokens);return new x.i(i,r)}function $(e,t){return new T(e,t).parse()}function O(e){return $(C(function(e){const t=new g(e),i=[];i.push({originalToken:null,stackExitCode:null,stackStartCode:null,tokens:[]});let n=t.scanToken();for(;n;){if(n.t===o.START_BRACKET||n.t===o.START_CURLY)i.splice(0,0,{originalToken:n,stackExitCode:v(n.t),stackStartCode:n.t,tokens:[]});else if(n.t===o.END_BRACKET||n.t===o.END_CURLY){if(i[0].stackExitCode!==n.t)throw new Error(`Invalid token "${n.text}"`);const e=i.shift();i[0].tokens.push(r(r({},e.originalToken),{},{t:o.TOKEN_GROUP,groupCode:e.originalToken.t,groupTokens:e.tokens}))}else n.t!==o.WHITESPACE&&n.t!==o.COMMENT&&i[0].tokens.push(n);n=t.scanToken()}if(1!==i.length)throw new Error("Unclosed expression");return i[0].tokens}(e)),e)}function D(e){return O(e)}},8197:(e,t,i)=>{"use strict";i.d(t,{a:()=>n});class n{constructor(...e){this.items=Array.isArray(e)?e:[]}add(e){return this.items.push(e),this}remove(e){if(e<0&&e>=this.items.length)throw new Error(`Cannot remove ${e} item from List: index out of bounds`);return this.items.splice(e,1),this}get(e){if(e<0&&e>=this.items.length)throw new Error(`Cannot get ${e} item from List: index out of bounds`);return this.items[e]}first(){if(0===this.items.length)throw new Error("Cannot gert the first item from the List: no items in the list");return this.items[0]}last(){if(0===this.items.length)throw new Error("Cannot gert the last item from the List: no items in the list");return this.items[this.items.length-1]}set(e,t){if(e<0&&e>=this.items.length)throw new Error(`Cannot set ${e} item in List: index out of bounds`);return this.items[e]=t,this}insert(e,t){if(e<0&&e>=this.items.length)throw new Error(`Cannot insert ${e} item in List: index out of bounds`);return this.items.splice(e,0,t),this}pop(){return this.items.pop()}shift(){return this.items.shift()}forEach(e){this.items.forEach(e)}map(e){const t=this.items.map(e);return new n(...t)}filter(e){const t=this.items.filter(e);return new n(...t)}findIndex(e){return this.items.findIndex(e)}extendList(e){(e instanceof n||e instanceof Array)&&e.forEach((e=>{this.items.push(e)}))}sort(e){this.items.sort(e)}get size(){return this.items.length}}},8457:(e,t,i)=>{"use strict";i.d(t,{f$:()=>k,Ke:()=>H,J1:()=>U,lV:()=>z,ao:()=>V,O9:()=>A,j7:()=>K,$X:()=>F,Qi:()=>$,i:()=>X,W9:()=>ee,H6:()=>R,JB:()=>Z,OM:()=>O,cP:()=>q,b9:()=>W,KJ:()=>L,O$:()=>N,tE:()=>D,PR:()=>_,G$:()=>te,rh:()=>I,EQ:()=>G,U8:()=>E,QV:()=>x,H5:()=>T,HJ:()=>j,yS:()=>J,ew:()=>w,_D:()=>B,BK:()=>S,JR:()=>b,wr:()=>C,JY:()=>M});var n=i(8197);class r{constructor(e,t,i){this.id=e,this.data=t||new Map,this.parent=i,this.x=0,this.y=0,this.w=0,this.h=0,this.tempData=new Map,this.siblingIx=0,this.level=0,this.children=new n.a}findById(e){if(this.id==e)return this;for(let t=0;t<this.children.size;t++){const i=this.children.get(t).findById(e);if(i)return i}return null}map(e){const t=new n.a;return this.children.forEach((i=>{t.add(i.map(e))})),e(this,t)}attachTo(e){this.parent=e,this.siblingIdx=e.children.size,e.children.add(this)}attachChildAtIndex(e,t){e.parent=this,this.children.insert(t,e),this.children.forEach(((e,t)=>{e.siblingIdx=t}))}encodeTree(e,t){let i=this.id;return this.data.forEach(((e,n)=>{i=i+t+n+"="+e})),this.children.forEach((n=>{const r=n.encodeTree(e,t);i+=e+r})),i+e+"N"}reindex(e){this.level=this.parent?this.parent.level+1:0,this.children.size>0&&this.children.forEach((t=>{t.reindex(e)})),e&&e(this)}traverse(e){e(this,this.parent),this.children.forEach((t=>{t.traverse(e)}))}}function s(e,t){const i=e.split(t),n=i.shift(),s=new Map;return i.forEach((e=>{const t=e.split("=");2===t.length&&s.set(t[0],t[1])})),new r(n,s)}i(1722);var o=i(791),a=i(4670),l=i.n(a);function c(e){if(e instanceof Map)return function(e){const t={};return e.forEach(((e,i)=>{t[i]=c(e)})),t}(e);if(e instanceof n.a||Array.isArray(e))return function(e){const t=[];return e.forEach((e=>{t.push(c(e))})),t}(e);if(e instanceof o.O)return function(e){return{x:e.x,y:e.y}}(e);const t=typeof e;return"string"===t||"number"===t||"boolean"===t||"bigint"===t?e:null==e?null:"object"===t?function(e){const t={};for(let i in e)e.hasOwnProperty(i)&&(t[i]=c(e[i]));return t}(e):null}function h(e){return null===e?null:Array.isArray(e)?(t=e,new n.a(...t.map(h))):"object"==typeof e?function(e){const t=new Map;for(let i in e)e.hasOwnProperty(i)&&t.set(i,h(e[i]));return t}(e):e;var t}var d=i(6234),u=i(3590);const p={PI:Math.PI,createLineEquation:u.Z.createLineEquation,distanceFromPointToLine:u.Z.distanceFromPointToLine,linesIntersection:u.Z.linesIntersection,sideAgainstLine:u.Z.identifyPointSideAgainstLine,solveQuadratic:u.Z.solveQuadratic};var m=i(6012);class f{constructor(e,t,i,n){this.r=e,this.g=t,this.b=i,this.a=n}encode(){return(0,m.N)(this)}gradient(e,t){return new f(this.r*(1-t)+e.r*t,this.g*(1-t)+e.g*t,this.b*(1-t)+e.b*t,this.a*(1-t)+e.a*t)}}class g{constructor(e,t,i,n){this.x=e,this.y=t,this.w=i,this.h=n}overlaps(e){return!!u.Z.overlappingArea(this,e)}expand(e){const t=Math.min(this.x,e.x),i=Math.min(this.y,e.y),n=Math.max(this.x+this.w,e.x+e.w),r=Math.max(this.y+this.h,e.y+e.h);this.x=t,this.y=i,this.w=n-t,this.h=r-i}}const v="funcInvoke",y="var-ref";class x{constructor(e){this.type=e}evalNode(e){throw new Error("eval function is undefined for type: "+this.type)}print(){return"()"}}class b extends x{constructor(e){super("value",e),this.value=e}evalNode(e){return this.value}print(){return""+this.value}}class w extends x{constructor(e){super("string"),this.str=e}evalNode(e){return this.str}print(){return`"${this.str}"`}}class C extends x{constructor(e){super(y),this.varName=e}evalNode(e){return Q.has(this.varName)?Q.get(this.varName):e.get(this.varName)}print(){return this.varName}assignValue(e,t){e.set(this.varName,t)}}class P extends x{constructor(e,t,i,n){super(e),this.sign=t,this.a=i,this.b=n}print(){return`(${this.a.print()} ${this.sign} ${this.b.print()})`}evalNode(e){const t=this.a.evalNode(e),i=this.b.evalNode(e);return t instanceof o.O?t._operator(this.sign,i):i instanceof o.O?i._rightOperator(this.sign,t):this.evaluate(t,i)}evaluate(e,t){throw new Error(`operator ${this.sign} is not implemented`)}}class k extends P{constructor(e,t){super("add","+",e,t)}evaluate(e,t){return e+t}}class S extends P{constructor(e,t){super("subtract","-",e,t)}evaluate(e,t){return e-t}}class I extends P{constructor(e,t){super("multiply","*",e,t)}evaluate(e,t){return e*t}}class A extends P{constructor(e,t){super("divide","/",e,t)}evaluate(e,t){return e/t}}class _ extends P{constructor(e,t){super("mod","%",e,t)}evaluate(e,t){return e%t}}class E extends x{constructor(e){super("negate"),this.node=e}evalNode(e){const t=this.node.evalNode(e);return t instanceof o.O?t.inverse():-t}print(){return`(-${this.node.print()})`}}class T extends x{constructor(e){super("not"),this.node=e}evalNode(e){return!this.node.evalNode(e)}print(){return`(!${this.v.print()})`}}class M extends x{constructor(e,t){super("while"),this.whileExpression=e,this.whileBlock=t}evalNode(e){let t=null;for(;this.whileExpression.evalNode(e.newScope());)t=this.whileBlock.evalNode(e.newScope());return t}print(){const e=this.whileBlock?this.whileBlock.print():"";return`while (${this.whileExpression.print()}) {${e}}`}}class $ extends x{constructor(e,t,i,n){super("for"),this.init=e,this.condition=t,this.postLoop=i,this.loopBody=n}evalNode(e){for(e=e.newScope(),this.init.evalNode(e);this.condition.evalNode(e);)this.loopBody.evalNode(e),this.postLoop.evalNode(e)}print(){const e=this.loopBlock?this.loopBody.print():"";return`while (${this.init.print()}; ${this.condition.print()}; ${this.postLoop.print()}) {${e}}`}}class O extends x{constructor(e,t,i){super("if"),this.conditionExpression=e,this.trueBlock=t,this.falseBlock=i}evalNode(e){return this.conditionExpression.evalNode(e.newScope())?this.trueBlock?this.trueBlock.evalNode(e.newScope()):null:this.falseBlock?this.falseBlock.evalNode(e.newScope()):null}print(){const e=this.trueBlock?this.trueBlock.print():"",t=this.falseBlock?this.falseBlock.print():"";return`if (${this.conditionExpression.print()}) {${e}} else {${t}}`}}class D extends x{constructor(e,t){super("local"),this.varName=e,this.expression=t}evalNode(e){e.setLocal(this.varName,null),this.expression&&this.expression.evalNode(e)}}class B extends x{constructor(e){super("string-template"),this.stringExpression=e}evalNode(e){return this.stringExpression.render(e)}}class L extends P{constructor(e,t){super("lessThan","<",e,t)}evalNode(e){return this.a.evalNode(e)<this.b.evalNode(e)}}class R extends P{constructor(e,t){super("greaterThan",">",e,t)}evalNode(e){return this.a.evalNode(e)>this.b.evalNode(e)}}class N extends P{constructor(e,t){super("lessThanOrEquals","<=",e,t)}evalNode(e){return this.a.evalNode(e)<=this.b.evalNode(e)}}class Z extends P{constructor(e,t){super("greaterThanOrEquals",">=",e,t)}evalNode(e){return this.a.evalNode(e)>=this.b.evalNode(e)}}class F extends P{constructor(e,t){super("equals","==",e,t)}evalNode(e){return this.a.evalNode(e)==this.b.evalNode(e)}}class j extends P{constructor(e,t){super("notEqual","!=",e,t)}evalNode(e){return this.a.evalNode(e)!=this.b.evalNode(e)}}class z extends P{constructor(e,t){super("boolOr","||",e,t)}evalNode(e){return this.a.evalNode(e)||this.b.evalNode(e)}}class U extends P{constructor(e,t){super("boolAnd","&&",e,t)}evalNode(e){return this.a.evalNode(e)&&this.b.evalNode(e)}}class H extends P{constructor(e,t){super("assign","=",e,t)}evalNode(e){if(!this.a.assignValue)throw new Error("Cannot use assign operator on non-var");const t=this.b.evalNode(e);this.a.assignValue(e,t)}}class q extends x{constructor(e,t,i=1){if(super("increment"),!(e&&e instanceof C))throw new Error("Invalid use of "+this.operatorToString());this.term=e,this.isPre=t,this.step=i}operatorToString(){return this.step>0?"++":"--"}print(){const e=this.operatorToString();return this.isPre?e+this.term.print():this.term.print()+e}evalNode(e){const t=this.term.evalNode(e),i=t+this.step;return e.set(this.term.varName,i),this.isPre?i:t}}class W extends P{constructor(e,t){super("incrementWith","+=",e,t)}evalNode(e){if(!this.a.assignValue)throw new Error("Cannot use assign operator on non-var");const t=this.a.evalNode(e),i=this.b.evalNode(e);let n;n=t instanceof o.O?t._operator("+",i):t+i,this.a.assignValue(e,n)}}class V extends P{constructor(e,t){super("decrementWith","-=",e,t)}evalNode(e){if(!this.a.assignValue)throw new Error("Cannot use assign operator on non-var");const t=this.a.evalNode(e),i=this.b.evalNode(e);let n;n=t instanceof o.O?t._operator("-",i):t-i,this.a.assignValue(e,n)}}class G extends P{constructor(e,t){super("multiplyWith","*=",e,t)}evalNode(e){if(!this.a.assignValue)throw new Error("Cannot use assign operator on non-var");const t=this.a.evalNode(e),i=this.b.evalNode(e);let n;n=t instanceof o.O?t._operator("*",i):i instanceof o.O?i._rightOperator("*",t):t*i,this.a.assignValue(e,n)}}class K extends P{constructor(e,t){super("divideWith","/=",e,t)}evalNode(e){if(!this.a.assignValue)throw new Error("Cannot use assign operator on non-var");const t=this.a.evalNode(e),i=this.b.evalNode(e);let n;n=t instanceof o.O?t._operator("/",i):i instanceof o.O?i._rightOperator("/",t):t/i,this.a.assignValue(e,n)}}class J extends P{constructor(e,t){super("field",".",e,t)}evalNode(e){const t=this.a.evalNode(e);if(this.b.type===y){const e=this.b.varName;if(null==t)throw new Error(`Cannot get ${e} from ${t}`);return t[e]}if(this.b.type===v)return this.b.evalOnObject(e,t);throw new Error("Invalid use for dot operator. Expected field reference but got: "+this.b.type)}assignValue(e,t){const i=this.a.evalNode(e);if(null==i)throw new Error(`Cannot assign "${n}" on ${i}`);if(this.b.type!==y)throw new Error(`Cannot assign value on object, invalid field reference (${this.b.type})`);const n=this.b.varName;i[n]=t}}function Y(e,t){return isNaN(e)?t:e}const Q=new Map(Object.entries({min:Math.min,Vector:(e,t)=>new o.O(e,t),List:(...e)=>new n.a(...e),TreeNode:(...e)=>new r(...e),decodeTree:function(e,t,i){const n=e.split(t),r=s(n.shift(),i);let o=r;for(;n.length>0;){const e=n.shift();if("N"===e){let e=o.parent;e||(e=r),o=e}else{const t=s(e,i);t.attachTo(o),o=t}}return r},Area:(e,t,i,n)=>new g(e,t,i,n),Map:(...e)=>function(...e){const t=new Map;for(let i=1;i<e.length;i+=2)t.set(e[i-1],e[i]);return t}(...e),Set:(...e)=>new Set(e),max:Math.max,pow:Math.pow,sqrt:Math.sqrt,cos:Math.cos,sin:Math.sin,acos:Math.acos,asin:Math.asin,abs:Math.abs,uid:()=>l().generate(),log:function(...e){console.log(...e)},round:Math.round,ceil:Math.ceil,floor:Math.floor,rnd:Math.random,isNumber:e=>Number.isFinite(parseFloat(e))||Number.isFinite(parseInt(e)),parseInt:function(e){return Y(parseInt(e),0)},parseFloat:function(e){return Y(parseFloat(e),0)},rndInt:(e,t)=>Math.round(Math.random()*(t-e))+e,rgba:(e,t,i,n)=>`rgba(${e},${t},${i},${n})`,PI:()=>Math.PI,ifcond:(e,t,i)=>e?t:i,matchesRegex:(e,t)=>new RegExp(t).test(e),splitString:(e,t)=>new n.a(...e.split(t)),toJSON:e=>c(e),fromJSON:e=>h(e),forEach:d.Ed,setObjectField:function(e,t,i){"object"==typeof e&&(e[t]=i)},Math:p,Color:(e,t,i,n)=>new f(e,t,i,n),decodeColor:e=>{const t=(0,m.l)(e);return new f(t.r,t.g,t.b,t.a)}}));class X extends x{constructor(e,t){super("function"),this.argNames=e,this.body=t}print(){return`(${this.argNames.join(",")}) => {(${this.body.print()})}`}evalNode(e){return(...t)=>{const i=e.newScope();for(let e=0;e<t.length&&e<this.argNames.length;e++)i.setLocal(this.argNames[e],t[e]);return this.body.evalNode(i)}}}class ee extends x{constructor(e,t){super(v),this.functionProvider=e,this.args=t}print(){const e=this.args.map((e=>e.print())).join(", ");return`${this.functionProvider.print()}(${e})`}evalNode(e){const t=this.args.map((t=>t.evalNode(e))),i=this.functionProvider.evalNode(e);if(!i)throw new Error("Cannot resolve function");return i(...t)}evalOnObject(e,t){if(this.functionProvider.type!==y)throw new Error("Invalid function invokation on object: "+t);const i=this.functionProvider.varName,n=this.args.map((t=>t.evalNode(e)));if(null==t)throw new Error(`Cannot invoke "${i}" function on non-object`);if("function"!=typeof t[i])throw new Error(`Function "${i}" is not defined on object `+t);if("function"!=typeof t[i])throw new Error(`"${i}" is not a function`);return t[i](...n)}}class te extends x{constructor(e){super("multi-expr"),this.nodes=e}print(){return`(${this.nodes.map((e=>e?e.print():""+e)).join("; ")})`}evalNode(e){let t=null;return this.nodes.forEach((i=>{t=i.evalNode(e)})),t}}},387:(e,t,i)=>{"use strict";i.d(t,{s:()=>n});class n{constructor(e,t){this.data=e||{},this.parent=t}hasVar(e){return this.data.hasOwnProperty(e)}get(e){if(this.data.hasOwnProperty(e))return this.data[e];if(this.parent)return this.parent.get(e);throw new Error(`"${e}" was not defined`)}findScopeWithVar(e){return this.data.hasOwnProperty(e)?this:this.parent?this.parent.findScopeWithVar(e):null}set(e,t){let i=this.findScopeWithVar(e);i||(i=this),i.data[e]=t}setLocal(e,t){this.data[e]=t}newScope(e={}){return new n(e,this)}getData(){return this.data}}},1722:(e,t,i)=>{"use strict";i.d(t,{J:()=>a});var n=i(9532);class r{constructor(e,t){this.text=e,this.isExpression=t,this.expression=null}process(e){this.text=this.text+e}compile(){this.isExpression&&(this.expression=(0,n.BJ)(this.text))}render(e){return this.isExpression?this.expression.evalNode(e):this.text}}class s{constructor(e){this.parts=e}compile(){this.parts.forEach((e=>e.compile()))}render(e){let t="";return this.parts.forEach((i=>{t+=i.render(e)})),t}}class o{constructor(e){this.text=e,this.idx=0}parse(){let e=new r("",!1);const t=[e];for(;;){const i=this.scan();if(!i)break;"$"===i&&"{"===this.peekNext()?(this.skip(),e=new r("",!0),t.push(e)):"}"===i&&e.isExpression?(e=new r("",!1),t.push(e)):e.process(i)}const i=new s(t);return i.compile(),i}scan(){if(this.idx>=this.text.length)return null;const e=this.text[this.idx];return this.idx++,e}peekNext(){return this.idx>=this.text.length?null:this.text[this.idx]}skip(){this.idx++}}function a(e){return new o(e).parse()}},8814:(e,t,i)=>{"use strict";i.d(t,{DQ:()=>k,QQ:()=>S,at:()=>I,nh:()=>P});var n=i(9532),r=i(8197),s=i(387),o=i(1722);function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){c(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const h="$-def:",d="$-ref",u="$-expr",p="$-str",m="$-rawstr",f="$-if",g="$-else-if",v="$-else",y="$-for",x="$-foreach",b="$-extend",w="$-recurse",C="$-eval";function P(e){const t=A(e,new Map);return e=>t(new s.s(e))}function k(e,t){if(!e)throw new Error("template is not defined");return P(e)(t)}function S(e,t){Array.isArray(e)||(e=[e]);const i=e.join("\n"),r=(0,n.BJ)(i);return e=>{const i=new s.s(l(l({},t),e||{}));return r.evalNode(i),i.getData()}}function I(e,t){const i=(0,n.BJ)(e);return e=>{const n=new s.s(l(l({},t),e||{}));return i.evalNode(n)}}function A(e,t){if(null===e)return()=>null;if(Array.isArray(e))return T(e,t);if("object"==typeof e){if(e.hasOwnProperty(u))return E(e[u]);if(e.hasOwnProperty(p))return function(e){let t=e;Array.isArray(e)&&(t=e.join("\n"));const i=(0,o.J)(t);return e=>i.render(e)}(e[p]);if(e.hasOwnProperty(m))return function(e){return Array.isArray(e)?t=>e.join("\n"):t=>e}(e[m]);if(e.hasOwnProperty(w))return O(e,e[w],t).build;if(e.hasOwnProperty(d)){const i=e[d];if(!t.has(i))throw new Error("Unknown reference: "+i);return A(t.get(i),t)}const i=_(e,t);let n=null,r=null;return e.hasOwnProperty(C)&&(r=Array.isArray(e[C])?e[C].join("\n"):e[C],r&&(n=E(r))),e=>{if(n)try{n(e)}catch(e){console.error("Failed to evaluate script:\n"+r),console.error(e)}return i(e)}}return t=>e}function _(e,t){const i=[];let n=null;e.hasOwnProperty(b)&&(n=A(e[b],t));for(let n in e)e.hasOwnProperty(n)&&(n.startsWith(h)&&t.set(n.substring(h.length).trim(),e[n]),n.startsWith("$-")||i.push({key:n,build:A(e[n],t)}));return e=>{const t=n?n(e.newScope()):{};return i.forEach((i=>{t[i.key]=i.build(e.newScope())})),t}}function E(e){const t=(0,n.BJ)(e);return i=>{try{return t.evalNode(i)}catch(t){console.error("Failed to evaluate expression:\n"+e),console.error(t)}}}function T(e,t){const i=[],n=[].concat(e);for(;n.length>0;){const e=n.shift();if(Array.isArray(e)){const n=T(e,t);i.push({build:e=>[n(e.newScope())]})}else if("object"==typeof e){if(e.hasOwnProperty(v))throw new Error(`"${v}" block does not follow "${f}"`);if(e.hasOwnProperty(g))throw new Error(`"${g}" block does not follow "${f}"`);if(e.hasOwnProperty(y))i.push(B(e,e[y],t));else if(e.hasOwnProperty(x))i.push(D(e,e[x],t));else if(e.hasOwnProperty(w))i.push(O(e,e[w],t));else if(e.hasOwnProperty(f)){const r=[e];let s=null;for(;n.length>0&&!Array.isArray(n[0])&&"object"==typeof n[0]&&n[0].hasOwnProperty(g);)r.push(n.shift());n.length>0&&!Array.isArray(n[0])&&"object"==typeof n[0]&&n[0].hasOwnProperty(v)&&(s=n.shift()),i.push(M(r,s,t))}else{const n=A(e,t);i.push({build:e=>n(e.newScope())})}}else i.push({build:t=>[e]})}return e=>i.flatMap((t=>t.build(e.newScope())))}function M(e,t,i){const n=e.map(((e,t)=>$(0===t?e[f]:e[g]))),r=e.map((e=>_(e,i))),s=t?A(t,i):null;return{build:e=>{const t=n.findIndex((t=>t.evalNode(e.newScope())));return t>=0?[r[t](e.newScope())]:s?[s(e.newScope())]:[]}}}function $(e){const t=Array.isArray(e)?e.join("\n"):e;return(0,n.BJ)(t)}function O(e,t,i){if(!t.hasOwnProperty("object"))throw new Error('Missing "object" definition for $-recurse statement');if(!t.hasOwnProperty("it"))throw new Error('Missing "it" definition for $-recurse statement');if(!t.hasOwnProperty("children"))throw new Error('Missing "children" definition for $-recurse statement');if(!t.hasOwnProperty("dstChildren"))throw new Error('Missing "dstChildren" definition for $-recurse statement');const s=A(t.object,i),o=(0,n.BJ)(t.children),a=t.it,c=t.dstChildren,h=l({},e);delete h[w];const d=_(h);function u(e,t){if(!t)return t;const i={};i[a]=t;const n=e.newScope(i),s=d(n),l=o.evalNode(n);if(l instanceof r.a||Array.isArray(l)){const t=[];l.forEach((i=>{t.push(u(e,i))})),s.hasOwnProperty(c)&&Array.isArray(s[c])?s[c]=s[c].concat(t):s[c]=t}return s}return{build:e=>u(e,s(e))}}function D(e,t,i){if(!t.hasOwnProperty("source"))throw new Error("Missing source definition in foreach loop");if(!t.hasOwnProperty("it"))throw new Error("Missing iterator (it) name definition in foreach loop");const n=E(t.source),s=_(e,i);let o=null;return e.hasOwnProperty(f)&&(o=$(e[f])),{build:e=>{const i=n(e);let a=()=>{};(i instanceof r.a||Array.isArray(i))&&(a=e=>{i.forEach(((t,i)=>{e(t,i)}))}),e=e.newScope();const l=[];return a(((i,n)=>{e.set(t.it,i),(!o||o.evalNode(e))&&l.push(s(e))})),l}}}function B(e,t,i){const n=t.start?A(t.start,i):e=>0,r=t.step?A(t.step,i):e=>1;if(!t.hasOwnProperty("until"))throw new Error("Missing until definition in for loop");if(!t.hasOwnProperty("it"))throw new Error("Missing iterator name definition in for loop");const s=A(t.until,i),o=_(e,i);let a=null;return e.hasOwnProperty(f)&&(a=$(e[f])),{build:e=>{const i=n(e.newScope()),l=r(e.newScope()),c=s(e.newScope()),h=e=>l>0?e<c:e>c;e=e.newScope();const d=[];for(let n=i;h(n);n+=l)e.set(t.it,n),(!a||a.evalNode(e))&&d.push(o(e));return d}}}},791:(e,t,i)=>{"use strict";i.d(t,{O:()=>r});var n=i(3590);class r{constructor(e,t){this.x=e,this.y=t}static fromPoint(e){return new r(e.x,e.y)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalized(){const e=this.length();return n.Z.tooSmall(e)?new r(0,0):new r(this.x/e,this.y/e)}toString(){return`{x: ${this.x}, y: ${this.y}}`}inverse(){return new r(-this.x,-this.y)}projection(e){return n.Z.projectVectorToVector(this.x,this.y,e.x,e.y)}_operator(e,t){if("+"===e){if(t instanceof r)return this.plusVector(t);throw new Error("Cannot sum vector and non-vector values")}if("-"===e){if(t instanceof r)return this.minusVector(t);throw new Error("Cannot sum vector and non-vector values")}if("*"===e)return this.multiply(t);if("/"===e)return this.divide(t);throw new Error(`Operator ${e} is not supported on Vector`)}_rightOperator(e,t){if(t instanceof r)return t._operator(e,this);if("*"===e)return this.multiply(t);throw new Error(`Unsupported operator: ${typeof t} ${e} Vector`)}minusVector(e){return new r(this.x-e.x,this.y-e.y)}plusVector(e){return new r(this.x+e.x,this.y+e.y)}multiply(e){if(e instanceof r)return this.x*e.x+this.y*e.y;const t=typeof e;if("number"!==t)throw new Error("Cannot multiply vector by "+t);return new r(this.x*e,this.y*e)}divide(e){const t=typeof e;if("number"!==t)throw new Error("Cannot divide vector by "+t);return new r(this.x/e,this.y/e)}rotate(e){const t=Math.cos(e),i=Math.sin(e);return new r(t*this.x-i*this.y,i*this.x+t*this.y)}}},2672:(e,t,i)=>{"use strict";i.d(t,{z:()=>a});var n=i(6234),r=i(2017),s=i(2196);const o=new r.Yd("Compiler");function a(e,t,i){const r=[];return(0,n.Ed)(i,(i=>{if(i.on&&s.Z.main.hasOwnProperty(i.method)&&i.element){const o=e.findElementsBySelector(i.element,t);if(o){const t=s.Z.main[i.method];if(t){const s=function(e,t){return(0,n.Ed)(t.args,((t,i)=>{e.hasOwnProperty(i)||(e[i]=t.value)})),e}(i.args,t);t.multiItem?r.push({func:t,element:o,args:s}):(0,n.Ed)(o,(i=>{if(t.init)try{t.init(i,s,e)}catch(e){e&&console.error(e)}r.push({func:t,element:i,args:s})}))}}}})),o.info("Compiling functions for item",t?`${t.id}/${t.name}`:""),(t,i,n,s,a)=>{const l=e.findItemById(n);if(r.length<1)return;const c={idx:0,next(){if(this.idx>=r.length)return null;const e=r[this.idx];return this.idx++,e},skip(){this.idx++}},h=()=>{const i=c.next();if(i){if(o.info("Executing",i.func.name,"function"),Array.isArray(i.element)){let t=!1;for(let n=0;n<i.element.length&&!t;n++)e.findItemById(i.element[n].id)&&(t=!0)}else if(!i.element||!e.findItemById(i.element.id))return void h();if(i.func.execute)i.func.execute(i.element,i.args,e,t,h,l,s,a);else if(i.func.executeWithBranching){const n=e=>{if(o.info("Branch result",e),e.break)return;let t=e.skip;for(;t>0;)t--,c.skip();h()};i.func.executeWithBranching(i.element,i.args,e,t,n,l,s,a)}else h()}};h()}}},6085:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={standardEvents:{mousein:{id:"mousein",name:"Mouse In"},mouseout:{id:"mouseout",name:"Mouse Out"},clicked:{id:"clicked",name:"Clicked"},init:{id:"init",name:"Init"},valueChange:{id:"valueChange",name:"Value Change",description:'When the value of the item is changed with "setValue" script function'},dragStart:{id:"dragStart",name:"Dragging: Start",description:"When user starts dragging the object"},dragEnd:{id:"dragEnd",name:"Dragging: End",description:"When user stops dragging the object. It is invoked even if user drops the object in non-designated area and the dragging is canceled"},drag:{id:"drag",name:"Dragging: Move",description:"Invoked every time user moves the dragged item"},drop:{id:"drop",name:"Dragging: Dropped",description:"When user drops the object into a designated area"},receiveDrop:{id:"receiveDrop",name:"Dragging: Receive",description:"When user drops another object into this one"},dragObjectIn:{id:"dragObjectIn",name:"Dragging: Object In",description:"When use drags an object into another designated drop object"},dragObjectOut:{id:"dragObjectOut",name:"Dragging: Object Out",description:"When use drags an object away from another designated drop object"}}}},2196:(e,t,i)=>{"use strict";i.d(t,{Z:()=>dt});var n=i(7731),r=i(9737),s=i(3805),o=i(8595);const a={name:"Hide",description:"Hides your item from scene. It also allows to animate this and to perform a slow transition",args:{animated:{name:"Animated",type:"boolean",value:!0},animationDuration:{name:"Animation duration (sec)",type:"number",value:.5,depends:{animated:!0}},transition:{name:"Transition",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,depends:{animated:!0},description:"Play animation in background without blocking invokation of other actions"}},argsToShortString:e=>e.animated?`animated, ${e.animationDuration} sec`:"instant",execute(e,t,i,n,a){if(!e)return void a();const l=e.opacity;t.animated?((0,r.oK)(i.editorId,new s.ZP({durationMillis:1e3*t.animationDuration,animationType:t.transition,update(t){e.opacity=l*(1-t),o.Z.item.changed.specific.$emit(i.editorId,e.id)},destroy(){e.visible=!1,o.Z.item.changed.specific.$emit(i.editorId,e.id),i.updateVisibility(e),t.inBackground||a()}}),e.id,"visibility-animation"),t.inBackground&&a()):(e.visible=!1,i.updateVisibility(e),o.Z.item.changed.specific.$emit(i.editorId,e.id),a())}},l={name:"Show",description:"Makes your item visible on scene. You can also make it with a slow transition.",args:{targetOpacity:{name:"Target opacity",type:"number",value:100},animated:{name:"Animated",type:"boolean",value:!0},animationDuration:{name:"Animation duration (sec)",type:"number",value:.5,depends:{animated:!0}},transition:{name:"Transition",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,depends:{animated:!0},description:"Play animation in background without blocking invokation of other actions"}},argsToShortString:e=>e.animated?`animated, ${e.animationDuration} sec`:"instant",execute(e,t,i,n,a){e&&(t.animated?((0,r.oK)(i.editorId,new s.ZP({durationMillis:1e3*t.animationDuration,animationType:t.transition,init(){e.opacity=0,e.visible=!0,o.Z.item.changed.specific.$emit(i.editorId,e.id)},update(n){e.opacity=t.targetOpacity*n,o.Z.item.changed.specific.$emit(i.editorId,e.id)},destroy(){e.visible=!0,e.opacity=t.targetOpacity,i.updateVisibility(e),o.Z.item.changed.specific.$emit(i.editorId,e.id),t.inBackground||a()}}),e.id,"visibility-animation"),t.inBackground&&a()):(e.visible=!0,e.opacity=t.targetOpacity,i.updateVisibility(e),o.Z.item.changed.specific.$emit(i.editorId,e.id),a()))}},c={name:"Send event",args:{event:{name:"Event",type:"string",value:"Unknown event..."}},argsToShortString:e=>e.event,execute(e,t,i,n,r){n.emitItemEvent(e.id,t.event),r()}};var h=i(3590),d=i(6234);function u(e,t,i,n,r,s,o,a,l,c){if(Math.sqrt((a-r)*(a-r)+(l-s)*(l-s))<1)return{x:a,y:l,scale:c};const h=r+(a-r)/2,d=s+(l-s)/2,m=(c+o)/2;return p(e,t,i,n,h,d,m)?u(e,t,i,n,r,s,o,h,d,m):u(e,t,i,n,h,d,m,a,l,c)}function p(e,t,i,n,r,s,o){const a=e.x*o+r,l=e.y*o+s,c=(e.x+e.w)*o+r,h=(e.y+e.h)*o+s;return a>=n&&a<=t-n&&c>=n&&c<=t-n&&l>=n&&l<=i-n&&h>=n&&h<=i-n}function m(e,t){if("hud"===e.shape)return!0;if(e.meta.parentId){const i=t.findItemById(e.meta.parentId);if(i)return m(i,t)}return!1}const f={name:"Zoom To It",description:"Moves scene to bring item into view so that it is centered on the screen",args:{closeEnough:{name:"Close Enough",type:"boolean",value:!1,description:"If checked, then it will only zoom to item just enough for it to appear fully inside the screen. Otherwise it will bring it to the center of the screen"},animated:{name:"Animated",type:"boolean",value:!0},animationDuration:{name:"Animation duration (sec)",type:"number",value:.5,min:0,depends:{animated:!0}},minZoom:{name:"Minimum Zoom(%)",type:"number",value:0,min:0},maxZoom:{name:"Maximum Zoom(%)",type:"number",value:100,min:0},inBackground:{name:"In Background",type:"boolean",value:!1,depends:{animated:!0},description:"Play animation in background without blocking invokation of other actions"}},argsToShortString:e=>e.animated?`animated, ${e.animationDuration} sec`:"instant",execute(e,t,i,n,a){if(!e||!e.area||m(e,i))return void a();const l=function(e,t){const i=[{x:0,y:0},{x:e.area.w,y:0},{x:e.area.w,y:e.area.h},{x:0,y:e.area.h}];let n=null,r=null,s=function(e,t){let i=h.Z.identityMatrix();if(e.meta.ancestorIds)for(let n=0;n<e.meta.ancestorIds.length;n++){const r=t.findItemById(e.meta.ancestorIds[n]);r&&(i=h.Z.standardTransformWithArea(i,r.area))}return i}(e,t);return(0,d.Ed)(i,(t=>{const i=h.Z.worldPointInArea(t.x,t.y,e.area,s);n?(n.x=Math.min(n.x,i.x),n.y=Math.min(n.y,i.y),r.x=Math.max(r.x,i.x),r.y=Math.max(r.y,i.y)):(n={x:i.x,y:i.y},r={x:i.x,y:i.y})})),{x:n.x,y:n.y,w:r.x-n.x,h:r.y-n.y}}(e,i);let c=1;const f=i.screenSettings.width,g=i.screenSettings.height;l.w>0&&l.h>0&&f>0&&g>0&&(c=Math.min(f/l.w,g/l.h),c=Math.max(t.minZoom/100,Math.min(c,t.maxZoom/100)));let v=f/2-(l.x+l.w/2)*c,y=g/2-(l.y+l.h/2)*c;if(t.closeEnough){if(p(l,f,g,0,i.screenTransform.x,i.screenTransform.y,i.screenTransform.scale))return void a();{const e=u(l,f,g,0,i.screenTransform.x,i.screenTransform.y,i.screenTransform.scale,v,y,c);v=e.x,y=e.y,c=e.scale}}if(t.animated){const e=i.screenTransform.x,n=i.screenTransform.y,l=i.screenTransform.scale;(0,r.oK)(i.editorId,new s.ZP({durationMillis:1e3*t.animationDuration,animationType:"ease-in-out",update:t=>{i.screenTransform.scale=l*(1-t)+c*t,i.screenTransform.x=e*(1-t)+v*t,i.screenTransform.y=n*(1-t)+y*t},destroy:()=>{o.Z.screenTransformUpdated.$emit(i.editorId,i.screenTransform),t.inBackground||a()}}),"screen","screen-transform"),t.inBackground&&a()}else i.screenTransform.scale=c,i.screenTransform.x=v,i.screenTransform.y=y,o.Z.screenTransformUpdated.$emit(i.editorId,i.screenTransform),a()}};var g=i(2217),v=i(3363);class y extends g.Z{constructor(e,t,i){super(),this.item=e,this.args=t,this.resultCallback=i,this.domContainer=null,this.domPath=null,this.time=0,this.backupOpacity=1,this.domAnimationPath=null}init(){this.domContainer=document.getElementById(`animation-container-${this.item.id}`);const e=v.Z.find(this.item.shape);if(e){const t=e.computeOutline(this.item);t&&(this.domPath=document.createElementNS("http://www.w3.org/2000/svg","path"),this.domPath.setAttribute("d",t))}if(!this.domContainer||!this.domPath)return!1;this.domAnimationPath=this.svg("path",{d:this.domPath.getAttribute("d"),"stroke-dasharray":this.args.length,"stroke-dashoffset":0,"stroke-width":this.args.strokeWidth||1,stroke:this.args.color,fill:"none","stroke-linejoin":"round"}),this.domContainer.appendChild(this.domAnimationPath);let t=window.getComputedStyle(this.domPath).opacity;return t&&t>0&&(this.backupOpacity=t),this.domPath.style.opacity=0,!0}play(e){return this.time+=e,this.domAnimationPath.setAttribute("stroke-dashoffset",Math.floor(-this.time*this.args.speed/1e3)),!(!this.args.infinite&&this.time>1e3*this.args.duration)}destroy(){this.args.inBackground||this.resultCallback(),this.domAnimationPath&&this.domContainer.removeChild(this.domAnimationPath),this.domPath&&(this.domPath.style.opacity=this.backupOpacity)}}const x={name:"Crawl Effect",description:"Animates outline of the item with a dashed stroke",args:{length:{name:"Length",type:"number",value:10},color:{name:"Color",type:"color",value:"rgba(255,0,0,1.0)"},speed:{name:"Speed",type:"number",value:60},duration:{name:"Duration (sec)",type:"number",value:2,depends:{infinite:!1}},infinite:{name:"Infinite animation",type:"boolean",value:!1,description:"Plays animation indefinitely"},strokeWidth:{name:"Stroke Width",type:"number",value:3},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions"}},execute(e,t,i,n,s){e&&(0,r.oK)(i.editorId,new y(e,t,s),e.id,this.name),t.inBackground&&s()}},b={name:"Stop All Animations",description:"Stops all animations that were either created in the background or generated by another event",args:{},execute(e,t,i,n,s){e&&e.id&&(0,r.aG)(i.editorId,e.id),s()}};var w=i(2644),C=i(4670),P=i.n(C);const k=2*Math.PI;class S{constructor(){this.lifeTime=0,this.position={x:0,y:0},this.angle=0,this.scale=1,this.opacity=0,this.direction={x:0,y:0},this.floatAngle=0,this.floatAngleDirection=0}update(){}destroy(){}}class I extends S{constructor(e,t){super(),this.domParticle=t,this.domContainer=e,e.appendChild(t)}update(){this.domParticle.setAttribute("style",`opacity: ${this.opacity}`),this.domParticle.setAttribute("transform",`translate(${this.position.x} ${this.position.y}) rotate(${this.angle}) scale(${this.scale} ${this.scale})`)}destroy(){this.domContainer.removeChild(this.domParticle)}}class A{constructor(e){this.items=[],this.schemeContainer=e,this.recycledItems=[]}recycleItem(e){this.recycledItems.push(e)}destroy(){this.schemeContainer.deleteNonIndexableItems(this.items)}borrowItem(e){if(this.recycledItems.length>0)return this.recycledItems.pop();const t=this.schemeContainer.findFirstElementBySelector(e);if(t){const[e]=this.schemeContainer.cloneItems([t]);return this.schemeContainer.addNonIndexableItem(e),this.items.push(e),e}return null}}class _ extends S{constructor(e,t,i,n){super(),this.item=i,this.particleItem=null,this.schemeContainer=e,this.itemRecycler=n,this.particleItem=this.itemRecycler.borrowItem(t)}update(){if(!this.particleItem)return;const e=(0,w.rs)(this.position.x,this.position.y,this.item);this.particleItem.visible=!0,this.particleItem.area.x=e.x-this.particleItem.area.px*this.particleItem.area.w,this.particleItem.area.y=e.y-this.particleItem.area.py*this.particleItem.area.h,this.particleItem.area.sx=this.scale,this.particleItem.area.sy=this.scale,this.particleItem.area.r=this.angle,this.particleItem.opacity=100*this.opacity,o.Z.item.changed.specific.$emit(this.schemeContainer.editorId,this.particleItem.id)}destroy(){this.particleItem&&this.itemRecycler.recycleItem(this.particleItem)}}class E extends g.Z{constructor(e,t,i,n){super(),this.item=e,this.args=t,this.resultCallback=n,this.domContainer=null,this.domItemPath=null,this.particles=[],this.schemeContainer=i,this.itemRecycler=new A(i),this.generatorCounter=0,this.particlesLeft=this.args.particlesCount,this.cleanupDomElements=[],this.totalPathLength=0,this.singleParticleBirthTime=this.args.birthTime/Math.max(1,this.args.particlesCount)}init(){if(this.domContainer=document.getElementById(`animation-container-${this.item.id}`),!v.Z.find(this.item.shape))return!1;if(this.domItemPath=this.schemeContainer.getSvgOutlineOfItem(this.item),!this.domContainer||!this.domItemPath)return!1;this.totalPathLength=this.domItemPath.getTotalLength(),this.center=function(e){const t=e.getTotalLength();let i=0,n=0;for(let r=0;r<10;r++){const s=e.getPointAtLength(t*r/10);i+=s.x,n+=s.y}return{x:i/10,y:n/10}}(this.domItemPath);const e=this.svg("defs",{});return e.innerHTML=`\n            <radialGradient id="animation-particle-effect-gradient-${this.id}" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">\n            <stop offset="0%" style="stop-color:${this.args.color};stop-opacity:1" />\n            <stop offset="25%" style="stop-color:${this.args.color};stop-opacity:1" />\n            <stop offset="100%" style="stop-color:${this.args.color};stop-opacity:0" />\n            </radialGradient>\n        `,this.domContainer.appendChild(e),this.cleanupDomElements.push(e),!0}play(e){if(0===this.particles.length&&this.particlesLeft<=0)return!1;if(this.particlesLeft>0)if(this.singleParticleBirthTime>1e-4){if(this.generatorCounter+=e/(1e3*this.singleParticleBirthTime),this.generatorCounter>=1){const e=Math.floor(this.generatorCounter),t=Math.min(this.particlesLeft,e);for(let e=0;e<t;e++)this.createParticle();this.generatorCounter-=e}}else for(;this.particlesLeft>0;)this.createParticle();for(let t=0;t<this.particles.length;t++)this.particles[t].lifeTime>this.args.lifeTime?(this.particles[t].destroy(),this.particles.splice(t,1),t-=1):this.playParticle(this.particles[t],e);return!0}createParticle(){let e=0;this.args.travelAlongPath||(e=Math.random()*this.totalPathLength);const t=this.domItemPath.getPointAtLength(e);let i=null;if(i="item"===this.args.particleType?new _(this.schemeContainer,this.args.item,this.item,this.itemRecycler):new I(this.domContainer,this.createParticleDom(this.args.particleType,this.args.particleSize,this.args.color)),i.position=t,this.args.travelAlongPath){this.args.travelFloatRadius>0&&(i.floatAngle=Math.random()*k);let e=1;Math.random()>=.5&&(e=-1),i.floatAngleDirection=e}else{const e={x:0,y:0};e.x=t.x-this.center.x,e.y=t.y-this.center.y;const n=Math.sqrt(e.x*e.x+e.y*e.y);n>1e-4&&(e.x=e.x/n,e.y=e.y/n),i.direction=e}this.particles.push(i),i.update(),this.particlesLeft-=1}playParticle(e,t){if(e.lifeTime+=t/1e3,this.args.travelAlongPath){let i=this.args.lifeTime;i<.1&&(i=1);let n=0;n=this.args.backwards?this.totalPathLength*Math.max(0,1-e.lifeTime/i):this.totalPathLength*e.lifeTime/i;const r=this.domItemPath.getPointAtLength(n);let s=r.x,o=r.y;if(this.args.travelFloatRadius>0&&(e.floatAngle+=e.floatAngleDirection*this.args.travelFloatSpeed*t/(1e3*this.args.lifeTime),e.floatAngle>k&&(e.floatAngle-=k),s=r.x+this.args.travelFloatRadius*Math.cos(e.floatAngle),o=r.y+this.args.travelFloatRadius*Math.sin(e.floatAngle)),e.position.x=s,e.position.y=o,this.args.adjustRotation){const t=this.domItemPath.getPointAtLength(n+2),i=t.x-r.x,s=t.y-r.y,o=i*i+s*s;if(!h.Z.tooSmall(o)){const t=Math.sqrt(o),n=i/t,r=s/t,a=180*h.Z.fullAngleForNormalizedVector(n,r)/Math.PI;e.angle=a,isFinite(this.args.rotationOffset)&&(e.angle+=this.args.rotationOffset)}}}else e.position.x+=e.direction.x*this.args.speed*t/1e3,e.position.y+=e.direction.y*this.args.speed*t/1e3;let i=1,n=1;if(this.args.lifeTime>0){const t=100*e.lifeTime/this.args.lifeTime;t<this.args.fadeIn?n=t/this.args.fadeIn:t>this.args.fadeOut&&this.args.fadeOut<99.999&&(n=(100-t)/(100-this.args.fadeOut)),t<this.args.growth?i=t/this.args.growth:t>this.args.decline&&this.args.decline<99.999&&(i=(100-t)/(100-this.args.decline))}e.scale=i,e.opacity=n,e.update()}destroy(){this.args.inBackground||this.resultCallback(),(0,d.Ed)(this.particles,(e=>{e.destroy()})),this.itemRecycler.destroy(),(0,d.Ed)(this.cleanupDomElements,(e=>{this.domContainer.removeChild(e)})),this.cleanupDomElements=[]}createParticleDom(e,t,i){return"circle"===e?this.svg("circle",{cx:0,cy:0,r:t/2,fill:i}):"rect"===e?this.svg("rect",{x:-t/2,y:-t/2,width:t,height:t,fill:i,stroke:"none"}):this.svg("circle",{cx:0,cy:0,r:t/2,fill:`url(#animation-particle-effect-gradient-${this.id})`})}}const T={name:"Particle Effect",description:"Generates particles on the outline of the item",args:{particleType:{name:"Particle Type",type:"choice",value:"spot",options:["spot","circle","rect","item"]},item:{name:"Item",type:"element",value:null,depends:{particleType:"item"}},particlesCount:{name:"Particles",type:"number",value:20},particleSize:{name:"Particle size",type:"number",value:20},color:{name:"Color",type:"color",value:"rgba(255,0,0,1.0)"},speed:{name:"Speed",type:"number",value:60,depends:{travelAlongPath:!1}},lifeTime:{name:"Life time (sec)",type:"number",value:2},birthTime:{name:"Birth time (sec)",type:"number",value:.5,description:"Time in which it should generate all particles"},growth:{name:"Growth to (%)",type:"number",value:10},decline:{name:"Decline from (%)",type:"number",value:90},fadeIn:{name:"Fade in (%)",type:"number",value:5},fadeOut:{name:"Fade out (%)",type:"number",value:95},travelAlongPath:{name:"Travel along path",type:"boolean",value:!0,description:"The particle emits in the beggining of the path and travels along the path"},backwards:{name:"Travel backwards",type:"boolean",value:!1,depends:{travelAlongPath:!0}},adjustRotation:{name:"Adjust rotation",type:"boolean",value:!0,description:"Adjust rotation of particles to path",depends:{travelAlongPath:!0}},rotationOffset:{name:"Rotation offset",type:"number",value:0,description:"Rotation angle offset",depends:{adjustRotation:!0,travelAlongPath:!0}},travelFloatRadius:{name:"Travel float radius",type:"number",value:5,depends:{travelAlongPath:!0}},travelFloatSpeed:{name:"Travel float speed",type:"number",value:10,depends:{travelAlongPath:!0}},inBackground:{name:"In background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions"}},execute(e,t,i,n,s){if(e){const n=this.name+P().generate();(0,r.oK)(i.editorId,new E(e,t,i,s),e.id,n)}t.inBackground&&s()}};class M extends g.Z{constructor(e,t,i,n){super(),this.editorId=e,this.item=t,this.args=i,this.resultCallback=n,this.elapsedTime=0,this.domContainer=null,this.domBlinker=null,this.opacity=0,this.itemOriginalOpacity=100,this.phase=0,this.pulsatingTime=0,this.phaseOffset=0}init(){this.domContainer=document.getElementById(`animation-container-${this.item.id}`);const e=v.Z.find(this.item.shape);if(!e)return!1;if(this.args.fade){const e=this.args.maxOpacity-this.args.minOpacity;this.phase=1,e>.001&&(this.phaseOffset=Math.asin(2*(this.item.opacity-this.args.minOpacity)/e-2))}else this.domBlinker=this.svg("path",{d:e.computeOutline(this.item),"stroke-width":3,stroke:this.args.color,fill:this.args.color,style:`opacity: ${this.args.minOpacity}`}),this.domContainer.appendChild(this.domBlinker);return!0}play(e){this.elapsedTime+=e,this.t+=this.args.speed*e/1e4;let t=!1;return t=this.args.fade?this.playFade(e):this.playBlinker(e),!!this.args.infinite||t}playFade(e){if(1===this.phase){this.pulsatingTime+=e;const t=Math.sin(this.pulsatingTime*this.args.speed/1e4+this.phaseOffset)/2+.5;this.item.opacity=this.args.minOpacity*(1-t)+this.args.maxOpacity*t,!this.args.infinite&&1e3*this.args.duration-this.elapsedTime<Math.min(500,1e3*this.args.duration/20)&&(this.phase=2)}return 2===this.phase&&(this.item.opacity+=this.args.speed*e/100,this.item.opacity>=this.itemOriginalOpacity)?(this.item.opacity=this.itemOriginalOpacity,!1):(o.Z.item.changed.specific.$emit(this.editorId,this.item.id),this.elapsedTime<1e3*this.args.duration)}playBlinker(e){if(0===this.phase)this.opacity<this.args.minOpacity/100?this.opacity+=this.args.speed*e/1e4:(this.opacity=this.args.minOpacity/100,this.phase=1);else if(1===this.phase)this.pulsatingTime+=e,this.opacity=((Math.sin(this.pulsatingTime*this.args.speed/1e4)/2+.5)*(this.args.maxOpacity-this.args.minOpacity)+this.args.minOpacity)/100,!this.args.infinite&&1e3*this.args.duration-this.elapsedTime<Math.min(500,1e3*this.args.duration/20)&&(this.phase=2);else if(this.opacity-=this.args.speed*e/1e4,this.opacity<0)return!1;return this.domBlinker.setAttribute("style",`opacity: ${this.opacity}`),this.elapsedTime<1e3*this.args.duration}destroy(){this.item.opacity=this.itemOriginalOpacity,this.args.inBackground||this.resultCallback(),this.domBlinker&&this.domContainer.removeChild(this.domBlinker)}}const $={name:"Blink Effect",description:"Generates a pulsating effect in which item fades in and out or glows with specified color",args:{fade:{name:"Fade in/out",type:"boolean",value:!0},color:{name:"Color",type:"color",value:"rgba(255,0,0,1.0)",depends:{fade:!1}},speed:{name:"Speed",type:"number",value:50},duration:{name:"Duration (sec)",type:"number",value:2,depends:{infinite:!1}},infinite:{name:"Infinite animation",type:"boolean",value:!1,description:"Plays animation indefinitely"},minOpacity:{name:"Min Opacity (%)",type:"number",value:5},maxOpacity:{name:"Max Opacity (%)",type:"number",value:80},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other acctions"}},execute(e,t,i,n,s){e&&((0,r.oK)(i.editorId,new M(i.editorId,e,t,s),e.id,this.name),t.inBackground&&s())}};i(3341);class O extends g.Z{constructor(e,t,i,n){super(),this.item=e,this.args=t,this.schemeContainer=i,this.resultCallback=n,this.elapsedTime=0,this.originalPosition={x:this.item.area.x,y:this.item.area.y},this.destinationPosition="relative"===t.kind?{x:this.item.area.x+parseFloat(t.x),y:this.item.area.y+parseFloat(t.y)}:{x:parseFloat(t.x),y:parseFloat(t.y)}}init(){return!0}play(e){if(this.args.animated&&this.args.duration>1e-5){this.elapsedTime+=e;const t=Math.min(1,this.elapsedTime/(1e3*this.args.duration));if(t>=1)return this.item.area.x=this.destinationPosition.x,this.item.area.y=this.destinationPosition.y,this.schemeContainer.updateChildTransforms(this.item),!1;const i=(0,s.rJ)(t,this.args.movement);return this.item.area.x=this.originalPosition.x*(1-i)+this.destinationPosition.x*i,this.item.area.y=this.originalPosition.y*(1-i)+this.destinationPosition.y*i,this.schemeContainer.updateChildTransforms(this.item),o.Z.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.readjustItemAndDescendants(this.item.id),!0}return this.item.area.x=this.destinationPosition.x,this.item.area.y=this.destinationPosition.y,this.schemeContainer.updateChildTransforms(this.item),o.Z.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.readjustItemAndDescendants(this.item.id),!1}destroy(){this.args.inBackground||this.resultCallback()}}const D={name:"Move",description:"Moves item to specified location in local coords",args:{kind:{name:"Position",type:"choice",value:"absolute",options:["absolute","relative"],description:'Specifies type of movement. "absolute" movement uses "x" and "y" as is, while "relative" movement specifies that item should move by specified "x" and "y"'},x:{name:"X",type:"number",value:50},y:{name:"Y",type:"number",value:50},animated:{name:"Animated",type:"boolean",value:!1},duration:{name:"Duration (sec)",type:"number",value:2,depends:{animated:!0}},movement:{name:"Movement",type:"choice",value:"linear",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions",depends:{animated:!0}}},argsToShortString(e){const t="relative"===e.kind?"":"";return`${t}x: ${e.x}, ${t}y: ${e.y} `+(e.animated?"animated":"")},execute(e,t,i,n,s){if(e){if(t.animated)return(0,r.oK)(i.editorId,new O(e,t,i,s),e.id,this.name),void(t.inBackground&&s());"relative"===t.kind?(e.area.x+=t.x,e.area.y+=t.y):(e.area.x=t.x,e.area.y=t.y),i.updateChildTransforms(e),o.Z.item.changed.specific.$emit(i.editorId,e.id),i.readjustItemAndDescendants(e.id)}s()}};class B extends g.Z{constructor(e,t,i,n,r,s,o,a){super(),this.item=e,this.args=t,this.schemeContainer=o,this.resultCallback=a,this.elapsedTime=0,this.originalPosition={x:this.item.area.x,y:this.item.area.y},this.destinationPosition=i,this.originalAngle=e.area.r,this.destinationAngle=n,this.originalWidth=e.area.w,this.destinationWidth=r,this.originalHeight=e.area.h,this.destinationHeight=s}init(){return!0}play(e){if(this.args.animated&&this.args.duration>1e-5){this.elapsedTime+=e;const t=Math.min(1,this.elapsedTime/(1e3*this.args.duration));let i=!0,n=(0,s.rJ)(t,this.args.movement);return t>=1&&(n=1,i=!1),this.item.area.x=this.originalPosition.x*(1-n)+this.destinationPosition.x*n,this.item.area.y=this.originalPosition.y*(1-n)+this.destinationPosition.y*n,this.args.rotate&&(this.item.area.r=this.originalAngle*(1-n)+this.destinationAngle*n),this.args.alignWidth&&(this.item.area.w=this.originalWidth*(1-n)+this.destinationWidth*n),this.args.alignHeight&&(this.item.area.h=this.originalHeight*(1-n)+this.destinationHeight*n),o.Z.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.updateChildTransforms(this.item),this.schemeContainer.readjustItemAndDescendants(this.item.id),i}return this.item.area.x=this.destinationPosition.x,this.item.area.y=this.destinationPosition.y,o.Z.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.updateChildTransforms(this.item),this.schemeContainer.readjustItemAndDescendants(this.item.id),!1}destroy(){this.args.inBackground||this.resultCallback()}}const L={name:"Move to Item",description:"Moves item into another item. It also lets rotation and scale align to the destination item with a smooth transition",args:{destinationItem:{name:"Destination Item",type:"element",value:null,description:"Other item to which this item should be moved"},matchPoint:{name:"Match point",type:"choice",value:"center",description:"Match items points",options:["center","pivot","top-left","top-right","bottom-left","bottom-right"]},animated:{name:"Animated",type:"boolean",value:!1},duration:{name:"Duration (sec)",type:"number",value:2,depends:{animated:!0}},movement:{name:"Movement",type:"choice",value:"ease-in-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},rotate:{name:"Rotate",type:"boolean",value:!1,description:"Align rotation of items"},rotationOffset:{name:"Rotation Offset",type:"number",value:0,depends:{rotate:!0},description:"Rotation angle offset"},alignWidth:{name:"Align Width",type:"boolean",value:!1,description:"Adjust items width so that it fits to the width of its destination item"},alignHeight:{name:"Align Height",type:"boolean",value:!1,description:"Adjust items height so that it fits to the height of its destination item"},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions",depends:{animated:!0}}},execute(e,t,i,n,s){if(e){const n=i.findFirstElementBySelector(t.destinationItem,e);let a=e.area.r,l=null,c=e.area.w,d=e.area.h;if(n&&n.id!==e.id){l=function(e,t,i,n){const r={x:0,y:0},s={x:0,y:0};"pivot"===i?(r.x=t.area.px*t.area.w,r.y=t.area.py*t.area.h,s.x=e.area.px*e.area.w,s.y=e.area.py*e.area.h):"top-right"===i?(r.x=t.area.w,s.x=e.area.w):"bottom-left"===i?(r.y=t.area.h,s.y=e.area.h):"bottom-right"===i?(r.x=t.area.w,s.x=e.area.w,r.y=t.area.h,s.y=e.area.h):"center"===i&&(r.x=t.area.w/2,s.x=e.area.w/2,r.y=t.area.h/2,s.y=e.area.h/2);const o=(0,w.rs)(r.x,r.y,t);return h.Z.findTranslationMatchingWorldPoint(o.x,o.y,s.x,s.y,e.area,e.meta.transformMatrix)||n.relativePointForItem(o.x,o.y,e)}(e,n,t.matchPoint,i);const r=(0,w.uI)(e.area.w,0,e),s=(0,w.uI)(n.area.w,0,n),o=h.Z.fullAngleForVector(r.x,r.y);a+=180*(h.Z.fullAngleForVector(s.x,s.y)-o)/Math.PI,c=n.area.w,d=n.area.h}if(l){if(t.animated)return(0,r.oK)(i.editorId,new B(e,t,l,a,c,d,i,s),e.id,this.name),void(t.inBackground&&s());e.area.x=l.x,e.area.y=l.y,t.rotate&&(e.area.r=a+t.rotationOffset),t.alignWidth&&(e.area.w=c),t.alignHeight&&(e.area.h=d),o.Z.item.changed.specific.$emit(i.editorId,e.id),i.updateChildTransforms(e),i.readjustItemAndDescendants(e.id)}}s()}},R={name:"Replace Item",description:"Hides destination item and moves your item to it. This is usefull in case you want to design mocked interface",args:{destinationItem:{name:"Destination Item",type:"element",value:null,description:"Other item which this item should replace"}},argsToShortString(e,t){if(e.destinationItem){if(e.destinationItem.startsWith("tag:"))return e.destinationItem;const i=t.findFirstElementBySelector(e.destinationItem);if(i)return i.name}return"..."},execute(e,t,i,n,r){if(e){const n=i.findFirstElementBySelector(t.destinationItem,e);let r=null;n&&n.id!==e.id&&(r=function(e,t,i){const n=i.worldPointOnItem(0,0,t);return i.relativePointForItem(n.x,n.y,e)}(e,n,i),n.visible=!1,e.visible=!0,e.area.x=r.x,e.area.y=r.y,i.updateChildTransforms(e),i.readjustItemAndDescendants(e.id))}r()}};class N extends g.Z{constructor(e,t,i,n){super(),this.item=e,this.args=t,this.schemeContainer=i,this.resultCallback=n,this.elapsedTime=0,this.originalAngle=this.item.area.r,this.destinationAngle=parseFloat(t.angle)}init(){return!0}play(e){if(this.args.animated&&this.args.duration>1e-5){this.elapsedTime+=e;const t=Math.min(1,this.elapsedTime/(1e3*this.args.duration));let i=(0,s.rJ)(t,this.args.movement),n=!0;return t>=1?(n=!1,i=1,!1):(this.item.area.r=this.originalAngle*(1-i)+this.destinationAngle*i,o.Z.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.updateChildTransforms(this.item),this.schemeContainer.readjustItemAndDescendants(this.item.id),n)}return this.item.area.r=this.destinationAngle,this.schemeContainer.updateChildTransforms(this.item),this.schemeContainer.readjustItemAndDescendants(this.item.id),o.Z.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),!1}destroy(){this.args.inBackground||this.resultCallback()}}const Z={name:"Rotate",description:"Rotates item by specified angle",args:{angle:{name:"Angle",type:"number",value:0},animated:{name:"Animated",type:"boolean",value:!1},duration:{name:"Duration (sec)",type:"number",value:2,depends:{animated:!0}},movement:{name:"Movement",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions",depends:{animated:!0}}},execute(e,t,i,n,s){if(e){if(t.animated)return(0,r.oK)(i.editorId,new N(e,t,i,s),e.id,this.name),void(t.inBackground&&s());e.area.r=parseFloat(t.angle),i.updateChildTransforms(e),o.Z.item.changed.specific.$emit(i.editorId,e.id),i.readjustItemAndDescendants(e.id)}s()}};var F=i(4691);class j extends g.Z{constructor(e,t,i,n){super(),this.item=e,this.args=t,this.schemeContainer=i,this.resultCallback=n,this.elapsedTime=0,this.originalArea=F.Z.clone(e.area),this.destinationScale={sx:parseFloat(t.scaleX),sy:parseFloat(t.scaleY)}}init(){return!0}play(e){if(this.args.animated&&this.args.duration>1e-5){this.elapsedTime+=e;const t=Math.min(1,this.elapsedTime/(1e3*this.args.duration));let i=(0,s.rJ)(t,this.args.movement),n=!0;return t>=1&&(n=!1,i=1),this.item.area.sx=this.originalArea.sx*(1-i)+this.destinationScale.sx*i,this.item.area.sy=this.originalArea.sy*(1-i)+this.destinationScale.sy*i,o.Z.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.updateChildTransforms(this.item),this.schemeContainer.readjustItemAndDescendants(this.item.id),n}return this.item.area.sx=this.destinationScale.sx,this.item.area.sy=this.destinationScale.sy,o.Z.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.updateChildTransforms(this.item),this.schemeContainer.readjustItemAndDescendants(this.item.id),!1}destroy(){this.args.inBackground||this.resultCallback()}}const z={name:"Scale",description:"Changes width and height of the item",args:{scaleX:{name:"Scale X",type:"number",value:1.5},scaleY:{name:"Scale Y",type:"number",value:1.5},animated:{name:"Animated",type:"boolean",value:!0},duration:{name:"Duration (sec)",type:"number",value:2,depends:{animated:!0}},movement:{name:"Movement",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions",depends:{animated:!0}}},argsToShortString:e=>`x: ${e.scaleX}, y: ${e.scaleY}`+(e.animated?", animated":""),execute(e,t,i,n,s){if(e){if(t.animated)return(0,r.oK)(i.editorId,new j(e,t,i,s),e.id,this.name),void(t.inBackground&&s());e.area.sx=parseFloat(t.scaleX),e.area.sy=parseFloat(t.scaleY),o.Z.item.changed.specific.$emit(i.editorId,e.id),i.updateChildTransforms(e),i.readjustItemAndDescendants(e.id)}s()}};var U=i(3277);class H extends g.Z{constructor(e,t,i,n){super(),this.item=e,this.args=t,this.schemeContainer=i,this.resultCallback=n,this.elapsedTime=0,this.originalPosition={x:this.item.area.x,y:this.item.area.y},this.domPath=null,this.pathItem=null,this.pathTotalLength=1}init(){if(this.args.path){const e=this.schemeContainer.findFirstElementBySelector(this.args.path,this.item);if(e){const t=v.Z.find(e.shape);if(t){const i=t.computeOutline(e);i&&(this.domPath=document.createElementNS("http://www.w3.org/2000/svg","path"),this.domPath.setAttribute("d",i),this.pathItem=e)}}this.domPath&&(this.pathTotalLength=this.domPath.getTotalLength())}return!0}play(e){if(this.domPath&&this.args.duration>1e-5){this.elapsedTime+=e;const t=Math.min(1,this.elapsedTime/(1e3*this.args.duration));if(t>=1)return this.moveToPathLength(this.pathTotalLength*this.args.endPosition/100),!1;const i=(0,s.rJ)(t,this.args.movement);return this.moveToPathLength(this.pathTotalLength*(this.args.startPosition*(1-i)+this.args.endPosition*i)/100),o.Z.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.readjustItemAndDescendants(this.item.id),!0}return!1}moveToPathLength(e){U.Z.execute({path:this.domPath,item:this.item,pathItem:this.pathItem,schemeContainer:this.schemeContainer,totalLength:this.pathTotalLength,rotateItem:this.args.rotateItem,rotationOffset:this.args.rotationOffset},{distance:100*e/Math.max(1,this.pathTotalLength),rotation:0})}destroy(){this.args.inBackground||this.resultCallback()}}const q={name:"Move Along Path",description:"Moves item along the outline of the other item. It is best to use this effect when moving item along the custom curve",args:{path:{name:"Path",type:"element",value:null},movement:{name:"Movement",type:"choice",value:"ease-in-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"]},duration:{name:"Duration (sec)",type:"number",value:2,min:0},startPosition:{name:"Start position (%)",type:"number",value:0,description:"Initial position on the path in percentage to its total length"},endPosition:{name:"End position (%)",type:"number",value:100,description:"Final position on the path in percentage to its total length"},rotateItem:{name:"Rotate item",type:"boolean",value:!1,description:"Adjust rotation of the item to path"},rotationOffset:{name:"Rotation offset",type:"number",value:0,description:"Rotation angle offset",depends:{rotateItem:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions"}},execute(e,t,i,n,s){if(e)return(0,r.oK)(i.editorId,new H(e,t,i,s),e.id,this.name),void(t.inBackground&&s());s()}};class W extends g.Z{constructor(e,t,i,n){super(),this.item=e,this.args=t,this.schemeContainer=i,this.resultCallback=n,this.elapsedTime=0,this.itemInitialPosition={x:this.item.area.x,y:this.item.area.y},this.point1={x:this.item.area.x,y:this.item.area.y},this.point2=this.pickRandomPosition(),this.point3=this.pickRandomPosition(),this._t=0}init(){return!0}pickRandomPosition(){const e=Math.random()*Math.PI*2,t=Math.random()*this.args.radius;return{x:t*Math.cos(e)+this.itemInitialPosition.x,y:t*Math.sin(e)+this.itemInitialPosition.y}}play(e){if(this.args.duration>1e-5&&this.elapsedTime<1e3*this.args.duration){this.elapsedTime+=e,this._t+=e*this.args.speed/1e3,this._t>=1&&(this._t=0,this.point1={x:this.item.area.x,y:this.item.area.y},this.point2=this.pickRandomPosition(),this.point3=this.pickRandomPosition());const t=(0,s.rJ)(this._t,"ease-in-out");return this.item.area.x=Math.pow(1-t,2)*this.point1.x+2*(1-t)*t*this.point2.x+t*t*this.point3.x,this.item.area.y=Math.pow(1-t,2)*this.point1.y+2*(1-t)*t*this.point2.y+t*t*this.point3.y,this.schemeContainer.updateChildTransforms(this.item),o.Z.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.readjustItemAndDescendants(this.item.id),!0}return this.item.area.x=this.itemInitialPosition.x,this.item.area.y=this.itemInitialPosition.y,this.schemeContainer.updateChildTransforms(this.item),o.Z.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.readjustItemAndDescendants(this.item.id),!1}destroy(){this.item.area.x=this.itemInitialPosition.x,this.item.area.y=this.itemInitialPosition.y,this.schemeContainer.updateChildTransforms(this.item),this.schemeContainer.readjustItemAndDescendants(this.item.id),this.args.inBackground||this.resultCallback()}}const V={name:"Move Randomly",description:"Moves item in a chaotic manner around its original location",args:{radius:{name:"Moving Radius",type:"number",value:20,description:"Radius within which it will perform random movements"},speed:{name:"Moving Speed",type:"number",value:1,description:"Speed of each random movements"},duration:{name:"Duration (sec)",type:"number",value:2},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions"}},execute(e,t,i,n,s){if(e)return(0,r.oK)(i.editorId,new W(e,t,i,s),e.id,this.name),void(t.inBackground&&s());s()}},G={name:"Wait",description:"Waits for specified amount of time until the next function",multiItem:!0,args:{time:{type:"number",value:.1,name:"Time (s)",description:"Number of seconds for which it should wait until executing next action in the list"}},argsToShortString:e=>""+e.time,execute(e,t,i,n,r){setTimeout(r,1e3*t.time)}},K=[],J={name:"Toggle",description:"Hides all other items on screen, leaving only the selected item visible",args:{},execute(e,t,i,n,r){const s={itemId:e.id,allItems:{}};(0,d.Ed)(i.getTopLevelItems(),(t=>{s.allItems[t.id]=t.visible,t.id!==e.id&&(t.visible=!1,o.Z.item.changed.specific.$emit(i.editorId,t.id))})),0!==K.length&&K[K.length-1].itemId===e.id||K.push(s),e.visible=!0,o.Z.item.changed.specific.$emit(i.editorId,e.id),r()}},Y={name:"Untoggle",description:'Restores previous state of items before using "Toggle" function',args:{},execute(e,t,i,n,r){const s=K.length>0?K.pop():null;s&&(0,d.Ed)(i.getTopLevelItems(),(e=>{e.visible=s.allItems[e.id],o.Z.item.changed.specific.$emit(i.editorId,e.id)})),r()}},Q={name:"Play Frames",description:"Triggers animations in specified frame player",supportedShapes:["frame_player"],args:{startFrame:{type:"number",value:1,min:1,name:"Starting frame"},partial:{type:"boolean",value:!1,name:"Play partial",description:"Play only until specified stop frame"},stopFrame:{type:"number",value:1,min:1,name:"Stop frame",depends:{partial:!0}}},argsToShortString:e=>`from ${e.startFrame} `+(e.partial?`till ${e.stopFrame}`:"till end"),execute(e,t,i,n,s){if(!e)return void s();const o=i.getFrameAnimation(e.id);o?(o.setFrame(t.startFrame),t.partial?o.setStopFrame(t.stopFrame):o.setStopFrame(-1),(0,r.oK)(i.editorId,o,e.id,"frame-player"),s()):s()}},X={name:"Stop Frame Player",description:"Stops currently running animation in specified frame player",supportedShapes:["frame_player"],execute(e,t,i,n,r){if(!e)return void r();const s=i.getFrameAnimation(e.id);s?(s.enabled=!1,r()):r()}},ee={name:"Load component",description:'Triggers loading of component. Applicable to "component" shapes only',args:{},supportedShapes:["component"],execute(e,t,i,n,r){setTimeout((()=>{e&&"component"!==!e.shape?(o.Z.component.loadRequested.specific.$emit(i.editorId,e.id,e),r()):r()}))}};var te=i(2629),ie=i(7196);const ne={name:"Destroy component",description:'Removes all the loaded items of the component. Applicable to "component" shapes only',args:{},supportedShapes:["component"],execute(e,t,i,n,r){try{(0,ie.Hp)(e._childItems,(e=>{n.clearEventsForItem(e.id)})),e._childItems=[],i.reindexItems(),n.emitItemEvent(e.id,te.YL),o.Z.item.changed.specific.$emit(i.editorId,e.id)}catch(e){console.error(e)}r()}},re={name:"Toggle in group",description:"Hides all other items by specified tag, leaving only the specified item visible",args:{group:{name:"Tag",type:"element",description:"Tag representing a group of items that will be hidden instead of the toggled item"}},argsToShortString:e=>e.group?e.group:"...",multiItem:!0,execute(e,t,i,n,r){const s=i.findElementsBySelector(t.group);(0,d.Ed)(s,(t=>{(0,d.sE)(e,(e=>e.id===t.id))||(t.visible=!1,o.Z.item.changed.specific.$emit(i.editorId,t.id))})),(0,d.Ed)(e,(e=>{e.visible=!0,o.Z.item.changed.specific.$emit(i.editorId,e.id)})),r()}},se={name:"Send to parent",description:"Sends custom events to parent of this item.\nIt can be used for cross-component communication",args:{event:{name:"Event",type:"string",value:"Unknown event..."}},argsToShortString:e=>e.event,execute(e,t,i,n,r){e.meta&&e.meta.parentId&&oe(e,t.event,n,i),r()}};function oe(e,t,i,n,r){let s=[];Array.isArray(r)&&(s=r),i.emitItemEvent(e.meta.parentId,t,...s);const o=n.findItemById(e.meta.parentId);o&&o.meta.isComponentContainer&&o.meta.parentId&&oe(o,t,i,n,r)}const ae={name:"Send event to children",description:"Sends specified event to all children of an item.\nThis can be used for cross-component communication.\nUsing this function you can send event into dynamic component",args:{event:{name:"Event",type:"string",value:"Unknown event..."}},argsToShortString:e=>e.event,execute(e,t,i,n,r){le(e,t.event,n,[]),r()}};function le(e,t,i,n){if("component"===e.shape&&Array.isArray(e._childItems))return e._childItems.forEach((e=>{e.meta.isComponentContainer&&(ce(e.childItems,t,i,n),ce(e._childItems,t,i,n))})),void ce(e.childItems,t,i,n);ce(e.childItems,t,i,n),ce(e._childItems,t,i,n)}function ce(e,t,i,n){Array.isArray(e)&&e.forEach((e=>{if(e.meta.isComponentContainer)ce(e.childItems,t,i,n),ce(e._childItems,t,i,n);else{let r=[];Array.isArray(n)&&(r=n),i.emitItemEvent(e.id,t,...r)}}))}var he=i(6085),de=i(2672);const ue={name:"Copy events",description:"Copies all events except init from the source item to destination items",args:{destination:{name:"Destination",type:"element",value:null,description:"Other item or an item group to which you want to copy events from the source"}},argsToShortString(e,t){if(e.destination){if(e.destination.startsWith("tag:"))return e.destination;const i=t.findFirstElementBySelector(e.destination);if(i)return i.name}return"..."},execute(e,t,i,n,r){if(e){try{const r=i.findElementsBySelector(t.destination);e.behavior&&Array.isArray(e.behavior.events)&&r.forEach((t=>{e.behavior.events.forEach((e=>{if(e.event!==he.Z.standardEvents.init.id){const r=(0,de.z)(i,t,e.actions);n.subscribeItemEvent(t.id,e.event,r)}}))}))}catch(e){console.error(e)}r()}else r()}},pe={name:"Repeat",args:{name:{name:"Name",type:"string",value:"",description:'Unique name of the repeater, with which it can be identified in the "Stop repeater" function'},forever:{name:"Run forever",type:"boolean",value:!0},count:{name:"Number of repeatitions",type:"number",value:10,min:0,depends:{forever:!1}}},argsToShortString:e=>e.forever?"forever":`${e.count} times`,execute(e,t,i,n,r,s,o){if(!s)return void r();const a=t.name?t.name:o,l=`repeaterStarted_${a}`,c=`repeaterStopped_${a}`,h=`repeaterCounter_${a}`,d=`repeaterStartTime_${a}`,u=()=>{delete s.meta[h],delete s.meta[d],delete s.meta[l],delete s.meta[c]};if(s.meta.hasOwnProperty(h)||(t.forever?s.meta[h]=-1:s.meta[h]=t.count,s.meta[d]=Date.now()),0===s.meta[h]||s.meta[c])u();else{const e=t.forever?Math.abs(s.meta[h]):Math.abs(t.count-s.meta[h]),i=Date.now()-s.meta[d];if(i>0&&1e3*e/i>30)return u(),void r();s.meta[h]-=1,s.meta[l]=!0,setTimeout((()=>{n.emitItemEvent(s.id,o)}))}r()}},me={name:"Stop repeater",args:{name:{name:"Name",type:"string",value:"",description:"Unique name of the repeater, which should be stopped"}},argsToShortString:e=>e.name?e.name:"...",execute(e,t,i,n,r,s,o){const a=t.name?t.name:o,l=`repeaterStarted_${a}`,c=`repeaterStopped_${a}`;e.meta[l]&&(e.meta[c]=!0),r()}},fe={name:"Copy links",description:"Copies all links from the source item to destination items. It does not replace exsiting links, but adds new links from the source item",args:{destination:{name:"Destination",type:"element",value:null,description:"Other item or an item group to which you want to copy links from the source"}},argsToShortString(e,t){if(e.destination){if(e.destination.startsWith("tag:"))return e.destination;const i=t.findFirstElementBySelector(e.destination);if(i)return i.name}return"..."},execute(e,t,i,n,r){if(e){try{const n=i.findElementsBySelector(t.destination);if(!Array.isArray(e.links)||0===e.links.length)return void r();n.forEach((t=>{Array.isArray(t.links)||(t.links=[]),t.links=t.links.concat(e.links)}))}catch(e){console.error(e)}r()}else r()}},ge={name:"Copy description",description:"Copies description from the source item to destination items. It does not replace exsiting description, but adds to the existing one",args:{destination:{name:"Destination",type:"element",value:null,description:"Other item or an item group to which you want to copy description from the source"}},argsToShortString(e,t){if(e.destination){if(e.destination.startsWith("tag:"))return e.destination;const i=t.findFirstElementBySelector(e.destination);if(i)return i.name}return"..."},execute(e,t,i,n,r){if(e){try{const n=i.findElementsBySelector(t.destination);if(!e.description)return void r();n.forEach((t=>{t.description+=e.description}))}catch(e){console.error(e)}r()}else r()}},ve={name:"Transform Screen (Hidden)",description:"Animates changing screen transform",args:{x:{name:"x",type:"number",value:0},y:{name:"y",type:"number",value:0},scale:{name:"scale",type:"number",value:0},inBackground:{name:"In Background",type:"boolean",value:!1,depends:{animated:!0},description:"Play animation in background without blocking invokation of other actions"}},argsToShortString:e=>e.animated?`animated, ${e.animationDuration} sec`:"instant",execute(e,t,i,n,a){t.inBackground&&a();const l=i.screenTransform.x,c=i.screenTransform.y,h=i.screenTransform.scale;(0,r.oK)(i.editorId,new s.ZP({durationMillis:500,animationType:"ease-in-out",update:e=>{i.screenTransform.scale=h*(1-e)+t.scale*e,i.screenTransform.x=l*(1-e)+t.x*e,i.screenTransform.y=c*(1-e)+t.y*e},destroy:()=>{o.Z.screenTransformUpdated.$emit(i.editorId,i.screenTransform),t.inBackground||a()}}),"screen","screen-transform")}};class ye extends g.Z{constructor(e,t,i){super(),this.item=e,this.args=t,this.resultCallback=i,this.domContainer=null,this.time=0,this.paths=[],this.totalPathsLength=0}init(){if(this.domContainer=document.getElementById(`animation-container-${this.item.id}`),!this.domContainer)return!1;const e=v.Z.find(this.item.shape);if(!e)return!1;const t=e.computePath(this.item);if(!t)return!1;this.paths=[],this.totalPathsLength=0;let i=0;return function(e){const t=e.split("M"),i=[];return t.forEach((e=>{(e=e.trim())&&i.push("M "+e)})),i}(t).forEach((e=>{const t=this.svg("path",{d:e,"stroke-width":this.args.strokeSize||1,stroke:this.args.color,fill:"none","stroke-linejoin":"round"}),n=t.getTotalLength();this.paths.push({domPath:t,length:n,offset:i}),this.totalPathsLength+=n,this.domContainer.appendChild(t),t.setAttribute("stroke-dasharray",n),t.setAttribute("stroke-dashoffset",n),i+=n})),!0}play(e){this.time+=e;let t=1;h.Z.tooSmall(this.args.duration)||(t=this.time/(1e3*this.args.duration));const i=t<1;let n=i?this.totalPathsLength*t:this.totalPathsLength*(t-1);for(let e=0;e<this.paths.length;e++){const t=this.paths[e].offset+this.paths[e].length-n;if(t>0){this.paths[e].domPath.setAttribute("stroke-dashoffset",Math.floor(i?t:this.paths[e].length+t)),e>0&&this.paths[e-1].domPath.setAttribute("stroke-dashoffset",i?0:this.paths[e-1].length);break}}if(this.args.twoWay){if(t>2)return!1}else if(t>1)return!1;return!0}destroy(){this.args.inBackground||this.resultCallback(),this.paths.forEach((e=>{this.domContainer.removeChild(e.domPath)}))}}const xe={name:"Draw Effect",description:"Animates outline by simulating a drawing effect",args:{color:{name:"Color",type:"color",value:"rgba(255,0,0,1.0)"},strokeSize:{name:"Stroke size",type:"number",value:2},duration:{name:"Duration (sec)",type:"number",value:2},twoWay:{name:"Two way",type:"boolean",value:!1},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions"}},execute(e,t,i,n,s){e&&(0,r.oK)(i.editorId,new ye(e,t,s),e.id,this.name),t.inBackground&&s()}},be={name:"Size (Width)",description:"Changes width of an item",args:{width:{name:"Width",type:"number",value:50},animated:{name:"Animated",type:"boolean",value:!1},duration:{name:"Duration (sec)",type:"number",value:1,depends:{animated:!0}},animationType:{name:"Animation Type",type:"choice",value:"linear",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions",depends:{animated:!0}}},execute(e,t,i,n,a){if(e){if(t.animated){const n=e.area.w;return(0,r.oK)(i.editorId,new s.ZP({durationMillis:1e3*t.duration,animationType:t.animationType,update:r=>{e.area.w=n*(1-r)+t.width*r,i.updateChildTransforms(e),o.Z.item.changed.specific.$emit(i.editorId,e.id),i.readjustItemAndDescendants(e.id)},destroy:()=>{t.inBackground||a()}}),e.id,this.name),void(t.inBackground&&a())}e.area.w=t.width,i.updateChildTransforms(e),o.Z.item.changed.specific.$emit(i.editorId,e.id),i.readjustItemAndDescendants(e.id)}a()}},we={name:"Size (Height)",description:"Changes height of an item",args:{height:{name:"Height",type:"number",value:50},animated:{name:"Animated",type:"boolean",value:!1},duration:{name:"Duration (sec)",type:"number",value:1,depends:{animated:!0}},animationType:{name:"Animation Type",type:"choice",value:"linear",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions",depends:{animated:!0}}},execute(e,t,i,n,a){if(e){if(t.animated){const n=e.area.h;return(0,r.oK)(i.editorId,new s.ZP({durationMillis:1e3*t.duration,animationType:t.animationType,update:r=>{e.area.h=n*(1-r)+t.height*r,i.updateChildTransforms(e),o.Z.item.changed.specific.$emit(i.editorId,e.id),i.readjustItemAndDescendants(e.id)},destroy:()=>{t.inBackground||a()}}),e.id,this.name),void(t.inBackground&&a())}e.area.h=t.height,i.updateChildTransforms(e),o.Z.item.changed.specific.$emit(i.editorId,e.id),i.readjustItemAndDescendants(e.id)}a()}};var Ce=i(9532),Pe=i(387),ke=i(3762),Se=i(791),Ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"script-function-editor"},[e._m(0),e._v(" "),i("ul",{staticClass:"script-options"},e._l(e.scriptTypeOptions,(function(t,n){return i("li",{staticClass:"script-option",class:{selected:n===e.selectedOptionIdx},on:{click:function(t){return e.selectScriptOption(n)}}},[i("i",{staticClass:"icon",class:t.icon}),e._v(" "),i("span",{staticClass:"name"},[e._v(e._s(t.name))]),e._v(" "),i("Tooltip",[e._v(e._s(t.description))])],1)})),0),e._v(" "),e.selectedOptionIdx>0?i("div",{staticClass:"script-parameters"},[1===e.selectedOptionIdx?i("div",{staticClass:"script-parameter"},[i("span",[e._v("Duration")]),e._v(" "),i("NumberTextfield",{attrs:{value:e.args.animationDuration},on:{changed:function(t){return e.emitArgChange("animationDuration",arguments[0])}}})],1):e._e(),e._v(" "),1===e.selectedOptionIdx?i("div",{staticClass:"script-parameter"},[i("span",[e._v("Transition")]),e._v(" "),i("select",{domProps:{value:e.args.transition},on:{input:function(t){return e.emitArgChange("transition",arguments[0].target.value)}}},e._l(e.knownTransitions,(function(t){return i("option",{domProps:{value:t}},[e._v(e._s(t))])})),0)]):e._e(),e._v(" "),i("div",{staticClass:"script-parameter"},[i("input",{attrs:{id:"chk-script-animation-in-background",type:"checkbox"},domProps:{checked:e.args.inBackground},on:{input:function(t){return e.emitArgChange("inBackground",arguments[0].target.checked)}}}),e._v(" "),i("label",{attrs:{for:"chk-script-animation-in-background"}},[e._v("In background")]),e._v(" "),i("Tooltip",[e._v("Play animation in background without blocking invokation of other actions")])],1)]):e._e(),e._v(" "),i("ul",{staticClass:"tabs tabs-file"},e._l(e.tabs,(function(t,n){return t.disabled?e._e():i("li",[i("span",{staticClass:"tab",class:{active:n===e.selectedTabIdx},on:{click:function(t){return e.selectScriptTab(n)}}},[i("i",{staticClass:"fa-solid fa-code"}),e._v("\n                "+e._s(t.name)+"\n                "),t.description?i("Tooltip",[e._v(e._s(t.description))]):e._e()],1)])})),0),e._v(" "),i("div",{staticClass:"tabs-body"},[0===e.selectedTabIdx?i("ScriptEditor",{attrs:{value:e.args.initScript},on:{changed:function(t){return e.emitArgChange("initScript",arguments[0])}}}):e._e(),e._v(" "),1===e.selectedTabIdx?i("ScriptEditor",{attrs:{value:e.args.script},on:{changed:function(t){return e.emitArgChange("script",arguments[0])}}}):e._e(),e._v(" "),2===e.selectedTabIdx?i("ScriptEditor",{attrs:{value:e.args.endScript},on:{changed:function(t){return e.emitArgChange("endScript",arguments[0])}}}):e._e()],1)])};Ie._withStripped=!0;var Ae=i(7502),_e=i(4628),Ee=i(9240);const Te={props:{editorId:{type:String},args:{type:Object}},components:{ScriptEditor:Ae.Z,Tooltip:_e.Z,NumberTextfield:Ee.Z,Tooltip:_e.Z},data(){const e=this.detectScriptOptionIdx();return{knownTransitions:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],tabs:[{name:"Init",disabled:0===e,description:"Run only once before the animation starts. You can use it to set up some variables. Any variables defined in this script will be accessible in the Main script"},{name:"Main",disabled:!1,description:""},{name:"On Finish",disabled:0===e,description:"Runs at the end of animation"}],selectedTabIdx:1,scriptTypeOptions:[{name:"One time",icon:"fa-solid fa-person-running",description:"Runs script only once"},{name:"Animation",icon:"fa-solid fa-play",description:'Script is called multiple times for the duration of the animation. It has access to "t" variable (start from 0, ends at 1) which represents the relative animation time'},{name:"Infinite Loop",icon:"fa-solid fa-infinity",description:'Script is executed forever until stopped from the script itself or until the "Stop all animations" item function is called. The script has access to "deltaTime" variable which representa time in seconds between frames'}],selectedOptionIdx:e}},methods:{selectScriptTab(e){this.selectedTabIdx=e},emitArgChange(e,t){this.$emit("argument-changed",e,t)},detectScriptOptionIdx(){return this.args.animated?"infinite-loop"===this.args.animationType?2:1:0},selectScriptOption(e){this.selectedOptionIdx=e,0===e?(this.emitArgChange("animated",!1),this.tabs[0].disabled=!0,this.tabs[2].disabled=!0,this.selectedTabIdx=1):1===e?(this.tabs[0].disabled=!1,this.tabs[2].disabled=!1,this.emitArgChange("animated",!0),this.emitArgChange("animationType","animation")):2===e&&(this.tabs[0].disabled=!1,this.tabs[2].disabled=!1,this.emitArgChange("animated",!0),this.emitArgChange("animationType","infinite-loop"))}}};var Me=i(1900);const $e=(0,Me.Z)(Te,Ie,[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"label"},[e._v("\n        Runs a script using SchemioScript language "),i("a",{staticClass:"link",attrs:{target:"_blank",href:"https://github.com/ishubin/schemio/blob/master/docs/Scripting.md"}},[e._v("(documentation)")])])}],!1,null,null,null).exports;var Oe=i(8197);function De(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Be(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?De(Object(i),!0).forEach((function(t){Le(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):De(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Le(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Re=!0,Ne="infinite-loop",Ze="A Schemio script expression. In animation mode this script is being executed on every animation frame",Fe={name:"Script",description:"Runs user defined script using SchemioScript language.",args:{initScript:{name:"Init script",type:"script",value:"",description:"\nA script that runs before the start of animation. It is only invoked in animation mode.\n",depends:{animated:!0}},script:{name:"Script",type:"script",value:"",description:Ze},endScript:{name:"End Script",type:"script",value:"",description:Ze,depends:{animated:!0}},animated:{name:"Animated",type:"boolean",value:!1,description:'Script is called multiple times for the duration of the animation. It has access to "t" variable (start from 0, ends at 1) which represents the relative animation time'},animationType:{name:"Animation type",type:"choice",value:"animation",options:["animation",Ne],depends:{animated:!0}},animationDuration:{name:"Animation duration (sec)",type:"number",value:.5,depends:{animated:!0,animationType:"animation"}},transition:{name:"Transition",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0,animationType:"animation"}},inBackground:{name:"In Background",type:"boolean",value:!1,depends:{animated:!0},description:"Play animation in background without blocking invokation of other actions"}},editorComponent:$e,argsToShortString:e=>((e.initScript||"")+(e.script||"")).trim()||"edit script...",precompileItemScript(e,t){const i=Ue(t);i&&(e.args||(e.args={}),e.args.compiledScripts||(e.args.compiledScripts={}),e.args.compiledScripts[t]=i)},init(e,t,i,n){this.precompileItemScript(e,t.script),t.initScript&&this.precompileItemScript(e,t.initScript),t.endScript&&this.precompileItemScript(e,t.endScript)},execute(e,t,i,n,o,a,l,c){if(!e.args||!e.args.compiledScripts)return void o();const d=e.args.compiledScripts[t.script];if(!d)return void o();const u=e.args.compiledScripts[t.initScript],p=e.args.compiledScripts[t.endScript],m=ze(e,i,n);u&&u.evalNode(m);let f=!0;const g=()=>f,v=e=>{t.animationType===Ne?m.set("deltaTime",Math.min(.1,e)):m.set("t",e),m.set("getEventName",(()=>l)),m.set("getEventArg",(e=>Array.isArray(c)&&e<c.length?c[e]:null)),m.set("stop",(()=>{f=!1})),d.evalNode(m)},y=()=>{p&&p.evalNode(m)};if(t.animated){if(t.animationType===Ne){const n=new He(e,t,i,o,v,y,g);(0,r.oK)(i.editorId,n,e.id,"script-infinite-loop-"+h.Z.stringHash(t.script))}else(0,r.oK)(i.editorId,new s.ZP({durationMillis:1e3*t.animationDuration,animationType:t.transition,init(){},update(e){v(e)},destroy(){try{y()}catch(e){console.error(e)}t.inBackground||o()}}),e.id,this.name+h.Z.stringHash(t.script));t.inBackground&&o()}else{try{v(0)}catch(e){console.error(`Failed executing item script: ${t.script}`,e)}o()}}};function je(e,t,i){if(!e)return null;const n=()=>{o.Z.item.changed.specific.$emit(t.editorId,e.id)},r=e=>t=>{const i=parseFloat(t);isNaN(i)||(e(i),n())},s=i=>r=>{const s=parseFloat(r);isNaN(s)||(i(s),n(),t.updateChildTransforms(e),t.readjustItemAndDescendants(e.id,Re))},a=(t,i)=>{e&&e.textSlots&&e.textSlots.hasOwnProperty(t)&&(i(e.textSlots[t]),n())},l={getId:()=>e.id,getName:()=>e.name,setVar(t,i){e.args||(e.args={}),e.args.customVars||(e.args.customVars={}),e.args.customVars[t]=i},getVar:(t,i)=>e.args&&e.args.customVars&&e.args.customVars.hasOwnProperty(t)?e.args.customVars[t]:i,getPosX:()=>e.area.x,getPosY:()=>e.area.y,getPos:()=>new Se.O(e.area.x,e.area.y),getWidth:()=>e.area.w,getHeight:()=>e.area.h,getAngle:()=>e.area.r,getScaleX:()=>e.area.sx,getScaleY:()=>e.area.sy,worldPoint:(t,i)=>Se.O.fromPoint((0,w.rs)(t,i,e)),localPoint:(t,i)=>Se.O.fromPoint((0,w.N5)(t,i,e)),getArg:(t,i)=>e.args&&e.args.hasOwnProperty(t)?e.args[t]:i,setArg:(t,i)=>{e.args||(e.args={}),e.args[t]=i},matchWorld:(i,r,s,o)=>{const a=h.Z.findTranslationMatchingWorldPoint(s,o,i,r,e.area,e.meta.transformMatrix);a&&(e.area.x=a.x,e.area.y=a.y,n(),t.updateChildTransforms(e),t.readjustItemAndDescendants(e.id,Re))},getWorldPos:()=>Se.O.fromPoint((0,w.rs)(e.area.px*e.area.w,e.area.py*e.area.h,e)),setWorldPos:(i,r)=>{let s=i,o=r;if(i instanceof Se.O){const e=i;s=e.x,o=e.y}const a=h.Z.findTranslationMatchingWorldPoint(s,o,e.area.px*e.area.w,e.area.py*e.area.h,e.area,e.meta.transformMatrix);a&&(e.area.x=a.x,e.area.y=a.y,n(),t.updateChildTransforms(e),t.readjustItemAndDescendants(e.id,Re))},setPosX:s((t=>e.area.x=t)),setPosY:s((t=>e.area.y=t)),setPos:i=>{if(!i instanceof Se.O)throw new Error("setPos support only vector");e.area.x=i.x,e.area.y=i.y,n(),t.updateChildTransforms(e),t.readjustItemAndDescendants(e.id,Re)},setWidth:s((t=>e.area.w=t)),setHeight:s((t=>e.area.h=t)),setScaleX:s((t=>e.area.sx=t)),setScaleY:s((t=>e.area.sy=t)),getOpacity:()=>e.opacity,getSelfOpacity:()=>e.selfOpacity,isVisible:()=>e.visible&&0!==e.opacity,setOpacity:r((t=>e.opacity=t)),setSelfOpacity:r((t=>e.SelfOpacity=t)),getText:t=>{if(!e.textSlots||!e.textSlots[t])return"";const i=e.textSlots[t].text||"";return(0,ke.v)(i.trim())},setText:(e,t)=>a(e,(e=>e.text=(0,ke.Z)(""+t))),setTextColor:(e,t)=>a(e,(e=>e.color=""+t)),setTextSize:(e,t)=>{isNaN(t)||a(e,(e=>e.fontSize=t))},show(){e.visible=!0,n()},hide(){e.visible=!1,n()},sendEvent(t,...n){i.emitItemEvent(e.id,t,...n)},sendEventToChildren(t,...n){le(e,t,i,n)},sendEventToParent(n,...r){oe(e,n,i,t,r)},findChildItemByName:n=>je(function(e,t){if(!e||!Array.isArray(e.childItems))return null;let i=[].concat(e.childItems);for(;i.length>0;){const e=i.shift();if(!e)return null;if(e.name===t)return e;Array.isArray(e.childItems)&&(i=i.concat(e.childItems))}return null}(e,n),t,i),findChildItemsByTag(n){const r=function(e,t){if(!e||!Array.isArray(e.childItems))return[];let i=[].concat(e.childItems);const n=[];for(;i.length>0;){const e=i.shift();if(!e)return n;Array.isArray(e.tags)&&e.tags.findIndex((e=>e===t))>=0&&n.push(e),Array.isArray(e.childItems)&&(i=i.concat(e.childItems))}return n}(e,n);return new Oe.a(...r.map((e=>je(e,t,i))))},distanceToItem:t=>function(e,t){const i=(0,w.rs)(e.area.px*e.area.w,e.area.py*e.area.h,e),n=(0,w.rs)(t.area.px*t.area.w,t.area.py*t.area.h,t);return h.Z.distanceBetweenPoints(i.x,i.y,n.x,n.y)}(e,t),getValue:()=>e.args&&e.args.hasOwnProperty("value")?e.args.value:0,setValue(i){e.args||(e.args={}),e.args.value=i,o.Z.item.userEvent.$emit(t.editorId,e.id,he.Z.standardEvents.valueChange.id,i),n()},duplicate(){const n=t.cloneItems([e])[0],r=e.meta.parentId?t.findItemById(e.meta.parentId):null;return r?r.childItems.push(n):t.addItem(n),t.reindexItems(),(0,ie.Hp)([n],(e=>{e.behavior&&Array.isArray(e.behavior.events)&&e.behavior.events.forEach((n=>{const r=(0,de.z)(t,e,n.actions);n.event===he.Z.standardEvents.init.id?r(i,i.revision,e.id,he.Z.standardEvents.init.id):i.subscribeItemEvent(e.id,n.event,r)}))})),je(n,t,i)},remove(){t.deleteItem(e),i.clearEventsForItem(e.id)},mount(i){i?t.remountItemInsideOtherItemAtTheBottom(e.id,i.getId()):t.remountItemToRoot(e.id)},mountRoot:()=>t.remountItemToRoot(e.id),getOutline:()=>function(e,t){const i=t.getSvgOutlineOfItem(e);return i?{getLength:()=>i.getTotalLength(),getWorldPointAtLength(t){const n=i.getPointAtLength(t);return Se.O.fromPoint((0,w.rs)(n.x,n.y,e))}}:null}(e,t)},c=v.Z.find(e.shape);return c&&c.scriptFunctions?Be(Be({},l),c.scriptFunctions(t.editorId,t,e)):l}function ze(e,t,i){const n=je(e,t,i);return new Pe.s(Be({findParent:()=>{let n=null;return e&&e.meta&&(n=e.meta.parentId),je(t.findItemById(n),t,i)},findItemById:e=>je(t.findItemById(e),t,i),findItemByName:e=>je(t.findItemByName(e),t,i)},n))}function Ue(e){try{return(0,Ce.BJ)(e)}catch(t){return console.error("Failed to parse item script: "+e,t),null}}class He extends g.Z{constructor(e,t,i,n,r,s,o){super(),this.item=e,this.args=t,this.schemeContainer=i,this.resultCallback=n,this.scriptExecutor=r,this.onDestroy=s,this.shouldPlayCallback=o}init(){return this.shouldPlayCallback()}play(e){try{this.scriptExecutor(Math.min(100,e)/1e3)}catch(e){return console.error(e),!1}return this.shouldPlayCallback()}destroy(){if(this.onDestroy)try{this.onDestroy()}catch(e){console.error(e)}this.args.inBackground||this.resultCallback()}}var qe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"condition-function-editor"},[e._m(0),e._v(" "),i("ScriptEditor",{attrs:{value:e.args.expression,height:100},on:{changed:function(t){return e.emitArgChange("expression",arguments[0])}}}),e._v(" "),i("table",[i("tr",[i("td",[e._v("If true:")]),e._v(" "),i("td",[i("Dropdown",{attrs:{options:e.conditionBranchOptions,"auto-focus-search":"send-event"!==e.args.success,inline:!0,borderless:!1},on:{selected:e.onSuccessSelected}},[i("i",{class:e.toIcon(e.args.success)}),e._v(" "),i("span",[e._v(" "+e._s(e._f("toPrettyName")(e.args.success))+" ")])]),e._v(" "),"send-event"===e.args.success?i("input",{ref:"sendEventInputSuccess",staticClass:"condition-function-send-event",attrs:{type:"text"},domProps:{value:e.args.successEvent}}):e._e()],1)]),e._v(" "),i("tr",[i("td",[e._v("Else:")]),e._v(" "),i("td",[i("Dropdown",{attrs:{options:e.conditionBranchOptions,"auto-focus-search":"send-event"!==e.args.fail,inline:!0,borderless:!1},on:{selected:e.onFailSelected}},[i("i",{class:e.toIcon(e.args.fail)}),e._v(" "),i("span",[e._v(" "+e._s(e._f("toPrettyName")(e.args.fail))+" ")])]),e._v(" "),"send-event"===e.args.fail?i("input",{ref:"sendEventInputFail",staticClass:"condition-function-send-event",attrs:{type:"text"},domProps:{value:e.args.failEvent}}):e._e()],1)])])],1)};qe._withStripped=!0;var We=i(2373);function Ve(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ge(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(i),!0).forEach((function(t){Ke(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ve(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Ke(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Je={pass:"Pass","skip-next":"Skip next","break-event":"Break event","send-event":"Send event"},Ye={pass:"fa-solid fa-check","skip-next":"fa-solid fa-forward-step","break-event":"fa-solid fa-xmark","send-event":"fas fa-bell"},Qe={props:{editorId:{type:String},args:{type:Object}},components:{ScriptEditor:Ae.Z,Dropdown:We.Z},data:()=>({conditionBranchOptions:[{id:"pass",description:"Proceeds to next action in the current event"},{id:"skip-next",description:"Skips next action in the current event"},{id:"break-event",description:"Stops execution of remaining actions for the current event"},{id:"send-event",description:"Sends event to the same item"}].map((e=>Ge(Ge({},e),{},{name:Je[e.id],iconClass:Ye[e.id]})))}),methods:{emitArgChange(e,t){this.$emit("argument-changed",e,t)},toIcon:e=>Ye[e],onSuccessSelected(e){this.$emit("argument-changed","success",e.id),"send-event"===e.id&&this.$nextTick((()=>{this.$refs.sendEventInputSuccess.focus()}))},onFailSelected(e){this.$emit("argument-changed","fail",e.id),"send-event"===e.id&&this.$nextTick((()=>{this.$refs.sendEventInputFail.focus()}))}},filters:{toPrettyName:e=>Je[e]}},Xe=["pass","skip-next","break-event","send-event"],et={name:"Condition",description:"Checkes whether user defined expressions returns true and executes specified command",args:{expression:{name:"Expression",type:"script",value:"",description:"A Schemio script expression that is executed as part of condition"},success:{name:"If true",type:"choice",value:"pass",options:Xe},successEvent:{name:"Success event",type:"string",value:"",depends:{success:"send-event"},description:"Sends an event to itself if condition is true"},fail:{name:"Else",type:"choice",value:"skip-next",options:Xe},failEvent:{name:"Else event",type:"string",value:"",depends:{success:"send-event"},description:"Sends an event to itself if condition is false"}},editorComponent:(0,Me.Z)(Qe,qe,[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"label"},[e._v("\n        Runs a script using SchemioScript language "),i("a",{staticClass:"link",attrs:{target:"_blank",href:"https://github.com/ishubin/schemio/blob/master/docs/Scripting.md"}},[e._v("(documentation)")]),e._v("\n        and evaluates the last executed operation as part of condition\n    ")])}],!1,null,null,null).exports,argsToShortString(e){const t="send-event"===e.success?`send-event "${e.successEvent}"`:e.success,i="send-event"===e.fail?`send-event "${e.failEvent}"`:e.fail;return`${t} if ${e.expression} else ${i}`},executeWithBranching(e,t,i,n,r){const s=Ue(t.expression);if(!s)return void r({skip:0,break:!1});const o=(t,i)=>{"pass"===t?r({skip:0,break:!1}):"skip-next"===t?r({skip:1,break:!1}):"break-event"===t?r({skip:0,break:!0}):"send-event"===t?(n.emitItemEvent(e.id,i),r({skip:0,break:!1})):r({skip:0,break:!1})},a=ze(e,i,n);try{s.evalNode(a)?o(t.success,t.successEvent):o(t.fail,t.failEvent)}catch(e){return console.error(e),void r({skip:0,break:!1})}}};var tt=i(6012),it=i(8270);const nt={name:"Morph",description:"Morphs item into a destination item",args:{referenceItem:{name:"Reference Item",type:"element",value:null,description:"The item to which it should morph"},alignItems:{name:"Align items",type:"boolean",value:!1,description:"Aligns item position with reference item"},recursive:{name:"Morph child items",type:"boolean",value:!0,description:"Identify items with the same name and hierarchy and apply morphing to them as well"},animationDuration:{name:"Animation duration (sec)",type:"number",value:.5},transition:{name:"Transition",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"]},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions"}},argsToShortString(e,t){if(e.referenceItem){const i=t.findFirstElementBySelector(e.referenceItem);if(i)return i.name}return"..."},execute(e,t,i,n,o){const a=i.findFirstElementBySelector(t.referenceItem);if(!a)return void o();t.inBackground&&o();let l=[st(e,null,a,null,i.editorId,t)];t.recursive&&Array.isArray(e.childItems)&&Array.isArray(a.childItems)&&(l=l.concat(rt(e.childItems,e,a.childItems,a,i.editorId,t)));const c=new s.ZP({durationMillis:1e3*t.animationDuration,animationType:t.transition,init(){},update(e){l.forEach((t=>{t(e)}))},destroy(){t.inBackground||o()}});(0,r.oK)(i.editorId,c,e.id,this.name)}};function rt(e,t,i,n,r,s){const o=new Map,a=new Map;e.forEach((e=>{const t=o.has(e.name)?o.get(e.name)+1:1;o.set(e.name,t),a.set(e.name+"-"+t,e)}));const l=new Map,c=new Map;i.forEach((e=>{const t=l.has(e.name)?l.get(e.name)+1:1;l.set(e.name,t),c.set(e.name+"-"+t,e)}));let h=[];return a.forEach(((e,i)=>{if(!c.has(i))return;const o=c.get(i);h.push(st(e,t,o,n,r,s)),Array.isArray(e.childItems)&&Array.isArray(o.childItems)&&(h=h.concat(rt(e.childItems,t,o.childItems,n,r,s)))})),h}function st(e,t,i,n,r,s){const a=v.Z.find(e.shape),l=v.Z.find(i.shape);if(!a||!l)return()=>{};const c=v.Z.getShapeArgs(a),h=v.Z.getShapeArgs(l),u=[];return(0,d.b0)(c,((t,n)=>{if(!h.hasOwnProperty(n)||h[n].type!==t.type)return;const r=function(e,t,i,n){const r=e.shapeProps[i],s=t.shapeProps[i];if("number"===n.type)return t=>{e.shapeProps[i]=r*(1-t)+s*t};if("color"===n.type){const t=(0,tt.l)(r),n=(0,tt.l)(s);return r=>{e.shapeProps[i]=(0,tt.N)({r:t.r*(1-r)+n.r*r,g:t.g*(1-r)+n.g*r,b:t.b*(1-r)+n.b*r,a:t.a*(1-r)+n.a*r})}}if("advanced-color"===n.type&&"solid"===r.type&&r.type===s.type){const t=(0,tt.l)(r.color),n=(0,tt.l)(s.color);return r=>{e.shapeProps[i]={type:"solid",color:(0,tt.N)({r:t.r*(1-r)+n.r*r,g:t.g*(1-r)+n.g*r,b:t.b*(1-r)+n.b*r,a:t.a*(1-r)+n.a*r})}}}return null}(e,i,n,t);r&&u.push(r)})),u.push(lt(e.opacity,i.opacity,(t=>e.opacity=t))),u.push(lt(e.selfOpacity,i.selfOpacity,(t=>e.selfOpacity=t))),"path"===e.shape&&"path"===i.shape&&u.push(function(e,t,i,n){t||(t=ot),n||(n=ot);const r=[];return i.shapeProps.paths.forEach(((s,o)=>{if(o>=e.shapeProps.paths.length)return;const a=e.shapeProps.paths[o];s.points.forEach(((s,l)=>{l>=a.points.length||r.push(function(e,t,i,n,r,s,o,a){const l=at(e,o,t),c=at(i,a,n);return i=>{const n=l.x*(1-i)+c.x*i,o=l.y*(1-i)+c.y*i,a=(0,w.rs)(n,o,t),h=(0,w.N5)(a.x,a.y,e);h.t=l.t,h.x1=l.x1,h.y1=l.y1,h.x2=l.x2,h.y2=l.y2,h.h=l.h;let d=0,u=0,p=0,m=0;"B"===l.t&&(d=l.x1,u=l.y1,p=l.x2,m=l.y2);let f=0,g=0,v=0,y=0;"B"===c.t&&(f=c.x1,g=c.y1,v=c.x2,y=c.y2),"L"===h.t&&"B"===c.t&&(h.t="B"),"B"===h.t?(h.t="B",h.x1=d*(1-i)+f*i,h.y1=u*(1-i)+g*i,h.x2=p*(1-i)+v*i,h.y2=m*(1-i)+y*i):"A"===l.t&&"A"===c.t&&(h.h=l.h*(1-i)+c.h*i);const x=(0,it.Vk)(h,e.area.w,e.area.h);e.shapeProps.paths[r].points[s].x=x.x,e.shapeProps.paths[r].points[s].y=x.y,e.shapeProps.paths[r].points[s].t=x.t,"B"===x.t?(e.shapeProps.paths[r].points[s].x1=x.x1,e.shapeProps.paths[r].points[s].y1=x.y1,e.shapeProps.paths[r].points[s].x2=x.x2,e.shapeProps.paths[r].points[s].y2=x.y2):"A"===x.t&&(e.shapeProps.paths[r].points[s].h=x.h)}}(e,t,i,n,o,l,a.points[l],s))}))})),e=>{r.forEach((t=>t(e)))}}(e,t,i,n)),"path"!==e.shape&&(t&&n||s.alignItems)&&(u.push(lt(e.area.w,i.area.w,(t=>e.area.w=t))),u.push(lt(e.area.h,i.area.h,(t=>e.area.h=t))),u.push(lt(e.area.x,i.area.x,(t=>e.area.x=t))),u.push(lt(e.area.y,i.area.y,(t=>e.area.y=t))),u.push(lt(e.area.r,i.area.r,(t=>e.area.r=t)))),t=>{u.forEach((e=>e(t))),o.Z.item.changed.specific.$emit(r,e.id)}}const ot={area:{x:0,y:0,w:100,h:100,r:0,px:.5,py:.5,sx:1,sy:1},meta:{parentId:null,ancestorIds:[]}};function at(e,t,i){const n=(0,it.oJ)(t,e.area.w,e.area.h),r=(0,w.rs)(n.x,n.y,e),s=(0,w.N5)(r.x,r.y,i);if(s.t=n.t,"B"===n.t){const t=(0,w.rs)(n.x+n.x1,n.y+n.y1,e),r=(0,w.rs)(n.x+n.x2,n.y+n.y2,e),o=(0,w.N5)(t.x,t.y,i),a=(0,w.N5)(r.x,r.y,i);s.x1=o.x-s.x,s.y1=o.y-s.y,s.x2=a.x-s.x,s.y2=a.y-s.y}else"A"===n.t&&(s.h=n.h);return s}function lt(e,t,i){return n=>{i(e*(1-n)+t*n)}}class ct extends g.Z{constructor(e,t,i,n){super(),this.item=e,this.args=t,this.schemeContainer=i,this.resultCallback=n,this.offset=0,this.time=0}init(){return!0}play(e){return this.time+=e,this.offset-=this.args.speed*e/1e3,this.item.meta.strokeOffset=this.offset,o.Z.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),!(!this.args.infinite&&this.time>1e3*this.args.duration)}destroy(){this.args.inBackground||this.resultCallback()}}const ht={name:"Flow Animation",description:"Animates displacement of a stroke and simulates a flow animation",args:{speed:{name:"Speed",type:"number",value:30,description:"Use negative value if you want the animation to be performed backwards"},duration:{name:"Duration (sec)",type:"number",value:2,depends:{infinite:!1}},infinite:{name:"Infinite animation",type:"boolean",value:!1,description:"Plays animation indefinitely"},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invokation of other actions"}},execute(e,t,i,n,s){e&&(0,r.oK)(i.editorId,new ct(e,t,i,s),e.id,this.name),t.inBackground&&s()}},dt={main:{hide:a,show:l,set:n.Z,zoomToIt:f,_transformScreen:ve,particleEffect:T,crawlEffect:x,flowEffect:ht,drawEffect:xe,blinkEffect:$,loadComponent:ee,destroyComponent:ne,move:D,moveAlongPath:q,moveToItem:L,moveRandomly:V,playFrames:Q,rotate:Z,scale:z,replaceItem:R,stopFramePlayer:X,stopAllAnimations:b,sendEvent:c,sendEventToParent:se,sendEventToChildren:ae,wait:G,toggle:J,untoggle:Y,toggleGroup:re,copyEvents:ue,copyLinks:fe,copyDescription:ge,morph:nt,repeater:pe,stopRepeater:me,sizeWidth:be,sizeHeight:we,script:Fe,condition:et}}},7731:(e,t,i)=>{"use strict";i.d(t,{Z:()=>f,f:()=>m});var n=i(4691),r=i(9737),s=i(3805),o=i(6012),a=i(8595),l=i(3363),c=i(7196);function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach((function(t){u(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function p(e,t,i,n,o){(0,r.oK)(e,new s.ZP({durationMillis:1e3*i.animationDuration,animationType:i.transition,update:o,destroy(){n()}}),t.id,`set-func-${i.field}`)}function m(e){return"number"===e||"color"===e||"advanced-color"===e}const f={name:"Set",args:{field:{name:"Field",type:"text",value:""},value:{name:"Value",type:"any",value:null},animated:{name:"Animated",type:"boolean",value:!1},animationDuration:{name:"Animation duration (sec)",type:"number",value:.5,depends:{animated:!0}},transition:{name:"Transition",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,depends:{animated:!0},description:"Play animation in background without blocking invokation of other actions"}},execute(e,t,i,r,s){if(!e||!t.hasOwnProperty("field")||!t.hasOwnProperty("value"))return void s();const h=(0,c.u2)(l.Z.find(e.shape),t.field);t.animated&&h&&m(h.type)?(t.inBackground&&s(),function(e,t,i,r,s){const l=n.Z.getObjectProperty(i,r.field);if("number"===t.type)p(e,i,r,s,(t=>{n.Z.setObjectProperty(i,r.field,l*(1-t)+r.value*t),a.Z.item.changed.specific.$emit(e,i.id)}));else if("color"===t.type){const t=(0,o.l)(l),c=(0,o.l)(r.value);p(e,i,r,s,(s=>{n.Z.setObjectProperty(i,r.field,(0,o.N)({r:t.r*(1-s)+c.r*s,g:t.g*(1-s)+c.g*s,b:t.b*(1-s)+c.b*s,a:t.a*(1-s)+c.a*s})),a.Z.item.changed.specific.$emit(e,i.id)}))}else"advanced-color"===t.type&&(function(e,t,i,r,s){if("object"!=typeof i.value||"object"!=typeof s)return!1;if("solid"===i.value.type&&"solid"===s.type){const l=(0,o.l)(s.color),c=(0,o.l)(i.value.color);return p(e,t,i,r,(r=>{n.Z.setObjectProperty(t,i.field,{type:"solid",color:(0,o.N)({r:l.r*(1-r)+c.r*r,g:l.g*(1-r)+c.g*r,b:l.b*(1-r)+c.b*r,a:l.a*(1-r)+c.a*r})}),a.Z.item.changed.specific.$emit(e,t.id)})),!0}return"gradient"===i.value.type&&"gradient"===s.type&&function(e,t,i,r,s,l){if(s.colors.length!==l.colors.length)return!1;n.Z.setObjectProperty(t,i.field,{type:"gradient",gradient:d(d({},s),{},{type:l.type})});const c=n.Z.getObjectProperty(t,i.field),h=s.direction,u=[];for(let e=0;e<l.colors.length;e++)u[e]={start:(0,o.l)(s.colors[e].c),startPos:s.colors[e].p,end:(0,o.l)(l.colors[e].c),endPos:l.colors[e].p};return p(e,t,i,r,(i=>{c.gradient.direction=h*(1-i)+l.direction*i,c.gradient.colors.forEach(((e,t)=>{e.c=(0,o.N)({r:u[t].start.r*(1-i)+u[t].end.r*i,g:u[t].start.g*(1-i)+u[t].end.g*i,b:u[t].start.b*(1-i)+u[t].end.b*i,a:u[t].start.a*(1-i)+u[t].end.a*i}),e.p=u[t].startPos*(1-i)+u[t].endPos*i})),a.Z.item.changed.specific.$emit(e,t.id)})),!0}(e,t,i,r,s.gradient,i.value.gradient)}(e,i,r,s,l)||(n.Z.setObjectProperty(i,r.field,r.value),a.Z.item.changed.specific.$emit(e,i.id)))}(i.editorId,h,e,t,(()=>{t.inBackground||s()}))):(n.Z.setObjectProperty(e,t.field,t.value),"visible"===t.field&&i.updateVisibility(e),a.Z.item.changed.specific.$emit(i.editorId,e.id),s())}}},4691:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var n=i(6234),r=i(2300);function s(e){return e<10?"0"+e:""+e}function o(e){let t={};return(0,n.Ed)(e,((e,i)=>{"childItems"===i?t[i]=(0,n.UI)(e,o):"meta"!==i&&"_childItems"!==i&&(t[i]=e)})),t}function a(e){return null==e?null:JSON.parse(JSON.stringify(e))}function l(e,t,i,n){let r=null;r=Array.isArray(t)?t:t.split(".");let s=e,o=0;for(;o<r.length;){const e=r[o].trim();if(!e)return;if(!(o<r.length-1))return void(n&&s.hasOwnProperty(e)?delete s[e]:s[e]=i);if(s.hasOwnProperty(e)||(s[e]={}),s=s[e],"object"!=typeof s)return;o+=1}}function c(e,t,i){const n=Math.cos(i*Math.PI/180),r=Math.sin(i*Math.PI/180);return{x:e*n-t*r,y:e*r+t*n}}const h={formatDateAndTime:function(e){var t=new Date(e);return`${s(t.getFullYear())}.${s(t.getMonth())}.${s(t.getDate())} ${s(t.getHours())}:${s(t.getMinutes())}`},clone:a,extendObject:function e(t,i){return(0,n.Ed)(i,((i,n)=>{t.hasOwnProperty(n)?"object"==typeof i&&e(t[n],i):t[n]=a(i)})),t},sanitizeScheme:function(e){const t=(0,n.UI)(e.items,o);return{id:e.id,name:e.name,description:e.description,tags:e.tags,modifiedTime:e.modifiedTime,items:t,style:e.style||{}}},getObjectProperty:function(e,t){if(e){let i=null;i=Array.isArray(t)?t:t.split(".");let n=e,r=0;for(;r<i.length;){const e=i[r].trim();if(!e)return;if(r<i.length-1){if(n=n[e],"object"!=typeof n)return}else if(n.hasOwnProperty(e))return n[e];r+=1}}},setObjectProperty:function(e,t,i){l(e,t,i,!1)},deleteObjectProperty:function(e,t){l(e,t,null,!0)},rotateVector:c,rotatePointAroundCenter:function(e,t,i,n,r){const s=c(e-n,t-r,i);return{x:n+s.x,y:r+s.y}},enumerateConstants:function(e){const t=[];for(let i in e)e.hasOwnProperty(i)&&i===i.toUpperCase()&&t.push(e[i]);return t},domHasParentNode:function e(t,i){return!!i(t)||!!t.parentElement&&e(t.parentElement,i)},domFindAncestorByClassUntil:function e(t,i,n){return t.classList.contains(i)?t:n&&n(t)?null:t.parentElement?e(t.parentElement,i,n):null},forceDownload:function(e,t,i){const n=`data:${t};base64,${(0,r.cv)(i)}`,s=document.createElement("a");document.body.appendChild(s);try{s.href=n,s.download=e,s.click()}catch(e){console.error(e)}setTimeout((()=>document.body.removeChild(s)),100)},equals:function e(t,i){const n=typeof t;if(n!==typeof i)return!1;if(Array.isArray(t)){if(t.length!==i.length)return!1;for(let n=0;n<t.length;n++)if(!e(t[n],i[n]))return!1;return!0}if("object"===n){for(let n in t)if(t.hasOwnProperty(n)&&!e(t[n],i[n]))return!1;for(let e in i)if(!t.hasOwnProperty(e))return!1;return!0}return t===i},hashString:function(e){let t=0;if(0==e.length)return t;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return t}}},9996:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===i}(e)}(e)},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?a((i=e,Array.isArray(i)?[]:{}),e,t):e;var i}function r(e,t,i){return e.concat(t).map((function(e){return n(e,i)}))}function s(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function o(e,t){try{return t in e}catch(e){return!1}}function a(e,i,l){(l=l||{}).arrayMerge=l.arrayMerge||r,l.isMergeableObject=l.isMergeableObject||t,l.cloneUnlessOtherwiseSpecified=n;var c=Array.isArray(i);return c===Array.isArray(e)?c?l.arrayMerge(e,i,l):function(e,t,i){var r={};return i.isMergeableObject(e)&&s(e).forEach((function(t){r[t]=n(e[t],i)})),s(t).forEach((function(s){(function(e,t){return o(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,s)||(o(e,s)&&i.isMergeableObject(t[s])?r[s]=function(e,t){if(!t.customMerge)return a;var i=t.customMerge(e);return"function"==typeof i?i:a}(s,i)(e[s],t[s],i):r[s]=n(t[s],i))})),r}(e,i,l):n(i,l)}a.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,i){return a(e,i,t)}),{})};var l=a;e.exports=l},9960:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0,function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"}(i=t.ElementType||(t.ElementType={})),t.isTag=function(e){return e.type===i.Tag||e.type===i.Script||e.type===i.Style},t.Root=i.Root,t.Text=i.Text,t.Directive=i.Directive,t.Comment=i.Comment,t.Script=i.Script,t.Style=i.Style,t.Tag=i.Tag,t.CDATA=i.CDATA,t.Doctype=i.Doctype},1102:(e,t,i)=>{"use strict";var n=i(6291),r=s(Error);function s(e){return t.displayName=e.displayName||e.name,t;function t(t){return t&&(t=n.apply(null,arguments)),new e(t)}}e.exports=r,r.eval=s(EvalError),r.range=s(RangeError),r.reference=s(ReferenceError),r.syntax=s(SyntaxError),r.type=s(TypeError),r.uri=s(URIError),r.create=s},6291:e=>{!function(){var t;function i(e){for(var t,i,n,r,s=1,o=[].slice.call(arguments),a=0,l=e.length,c="",h=!1,d=!1,u=function(){return o[s++]},p=function(){for(var i="";/\d/.test(e[a]);)i+=e[a++],t=e[a];return i.length>0?parseInt(i):null};a<l;++a)if(t=e[a],h)switch(h=!1,"."==t?(d=!1,t=e[++a]):"0"==t&&"."==e[a+1]?(d=!0,t=e[a+=2]):d=!0,r=p(),t){case"b":c+=parseInt(u(),10).toString(2);break;case"c":c+="string"==typeof(i=u())||i instanceof String?i:String.fromCharCode(parseInt(i,10));break;case"d":c+=parseInt(u(),10);break;case"f":n=String(parseFloat(u()).toFixed(r||6)),c+=d?n:n.replace(/^0/,"");break;case"j":c+=JSON.stringify(u());break;case"o":c+="0"+parseInt(u(),10).toString(8);break;case"s":c+=u();break;case"x":c+="0x"+parseInt(u(),10).toString(16);break;case"X":c+="0x"+parseInt(u(),10).toString(16).toUpperCase();break;default:c+=t}else"%"===t?h=!0:c+=t;return c}(t=e.exports=i).format=i,t.vsprintf=function(e,t){return i.apply(null,[e].concat(t))},"undefined"!=typeof console&&"function"==typeof console.log&&(t.printf=function(){console.log(i.apply(null,arguments))})}()},5958:(e,t)=>{var i=Object.defineProperty;i(t,"__esModule",{value:!0}),((e,t)=>{for(var n in t)i(e,n,{get:t[n],enumerable:!0})})(t,{GIFEncoder:()=>I,applyPalette:()=>y,default:()=>M,nearestColor:()=>S,nearestColorIndex:()=>P,nearestColorIndexWithDistance:()=>k,prequantize:()=>v,quantize:()=>p,snapColorsToPalette:()=>w});var n={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function r(e=256){let t=0,i=new Uint8Array(e);return{get buffer(){return i.buffer},reset(){t=0},bytesView:()=>i.subarray(0,t),bytes:()=>i.slice(0,t),writeByte(e){n(t+1),i[t]=e,t++},writeBytes(e,r=0,s=e.length){n(t+s);for(let n=0;n<s;n++)i[t++]=e[n+r]},writeBytesView(e,r=0,s=e.byteLength){n(t+s),i.set(e.subarray(r,r+s),t),t+=s}};function n(e){var n=i.length;if(n>=e)return;e=Math.max(e,n*(n<1048576?2:1.125)>>>0),0!=n&&(e=Math.max(e,256));const r=i;i=new Uint8Array(e),t>0&&i.set(r.subarray(0,t),0)}}var s=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],o=function(e,t,i,n,o=r(512),a=new Uint8Array(256),l=new Int32Array(5003),c=new Int32Array(5003)){const h=l.length,d=Math.max(2,n);a.fill(0),c.fill(0),l.fill(-1);let u=0,p=0;const m=d+1,f=m;let g=!1,v=f,y=(1<<v)-1;const x=1<<m-1,b=x+1;let w=x+2,C=0,P=i[0],k=0;for(let e=h;e<65536;e*=2)++k;k=8-k,o.writeByte(d),I(x);const S=i.length;for(let e=1;e<S;e++)e:{const t=i[e],n=(t<<12)+P;let r=t<<k^P;if(l[r]===n){P=c[r];break e}const s=0===r?1:h-r;for(;l[r]>=0;)if(r-=s,r<0&&(r+=h),l[r]===n){P=c[r];break e}I(P),P=t,w<4096?(c[r]=w++,l[r]=n):(l.fill(-1),w=x+2,g=!0,I(x))}return I(P),I(b),o.writeByte(0),o.bytesView();function I(e){for(u&=s[p],p>0?u|=e<<p:u=e,p+=v;p>=8;)a[C++]=255&u,C>=254&&(o.writeByte(C),o.writeBytesView(a,0,C),C=0),u>>=8,p-=8;if((w>y||g)&&(g?(v=f,y=(1<<v)-1,g=!1):(++v,y=12===v?1<<v:(1<<v)-1)),e==b){for(;p>0;)a[C++]=255&u,C>=254&&(o.writeByte(C),o.writeBytesView(a,0,C),C=0),u>>=8,p-=8;C>0&&(o.writeByte(C),o.writeBytesView(a,0,C),C=0)}}};function a(e,t,i){return e<<8&63488|t<<2&992|i>>3}function l(e,t,i,n){return e>>4|240&t|(240&i)<<4|(240&n)<<8}function c(e,t,i){return e>>4<<8|240&t|i>>4}function h(e,t,i){return e<t?t:e>i?i:e}function d(e){return e*e}function u(e,t,i){var n=0,r=1e100;const s=e[t],o=s.cnt,a=s.ac,l=s.rc,c=s.gc,h=s.bc;for(var u=s.fw;0!=u;u=e[u].fw){const t=e[u],s=t.cnt,m=o*s/(o+s);if(!(m>=r)){var p=0;i&&(p+=m*d(t.ac-a))>=r||(p+=m*d(t.rc-l))>=r||(p+=m*d(t.gc-c))>=r||(p+=m*d(t.bc-h))>=r||(r=p,n=u)}}s.err=r,s.nn=n}function p(e,t,i={}){const{format:n="rgb565",clearAlpha:r=!0,clearAlphaColor:s=0,clearAlphaThreshold:o=0,oneBitAlpha:p=!1}=i;if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");const f=new Uint32Array(e.buffer);let g=!1!==i.useSqrt;const v="rgba4444"===n,y=function(e,t){const i=new Array("rgb444"===t?4096:65536),n=e.length;if("rgba4444"===t)for(let t=0;t<n;++t){const n=e[t],r=n>>24&255,s=n>>16&255,o=n>>8&255,a=255&n,c=l(a,o,s,r);let h=c in i?i[c]:i[c]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};h.rc+=a,h.gc+=o,h.bc+=s,h.ac+=r,h.cnt++}else if("rgb444"===t)for(let t=0;t<n;++t){const n=e[t],r=n>>16&255,s=n>>8&255,o=255&n,a=c(o,s,r);let l=a in i?i[a]:i[a]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};l.rc+=o,l.gc+=s,l.bc+=r,l.cnt++}else for(let t=0;t<n;++t){const n=e[t],r=n>>16&255,s=n>>8&255,o=255&n,l=a(o,s,r);let c=l in i?i[l]:i[l]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};c.rc+=o,c.gc+=s,c.bc+=r,c.cnt++}return i}(f,n),x=y.length,b=x-1,w=new Uint32Array(x+1);for(var C=0,P=0;P<x;++P){const e=y[P];if(null!=e){var k=1/e.cnt;v&&(e.ac*=k),e.rc*=k,e.gc*=k,e.bc*=k,y[C++]=e}}var S,I,A;for(d(t)/C<.022&&(g=!1),P=0;P<C-1;++P)y[P].fw=P+1,y[P+1].bk=P,g&&(y[P].cnt=Math.sqrt(y[P].cnt));for(g&&(y[P].cnt=Math.sqrt(y[P].cnt)),P=0;P<C;++P){u(y,P,!1);var _=y[P].err;for(I=++w[0];I>1&&!(y[S=w[A=I>>1]].err<=_);I=A)w[I]=S;w[I]=P}var E=C-t;for(P=0;P<E;){for(var T;;){var M=w[1];if((T=y[M]).tm>=T.mtm&&y[T.nn].mtm<=T.tm)break;for(T.mtm==b?M=w[1]=w[w[0]--]:(u(y,M,!1),T.tm=P),_=y[M].err,I=1;(A=I+I)<=w[0]&&(A<w[0]&&y[w[A]].err>y[w[A+1]].err&&A++,!(_<=y[S=w[A]].err));I=A)w[I]=S;w[I]=M}var $=y[T.nn],O=T.cnt,D=$.cnt;k=1/(O+D),v&&(T.ac=k*(O*T.ac+D*$.ac)),T.rc=k*(O*T.rc+D*$.rc),T.gc=k*(O*T.gc+D*$.gc),T.bc=k*(O*T.bc+D*$.bc),T.cnt+=$.cnt,T.mtm=++P,y[$.bk].fw=$.fw,y[$.fw].bk=$.bk,$.mtm=b}let B=[];var L=0;for(P=0;;++L){let e=h(Math.round(y[P].rc),0,255),t=h(Math.round(y[P].gc),0,255),i=h(Math.round(y[P].bc),0,255),n=255;v&&(n=h(Math.round(y[P].ac),0,255),p&&(n=n<=("number"==typeof p?p:127)?0:255),r&&n<=o&&(e=t=i=s,n=0));const a=v?[e,t,i,n]:[e,t,i];if(m(B,a)||B.push(a),0==(P=y[P].fw))break}return B}function m(e,t){for(let i=0;i<e.length;i++){const n=e[i];let r=n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2],s=!(n.length>=4&&t.length>=4)||n[3]===t[3];if(r&&s)return!0}return!1}function f(e,t){var i,n=0;for(i=0;i<e.length;i++){const r=e[i]-t[i];n+=r*r}return n}function g(e,t){return t>1?Math.round(e/t)*t:e}function v(e,{roundRGB:t=5,roundAlpha:i=10,oneBitAlpha:n=null}={}){const r=new Uint32Array(e.buffer);for(let e=0;e<r.length;e++){const s=r[e];let o=s>>24&255,a=s>>16&255,l=s>>8&255,c=255&s;o=g(o,i),n&&(o=o<=("number"==typeof n?n:127)?0:255),c=g(c,t),l=g(l,t),a=g(a,t),r[e]=o<<24|a<<16|l<<8|c<<0}}function y(e,t,i="rgb565"){if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(t.length>256)throw new Error("applyPalette() only works with 256 colors or less");const n=new Uint32Array(e.buffer),r=n.length,s="rgb444"===i?4096:65536,o=new Uint8Array(r),h=new Array(s);if("rgba4444"===i)for(let e=0;e<r;e++){const i=n[e],r=i>>24&255,s=i>>16&255,a=i>>8&255,c=255&i,d=l(c,a,s,r),u=d in h?h[d]:h[d]=x(c,a,s,r,t);o[e]=u}else{const e="rgb444"===i?c:a;for(let i=0;i<r;i++){const r=n[i],s=r>>16&255,a=r>>8&255,l=255&r,c=e(l,a,s),d=c in h?h[c]:h[c]=b(l,a,s,t);o[i]=d}}return o}function x(e,t,i,n,r){let s=0,o=1e100;for(let a=0;a<r.length;a++){const l=r[a];let c=C(l[3]-n);c>o||(c+=C(l[0]-e),c>o||(c+=C(l[1]-t),c>o||(c+=C(l[2]-i),c>o||(o=c,s=a))))}return s}function b(e,t,i,n){let r=0,s=1e100;for(let o=0;o<n.length;o++){const a=n[o];let l=C(a[0]-e);l>s||(l+=C(a[1]-t),l>s||(l+=C(a[2]-i),l>s||(s=l,r=o)))}return r}function w(e,t,i=5){if(!e.length||!t.length)return;const n=e.map((e=>e.slice(0,3))),r=i*i,s=e[0].length;for(let i=0;i<t.length;i++){let o=t[i];o=o.length<s?[o[0],o[1],o[2],255]:o.length>s?o.slice(0,3):o.slice();const a=k(n,o.slice(0,3),f),l=a[0],c=a[1];c>0&&c<=r&&(e[l]=o)}}function C(e){return e*e}function P(e,t,i=f){let n=1/0,r=-1;for(let s=0;s<e.length;s++){const o=i(t,e[s]);o<n&&(n=o,r=s)}return r}function k(e,t,i=f){let n=1/0,r=-1;for(let s=0;s<e.length;s++){const o=i(t,e[s]);o<n&&(n=o,r=s)}return[r,n]}function S(e,t,i=f){return e[P(e,t,i)]}function I(e={}){const{initialCapacity:t=4096,auto:i=!0}=e,s=r(t),a=new Uint8Array(256),l=new Int32Array(5003),c=new Int32Array(5003);let h=!1;return{reset(){s.reset(),h=!1},finish(){s.writeByte(n.trailer)},bytes:()=>s.bytes(),bytesView:()=>s.bytesView(),get buffer(){return s.buffer},get stream(){return s},writeHeader:d,writeFrame(e,t,n,r={}){const{transparent:u=!1,transparentIndex:p=0,delay:m=0,palette:f=null,repeat:g=0,colorDepth:v=8,dispose:y=-1}=r;let x=!1;if(i?h||(x=!0,d(),h=!0):x=Boolean(r.first),t=Math.max(0,Math.floor(t)),n=Math.max(0,Math.floor(n)),x){if(!f)throw new Error("First frame must include a { palette } option");!function(e,t,i,n,r=8){const s=128|r-1<<4|T(n.length)-1;_(e,t),_(e,i),e.writeBytes([s,0,0])}(s,t,n,f,v),A(s,f),g>=0&&function(e,t){e.writeByte(33),e.writeByte(255),e.writeByte(11),E(e,"NETSCAPE2.0"),e.writeByte(3),e.writeByte(1),_(e,t),e.writeByte(0)}(s,g)}const b=Math.round(m/10);!function(e,t,i,n,r){var s,o;e.writeByte(33),e.writeByte(249),e.writeByte(4),r<0&&(r=0,n=!1),n?(s=1,o=2):(s=0,o=0),t>=0&&(o=7&t),o<<=2;e.writeByte(0|o|s),_(e,i),e.writeByte(r||0),e.writeByte(0)}(s,y,b,u,p);const w=Boolean(f)&&!x;!function(e,t,i,n){if(e.writeByte(44),_(e,0),_(e,0),_(e,t),_(e,i),n){const t=0,i=0,r=T(n.length)-1;e.writeByte(128|t|i|0|r)}else e.writeByte(0)}(s,t,n,w?f:null),w&&A(s,f),function(e,t,i,n,r=8,s,a,l){o(i,n,t,r,e,s,a,l)}(s,e,t,n,v,a,l,c)}};function d(){E(s,"GIF89a")}}function A(e,t){const i=1<<T(t.length);for(let n=0;n<i;n++){let i=[0,0,0];n<t.length&&(i=t[n]),e.writeByte(i[0]),e.writeByte(i[1]),e.writeByte(i[2])}}function _(e,t){e.writeByte(255&t),e.writeByte(t>>8&255)}function E(e,t){for(var i=0;i<t.length;i++)e.writeByte(t.charCodeAt(i))}function T(e){return Math.max(Math.ceil(Math.log2(e)),1)}var M=I},7802:e=>{function t(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(i){var n=e[i];"object"!=typeof n||Object.isFrozen(n)||t(n)})),e}var i=t,n=t;i.default=n;class r{constructor(e){void 0===e.data&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function s(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function o(e,...t){const i=Object.create(null);for(const t in e)i[t]=e[t];return t.forEach((function(e){for(const t in e)i[t]=e[t]})),i}const a=e=>!!e.kind;class l{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=s(e)}openNode(e){if(!a(e))return;let t=e.kind;e.sublanguage||(t=`${this.classPrefix}${t}`),this.span(t)}closeNode(e){a(e)&&(this.buffer+="</span>")}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}class c{constructor(){this.rootNode={children:[]},this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const t={kind:e,children:[]};this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){return"string"==typeof t?e.addText(t):t.children&&(e.openNode(t),t.children.forEach((t=>this._walk(e,t))),e.closeNode(t)),e}static _collapse(e){"string"!=typeof e&&e.children&&(e.children.every((e=>"string"==typeof e))?e.children=[e.children.join("")]:e.children.forEach((e=>{c._collapse(e)})))}}class h extends c{constructor(e){super(),this.options=e}addKeyword(e,t){""!==e&&(this.openNode(t),this.addText(e),this.closeNode())}addText(e){""!==e&&this.add(e)}addSublanguage(e,t){const i=e.root;i.kind=t,i.sublanguage=!0,this.add(i)}toHTML(){return new l(this,this.options).value()}finalize(){return!0}}function d(e){return e?"string"==typeof e?e:e.source:null}const u=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,p="[a-zA-Z]\\w*",m="[a-zA-Z_]\\w*",f="\\b\\d+(\\.\\d+)?",g="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",v="\\b(0b[01]+)",y={begin:"\\\\[\\s\\S]",relevance:0},x={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[y]},b={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[y]},w={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},C=function(e,t,i={}){const n=o({className:"comment",begin:e,end:t,contains:[]},i);return n.contains.push(w),n.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):",relevance:0}),n},P=C("//","$"),k=C("/\\*","\\*/"),S=C("#","$"),I={className:"number",begin:f,relevance:0},A={className:"number",begin:g,relevance:0},_={className:"number",begin:v,relevance:0},E={className:"number",begin:f+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},T={begin:/(?=\/[^/\n]*\/)/,contains:[{className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[y,{begin:/\[/,end:/\]/,relevance:0,contains:[y]}]}]},M={className:"title",begin:p,relevance:0},$={className:"title",begin:m,relevance:0},O={begin:"\\.\\s*"+m,relevance:0};var D=Object.freeze({__proto__:null,MATCH_NOTHING_RE:/\b\B/,IDENT_RE:p,UNDERSCORE_IDENT_RE:m,NUMBER_RE:f,C_NUMBER_RE:g,BINARY_NUMBER_RE:v,RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=function(...e){return e.map((e=>d(e))).join("")}(t,/.*\b/,e.binary,/\b.*/)),o({className:"meta",begin:t,end:/$/,relevance:0,"on:begin":(e,t)=>{0!==e.index&&t.ignoreMatch()}},e)},BACKSLASH_ESCAPE:y,APOS_STRING_MODE:x,QUOTE_STRING_MODE:b,PHRASAL_WORDS_MODE:w,COMMENT:C,C_LINE_COMMENT_MODE:P,C_BLOCK_COMMENT_MODE:k,HASH_COMMENT_MODE:S,NUMBER_MODE:I,C_NUMBER_MODE:A,BINARY_NUMBER_MODE:_,CSS_NUMBER_MODE:E,REGEXP_MODE:T,TITLE_MODE:M,UNDERSCORE_TITLE_MODE:$,METHOD_GUARD:O,END_SAME_AS_BEGIN:function(e){return Object.assign(e,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})}});function B(e,t){"."===e.input[e.index-1]&&t.ignoreMatch()}function L(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=B,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,void 0===e.relevance&&(e.relevance=0))}function R(e,t){Array.isArray(e.illegal)&&(e.illegal=function(...e){return"("+e.map((e=>d(e))).join("|")+")"}(...e.illegal))}function N(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function Z(e,t){void 0===e.relevance&&(e.relevance=1)}const F=["of","and","for","in","not","or","if","then","parent","list","value"],j="keyword";function z(e,t,i=j){const n={};return"string"==typeof e?r(i,e.split(" ")):Array.isArray(e)?r(i,e):Object.keys(e).forEach((function(i){Object.assign(n,z(e[i],t,i))})),n;function r(e,i){t&&(i=i.map((e=>e.toLowerCase()))),i.forEach((function(t){const i=t.split("|");n[i[0]]=[e,U(i[0],i[1])]}))}}function U(e,t){return t?Number(t):function(e){return F.includes(e.toLowerCase())}(e)?0:1}function H(e,{plugins:t}){function i(t,i){return new RegExp(d(t),"m"+(e.case_insensitive?"i":"")+(i?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(e,t){t.position=this.position++,this.matchIndexes[this.matchAt]=t,this.regexes.push([t,e]),this.matchAt+=function(e){return new RegExp(e.toString()+"|").exec("").length-1}(e)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);const e=this.regexes.map((e=>e[1]));this.matcherRe=i(function(e,t="|"){let i=0;return e.map((e=>{i+=1;const t=i;let n=d(e),r="";for(;n.length>0;){const e=u.exec(n);if(!e){r+=n;break}r+=n.substring(0,e.index),n=n.substring(e.index+e[0].length),"\\"===e[0][0]&&e[1]?r+="\\"+String(Number(e[1])+t):(r+=e[0],"("===e[0]&&i++)}return r})).map((e=>`(${e})`)).join(t)}(e),!0),this.lastIndex=0}exec(e){this.matcherRe.lastIndex=this.lastIndex;const t=this.matcherRe.exec(e);if(!t)return null;const i=t.findIndex(((e,t)=>t>0&&void 0!==e)),n=this.matchIndexes[i];return t.splice(0,i),Object.assign(t,n)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(e){if(this.multiRegexes[e])return this.multiRegexes[e];const t=new n;return this.rules.slice(e).forEach((([e,i])=>t.addRule(e,i))),t.compile(),this.multiRegexes[e]=t,t}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(e,t){this.rules.push([e,t]),"begin"===t.type&&this.count++}exec(e){const t=this.getMatcher(this.regexIndex);t.lastIndex=this.lastIndex;let i=t.exec(e);if(this.resumingScanAtSamePosition())if(i&&i.index===this.lastIndex);else{const t=this.getMatcher(0);t.lastIndex=this.lastIndex+1,i=t.exec(e)}return i&&(this.regexIndex+=i.position+1,this.regexIndex===this.count&&this.considerAll()),i}}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=o(e.classNameAliases||{}),function t(n,s){const a=n;if(n.isCompiled)return a;[N].forEach((e=>e(n,s))),e.compilerExtensions.forEach((e=>e(n,s))),n.__beforeBegin=null,[L,R,Z].forEach((e=>e(n,s))),n.isCompiled=!0;let l=null;if("object"==typeof n.keywords&&(l=n.keywords.$pattern,delete n.keywords.$pattern),n.keywords&&(n.keywords=z(n.keywords,e.case_insensitive)),n.lexemes&&l)throw new Error("ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) ");return l=l||n.lexemes||/\w+/,a.keywordPatternRe=i(l,!0),s&&(n.begin||(n.begin=/\B|\b/),a.beginRe=i(n.begin),n.endSameAsBegin&&(n.end=n.begin),n.end||n.endsWithParent||(n.end=/\B|\b/),n.end&&(a.endRe=i(n.end)),a.terminatorEnd=d(n.end)||"",n.endsWithParent&&s.terminatorEnd&&(a.terminatorEnd+=(n.end?"|":"")+s.terminatorEnd)),n.illegal&&(a.illegalRe=i(n.illegal)),n.contains||(n.contains=[]),n.contains=[].concat(...n.contains.map((function(e){return function(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map((function(t){return o(e,{variants:null},t)}))),e.cachedVariants?e.cachedVariants:q(e)?o(e,{starts:e.starts?o(e.starts):null}):Object.isFrozen(e)?o(e):e}("self"===e?n:e)}))),n.contains.forEach((function(e){t(e,a)})),n.starts&&t(n.starts,s),a.matcher=function(e){const t=new r;return e.contains.forEach((e=>t.addRule(e.begin,{rule:e,type:"begin"}))),e.terminatorEnd&&t.addRule(e.terminatorEnd,{type:"end"}),e.illegal&&t.addRule(e.illegal,{type:"illegal"}),t}(a),a}(e)}function q(e){return!!e&&(e.endsWithParent||q(e.starts))}function W(e){const t={props:["language","code","autodetect"],data:function(){return{detectedLanguage:"",unknownLanguage:!1}},computed:{className(){return this.unknownLanguage?"":"hljs "+this.detectedLanguage},highlighted(){if(!this.autoDetect&&!e.getLanguage(this.language))return console.warn(`The language "${this.language}" you specified could not be found.`),this.unknownLanguage=!0,s(this.code);let t={};return this.autoDetect?(t=e.highlightAuto(this.code),this.detectedLanguage=t.language):(t=e.highlight(this.language,this.code,this.ignoreIllegals),this.detectedLanguage=this.language),t.value},autoDetect(){return!this.language||(e=this.autodetect,Boolean(e||""===e));var e},ignoreIllegals:()=>!0},render(e){return e("pre",{},[e("code",{class:this.className,domProps:{innerHTML:this.highlighted}})])}};return{Component:t,VuePlugin:{install(e){e.component("highlightjs",t)}}}}const V={"after:highlightElement":({el:e,result:t,text:i})=>{const n=K(e);if(!n.length)return;const r=document.createElement("div");r.innerHTML=t.value,t.value=function(e,t,i){let n=0,r="";const o=[];function a(){return e.length&&t.length?e[0].offset!==t[0].offset?e[0].offset<t[0].offset?e:t:"start"===t[0].event?e:t:e.length?e:t}function l(e){r+="<"+G(e)+[].map.call(e.attributes,(function(e){return" "+e.nodeName+'="'+s(e.value)+'"'})).join("")+">"}function c(e){r+="</"+G(e)+">"}function h(e){("start"===e.event?l:c)(e.node)}for(;e.length||t.length;){let t=a();if(r+=s(i.substring(n,t[0].offset)),n=t[0].offset,t===e){o.reverse().forEach(c);do{h(t.splice(0,1)[0]),t=a()}while(t===e&&t.length&&t[0].offset===n);o.reverse().forEach(l)}else"start"===t[0].event?o.push(t[0].node):o.pop(),h(t.splice(0,1)[0])}return r+s(i.substr(n))}(n,K(r),i)}};function G(e){return e.nodeName.toLowerCase()}function K(e){const t=[];return function e(i,n){for(let r=i.firstChild;r;r=r.nextSibling)3===r.nodeType?n+=r.nodeValue.length:1===r.nodeType&&(t.push({event:"start",offset:n,node:r}),n=e(r,n),G(r).match(/br|hr|img|input/)||t.push({event:"stop",offset:n,node:r}));return n}(e,0),t}const J={},Y=e=>{console.error(e)},Q=(e,...t)=>{console.log(`WARN: ${e}`,...t)},X=(e,t)=>{J[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),J[`${e}/${t}`]=!0)},ee=s,te=o,ie=Symbol("nomatch");var ne=function(e){const t=Object.create(null),n=Object.create(null),s=[];let o=!0;const a=/(^(<[^>]+>|\t|)+|\n)/gm,l="Could not find the language '{}', did you forget to load/include a language module?",c={disableAutodetect:!0,name:"Plain text",contains:[]};let d={noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:null,__emitter:h};function u(e){return d.noHighlightRe.test(e)}function p(e,t,i,n){let r="",s="";"object"==typeof t?(r=e,i=t.ignoreIllegals,s=t.language,n=void 0):(X("10.7.0","highlight(lang, code, ...args) has been deprecated."),X("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),s=e,r=t);const o={code:r,language:s};I("before:highlight",o);const a=o.result?o.result:m(o.language,o.code,i,n);return a.code=o.code,I("after:highlight",a),a}function m(e,i,n,a){function c(e,t){const i=b.case_insensitive?t[0].toLowerCase():t[0];return Object.prototype.hasOwnProperty.call(e.keywords,i)&&e.keywords[i]}function h(){null!=k.subLanguage?function(){if(""===A)return;let e=null;if("string"==typeof k.subLanguage){if(!t[k.subLanguage])return void I.addText(A);e=m(k.subLanguage,A,!0,S[k.subLanguage]),S[k.subLanguage]=e.top}else e=f(A,k.subLanguage.length?k.subLanguage:null);k.relevance>0&&(_+=e.relevance),I.addSublanguage(e.emitter,e.language)}():function(){if(!k.keywords)return void I.addText(A);let e=0;k.keywordPatternRe.lastIndex=0;let t=k.keywordPatternRe.exec(A),i="";for(;t;){i+=A.substring(e,t.index);const n=c(k,t);if(n){const[e,r]=n;if(I.addText(i),i="",_+=r,e.startsWith("_"))i+=t[0];else{const i=b.classNameAliases[e]||e;I.addKeyword(t[0],i)}}else i+=t[0];e=k.keywordPatternRe.lastIndex,t=k.keywordPatternRe.exec(A)}i+=A.substr(e),I.addText(i)}(),A=""}function u(e){return e.className&&I.openNode(b.classNameAliases[e.className]||e.className),k=Object.create(e,{parent:{value:k}}),k}function p(e,t,i){let n=function(e,t){const i=e&&e.exec(t);return i&&0===i.index}(e.endRe,i);if(n){if(e["on:end"]){const i=new r(e);e["on:end"](t,i),i.isMatchIgnored&&(n=!1)}if(n){for(;e.endsParent&&e.parent;)e=e.parent;return e}}if(e.endsWithParent)return p(e.parent,t,i)}function g(e){return 0===k.matcher.regexIndex?(A+=e[0],1):(M=!0,0)}function v(e){const t=e[0],n=i.substr(e.index),r=p(k,e,n);if(!r)return ie;const s=k;s.skip?A+=t:(s.returnEnd||s.excludeEnd||(A+=t),h(),s.excludeEnd&&(A=t));do{k.className&&I.closeNode(),k.skip||k.subLanguage||(_+=k.relevance),k=k.parent}while(k!==r.parent);return r.starts&&(r.endSameAsBegin&&(r.starts.endRe=r.endRe),u(r.starts)),s.returnEnd?0:t.length}let y={};function x(t,s){const a=s&&s[0];if(A+=t,null==a)return h(),0;if("begin"===y.type&&"end"===s.type&&y.index===s.index&&""===a){if(A+=i.slice(s.index,s.index+1),!o){const t=new Error("0 width match regex");throw t.languageName=e,t.badRule=y.rule,t}return 1}if(y=s,"begin"===s.type)return function(e){const t=e[0],i=e.rule,n=new r(i),s=[i.__beforeBegin,i["on:begin"]];for(const i of s)if(i&&(i(e,n),n.isMatchIgnored))return g(t);return i&&i.endSameAsBegin&&(i.endRe=new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),i.skip?A+=t:(i.excludeBegin&&(A+=t),h(),i.returnBegin||i.excludeBegin||(A=t)),u(i),i.returnBegin?0:t.length}(s);if("illegal"===s.type&&!n){const e=new Error('Illegal lexeme "'+a+'" for mode "'+(k.className||"<unnamed>")+'"');throw e.mode=k,e}if("end"===s.type){const e=v(s);if(e!==ie)return e}if("illegal"===s.type&&""===a)return 1;if(T>1e5&&T>3*s.index)throw new Error("potential infinite loop, way more iterations than matches");return A+=a,a.length}const b=P(e);if(!b)throw Y(l.replace("{}",e)),new Error('Unknown language: "'+e+'"');const w=H(b,{plugins:s});let C="",k=a||w;const S={},I=new d.__emitter(d);!function(){const e=[];for(let t=k;t!==b;t=t.parent)t.className&&e.unshift(t.className);e.forEach((e=>I.openNode(e)))}();let A="",_=0,E=0,T=0,M=!1;try{for(k.matcher.considerAll();;){T++,M?M=!1:k.matcher.considerAll(),k.matcher.lastIndex=E;const e=k.matcher.exec(i);if(!e)break;const t=x(i.substring(E,e.index),e);E=e.index+t}return x(i.substr(E)),I.closeAllNodes(),I.finalize(),C=I.toHTML(),{relevance:Math.floor(_),value:C,language:e,illegal:!1,emitter:I,top:k}}catch(t){if(t.message&&t.message.includes("Illegal"))return{illegal:!0,illegalBy:{msg:t.message,context:i.slice(E-100,E+100),mode:t.mode},sofar:C,relevance:0,value:ee(i),emitter:I};if(o)return{illegal:!1,relevance:0,value:ee(i),emitter:I,language:e,top:k,errorRaised:t};throw t}}function f(e,i){i=i||d.languages||Object.keys(t);const n=function(e){const t={relevance:0,emitter:new d.__emitter(d),value:ee(e),illegal:!1,top:c};return t.emitter.addText(e),t}(e),r=i.filter(P).filter(S).map((t=>m(t,e,!1)));r.unshift(n);const s=r.sort(((e,t)=>{if(e.relevance!==t.relevance)return t.relevance-e.relevance;if(e.language&&t.language){if(P(e.language).supersetOf===t.language)return 1;if(P(t.language).supersetOf===e.language)return-1}return 0})),[o,a]=s,l=o;return l.second_best=a,l}const g={"before:highlightElement":({el:e})=>{d.useBR&&(e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ /]*>/g,"\n"))},"after:highlightElement":({result:e})=>{d.useBR&&(e.value=e.value.replace(/\n/g,"<br>"))}},v=/^(<[^>]+>|\t)+/gm,y={"after:highlightElement":({result:e})=>{d.tabReplace&&(e.value=e.value.replace(v,(e=>e.replace(/\t/g,d.tabReplace))))}};function x(e){let t=null;const i=function(e){let t=e.className+" ";t+=e.parentNode?e.parentNode.className:"";const i=d.languageDetectRe.exec(t);if(i){const t=P(i[1]);return t||(Q(l.replace("{}",i[1])),Q("Falling back to no-highlight mode for this block.",e)),t?i[1]:"no-highlight"}return t.split(/\s+/).find((e=>u(e)||P(e)))}(e);if(u(i))return;I("before:highlightElement",{el:e,language:i}),t=e;const r=t.textContent,s=i?p(r,{language:i,ignoreIllegals:!0}):f(r);I("after:highlightElement",{el:e,result:s,text:r}),e.innerHTML=s.value,function(e,t,i){const r=t?n[t]:i;e.classList.add("hljs"),r&&e.classList.add(r)}(e,i,s.language),e.result={language:s.language,re:s.relevance,relavance:s.relevance},s.second_best&&(e.second_best={language:s.second_best.language,re:s.second_best.relevance,relavance:s.second_best.relevance})}const b=()=>{b.called||(b.called=!0,X("10.6.0","initHighlighting() is deprecated.  Use highlightAll() instead."),document.querySelectorAll("pre code").forEach(x))};let w=!1;function C(){"loading"!==document.readyState?document.querySelectorAll("pre code").forEach(x):w=!0}function P(e){return e=(e||"").toLowerCase(),t[e]||t[n[e]]}function k(e,{languageName:t}){"string"==typeof e&&(e=[e]),e.forEach((e=>{n[e.toLowerCase()]=t}))}function S(e){const t=P(e);return t&&!t.disableAutodetect}function I(e,t){const i=e;s.forEach((function(e){e[i]&&e[i](t)}))}"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",(function(){w&&C()}),!1),Object.assign(e,{highlight:p,highlightAuto:f,highlightAll:C,fixMarkup:function(e){return X("10.2.0","fixMarkup will be removed entirely in v11.0"),X("10.2.0","Please see https://github.com/highlightjs/highlight.js/issues/2534"),t=e,d.tabReplace||d.useBR?t.replace(a,(e=>"\n"===e?d.useBR?"<br>":e:d.tabReplace?e.replace(/\t/g,d.tabReplace):e)):t;var t},highlightElement:x,highlightBlock:function(e){return X("10.7.0","highlightBlock will be removed entirely in v12.0"),X("10.7.0","Please use highlightElement now."),x(e)},configure:function(e){e.useBR&&(X("10.3.0","'useBR' will be removed entirely in v11.0"),X("10.3.0","Please see https://github.com/highlightjs/highlight.js/issues/2559")),d=te(d,e)},initHighlighting:b,initHighlightingOnLoad:function(){X("10.6.0","initHighlightingOnLoad() is deprecated.  Use highlightAll() instead."),w=!0},registerLanguage:function(i,n){let r=null;try{r=n(e)}catch(e){if(Y("Language definition for '{}' could not be registered.".replace("{}",i)),!o)throw e;Y(e),r=c}r.name||(r.name=i),t[i]=r,r.rawDefinition=n.bind(null,e),r.aliases&&k(r.aliases,{languageName:i})},unregisterLanguage:function(e){delete t[e];for(const t of Object.keys(n))n[t]===e&&delete n[t]},listLanguages:function(){return Object.keys(t)},getLanguage:P,registerAliases:k,requireLanguage:function(e){X("10.4.0","requireLanguage will be removed entirely in v11."),X("10.4.0","Please see https://github.com/highlightjs/highlight.js/pull/2844");const t=P(e);if(t)return t;throw new Error("The '{}' language is required, but not loaded.".replace("{}",e))},autoDetection:S,inherit:te,addPlugin:function(e){!function(e){e["before:highlightBlock"]&&!e["before:highlightElement"]&&(e["before:highlightElement"]=t=>{e["before:highlightBlock"](Object.assign({block:t.el},t))}),e["after:highlightBlock"]&&!e["after:highlightElement"]&&(e["after:highlightElement"]=t=>{e["after:highlightBlock"](Object.assign({block:t.el},t))})}(e),s.push(e)},vuePlugin:W(e).VuePlugin}),e.debugMode=function(){o=!1},e.safeMode=function(){o=!0},e.versionString="10.7.3";for(const e in D)"object"==typeof D[e]&&i(D[e]);return Object.assign(e,D),e.addPlugin(g),e.addPlugin(V),e.addPlugin(y),e}({});e.exports=ne},5733:(e,t,i)=>{e.exports=function e(t,i,n){function r(o,a){if(!i[o]){if(!t[o]){if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[o]={exports:{}};t[o][0].call(c.exports,(function(e){return r(t[o][1][e]||e)}),c,c.exports,e,t,i,n)}return i[o].exports}for(var s=void 0,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,i){"use strict";var n=e("./utils"),r=e("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(e){for(var t,i,r,o,a,l,c,h=[],d=0,u=e.length,p=u,m="string"!==n.getTypeOf(e);d<e.length;)p=u-d,r=m?(t=e[d++],i=d<u?e[d++]:0,d<u?e[d++]:0):(t=e.charCodeAt(d++),i=d<u?e.charCodeAt(d++):0,d<u?e.charCodeAt(d++):0),o=t>>2,a=(3&t)<<4|i>>4,l=1<p?(15&i)<<2|r>>6:64,c=2<p?63&r:64,h.push(s.charAt(o)+s.charAt(a)+s.charAt(l)+s.charAt(c));return h.join("")},i.decode=function(e){var t,i,n,o,a,l,c=0,h=0,d="data:";if(e.substr(0,5)===d)throw new Error("Invalid base64 input, it looks like a data url.");var u,p=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===s.charAt(64)&&p--,e.charAt(e.length-2)===s.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(u=r.uint8array?new Uint8Array(0|p):new Array(0|p);c<e.length;)t=s.indexOf(e.charAt(c++))<<2|(o=s.indexOf(e.charAt(c++)))>>4,i=(15&o)<<4|(a=s.indexOf(e.charAt(c++)))>>2,n=(3&a)<<6|(l=s.indexOf(e.charAt(c++))),u[h++]=t,64!==a&&(u[h++]=i),64!==l&&(u[h++]=n);return u}},{"./support":30,"./utils":32}],2:[function(e,t,i){"use strict";var n=e("./external"),r=e("./stream/DataWorker"),s=e("./stream/Crc32Probe"),o=e("./stream/DataLengthProbe");function a(e,t,i,n,r){this.compressedSize=e,this.uncompressedSize=t,this.crc32=i,this.compression=n,this.compressedContent=r}a.prototype={getContentWorker:function(){var e=new r(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new r(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(e,t,i){return e.pipe(new s).pipe(new o("uncompressedSize")).pipe(t.compressWorker(i)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,i){"use strict";var n=e("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},i.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,i){"use strict";var n=e("./utils"),r=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==n.getTypeOf(e)?function(e,t,i,n){var s=r,o=0+i;e^=-1;for(var a=0;a<o;a++)e=e>>>8^s[255&(e^t[a])];return-1^e}(0|t,e,e.length):function(e,t,i,n){var s=r,o=0+i;e^=-1;for(var a=0;a<o;a++)e=e>>>8^s[255&(e^t.charCodeAt(a))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,i){"use strict";i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(e,t,i){"use strict";var n;n="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:n}},{lie:37}],7:[function(e,t,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=e("pako"),s=e("./utils"),o=e("./stream/GenericWorker"),a=n?"uint8array":"array";function l(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}i.magic="\b\0",s.inherits(l,o),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(a,e.data),!1)},l.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},i.compressWorker=function(e){return new l("Deflate",e)},i.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,i){"use strict";function n(e,t){var i,n="";for(i=0;i<t;i++)n+=String.fromCharCode(255&e),e>>>=8;return n}function r(e,t,i,r,o,h){var d,u,p=e.file,m=e.compression,f=h!==a.utf8encode,g=s.transformTo("string",h(p.name)),v=s.transformTo("string",a.utf8encode(p.name)),y=p.comment,x=s.transformTo("string",h(y)),b=s.transformTo("string",a.utf8encode(y)),w=v.length!==p.name.length,C=b.length!==y.length,P="",k="",S="",I=p.dir,A=p.date,_={crc32:0,compressedSize:0,uncompressedSize:0};t&&!i||(_.crc32=e.crc32,_.compressedSize=e.compressedSize,_.uncompressedSize=e.uncompressedSize);var E=0;t&&(E|=8),f||!w&&!C||(E|=2048);var T=0,M=0;I&&(T|=16),"UNIX"===o?(M=798,T|=function(e,t){var i=e;return e||(i=t?16893:33204),(65535&i)<<16}(p.unixPermissions,I)):(M=20,T|=function(e){return 63&(e||0)}(p.dosPermissions)),d=A.getUTCHours(),d<<=6,d|=A.getUTCMinutes(),d<<=5,d|=A.getUTCSeconds()/2,u=A.getUTCFullYear()-1980,u<<=4,u|=A.getUTCMonth()+1,u<<=5,u|=A.getUTCDate(),w&&(k=n(1,1)+n(l(g),4)+v,P+="up"+n(k.length,2)+k),C&&(S=n(1,1)+n(l(x),4)+b,P+="uc"+n(S.length,2)+S);var $="";return $+="\n\0",$+=n(E,2),$+=m.magic,$+=n(d,2),$+=n(u,2),$+=n(_.crc32,4),$+=n(_.compressedSize,4),$+=n(_.uncompressedSize,4),$+=n(g.length,2),$+=n(P.length,2),{fileRecord:c.LOCAL_FILE_HEADER+$+g+P,dirRecord:c.CENTRAL_FILE_HEADER+n(M,2)+$+n(x.length,2)+"\0\0\0\0"+n(T,4)+n(r,4)+g+P+x}}var s=e("../utils"),o=e("../stream/GenericWorker"),a=e("../utf8"),l=e("../crc32"),c=e("../signature");function h(e,t,i,n){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=i,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(h,o),h.prototype.push=function(e){var t=e.meta.percent||0,i=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:i?(t+100*(i-n-1))/i:100}}))},h.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var i=r(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,i=r(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),t)this.push({data:function(e){return c.DATA_DESCRIPTOR+n(e.crc32,4)+n(e.compressedSize,4)+n(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var i=this.bytesWritten-e,r=function(e,t,i,r,o){var a=s.transformTo("string",o(r));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(e,2)+n(e,2)+n(t,4)+n(i,4)+n(a.length,2)+a}(this.dirRecords.length,i,e,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},h.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var i=0;i<t.length;i++)try{t[i].error(e)}catch(e){}return!0},h.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,i){"use strict";var n=e("../compressions"),r=e("./ZipFileWorker");i.generateWorker=function(e,t,i){var s=new r(t.streamFiles,i,t.platform,t.encodeFileName),o=0;try{e.forEach((function(e,i){o++;var r=function(e,t){var i=e||t,r=n[i];if(!r)throw new Error(i+" is not a valid compression method !");return r}(i.options.compression,t.compression),a=i.options.compressionOptions||t.compressionOptions||{},l=i.dir,c=i.date;i._compressWorker(r,a).withStreamInfo("file",{name:e,dir:l,date:c,comment:i.comment||"",unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions}).pipe(s)})),s.entriesCount=o}catch(e){s.error(e)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,i){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.10.1",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,i){"use strict";var n=e("./utils"),r=e("./external"),s=e("./utf8"),o=e("./zipEntries"),a=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new r.Promise((function(t,i){var n=e.decompressed.getContentWorker().pipe(new a);n.on("error",(function(e){i(e)})).on("end",(function(){n.streamInfo.crc32!==e.decompressed.crc32?i(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var i=this;return t=n.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),l.isNode&&l.isStream(e)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var i=new o(t);return i.load(e),i})).then((function(e){var i=[r.Promise.resolve(e)],n=e.files;if(t.checkCRC32)for(var s=0;s<n.length;s++)i.push(c(n[s]));return r.Promise.all(i)})).then((function(e){for(var r=e.shift(),s=r.files,o=0;o<s.length;o++){var a=s[o],l=a.fileNameStr,c=n.resolve(a.fileNameStr);i.file(c,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders}),a.dir||(i.file(c).unsafeOriginalName=l)}return r.zipComment.length&&(i.comment=r.zipComment),i}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,i){"use strict";var n=e("../utils"),r=e("../stream/GenericWorker");function s(e,t){r.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(s,r),s.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},s.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,i){"use strict";var n=e("readable-stream").Readable;function r(e,t,i){n.call(this,t),this._helper=e;var r=this;e.on("data",(function(e,t){r.push(e)||r._helper.pause(),i&&i(t)})).on("error",(function(e){r.emit("error",e)})).on("end",(function(){r.push(null)}))}e("../utils").inherits(r,n),r.prototype._read=function(){this._helper.resume()},t.exports=r},{"../utils":32,"readable-stream":16}],14:[function(e,t,i){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,i){"use strict";function n(e,t,i){var n,r=s.getTypeOf(t),a=s.extend(i||{},l);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(e=f(e)),a.createFolders&&(n=m(e))&&g.call(this,n,!0);var d="string"===r&&!1===a.binary&&!1===a.base64;i&&void 0!==i.binary||(a.binary=!d),(t instanceof c&&0===t.uncompressedSize||a.dir||!t||0===t.length)&&(a.base64=!1,a.binary=!0,t="",a.compression="STORE",r="string");var v;v=t instanceof c||t instanceof o?t:u.isNode&&u.isStream(t)?new p(e,t):s.prepareContent(e,t,a.binary,a.optimizedBinaryString,a.base64);var y=new h(e,v,a);this.files[e]=y}var r=e("./utf8"),s=e("./utils"),o=e("./stream/GenericWorker"),a=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),h=e("./zipObject"),d=e("./generate"),u=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),m=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},f=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:l.createFolders,e=f(e),this.files[e]||n.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function v(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,i,n;for(t in this.files)n=this.files[t],(i=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(i,n)},filter:function(e){var t=[];return this.forEach((function(i,n){e(i,n)&&t.push(n)})),t},file:function(e,t,i){if(1!==arguments.length)return e=this.root+e,n.call(this,e,t,i),this;if(v(e)){var r=e;return this.filter((function(e,t){return!t.dir&&r.test(e)}))}var s=this.files[this.root+e];return s&&!s.dir?s:null},folder:function(e){if(!e)return this;if(v(e))return this.filter((function(t,i){return i.dir&&e.test(t)}));var t=this.root+e,i=g.call(this,t),n=this.clone();return n.root=i.name,n},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var i=this.filter((function(t,i){return i.name.slice(0,e.length)===e})),n=0;n<i.length;n++)delete this.files[i[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,i={};try{if((i=s.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=i.type.toLowerCase(),i.compression=i.compression.toUpperCase(),"binarystring"===i.type&&(i.type="string"),!i.type)throw new Error("No output type specified.");s.checkSupport(i.type),"darwin"!==i.platform&&"freebsd"!==i.platform&&"linux"!==i.platform&&"sunos"!==i.platform||(i.platform="UNIX"),"win32"===i.platform&&(i.platform="DOS");var n=i.comment||this.comment||"";t=d.generateWorker(this,i,n)}catch(e){(t=new o("error")).error(e)}return new a(t,i.type||"string",i.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,i){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,i){"use strict";var n=e("./DataReader");function r(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(r,n),r.prototype.byteAt=function(e){return this.data[this.zero+e]},r.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),i=e.charCodeAt(1),n=e.charCodeAt(2),r=e.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===t&&this.data[s+1]===i&&this.data[s+2]===n&&this.data[s+3]===r)return s-this.zero;return-1},r.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),i=e.charCodeAt(1),n=e.charCodeAt(2),r=e.charCodeAt(3),s=this.readData(4);return t===s[0]&&i===s[1]&&n===s[2]&&r===s[3]},r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./DataReader":18}],18:[function(e,t,i){"use strict";var n=e("../utils");function r(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,i=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)i=(i<<8)+this.byteAt(t);return this.index+=e,i},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=r},{"../utils":32}],19:[function(e,t,i){"use strict";var n=e("./Uint8ArrayReader");function r(e){n.call(this,e)}e("../utils").inherits(r,n),r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,i){"use strict";var n=e("./DataReader");function r(e){n.call(this,e)}e("../utils").inherits(r,n),r.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},r.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},r.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./DataReader":18}],21:[function(e,t,i){"use strict";var n=e("./ArrayReader");function r(e){n.call(this,e)}e("../utils").inherits(r,n),r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,i){"use strict";var n=e("../utils"),r=e("../support"),s=e("./ArrayReader"),o=e("./StringReader"),a=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||r.uint8array?"nodebuffer"===t?new a(e):r.uint8array?new l(n.transformTo("uint8array",e)):new s(n.transformTo("array",e)):new o(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,i){"use strict";i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,i){"use strict";var n=e("./GenericWorker"),r=e("../utils");function s(e){n.call(this,"ConvertWorker to "+e),this.destType=e}r.inherits(s,n),s.prototype.processChunk=function(e){this.push({data:r.transformTo(this.destType,e.data),meta:e.meta})},t.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,i){"use strict";var n=e("./GenericWorker"),r=e("../crc32");function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(s,n),s.prototype.processChunk=function(e){this.streamInfo.crc32=r(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,i){"use strict";var n=e("../utils"),r=e("./GenericWorker");function s(e){r.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(s,r),s.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}r.prototype.processChunk.call(this,e)},t.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,i){"use strict";var n=e("../utils"),r=e("./GenericWorker");function s(e){r.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}n.inherits(s,r),s.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,i){"use strict";function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var i=0;i<this._listeners[e].length;i++)this._listeners[e][i].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=n},{}],29:[function(e,t,i){"use strict";var n=e("../utils"),r=e("./ConvertWorker"),s=e("./GenericWorker"),o=e("../base64"),a=e("../support"),l=e("../external"),c=null;if(a.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function h(e,t,i){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=i,n.checkSupport(o),this._worker=e.pipe(new r(o)),e.lock()}catch(e){this._worker=new s("error"),this._worker.error(e)}}h.prototype={accumulate:function(e){return function(e,t){return new l.Promise((function(i,r){var s=[],a=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",(function(e,i){s.push(e),t&&t(i)})).on("error",(function(e){s=[],r(e)})).on("end",(function(){try{var e=function(e,t,i){switch(e){case"blob":return n.newBlob(n.transformTo("arraybuffer",t),i);case"base64":return o.encode(t);default:return n.transformTo(e,t)}}(l,function(e,t){var i,n=0,r=null,s=0;for(i=0;i<t.length;i++)s+=t[i].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(r=new Uint8Array(s),i=0;i<t.length;i++)r.set(t[i],n),n+=t[i].length;return r;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(a,s),c);i(e)}catch(e){r(e)}s=[]})).resume()}))}(this,e)},on:function(e,t){var i=this;return"data"===e?this._worker.on(e,(function(e){t.call(i,e.data,e.meta)})):this._worker.on(e,(function(){n.delay(t,arguments,i)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,i){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof Buffer,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(n),i.blob=0===r.getBlob("application/zip").size}catch(e){i.blob=!1}}}try{i.nodestream=!!e("readable-stream").Readable}catch(e){i.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,i){"use strict";for(var n=e("./utils"),r=e("./support"),s=e("./nodejsUtils"),o=e("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){o.call(this,"utf-8 decode"),this.leftOver=null}function h(){o.call(this,"utf-8 encode")}a[254]=a[254]=1,i.utf8encode=function(e){return r.nodebuffer?s.newBufferFrom(e,"utf-8"):function(e){var t,i,n,s,o,a=e.length,l=0;for(s=0;s<a;s++)55296==(64512&(i=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=e.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(n-56320),s++),l+=i<128?1:i<2048?2:i<65536?3:4;for(t=r.uint8array?new Uint8Array(l):new Array(l),s=o=0;o<l;s++)55296==(64512&(i=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=e.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(n-56320),s++),i<128?t[o++]=i:(i<2048?t[o++]=192|i>>>6:(i<65536?t[o++]=224|i>>>12:(t[o++]=240|i>>>18,t[o++]=128|i>>>12&63),t[o++]=128|i>>>6&63),t[o++]=128|63&i);return t}(e)},i.utf8decode=function(e){return r.nodebuffer?n.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,i,r,s,o=e.length,l=new Array(2*o);for(t=i=0;t<o;)if((r=e[t++])<128)l[i++]=r;else if(4<(s=a[r]))l[i++]=65533,t+=s-1;else{for(r&=2===s?31:3===s?15:7;1<s&&t<o;)r=r<<6|63&e[t++],s--;1<s?l[i++]=65533:r<65536?l[i++]=r:(r-=65536,l[i++]=55296|r>>10&1023,l[i++]=56320|1023&r)}return l.length!==i&&(l.subarray?l=l.subarray(0,i):l.length=i),n.applyFromCharCode(l)}(e=n.transformTo(r.uint8array?"uint8array":"array",e))},n.inherits(c,o),c.prototype.processChunk=function(e){var t=n.transformTo(r.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var s=t;(t=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),t.set(s,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var o=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;0<=i&&128==(192&e[i]);)i--;return i<0||0===i?t:i+a[e[i]]>t?i:t}(t),l=t;o!==t.length&&(r.uint8array?(l=t.subarray(0,o),this.leftOver=t.subarray(o,t.length)):(l=t.slice(0,o),this.leftOver=t.slice(o,t.length))),this.push({data:i.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=c,n.inherits(h,o),h.prototype.processChunk=function(e){this.push({data:i.utf8encode(e.data),meta:e.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,i){"use strict";var n=e("./support"),r=e("./base64"),s=e("./nodejsUtils"),o=e("./external");function a(e){return e}function l(e,t){for(var i=0;i<e.length;++i)t[i]=255&e.charCodeAt(i);return t}e("setimmediate"),i.newBlob=function(e,t){i.checkSupport("blob");try{return new Blob([e],{type:t})}catch(i){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(e),n.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,i){var n=[],r=0,s=e.length;if(s<=i)return String.fromCharCode.apply(null,e);for(;r<s;)"array"===t||"nodebuffer"===t?n.push(String.fromCharCode.apply(null,e.slice(r,Math.min(r+i,s)))):n.push(String.fromCharCode.apply(null,e.subarray(r,Math.min(r+i,s)))),r+=i;return n.join("")},stringifyByChar:function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(e){return!1}}()}};function h(e){var t=65536,n=i.getTypeOf(e),r=!0;if("uint8array"===n?r=c.applyCanBeUsed.uint8array:"nodebuffer"===n&&(r=c.applyCanBeUsed.nodebuffer),r)for(;1<t;)try{return c.stringifyByChunk(e,n,t)}catch(e){t=Math.floor(t/2)}return c.stringifyByChar(e)}function d(e,t){for(var i=0;i<e.length;i++)t[i]=e[i];return t}i.applyFromCharCode=h;var u={};u.string={string:a,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return u.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,s.allocBuffer(e.length))}},u.array={string:h,array:a,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(e)}},u.arraybuffer={string:function(e){return h(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:a,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(new Uint8Array(e))}},u.uint8array={string:h,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:a,nodebuffer:function(e){return s.newBufferFrom(e)}},u.nodebuffer={string:h,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return u.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:a},i.transformTo=function(e,t){if(t=t||"",!e)return t;i.checkSupport(e);var n=i.getTypeOf(t);return u[n][e](t)},i.resolve=function(e){for(var t=e.split("/"),i=[],n=0;n<t.length;n++){var r=t[n];"."===r||""===r&&0!==n&&n!==t.length-1||(".."===r?i.pop():i.push(r))}return i.join("/")},i.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":n.nodebuffer&&s.isBuffer(e)?"nodebuffer":n.uint8array&&e instanceof Uint8Array?"uint8array":n.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(e){if(!n[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(e){var t,i,n="";for(i=0;i<(e||"").length;i++)n+="\\x"+((t=e.charCodeAt(i))<16?"0":"")+t.toString(16).toUpperCase();return n},i.delay=function(e,t,i){setImmediate((function(){e.apply(i||null,t||[])}))},i.inherits=function(e,t){function i(){}i.prototype=t.prototype,e.prototype=new i},i.extend=function(){var e,t,i={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===i[t]&&(i[t]=arguments[e][t]);return i},i.prepareContent=function(e,t,s,a,c){return o.Promise.resolve(t).then((function(e){return n.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise((function(t,i){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){i(e.target.error)},n.readAsArrayBuffer(e)})):e})).then((function(t){var h=i.getTypeOf(t);return h?("arraybuffer"===h?t=i.transformTo("uint8array",t):"string"===h&&(c?t=r.decode(t):s&&!0!==a&&(t=function(e){return l(e,n.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,i){"use strict";var n=e("./reader/readerFor"),r=e("./utils"),s=e("./signature"),o=e("./zipEntry"),a=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(t)+", expected "+r.pretty(e)+")")}},isSignature:function(e,t){var i=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(i),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=a.uint8array?"uint8array":"array",i=r.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,i,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),i=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var n=t-i;if(0<n)this.isSignature(t,s.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,i){"use strict";var n=e("./reader/readerFor"),r=e("./utils"),s=e("./compressedObject"),o=e("./crc32"),a=e("./utf8"),l=e("./compressions"),c=e("./support");function h(e,t){this.options=e,this.loadOptions=t}h.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,i;if(e.skip(22),this.fileNameLength=e.readInt(2),i=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(i),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,i,n,r=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<r;)t=e.readInt(2),i=e.readInt(2),n=e.readData(i),this.extraFields[t]={id:t,length:i,value:n};e.setIndex(r)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var i=r.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var s=r.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)||o(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)||o(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null}},t.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,i){"use strict";function n(e,t,i){this.name=e,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=t,this._dataBinary=i.binary,this.options={compression:i.compression,compressionOptions:i.compressionOptions}}var r=e("./stream/StreamHelper"),s=e("./stream/DataWorker"),o=e("./utf8"),a=e("./compressedObject"),l=e("./stream/GenericWorker");n.prototype={internalStream:function(e){var t=null,i="string";try{if(!e)throw new Error("No output type specified.");var n="string"===(i=e.toLowerCase())||"text"===i;"binarystring"!==i&&"text"!==i||(i="string"),t=this._decompressWorker();var s=!this._dataBinary;s&&!n&&(t=t.pipe(new o.Utf8EncodeWorker)),!s&&n&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new l("error")).error(e)}return new r(t,i,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var i=this._decompressWorker();return this._dataBinary||(i=i.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(i,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new s(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)n.prototype[c[d]]=h;t.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,n){(function(e){"use strict";var i,n,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var s=0,o=new r(h),a=e.document.createTextNode("");o.observe(a,{characterData:!0}),i=function(){a.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)i="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){h(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(h,0)};else{var l=new e.MessageChannel;l.port1.onmessage=h,i=function(){l.port2.postMessage(0)}}var c=[];function h(){var e,t;n=!0;for(var i=c.length;i;){for(t=c,c=[],e=-1;++e<i;)t[e]();i=c.length}n=!1}t.exports=function(e){1!==c.push(e)||n||i()}}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,i){"use strict";var n=e("immediate");function r(){}var s={},o=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==r&&p(this,e)}function h(e,t,i){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function d(e,t,i){n((function(){var n;try{n=t(i)}catch(n){return s.reject(e,n)}n===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,n)}))}function u(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var i=!1;function n(t){i||(i=!0,s.reject(e,t))}function r(t){i||(i=!0,s.resolve(e,t))}var o=m((function(){t(r,n)}));"error"===o.status&&n(o.value)}function m(e,t){var i={};try{i.value=e(t),i.status="success"}catch(e){i.status="error",i.value=e}return i}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(i){return t.resolve(e()).then((function(){return i}))}),(function(i){return t.resolve(e()).then((function(){throw i}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var i=new this.constructor(r);return this.state!==l?d(i,this.state===a?e:t,this.outcome):this.queue.push(new h(i,e,t)),i},h.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},h.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},h.prototype.callRejected=function(e){s.reject(this.promise,e)},h.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var i=m(u,t);if("error"===i.status)return s.reject(e,i.value);var n=i.value;if(n)p(e,n);else{e.state=a,e.outcome=t;for(var r=-1,o=e.queue.length;++r<o;)e.queue[r].callFulfilled(t)}return e},s.reject=function(e,t){e.state=o,e.outcome=t;for(var i=-1,n=e.queue.length;++i<n;)e.queue[i].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:s.resolve(new this(r),e)},c.reject=function(e){var t=new this(r);return s.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,n=!1;if(!i)return this.resolve([]);for(var o=new Array(i),a=0,l=-1,c=new this(r);++l<i;)h(e[l],l);return c;function h(e,r){t.resolve(e).then((function(e){o[r]=e,++a!==i||n||(n=!0,s.resolve(c,o))}),(function(e){n||(n=!0,s.reject(c,e))}))}},c.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,i=!1;if(!t)return this.resolve([]);for(var n,o=-1,a=new this(r);++o<t;)n=e[o],this.resolve(n).then((function(e){i||(i=!0,s.resolve(a,e))}),(function(e){i||(i=!0,s.reject(a,e))}));return a}},{immediate:36}],38:[function(e,t,i){"use strict";var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,i){"use strict";var n=e("./zlib/deflate"),r=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/messages"),a=e("./zlib/zstream"),l=Object.prototype.toString,c=0,h=-1,d=0,u=8;function p(e){if(!(this instanceof p))return new p(e);this.options=r.assign({level:h,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var i=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==c)throw new Error(o[i]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var m;if(m="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(i=n.deflateSetDictionary(this.strm,m))!==c)throw new Error(o[i]);this._dict_set=!0}}function m(e,t){var i=new p(t);if(i.push(e,!0),i.err)throw i.msg||o[i.err];return i.result}p.prototype.push=function(e,t){var i,o,a=this.strm,h=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?a.input=s.string2buf(e):"[object ArrayBuffer]"===l.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new r.Buf8(h),a.next_out=0,a.avail_out=h),1!==(i=n.deflate(a,o))&&i!==c)return this.onEnd(i),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(s.buf2binstring(r.shrinkBuf(a.output,a.next_out))):this.onData(r.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==i);return 4===o?(i=n.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===c):2!==o||(this.onEnd(c),!(a.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Deflate=p,i.deflate=m,i.deflateRaw=function(e,t){return(t=t||{}).raw=!0,m(e,t)},i.gzip=function(e,t){return(t=t||{}).gzip=!0,m(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,i){"use strict";var n=e("./zlib/inflate"),r=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/constants"),a=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),h=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var i=n.inflateInit2(this.strm,t.windowBits);if(i!==o.Z_OK)throw new Error(a[i]);this.header=new c,n.inflateGetHeader(this.strm,this.header)}function u(e,t){var i=new d(t);if(i.push(e,!0),i.err)throw i.msg||a[i.err];return i.result}d.prototype.push=function(e,t){var i,a,l,c,d,u,p=this.strm,m=this.options.chunkSize,f=this.options.dictionary,g=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?p.input=s.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new r.Buf8(m),p.next_out=0,p.avail_out=m),(i=n.inflate(p,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&f&&(u="string"==typeof f?s.string2buf(f):"[object ArrayBuffer]"===h.call(f)?new Uint8Array(f):f,i=n.inflateSetDictionary(this.strm,u)),i===o.Z_BUF_ERROR&&!0===g&&(i=o.Z_OK,g=!1),i!==o.Z_STREAM_END&&i!==o.Z_OK)return this.onEnd(i),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&i!==o.Z_STREAM_END&&(0!==p.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=s.utf8border(p.output,p.next_out),c=p.next_out-l,d=s.buf2string(p.output,l),p.next_out=c,p.avail_out=m-c,c&&r.arraySet(p.output,p.output,l,c,0),this.onData(d)):this.onData(r.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(g=!0)}while((0<p.avail_in||0===p.avail_out)&&i!==o.Z_STREAM_END);return i===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(i=n.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(p.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Inflate=d,i.inflate=u,i.inflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},i.ungzip=u},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])}}return e},i.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,i,n,r){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+n),r);else for(var s=0;s<n;s++)e[r+s]=t[i+s]},flattenChunks:function(e){var t,i,n,r,s,o;for(t=n=0,i=e.length;t<i;t++)n+=e[t].length;for(o=new Uint8Array(n),t=r=0,i=e.length;t<i;t++)s=e[t],o.set(s,r),r+=s.length;return o}},s={arraySet:function(e,t,i,n,r){for(var s=0;s<n;s++)e[r+s]=t[i+s]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,r)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,s))},i.setTyped(n)},{}],42:[function(e,t,i){"use strict";var n=e("./common"),r=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var o=new n.Buf8(256),a=0;a<256;a++)o[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(e,t){if(t<65537&&(e.subarray&&s||!e.subarray&&r))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var i="",o=0;o<t;o++)i+=String.fromCharCode(e[o]);return i}o[254]=o[254]=1,i.string2buf=function(e){var t,i,r,s,o,a=e.length,l=0;for(s=0;s<a;s++)55296==(64512&(i=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=e.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(r-56320),s++),l+=i<128?1:i<2048?2:i<65536?3:4;for(t=new n.Buf8(l),s=o=0;o<l;s++)55296==(64512&(i=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=e.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(r-56320),s++),i<128?t[o++]=i:(i<2048?t[o++]=192|i>>>6:(i<65536?t[o++]=224|i>>>12:(t[o++]=240|i>>>18,t[o++]=128|i>>>12&63),t[o++]=128|i>>>6&63),t[o++]=128|63&i);return t},i.buf2binstring=function(e){return l(e,e.length)},i.binstring2buf=function(e){for(var t=new n.Buf8(e.length),i=0,r=t.length;i<r;i++)t[i]=e.charCodeAt(i);return t},i.buf2string=function(e,t){var i,n,r,s,a=t||e.length,c=new Array(2*a);for(i=n=0;i<a;)if((r=e[i++])<128)c[n++]=r;else if(4<(s=o[r]))c[n++]=65533,i+=s-1;else{for(r&=2===s?31:3===s?15:7;1<s&&i<a;)r=r<<6|63&e[i++],s--;1<s?c[n++]=65533:r<65536?c[n++]=r:(r-=65536,c[n++]=55296|r>>10&1023,c[n++]=56320|1023&r)}return l(c,n)},i.utf8border=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;0<=i&&128==(192&e[i]);)i--;return i<0||0===i?t:i+o[e[i]]>t?i:t}},{"./common":41}],43:[function(e,t,i){"use strict";t.exports=function(e,t,i,n){for(var r=65535&e|0,s=e>>>16&65535|0,o=0;0!==i;){for(i-=o=2e3<i?2e3:i;s=s+(r=r+t[n++]|0)|0,--o;);r%=65521,s%=65521}return r|s<<16|0}},{}],44:[function(e,t,i){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,i){"use strict";var n=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();t.exports=function(e,t,i,r){var s=n,o=r+i;e^=-1;for(var a=r;a<o;a++)e=e>>>8^s[255&(e^t[a])];return-1^e}},{}],46:[function(e,t,i){"use strict";var n,r=e("../utils/common"),s=e("./trees"),o=e("./adler32"),a=e("./crc32"),l=e("./messages"),c=0,h=0,d=-2,u=2,p=8,m=286,f=30,g=19,v=2*m+1,y=15,x=3,b=258,w=b+x+1,C=42,P=113;function k(e,t){return e.msg=l[t],t}function S(e){return(e<<1)-(4<e?9:0)}function I(e){for(var t=e.length;0<=--t;)e[t]=0}function A(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(r.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function _(e,t){s._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,A(e.strm)}function E(e,t){e.pending_buf[e.pending++]=t}function T(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function M(e,t){var i,n,r=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-w?e.strstart-(e.w_size-w):0,c=e.window,h=e.w_mask,d=e.prev,u=e.strstart+b,p=c[s+o-1],m=c[s+o];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(i=t)+o]===m&&c[i+o-1]===p&&c[i]===c[s]&&c[++i]===c[s+1]){s+=2,i++;do{}while(c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&s<u);if(n=b-(u-s),s=u-b,o<n){if(e.match_start=t,a<=(o=n))break;p=c[s+o-1],m=c[s+o]}}}while((t=d[t&h])>l&&0!=--r);return o<=e.lookahead?o:e.lookahead}function $(e){var t,i,n,s,l,c,h,d,u,p,m=e.w_size;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-w)){for(r.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=i=e.hash_size;n=e.head[--t],e.head[t]=m<=n?n-m:0,--i;);for(t=i=m;n=e.prev[--t],e.prev[t]=m<=n?n-m:0,--i;);s+=m}if(0===e.strm.avail_in)break;if(c=e.strm,h=e.window,d=e.strstart+e.lookahead,p=void 0,(u=s)<(p=c.avail_in)&&(p=u),i=0===p?0:(c.avail_in-=p,r.arraySet(h,c.input,c.next_in,p,d),1===c.state.wrap?c.adler=o(c.adler,h,p,d):2===c.state.wrap&&(c.adler=a(c.adler,h,p,d)),c.next_in+=p,c.total_in+=p,p),e.lookahead+=i,e.lookahead+e.insert>=x)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+x-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<x)););}while(e.lookahead<w&&0!==e.strm.avail_in)}function O(e,t){for(var i,n;;){if(e.lookahead<w){if($(e),e.lookahead<w&&t===c)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=x&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-w&&(e.match_length=M(e,i)),e.match_length>=x)if(n=s._tr_tally(e,e.strstart-e.match_start,e.match_length-x),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=x){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<x-1?e.strstart:x-1,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}function D(e,t){for(var i,n,r;;){if(e.lookahead<w){if($(e),e.lookahead<w&&t===c)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=x&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=x-1,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-w&&(e.match_length=M(e,i),e.match_length<=5&&(1===e.strategy||e.match_length===x&&4096<e.strstart-e.match_start)&&(e.match_length=x-1)),e.prev_length>=x&&e.match_length<=e.prev_length){for(r=e.strstart+e.lookahead-x,n=s._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-x),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=x-1,e.strstart++,n&&(_(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=s._tr_tally(e,0,e.window[e.strstart-1]))&&_(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=s._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<x-1?e.strstart:x-1,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}function B(e,t,i,n,r){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=n,this.func=r}function L(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*v),this.dyn_dtree=new r.Buf16(2*(2*f+1)),this.bl_tree=new r.Buf16(2*(2*g+1)),I(this.dyn_ltree),I(this.dyn_dtree),I(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(y+1),this.heap=new r.Buf16(2*m+1),I(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*m+1),I(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function R(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=u,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?C:P,e.adler=2===t.wrap?0:1,t.last_flush=c,s._tr_init(t),h):k(e,d)}function N(e){var t=R(e);return t===h&&function(e){e.window_size=2*e.w_size,I(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=x-1,e.match_available=0,e.ins_h=0}(e.state),t}function Z(e,t,i,n,s,o){if(!e)return d;var a=1;if(-1===t&&(t=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),s<1||9<s||i!==p||n<8||15<n||t<0||9<t||o<0||4<o)return k(e,d);8===n&&(n=9);var l=new L;return(e.state=l).strm=e,l.wrap=a,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=s+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+x-1)/x),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<s+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=i,N(e)}n=[new B(0,0,0,0,(function(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if($(e),0===e.lookahead&&t===c)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+i;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,_(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-w&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(_(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(_(e,!1),e.strm.avail_out),1)})),new B(4,4,8,4,O),new B(4,5,16,8,O),new B(4,6,32,32,O),new B(4,4,16,16,D),new B(8,16,32,32,D),new B(8,16,128,128,D),new B(8,32,128,256,D),new B(32,128,258,1024,D),new B(32,258,258,4096,D)],i.deflateInit=function(e,t){return Z(e,t,p,15,8,0)},i.deflateInit2=Z,i.deflateReset=N,i.deflateResetKeep=R,i.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?d:(e.state.gzhead=t,h):d},i.deflate=function(e,t){var i,r,o,l;if(!e||!e.state||5<t||t<0)return e?k(e,d):d;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||666===r.status&&4!==t)return k(e,0===e.avail_out?-5:d);if(r.strm=e,i=r.last_flush,r.last_flush=t,r.status===C)if(2===r.wrap)e.adler=0,E(r,31),E(r,139),E(r,8),r.gzhead?(E(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),E(r,255&r.gzhead.time),E(r,r.gzhead.time>>8&255),E(r,r.gzhead.time>>16&255),E(r,r.gzhead.time>>24&255),E(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),E(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(E(r,255&r.gzhead.extra.length),E(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=a(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(E(r,0),E(r,0),E(r,0),E(r,0),E(r,0),E(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),E(r,3),r.status=P);else{var u=p+(r.w_bits-8<<4)<<8;u|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(u|=32),u+=31-u%31,r.status=P,T(r,u),0!==r.strstart&&(T(r,e.adler>>>16),T(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(o=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),A(e),o=r.pending,r.pending!==r.pending_buf_size));)E(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),A(e),o=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,E(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),0===l&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),A(e),o=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,E(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>o&&(e.adler=a(e.adler,r.pending_buf,r.pending-o,o)),0===l&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&A(e),r.pending+2<=r.pending_buf_size&&(E(r,255&e.adler),E(r,e.adler>>8&255),e.adler=0,r.status=P)):r.status=P),0!==r.pending){if(A(e),0===e.avail_out)return r.last_flush=-1,h}else if(0===e.avail_in&&S(t)<=S(i)&&4!==t)return k(e,-5);if(666===r.status&&0!==e.avail_in)return k(e,-5);if(0!==e.avail_in||0!==r.lookahead||t!==c&&666!==r.status){var m=2===r.strategy?function(e,t){for(var i;;){if(0===e.lookahead&&($(e),0===e.lookahead)){if(t===c)return 1;break}if(e.match_length=0,i=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}(r,t):3===r.strategy?function(e,t){for(var i,n,r,o,a=e.window;;){if(e.lookahead<=b){if($(e),e.lookahead<=b&&t===c)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=x&&0<e.strstart&&(n=a[r=e.strstart-1])===a[++r]&&n===a[++r]&&n===a[++r]){o=e.strstart+b;do{}while(n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&r<o);e.match_length=b-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=x?(i=s._tr_tally(e,1,e.match_length-x),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}(r,t):n[r.level].func(r,t);if(3!==m&&4!==m||(r.status=666),1===m||3===m)return 0===e.avail_out&&(r.last_flush=-1),h;if(2===m&&(1===t?s._tr_align(r):5!==t&&(s._tr_stored_block(r,0,0,!1),3===t&&(I(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),A(e),0===e.avail_out))return r.last_flush=-1,h}return 4!==t?h:r.wrap<=0?1:(2===r.wrap?(E(r,255&e.adler),E(r,e.adler>>8&255),E(r,e.adler>>16&255),E(r,e.adler>>24&255),E(r,255&e.total_in),E(r,e.total_in>>8&255),E(r,e.total_in>>16&255),E(r,e.total_in>>24&255)):(T(r,e.adler>>>16),T(r,65535&e.adler)),A(e),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?h:1)},i.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==C&&69!==t&&73!==t&&91!==t&&103!==t&&t!==P&&666!==t?k(e,d):(e.state=null,t===P?k(e,-3):h):d},i.deflateSetDictionary=function(e,t){var i,n,s,a,l,c,u,p,m=t.length;if(!e||!e.state)return d;if(2===(a=(i=e.state).wrap)||1===a&&i.status!==C||i.lookahead)return d;for(1===a&&(e.adler=o(e.adler,t,m,0)),i.wrap=0,m>=i.w_size&&(0===a&&(I(i.head),i.strstart=0,i.block_start=0,i.insert=0),p=new r.Buf8(i.w_size),r.arraySet(p,t,m-i.w_size,i.w_size,0),t=p,m=i.w_size),l=e.avail_in,c=e.next_in,u=e.input,e.avail_in=m,e.next_in=0,e.input=t,$(i);i.lookahead>=x;){for(n=i.strstart,s=i.lookahead-(x-1);i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+x-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++,--s;);i.strstart=n,i.lookahead=x-1,$(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=x-1,i.match_available=0,e.next_in=c,e.input=u,e.avail_in=l,i.wrap=a,h},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,i){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,i){"use strict";t.exports=function(e,t){var i,n,r,s,o,a,l,c,h,d,u,p,m,f,g,v,y,x,b,w,C,P,k,S,I;i=e.state,n=e.next_in,S=e.input,r=n+(e.avail_in-5),s=e.next_out,I=e.output,o=s-(t-e.avail_out),a=s+(e.avail_out-257),l=i.dmax,c=i.wsize,h=i.whave,d=i.wnext,u=i.window,p=i.hold,m=i.bits,f=i.lencode,g=i.distcode,v=(1<<i.lenbits)-1,y=(1<<i.distbits)-1;e:do{m<15&&(p+=S[n++]<<m,m+=8,p+=S[n++]<<m,m+=8),x=f[p&v];t:for(;;){if(p>>>=b=x>>>24,m-=b,0==(b=x>>>16&255))I[s++]=65535&x;else{if(!(16&b)){if(0==(64&b)){x=f[(65535&x)+(p&(1<<b)-1)];continue t}if(32&b){i.mode=12;break e}e.msg="invalid literal/length code",i.mode=30;break e}w=65535&x,(b&=15)&&(m<b&&(p+=S[n++]<<m,m+=8),w+=p&(1<<b)-1,p>>>=b,m-=b),m<15&&(p+=S[n++]<<m,m+=8,p+=S[n++]<<m,m+=8),x=g[p&y];i:for(;;){if(p>>>=b=x>>>24,m-=b,!(16&(b=x>>>16&255))){if(0==(64&b)){x=g[(65535&x)+(p&(1<<b)-1)];continue i}e.msg="invalid distance code",i.mode=30;break e}if(C=65535&x,m<(b&=15)&&(p+=S[n++]<<m,(m+=8)<b&&(p+=S[n++]<<m,m+=8)),l<(C+=p&(1<<b)-1)){e.msg="invalid distance too far back",i.mode=30;break e}if(p>>>=b,m-=b,(b=s-o)<C){if(h<(b=C-b)&&i.sane){e.msg="invalid distance too far back",i.mode=30;break e}if(k=u,(P=0)===d){if(P+=c-b,b<w){for(w-=b;I[s++]=u[P++],--b;);P=s-C,k=I}}else if(d<b){if(P+=c+d-b,(b-=d)<w){for(w-=b;I[s++]=u[P++],--b;);if(P=0,d<w){for(w-=b=d;I[s++]=u[P++],--b;);P=s-C,k=I}}}else if(P+=d-b,b<w){for(w-=b;I[s++]=u[P++],--b;);P=s-C,k=I}for(;2<w;)I[s++]=k[P++],I[s++]=k[P++],I[s++]=k[P++],w-=3;w&&(I[s++]=k[P++],1<w&&(I[s++]=k[P++]))}else{for(P=s-C;I[s++]=I[P++],I[s++]=I[P++],I[s++]=I[P++],2<(w-=3););w&&(I[s++]=I[P++],1<w&&(I[s++]=I[P++]))}break}}break}}while(n<r&&s<a);n-=w=m>>3,p&=(1<<(m-=w<<3))-1,e.next_in=n,e.next_out=s,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=s<a?a-s+257:257-(s-a),i.hold=p,i.bits=m}},{}],49:[function(e,t,i){"use strict";var n=e("../utils/common"),r=e("./adler32"),s=e("./crc32"),o=e("./inffast"),a=e("./inftrees"),l=0,c=-2,h=1,d=852,u=592;function p(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=h,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(d),t.distcode=t.distdyn=new n.Buf32(u),t.sane=1,t.back=-1,l):c}function g(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,f(e)):c}function v(e,t){var i,n;return e&&e.state?(n=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?c:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,g(e))):c}function y(e,t){var i,n;return e?(n=new m,(e.state=n).window=null,(i=v(e,t))!==l&&(e.state=null),i):c}var x,b,w=!0;function C(e){if(w){var t;for(x=new n.Buf32(512),b=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(1,e.lens,0,288,x,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(2,e.lens,0,32,b,0,e.work,{bits:5}),w=!1}e.lencode=x,e.lenbits=9,e.distcode=b,e.distbits=5}function P(e,t,i,r){var s,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n.Buf8(o.wsize)),r>=o.wsize?(n.arraySet(o.window,t,i-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(r<(s=o.wsize-o.wnext)&&(s=r),n.arraySet(o.window,t,i-r,s,o.wnext),(r-=s)?(n.arraySet(o.window,t,i-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}i.inflateReset=g,i.inflateReset2=v,i.inflateResetKeep=f,i.inflateInit=function(e){return y(e,15)},i.inflateInit2=y,i.inflate=function(e,t){var i,d,u,m,f,g,v,y,x,b,w,k,S,I,A,_,E,T,M,$,O,D,B,L,R=0,N=new n.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return c;12===(i=e.state).mode&&(i.mode=13),f=e.next_out,u=e.output,v=e.avail_out,m=e.next_in,d=e.input,g=e.avail_in,y=i.hold,x=i.bits,b=g,w=v,D=l;e:for(;;)switch(i.mode){case h:if(0===i.wrap){i.mode=13;break}for(;x<16;){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}if(2&i.wrap&&35615===y){N[i.check=0]=255&y,N[1]=y>>>8&255,i.check=s(i.check,N,2,0),x=y=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&y)<<8)+(y>>8))%31){e.msg="incorrect header check",i.mode=30;break}if(8!=(15&y)){e.msg="unknown compression method",i.mode=30;break}if(x-=4,O=8+(15&(y>>>=4)),0===i.wbits)i.wbits=O;else if(O>i.wbits){e.msg="invalid window size",i.mode=30;break}i.dmax=1<<O,e.adler=i.check=1,i.mode=512&y?10:12,x=y=0;break;case 2:for(;x<16;){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}if(i.flags=y,8!=(255&i.flags)){e.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=y>>8&1),512&i.flags&&(N[0]=255&y,N[1]=y>>>8&255,i.check=s(i.check,N,2,0)),x=y=0,i.mode=3;case 3:for(;x<32;){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}i.head&&(i.head.time=y),512&i.flags&&(N[0]=255&y,N[1]=y>>>8&255,N[2]=y>>>16&255,N[3]=y>>>24&255,i.check=s(i.check,N,4,0)),x=y=0,i.mode=4;case 4:for(;x<16;){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}i.head&&(i.head.xflags=255&y,i.head.os=y>>8),512&i.flags&&(N[0]=255&y,N[1]=y>>>8&255,i.check=s(i.check,N,2,0)),x=y=0,i.mode=5;case 5:if(1024&i.flags){for(;x<16;){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}i.length=y,i.head&&(i.head.extra_len=y),512&i.flags&&(N[0]=255&y,N[1]=y>>>8&255,i.check=s(i.check,N,2,0)),x=y=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(g<(k=i.length)&&(k=g),k&&(i.head&&(O=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),n.arraySet(i.head.extra,d,m,k,O)),512&i.flags&&(i.check=s(i.check,d,k,m)),g-=k,m+=k,i.length-=k),i.length))break e;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===g)break e;for(k=0;O=d[m+k++],i.head&&O&&i.length<65536&&(i.head.name+=String.fromCharCode(O)),O&&k<g;);if(512&i.flags&&(i.check=s(i.check,d,k,m)),g-=k,m+=k,O)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===g)break e;for(k=0;O=d[m+k++],i.head&&O&&i.length<65536&&(i.head.comment+=String.fromCharCode(O)),O&&k<g;);if(512&i.flags&&(i.check=s(i.check,d,k,m)),g-=k,m+=k,O)break e}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;x<16;){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}if(y!==(65535&i.check)){e.msg="header crc mismatch",i.mode=30;break}x=y=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=12;break;case 10:for(;x<32;){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}e.adler=i.check=p(y),x=y=0,i.mode=11;case 11:if(0===i.havedict)return e.next_out=f,e.avail_out=v,e.next_in=m,e.avail_in=g,i.hold=y,i.bits=x,2;e.adler=i.check=1,i.mode=12;case 12:if(5===t||6===t)break e;case 13:if(i.last){y>>>=7&x,x-=7&x,i.mode=27;break}for(;x<3;){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}switch(i.last=1&y,x-=1,3&(y>>>=1)){case 0:i.mode=14;break;case 1:if(C(i),i.mode=20,6!==t)break;y>>>=2,x-=2;break e;case 2:i.mode=17;break;case 3:e.msg="invalid block type",i.mode=30}y>>>=2,x-=2;break;case 14:for(y>>>=7&x,x-=7&x;x<32;){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}if((65535&y)!=(y>>>16^65535)){e.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&y,x=y=0,i.mode=15,6===t)break e;case 15:i.mode=16;case 16:if(k=i.length){if(g<k&&(k=g),v<k&&(k=v),0===k)break e;n.arraySet(u,d,m,k,f),g-=k,m+=k,v-=k,f+=k,i.length-=k;break}i.mode=12;break;case 17:for(;x<14;){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}if(i.nlen=257+(31&y),y>>>=5,x-=5,i.ndist=1+(31&y),y>>>=5,x-=5,i.ncode=4+(15&y),y>>>=4,x-=4,286<i.nlen||30<i.ndist){e.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;x<3;){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}i.lens[Z[i.have++]]=7&y,y>>>=3,x-=3}for(;i.have<19;)i.lens[Z[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,B={bits:i.lenbits},D=a(0,i.lens,0,19,i.lencode,0,i.work,B),i.lenbits=B.bits,D){e.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;_=(R=i.lencode[y&(1<<i.lenbits)-1])>>>16&255,E=65535&R,!((A=R>>>24)<=x);){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}if(E<16)y>>>=A,x-=A,i.lens[i.have++]=E;else{if(16===E){for(L=A+2;x<L;){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}if(y>>>=A,x-=A,0===i.have){e.msg="invalid bit length repeat",i.mode=30;break}O=i.lens[i.have-1],k=3+(3&y),y>>>=2,x-=2}else if(17===E){for(L=A+3;x<L;){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}x-=A,O=0,k=3+(7&(y>>>=A)),y>>>=3,x-=3}else{for(L=A+7;x<L;){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}x-=A,O=0,k=11+(127&(y>>>=A)),y>>>=7,x-=7}if(i.have+k>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=30;break}for(;k--;)i.lens[i.have++]=O}}if(30===i.mode)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,B={bits:i.lenbits},D=a(1,i.lens,0,i.nlen,i.lencode,0,i.work,B),i.lenbits=B.bits,D){e.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,B={bits:i.distbits},D=a(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,B),i.distbits=B.bits,D){e.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===t)break e;case 20:i.mode=21;case 21:if(6<=g&&258<=v){e.next_out=f,e.avail_out=v,e.next_in=m,e.avail_in=g,i.hold=y,i.bits=x,o(e,w),f=e.next_out,u=e.output,v=e.avail_out,m=e.next_in,d=e.input,g=e.avail_in,y=i.hold,x=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;_=(R=i.lencode[y&(1<<i.lenbits)-1])>>>16&255,E=65535&R,!((A=R>>>24)<=x);){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}if(_&&0==(240&_)){for(T=A,M=_,$=E;_=(R=i.lencode[$+((y&(1<<T+M)-1)>>T)])>>>16&255,E=65535&R,!(T+(A=R>>>24)<=x);){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}y>>>=T,x-=T,i.back+=T}if(y>>>=A,x-=A,i.back+=A,i.length=E,0===_){i.mode=26;break}if(32&_){i.back=-1,i.mode=12;break}if(64&_){e.msg="invalid literal/length code",i.mode=30;break}i.extra=15&_,i.mode=22;case 22:if(i.extra){for(L=i.extra;x<L;){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}i.length+=y&(1<<i.extra)-1,y>>>=i.extra,x-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;_=(R=i.distcode[y&(1<<i.distbits)-1])>>>16&255,E=65535&R,!((A=R>>>24)<=x);){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}if(0==(240&_)){for(T=A,M=_,$=E;_=(R=i.distcode[$+((y&(1<<T+M)-1)>>T)])>>>16&255,E=65535&R,!(T+(A=R>>>24)<=x);){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}y>>>=T,x-=T,i.back+=T}if(y>>>=A,x-=A,i.back+=A,64&_){e.msg="invalid distance code",i.mode=30;break}i.offset=E,i.extra=15&_,i.mode=24;case 24:if(i.extra){for(L=i.extra;x<L;){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}i.offset+=y&(1<<i.extra)-1,y>>>=i.extra,x-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===v)break e;if(k=w-v,i.offset>k){if((k=i.offset-k)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=30;break}S=k>i.wnext?(k-=i.wnext,i.wsize-k):i.wnext-k,k>i.length&&(k=i.length),I=i.window}else I=u,S=f-i.offset,k=i.length;for(v<k&&(k=v),v-=k,i.length-=k;u[f++]=I[S++],--k;);0===i.length&&(i.mode=21);break;case 26:if(0===v)break e;u[f++]=i.length,v--,i.mode=21;break;case 27:if(i.wrap){for(;x<32;){if(0===g)break e;g--,y|=d[m++]<<x,x+=8}if(w-=v,e.total_out+=w,i.total+=w,w&&(e.adler=i.check=i.flags?s(i.check,u,w,f-w):r(i.check,u,w,f-w)),w=v,(i.flags?y:p(y))!==i.check){e.msg="incorrect data check",i.mode=30;break}x=y=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;x<32;){if(0===g)break e;g--,y+=d[m++]<<x,x+=8}if(y!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=30;break}x=y=0}i.mode=29;case 29:D=1;break e;case 30:D=-3;break e;case 31:return-4;default:return c}return e.next_out=f,e.avail_out=v,e.next_in=m,e.avail_in=g,i.hold=y,i.bits=x,(i.wsize||w!==e.avail_out&&i.mode<30&&(i.mode<27||4!==t))&&P(e,e.output,e.next_out,w-e.avail_out)?(i.mode=31,-4):(b-=e.avail_in,w-=e.avail_out,e.total_in+=b,e.total_out+=w,i.total+=w,i.wrap&&w&&(e.adler=i.check=i.flags?s(i.check,u,w,e.next_out-w):r(i.check,u,w,e.next_out-w)),e.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0==b&&0===w||4===t)&&D===l&&(D=-5),D)},i.inflateEnd=function(e){if(!e||!e.state)return c;var t=e.state;return t.window&&(t.window=null),e.state=null,l},i.inflateGetHeader=function(e,t){var i;return e&&e.state?0==(2&(i=e.state).wrap)?c:((i.head=t).done=!1,l):c},i.inflateSetDictionary=function(e,t){var i,n=t.length;return e&&e.state?0!==(i=e.state).wrap&&11!==i.mode?c:11===i.mode&&r(1,t,n,0)!==i.check?-3:P(e,t,n,n)?(i.mode=31,-4):(i.havedict=1,l):c},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,i){"use strict";var n=e("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,i,l,c,h,d,u){var p,m,f,g,v,y,x,b,w,C=u.bits,P=0,k=0,S=0,I=0,A=0,_=0,E=0,T=0,M=0,$=0,O=null,D=0,B=new n.Buf16(16),L=new n.Buf16(16),R=null,N=0;for(P=0;P<=15;P++)B[P]=0;for(k=0;k<l;k++)B[t[i+k]]++;for(A=C,I=15;1<=I&&0===B[I];I--);if(I<A&&(A=I),0===I)return c[h++]=20971520,c[h++]=20971520,u.bits=1,0;for(S=1;S<I&&0===B[S];S++);for(A<S&&(A=S),P=T=1;P<=15;P++)if(T<<=1,(T-=B[P])<0)return-1;if(0<T&&(0===e||1!==I))return-1;for(L[1]=0,P=1;P<15;P++)L[P+1]=L[P]+B[P];for(k=0;k<l;k++)0!==t[i+k]&&(d[L[t[i+k]]++]=k);if(y=0===e?(O=R=d,19):1===e?(O=r,D-=257,R=s,N-=257,256):(O=o,R=a,-1),P=S,v=h,E=k=$=0,f=-1,g=(M=1<<(_=A))-1,1===e&&852<M||2===e&&592<M)return 1;for(;;){for(x=P-E,w=d[k]<y?(b=0,d[k]):d[k]>y?(b=R[N+d[k]],O[D+d[k]]):(b=96,0),p=1<<P-E,S=m=1<<_;c[v+($>>E)+(m-=p)]=x<<24|b<<16|w|0,0!==m;);for(p=1<<P-1;$&p;)p>>=1;if(0!==p?($&=p-1,$+=p):$=0,k++,0==--B[P]){if(P===I)break;P=t[i+d[k]]}if(A<P&&($&g)!==f){for(0===E&&(E=A),v+=S,T=1<<(_=P-E);_+E<I&&!((T-=B[_+E])<=0);)_++,T<<=1;if(M+=1<<_,1===e&&852<M||2===e&&592<M)return 1;c[f=$&g]=A<<24|_<<16|v-h|0}}return 0!==$&&(c[v+$]=P-E<<24|64<<16|0),u.bits=A,0}},{"../utils/common":41}],51:[function(e,t,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,i){"use strict";var n=e("../utils/common");function r(e){for(var t=e.length;0<=--t;)e[t]=0}var s=256,o=286,a=30,l=15,c=16,h=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],d=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],p=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],m=new Array(576);r(m);var f=new Array(60);r(f);var g=new Array(512);r(g);var v=new Array(256);r(v);var y=new Array(29);r(y);var x,b,w,C=new Array(a);function P(e,t,i,n,r){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=e&&e.length}function k(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function S(e){return e<256?g[e]:g[256+(e>>>7)]}function I(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function A(e,t,i){e.bi_valid>c-i?(e.bi_buf|=t<<e.bi_valid&65535,I(e,e.bi_buf),e.bi_buf=t>>c-e.bi_valid,e.bi_valid+=i-c):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function _(e,t,i){A(e,i[2*t],i[2*t+1])}function E(e,t){for(var i=0;i|=1&e,e>>>=1,i<<=1,0<--t;);return i>>>1}function T(e,t,i){var n,r,s=new Array(l+1),o=0;for(n=1;n<=l;n++)s[n]=o=o+i[n-1]<<1;for(r=0;r<=t;r++){var a=e[2*r+1];0!==a&&(e[2*r]=E(s[a]++,a))}}function M(e){var t;for(t=0;t<o;t++)e.dyn_ltree[2*t]=0;for(t=0;t<a;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function $(e){8<e.bi_valid?I(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function O(e,t,i,n){var r=2*t,s=2*i;return e[r]<e[s]||e[r]===e[s]&&n[t]<=n[i]}function D(e,t,i){for(var n=e.heap[i],r=i<<1;r<=e.heap_len&&(r<e.heap_len&&O(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!O(t,n,e.heap[r],e.depth));)e.heap[i]=e.heap[r],i=r,r<<=1;e.heap[i]=n}function B(e,t,i){var n,r,o,a,l=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],r=e.pending_buf[e.l_buf+l],l++,0===n?_(e,r,t):(_(e,(o=v[r])+s+1,t),0!==(a=h[o])&&A(e,r-=y[o],a),_(e,o=S(--n),i),0!==(a=d[o])&&A(e,n-=C[o],a)),l<e.last_lit;);_(e,256,t)}function L(e,t){var i,n,r,s=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,h=-1;for(e.heap_len=0,e.heap_max=573,i=0;i<c;i++)0!==s[2*i]?(e.heap[++e.heap_len]=h=i,e.depth[i]=0):s[2*i+1]=0;for(;e.heap_len<2;)s[2*(r=e.heap[++e.heap_len]=h<2?++h:0)]=1,e.depth[r]=0,e.opt_len--,a&&(e.static_len-=o[2*r+1]);for(t.max_code=h,i=e.heap_len>>1;1<=i;i--)D(e,s,i);for(r=c;i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],D(e,s,1),n=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=n,s[2*r]=s[2*i]+s[2*n],e.depth[r]=(e.depth[i]>=e.depth[n]?e.depth[i]:e.depth[n])+1,s[2*i+1]=s[2*n+1]=r,e.heap[1]=r++,D(e,s,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var i,n,r,s,o,a,c=t.dyn_tree,h=t.max_code,d=t.stat_desc.static_tree,u=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,f=t.stat_desc.max_length,g=0;for(s=0;s<=l;s++)e.bl_count[s]=0;for(c[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;i<573;i++)f<(s=c[2*c[2*(n=e.heap[i])+1]+1]+1)&&(s=f,g++),c[2*n+1]=s,h<n||(e.bl_count[s]++,o=0,m<=n&&(o=p[n-m]),a=c[2*n],e.opt_len+=a*(s+o),u&&(e.static_len+=a*(d[2*n+1]+o)));if(0!==g){do{for(s=f-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[f]--,g-=2}while(0<g);for(s=f;0!==s;s--)for(n=e.bl_count[s];0!==n;)h<(r=e.heap[--i])||(c[2*r+1]!==s&&(e.opt_len+=(s-c[2*r+1])*c[2*r],c[2*r+1]=s),n--)}}(e,t),T(s,h,e.bl_count)}function R(e,t,i){var n,r,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(i+1)+1]=65535,n=0;n<=i;n++)r=o,o=t[2*(n+1)+1],++a<l&&r===o||(a<c?e.bl_tree[2*r]+=a:0!==r?(r!==s&&e.bl_tree[2*r]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=r,c=(a=0)===o?(l=138,3):r===o?(l=6,3):(l=7,4))}function N(e,t,i){var n,r,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),n=0;n<=i;n++)if(r=o,o=t[2*(n+1)+1],!(++a<l&&r===o)){if(a<c)for(;_(e,r,e.bl_tree),0!=--a;);else 0!==r?(r!==s&&(_(e,r,e.bl_tree),a--),_(e,16,e.bl_tree),A(e,a-3,2)):a<=10?(_(e,17,e.bl_tree),A(e,a-3,3)):(_(e,18,e.bl_tree),A(e,a-11,7));s=r,c=(a=0)===o?(l=138,3):r===o?(l=6,3):(l=7,4)}}r(C);var Z=!1;function F(e,t,i,r){A(e,0+(r?1:0),3),function(e,t,i,r){$(e),I(e,i),I(e,~i),n.arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}(e,t,i)}i._tr_init=function(e){Z||(function(){var e,t,i,n,r,s=new Array(l+1);for(n=i=0;n<28;n++)for(y[n]=i,e=0;e<1<<h[n];e++)v[i++]=n;for(v[i-1]=n,n=r=0;n<16;n++)for(C[n]=r,e=0;e<1<<d[n];e++)g[r++]=n;for(r>>=7;n<a;n++)for(C[n]=r<<7,e=0;e<1<<d[n]-7;e++)g[256+r++]=n;for(t=0;t<=l;t++)s[t]=0;for(e=0;e<=143;)m[2*e+1]=8,e++,s[8]++;for(;e<=255;)m[2*e+1]=9,e++,s[9]++;for(;e<=279;)m[2*e+1]=7,e++,s[7]++;for(;e<=287;)m[2*e+1]=8,e++,s[8]++;for(T(m,287,s),e=0;e<a;e++)f[2*e+1]=5,f[2*e]=E(e,5);x=new P(m,h,257,o,l),b=new P(f,d,0,a,l),w=new P(new Array(0),u,0,19,7)}(),Z=!0),e.l_desc=new k(e.dyn_ltree,x),e.d_desc=new k(e.dyn_dtree,b),e.bl_desc=new k(e.bl_tree,w),e.bi_buf=0,e.bi_valid=0,M(e)},i._tr_stored_block=F,i._tr_flush_block=function(e,t,i,n){var r,o,a=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<s;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),L(e,e.l_desc),L(e,e.d_desc),a=function(e){var t;for(R(e,e.dyn_ltree,e.l_desc.max_code),R(e,e.dyn_dtree,e.d_desc.max_code),L(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*p[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),r=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=r&&(r=o)):r=o=i+5,i+4<=r&&-1!==t?F(e,t,i,n):4===e.strategy||o===r?(A(e,2+(n?1:0),3),B(e,m,f)):(A(e,4+(n?1:0),3),function(e,t,i,n){var r;for(A(e,t-257,5),A(e,i-1,5),A(e,n-4,4),r=0;r<n;r++)A(e,e.bl_tree[2*p[r]+1],3);N(e,e.dyn_ltree,t-1),N(e,e.dyn_dtree,i-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),B(e,e.dyn_ltree,e.dyn_dtree)),M(e),n&&$(e)},i._tr_tally=function(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(v[i]+s+1)]++,e.dyn_dtree[2*S(t)]++),e.last_lit===e.lit_bufsize-1},i._tr_align=function(e){A(e,2,3),_(e,256,m),function(e){16===e.bi_valid?(I(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,i){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var i,n,r,s,o=1,a={},l=!1,c=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,i="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){u(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}()?(s="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",p,!1):e.attachEvent("onmessage",p),function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){u(e.data)},function(e){r.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(n=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){u(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):function(e){setTimeout(u,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return a[o]=r,i(o),o++},h.clearImmediate=d}function d(e){delete a[e]}function u(e){if(l)setTimeout(u,0,e);else{var i=a[e];if(i){l=!0;try{!function(e){var i=e.callback,n=e.args;switch(n.length){case 0:i();break;case 1:i(n[0]);break;case 2:i(n[0],n[1]);break;case 3:i(n[0],n[1],n[2]);break;default:i.apply(t,n)}}(i)}finally{d(e),l=!1}}}}function p(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&u(+t.data.slice(s.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},6470:(e,t,i)=>{"use strict";i(7802),i(1102);n.prototype.addText=function(e){var t,i,n=this.stack;""!==e&&((i=(t=n[n.length-1]).children[t.children.length-1])&&"text"===i.type?i.value+=e:t.children.push({type:"text",value:e}))},n.prototype.addKeyword=function(e,t){this.openNode(t),this.addText(e),this.closeNode()},n.prototype.addSublanguage=function(e,t){var i=this.stack,n=i[i.length-1],r=e.rootNode.children,s=t?{type:"element",tagName:"span",properties:{className:[t]},children:r}:r;n.children=n.children.concat(s)},n.prototype.openNode=function(e){var t=this.stack,i={type:"element",tagName:"span",properties:{className:[this.options.classPrefix+e]},children:[]};t[t.length-1].children.push(i),t.push(i)},n.prototype.closeNode=function(){this.stack.pop()},n.prototype.closeAllNodes=r,n.prototype.finalize=r,n.prototype.toHTML=function(){return""};function n(e){this.options=e,this.rootNode={children:[]},this.stack=[this.rootNode]}function r(){}},9430:function(e,t){var i,n;void 0===(n="function"==typeof(i=function(){return function(e){function t(e){return" "===e||"\t"===e||"\n"===e||"\f"===e||"\r"===e}function i(t){var i,n=t.exec(e.substring(f));if(n)return i=n[0],f+=i.length,i}for(var n,r,s,o,a,l=e.length,c=/^[ \t\n\r\u000c]+/,h=/^[, \t\n\r\u000c]+/,d=/^[^ \t\n\r\u000c]+/,u=/[,]+$/,p=/^\d+$/,m=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,f=0,g=[];;){if(i(h),f>=l)return g;n=i(d),r=[],","===n.slice(-1)?(n=n.replace(u,""),y()):v()}function v(){for(i(c),s="",o="in descriptor";;){if(a=e.charAt(f),"in descriptor"===o)if(t(a))s&&(r.push(s),s="",o="after descriptor");else{if(","===a)return f+=1,s&&r.push(s),void y();if("("===a)s+=a,o="in parens";else{if(""===a)return s&&r.push(s),void y();s+=a}}else if("in parens"===o)if(")"===a)s+=a,o="in descriptor";else{if(""===a)return r.push(s),void y();s+=a}else if("after descriptor"===o)if(t(a));else{if(""===a)return void y();o="in descriptor",f-=1}f+=1}}function y(){var t,i,s,o,a,l,c,h,d,u=!1,f={};for(o=0;o<r.length;o++)l=(a=r[o])[a.length-1],c=a.substring(0,a.length-1),h=parseInt(c,10),d=parseFloat(c),p.test(c)&&"w"===l?((t||i)&&(u=!0),0===h?u=!0:t=h):m.test(c)&&"x"===l?((t||i||s)&&(u=!0),d<0?u=!0:i=d):p.test(c)&&"h"===l?((s||i)&&(u=!0),0===h?u=!0:s=h):u=!0;u?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+a+"'."):(f.url=n,t&&(f.w=t),i&&(f.d=i),s&&(f.h=s),g.push(f))}}})?i.apply(t,[]):i)||(e.exports=n)},4241:e=>{var t=String,i=function(){return{isColorSupported:!1,reset:t,bold:t,dim:t,italic:t,underline:t,inverse:t,hidden:t,strikethrough:t,black:t,red:t,green:t,yellow:t,blue:t,magenta:t,cyan:t,white:t,gray:t,bgBlack:t,bgRed:t,bgGreen:t,bgYellow:t,bgBlue:t,bgMagenta:t,bgCyan:t,bgWhite:t}};e.exports=i(),e.exports.createColors=i},1353:(e,t,i)=>{"use strict";let n=i(1019);class r extends n{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}}e.exports=r,r.default=r,n.registerAtRule(r)},9932:(e,t,i)=>{"use strict";let n=i(5631);class r extends n{constructor(e){super(e),this.type="comment"}}e.exports=r,r.default=r},1019:(e,t,i)=>{"use strict";let n,r,s,o,{isClean:a,my:l}=i(5513),c=i(4258),h=i(9932),d=i(5631);function u(e){return e.map((e=>(e.nodes&&(e.nodes=u(e.nodes)),delete e.source,e)))}function p(e){if(e[a]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)p(t)}class m extends d{append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t,i,n=this.getIterator();for(;this.indexes[n]<this.proxyOf.nodes.length&&(t=this.indexes[n],i=e(this.proxyOf.nodes[t],t),!1!==i);)this.indexes[n]+=1;return delete this.indexes[n],i}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...i)=>e[t](...i.map((e=>"function"==typeof e?(t,i)=>e(t.toProxy(),i):e))):"every"===t||"some"===t?i=>e[t](((e,...t)=>i(e.toProxy(),...t))):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map((e=>e.toProxy())):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t],set:(e,t,i)=>(e[t]===i||(e[t]=i,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let i,n=this.index(e),r=this.normalize(t,this.proxyOf.nodes[n]).reverse();n=this.index(e);for(let e of r)this.proxyOf.nodes.splice(n+1,0,e);for(let e in this.indexes)i=this.indexes[e],n<i&&(this.indexes[e]=i+r.length);return this.markDirty(),this}insertBefore(e,t){let i,n=this.index(e),r=0===n&&"prepend",s=this.normalize(t,this.proxyOf.nodes[n],r).reverse();n=this.index(e);for(let e of s)this.proxyOf.nodes.splice(n,0,e);for(let e in this.indexes)i=this.indexes[e],n<=i&&(this.indexes[e]=i+s.length);return this.markDirty(),this}normalize(e,t){if("string"==typeof e)e=u(n(e).nodes);else if(Array.isArray(e)){e=e.slice(0);for(let t of e)t.parent&&t.parent.removeChild(t,"ignore")}else if("root"===e.type&&"document"!==this.type){e=e.nodes.slice(0);for(let t of e)t.parent&&t.parent.removeChild(t,"ignore")}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new c(e)]}else if(e.selector)e=[new r(e)];else if(e.name)e=[new s(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new h(e)]}return e.map((e=>(e[l]||m.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[a]&&p(e),void 0===e.raws.before&&t&&void 0!==t.raws.before&&(e.raws.before=t.raws.before.replace(/\S/g,"")),e.parent=this.proxyOf,e)))}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let i in this.indexes)t=this.indexes[i],t>=e&&(this.indexes[i]=t-1);return this.markDirty(),this}replaceValues(e,t,i){return i||(i=t,t={}),this.walkDecls((n=>{t.props&&!t.props.includes(n.prop)||t.fast&&!n.value.includes(t.fast)||(n.value=n.value.replace(e,i))})),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each(((t,i)=>{let n;try{n=e(t,i)}catch(e){throw t.addToError(e)}return!1!==n&&t.walk&&(n=t.walk(e)),n}))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk(((i,n)=>{if("atrule"===i.type&&e.test(i.name))return t(i,n)})):this.walk(((i,n)=>{if("atrule"===i.type&&i.name===e)return t(i,n)})):(t=e,this.walk(((e,i)=>{if("atrule"===e.type)return t(e,i)})))}walkComments(e){return this.walk(((t,i)=>{if("comment"===t.type)return e(t,i)}))}walkDecls(e,t){return t?e instanceof RegExp?this.walk(((i,n)=>{if("decl"===i.type&&e.test(i.prop))return t(i,n)})):this.walk(((i,n)=>{if("decl"===i.type&&i.prop===e)return t(i,n)})):(t=e,this.walk(((e,i)=>{if("decl"===e.type)return t(e,i)})))}walkRules(e,t){return t?e instanceof RegExp?this.walk(((i,n)=>{if("rule"===i.type&&e.test(i.selector))return t(i,n)})):this.walk(((i,n)=>{if("rule"===i.type&&i.selector===e)return t(i,n)})):(t=e,this.walk(((e,i)=>{if("rule"===e.type)return t(e,i)})))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}m.registerParse=e=>{n=e},m.registerRule=e=>{r=e},m.registerAtRule=e=>{s=e},m.registerRoot=e=>{o=e},e.exports=m,m.default=m,m.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,s.prototype):"rule"===e.type?Object.setPrototypeOf(e,r.prototype):"decl"===e.type?Object.setPrototypeOf(e,c.prototype):"comment"===e.type?Object.setPrototypeOf(e,h.prototype):"root"===e.type&&Object.setPrototypeOf(e,o.prototype),e[l]=!0,e.nodes&&e.nodes.forEach((e=>{m.rebuild(e)}))}},2671:(e,t,i)=>{"use strict";let n=i(4241),r=i(2868);class s extends Error{constructor(e,t,i,n,r,o){super(e),this.name="CssSyntaxError",this.reason=e,r&&(this.file=r),n&&(this.source=n),o&&(this.plugin=o),void 0!==t&&void 0!==i&&("number"==typeof t?(this.line=t,this.column=i):(this.line=t.line,this.column=t.column,this.endLine=i.line,this.endColumn=i.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,s)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=n.isColorSupported),r&&e&&(t=r(t));let i,s,o=t.split(/\r?\n/),a=Math.max(this.line-3,0),l=Math.min(this.line+2,o.length),c=String(l).length;if(e){let{bold:e,gray:t,red:r}=n.createColors(!0);i=t=>e(r(t)),s=e=>t(e)}else i=s=e=>e;return o.slice(a,l).map(((e,t)=>{let n=a+1+t,r=" "+(" "+n).slice(-c)+" | ";if(n===this.line){let t=s(r.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return i(">")+s(r)+e+"\n "+t+i("^")}return" "+s(r)+e})).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}e.exports=s,s.default=s},4258:(e,t,i)=>{"use strict";let n=i(5631);class r extends n{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}}e.exports=r,r.default=r},6461:(e,t,i)=>{"use strict";let n,r,s=i(1019);class o extends s{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new n(new r,this,e).stringify()}}o.registerLazyResult=e=>{n=e},o.registerProcessor=e=>{r=e},e.exports=o,o.default=o},250:(e,t,i)=>{"use strict";let n=i(4258),r=i(7981),s=i(9932),o=i(1353),a=i(5995),l=i(1025),c=i(1675);function h(e,t){if(Array.isArray(e))return e.map((e=>h(e)));let{inputs:i,...d}=e;if(i){t=[];for(let e of i){let i={...e,__proto__:a.prototype};i.map&&(i.map={...i.map,__proto__:r.prototype}),t.push(i)}}if(d.nodes&&(d.nodes=e.nodes.map((e=>h(e,t)))),d.source){let{inputId:e,...i}=d.source;d.source=i,null!=e&&(d.source.input=t[e])}if("root"===d.type)return new l(d);if("decl"===d.type)return new n(d);if("rule"===d.type)return new c(d);if("comment"===d.type)return new s(d);if("atrule"===d.type)return new o(d);throw new Error("Unknown node type: "+e.type)}e.exports=h,h.default=h},5995:(e,t,i)=>{"use strict";let{SourceMapConsumer:n,SourceMapGenerator:r}=i(209),{fileURLToPath:s,pathToFileURL:o}=i(7414),{isAbsolute:a,resolve:l}=i(9830),{nanoid:c}=i(2618),h=i(2868),d=i(2671),u=i(7981),p=Symbol("fromOffsetCache"),m=Boolean(n&&r),f=Boolean(l&&a);class g{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!f||/^\w+:\/\//.test(t.from)||a(t.from)?this.file=t.from:this.file=l(t.from)),f&&m){let e=new u(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+c(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,i,n={}){let r,s,a;if(t&&"object"==typeof t){let e=t,n=i;if("number"==typeof e.offset){let n=this.fromOffset(e.offset);t=n.line,i=n.col}else t=e.line,i=e.column;if("number"==typeof n.offset){let e=this.fromOffset(n.offset);s=e.line,a=e.col}else s=n.line,a=n.column}else if(!i){let e=this.fromOffset(t);t=e.line,i=e.col}let l=this.origin(t,i,s,a);return r=l?new d(e,void 0===l.endLine?l.line:{column:l.column,line:l.line},void 0===l.endLine?l.column:{column:l.endColumn,line:l.endLine},l.source,l.file,n.plugin):new d(e,void 0===s?t:{column:i,line:t},void 0===s?i:{column:a,line:s},this.css,this.file,n.plugin),r.input={column:i,endColumn:a,endLine:s,line:t,source:this.css},this.file&&(o&&(r.input.url=o(this.file).toString()),r.input.file=this.file),r}fromOffset(e){let t,i;if(this[p])i=this[p];else{let e=this.css.split("\n");i=new Array(e.length);let t=0;for(let n=0,r=e.length;n<r;n++)i[n]=t,t+=e[n].length+1;this[p]=i}t=i[i.length-1];let n=0;if(e>=t)n=i.length-1;else{let t,r=i.length-2;for(;n<r;)if(t=n+(r-n>>1),e<i[t])r=t-1;else{if(!(e>=i[t+1])){n=t;break}n=t+1}}return{col:e-i[n]+1,line:n+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:l(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,i,n){if(!this.map)return!1;let r,l,c=this.map.consumer(),h=c.originalPositionFor({column:t,line:e});if(!h.source)return!1;"number"==typeof i&&(r=c.originalPositionFor({column:n,line:i})),l=a(h.source)?o(h.source):new URL(h.source,this.map.consumer().sourceRoot||o(this.map.mapFile));let d={column:h.column,endColumn:r&&r.column,endLine:r&&r.line,line:h.line,url:l.toString()};if("file:"===l.protocol){if(!s)throw new Error("file: protocol is not available in this PostCSS build");d.file=s(l)}let u=c.sourceContentFor(h.source);return u&&(d.source=u),d}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}}e.exports=g,g.default=g,h&&h.registerInput&&h.registerInput(g)},1939:(e,t,i)=>{"use strict";let{isClean:n,my:r}=i(5513),s=i(8505),o=i(7088),a=i(1019),l=i(6461),c=(i(2448),i(3632)),h=i(6939),d=i(1025);const u={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},p={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},m={Once:!0,postcssPlugin:!0,prepare:!0},f=0;function g(e){return"object"==typeof e&&"function"==typeof e.then}function v(e){let t=!1,i=u[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[i,i+"-"+t,f,i+"Exit",i+"Exit-"+t]:t?[i,i+"-"+t,i+"Exit",i+"Exit-"+t]:e.append?[i,f,i+"Exit"]:[i,i+"Exit"]}function y(e){let t;return t="document"===e.type?["Document",f,"DocumentExit"]:"root"===e.type?["Root",f,"RootExit"]:v(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function x(e){return e[n]=!1,e.nodes&&e.nodes.forEach((e=>x(e))),e}let b={};class w{constructor(e,t,i){let n;if(this.stringified=!1,this.processed=!1,"object"!=typeof t||null===t||"root"!==t.type&&"document"!==t.type)if(t instanceof w||t instanceof c)n=x(t.root),t.map&&(void 0===i.map&&(i.map={}),i.map.inline||(i.map.inline=!1),i.map.prev=t.map);else{let e=h;i.syntax&&(e=i.syntax.parse),i.parser&&(e=i.parser),e.parse&&(e=e.parse);try{n=e(t,i)}catch(e){this.processed=!0,this.error=e}n&&!n[r]&&a.rebuild(n)}else n=x(t);this.result=new c(e,n,i),this.helpers={...b,postcss:b,result:this.result},this.plugins=this.processor.plugins.map((e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e))}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let i=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?i.postcssVersion:(e.plugin=i.postcssPlugin,e.setMessage())}catch(e){console&&console.error&&console.error(e)}return e}prepareVisitors(){this.listeners={};let e=(e,t,i)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,i])};for(let t of this.plugins)if("object"==typeof t)for(let i in t){if(!p[i]&&/^[A-Z]/.test(i))throw new Error(`Unknown event ${i} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!m[i])if("object"==typeof t[i])for(let n in t[i])e(t,"*"===n?i:i+"-"+n.toLowerCase(),t[i][n]);else"function"==typeof t[i]&&e(t,i,t[i])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],i=this.runOnRoot(t);if(g(i))try{await i}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[n];){e[n]=!0;let t=[y(e)];for(;t.length>0;){let e=this.visitTick(t);if(g(e))try{await e}catch(e){let i=t[t.length-1].node;throw this.handleError(e,i)}}}if(this.listeners.OnceExit)for(let[t,i]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map((e=>i(e,this.helpers)));await Promise.all(t)}else await i(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map((t=>e.Once(t,this.helpers)));return g(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=o;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new s(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins)if(g(this.runOnRoot(e)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[n];)e[n]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[i,n]of e){let e;this.result.lastPlugin=i;try{e=n(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(g(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:i,visitors:r}=t;if("root"!==i.type&&"document"!==i.type&&!i.parent)return void e.pop();if(r.length>0&&t.visitorIndex<r.length){let[e,n]=r[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===r.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return n(i.toProxy(),this.helpers)}catch(e){throw this.handleError(e,i)}}if(0!==t.iterator){let r,s=t.iterator;for(;r=i.nodes[i.indexes[s]];)if(i.indexes[s]+=1,!r[n])return r[n]=!0,void e.push(y(r));t.iterator=0,delete i.indexes[s]}let s=t.events;for(;t.eventIndex<s.length;){let e=s[t.eventIndex];if(t.eventIndex+=1,e===f)return void(i.nodes&&i.nodes.length&&(i[n]=!0,t.iterator=i.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}walkSync(e){e[n]=!0;let t=v(e);for(let i of t)if(i===f)e.nodes&&e.each((e=>{e[n]||this.walkSync(e)}));else{let t=this.listeners[i];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}}w.registerPostcss=e=>{b=e},e.exports=w,w.default=w,d.registerLazyResult(w),l.registerLazyResult(w)},4715:e=>{"use strict";let t={comma:e=>t.split(e,[","],!0),space:e=>t.split(e,[" ","\n","\t"]),split(e,t,i){let n=[],r="",s=!1,o=0,a=!1,l="",c=!1;for(let i of e)c?c=!1:"\\"===i?c=!0:a?i===l&&(a=!1):'"'===i||"'"===i?(a=!0,l=i):"("===i?o+=1:")"===i?o>0&&(o-=1):0===o&&t.includes(i)&&(s=!0),s?(""!==r&&n.push(r.trim()),r="",s=!1):r+=i;return(i||""!==r)&&n.push(r.trim()),n}};e.exports=t,t.default=t},8505:(e,t,i)=>{"use strict";let{SourceMapConsumer:n,SourceMapGenerator:r}=i(209),{dirname:s,relative:o,resolve:a,sep:l}=i(9830),{pathToFileURL:c}=i(7414),h=i(5995),d=Boolean(n&&r),u=Boolean(s&&a&&o&&l);e.exports=class{constructor(e,t,i,n){this.stringify=e,this.mapOpts=i.map||{},this.root=t,this.opts=i,this.css=n,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t,i=this.toUrl(this.path(e.file)),r=e.root||s(e.file);!1===this.mapOpts.sourcesContent?(t=new n(e.text),t.sourcesContent&&(t.sourcesContent=t.sourcesContent.map((()=>null)))):t=e.consumer(),this.map.applySourceMap(t,i,this.toUrl(this.path(r)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/(\n)?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),u&&d&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,(t=>{e+=t})),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=r.fromSourceMap(e)}else this.map=new r({file:this.outputFile()}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new r({file:this.outputFile()});let e,t,i=1,n=1,s="<no source>",o={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,((r,a,l)=>{if(this.css+=r,a&&"end"!==l&&(o.generated.line=i,o.generated.column=n-1,a.source&&a.source.start?(o.source=this.sourcePath(a),o.original.line=a.source.start.line,o.original.column=a.source.start.column-1,this.map.addMapping(o)):(o.source=s,o.original.line=1,o.original.column=0,this.map.addMapping(o))),e=r.match(/\n/g),e?(i+=e.length,t=r.lastIndexOf("\n"),n=r.length-t):n+=r.length,a&&"start"!==l){let e=a.parent||{raws:{}};("decl"===a.type||"atrule"===a.type&&!a.nodes)&&a===e.last&&!e.raws.semicolon||(a.source&&a.source.end?(o.source=this.sourcePath(a),o.original.line=a.source.end.line,o.original.column=a.source.end.column-1,o.generated.line=i,o.generated.column=n-2,this.map.addMapping(o)):(o.source=s,o.original.line=1,o.original.column=0,o.generated.line=i,o.generated.column=n-1,this.map.addMapping(o)))}}))}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((e=>e.annotation)))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((e=>e.inline)))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((e=>e.withContent()))}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let i=this.opts.to?s(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(i=s(a(i,this.mapOpts.annotation)));let n=o(i,e);return this.memoizedPaths.set(e,n),n}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}}));else{let e=new h(this.css,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk((t=>{if(t.source){let i=t.source.input.from;if(i&&!e[i]){e[i]=!0;let n=this.usesFileUrls?this.toFileUrl(i):this.toUrl(this.path(i));this.map.setSourceContent(n,t.source.input.css)}}}));else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(c){let t=c(e).toString();return this.memoizedFileURLs.set(e,t),t}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===l&&(e=e.replace(/\\/g,"/"));let i=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,i),i}}},7647:(e,t,i)=>{"use strict";let n=i(8505),r=i(7088),s=(i(2448),i(6939));const o=i(3632);class a{constructor(e,t,i){let s;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=i,this._map=void 0;let a=r;this.result=new o(this._processor,s,this._opts),this.result.css=t;let l=this;Object.defineProperty(this.result,"root",{get:()=>l.root});let c=new n(a,s,this._opts,t);if(c.isMap()){let[e,t]=c.generate();e&&(this.result.css=e),t&&(this.result.map=t)}}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=s;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}}e.exports=a,a.default=a},5631:(e,t,i)=>{"use strict";let{isClean:n,my:r}=i(5513),s=i(2671),o=i(1062),a=i(7088);function l(e,t){let i=new e.constructor;for(let n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;if("proxyCache"===n)continue;let r=e[n],s=typeof r;"parent"===n&&"object"===s?t&&(i[n]=t):"source"===n?i[n]=r:Array.isArray(r)?i[n]=r.map((e=>l(e,i))):("object"===s&&null!==r&&(r=l(r)),i[n]=r)}return i}class c{constructor(e={}){this.raws={},this[n]=!1,this[r]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let i of e[t])"function"==typeof i.clone?this.append(i.clone()):this.append(i)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=l(this);for(let i in e)t[i]=e[i];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:i,start:n}=this.rangeBy(t);return this.source.input.error(e,{column:n.column,line:n.line},{column:i.column,line:i.line},t)}return new s(e)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,i)=>(e[t]===i||(e[t]=i,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0)}}markDirty(){if(this[n]){this[n]=!1;let e=this;for(;e=e.parent;)e[n]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let i=this.source.start;if(e.index)i=this.positionInside(e.index,t);else if(e.word){let n=(t=this.toString()).indexOf(e.word);-1!==n&&(i=this.positionInside(n,t))}return i}positionInside(e,t){let i=t||this.toString(),n=this.source.start.column,r=this.source.start.line;for(let t=0;t<e;t++)"\n"===i[t]?(n=1,r+=1):n+=1;return{column:n,line:r}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},i=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let n=this.toString(),r=n.indexOf(e.word);-1!==r&&(t=this.positionInside(r,n),i=this.positionInside(r+e.word.length,n))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?i={column:e.end.column,line:e.end.line}:e.endIndex?i=this.positionInside(e.endIndex):e.index&&(i=this.positionInside(e.index+1));return(i.line<t.line||i.line===t.line&&i.column<=t.column)&&(i={column:t.column+1,line:t.line}),{end:i,start:t}}raw(e,t){return(new o).raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,i=!1;for(let n of e)n===this?i=!0:i?(this.parent.insertAfter(t,n),t=n):this.parent.insertBefore(t,n);i||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let i={},n=null==t;t=t||new Map;let r=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e))continue;if("parent"===e||"proxyCache"===e)continue;let n=this[e];if(Array.isArray(n))i[e]=n.map((e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e));else if("object"==typeof n&&n.toJSON)i[e]=n.toJSON(null,t);else if("source"===e){let s=t.get(n.input);null==s&&(s=r,t.set(n.input,r),r++),i[e]={end:n.end,inputId:s,start:n.start}}else i[e]=n}return n&&(i.inputs=[...t.keys()].map((e=>e.toJSON()))),i}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=a){e.stringify&&(e=e.stringify);let t="";return e(this,(e=>{t+=e})),t}warn(e,t,i){let n={node:this};for(let e in i)n[e]=i[e];return e.warn(t,n)}get proxyOf(){return this}}e.exports=c,c.default=c},6939:(e,t,i)=>{"use strict";let n=i(1019),r=i(8867),s=i(5995);function o(e,t){let i=new s(e,t),n=new r(i);try{n.parse()}catch(e){throw e}return n.root}e.exports=o,o.default=o,n.registerParse(o)},8867:(e,t,i)=>{"use strict";let n=i(4258),r=i(3852),s=i(9932),o=i(1353),a=i(1025),l=i(1675);const c={empty:!0,space:!0};e.exports=class{constructor(e){this.input=e,this.root=new a,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t,i,n,r=new o;r.name=e[1].slice(1),""===r.name&&this.unnamedAtrule(r,e),this.init(r,e[2]);let s=!1,a=!1,l=[],c=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?c.push("("===t?")":"]"):"{"===t&&c.length>0?c.push("}"):t===c[c.length-1]&&c.pop(),0===c.length){if(";"===t){r.source.end=this.getPosition(e[2]),r.source.end.offset++,this.semicolon=!0;break}if("{"===t){a=!0;break}if("}"===t){if(l.length>0){for(n=l.length-1,i=l[n];i&&"space"===i[0];)i=l[--n];i&&(r.source.end=this.getPosition(i[3]||i[2]),r.source.end.offset++)}this.end(e);break}l.push(e)}else l.push(e);if(this.tokenizer.endOfFile()){s=!0;break}}r.raws.between=this.spacesAndCommentsFromEnd(l),l.length?(r.raws.afterName=this.spacesAndCommentsFromStart(l),this.raw(r,"params",l),s&&(e=l[l.length-1],r.source.end=this.getPosition(e[3]||e[2]),r.source.end.offset++,this.spaces=r.raws.between,r.raws.between="")):(r.raws.afterName="",r.params=""),a&&(r.nodes=[],this.current=r)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let i,n=0;for(let r=t-1;r>=0&&(i=e[r],"space"===i[0]||(n+=1,2!==n));r--);throw this.input.error("Missed semicolon","word"===i[0]?i[3]+1:i[2])}colon(e){let t,i,n,r=0;for(let[s,o]of e.entries()){if(t=o,i=t[0],"("===i&&(r+=1),")"===i&&(r-=1),0===r&&":"===i){if(n){if("word"===n[0]&&"progid"===n[1])continue;return s}this.doubleColon(t)}n=t}return!1}comment(e){let t=new s;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let i=e[1].slice(2,-2);if(/^\s*$/.test(i))t.text="",t.raws.left=i,t.raws.right="";else{let e=i.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=r(this.input)}decl(e,t){let i=new n;this.init(i,e[0][2]);let r,s=e[e.length-1];for(";"===s[0]&&(this.semicolon=!0,e.pop()),i.source.end=this.getPosition(s[3]||s[2]||function(e){for(let t=e.length-1;t>=0;t--){let i=e[t],n=i[3]||i[2];if(n)return n}}(e)),i.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),i.raws.before+=e.shift()[1];for(i.source.start=this.getPosition(e[0][2]),i.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;i.prop+=e.shift()[1]}for(i.raws.between="";e.length;){if(r=e.shift(),":"===r[0]){i.raws.between+=r[1];break}"word"===r[0]&&/\w/.test(r[1])&&this.unknownWord([r]),i.raws.between+=r[1]}"_"!==i.prop[0]&&"*"!==i.prop[0]||(i.raws.before+=i.prop[0],i.prop=i.prop.slice(1));let o,a=[];for(;e.length&&(o=e[0][0],"space"===o||"comment"===o);)a.push(e.shift());this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if(r=e[t],"!important"===r[1].toLowerCase()){i.important=!0;let n=this.stringFrom(e,t);n=this.spacesFromEnd(e)+n," !important"!==n&&(i.raws.important=n);break}if("important"===r[1].toLowerCase()){let n=e.slice(0),r="";for(let e=t;e>0;e--){let t=n[e][0];if(0===r.trim().indexOf("!")&&"space"!==t)break;r=n.pop()[1]+r}0===r.trim().indexOf("!")&&(i.important=!0,i.raws.important=r,e=n)}if("space"!==r[0]&&"comment"!==r[0])break}e.some((e=>"space"!==e[0]&&"comment"!==e[0]))&&(i.raws.between+=a.map((e=>e[1])).join(""),a=[]),this.raw(i,"value",a.concat(e),t),i.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new l;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,i=null,n=!1,r=null,s=[],o=e[1].startsWith("--"),a=[],l=e;for(;l;){if(i=l[0],a.push(l),"("===i||"["===i)r||(r=l),s.push("("===i?")":"]");else if(o&&n&&"{"===i)r||(r=l),s.push("}");else if(0===s.length){if(";"===i){if(n)return void this.decl(a,o);break}if("{"===i)return void this.rule(a);if("}"===i){this.tokenizer.back(a.pop()),t=!0;break}":"===i&&(n=!0)}else i===s[s.length-1]&&(s.pop(),0===s.length&&(r=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),s.length>0&&this.unclosedBracket(r),t&&n){if(!o)for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,o)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,i,n){let r,s,o,a,l=i.length,h="",d=!0;for(let e=0;e<l;e+=1)r=i[e],s=r[0],"space"!==s||e!==l-1||n?"comment"===s?(a=i[e-1]?i[e-1][0]:"empty",o=i[e+1]?i[e+1][0]:"empty",c[a]||c[o]||","===h.slice(-1)?d=!1:h+=r[1]):h+=r[1]:d=!1;if(!d){let n=i.reduce(((e,t)=>e+t[1]),"");e.raws[t]={raw:n,value:h}}e[t]=h}rule(e){e.pop();let t=new l;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,i="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)i=e.pop()[1]+i;return i}spacesAndCommentsFromStart(e){let t,i="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)i+=e.shift()[1];return i}spacesFromEnd(e){let t,i="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)i=e.pop()[1]+i;return i}stringFrom(e,t){let i="";for(let n=t;n<e.length;n++)i+=e[n][1];return e.splice(t,e.length-t),i}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}}},20:(e,t,i)=>{"use strict";let n=i(2671),r=i(4258),s=i(1939),o=i(1019),a=i(1723),l=i(7088),c=i(250),h=i(6461),d=i(1728),u=i(9932),p=i(1353),m=i(3632),f=i(5995),g=i(6939),v=i(4715),y=i(1675),x=i(1025),b=i(5631);function w(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new a(e)}w.plugin=function(e,t){let i,n=!1;function r(...i){console&&console.warn&&!n&&(n=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+":  postcss.plugin . :\nhttps://www.w3ctech.com/topic/2226"));let r=t(...i);return r.postcssPlugin=e,r.postcssVersion=(new a).version,r}return Object.defineProperty(r,"postcss",{get:()=>(i||(i=r()),i)}),r.process=function(e,t,i){return w([r(i)]).process(e,t)},r},w.stringify=l,w.parse=g,w.fromJSON=c,w.list=v,w.comment=e=>new u(e),w.atRule=e=>new p(e),w.decl=e=>new r(e),w.rule=e=>new y(e),w.root=e=>new x(e),w.document=e=>new h(e),w.CssSyntaxError=n,w.Declaration=r,w.Container=o,w.Processor=a,w.Document=h,w.Comment=u,w.Warning=d,w.AtRule=p,w.Result=m,w.Input=f,w.Rule=y,w.Root=x,w.Node=b,s.registerPostcss(w),e.exports=w,w.default=w},7981:(e,t,i)=>{"use strict";let{SourceMapConsumer:n,SourceMapGenerator:r}=i(209),{existsSync:s,readFileSync:o}=i(4777),{dirname:a,join:l}=i(9830);class c{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let i=t.map?t.map.prev:void 0,n=this.loadMap(t.from,i);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=a(this.mapFile)),n&&(this.text=n)}consumer(){return this.consumerCache||(this.consumerCache=new n(this.text)),this.consumerCache}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return t=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(t,"base64").toString():window.atob(t);var t;let i=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+i)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let i=e.lastIndexOf(t.pop()),n=e.indexOf("*/",i);i>-1&&n>-1&&(this.annotation=this.getAnnotationURL(e.substring(i,n)))}loadFile(e){if(this.root=a(e),s(e))return this.mapFile=e,o(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof n)return r.fromSourceMap(t).toString();if(t instanceof r)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let i=t(e);if(i){let e=this.loadFile(i);if(!e)throw new Error("Unable to load previous source map: "+i.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=l(a(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}e.exports=c,c.default=c},1723:(e,t,i)=>{"use strict";let n=i(7647),r=i(1939),s=i(6461),o=i(1025);class a{constructor(e=[]){this.version="8.4.32",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let i of e)if(!0===i.postcss?i=i():i.postcss&&(i=i.postcss),"object"==typeof i&&Array.isArray(i.plugins))t=t.concat(i.plugins);else if("object"==typeof i&&i.postcssPlugin)t.push(i);else if("function"==typeof i)t.push(i);else if("object"!=typeof i||!i.parse&&!i.stringify)throw new Error(i+" is not a PostCSS plugin");return t}process(e,t={}){return 0===this.plugins.length&&void 0===t.parser&&void 0===t.stringifier&&void 0===t.syntax?new n(this,e,t):new r(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}}e.exports=a,a.default=a,o.registerProcessor(a),s.registerProcessor(a)},3632:(e,t,i)=>{"use strict";let n=i(1728);class r{constructor(e,t,i){this.processor=e,this.messages=[],this.root=t,this.opts=i,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let i=new n(e,t);return this.messages.push(i),i}warnings(){return this.messages.filter((e=>"warning"===e.type))}get content(){return this.css}}e.exports=r,r.default=r},1025:(e,t,i)=>{"use strict";let n,r,s=i(1019);class o extends s{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,i){let n=super.normalize(e);if(t)if("prepend"===i)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of n)e.raws.before=t.raws.before;return n}removeChild(e,t){let i=this.index(e);return!t&&0===i&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[i].raws.before),super.removeChild(e)}toResult(e={}){return new n(new r,this,e).stringify()}}o.registerLazyResult=e=>{n=e},o.registerProcessor=e=>{r=e},e.exports=o,o.default=o,s.registerRoot(o)},1675:(e,t,i)=>{"use strict";let n=i(1019),r=i(4715);class s extends n{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return r.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,i=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(i)}}e.exports=s,s.default=s,n.registerRule(s)},1062:e=>{"use strict";const t={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};class i{constructor(e){this.builder=e}atrule(e,t){let i="@"+e.name,n=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?i+=e.raws.afterName:n&&(i+=" "),e.nodes)this.block(e,i+n);else{let r=(e.raws.between||"")+(t?";":"");this.builder(i+n+r,e)}}beforeAfter(e,t){let i;i="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let n=e.parent,r=0;for(;n&&"root"!==n.type;)r+=1,n=n.parent;if(i.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<r;e++)i+=t}return i}block(e,t){let i,n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,"after")):i=this.raw(e,"after","emptyBody"),i&&this.builder(i),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let i=this.raw(e,"semicolon");for(let n=0;n<e.nodes.length;n++){let r=e.nodes[n],s=this.raw(r,"before");s&&this.builder(s),this.stringify(r,t!==n||i)}}comment(e){let t=this.raw(e,"left","commentLeft"),i=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+i+"*/",e)}decl(e,t){let i=this.raw(e,"between","colon"),n=e.prop+i+this.rawValue(e,"value");e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)}document(e){this.body(e)}raw(e,i,n){let r;if(n||(n=i),i&&(r=e.raws[i],void 0!==r))return r;let s=e.parent;if("before"===n){if(!s||"root"===s.type&&s.first===e)return"";if(s&&"document"===s.type)return""}if(!s)return t[n];let o=e.root();if(o.rawCache||(o.rawCache={}),void 0!==o.rawCache[n])return o.rawCache[n];if("before"===n||"after"===n)return this.beforeAfter(e,n);{let t="raw"+((a=n)[0].toUpperCase()+a.slice(1));this[t]?r=this[t](o,e):o.walk((e=>{if(r=e.raws[i],void 0!==r)return!1}))}var a;return void 0===r&&(r=t[n]),o.rawCache[n]=r,r}rawBeforeClose(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let i;return e.walkComments((e=>{if(void 0!==e.raws.before)return i=e.raws.before,i.includes("\n")&&(i=i.replace(/[^\n]+$/,"")),!1})),void 0===i?i=this.raw(t,null,"beforeDecl"):i&&(i=i.replace(/\S/g,"")),i}rawBeforeDecl(e,t){let i;return e.walkDecls((e=>{if(void 0!==e.raws.before)return i=e.raws.before,i.includes("\n")&&(i=i.replace(/[^\n]+$/,"")),!1})),void 0===i?i=this.raw(t,null,"beforeRule"):i&&(i=i.replace(/\S/g,"")),i}rawBeforeOpen(e){let t;return e.walk((e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1})),t}rawBeforeRule(e){let t;return e.walk((i=>{if(i.nodes&&(i.parent!==e||e.first!==i)&&void 0!==i.raws.before)return t=i.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls((e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}rawEmptyBody(e){let t;return e.walk((e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1})),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk((i=>{let n=i.parent;if(n&&n!==e&&n.parent&&n.parent===e&&void 0!==i.raws.before){let e=i.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}})),t}rawSemicolon(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1})),t}rawValue(e,t){let i=e[t],n=e.raws[t];return n&&n.value===i?n.raw:i}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}}e.exports=i,i.default=i},7088:(e,t,i)=>{"use strict";let n=i(1062);function r(e,t){new n(t).stringify(e)}e.exports=r,r.default=r},5513:e=>{"use strict";e.exports.isClean=Symbol("isClean"),e.exports.my=Symbol("my")},3852:e=>{"use strict";const t="'".charCodeAt(0),i='"'.charCodeAt(0),n="\\".charCodeAt(0),r="/".charCodeAt(0),s="\n".charCodeAt(0),o=" ".charCodeAt(0),a="\f".charCodeAt(0),l="\t".charCodeAt(0),c="\r".charCodeAt(0),h="[".charCodeAt(0),d="]".charCodeAt(0),u="(".charCodeAt(0),p=")".charCodeAt(0),m="{".charCodeAt(0),f="}".charCodeAt(0),g=";".charCodeAt(0),v="*".charCodeAt(0),y=":".charCodeAt(0),x="@".charCodeAt(0),b=/[\t\n\f\r "#'()/;[\\\]{}]/g,w=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,C=/.[\r\n"'(/\\]/,P=/[\da-f]/i;e.exports=function(e,k={}){let S,I,A,_,E,T,M,$,O,D,B=e.css.valueOf(),L=k.ignoreErrors,R=B.length,N=0,Z=[],F=[];function j(t){throw e.error("Unclosed "+t,N)}return{back:function(e){F.push(e)},endOfFile:function(){return 0===F.length&&N>=R},nextToken:function(e){if(F.length)return F.pop();if(N>=R)return;let k=!!e&&e.ignoreUnclosed;switch(S=B.charCodeAt(N),S){case s:case o:case l:case c:case a:I=N;do{I+=1,S=B.charCodeAt(I)}while(S===o||S===s||S===l||S===c||S===a);D=["space",B.slice(N,I)],N=I-1;break;case h:case d:case m:case f:case y:case g:case p:{let e=String.fromCharCode(S);D=[e,e,N];break}case u:if($=Z.length?Z.pop()[1]:"",O=B.charCodeAt(N+1),"url"===$&&O!==t&&O!==i&&O!==o&&O!==s&&O!==l&&O!==a&&O!==c){I=N;do{if(T=!1,I=B.indexOf(")",I+1),-1===I){if(L||k){I=N;break}j("bracket")}for(M=I;B.charCodeAt(M-1)===n;)M-=1,T=!T}while(T);D=["brackets",B.slice(N,I+1),N,I],N=I}else I=B.indexOf(")",N+1),_=B.slice(N,I+1),-1===I||C.test(_)?D=["(","(",N]:(D=["brackets",_,N,I],N=I);break;case t:case i:A=S===t?"'":'"',I=N;do{if(T=!1,I=B.indexOf(A,I+1),-1===I){if(L||k){I=N+1;break}j("string")}for(M=I;B.charCodeAt(M-1)===n;)M-=1,T=!T}while(T);D=["string",B.slice(N,I+1),N,I],N=I;break;case x:b.lastIndex=N+1,b.test(B),I=0===b.lastIndex?B.length-1:b.lastIndex-2,D=["at-word",B.slice(N,I+1),N,I],N=I;break;case n:for(I=N,E=!0;B.charCodeAt(I+1)===n;)I+=1,E=!E;if(S=B.charCodeAt(I+1),E&&S!==r&&S!==o&&S!==s&&S!==l&&S!==c&&S!==a&&(I+=1,P.test(B.charAt(I)))){for(;P.test(B.charAt(I+1));)I+=1;B.charCodeAt(I+1)===o&&(I+=1)}D=["word",B.slice(N,I+1),N,I],N=I;break;default:S===r&&B.charCodeAt(N+1)===v?(I=B.indexOf("*/",N+2)+1,0===I&&(L||k?I=B.length:j("comment")),D=["comment",B.slice(N,I+1),N,I],N=I):(w.lastIndex=N+1,w.test(B),I=0===w.lastIndex?B.length-1:w.lastIndex-2,D=["word",B.slice(N,I+1),N,I],Z.push(D),N=I)}return N++,D},position:function(){return N}}}},2448:e=>{"use strict";let t={};e.exports=function(e){t[e]||(t[e]=!0,"undefined"!=typeof console&&console.warn&&console.warn(e))}},1728:e=>{"use strict";class t{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}e.exports=t,t.default=t},1036:(e,t,i)=>{const n=i(5106),r=i(2997),{isPlainObject:s}=i(977),o=i(9996),a=i(9430),{parse:l}=i(20),c=["img","audio","video","picture","svg","object","map","iframe","embed"],h=["script","style"];function d(e,t){e&&Object.keys(e).forEach((function(i){t(e[i],i)}))}function u(e,t){return{}.hasOwnProperty.call(e,t)}function p(e,t){const i=[];return d(e,(function(e){t(e)&&i.push(e)})),i}e.exports=f;const m=/^[^\0\t\n\f\r /<=>]+$/;function f(e,t,i){if(null==e)return"";"number"==typeof e&&(e=e.toString());let v="",y="";function x(e,t){const i=this;this.tag=e,this.attribs=t||{},this.tagPosition=v.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){T.length&&(T[T.length-1].text+=i.text)},this.updateParentNodeMediaChildren=function(){T.length&&c.includes(this.tag)&&T[T.length-1].mediaChildren.push(this.tag)}}(t=Object.assign({},f.defaults,t)).parser=Object.assign({},g,t.parser);const b=function(e){return!1===t.allowedTags||(t.allowedTags||[]).indexOf(e)>-1};h.forEach((function(e){b(e)&&!t.allowVulnerableTags&&console.warn(`\n\n Your \`allowedTags\` option includes, \`${e}\`, which is inherently\nvulnerable to XSS attacks. Please remove it from \`allowedTags\`.\nOr, to disable this warning, add the \`allowVulnerableTags\` option\nand ensure you are accounting for this risk.\n\n`)}));const w=t.nonTextTags||["script","style","textarea","option"];let C,P;t.allowedAttributes&&(C={},P={},d(t.allowedAttributes,(function(e,t){C[t]=[];const i=[];e.forEach((function(e){"string"==typeof e&&e.indexOf("*")>=0?i.push(r(e).replace(/\\\*/g,".*")):C[t].push(e)})),i.length&&(P[t]=new RegExp("^("+i.join("|")+")$"))})));const k={},S={},I={};d(t.allowedClasses,(function(e,t){if(C&&(u(C,t)||(C[t]=[]),C[t].push("class")),k[t]=e,Array.isArray(e)){const i=[];k[t]=[],I[t]=[],e.forEach((function(e){"string"==typeof e&&e.indexOf("*")>=0?i.push(r(e).replace(/\\\*/g,".*")):e instanceof RegExp?I[t].push(e):k[t].push(e)})),i.length&&(S[t]=new RegExp("^("+i.join("|")+")$"))}}));const A={};let _,E,T,M,$,O,D;d(t.transformTags,(function(e,t){let i;"function"==typeof e?i=e:"string"==typeof e&&(i=f.simpleTransform(e)),"*"===t?_=i:A[t]=i}));let B=!1;R();const L=new n.Parser({onopentag:function(e,i){if(t.enforceHtmlBoundary&&"html"===e&&R(),O)return void D++;const n=new x(e,i);T.push(n);let r=!1;const c=!!n.text;let h;if(u(A,e)&&(h=A[e](e,i),n.attribs=i=h.attribs,void 0!==h.text&&(n.innerText=h.text),e!==h.tagName&&(n.name=e=h.tagName,$[E]=h.tagName)),_&&(h=_(e,i),n.attribs=i=h.attribs,e!==h.tagName&&(n.name=e=h.tagName,$[E]=h.tagName)),(!b(e)||"recursiveEscape"===t.disallowedTagsMode&&!function(e){for(const t in e)if(u(e,t))return!1;return!0}(M)||null!=t.nestingLimit&&E>=t.nestingLimit)&&(r=!0,M[E]=!0,"discard"===t.disallowedTagsMode&&-1!==w.indexOf(e)&&(O=!0,D=1),M[E]=!0),E++,r){if("discard"===t.disallowedTagsMode)return;y=v,v=""}v+="<"+e,"script"===e&&(t.allowedScriptHostnames||t.allowedScriptDomains)&&(n.innerText=""),(!C||u(C,e)||C["*"])&&d(i,(function(i,r){if(!m.test(r))return void delete n.attribs[r];if(""===i&&!t.allowedEmptyAttributes.includes(r)&&(t.nonBooleanAttributes.includes(r)||t.nonBooleanAttributes.includes("*")))return void delete n.attribs[r];let c=!1;if(!C||u(C,e)&&-1!==C[e].indexOf(r)||C["*"]&&-1!==C["*"].indexOf(r)||u(P,e)&&P[e].test(r)||P["*"]&&P["*"].test(r))c=!0;else if(C&&C[e])for(const t of C[e])if(s(t)&&t.name&&t.name===r){c=!0;let e="";if(!0===t.multiple){const n=i.split(" ");for(const i of n)-1!==t.values.indexOf(i)&&(""===e?e=i:e+=" "+i)}else t.values.indexOf(i)>=0&&(e=i);i=e}if(c){if(-1!==t.allowedSchemesAppliedToAttributes.indexOf(r)&&Z(e,i))return void delete n.attribs[r];if("script"===e&&"src"===r){let e=!0;try{const n=F(i);if(t.allowedScriptHostnames||t.allowedScriptDomains){const i=(t.allowedScriptHostnames||[]).find((function(e){return e===n.url.hostname})),r=(t.allowedScriptDomains||[]).find((function(e){return n.url.hostname===e||n.url.hostname.endsWith(`.${e}`)}));e=i||r}}catch(t){e=!1}if(!e)return void delete n.attribs[r]}if("iframe"===e&&"src"===r){let e=!0;try{const n=F(i);if(n.isRelativeUrl)e=u(t,"allowIframeRelativeUrls")?t.allowIframeRelativeUrls:!t.allowedIframeHostnames&&!t.allowedIframeDomains;else if(t.allowedIframeHostnames||t.allowedIframeDomains){const i=(t.allowedIframeHostnames||[]).find((function(e){return e===n.url.hostname})),r=(t.allowedIframeDomains||[]).find((function(e){return n.url.hostname===e||n.url.hostname.endsWith(`.${e}`)}));e=i||r}}catch(t){e=!1}if(!e)return void delete n.attribs[r]}if("srcset"===r)try{let e=a(i);if(e.forEach((function(e){Z("srcset",e.url)&&(e.evil=!0)})),e=p(e,(function(e){return!e.evil})),!e.length)return void delete n.attribs[r];i=p(e,(function(e){return!e.evil})).map((function(e){if(!e.url)throw new Error("URL missing");return e.url+(e.w?` ${e.w}w`:"")+(e.h?` ${e.h}h`:"")+(e.d?` ${e.d}x`:"")})).join(", "),n.attribs[r]=i}catch(e){return void delete n.attribs[r]}if("class"===r){const t=k[e],s=k["*"],a=S[e],l=I[e],c=[a,S["*"]].concat(l).filter((function(e){return e}));if(!(h=i,d=t&&s?o(t,s):t||s,f=c,i=d?(h=h.split(/\s+/)).filter((function(e){return-1!==d.indexOf(e)||f.some((function(t){return t.test(e)}))})).join(" "):h).length)return void delete n.attribs[r]}if("style"===r)if(t.parseStyleAttributes)try{if(i=function(e){return e.nodes[0].nodes.reduce((function(e,t){return e.push(`${t.prop}:${t.value}${t.important?" !important":""}`),e}),[]).join(";")}(function(e,t){if(!t)return e;const i=e.nodes[0];let n;return n=t[i.selector]&&t["*"]?o(t[i.selector],t["*"]):t[i.selector]||t["*"],n&&(e.nodes[0].nodes=i.nodes.reduce(function(e){return function(t,i){return u(e,i.prop)&&e[i.prop].some((function(e){return e.test(i.value)}))&&t.push(i),t}}(n),[])),e}(l(e+" {"+i+"}",{map:!1}),t.allowedStyles)),0===i.length)return void delete n.attribs[r]}catch(t){return"undefined"!=typeof window&&console.warn('Failed to parse "'+e+" {"+i+"}\", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547"),void delete n.attribs[r]}else if(t.allowedStyles)throw new Error("allowedStyles option cannot be used together with parseStyleAttributes: false.");v+=" "+r,i&&i.length?v+='="'+N(i,!0)+'"':t.allowedEmptyAttributes.includes(r)&&(v+='=""')}else delete n.attribs[r];var h,d,f})),-1!==t.selfClosing.indexOf(e)?v+=" />":(v+=">",!n.innerText||c||t.textFilter||(v+=N(n.innerText),B=!0)),r&&(v=y+N(v),y="")},ontext:function(e){if(O)return;const i=T[T.length-1];let n;if(i&&(n=i.tag,e=void 0!==i.innerText?i.innerText:e),"discard"!==t.disallowedTagsMode||"script"!==n&&"style"!==n){const i=N(e,!1);t.textFilter&&!B?v+=t.textFilter(i,n):B||(v+=i)}else v+=e;T.length&&(T[T.length-1].text+=e)},onclosetag:function(e,i){if(O){if(D--,D)return;O=!1}const n=T.pop();if(!n)return;if(n.tag!==e)return void T.push(n);O=!!t.enforceHtmlBoundary&&"html"===e,E--;const r=M[E];if(r){if(delete M[E],"discard"===t.disallowedTagsMode)return void n.updateParentNodeText();y=v,v=""}$[E]&&(e=$[E],delete $[E]),t.exclusiveFilter&&t.exclusiveFilter(n)?v=v.substr(0,n.tagPosition):(n.updateParentNodeMediaChildren(),n.updateParentNodeText(),-1!==t.selfClosing.indexOf(e)||i&&!b(e)&&["escape","recursiveEscape"].indexOf(t.disallowedTagsMode)>=0?r&&(v=y,y=""):(v+="</"+e+">",r&&(v=y+N(v),y=""),B=!1))}},t.parser);return L.write(e),L.end(),v;function R(){v="",E=0,T=[],M={},$={},O=!1,D=0}function N(e,i){return"string"!=typeof e&&(e+=""),t.parser.decodeEntities&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),i&&(e=e.replace(/"/g,"&quot;"))),e=e.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),i&&(e=e.replace(/"/g,"&quot;")),e}function Z(e,i){for(i=i.replace(/[\x00-\x20]+/g,"");;){const e=i.indexOf("\x3c!--");if(-1===e)break;const t=i.indexOf("--\x3e",e+4);if(-1===t)break;i=i.substring(0,e)+i.substring(t+3)}const n=i.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!n)return!!i.match(/^[/\\]{2}/)&&!t.allowProtocolRelative;const r=n[1].toLowerCase();return u(t.allowedSchemesByTag,e)?-1===t.allowedSchemesByTag[e].indexOf(r):!t.allowedSchemes||-1===t.allowedSchemes.indexOf(r)}function F(e){if((e=e.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//")).startsWith("relative:"))throw new Error("relative: exploit attempt");let t="relative://relative-site";for(let e=0;e<100;e++)t+=`/${e}`;const i=new URL(e,t);return{isRelativeUrl:i&&"relative-site"===i.hostname&&"relative:"===i.protocol,url:i}}}const g={decodeEntities:!0};f.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},allowedEmptyAttributes:["alt"],selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0},f.simpleTransform=function(e,t,i){return i=void 0===i||i,t=t||{},function(n,r){let s;if(i)for(s in t)r[s]=t[s];else r=t;return{tagName:e,attribs:r}}}},2734:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attributeNames=t.elementNames=void 0,t.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((function(e){return[e.toLowerCase(),e]}))),t.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((function(e){return[e.toLowerCase(),e]})))},8427:function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.render=void 0;var a=o(i(9960)),l=i(7772),c=i(2734),h=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function d(e){return e.replace(/"/g,"&quot;")}var u=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function p(e,t){void 0===t&&(t={});for(var i=("length"in e?e:[e]),n="",r=0;r<i.length;r++)n+=m(i[r],t);return n}function m(e,t){switch(e.type){case a.Root:return p(e.children,t);case a.Doctype:case a.Directive:return"<".concat(e.data,">");case a.Comment:return"\x3c!--".concat(e.data,"--\x3e");case a.CDATA:return function(e){return"<![CDATA[".concat(e.children[0].data,"]]>")}(e);case a.Script:case a.Style:case a.Tag:return function(e,t){var i;"foreign"===t.xmlMode&&(e.name=null!==(i=c.elementNames.get(e.name))&&void 0!==i?i:e.name,e.parent&&f.has(e.parent.name)&&(t=n(n({},t),{xmlMode:!1}))),!t.xmlMode&&g.has(e.name)&&(t=n(n({},t),{xmlMode:"foreign"}));var r="<".concat(e.name),s=function(e,t){var i;if(e){var n=!1===(null!==(i=t.encodeEntities)&&void 0!==i?i:t.decodeEntities)?d:t.xmlMode||"utf8"!==t.encodeEntities?l.encodeXML:l.escapeAttribute;return Object.keys(e).map((function(i){var r,s,o=null!==(r=e[i])&&void 0!==r?r:"";return"foreign"===t.xmlMode&&(i=null!==(s=c.attributeNames.get(i))&&void 0!==s?s:i),t.emptyAttrs||t.xmlMode||""!==o?"".concat(i,'="').concat(n(o),'"'):i})).join(" ")}}(e.attribs,t);return s&&(r+=" ".concat(s)),0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&u.has(e.name))?(t.xmlMode||(r+=" "),r+="/>"):(r+=">",e.children.length>0&&(r+=p(e.children,t)),!t.xmlMode&&u.has(e.name)||(r+="</".concat(e.name,">"))),r}(e,t);case a.Text:return function(e,t){var i,n=e.data||"";return!1===(null!==(i=t.encodeEntities)&&void 0!==i?i:t.decodeEntities)||!t.xmlMode&&e.parent&&h.has(e.parent.name)||(n=t.xmlMode||"utf8"!==t.encodeEntities?(0,l.encodeXML)(n):(0,l.escapeText)(n)),n}(e,t)}}t.render=p,t.default=p;var f=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),g=new Set(["svg","math"])},1142:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var s=i(9960),o=i(6218);r(i(6218),t);var a={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=function(){function e(e,t,i){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(i=t,t=a),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:a,this.elementCB=null!=i?i:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var i=this.options.xmlMode?s.ElementType.Tag:void 0,n=new o.Element(e,t,void 0,i);this.addNode(n),this.tagStack.push(n)},e.prototype.ontext=function(e){var t=this.lastNode;if(t&&t.type===s.ElementType.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{var i=new o.Text(e);this.addNode(i),this.lastNode=i}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===s.ElementType.Comment)this.lastNode.data+=e;else{var t=new o.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new o.Text(""),t=new o.CDATA([e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var i=new o.ProcessingInstruction(e,t);this.addNode(i)},e.prototype.handleCallback=function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],i=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),i&&(e.prev=i,i.next=e),e.parent=t,this.lastNode=null},e}();t.DomHandler=l,t.default=l},6218:function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneNode=t.hasChildren=t.isDocument=t.isDirective=t.isComment=t.isText=t.isCDATA=t.isTag=t.Element=t.Document=t.CDATA=t.NodeWithChildren=t.ProcessingInstruction=t.Comment=t.Text=t.DataNode=t.Node=void 0;var o=i(9960),a=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),C(this,e)},e}();t.Node=a;var l=function(e){function t(t){var i=e.call(this)||this;return i.data=t,i}return r(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(a);t.DataNode=l;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.ElementType.Text,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(l);t.Text=c;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.ElementType.Comment,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(l);t.Comment=h;var d=function(e){function t(t,i){var n=e.call(this,i)||this;return n.name=t,n.type=o.ElementType.Directive,n}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(l);t.ProcessingInstruction=d;var u=function(e){function t(t){var i=e.call(this)||this;return i.children=t,i}return r(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(a);t.NodeWithChildren=u;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.ElementType.CDATA,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(u);t.CDATA=p;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.ElementType.Root,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(u);t.Document=m;var f=function(e){function t(t,i,n,r){void 0===n&&(n=[]),void 0===r&&(r="script"===t?o.ElementType.Script:"style"===t?o.ElementType.Style:o.ElementType.Tag);var s=e.call(this,n)||this;return s.name=t,s.attribs=i,s.type=r,s}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map((function(t){var i,n;return{name:t,value:e.attribs[t],namespace:null===(i=e["x-attribsNamespace"])||void 0===i?void 0:i[t],prefix:null===(n=e["x-attribsPrefix"])||void 0===n?void 0:n[t]}}))},enumerable:!1,configurable:!0}),t}(u);function g(e){return(0,o.isTag)(e)}function v(e){return e.type===o.ElementType.CDATA}function y(e){return e.type===o.ElementType.Text}function x(e){return e.type===o.ElementType.Comment}function b(e){return e.type===o.ElementType.Directive}function w(e){return e.type===o.ElementType.Root}function C(e,t){var i;if(void 0===t&&(t=!1),y(e))i=new c(e.data);else if(x(e))i=new h(e.data);else if(g(e)){var n=t?P(e.children):[],r=new f(e.name,s({},e.attribs),n);n.forEach((function(e){return e.parent=r})),null!=e.namespace&&(r.namespace=e.namespace),e["x-attribsNamespace"]&&(r["x-attribsNamespace"]=s({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(r["x-attribsPrefix"]=s({},e["x-attribsPrefix"])),i=r}else if(v(e)){n=t?P(e.children):[];var o=new p(n);n.forEach((function(e){return e.parent=o})),i=o}else if(w(e)){n=t?P(e.children):[];var a=new m(n);n.forEach((function(e){return e.parent=a})),e["x-mode"]&&(a["x-mode"]=e["x-mode"]),i=a}else{if(!b(e))throw new Error("Not implemented yet: ".concat(e.type));var l=new d(e.name,e.data);null!=e["x-name"]&&(l["x-name"]=e["x-name"],l["x-publicId"]=e["x-publicId"],l["x-systemId"]=e["x-systemId"]),i=l}return i.startIndex=e.startIndex,i.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(i.sourceCodeLocation=e.sourceCodeLocation),i}function P(e){for(var t=e.map((function(e){return C(e,!0)})),i=1;i<t.length;i++)t[i].prev=t[i-1],t[i-1].next=t[i];return t}t.Element=f,t.isTag=g,t.isCDATA=v,t.isText=y,t.isComment=x,t.isDirective=b,t.isDocument=w,t.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},t.cloneNode=C},2903:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFeed=void 0;var n=i(5283),r=i(9473);t.getFeed=function(e){var t=l(d,e);return t?"feed"===t.name?function(e){var t,i=e.children,n={type:"atom",items:(0,r.getElementsByTagName)("entry",i).map((function(e){var t,i=e.children,n={media:a(i)};h(n,"id","id",i),h(n,"title","title",i);var r=null===(t=l("link",i))||void 0===t?void 0:t.attribs.href;r&&(n.link=r);var s=c("summary",i)||c("content",i);s&&(n.description=s);var o=c("updated",i);return o&&(n.pubDate=new Date(o)),n}))};h(n,"id","id",i),h(n,"title","title",i);var s=null===(t=l("link",i))||void 0===t?void 0:t.attribs.href;s&&(n.link=s),h(n,"description","subtitle",i);var o=c("updated",i);return o&&(n.updated=new Date(o)),h(n,"author","email",i,!0),n}(t):function(e){var t,i,n=null!==(i=null===(t=l("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==i?i:[],s={type:e.name.substr(0,3),id:"",items:(0,r.getElementsByTagName)("item",e.children).map((function(e){var t=e.children,i={media:a(t)};h(i,"id","guid",t),h(i,"title","title",t),h(i,"link","link",t),h(i,"description","description",t);var n=c("pubDate",t)||c("dc:date",t);return n&&(i.pubDate=new Date(n)),i}))};h(s,"title","title",n),h(s,"link","link",n),h(s,"description","description",n);var o=c("lastBuildDate",n);return o&&(s.updated=new Date(o)),h(s,"author","managingEditor",n,!0),s}(t):null};var s=["url","type","lang"],o=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function a(e){return(0,r.getElementsByTagName)("media:content",e).map((function(e){for(var t=e.attribs,i={medium:t.medium,isDefault:!!t.isDefault},n=0,r=s;n<r.length;n++)t[c=r[n]]&&(i[c]=t[c]);for(var a=0,l=o;a<l.length;a++){var c;t[c=l[a]]&&(i[c]=parseInt(t[c],10))}return t.expression&&(i.expression=t.expression),i}))}function l(e,t){return(0,r.getElementsByTagName)(e,t,!0,1)[0]}function c(e,t,i){return void 0===i&&(i=!1),(0,n.textContent)((0,r.getElementsByTagName)(e,t,i,1)).trim()}function h(e,t,i,n,r){void 0===r&&(r=!1);var s=c(i,n,r);s&&(e[t]=s)}function d(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}},7701:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueSort=t.compareDocumentPosition=t.DocumentPosition=t.removeSubsets=void 0;var n,r=i(1142);function s(e,t){var i=[],s=[];if(e===t)return 0;for(var o=(0,r.hasChildren)(e)?e:e.parent;o;)i.unshift(o),o=o.parent;for(o=(0,r.hasChildren)(t)?t:t.parent;o;)s.unshift(o),o=o.parent;for(var a=Math.min(i.length,s.length),l=0;l<a&&i[l]===s[l];)l++;if(0===l)return n.DISCONNECTED;var c=i[l-1],h=c.children,d=i[l],u=s[l];return h.indexOf(d)>h.indexOf(u)?c===t?n.FOLLOWING|n.CONTAINED_BY:n.FOLLOWING:c===e?n.PRECEDING|n.CONTAINS:n.PRECEDING}t.removeSubsets=function(e){for(var t=e.length;--t>=0;){var i=e[t];if(t>0&&e.lastIndexOf(i,t-1)>=0)e.splice(t,1);else for(var n=i.parent;n;n=n.parent)if(e.includes(n)){e.splice(t,1);break}}return e},function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"}(n=t.DocumentPosition||(t.DocumentPosition={})),t.compareDocumentPosition=s,t.uniqueSort=function(e){return(e=e.filter((function(e,t,i){return!i.includes(e,t+1)}))).sort((function(e,t){var i=s(e,t);return i&n.PRECEDING?-1:i&n.FOLLOWING?1:0})),e}},7241:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasChildren=t.isDocument=t.isComment=t.isText=t.isCDATA=t.isTag=void 0,r(i(5283),t),r(i(7972),t),r(i(4541),t),r(i(2764),t),r(i(9473),t),r(i(7701),t),r(i(2903),t);var s=i(1142);Object.defineProperty(t,"isTag",{enumerable:!0,get:function(){return s.isTag}}),Object.defineProperty(t,"isCDATA",{enumerable:!0,get:function(){return s.isCDATA}}),Object.defineProperty(t,"isText",{enumerable:!0,get:function(){return s.isText}}),Object.defineProperty(t,"isComment",{enumerable:!0,get:function(){return s.isComment}}),Object.defineProperty(t,"isDocument",{enumerable:!0,get:function(){return s.isDocument}}),Object.defineProperty(t,"hasChildren",{enumerable:!0,get:function(){return s.hasChildren}})},9473:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElementsByTagType=t.getElementsByTagName=t.getElementById=t.getElements=t.testElement=void 0;var n=i(1142),r=i(2764),s={tag_name:function(e){return"function"==typeof e?function(t){return(0,n.isTag)(t)&&e(t.name)}:"*"===e?n.isTag:function(t){return(0,n.isTag)(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return(0,n.isText)(t)&&e(t.data)}:function(t){return(0,n.isText)(t)&&t.data===e}}};function o(e,t){return"function"==typeof t?function(i){return(0,n.isTag)(i)&&t(i.attribs[e])}:function(i){return(0,n.isTag)(i)&&i.attribs[e]===t}}function a(e,t){return function(i){return e(i)||t(i)}}function l(e){var t=Object.keys(e).map((function(t){var i=e[t];return Object.prototype.hasOwnProperty.call(s,t)?s[t](i):o(t,i)}));return 0===t.length?null:t.reduce(a)}t.testElement=function(e,t){var i=l(e);return!i||i(t)},t.getElements=function(e,t,i,n){void 0===n&&(n=1/0);var s=l(e);return s?(0,r.filter)(s,t,i,n):[]},t.getElementById=function(e,t,i){return void 0===i&&(i=!0),Array.isArray(t)||(t=[t]),(0,r.findOne)(o("id",e),t,i)},t.getElementsByTagName=function(e,t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=1/0),(0,r.filter)(s.tag_name(e),t,i,n)},t.getElementsByTagType=function(e,t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=1/0),(0,r.filter)(s.tag_type(e),t,i,n)}},4541:(e,t)=>{"use strict";function i(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children,i=t.lastIndexOf(e);i>=0&&t.splice(i,1)}e.next=null,e.prev=null,e.parent=null}Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=t.prependChild=t.append=t.appendChild=t.replaceElement=t.removeElement=void 0,t.removeElement=i,t.replaceElement=function(e,t){var i=t.prev=e.prev;i&&(i.next=t);var n=t.next=e.next;n&&(n.prev=t);var r=t.parent=e.parent;if(r){var s=r.children;s[s.lastIndexOf(e)]=t,e.parent=null}},t.appendChild=function(e,t){if(i(t),t.next=null,t.parent=e,e.children.push(t)>1){var n=e.children[e.children.length-2];n.next=t,t.prev=n}else t.prev=null},t.append=function(e,t){i(t);var n=e.parent,r=e.next;if(t.next=r,t.prev=e,e.next=t,t.parent=n,r){if(r.prev=t,n){var s=n.children;s.splice(s.lastIndexOf(r),0,t)}}else n&&n.children.push(t)},t.prependChild=function(e,t){if(i(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){var n=e.children[1];n.prev=t,t.next=n}else t.next=null},t.prepend=function(e,t){i(t);var n=e.parent;if(n){var r=n.children;r.splice(r.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t}},2764:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAll=t.existsOne=t.findOne=t.findOneChild=t.find=t.filter=void 0;var n=i(1142);function r(e,t,i,r){for(var s=[],o=[t],a=[0];;)if(a[0]>=o[0].length){if(1===a.length)return s;o.shift(),a.shift()}else{var l=o[0][a[0]++];if(e(l)&&(s.push(l),--r<=0))return s;i&&(0,n.hasChildren)(l)&&l.children.length>0&&(a.unshift(0),o.unshift(l.children))}}t.filter=function(e,t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=1/0),r(e,Array.isArray(t)?t:[t],i,n)},t.find=r,t.findOneChild=function(e,t){return t.find(e)},t.findOne=function e(t,i,r){void 0===r&&(r=!0);for(var s=null,o=0;o<i.length&&!s;o++){var a=i[o];(0,n.isTag)(a)&&(t(a)?s=a:r&&a.children.length>0&&(s=e(t,a.children,!0)))}return s},t.existsOne=function e(t,i){return i.some((function(i){return(0,n.isTag)(i)&&(t(i)||e(t,i.children))}))},t.findAll=function(e,t){for(var i=[],r=[t],s=[0];;)if(s[0]>=r[0].length){if(1===r.length)return i;r.shift(),s.shift()}else{var o=r[0][s[0]++];(0,n.isTag)(o)&&(e(o)&&i.push(o),o.children.length>0&&(s.unshift(0),r.unshift(o.children)))}}},5283:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.innerText=t.textContent=t.getText=t.getInnerHTML=t.getOuterHTML=void 0;var r=i(1142),s=n(i(8427)),o=i(9960);function a(e,t){return(0,s.default)(e,t)}t.getOuterHTML=a,t.getInnerHTML=function(e,t){return(0,r.hasChildren)(e)?e.children.map((function(e){return a(e,t)})).join(""):""},t.getText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,r.isTag)(t)?"br"===t.name?"\n":e(t.children):(0,r.isCDATA)(t)?e(t.children):(0,r.isText)(t)?t.data:""},t.textContent=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,r.hasChildren)(t)&&!(0,r.isComment)(t)?e(t.children):(0,r.isText)(t)?t.data:""},t.innerText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,r.hasChildren)(t)&&(t.type===o.ElementType.Tag||(0,r.isCDATA)(t))?e(t.children):(0,r.isText)(t)?t.data:""}},7972:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prevElementSibling=t.nextElementSibling=t.getName=t.hasAttrib=t.getAttributeValue=t.getSiblings=t.getParent=t.getChildren=void 0;var n=i(1142);function r(e){return(0,n.hasChildren)(e)?e.children:[]}function s(e){return e.parent||null}t.getChildren=r,t.getParent=s,t.getSiblings=function(e){var t=s(e);if(null!=t)return r(t);for(var i=[e],n=e.prev,o=e.next;null!=n;)i.unshift(n),n=n.prev;for(;null!=o;)i.push(o),o=o.next;return i},t.getAttributeValue=function(e,t){var i;return null===(i=e.attribs)||void 0===i?void 0:i[t]},t.hasAttrib=function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},t.getName=function(e){return e.name},t.nextElementSibling=function(e){for(var t=e.next;null!==t&&!(0,n.isTag)(t);)t=t.next;return t},t.prevElementSibling=function(e){for(var t=e.prev;null!==t&&!(0,n.isTag)(t);)t=t.prev;return t}},722:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXML=t.decodeHTMLStrict=t.decodeHTMLAttribute=t.decodeHTML=t.determineBranch=t.EntityDecoder=t.DecodingMode=t.BinTrieFlags=t.fromCodePoint=t.replaceCodePoint=t.decodeCodePoint=t.xmlDecodeTree=t.htmlDecodeTree=void 0;var a=o(i(39));t.htmlDecodeTree=a.default;var l=o(i(5518));t.xmlDecodeTree=l.default;var c=s(i(2913));t.decodeCodePoint=c.default;var h,d,u,p,m=i(2913);function f(e){return e>=h.ZERO&&e<=h.NINE}Object.defineProperty(t,"replaceCodePoint",{enumerable:!0,get:function(){return m.replaceCodePoint}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return m.fromCodePoint}}),function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(h||(h={})),function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(d=t.BinTrieFlags||(t.BinTrieFlags={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(u||(u={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(p=t.DecodingMode||(t.DecodingMode={}));var g=function(){function e(e,t,i){this.decodeTree=e,this.emitCodePoint=t,this.errors=i,this.state=u.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=p.Strict}return e.prototype.startEntity=function(e){this.decodeMode=e,this.state=u.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},e.prototype.write=function(e,t){switch(this.state){case u.EntityStart:return e.charCodeAt(t)===h.NUM?(this.state=u.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=u.NamedEntity,this.stateNamedEntity(e,t));case u.NumericStart:return this.stateNumericStart(e,t);case u.NumericDecimal:return this.stateNumericDecimal(e,t);case u.NumericHex:return this.stateNumericHex(e,t);case u.NamedEntity:return this.stateNamedEntity(e,t)}},e.prototype.stateNumericStart=function(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===h.LOWER_X?(this.state=u.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=u.NumericDecimal,this.stateNumericDecimal(e,t))},e.prototype.addToNumericResult=function(e,t,i,n){if(t!==i){var r=i-t;this.result=this.result*Math.pow(n,r)+parseInt(e.substr(t,r),n),this.consumed+=r}},e.prototype.stateNumericHex=function(e,t){for(var i,n=t;t<e.length;){var r=e.charCodeAt(t);if(!(f(r)||(i=r,i>=h.UPPER_A&&i<=h.UPPER_F||i>=h.LOWER_A&&i<=h.LOWER_F)))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(r,3);t+=1}return this.addToNumericResult(e,n,t,16),-1},e.prototype.stateNumericDecimal=function(e,t){for(var i=t;t<e.length;){var n=e.charCodeAt(t);if(!f(n))return this.addToNumericResult(e,i,t,10),this.emitNumericEntity(n,2);t+=1}return this.addToNumericResult(e,i,t,10),-1},e.prototype.emitNumericEntity=function(e,t){var i;if(this.consumed<=t)return null===(i=this.errors)||void 0===i||i.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===h.SEMI)this.consumed+=1;else if(this.decodeMode===p.Strict)return 0;return this.emitCodePoint((0,c.replaceCodePoint)(this.result),this.consumed),this.errors&&(e!==h.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},e.prototype.stateNamedEntity=function(e,t){for(var i=this.decodeTree,n=i[this.treeIndex],r=(n&d.VALUE_LENGTH)>>14;t<e.length;t++,this.excess++){var s=e.charCodeAt(t);if(this.treeIndex=y(i,n,this.treeIndex+Math.max(1,r),s),this.treeIndex<0)return 0===this.result||this.decodeMode===p.Attribute&&(0===r||((o=s)===h.EQUALS||function(e){return e>=h.UPPER_A&&e<=h.UPPER_Z||e>=h.LOWER_A&&e<=h.LOWER_Z||f(e)}(o)))?0:this.emitNotTerminatedNamedEntity();if(0!=(r=((n=i[this.treeIndex])&d.VALUE_LENGTH)>>14)){if(s===h.SEMI)return this.emitNamedEntityData(this.treeIndex,r,this.consumed+this.excess);this.decodeMode!==p.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}var o;return-1},e.prototype.emitNotTerminatedNamedEntity=function(){var e,t=this.result,i=(this.decodeTree[t]&d.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,i,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed},e.prototype.emitNamedEntityData=function(e,t,i){var n=this.decodeTree;return this.emitCodePoint(1===t?n[e]&~d.VALUE_LENGTH:n[e+1],i),3===t&&this.emitCodePoint(n[e+2],i),i},e.prototype.end=function(){var e;switch(this.state){case u.NamedEntity:return 0===this.result||this.decodeMode===p.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case u.NumericDecimal:return this.emitNumericEntity(0,2);case u.NumericHex:return this.emitNumericEntity(0,3);case u.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case u.EntityStart:return 0}},e}();function v(e){var t="",i=new g(e,(function(e){return t+=(0,c.fromCodePoint)(e)}));return function(e,n){for(var r=0,s=0;(s=e.indexOf("&",s))>=0;){t+=e.slice(r,s),i.startEntity(n);var o=i.write(e,s+1);if(o<0){r=s+i.end();break}r=s+o,s=0===o?r+1:r}var a=t+e.slice(r);return t="",a}}function y(e,t,i,n){var r=(t&d.BRANCH_LENGTH)>>7,s=t&d.JUMP_TABLE;if(0===r)return 0!==s&&n===s?i:-1;if(s){var o=n-s;return o<0||o>=r?-1:e[i+o]-1}for(var a=i,l=a+r-1;a<=l;){var c=a+l>>>1,h=e[c];if(h<n)a=c+1;else{if(!(h>n))return e[c+r];l=c-1}}return-1}t.EntityDecoder=g,t.determineBranch=y;var x=v(a.default),b=v(l.default);t.decodeHTML=function(e,t){return void 0===t&&(t=p.Legacy),x(e,t)},t.decodeHTMLAttribute=function(e){return x(e,p.Attribute)},t.decodeHTMLStrict=function(e){return x(e,p.Strict)},t.decodeXML=function(e){return b(e,p.Strict)}},2913:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.replaceCodePoint=t.fromCodePoint=void 0;var n=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function r(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=n.get(e))&&void 0!==t?t:e}t.fromCodePoint=null!==(i=String.fromCodePoint)&&void 0!==i?i:function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+String.fromCharCode(e)},t.replaceCodePoint=r,t.default=function(e){return(0,t.fromCodePoint)(r(e))}},571:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.encodeNonAsciiHTML=t.encodeHTML=void 0;var r=n(i(7048)),s=i(7084),o=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function a(e,t){for(var i,n="",o=0;null!==(i=e.exec(t));){var a=i.index;n+=t.substring(o,a);var l=t.charCodeAt(a),c=r.default.get(l);if("object"==typeof c){if(a+1<t.length){var h=t.charCodeAt(a+1),d="number"==typeof c.n?c.n===h?c.o:void 0:c.n.get(h);if(void 0!==d){n+=d,o=e.lastIndex+=1;continue}}c=c.v}if(void 0!==c)n+=c,o=a+1;else{var u=(0,s.getCodePoint)(t,a);n+="&#x".concat(u.toString(16),";"),o=e.lastIndex+=Number(u!==l)}}return n+t.substr(o)}t.encodeHTML=function(e){return a(o,e)},t.encodeNonAsciiHTML=function(e){return a(s.xmlReplacer,e)}},7084:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.getCodePoint=t.xmlReplacer=void 0,t.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var i=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);function n(e){for(var n,r="",s=0;null!==(n=t.xmlReplacer.exec(e));){var o=n.index,a=e.charCodeAt(o),l=i.get(a);void 0!==l?(r+=e.substring(s,o)+l,s=o+1):(r+="".concat(e.substring(s,o),"&#x").concat((0,t.getCodePoint)(e,o).toString(16),";"),s=t.xmlReplacer.lastIndex+=Number(55296==(64512&a)))}return r+e.substr(s)}function r(e,t){return function(i){for(var n,r=0,s="";n=e.exec(i);)r!==n.index&&(s+=i.substring(r,n.index)),s+=t.get(n[0].charCodeAt(0)),r=n.index+1;return s+i.substring(r)}}t.getCodePoint=null!=String.prototype.codePointAt?function(e,t){return e.codePointAt(t)}:function(e,t){return 55296==(64512&e.charCodeAt(t))?1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t)},t.encodeXML=n,t.escape=n,t.escapeUTF8=r(/[&<>'"]/g,i),t.escapeAttribute=r(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),t.escapeText=r(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))},39:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map((function(e){return e.charCodeAt(0)})))},5518:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Uint16Array("aglq\t\0\0p;os;t;t;uot;".split("").map((function(e){return e.charCodeAt(0)})))},7048:(e,t)=>{"use strict";function i(e){for(var t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Map(i([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(i([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(i([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(i([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]))},7772:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLAttribute=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.DecodingMode=t.EntityDecoder=t.encodeHTML5=t.encodeHTML4=t.encodeNonAsciiHTML=t.encodeHTML=t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.encode=t.decodeStrict=t.decode=t.EncodingMode=t.EntityLevel=void 0;var n,r,s=i(722),o=i(571),a=i(7084);function l(e,t){if(void 0===t&&(t=n.XML),("number"==typeof t?t:t.level)===n.HTML){var i="object"==typeof t?t.mode:void 0;return(0,s.decodeHTML)(e,i)}return(0,s.decodeXML)(e)}!function(e){e[e.XML=0]="XML",e[e.HTML=1]="HTML"}(n=t.EntityLevel||(t.EntityLevel={})),function(e){e[e.UTF8=0]="UTF8",e[e.ASCII=1]="ASCII",e[e.Extensive=2]="Extensive",e[e.Attribute=3]="Attribute",e[e.Text=4]="Text"}(r=t.EncodingMode||(t.EncodingMode={})),t.decode=l,t.decodeStrict=function(e,t){var i;void 0===t&&(t=n.XML);var r="number"==typeof t?{level:t}:t;return null!==(i=r.mode)&&void 0!==i||(r.mode=s.DecodingMode.Strict),l(e,r)},t.encode=function(e,t){void 0===t&&(t=n.XML);var i="number"==typeof t?{level:t}:t;return i.mode===r.UTF8?(0,a.escapeUTF8)(e):i.mode===r.Attribute?(0,a.escapeAttribute)(e):i.mode===r.Text?(0,a.escapeText)(e):i.level===n.HTML?i.mode===r.ASCII?(0,o.encodeNonAsciiHTML)(e):(0,o.encodeHTML)(e):(0,a.encodeXML)(e)};var c=i(7084);Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return c.encodeXML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return c.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return c.escapeUTF8}}),Object.defineProperty(t,"escapeAttribute",{enumerable:!0,get:function(){return c.escapeAttribute}}),Object.defineProperty(t,"escapeText",{enumerable:!0,get:function(){return c.escapeText}});var h=i(571);Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return h.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return h.encodeNonAsciiHTML}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return h.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return h.encodeHTML}});var d=i(722);Object.defineProperty(t,"EntityDecoder",{enumerable:!0,get:function(){return d.EntityDecoder}}),Object.defineProperty(t,"DecodingMode",{enumerable:!0,get:function(){return d.DecodingMode}}),Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return d.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTMLAttribute",{enumerable:!0,get:function(){return d.decodeHTMLAttribute}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return d.decodeXML}})},2997:e=>{"use strict";e.exports=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}},6666:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var o=s(i(34)),a=i(722),l=new Set(["input","option","optgroup","select","button","datalist","textarea"]),c=new Set(["p"]),h=new Set(["thead","tbody"]),d=new Set(["dd","dt"]),u=new Set(["rt","rp"]),p=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",c],["h1",c],["h2",c],["h3",c],["h4",c],["h5",c],["h6",c],["select",l],["input",l],["output",l],["button",l],["datalist",l],["textarea",l],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",d],["dt",d],["address",c],["article",c],["aside",c],["blockquote",c],["details",c],["div",c],["dl",c],["fieldset",c],["figcaption",c],["figure",c],["footer",c],["form",c],["header",c],["hr",c],["main",c],["nav",c],["ol",c],["pre",c],["section",c],["table",c],["ul",c],["rt",u],["rp",u],["tbody",h],["tfoot",h]]),m=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),g=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),v=/\s|\//,y=function(){function e(e,t){var i,n,r,s,a;void 0===t&&(t={}),this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=null!=e?e:{},this.lowerCaseTagNames=null!==(i=t.lowerCaseTags)&&void 0!==i?i:!t.xmlMode,this.lowerCaseAttributeNames=null!==(n=t.lowerCaseAttributeNames)&&void 0!==n?n:!t.xmlMode,this.tokenizer=new(null!==(r=t.Tokenizer)&&void 0!==r?r:o.default)(this.options,this),null===(a=(s=this.cbs).onparserinit)||void 0===a||a.call(s,this)}return e.prototype.ontext=function(e,t){var i,n,r=this.getSlice(e,t);this.endIndex=t-1,null===(n=(i=this.cbs).ontext)||void 0===n||n.call(i,r),this.startIndex=t},e.prototype.ontextentity=function(e){var t,i,n=this.tokenizer.getSectionStart();this.endIndex=n-1,null===(i=(t=this.cbs).ontext)||void 0===i||i.call(t,(0,a.fromCodePoint)(e)),this.startIndex=n},e.prototype.isVoidElement=function(e){return!this.options.xmlMode&&m.has(e)},e.prototype.onopentagname=function(e,t){this.endIndex=t;var i=this.getSlice(e,t);this.lowerCaseTagNames&&(i=i.toLowerCase()),this.emitOpenTag(i)},e.prototype.emitOpenTag=function(e){var t,i,n,r;this.openTagStart=this.startIndex,this.tagname=e;var s=!this.options.xmlMode&&p.get(e);if(s)for(;this.stack.length>0&&s.has(this.stack[this.stack.length-1]);){var o=this.stack.pop();null===(i=(t=this.cbs).onclosetag)||void 0===i||i.call(t,o,!0)}this.isVoidElement(e)||(this.stack.push(e),f.has(e)?this.foreignContext.push(!0):g.has(e)&&this.foreignContext.push(!1)),null===(r=(n=this.cbs).onopentagname)||void 0===r||r.call(n,e),this.cbs.onopentag&&(this.attribs={})},e.prototype.endOpenTag=function(e){var t,i;this.startIndex=this.openTagStart,this.attribs&&(null===(i=(t=this.cbs).onopentag)||void 0===i||i.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},e.prototype.onopentagend=function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1},e.prototype.onclosetag=function(e,t){var i,n,r,s,o,a;this.endIndex=t;var l=this.getSlice(e,t);if(this.lowerCaseTagNames&&(l=l.toLowerCase()),(f.has(l)||g.has(l))&&this.foreignContext.pop(),this.isVoidElement(l))this.options.xmlMode||"br"!==l||(null===(n=(i=this.cbs).onopentagname)||void 0===n||n.call(i,"br"),null===(s=(r=this.cbs).onopentag)||void 0===s||s.call(r,"br",{},!0),null===(a=(o=this.cbs).onclosetag)||void 0===a||a.call(o,"br",!1));else{var c=this.stack.lastIndexOf(l);if(-1!==c)if(this.cbs.onclosetag)for(var h=this.stack.length-c;h--;)this.cbs.onclosetag(this.stack.pop(),0!==h);else this.stack.length=c;else this.options.xmlMode||"p"!==l||(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1},e.prototype.onselfclosingtag=function(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)},e.prototype.closeCurrentTag=function(e){var t,i,n=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===n&&(null===(i=(t=this.cbs).onclosetag)||void 0===i||i.call(t,n,!e),this.stack.pop())},e.prototype.onattribname=function(e,t){this.startIndex=e;var i=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?i.toLowerCase():i},e.prototype.onattribdata=function(e,t){this.attribvalue+=this.getSlice(e,t)},e.prototype.onattribentity=function(e){this.attribvalue+=(0,a.fromCodePoint)(e)},e.prototype.onattribend=function(e,t){var i,n;this.endIndex=t,null===(n=(i=this.cbs).onattribute)||void 0===n||n.call(i,this.attribname,this.attribvalue,e===o.QuoteType.Double?'"':e===o.QuoteType.Single?"'":e===o.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},e.prototype.getInstructionName=function(e){var t=e.search(v),i=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(i=i.toLowerCase()),i},e.prototype.ondeclaration=function(e,t){this.endIndex=t;var i=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var n=this.getInstructionName(i);this.cbs.onprocessinginstruction("!".concat(n),"!".concat(i))}this.startIndex=t+1},e.prototype.onprocessinginstruction=function(e,t){this.endIndex=t;var i=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var n=this.getInstructionName(i);this.cbs.onprocessinginstruction("?".concat(n),"?".concat(i))}this.startIndex=t+1},e.prototype.oncomment=function(e,t,i){var n,r,s,o;this.endIndex=t,null===(r=(n=this.cbs).oncomment)||void 0===r||r.call(n,this.getSlice(e,t-i)),null===(o=(s=this.cbs).oncommentend)||void 0===o||o.call(s),this.startIndex=t+1},e.prototype.oncdata=function(e,t,i){var n,r,s,o,a,l,c,h,d,u;this.endIndex=t;var p=this.getSlice(e,t-i);this.options.xmlMode||this.options.recognizeCDATA?(null===(r=(n=this.cbs).oncdatastart)||void 0===r||r.call(n),null===(o=(s=this.cbs).ontext)||void 0===o||o.call(s,p),null===(l=(a=this.cbs).oncdataend)||void 0===l||l.call(a)):(null===(h=(c=this.cbs).oncomment)||void 0===h||h.call(c,"[CDATA[".concat(p,"]]")),null===(u=(d=this.cbs).oncommentend)||void 0===u||u.call(d)),this.startIndex=t+1},e.prototype.onend=function(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var i=this.stack.length;i>0;this.cbs.onclosetag(this.stack[--i],!0));}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)},e.prototype.reset=function(){var e,t,i,n;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,null===(n=(i=this.cbs).onparserinit)||void 0===n||n.call(i,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},e.prototype.parseComplete=function(e){this.reset(),this.end(e)},e.prototype.getSlice=function(e,t){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var i=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);t-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),i+=this.buffers[0].slice(0,t-this.bufferOffset);return i},e.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},e.prototype.write=function(e){var t,i;this.ended?null===(i=(t=this.cbs).onerror)||void 0===i||i.call(t,new Error(".write() after done!")):(this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++))},e.prototype.end=function(e){var t,i;this.ended?null===(i=(t=this.cbs).onerror)||void 0===i||i.call(t,new Error(".end() after done!")):(e&&this.write(e),this.ended=!0,this.tokenizer.end())},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},e.prototype.parseChunk=function(e){this.write(e)},e.prototype.done=function(e){this.end(e)},e}();t.Parser=y},34:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuoteType=void 0;var n,r,s,o=i(722);function a(e){return e===n.Space||e===n.NewLine||e===n.Tab||e===n.FormFeed||e===n.CarriageReturn}function l(e){return e===n.Slash||e===n.Gt||a(e)}function c(e){return e>=n.Zero&&e<=n.Nine}!function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"}(n||(n={})),function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.SpecialStartSequence=23]="SpecialStartSequence",e[e.InSpecialTag=24]="InSpecialTag",e[e.BeforeEntity=25]="BeforeEntity",e[e.BeforeNumericEntity=26]="BeforeNumericEntity",e[e.InNamedEntity=27]="InNamedEntity",e[e.InNumericEntity=28]="InNumericEntity",e[e.InHexEntity=29]="InHexEntity"}(r||(r={})),function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"}(s=t.QuoteType||(t.QuoteType={}));var h={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},d=function(){function e(e,t){var i=e.xmlMode,n=void 0!==i&&i,s=e.decodeEntities,a=void 0===s||s;this.cbs=t,this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=n,this.decodeEntities=a,this.entityTrie=n?o.xmlDecodeTree:o.htmlDecodeTree}return e.prototype.reset=function(){this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},e.prototype.write=function(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()},e.prototype.end=function(){this.running&&this.finish()},e.prototype.pause=function(){this.running=!1},e.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},e.prototype.getIndex=function(){return this.index},e.prototype.getSectionStart=function(){return this.sectionStart},e.prototype.stateText=function(e){e===n.Lt||!this.decodeEntities&&this.fastForwardTo(n.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=r.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===n.Amp&&(this.state=r.BeforeEntity)},e.prototype.stateSpecialStartSequence=function(e){var t=this.sequenceIndex===this.currentSequence.length;if(t?l(e):(32|e)===this.currentSequence[this.sequenceIndex]){if(!t)return void this.sequenceIndex++}else this.isSpecial=!1;this.sequenceIndex=0,this.state=r.InTagName,this.stateInTagName(e)},e.prototype.stateInSpecialTag=function(e){if(this.sequenceIndex===this.currentSequence.length){if(e===n.Gt||a(e)){var t=this.index-this.currentSequence.length;if(this.sectionStart<t){var i=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=i}return this.isSpecial=!1,this.sectionStart=t+2,void this.stateInClosingTagName(e)}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===h.TitleEnd?this.decodeEntities&&e===n.Amp&&(this.state=r.BeforeEntity):this.fastForwardTo(n.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=Number(e===n.Lt)},e.prototype.stateCDATASequence=function(e){e===h.Cdata[this.sequenceIndex]?++this.sequenceIndex===h.Cdata.length&&(this.state=r.InCommentLike,this.currentSequence=h.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=r.InDeclaration,this.stateInDeclaration(e))},e.prototype.fastForwardTo=function(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1},e.prototype.stateInCommentLike=function(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===h.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=r.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},e.prototype.isTagStartChar=function(e){return this.xmlMode?!l(e):function(e){return e>=n.LowerA&&e<=n.LowerZ||e>=n.UpperA&&e<=n.UpperZ}(e)},e.prototype.startSpecial=function(e,t){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=t,this.state=r.SpecialStartSequence},e.prototype.stateBeforeTagName=function(e){if(e===n.ExclamationMark)this.state=r.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===n.Questionmark)this.state=r.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){var t=32|e;this.sectionStart=this.index,this.xmlMode||t!==h.TitleEnd[2]?this.state=this.xmlMode||t!==h.ScriptEnd[2]?r.InTagName:r.BeforeSpecialS:this.startSpecial(h.TitleEnd,3)}else e===n.Slash?this.state=r.BeforeClosingTagName:(this.state=r.Text,this.stateText(e))},e.prototype.stateInTagName=function(e){l(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateBeforeClosingTagName=function(e){a(e)||(e===n.Gt?this.state=r.Text:(this.state=this.isTagStartChar(e)?r.InClosingTagName:r.InSpecialComment,this.sectionStart=this.index))},e.prototype.stateInClosingTagName=function(e){(e===n.Gt||a(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterClosingTagName,this.stateAfterClosingTagName(e))},e.prototype.stateAfterClosingTagName=function(e){(e===n.Gt||this.fastForwardTo(n.Gt))&&(this.state=r.Text,this.baseState=r.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeAttributeName=function(e){e===n.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=r.InSpecialTag,this.sequenceIndex=0):this.state=r.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===n.Slash?this.state=r.InSelfClosingTag:a(e)||(this.state=r.InAttributeName,this.sectionStart=this.index)},e.prototype.stateInSelfClosingTag=function(e){e===n.Gt?(this.cbs.onselfclosingtag(this.index),this.state=r.Text,this.baseState=r.Text,this.sectionStart=this.index+1,this.isSpecial=!1):a(e)||(this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateInAttributeName=function(e){(e===n.Eq||l(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterAttributeName,this.stateAfterAttributeName(e))},e.prototype.stateAfterAttributeName=function(e){e===n.Eq?this.state=r.BeforeAttributeValue:e===n.Slash||e===n.Gt?(this.cbs.onattribend(s.NoValue,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e)):a(e)||(this.cbs.onattribend(s.NoValue,this.index),this.state=r.InAttributeName,this.sectionStart=this.index)},e.prototype.stateBeforeAttributeValue=function(e){e===n.DoubleQuote?(this.state=r.InAttributeValueDq,this.sectionStart=this.index+1):e===n.SingleQuote?(this.state=r.InAttributeValueSq,this.sectionStart=this.index+1):a(e)||(this.sectionStart=this.index,this.state=r.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))},e.prototype.handleInAttributeValue=function(e,t){e===t||!this.decodeEntities&&this.fastForwardTo(t)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===n.DoubleQuote?s.Double:s.Single,this.index),this.state=r.BeforeAttributeName):this.decodeEntities&&e===n.Amp&&(this.baseState=this.state,this.state=r.BeforeEntity)},e.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,n.DoubleQuote)},e.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,n.SingleQuote)},e.prototype.stateInAttributeValueNoQuotes=function(e){a(e)||e===n.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(s.Unquoted,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===n.Amp&&(this.baseState=this.state,this.state=r.BeforeEntity)},e.prototype.stateBeforeDeclaration=function(e){e===n.OpeningSquareBracket?(this.state=r.CDATASequence,this.sequenceIndex=0):this.state=e===n.Dash?r.BeforeComment:r.InDeclaration},e.prototype.stateInDeclaration=function(e){(e===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)},e.prototype.stateInProcessingInstruction=function(e){(e===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeComment=function(e){e===n.Dash?(this.state=r.InCommentLike,this.currentSequence=h.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=r.InDeclaration},e.prototype.stateInSpecialComment=function(e){(e===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=r.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeSpecialS=function(e){var t=32|e;t===h.ScriptEnd[3]?this.startSpecial(h.ScriptEnd,4):t===h.StyleEnd[3]?this.startSpecial(h.StyleEnd,4):(this.state=r.InTagName,this.stateInTagName(e))},e.prototype.stateBeforeEntity=function(e){this.entityExcess=1,this.entityResult=0,e===n.Number?this.state=r.BeforeNumericEntity:e===n.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=r.InNamedEntity,this.stateInNamedEntity(e))},e.prototype.stateInNamedEntity=function(e){if(this.entityExcess+=1,this.trieIndex=(0,o.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),this.trieIndex<0)return this.emitNamedEntity(),void this.index--;this.trieCurrent=this.entityTrie[this.trieIndex];var t=this.trieCurrent&o.BinTrieFlags.VALUE_LENGTH;if(t){var i=(t>>14)-1;if(this.allowLegacyEntity()||e===n.Semi){var r=this.index-this.entityExcess+1;r>this.sectionStart&&this.emitPartial(this.sectionStart,r),this.entityResult=this.trieIndex,this.trieIndex+=i,this.entityExcess=0,this.sectionStart=this.index+1,0===i&&this.emitNamedEntity()}else this.trieIndex+=i}},e.prototype.emitNamedEntity=function(){if(this.state=this.baseState,0!==this.entityResult)switch((this.entityTrie[this.entityResult]&o.BinTrieFlags.VALUE_LENGTH)>>14){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~o.BinTrieFlags.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}},e.prototype.stateBeforeNumericEntity=function(e){(32|e)===n.LowerX?(this.entityExcess++,this.state=r.InHexEntity):(this.state=r.InNumericEntity,this.stateInNumericEntity(e))},e.prototype.emitNumericEntity=function(e){var t=this.index-this.entityExcess-1;t+2+Number(this.state===r.InHexEntity)!==this.index&&(t>this.sectionStart&&this.emitPartial(this.sectionStart,t),this.sectionStart=this.index+Number(e),this.emitCodePoint((0,o.replaceCodePoint)(this.entityResult))),this.state=this.baseState},e.prototype.stateInNumericEntity=function(e){e===n.Semi?this.emitNumericEntity(!0):c(e)?(this.entityResult=10*this.entityResult+(e-n.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},e.prototype.stateInHexEntity=function(e){e===n.Semi?this.emitNumericEntity(!0):c(e)?(this.entityResult=16*this.entityResult+(e-n.Zero),this.entityExcess++):function(e){return e>=n.UpperA&&e<=n.UpperF||e>=n.LowerA&&e<=n.LowerF}(e)?(this.entityResult=16*this.entityResult+((32|e)-n.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},e.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===r.Text||this.baseState===r.InSpecialTag)},e.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===r.Text||this.state===r.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):this.state!==r.InAttributeValueDq&&this.state!==r.InAttributeValueSq&&this.state!==r.InAttributeValueNq||(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},e.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},e.prototype.parse=function(){for(;this.shouldContinue();){var e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case r.Text:this.stateText(e);break;case r.SpecialStartSequence:this.stateSpecialStartSequence(e);break;case r.InSpecialTag:this.stateInSpecialTag(e);break;case r.CDATASequence:this.stateCDATASequence(e);break;case r.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(e);break;case r.InAttributeName:this.stateInAttributeName(e);break;case r.InCommentLike:this.stateInCommentLike(e);break;case r.InSpecialComment:this.stateInSpecialComment(e);break;case r.BeforeAttributeName:this.stateBeforeAttributeName(e);break;case r.InTagName:this.stateInTagName(e);break;case r.InClosingTagName:this.stateInClosingTagName(e);break;case r.BeforeTagName:this.stateBeforeTagName(e);break;case r.AfterAttributeName:this.stateAfterAttributeName(e);break;case r.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(e);break;case r.BeforeAttributeValue:this.stateBeforeAttributeValue(e);break;case r.BeforeClosingTagName:this.stateBeforeClosingTagName(e);break;case r.AfterClosingTagName:this.stateAfterClosingTagName(e);break;case r.BeforeSpecialS:this.stateBeforeSpecialS(e);break;case r.InAttributeValueNq:this.stateInAttributeValueNoQuotes(e);break;case r.InSelfClosingTag:this.stateInSelfClosingTag(e);break;case r.InDeclaration:this.stateInDeclaration(e);break;case r.BeforeDeclaration:this.stateBeforeDeclaration(e);break;case r.BeforeComment:this.stateBeforeComment(e);break;case r.InProcessingInstruction:this.stateInProcessingInstruction(e);break;case r.InNamedEntity:this.stateInNamedEntity(e);break;case r.BeforeEntity:this.stateBeforeEntity(e);break;case r.InHexEntity:this.stateInHexEntity(e);break;case r.InNumericEntity:this.stateInNumericEntity(e);break;default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()},e.prototype.finish=function(){this.state===r.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},e.prototype.handleTrailingData=function(){var e=this.buffer.length+this.offset;this.state===r.InCommentLike?this.currentSequence===h.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===r.InNumericEntity&&this.allowLegacyEntity()||this.state===r.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===r.InTagName||this.state===r.BeforeAttributeName||this.state===r.BeforeAttributeValue||this.state===r.AfterAttributeName||this.state===r.InAttributeName||this.state===r.InAttributeValueSq||this.state===r.InAttributeValueDq||this.state===r.InAttributeValueNq||this.state===r.InClosingTagName||this.cbs.ontext(this.sectionStart,e)},e.prototype.emitPartial=function(e,t){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?this.cbs.onattribdata(e,t):this.cbs.ontext(e,t)},e.prototype.emitCodePoint=function(e){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)},e}();t.default=d},5106:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=t.parseFeed=t.getFeed=t.ElementType=t.Tokenizer=t.createDomStream=t.parseDOM=t.parseDocument=t.DefaultHandler=t.DomHandler=t.Parser=void 0;var a=i(6666),l=i(6666);Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return l.Parser}});var c=i(1142),h=i(1142);function d(e,t){var i=new c.DomHandler(void 0,t);return new a.Parser(i,t).end(e),i.root}function u(e,t){return d(e,t).children}Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return h.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return h.DomHandler}}),t.parseDocument=d,t.parseDOM=u,t.createDomStream=function(e,t,i){var n=new c.DomHandler(e,t,i);return new a.Parser(n,t)};var p=i(34);Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return o(p).default}}),t.ElementType=s(i(9960));var m=i(7241),f=i(7241);Object.defineProperty(t,"getFeed",{enumerable:!0,get:function(){return f.getFeed}});var g={xmlMode:!0};t.parseFeed=function(e,t){return void 0===t&&(t=g),(0,m.getFeed)(u(e,t))},t.DomUtils=s(i(7241))},977:(e,t)=>{"use strict";function i(e){return"[object Object]"===Object.prototype.toString.call(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isPlainObject=function(e){var t,n;return!1!==i(e)&&(void 0===(t=e.constructor)||!1!==i(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf"))}},4670:(e,t,i)=>{"use strict";e.exports=i(5607)},9829:(e,t,i)=>{"use strict";var n,r,s,o=i(8946),a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function l(){s=!1}function c(e){if(e){if(e!==n){if(e.length!==a.length)throw new Error("Custom alphabet for shortid must be "+a.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,i){return t!==i.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+a.length+" unique characters. These characters were not unique: "+t.join(", "));n=e,l()}}else n!==a&&(n=a,l())}function h(){return s||(s=function(){n||c(a);for(var e,t=n.split(""),i=[],r=o.nextValue();t.length>0;)r=o.nextValue(),e=Math.floor(r*t.length),i.push(t.splice(e,1)[0]);return i.join("")}())}e.exports={get:function(){return n||a},characters:function(e){return c(e),n},seed:function(e){o.seed(e),r!==e&&(l(),r=e)},lookup:function(e){return h()[e]},shuffled:h}},480:(e,t,i)=>{"use strict";var n,r,s=i(8416);i(9829),e.exports=function(e){var t="",i=Math.floor(.001*(Date.now()-1567752802062));return i===r?n++:(n=0,r=i),t+=s(7),t+=s(e),n>0&&(t+=s(n)),t+s(i)}},8416:(e,t,i)=>{"use strict";var n=i(9829),r=i(3766),s=i(296);e.exports=function(e){for(var t,i=0,o="";!t;)o+=s(r,n.get(),1),t=e<Math.pow(16,i+1),i++;return o}},5607:(e,t,i)=>{"use strict";var n=i(9829),r=i(480),s=i(1082),o=i(5636)||0;function a(){return r(o)}e.exports=a,e.exports.generate=a,e.exports.seed=function(t){return n.seed(t),e.exports},e.exports.worker=function(t){return o=t,e.exports},e.exports.characters=function(e){return void 0!==e&&n.characters(e),n.shuffled()},e.exports.isValid=s},1082:(e,t,i)=>{"use strict";var n=i(9829);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6||new RegExp("[^"+n.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e))}},3766:e=>{"use strict";var t,i="object"==typeof window&&(window.crypto||window.msCrypto);t=i&&i.getRandomValues?function(e){return i.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],i=0;i<e;i++)t.push(Math.floor(256*Math.random()));return t},e.exports=t},8946:e=>{"use strict";var t=1;e.exports={nextValue:function(){return(t=(9301*t+49297)%233280)/233280},seed:function(e){t=e}}},5636:e=>{"use strict";e.exports=0},296:e=>{e.exports=function(e,t,i){for(var n=(2<<Math.log(t.length-1)/Math.LN2)-1,r=-~(1.6*n*i/t.length),s="";;)for(var o=e(r),a=r;a--;)if((s+=t[o[a]&n]||"").length===+i)return s}},4023:function(e,t,i){"undefined"!=typeof self&&self,e.exports=function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=60)}([function(e,t){function i(e,t){var i=e[1]||"",n=e[3];if(!n)return i;if(t&&"function"==typeof btoa){var r=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(n);return[i].concat(n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}))).concat([r]).join("\n")}return[i].join("\n")}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=i(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},r=0;r<this.length;r++){var s=this[r][0];"number"==typeof s&&(n[s]=!0)}for(r=0;r<e.length;r++){var o=e[r];"number"==typeof o[0]&&n[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),t.push(o))}},t}},function(e,t,i){function n(e){for(var t=0;t<e.length;t++){var i=e[t],n=h[i.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](i.parts[r]);for(;r<i.parts.length;r++)n.parts.push(s(i.parts[r]));n.parts.length>i.parts.length&&(n.parts.length=i.parts.length)}else{var o=[];for(r=0;r<i.parts.length;r++)o.push(s(i.parts[r]));h[i.id]={id:i.id,refs:1,parts:o}}}}function r(){var e=document.createElement("style");return e.type="text/css",d.appendChild(e),e}function s(e){var t,i,n=document.querySelector("style["+v+'~="'+e.id+'"]');if(n){if(m)return f;n.parentNode.removeChild(n)}if(y){var s=p++;n=u||(u=r()),t=o.bind(null,n,s,!1),i=o.bind(null,n,s,!0)}else n=r(),t=a.bind(null,n),i=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else i()}}function o(e,t,i,n){var r=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=x(t,r);else{var s=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function a(e,t){var i=t.css,n=t.media,r=t.sourceMap;if(n&&e.setAttribute("media",n),g.ssrId&&e.setAttribute(v,t.id),r&&(i+="\n/*# sourceURL="+r.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=i(64),h={},d=l&&(document.head||document.getElementsByTagName("head")[0]),u=null,p=0,m=!1,f=function(){},g=null,v="data-vue-ssr-id",y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,i,r){m=i,g=r||{};var s=c(e,t);return n(s),function(t){for(var i=[],r=0;r<s.length;r++){var o=s[r];(a=h[o.id]).refs--,i.push(a)}for(t?n(s=c(e,t)):s=[],r=0;r<i.length;r++){var a;if(0===(a=i[r]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete h[a.id]}}}};var x=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e,t,i,n,r,s){var o,a=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(o=e,a=e.default);var c,h="function"==typeof a?a.options:a;if(t&&(h.render=t.render,h.staticRenderFns=t.staticRenderFns,h._compiled=!0),i&&(h.functional=!0),r&&(h._scopeId=r),s?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},h._ssrRegister=c):n&&(c=n),c){var d=h.functional,u=d?h.render:h.beforeCreate;d?(h._injectStyles=c,h.render=function(e,t){return c.call(t),u(e,t)}):h.beforeCreate=u?[].concat(u,c):[c]}return{esModule:o,exports:a,options:h}}},function(e,t,i){"use strict";function n(e,t){var i,n=e&&e.a;!(i=e&&e.hsl?(0,r.default)(e.hsl):e&&e.hex&&e.hex.length>0?(0,r.default)(e.hex):e&&e.hsv?(0,r.default)(e.hsv):e&&e.rgba?(0,r.default)(e.rgba):e&&e.rgb?(0,r.default)(e.rgb):(0,r.default)(e))||void 0!==i._a&&null!==i._a||i.setAlpha(n||1);var s=i.toHsl(),o=i.toHsv();return 0===s.s&&(o.h=s.h=e.h||e.hsl&&e.hsl.h||t||0),{hsl:s,hex:i.toHexString().toUpperCase(),hex8:i.toHex8String().toUpperCase(),rgba:i.toRgb(),hsv:o,oldHue:e.h||t||s.h,source:e.source,a:e.a||i.getAlpha()}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(i(65));t.default={props:["value"],data:function(){return{val:n(this.value)}},computed:{colors:{get:function(){return this.val},set:function(e){this.val=e,this.$emit("input",e)}}},watch:{value:function(e){this.val=n(e)}},methods:{colorChange:function(e,t){this.oldHue=this.colors.hsl.h,this.colors=n(e,t||this.oldHue)},isValidHex:function(e){return(0,r.default)(e).isValid()},simpleCheckForValidColor:function(e){for(var t=["r","g","b","a","h","s","l","v"],i=0,n=0,r=0;r<t.length;r++){var s=t[r];e[s]&&(i++,isNaN(e[s])||n++)}if(i===n)return e},paletteUpperCase:function(e){return e.map((function(e){return e.toUpperCase()}))},isTransparent:function(e){return 0===(0,r.default)(e).getAlpha()}}}},function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(36),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(68),a=!1,l=function(e){a||i(66)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/common/EditableInput.vue",t.default=c.exports},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){var n=i(8),r=i(18);e.exports=i(9)?function(e,t,i){return n.f(e,t,r(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){var n=i(16),r=i(42),s=i(25),o=Object.defineProperty;t.f=i(9)?Object.defineProperty:function(e,t,i){if(n(e),t=s(t,!0),n(i),r)try{return o(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},function(e,t,i){e.exports=!i(17)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,i){var n=i(90),r=i(24);e.exports=function(e){return n(r(e))}},function(e,t,i){var n=i(29)("wks"),r=i(19),s=i(4).Symbol,o="function"==typeof s;(e.exports=function(e){return n[e]||(n[e]=o&&s[e]||(o?s:r)("Symbol."+e))}).store=n},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(51),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(113),a=!1,l=function(e){a||i(111)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/common/Hue.vue",t.default=c.exports},function(e,t){e.exports=!0},function(e,t){var i=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=i)},function(e,t,i){var n=i(12);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(54),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(127),a=!1,l=function(e){a||i(123)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/common/Saturation.vue",t.default=c.exports},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(55),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(133),a=!1,l=function(e){a||i(128)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/common/Alpha.vue",t.default=c.exports},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(56),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(132),a=!1,l=function(e){a||i(130)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/common/Checkboard.vue",t.default=c.exports},function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,i){var n=i(12);e.exports=function(e,t){if(!n(e))return e;var i,r;if(t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;if("function"==typeof(i=e.valueOf)&&!n(r=i.call(e)))return r;if(!t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports={}},function(e,t,i){var n=i(46),r=i(30);e.exports=Object.keys||function(e){return n(e,r)}},function(e,t,i){var n=i(29)("keys"),r=i(19);e.exports=function(e){return n[e]||(n[e]=r(e))}},function(e,t,i){var n=i(15),r=i(4),s=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:i(14)?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,i){var n=i(8).f,r=i(6),s=i(11)("toStringTag");e.exports=function(e,t,i){e&&!r(e=i?e:e.prototype,s)&&n(e,s,{configurable:!0,value:t})}},function(e,t,i){t.f=i(11)},function(e,t,i){var n=i(4),r=i(15),s=i(14),o=i(32),a=i(8).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=s?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:o.f(e)})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(3)),s=n(i(5)),o=["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#CCCCCC","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"];t.default={name:"Compact",mixins:[r.default],props:{palette:{type:Array,default:function(){return o}}},components:{"ed-in":s.default},computed:{pick:function(){return this.colors.hex.toUpperCase()}},methods:{handlerClick:function(e){this.colorChange({hex:e,source:"hex"})}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"editableInput",props:{label:String,labelText:String,desc:String,value:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get:function(){return this.value},set:function(e){if(!(void 0!==this.max&&+e>this.max))return e;this.$refs.input.value=this.max}},labelId:function(){return"input__label__"+this.label+"__"+Math.random().toString().slice(2,5)},labelSpanText:function(){return this.labelText||this.label}},methods:{update:function(e){this.handleChange(e.target.value)},handleChange:function(e){var t={};t[this.label]=e,(void 0===t.hex&&void 0===t["#"]||e.length>5)&&this.$emit("change",t)},handleKeyDown:function(e){var t=this.val,i=Number(t);if(i){var n=this.arrowOffset||1;38===e.keyCode&&(t=i+n,this.handleChange(t),e.preventDefault()),40===e.keyCode&&(t=i-n,this.handleChange(t),e.preventDefault())}}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(i(3)),r=["#FFFFFF","#F2F2F2","#E6E6E6","#D9D9D9","#CCCCCC","#BFBFBF","#B3B3B3","#A6A6A6","#999999","#8C8C8C","#808080","#737373","#666666","#595959","#4D4D4D","#404040","#333333","#262626","#0D0D0D","#000000"];t.default={name:"Grayscale",mixins:[n.default],props:{palette:{type:Array,default:function(){return r}}},components:{},computed:{pick:function(){return this.colors.hex.toUpperCase()}},methods:{handlerClick:function(e){this.colorChange({hex:e,source:"hex"})}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(5)),s=n(i(3));t.default={name:"Material",mixins:[s.default],components:{"ed-in":r.default},methods:{onChange:function(e){e&&(e.hex?this.isValidHex(e.hex)&&this.colorChange({hex:e.hex,source:"hex"}):(e.r||e.g||e.b)&&this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}))}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(81)),s=n(i(3)),o=n(i(13));t.default={name:"Slider",mixins:[s.default],props:{swatches:{type:Array,default:function(){return[{s:.5,l:.8},{s:.5,l:.65},{s:.5,l:.5},{s:.5,l:.35},{s:.5,l:.2}]}}},components:{hue:o.default},computed:{normalizedSwatches:function(){return this.swatches.map((function(e){return"object"!==(void 0===e?"undefined":(0,r.default)(e))?{s:.5,l:e}:e}))}},methods:{isActive:function(e,t){var i=this.colors.hsl;return 1===i.l&&1===e.l||0===i.l&&0===e.l||Math.abs(i.l-e.l)<.01&&Math.abs(i.s-e.s)<.01},hueChange:function(e){this.colorChange(e)},handleSwClick:function(e,t){this.colorChange({h:this.colors.hsl.h,s:t.s,l:t.l,source:"hsl"})}}}},function(e,t,i){"use strict";var n=i(14),r=i(41),s=i(44),o=i(7),a=i(26),l=i(88),c=i(31),h=i(95),d=i(11)("iterator"),u=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,i,m,f,g,v){l(i,t,m);var y,x,b,w=function(e){if(!u&&e in S)return S[e];switch(e){case"keys":case"values":return function(){return new i(this,e)}}return function(){return new i(this,e)}},C=t+" Iterator",P="values"==f,k=!1,S=e.prototype,I=S[d]||S["@@iterator"]||f&&S[f],A=I||w(f),_=f?P?w("entries"):A:void 0,E="Array"==t&&S.entries||I;if(E&&(b=h(E.call(new e)))!==Object.prototype&&b.next&&(c(b,C,!0),n||"function"==typeof b[d]||o(b,d,p)),P&&I&&"values"!==I.name&&(k=!0,A=function(){return I.call(this)}),n&&!v||!u&&!k&&S[d]||o(S,d,A),a[t]=A,a[C]=p,f)if(y={values:P?A:w("values"),keys:g?A:w("keys"),entries:_},v)for(x in y)x in S||s(S,x,y[x]);else r(r.P+r.F*(u||k),t,y);return y}},function(e,t,i){var n=i(4),r=i(15),s=i(86),o=i(7),a=i(6),l=function(e,t,i){var c,h,d,u=e&l.F,p=e&l.G,m=e&l.S,f=e&l.P,g=e&l.B,v=e&l.W,y=p?r:r[t]||(r[t]={}),x=y.prototype,b=p?n:m?n[t]:(n[t]||{}).prototype;for(c in p&&(i=t),i)(h=!u&&b&&void 0!==b[c])&&a(y,c)||(d=h?b[c]:i[c],y[c]=p&&"function"!=typeof b[c]?i[c]:g&&h?s(d,n):v&&b[c]==d?function(e){var t=function(t,i,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):f&&"function"==typeof d?s(Function.call,d):d,f&&((y.virtual||(y.virtual={}))[c]=d,e&l.R&&x&&!x[c]&&o(x,c,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,i){e.exports=!i(9)&&!i(17)((function(){return 7!=Object.defineProperty(i(43)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,i){var n=i(12),r=i(4).document,s=n(r)&&n(r.createElement);e.exports=function(e){return s?r.createElement(e):{}}},function(e,t,i){e.exports=i(7)},function(e,t,i){var n=i(16),r=i(89),s=i(30),o=i(28)("IE_PROTO"),a=function(){},l=function(){var e,t=i(43)("iframe"),n=s.length;for(t.style.display="none",i(94).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;n--;)delete l.prototype[s[n]];return l()};e.exports=Object.create||function(e,t){var i;return null!==e?(a.prototype=n(e),i=new a,a.prototype=null,i[o]=e):i=l(),void 0===t?i:r(i,t)}},function(e,t,i){var n=i(6),r=i(10),s=i(91)(!1),o=i(28)("IE_PROTO");e.exports=function(e,t){var i,a=r(e),l=0,c=[];for(i in a)i!=o&&n(a,i)&&c.push(i);for(;t.length>l;)n(a,i=t[l++])&&(~s(c,i)||c.push(i));return c}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t,i){var n=i(24);e.exports=function(e){return Object(n(e))}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,i){var n=i(46),r=i(30).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,r)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Hue",props:{value:Object,direction:{type:String,default:"horizontal"}},data:function(){return{oldHue:0,pullDirection:""}},computed:{colors:function(){var e=this.value.hsl.h;return 0!==e&&e-this.oldHue>0&&(this.pullDirection="right"),0!==e&&e-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=e,this.value},directionClass:function(){return{"vc-hue--horizontal":"horizontal"===this.direction,"vc-hue--vertical":"vertical"===this.direction}},pointerTop:function(){return"vertical"===this.direction?0===this.colors.hsl.h&&"right"===this.pullDirection?0:-100*this.colors.hsl.h/360+100+"%":0},pointerLeft:function(){return"vertical"===this.direction?0:0===this.colors.hsl.h&&"right"===this.pullDirection?"100%":100*this.colors.hsl.h/360+"%"}},methods:{handleChange:function(e,t){!t&&e.preventDefault();var i=this.$refs.container;if(i){var n,r=i.clientWidth,s=i.clientHeight,o=i.getBoundingClientRect().left+window.pageXOffset,a=i.getBoundingClientRect().top+window.pageYOffset,l=(e.pageX||(e.touches?e.touches[0].pageX:0))-o,c=(e.pageY||(e.touches?e.touches[0].pageY:0))-a;"vertical"===this.direction?(n=c<0?360:c>s?0:360*(-100*c/s+100)/100,this.colors.hsl.h!==n&&this.$emit("change",{h:n,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(n=l<0?0:l>r?360:100*l/r*360/100,this.colors.hsl.h!==n&&this.$emit("change",{h:n,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))}},handleMouseDown:function(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp:function(e){this.unbindEventListeners()},unbindEventListeners:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(118)),s=n(i(3)),o=["red","pink","purple","deepPurple","indigo","blue","lightBlue","cyan","teal","green","lightGreen","lime","yellow","amber","orange","deepOrange","brown","blueGrey","black"],a=["900","700","500","300","100"],l=function(){var e=[];return o.forEach((function(t){var i=[];"black"===t.toLowerCase()||"white"===t.toLowerCase()?i=i.concat(["#000000","#FFFFFF"]):a.forEach((function(e){var n=r.default[t][e];i.push(n.toUpperCase())})),e.push(i)})),e}();t.default={name:"Swatches",mixins:[s.default],props:{palette:{type:Array,default:function(){return l}}},computed:{pick:function(){return this.colors.hex}},methods:{equal:function(e){return e.toLowerCase()===this.colors.hex.toLowerCase()},handlerClick:function(e){this.colorChange({hex:e,source:"hex"})}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(3)),s=n(i(5)),o=n(i(20)),a=n(i(13)),l=n(i(21));t.default={name:"Photoshop",mixins:[r.default],props:{head:{type:String,default:"Color Picker"},disableFields:{type:Boolean,default:!1},hasResetButton:{type:Boolean,default:!1},acceptLabel:{type:String,default:"OK"},cancelLabel:{type:String,default:"Cancel"},resetLabel:{type:String,default:"Reset"},newLabel:{type:String,default:"new"},currentLabel:{type:String,default:"current"}},components:{saturation:o.default,hue:a.default,alpha:l.default,"ed-in":s.default},data:function(){return{currentColor:"#FFF"}},computed:{hsv:function(){var e=this.colors.hsv;return{h:e.h.toFixed(),s:(100*e.s).toFixed(),v:(100*e.v).toFixed()}},hex:function(){var e=this.colors.hex;return e&&e.replace("#","")}},created:function(){this.currentColor=this.colors.hex},methods:{childChange:function(e){this.colorChange(e)},inputChange:function(e){e&&(e["#"]?this.isValidHex(e["#"])&&this.colorChange({hex:e["#"],source:"hex"}):e.r||e.g||e.b||e.a?this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}):(e.h||e.s||e.v)&&this.colorChange({h:e.h||this.colors.hsv.h,s:e.s/100||this.colors.hsv.s,v:e.v/100||this.colors.hsv.v,source:"hsv"}))},clickCurrentColor:function(){this.colorChange({hex:this.currentColor,source:"hex"})},handleAccept:function(){this.$emit("ok")},handleCancel:function(){this.$emit("cancel")},handleReset:function(){this.$emit("reset")}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(125)),s=n(i(126));t.default={name:"Saturation",props:{value:Object},computed:{colors:function(){return this.value},bgColor:function(){return"hsl("+this.colors.hsv.h+", 100%, 50%)"},pointerTop:function(){return-100*this.colors.hsv.v+1+100+"%"},pointerLeft:function(){return 100*this.colors.hsv.s+"%"}},methods:{throttle:(0,s.default)((function(e,t){e(t)}),20,{leading:!0,trailing:!1}),handleChange:function(e,t){!t&&e.preventDefault();var i=this.$refs.container;if(i){var n=i.clientWidth,s=i.clientHeight,o=i.getBoundingClientRect().left+window.pageXOffset,a=i.getBoundingClientRect().top+window.pageYOffset,l=e.pageX||(e.touches?e.touches[0].pageX:0),c=e.pageY||(e.touches?e.touches[0].pageY:0),h=(0,r.default)(l-o,0,n),d=(0,r.default)(c-a,0,s),u=h/n,p=(0,r.default)(-d/s+1,0,1);this.throttle(this.onChange,{h:this.colors.hsv.h,s:u,v:p,a:this.colors.hsv.a,source:"hsva"})}},onChange:function(e){this.$emit("change",e)},handleMouseDown:function(e){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp:function(e){this.unbindEventListeners()},unbindEventListeners:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(i(22));t.default={name:"Alpha",props:{value:Object,onChange:Function},components:{checkboard:n.default},computed:{colors:function(){return this.value},gradientColor:function(){var e=this.colors.rgba,t=[e.r,e.g,e.b].join(",");return"linear-gradient(to right, rgba("+t+", 0) 0%, rgba("+t+", 1) 100%)"}},methods:{handleChange:function(e,t){!t&&e.preventDefault();var i=this.$refs.container;if(i){var n,r=i.clientWidth,s=i.getBoundingClientRect().left+window.pageXOffset,o=(e.pageX||(e.touches?e.touches[0].pageX:0))-s;n=o<0?0:o>r?1:Math.round(100*o/r)/100,this.colors.a!==n&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:n,source:"rgba"})}},handleMouseDown:function(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp:function(){this.unbindEventListeners()},unbindEventListeners:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}}},function(e,t,i){"use strict";function n(e,t,i){var n=e+","+t+","+i;if(r[n])return r[n];var s=function(e,t,i){if("undefined"==typeof document)return null;var n=document.createElement("canvas");n.width=n.height=2*i;var r=n.getContext("2d");return r?(r.fillStyle=e,r.fillRect(0,0,n.width,n.height),r.fillStyle=t,r.fillRect(0,0,i,i),r.translate(i,i),r.fillRect(0,0,i,i),n.toDataURL()):null}(e,t,i);return r[n]=s,s}Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle:function(){return{"background-image":"url("+n(this.white,this.grey,this.size)+")"}}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(3)),s=n(i(5)),o=n(i(20)),a=n(i(13)),l=n(i(21)),c=n(i(22)),h=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF","rgba(0,0,0,0)"];t.default={name:"Sketch",mixins:[r.default],components:{saturation:o.default,hue:a.default,alpha:l.default,"ed-in":s.default,checkboard:c.default},props:{presetColors:{type:Array,default:function(){return h}},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},computed:{hex:function(){return(this.colors.a<1?this.colors.hex8:this.colors.hex).replace("#","")},activeColor:function(){var e=this.colors.rgba;return"rgba("+[e.r,e.g,e.b,e.a].join(",")+")"}},methods:{handlePreset:function(e){this.colorChange({hex:e,source:"hex"})},childChange:function(e){this.colorChange(e)},inputChange:function(e){e&&(e.hex?this.isValidHex(e.hex)&&this.colorChange({hex:e.hex,source:"hex"}):(e.r||e.g||e.b||e.a)&&this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}))}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(3)),s=n(i(5)),o=n(i(20)),a=n(i(13)),l=n(i(21)),c=n(i(22));t.default={name:"Chrome",mixins:[r.default],props:{disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},components:{saturation:o.default,hue:a.default,alpha:l.default,"ed-in":s.default,checkboard:c.default},data:function(){return{fieldsIndex:0,highlight:!1}},computed:{hsl:function(){var e=this.colors.hsl,t=e.h,i=e.s,n=e.l;return{h:t.toFixed(),s:(100*i).toFixed()+"%",l:(100*n).toFixed()+"%"}},activeColor:function(){var e=this.colors.rgba;return"rgba("+[e.r,e.g,e.b,e.a].join(",")+")"},hasAlpha:function(){return this.colors.a<1}},methods:{childChange:function(e){this.colorChange(e)},inputChange:function(e){if(e)if(e.hex)this.isValidHex(e.hex)&&this.colorChange({hex:e.hex,source:"hex"});else if(e.r||e.g||e.b||e.a)this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"});else if(e.h||e.s||e.l){var t=e.s?e.s.replace("%","")/100:this.colors.hsl.s,i=e.l?e.l.replace("%","")/100:this.colors.hsl.l;this.colorChange({h:e.h||this.colors.hsl.h,s:t,l:i,source:"hsl"})}},toggleViews:function(){this.fieldsIndex>=2?this.fieldsIndex=0:this.fieldsIndex++},showHighlight:function(){this.highlight=!0},hideHighlight:function(){this.highlight=!1}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(5)),s=n(i(3)),o=["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"];t.default={name:"Twitter",mixins:[s.default],components:{editableInput:r.default},props:{width:{type:[String,Number],default:276},defaultColors:{type:Array,default:function(){return o}},triangle:{default:"top-left",validator:function(e){return["hide","top-left","top-right"].includes(e)}}},computed:{hsv:function(){var e=this.colors.hsv;return{h:e.h.toFixed(),s:(100*e.s).toFixed(),v:(100*e.v).toFixed()}},hex:function(){var e=this.colors.hex;return e&&e.replace("#","")}},methods:{equal:function(e){return e.toLowerCase()===this.colors.hex.toLowerCase()},handlerClick:function(e){this.colorChange({hex:e,source:"hex"})},inputChange:function(e){e&&(e["#"]?this.isValidHex(e["#"])&&this.colorChange({hex:e["#"],source:"hex"}):e.r||e.g||e.b||e.a?this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}):(e.h||e.s||e.v)&&this.colorChange({h:e.h||this.colors.hsv.h,s:e.s/100||this.colors.hsv.s,v:e.v/100||this.colors.hsv.v,source:"hsv"}))}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=n(i(61)),s=n(i(70)),o=n(i(74)),a=n(i(78)),l=n(i(115)),c=n(i(120)),h=n(i(135)),d=n(i(139)),u=n(i(143)),p=n(i(21)),m=n(i(22)),f=n(i(5)),g=n(i(13)),v=n(i(20)),y=n(i(3)),x={version:"2.8.1",Compact:r.default,Grayscale:s.default,Twitter:u.default,Material:o.default,Slider:a.default,Swatches:l.default,Photoshop:c.default,Sketch:h.default,Chrome:d.default,Alpha:p.default,Checkboard:m.default,EditableInput:f.default,Hue:g.default,Saturation:v.default,ColorMixin:y.default};e.exports=x},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(35),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(69),a=!1,l=function(e){a||i(62)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Compact.vue",t.default=c.exports},function(e,t,i){var n=i(63);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("6ce8a5a8",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-compact {\n  padding-top: 5px;\n  padding-left: 5px;\n  width: 245px;\n  border-radius: 2px;\n  box-sizing: border-box;\n  box-shadow: 0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16);\n  background-color: #fff;\n}\n.vc-compact-colors {\n  overflow: hidden;\n  padding: 0;\n  margin: 0;\n}\n.vc-compact-color-item {\n  list-style: none;\n  width: 15px;\n  height: 15px;\n  float: left;\n  margin-right: 5px;\n  margin-bottom: 5px;\n  position: relative;\n  cursor: pointer;\n}\n.vc-compact-color-item--white {\n  box-shadow: inset 0 0 0 1px #ddd;\n}\n.vc-compact-color-item--white .vc-compact-dot {\n  background: #000;\n}\n.vc-compact-dot {\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  bottom: 5px;\n  left: 5px;\n  border-radius: 50%;\n  opacity: 1;\n  background: #fff;\n}\n",""])},function(e,t){e.exports=function(e,t){for(var i=[],n={},r=0;r<t.length;r++){var s=t[r],o=s[0],a={id:e+":"+r,css:s[1],media:s[2],sourceMap:s[3]};n[o]?n[o].parts.push(a):i.push(n[o]={id:o,parts:[a]})}return i}},function(e,t,i){var n;!function(r){function s(e,t){if(t=t||{},(e=e||"")instanceof s)return e;if(!(this instanceof s))return new s(e,t);var i=function(e){var t={r:0,g:0,b:0},i=1,n=null,r=null,s=null,o=!1,a=!1;return"string"==typeof e&&(e=function(e){e=e.replace(O,"").replace(D,"").toLowerCase();var t,i=!1;if(F[e])e=F[e],i=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=z.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=z.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=z.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=z.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=z.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=z.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=z.hex8.exec(e))?{r:A(t[1]),g:A(t[2]),b:A(t[3]),a:M(t[4]),format:i?"name":"hex8"}:(t=z.hex6.exec(e))?{r:A(t[1]),g:A(t[2]),b:A(t[3]),format:i?"name":"hex"}:(t=z.hex4.exec(e))?{r:A(t[1]+""+t[1]),g:A(t[2]+""+t[2]),b:A(t[3]+""+t[3]),a:M(t[4]+""+t[4]),format:i?"name":"hex8"}:!!(t=z.hex3.exec(e))&&{r:A(t[1]+""+t[1]),g:A(t[2]+""+t[2]),b:A(t[3]+""+t[3]),format:i?"name":"hex"}}(e)),"object"==typeof e&&($(e.r)&&$(e.g)&&$(e.b)?(t=function(e,t,i){return{r:255*S(e,255),g:255*S(t,255),b:255*S(i,255)}}(e.r,e.g,e.b),o=!0,a="%"===String(e.r).substr(-1)?"prgb":"rgb"):$(e.h)&&$(e.s)&&$(e.v)?(n=E(e.s),r=E(e.v),t=l(e.h,n,r),o=!0,a="hsv"):$(e.h)&&$(e.s)&&$(e.l)&&(n=E(e.s),s=E(e.l),t=function(e,t,i){function n(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}var r,s,o;if(e=S(e,360),t=S(t,100),i=S(i,100),0===t)r=s=o=i;else{var a=i<.5?i*(1+t):i+t-i*t,l=2*i-a;r=n(l,a,e+1/3),s=n(l,a,e),o=n(l,a,e-1/3)}return{r:255*r,g:255*s,b:255*o}}(e.h,n,s),o=!0,a="hsl"),e.hasOwnProperty("a")&&(i=e.a)),i=k(i),{ok:o,format:e.format||a,r:R(255,N(t.r,0)),g:R(255,N(t.g,0)),b:R(255,N(t.b,0)),a:i}}(e);this._originalInput=e,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=L(100*this._a)/100,this._format=t.format||i.format,this._gradientType=t.gradientType,this._r<1&&(this._r=L(this._r)),this._g<1&&(this._g=L(this._g)),this._b<1&&(this._b=L(this._b)),this._ok=i.ok,this._tc_id=B++}function o(e,t,i){e=S(e,255),t=S(t,255),i=S(i,255);var n,r,s=N(e,t,i),o=R(e,t,i),a=(s+o)/2;if(s==o)n=r=0;else{var l=s-o;switch(r=a>.5?l/(2-s-o):l/(s+o),s){case e:n=(t-i)/l+(t<i?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return{h:n,s:r,l:a}}function a(e,t,i){e=S(e,255),t=S(t,255),i=S(i,255);var n,r,s=N(e,t,i),o=R(e,t,i),a=s,l=s-o;if(r=0===s?0:l/s,s==o)n=0;else{switch(s){case e:n=(t-i)/l+(t<i?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return{h:n,s:r,v:a}}function l(e,t,i){e=6*S(e,360),t=S(t,100),i=S(i,100);var n=r.floor(e),s=e-n,o=i*(1-t),a=i*(1-s*t),l=i*(1-(1-s)*t),c=n%6;return{r:255*[i,a,o,o,l,i][c],g:255*[l,i,i,a,o,o][c],b:255*[o,o,l,i,i,a][c]}}function c(e,t,i,n){var r=[_(L(e).toString(16)),_(L(t).toString(16)),_(L(i).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function h(e,t,i,n){return[_(T(n)),_(L(e).toString(16)),_(L(t).toString(16)),_(L(i).toString(16))].join("")}function d(e,t){t=0===t?0:t||10;var i=s(e).toHsl();return i.s-=t/100,i.s=I(i.s),s(i)}function u(e,t){t=0===t?0:t||10;var i=s(e).toHsl();return i.s+=t/100,i.s=I(i.s),s(i)}function p(e){return s(e).desaturate(100)}function m(e,t){t=0===t?0:t||10;var i=s(e).toHsl();return i.l+=t/100,i.l=I(i.l),s(i)}function f(e,t){t=0===t?0:t||10;var i=s(e).toRgb();return i.r=N(0,R(255,i.r-L(-t/100*255))),i.g=N(0,R(255,i.g-L(-t/100*255))),i.b=N(0,R(255,i.b-L(-t/100*255))),s(i)}function g(e,t){t=0===t?0:t||10;var i=s(e).toHsl();return i.l-=t/100,i.l=I(i.l),s(i)}function v(e,t){var i=s(e).toHsl(),n=(i.h+t)%360;return i.h=n<0?360+n:n,s(i)}function y(e){var t=s(e).toHsl();return t.h=(t.h+180)%360,s(t)}function x(e){var t=s(e).toHsl(),i=t.h;return[s(e),s({h:(i+120)%360,s:t.s,l:t.l}),s({h:(i+240)%360,s:t.s,l:t.l})]}function b(e){var t=s(e).toHsl(),i=t.h;return[s(e),s({h:(i+90)%360,s:t.s,l:t.l}),s({h:(i+180)%360,s:t.s,l:t.l}),s({h:(i+270)%360,s:t.s,l:t.l})]}function w(e){var t=s(e).toHsl(),i=t.h;return[s(e),s({h:(i+72)%360,s:t.s,l:t.l}),s({h:(i+216)%360,s:t.s,l:t.l})]}function C(e,t,i){t=t||6,i=i||30;var n=s(e).toHsl(),r=360/i,o=[s(e)];for(n.h=(n.h-(r*t>>1)+720)%360;--t;)n.h=(n.h+r)%360,o.push(s(n));return o}function P(e,t){t=t||6;for(var i=s(e).toHsv(),n=i.h,r=i.s,o=i.v,a=[],l=1/t;t--;)a.push(s({h:n,s:r,v:o})),o=(o+l)%1;return a}function k(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function S(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var i=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=R(t,N(0,parseFloat(e))),i&&(e=parseInt(e*t,10)/100),r.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function I(e){return R(1,N(0,e))}function A(e){return parseInt(e,16)}function _(e){return 1==e.length?"0"+e:""+e}function E(e){return e<=1&&(e=100*e+"%"),e}function T(e){return r.round(255*parseFloat(e)).toString(16)}function M(e){return A(e)/255}function $(e){return!!z.CSS_UNIT.exec(e)}var O=/^\s+/,D=/\s+$/,B=0,L=r.round,R=r.min,N=r.max,Z=r.random;s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,i,n=this.toRgb();return e=n.r/255,t=n.g/255,i=n.b/255,.2126*(e<=.03928?e/12.92:r.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:r.pow((t+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:r.pow((i+.055)/1.055,2.4))},setAlpha:function(e){return this._a=k(e),this._roundA=L(100*this._a)/100,this},toHsv:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=a(this._r,this._g,this._b),t=L(360*e.h),i=L(100*e.s),n=L(100*e.v);return 1==this._a?"hsv("+t+", "+i+"%, "+n+"%)":"hsva("+t+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=o(this._r,this._g,this._b),t=L(360*e.h),i=L(100*e.s),n=L(100*e.l);return 1==this._a?"hsl("+t+", "+i+"%, "+n+"%)":"hsla("+t+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return c(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,i,n,r){var s=[_(L(e).toString(16)),_(L(t).toString(16)),_(L(i).toString(16)),_(T(n))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:L(this._r),g:L(this._g),b:L(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+L(this._r)+", "+L(this._g)+", "+L(this._b)+")":"rgba("+L(this._r)+", "+L(this._g)+", "+L(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:L(100*S(this._r,255))+"%",g:L(100*S(this._g,255))+"%",b:L(100*S(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+L(100*S(this._r,255))+"%, "+L(100*S(this._g,255))+"%, "+L(100*S(this._b,255))+"%)":"rgba("+L(100*S(this._r,255))+"%, "+L(100*S(this._g,255))+"%, "+L(100*S(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(j[c(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+h(this._r,this._g,this._b,this._a),i=t,n=this._gradientType?"GradientType = 1, ":"";if(e){var r=s(e);i="#"+h(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+i+")"},toString:function(e){var t=!!e;e=e||this._format;var i=!1,n=this._a<1&&this._a>=0;return t||!n||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(i=this.toRgbString()),"prgb"===e&&(i=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(i=this.toHexString()),"hex3"===e&&(i=this.toHexString(!0)),"hex4"===e&&(i=this.toHex8String(!0)),"hex8"===e&&(i=this.toHex8String()),"name"===e&&(i=this.toName()),"hsl"===e&&(i=this.toHslString()),"hsv"===e&&(i=this.toHsvString()),i||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return s(this.toString())},_applyModification:function(e,t){var i=e.apply(null,[this].concat([].slice.call(t)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(f,arguments)},darken:function(){return this._applyModification(g,arguments)},desaturate:function(){return this._applyModification(d,arguments)},saturate:function(){return this._applyModification(u,arguments)},greyscale:function(){return this._applyModification(p,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(y,arguments)},monochromatic:function(){return this._applyCombination(P,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(b,arguments)}},s.fromRatio=function(e,t){if("object"==typeof e){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]="a"===n?e[n]:E(e[n]));e=i}return s(e,t)},s.equals=function(e,t){return!(!e||!t)&&s(e).toRgbString()==s(t).toRgbString()},s.random=function(){return s.fromRatio({r:Z(),g:Z(),b:Z()})},s.mix=function(e,t,i){i=0===i?0:i||50;var n=s(e).toRgb(),r=s(t).toRgb(),o=i/100;return s({r:(r.r-n.r)*o+n.r,g:(r.g-n.g)*o+n.g,b:(r.b-n.b)*o+n.b,a:(r.a-n.a)*o+n.a})},s.readability=function(e,t){var i=s(e),n=s(t);return(r.max(i.getLuminance(),n.getLuminance())+.05)/(r.min(i.getLuminance(),n.getLuminance())+.05)},s.isReadable=function(e,t,i){var n,r,o=s.readability(e,t);switch(r=!1,(n=function(e){var t,i;return"AA"!==(t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==t&&(t="AA"),"small"!==(i=(e.size||"small").toLowerCase())&&"large"!==i&&(i="small"),{level:t,size:i}}(i)).level+n.size){case"AAsmall":case"AAAlarge":r=o>=4.5;break;case"AAlarge":r=o>=3;break;case"AAAsmall":r=o>=7}return r},s.mostReadable=function(e,t,i){var n,r,o,a,l=null,c=0;r=(i=i||{}).includeFallbackColors,o=i.level,a=i.size;for(var h=0;h<t.length;h++)(n=s.readability(e,t[h]))>c&&(c=n,l=s(t[h]));return s.isReadable(e,l,{level:o,size:a})||!r?l:(i.includeFallbackColors=!1,s.mostReadable(e,["#fff","#000"],i))};var F=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},j=s.hexNames=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[e[i]]=i);return t}(F),z=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",i="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();void 0!==e&&e.exports?e.exports=s:void 0!==(n=function(){return s}.call(t,i,t,e))&&(e.exports=n)}(Math)},function(e,t,i){var n=i(67);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("0f73e73c",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-editable-input {\n  position: relative;\n}\n.vc-input__input {\n  padding: 0;\n  border: 0;\n  outline: none;\n}\n.vc-input__label {\n  text-transform: capitalize;\n}\n",""])},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vc-editable-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.val,expression:"val"}],ref:"input",staticClass:"vc-input__input",attrs:{"aria-labelledby":e.labelId},domProps:{value:e.val},on:{keydown:e.handleKeyDown,input:[function(t){t.target.composing||(e.val=t.target.value)},e.update]}}),e._v(" "),i("span",{staticClass:"vc-input__label",attrs:{for:e.label,id:e.labelId}},[e._v(e._s(e.labelSpanText))]),e._v(" "),i("span",{staticClass:"vc-input__desc"},[e._v(e._s(e.desc))])])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vc-compact",attrs:{role:"application","aria-label":"Compact color picker"}},[i("ul",{staticClass:"vc-compact-colors",attrs:{role:"listbox"}},e._l(e.paletteUpperCase(e.palette),(function(t){return i("li",{key:t,staticClass:"vc-compact-color-item",class:{"vc-compact-color-item--white":"#FFFFFF"===t},style:{background:t},attrs:{role:"option","aria-label":"color:"+t,"aria-selected":t===e.pick},on:{click:function(i){return e.handlerClick(t)}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t===e.pick,expression:"c === pick"}],staticClass:"vc-compact-dot"})])})),0)])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(37),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(73),a=!1,l=function(e){a||i(71)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Grayscale.vue",t.default=c.exports},function(e,t,i){var n=i(72);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("21ddbb74",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-grayscale {\n  width: 125px;\n  border-radius: 2px;\n  box-shadow: 0 2px 15px rgba(0,0,0,.12), 0 2px 10px rgba(0,0,0,.16);\n  background-color: #fff;\n}\n.vc-grayscale-colors {\n  border-radius: 2px;\n  overflow: hidden;\n  padding: 0;\n  margin: 0;\n}\n.vc-grayscale-color-item {\n  list-style: none;\n  width: 25px;\n  height: 25px;\n  float: left;\n  position: relative;\n  cursor: pointer;\n}\n.vc-grayscale-color-item--white .vc-grayscale-dot {\n  background: #000;\n}\n.vc-grayscale-dot {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 6px;\n  height: 6px;\n  margin: -3px 0 0 -2px;\n  border-radius: 50%;\n  opacity: 1;\n  background: #fff;\n}\n",""])},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vc-grayscale",attrs:{role:"application","aria-label":"Grayscale color picker"}},[i("ul",{staticClass:"vc-grayscale-colors",attrs:{role:"listbox"}},e._l(e.paletteUpperCase(e.palette),(function(t){return i("li",{key:t,staticClass:"vc-grayscale-color-item",class:{"vc-grayscale-color-item--white":"#FFFFFF"==t},style:{background:t},attrs:{role:"option","aria-label":"Color:"+t,"aria-selected":t===e.pick},on:{click:function(i){return e.handlerClick(t)}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t===e.pick,expression:"c === pick"}],staticClass:"vc-grayscale-dot"})])})),0)])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(38),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(77),a=!1,l=function(e){a||i(75)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Material.vue",t.default=c.exports},function(e,t,i){var n=i(76);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("1ff3af73",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,'\n.vc-material {\n  width: 98px;\n  height: 98px;\n  padding: 16px;\n  font-family: "Roboto";\n  position: relative;\n  border-radius: 2px;\n  box-shadow: 0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16);\n  background-color: #fff;\n}\n.vc-material .vc-input__input {\n  width: 100%;\n  margin-top: 12px;\n  font-size: 15px;\n  color: #333;\n  height: 30px;\n}\n.vc-material .vc-input__label {\n  position: absolute;\n  top: 0;\n  left: 0;\n  font-size: 11px;\n  color: #999;\n  text-transform: capitalize;\n}\n.vc-material-hex {\n  border-bottom-width: 2px;\n  border-bottom-style: solid;\n}\n.vc-material-split {\n  display: flex;\n  margin-right: -10px;\n  padding-top: 11px;\n}\n.vc-material-third {\n  flex: 1;\n  padding-right: 10px;\n}\n',""])},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vc-material",attrs:{role:"application","aria-label":"Material color picker"}},[i("ed-in",{staticClass:"vc-material-hex",style:{borderColor:e.colors.hex},attrs:{label:"hex"},on:{change:e.onChange},model:{value:e.colors.hex,callback:function(t){e.$set(e.colors,"hex",t)},expression:"colors.hex"}}),e._v(" "),i("div",{staticClass:"vc-material-split"},[i("div",{staticClass:"vc-material-third"},[i("ed-in",{attrs:{label:"r"},on:{change:e.onChange},model:{value:e.colors.rgba.r,callback:function(t){e.$set(e.colors.rgba,"r",t)},expression:"colors.rgba.r"}})],1),e._v(" "),i("div",{staticClass:"vc-material-third"},[i("ed-in",{attrs:{label:"g"},on:{change:e.onChange},model:{value:e.colors.rgba.g,callback:function(t){e.$set(e.colors.rgba,"g",t)},expression:"colors.rgba.g"}})],1),e._v(" "),i("div",{staticClass:"vc-material-third"},[i("ed-in",{attrs:{label:"b"},on:{change:e.onChange},model:{value:e.colors.rgba.b,callback:function(t){e.$set(e.colors.rgba,"b",t)},expression:"colors.rgba.b"}})],1)])],1)};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(39),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(114),a=!1,l=function(e){a||i(79)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Slider.vue",t.default=c.exports},function(e,t,i){var n=i(80);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("7982aa43",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-slider {\n  position: relative;\n  width: 410px;\n}\n.vc-slider-hue-warp {\n  height: 12px;\n  position: relative;\n}\n.vc-slider-hue-warp .vc-hue-picker {\n  width: 14px;\n  height: 14px;\n  border-radius: 6px;\n  transform: translate(-7px, -2px);\n  background-color: rgb(248, 248, 248);\n  box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.37);\n}\n.vc-slider-swatches {\n  display: flex;\n  margin-top: 20px;\n}\n.vc-slider-swatch {\n  margin-right: 1px;\n  flex: 1;\n  width: 20%;\n}\n.vc-slider-swatch:first-child {\n  margin-right: 1px;\n}\n.vc-slider-swatch:first-child .vc-slider-swatch-picker {\n  border-radius: 2px 0px 0px 2px;\n}\n.vc-slider-swatch:last-child {\n  margin-right: 0;\n}\n.vc-slider-swatch:last-child .vc-slider-swatch-picker {\n  border-radius: 0px 2px 2px 0px;\n}\n.vc-slider-swatch-picker {\n  cursor: pointer;\n  height: 12px;\n}\n.vc-slider-swatch:nth-child(n) .vc-slider-swatch-picker.vc-slider-swatch-picker--active {\n  transform: scaleY(1.8);\n  border-radius: 3.6px/2px;\n}\n.vc-slider-swatch-picker--white {\n  box-shadow: inset 0 0 0 1px #ddd;\n}\n.vc-slider-swatch-picker--active.vc-slider-swatch-picker--white {\n  box-shadow: inset 0 0 0 0.6px #ddd;\n}\n",""])},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(i(82)),s=n(i(100)),o="function"==typeof s.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===o(r.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":o(e)}},function(e,t,i){e.exports={default:i(83),__esModule:!0}},function(e,t,i){i(84),i(96),e.exports=i(32).f("iterator")},function(e,t,i){"use strict";var n=i(85)(!0);i(40)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=n(t,i),this._i+=e.length,{value:e,done:!1})}))},function(e,t,i){var n=i(23),r=i(24);e.exports=function(e){return function(t,i){var s,o,a=String(r(t)),l=n(i),c=a.length;return l<0||l>=c?e?"":void 0:(s=a.charCodeAt(l))<55296||s>56319||l+1===c||(o=a.charCodeAt(l+1))<56320||o>57343?e?a.charAt(l):s:e?a.slice(l,l+2):o-56320+(s-55296<<10)+65536}}},function(e,t,i){var n=i(87);e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,r){return e.call(t,i,n,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,i){"use strict";var n=i(45),r=i(18),s=i(31),o={};i(7)(o,i(11)("iterator"),(function(){return this})),e.exports=function(e,t,i){e.prototype=n(o,{next:r(1,i)}),s(e,t+" Iterator")}},function(e,t,i){var n=i(8),r=i(16),s=i(27);e.exports=i(9)?Object.defineProperties:function(e,t){r(e);for(var i,o=s(t),a=o.length,l=0;a>l;)n.f(e,i=o[l++],t[i]);return e}},function(e,t,i){var n=i(47);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,i){var n=i(10),r=i(92),s=i(93);e.exports=function(e){return function(t,i,o){var a,l=n(t),c=r(l.length),h=s(o,c);if(e&&i!=i){for(;c>h;)if((a=l[h++])!=a)return!0}else for(;c>h;h++)if((e||h in l)&&l[h]===i)return e||h||0;return!e&&-1}}},function(e,t,i){var n=i(23),r=Math.min;e.exports=function(e){return e>0?r(n(e),9007199254740991):0}},function(e,t,i){var n=i(23),r=Math.max,s=Math.min;e.exports=function(e,t){return(e=n(e))<0?r(e+t,0):s(e,t)}},function(e,t,i){var n=i(4).document;e.exports=n&&n.documentElement},function(e,t,i){var n=i(6),r=i(48),s=i(28)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),n(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,i){i(97);for(var n=i(4),r=i(7),s=i(26),o=i(11)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<a.length;l++){var c=a[l],h=n[c],d=h&&h.prototype;d&&!d[o]&&r(d,o,c),s[c]=s.Array}},function(e,t,i){"use strict";var n=i(98),r=i(99),s=i(26),o=i(10);e.exports=i(40)(Array,"Array",(function(e,t){this._t=o(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])}),"values"),s.Arguments=s.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,i){e.exports={default:i(101),__esModule:!0}},function(e,t,i){i(102),i(108),i(109),i(110),e.exports=i(15).Symbol},function(e,t,i){"use strict";var n=i(4),r=i(6),s=i(9),o=i(41),a=i(44),l=i(103).KEY,c=i(17),h=i(29),d=i(31),u=i(19),p=i(11),m=i(32),f=i(33),g=i(104),v=i(105),y=i(16),x=i(12),b=i(48),w=i(10),C=i(25),P=i(18),k=i(45),S=i(106),I=i(107),A=i(49),_=i(8),E=i(27),T=I.f,M=_.f,$=S.f,O=n.Symbol,D=n.JSON,B=D&&D.stringify,L=p("_hidden"),R=p("toPrimitive"),N={}.propertyIsEnumerable,Z=h("symbol-registry"),F=h("symbols"),j=h("op-symbols"),z=Object.prototype,U="function"==typeof O&&!!A.f,H=n.QObject,q=!H||!H.prototype||!H.prototype.findChild,W=s&&c((function(){return 7!=k(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(e,t,i){var n=T(z,t);n&&delete z[t],M(e,t,i),n&&e!==z&&M(z,t,n)}:M,V=function(e){var t=F[e]=k(O.prototype);return t._k=e,t},G=U&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},K=function(e,t,i){return e===z&&K(j,t,i),y(e),t=C(t,!0),y(i),r(F,t)?(i.enumerable?(r(e,L)&&e[L][t]&&(e[L][t]=!1),i=k(i,{enumerable:P(0,!1)})):(r(e,L)||M(e,L,P(1,{})),e[L][t]=!0),W(e,t,i)):M(e,t,i)},J=function(e,t){y(e);for(var i,n=g(t=w(t)),r=0,s=n.length;s>r;)K(e,i=n[r++],t[i]);return e},Y=function(e){var t=N.call(this,e=C(e,!0));return!(this===z&&r(F,e)&&!r(j,e))&&(!(t||!r(this,e)||!r(F,e)||r(this,L)&&this[L][e])||t)},Q=function(e,t){if(e=w(e),t=C(t,!0),e!==z||!r(F,t)||r(j,t)){var i=T(e,t);return!i||!r(F,t)||r(e,L)&&e[L][t]||(i.enumerable=!0),i}},X=function(e){for(var t,i=$(w(e)),n=[],s=0;i.length>s;)r(F,t=i[s++])||t==L||t==l||n.push(t);return n},ee=function(e){for(var t,i=e===z,n=$(i?j:w(e)),s=[],o=0;n.length>o;)!r(F,t=n[o++])||i&&!r(z,t)||s.push(F[t]);return s};U||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=u(arguments.length>0?arguments[0]:void 0),t=function(i){this===z&&t.call(j,i),r(this,L)&&r(this[L],e)&&(this[L][e]=!1),W(this,e,P(1,i))};return s&&q&&W(z,e,{configurable:!0,set:t}),V(e)},a(O.prototype,"toString",(function(){return this._k})),I.f=Q,_.f=K,i(50).f=S.f=X,i(34).f=Y,A.f=ee,s&&!i(14)&&a(z,"propertyIsEnumerable",Y,!0),m.f=function(e){return V(p(e))}),o(o.G+o.W+o.F*!U,{Symbol:O});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;te.length>ie;)p(te[ie++]);for(var ne=E(p.store),re=0;ne.length>re;)f(ne[re++]);o(o.S+o.F*!U,"Symbol",{for:function(e){return r(Z,e+="")?Z[e]:Z[e]=O(e)},keyFor:function(e){if(!G(e))throw TypeError(e+" is not a symbol!");for(var t in Z)if(Z[t]===e)return t},useSetter:function(){q=!0},useSimple:function(){q=!1}}),o(o.S+o.F*!U,"Object",{create:function(e,t){return void 0===t?k(e):J(k(e),t)},defineProperty:K,defineProperties:J,getOwnPropertyDescriptor:Q,getOwnPropertyNames:X,getOwnPropertySymbols:ee});var se=c((function(){A.f(1)}));o(o.S+o.F*se,"Object",{getOwnPropertySymbols:function(e){return A.f(b(e))}}),D&&o(o.S+o.F*(!U||c((function(){var e=O();return"[null]"!=B([e])||"{}"!=B({a:e})||"{}"!=B(Object(e))}))),"JSON",{stringify:function(e){for(var t,i,n=[e],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=t=n[1],(x(t)||void 0!==e)&&!G(e))return v(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!G(t))return t}),n[1]=t,B.apply(D,n)}}),O.prototype[R]||i(7)(O.prototype,R,O.prototype.valueOf),d(O,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},function(e,t,i){var n=i(19)("meta"),r=i(12),s=i(6),o=i(8).f,a=0,l=Object.isExtensible||function(){return!0},c=!i(17)((function(){return l(Object.preventExtensions({}))})),h=function(e){o(e,n,{value:{i:"O"+ ++a,w:{}}})},d=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,n)){if(!l(e))return"F";if(!t)return"E";h(e)}return e[n].i},getWeak:function(e,t){if(!s(e,n)){if(!l(e))return!0;if(!t)return!1;h(e)}return e[n].w},onFreeze:function(e){return c&&d.NEED&&l(e)&&!s(e,n)&&h(e),e}}},function(e,t,i){var n=i(27),r=i(49),s=i(34);e.exports=function(e){var t=n(e),i=r.f;if(i)for(var o,a=i(e),l=s.f,c=0;a.length>c;)l.call(e,o=a[c++])&&t.push(o);return t}},function(e,t,i){var n=i(47);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,i){var n=i(10),r=i(50).f,s={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==s.call(e)?function(e){try{return r(e)}catch(e){return o.slice()}}(e):r(n(e))}},function(e,t,i){var n=i(34),r=i(18),s=i(10),o=i(25),a=i(6),l=i(42),c=Object.getOwnPropertyDescriptor;t.f=i(9)?c:function(e,t){if(e=s(e),t=o(t,!0),l)try{return c(e,t)}catch(e){}if(a(e,t))return r(!n.f.call(e,t),e[t])}},function(e,t){},function(e,t,i){i(33)("asyncIterator")},function(e,t,i){i(33)("observable")},function(e,t,i){var n=i(112);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("7c5f1a1c",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-hue {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  border-radius: 2px;\n}\n.vc-hue--horizontal {\n  background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n}\n.vc-hue--vertical {\n  background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n}\n.vc-hue-container {\n  cursor: pointer;\n  margin: 0 2px;\n  position: relative;\n  height: 100%;\n}\n.vc-hue-pointer {\n  z-index: 2;\n  position: absolute;\n}\n.vc-hue-picker {\n  cursor: pointer;\n  margin-top: 1px;\n  width: 4px;\n  border-radius: 1px;\n  height: 8px;\n  box-shadow: 0 0 2px rgba(0, 0, 0, .6);\n  background: #fff;\n  transform: translateX(-2px) ;\n}\n",""])},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["vc-hue",e.directionClass]},[i("div",{ref:"container",staticClass:"vc-hue-container",attrs:{role:"slider","aria-valuenow":e.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360"},on:{mousedown:e.handleMouseDown,touchmove:e.handleChange,touchstart:e.handleChange}},[i("div",{staticClass:"vc-hue-pointer",style:{top:e.pointerTop,left:e.pointerLeft},attrs:{role:"presentation"}},[i("div",{staticClass:"vc-hue-picker"})])])])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vc-slider",attrs:{role:"application","aria-label":"Slider color picker"}},[i("div",{staticClass:"vc-slider-hue-warp"},[i("hue",{on:{change:e.hueChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),i("div",{staticClass:"vc-slider-swatches",attrs:{role:"group"}},e._l(e.normalizedSwatches,(function(t,n){return i("div",{key:n,staticClass:"vc-slider-swatch",attrs:{"data-index":n,"aria-label":"color:"+e.colors.hex,role:"button"},on:{click:function(i){return e.handleSwClick(n,t)}}},[i("div",{staticClass:"vc-slider-swatch-picker",class:{"vc-slider-swatch-picker--active":e.isActive(t,n),"vc-slider-swatch-picker--white":1===t.l},style:{background:"hsl("+e.colors.hsl.h+", "+100*t.s+"%, "+100*t.l+"%)"}})])})),0)])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(52),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(119),a=!1,l=function(e){a||i(116)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Swatches.vue",t.default=c.exports},function(e,t,i){var n=i(117);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("10f839a2",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-swatches {\n  width: 320px;\n  height: 240px;\n  overflow-y: scroll;\n  background-color: #fff;\n  box-shadow: 0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16);\n}\n.vc-swatches-box {\n  padding: 16px 0 6px 16px;\n  overflow: hidden;\n}\n.vc-swatches-color-group {\n  padding-bottom: 10px;\n  width: 40px;\n  float: left;\n  margin-right: 10px;\n}\n.vc-swatches-color-it {\n  box-sizing: border-box;\n  width: 40px;\n  height: 24px;\n  cursor: pointer;\n  background: #880e4f;\n  margin-bottom: 1px;\n  overflow: hidden;\n  -ms-border-radius: 2px 2px 0 0;\n  -moz-border-radius: 2px 2px 0 0;\n  -o-border-radius: 2px 2px 0 0;\n  -webkit-border-radius: 2px 2px 0 0;\n  border-radius: 2px 2px 0 0;\n}\n.vc-swatches-color--white {\n  border: 1px solid #DDD;\n}\n.vc-swatches-pick {\n  fill: rgb(255, 255, 255);\n  margin-left: 8px;\n  display: block;\n}\n.vc-swatches-color--white .vc-swatches-pick {\n  fill: rgb(51, 51, 51);\n}\n",""])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"red",(function(){return n})),i.d(t,"pink",(function(){return r})),i.d(t,"purple",(function(){return s})),i.d(t,"deepPurple",(function(){return o})),i.d(t,"indigo",(function(){return a})),i.d(t,"blue",(function(){return l})),i.d(t,"lightBlue",(function(){return c})),i.d(t,"cyan",(function(){return h})),i.d(t,"teal",(function(){return d})),i.d(t,"green",(function(){return u})),i.d(t,"lightGreen",(function(){return p})),i.d(t,"lime",(function(){return m})),i.d(t,"yellow",(function(){return f})),i.d(t,"amber",(function(){return g})),i.d(t,"orange",(function(){return v})),i.d(t,"deepOrange",(function(){return y})),i.d(t,"brown",(function(){return x})),i.d(t,"grey",(function(){return b})),i.d(t,"blueGrey",(function(){return w})),i.d(t,"darkText",(function(){return C})),i.d(t,"lightText",(function(){return P})),i.d(t,"darkIcons",(function(){return k})),i.d(t,"lightIcons",(function(){return S})),i.d(t,"white",(function(){return I})),i.d(t,"black",(function(){return A}));var n={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},r={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},s={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},o={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},a={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},l={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},c={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},h={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},d={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},u={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},p={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},m={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},f={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},g={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},v={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},y={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},x={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},b={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},w={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},C={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},P={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},k={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},S={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},I="#ffffff",A="#000000";t.default={red:n,pink:r,purple:s,deepPurple:o,indigo:a,blue:l,lightBlue:c,cyan:h,teal:d,green:u,lightGreen:p,lime:m,yellow:f,amber:g,orange:v,deepOrange:y,brown:x,grey:b,blueGrey:w,darkText:C,lightText:P,darkIcons:k,lightIcons:S,white:I,black:A}},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vc-swatches",attrs:{role:"application","aria-label":"Swatches color picker","data-pick":e.pick}},[i("div",{staticClass:"vc-swatches-box",attrs:{role:"listbox"}},e._l(e.palette,(function(t,n){return i("div",{key:n,staticClass:"vc-swatches-color-group"},e._l(t,(function(t){return i("div",{key:t,class:["vc-swatches-color-it",{"vc-swatches-color--white":"#FFFFFF"===t}],style:{background:t},attrs:{role:"option","aria-label":"Color:"+t,"aria-selected":e.equal(t),"data-color":t},on:{click:function(i){return e.handlerClick(t)}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.equal(t),expression:"equal(c)"}],staticClass:"vc-swatches-pick"},[i("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"}},[i("path",{attrs:{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}})])])])})),0)})),0)])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(53),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(134),a=!1,l=function(e){a||i(121)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Photoshop.vue",t.default=c.exports},function(e,t,i){var n=i(122);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("080365d4",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,'\n.vc-photoshop {\n  background: #DCDCDC;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15);\n  box-sizing: initial;\n  width: 513px;\n  font-family: Roboto;\n}\n.vc-photoshop__disable-fields {\n  width: 390px;\n}\n.vc-ps-head {\n  background-image: linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%);\n  border-bottom: 1px solid #B1B1B1;\n  box-shadow: inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02);\n  height: 23px;\n  line-height: 24px;\n  border-radius: 4px 4px 0 0;\n  font-size: 13px;\n  color: #4D4D4D;\n  text-align: center;\n}\n.vc-ps-body {\n  padding: 15px;\n  display: flex;\n}\n.vc-ps-saturation-wrap {\n  width: 256px;\n  height: 256px;\n  position: relative;\n  border: 2px solid #B3B3B3;\n  border-bottom: 2px solid #F0F0F0;\n  overflow: hidden;\n}\n.vc-ps-saturation-wrap .vc-saturation-circle {\n  width: 12px;\n  height: 12px;\n}\n.vc-ps-hue-wrap {\n  position: relative;\n  height: 256px;\n  width: 19px;\n  margin-left: 10px;\n  border: 2px solid #B3B3B3;\n  border-bottom: 2px solid #F0F0F0;\n}\n.vc-ps-hue-pointer {\n  position: relative;\n}\n.vc-ps-hue-pointer--left,\n.vc-ps-hue-pointer--right {\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 5px 0 5px 8px;\n  border-color: transparent transparent transparent #555;\n}\n.vc-ps-hue-pointer--left:after,\n.vc-ps-hue-pointer--right:after {\n  content: "";\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 4px 0 4px 6px;\n  border-color: transparent transparent transparent #fff;\n  position: absolute;\n  top: 1px;\n  left: 1px;\n  transform: translate(-8px, -5px);\n}\n.vc-ps-hue-pointer--left {\n  transform: translate(-13px, -4px);\n}\n.vc-ps-hue-pointer--right {\n  transform: translate(20px, -4px) rotate(180deg);\n}\n.vc-ps-controls {\n  width: 180px;\n  margin-left: 10px;\n  display: flex;\n}\n.vc-ps-controls__disable-fields {\n  width: auto;\n}\n.vc-ps-actions {\n  margin-left: 20px;\n  flex: 1;\n}\n.vc-ps-ac-btn {\n  cursor: pointer;\n  background-image: linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%);\n  border: 1px solid #878787;\n  border-radius: 2px;\n  height: 20px;\n  box-shadow: 0 1px 0 0 #EAEAEA;\n  font-size: 14px;\n  color: #000;\n  line-height: 20px;\n  text-align: center;\n  margin-bottom: 10px;\n}\n.vc-ps-previews {\n  width: 60px;\n}\n.vc-ps-previews__swatches {\n  border: 1px solid #B3B3B3;\n  border-bottom: 1px solid #F0F0F0;\n  margin-bottom: 2px;\n  margin-top: 1px;\n}\n.vc-ps-previews__pr-color {\n  height: 34px;\n  box-shadow: inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000;\n}\n.vc-ps-previews__label {\n  font-size: 14px;\n  color: #000;\n  text-align: center;\n}\n.vc-ps-fields {\n  padding-top: 5px;\n  padding-bottom: 9px;\n  width: 80px;\n  position: relative;\n}\n.vc-ps-fields .vc-input__input {\n  margin-left: 40%;\n  width: 40%;\n  height: 18px;\n  border: 1px solid #888888;\n  box-shadow: inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC;\n  margin-bottom: 5px;\n  font-size: 13px;\n  padding-left: 3px;\n  margin-right: 10px;\n}\n.vc-ps-fields .vc-input__label, .vc-ps-fields .vc-input__desc {\n  top: 0;\n  text-transform: uppercase;\n  font-size: 13px;\n  height: 18px;\n  line-height: 22px;\n  position: absolute;\n}\n.vc-ps-fields .vc-input__label {\n  left: 0;\n  width: 34px;\n}\n.vc-ps-fields .vc-input__desc {\n  right: 0;\n  width: 0;\n}\n.vc-ps-fields__divider {\n  height: 5px;\n}\n.vc-ps-fields__hex .vc-input__input {\n  margin-left: 20%;\n  width: 80%;\n  height: 18px;\n  border: 1px solid #888888;\n  box-shadow: inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC;\n  margin-bottom: 6px;\n  font-size: 13px;\n  padding-left: 3px;\n}\n.vc-ps-fields__hex .vc-input__label {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 14px;\n  text-transform: uppercase;\n  font-size: 13px;\n  height: 18px;\n  line-height: 22px;\n}\n',""])},function(e,t,i){var n=i(124);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("b5380e52",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-saturation,\n.vc-saturation--white,\n.vc-saturation--black {\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n.vc-saturation--white {\n  background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n}\n.vc-saturation--black {\n  background: linear-gradient(to top, #000, rgba(0,0,0,0));\n}\n.vc-saturation-pointer {\n  cursor: pointer;\n  position: absolute;\n}\n.vc-saturation-circle {\n  cursor: head;\n  width: 4px;\n  height: 4px;\n  box-shadow: 0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3), 0 0 1px 2px rgba(0,0,0,.4);\n  border-radius: 50%;\n  transform: translate(-2px, -2px);\n}\n",""])},function(e,t){e.exports=function(e,t,i){return t<i?e<t?t:e>i?i:e:e<i?i:e>t?t:e}},function(e,t){function n(e,t,i){function n(t){var i=d,n=u;return d=u=void 0,v=t,m=e.apply(n,i)}function a(e){var i=e-g;return void 0===g||i>=t||i<0||C&&e-v>=p}function l(){var e=b();if(a(e))return c(e);f=setTimeout(l,function(e){var i=t-(e-g);return C?x(i,p-(e-v)):i}(e))}function c(e){return f=void 0,P&&d?n(e):(d=u=void 0,m)}function h(){var e=b(),i=a(e);if(d=arguments,u=this,g=e,i){if(void 0===f)return function(e){return v=e,f=setTimeout(l,t),w?n(e):m}(g);if(C)return f=setTimeout(l,t),n(g)}return void 0===f&&(f=setTimeout(l,t)),m}var d,u,p,m,f,g,v=0,w=!1,C=!1,P=!0;if("function"!=typeof e)throw new TypeError(o);return t=s(t)||0,r(i)&&(w=!!i.leading,p=(C="maxWait"in i)?y(s(i.maxWait)||0,t):p,P="trailing"in i?!!i.trailing:P),h.cancel=function(){void 0!==f&&clearTimeout(f),v=0,d=g=u=f=void 0},h.flush=function(){return void 0===f?m:c(b())},h}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&v.call(e)==l}(e))return a;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var i=d.test(e);return i||u.test(e)?p(e.slice(2),i?2:8):h.test(e)?a:+e}var o="Expected a function",a=NaN,l="[object Symbol]",c=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,u=/^0o[0-7]+$/i,p=parseInt,m="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,f="object"==typeof self&&self&&self.Object===Object&&self,g=m||f||Function("return this")(),v=Object.prototype.toString,y=Math.max,x=Math.min,b=function(){return g.Date.now()};e.exports=function(e,t,i){var s=!0,a=!0;if("function"!=typeof e)throw new TypeError(o);return r(i)&&(s="leading"in i?!!i.leading:s,a="trailing"in i?!!i.trailing:a),n(e,t,{leading:s,maxWait:t,trailing:a})}},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"container",staticClass:"vc-saturation",style:{background:e.bgColor},on:{mousedown:e.handleMouseDown,touchmove:e.handleChange,touchstart:e.handleChange}},[i("div",{staticClass:"vc-saturation--white"}),e._v(" "),i("div",{staticClass:"vc-saturation--black"}),e._v(" "),i("div",{staticClass:"vc-saturation-pointer",style:{top:e.pointerTop,left:e.pointerLeft}},[i("div",{staticClass:"vc-saturation-circle"})])])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){var n=i(129);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("4dc1b086",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-alpha {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n}\n.vc-alpha-checkboard-wrap {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  overflow: hidden;\n}\n.vc-alpha-gradient {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n}\n.vc-alpha-container {\n  cursor: pointer;\n  position: relative;\n  z-index: 2;\n  height: 100%;\n  margin: 0 3px;\n}\n.vc-alpha-pointer {\n  z-index: 2;\n  position: absolute;\n}\n.vc-alpha-picker {\n  cursor: pointer;\n  width: 4px;\n  border-radius: 1px;\n  height: 8px;\n  box-shadow: 0 0 2px rgba(0, 0, 0, .6);\n  background: #fff;\n  margin-top: 1px;\n  transform: translateX(-2px);\n}\n",""])},function(e,t,i){var n=i(131);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("7e15c05b",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-checkerboard {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  background-size: contain;\n}\n",""])},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"vc-checkerboard",style:e.bgStyle})};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vc-alpha"},[i("div",{staticClass:"vc-alpha-checkboard-wrap"},[i("checkboard")],1),e._v(" "),i("div",{staticClass:"vc-alpha-gradient",style:{background:e.gradientColor}}),e._v(" "),i("div",{ref:"container",staticClass:"vc-alpha-container",on:{mousedown:e.handleMouseDown,touchmove:e.handleChange,touchstart:e.handleChange}},[i("div",{staticClass:"vc-alpha-pointer",style:{left:100*e.colors.a+"%"}},[i("div",{staticClass:"vc-alpha-picker"})])])])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["vc-photoshop",e.disableFields?"vc-photoshop__disable-fields":""],attrs:{role:"application","aria-label":"PhotoShop color picker"}},[i("div",{staticClass:"vc-ps-head",attrs:{role:"heading"}},[e._v(e._s(e.head))]),e._v(" "),i("div",{staticClass:"vc-ps-body"},[i("div",{staticClass:"vc-ps-saturation-wrap"},[i("saturation",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),i("div",{staticClass:"vc-ps-hue-wrap"},[i("hue",{attrs:{direction:"vertical"},on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}},[i("div",{staticClass:"vc-ps-hue-pointer"},[i("i",{staticClass:"vc-ps-hue-pointer--left"}),i("i",{staticClass:"vc-ps-hue-pointer--right"})])])],1),e._v(" "),i("div",{class:["vc-ps-controls",e.disableFields?"vc-ps-controls__disable-fields":""]},[i("div",{staticClass:"vc-ps-previews"},[i("div",{staticClass:"vc-ps-previews__label"},[e._v(e._s(e.newLabel))]),e._v(" "),i("div",{staticClass:"vc-ps-previews__swatches"},[i("div",{staticClass:"vc-ps-previews__pr-color",style:{background:e.colors.hex},attrs:{"aria-label":"New color is "+e.colors.hex}}),e._v(" "),i("div",{staticClass:"vc-ps-previews__pr-color",style:{background:e.currentColor},attrs:{"aria-label":"Current color is "+e.currentColor},on:{click:e.clickCurrentColor}})]),e._v(" "),i("div",{staticClass:"vc-ps-previews__label"},[e._v(e._s(e.currentLabel))])]),e._v(" "),e.disableFields?e._e():i("div",{staticClass:"vc-ps-actions"},[i("div",{staticClass:"vc-ps-ac-btn",attrs:{role:"button","aria-label":e.acceptLabel},on:{click:e.handleAccept}},[e._v(e._s(e.acceptLabel))]),e._v(" "),i("div",{staticClass:"vc-ps-ac-btn",attrs:{role:"button","aria-label":e.cancelLabel},on:{click:e.handleCancel}},[e._v(e._s(e.cancelLabel))]),e._v(" "),i("div",{staticClass:"vc-ps-fields"},[i("ed-in",{attrs:{label:"h",desc:"",value:e.hsv.h},on:{change:e.inputChange}}),e._v(" "),i("ed-in",{attrs:{label:"s",desc:"%",value:e.hsv.s,max:100},on:{change:e.inputChange}}),e._v(" "),i("ed-in",{attrs:{label:"v",desc:"%",value:e.hsv.v,max:100},on:{change:e.inputChange}}),e._v(" "),i("div",{staticClass:"vc-ps-fields__divider"}),e._v(" "),i("ed-in",{attrs:{label:"r",value:e.colors.rgba.r},on:{change:e.inputChange}}),e._v(" "),i("ed-in",{attrs:{label:"g",value:e.colors.rgba.g},on:{change:e.inputChange}}),e._v(" "),i("ed-in",{attrs:{label:"b",value:e.colors.rgba.b},on:{change:e.inputChange}}),e._v(" "),i("div",{staticClass:"vc-ps-fields__divider"}),e._v(" "),i("ed-in",{staticClass:"vc-ps-fields__hex",attrs:{label:"#",value:e.hex},on:{change:e.inputChange}})],1),e._v(" "),e.hasResetButton?i("div",{staticClass:"vc-ps-ac-btn",attrs:{"aria-label":"reset"},on:{click:e.handleReset}},[e._v(e._s(e.resetLabel))]):e._e()])])])])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(57),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(138),a=!1,l=function(e){a||i(136)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Sketch.vue",t.default=c.exports},function(e,t,i){var n=i(137);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("612c6604",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-sketch {\n  position: relative;\n  width: 200px;\n  padding: 10px 10px 0;\n  box-sizing: initial;\n  background: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, .15), 0 8px 16px rgba(0, 0, 0, .15);\n}\n.vc-sketch-saturation-wrap {\n  width: 100%;\n  padding-bottom: 75%;\n  position: relative;\n  overflow: hidden;\n}\n.vc-sketch-controls {\n  display: flex;\n}\n.vc-sketch-sliders {\n  padding: 4px 0;\n  flex: 1;\n}\n.vc-sketch-sliders .vc-hue,\n.vc-sketch-sliders .vc-alpha-gradient {\n  border-radius: 2px;\n}\n.vc-sketch-hue-wrap {\n  position: relative;\n  height: 10px;\n}\n.vc-sketch-alpha-wrap {\n  position: relative;\n  height: 10px;\n  margin-top: 4px;\n  overflow: hidden;\n}\n.vc-sketch-color-wrap {\n  width: 24px;\n  height: 24px;\n  position: relative;\n  margin-top: 4px;\n  margin-left: 4px;\n  border-radius: 3px;\n}\n.vc-sketch-active-color {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  border-radius: 2px;\n  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, .15), inset 0 0 4px rgba(0, 0, 0, .25);\n  z-index: 2;\n}\n.vc-sketch-color-wrap .vc-checkerboard {\n  background-size: auto;\n}\n.vc-sketch-field {\n  display: flex;\n  padding-top: 4px;\n}\n.vc-sketch-field .vc-input__input {\n  width: 90%;\n  padding: 4px 0 3px 10%;\n  border: none;\n  box-shadow: inset 0 0 0 1px #ccc;\n  font-size: 10px;\n}\n.vc-sketch-field .vc-input__label {\n  display: block;\n  text-align: center;\n  font-size: 11px;\n  color: #222;\n  padding-top: 3px;\n  padding-bottom: 4px;\n  text-transform: capitalize;\n}\n.vc-sketch-field--single {\n  flex: 1;\n  padding-left: 6px;\n}\n.vc-sketch-field--double {\n  flex: 2;\n}\n.vc-sketch-presets {\n  margin-right: -10px;\n  margin-left: -10px;\n  padding-left: 10px;\n  padding-top: 10px;\n  border-top: 1px solid #eee;\n}\n.vc-sketch-presets-color {\n  border-radius: 3px;\n  overflow: hidden;\n  position: relative;\n  display: inline-block;\n  margin: 0 10px 10px 0;\n  vertical-align: top;\n  cursor: pointer;\n  width: 16px;\n  height: 16px;\n  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, .15);\n}\n.vc-sketch-presets-color .vc-checkerboard {\n  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, .15);\n  border-radius: 3px;\n}\n.vc-sketch__disable-alpha .vc-sketch-color-wrap {\n  height: 10px;\n}\n",""])},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["vc-sketch",e.disableAlpha?"vc-sketch__disable-alpha":""],attrs:{role:"application","aria-label":"Sketch color picker"}},[i("div",{staticClass:"vc-sketch-saturation-wrap"},[i("saturation",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),i("div",{staticClass:"vc-sketch-controls"},[i("div",{staticClass:"vc-sketch-sliders"},[i("div",{staticClass:"vc-sketch-hue-wrap"},[i("hue",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),e.disableAlpha?e._e():i("div",{staticClass:"vc-sketch-alpha-wrap"},[i("alpha",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1)]),e._v(" "),i("div",{staticClass:"vc-sketch-color-wrap"},[i("div",{staticClass:"vc-sketch-active-color",style:{background:e.activeColor},attrs:{"aria-label":"Current color is "+e.activeColor}}),e._v(" "),i("checkboard")],1)]),e._v(" "),e.disableFields?e._e():i("div",{staticClass:"vc-sketch-field"},[i("div",{staticClass:"vc-sketch-field--double"},[i("ed-in",{attrs:{label:"hex",value:e.hex},on:{change:e.inputChange}})],1),e._v(" "),i("div",{staticClass:"vc-sketch-field--single"},[i("ed-in",{attrs:{label:"r",value:e.colors.rgba.r},on:{change:e.inputChange}})],1),e._v(" "),i("div",{staticClass:"vc-sketch-field--single"},[i("ed-in",{attrs:{label:"g",value:e.colors.rgba.g},on:{change:e.inputChange}})],1),e._v(" "),i("div",{staticClass:"vc-sketch-field--single"},[i("ed-in",{attrs:{label:"b",value:e.colors.rgba.b},on:{change:e.inputChange}})],1),e._v(" "),e.disableAlpha?e._e():i("div",{staticClass:"vc-sketch-field--single"},[i("ed-in",{attrs:{label:"a",value:e.colors.a,"arrow-offset":.01,max:1},on:{change:e.inputChange}})],1)]),e._v(" "),i("div",{staticClass:"vc-sketch-presets",attrs:{role:"group","aria-label":"A color preset, pick one to set as current color"}},[e._l(e.presetColors,(function(t){return[e.isTransparent(t)?i("div",{key:t,staticClass:"vc-sketch-presets-color",attrs:{"aria-label":"Color:"+t},on:{click:function(i){return e.handlePreset(t)}}},[i("checkboard")],1):i("div",{key:t,staticClass:"vc-sketch-presets-color",style:{background:t},attrs:{"aria-label":"Color:"+t},on:{click:function(i){return e.handlePreset(t)}}})]}))],2)])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(58),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(142),a=!1,l=function(e){a||i(140)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Chrome.vue",t.default=c.exports},function(e,t,i){var n=i(141);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("1cd16048",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-chrome {\n  background: #fff;\n  border-radius: 2px;\n  box-shadow: 0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3);\n  box-sizing: initial;\n  width: 225px;\n  font-family: Menlo;\n  background-color: #fff;\n}\n.vc-chrome-controls {\n  display: flex;\n}\n.vc-chrome-color-wrap {\n  position: relative;\n  width: 36px;\n}\n.vc-chrome-active-color {\n  position: relative;\n  width: 30px;\n  height: 30px;\n  border-radius: 15px;\n  overflow: hidden;\n  z-index: 1;\n}\n.vc-chrome-color-wrap .vc-checkerboard {\n  width: 30px;\n  height: 30px;\n  border-radius: 15px;\n  background-size: auto;\n}\n.vc-chrome-sliders {\n  flex: 1;\n}\n.vc-chrome-fields-wrap {\n  display: flex;\n  padding-top: 16px;\n}\n.vc-chrome-fields {\n  display: flex;\n  margin-left: -6px;\n  flex: 1;\n}\n.vc-chrome-field {\n  padding-left: 6px;\n  width: 100%;\n}\n.vc-chrome-toggle-btn {\n  width: 32px;\n  text-align: right;\n  position: relative;\n}\n.vc-chrome-toggle-icon {\n  margin-right: -4px;\n  margin-top: 12px;\n  cursor: pointer;\n  position: relative;\n  z-index: 2;\n}\n.vc-chrome-toggle-icon-highlight {\n  position: absolute;\n  width: 24px;\n  height: 28px;\n  background: #eee;\n  border-radius: 4px;\n  top: 10px;\n  left: 12px;\n}\n.vc-chrome-hue-wrap {\n  position: relative;\n  height: 10px;\n  margin-bottom: 8px;\n}\n.vc-chrome-alpha-wrap {\n  position: relative;\n  height: 10px;\n}\n.vc-chrome-hue-wrap .vc-hue {\n  border-radius: 2px;\n}\n.vc-chrome-alpha-wrap .vc-alpha-gradient {\n  border-radius: 2px;\n}\n.vc-chrome-hue-wrap .vc-hue-picker, .vc-chrome-alpha-wrap .vc-alpha-picker {\n  width: 12px;\n  height: 12px;\n  border-radius: 6px;\n  transform: translate(-6px, -2px);\n  background-color: rgb(248, 248, 248);\n  box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.37);\n}\n.vc-chrome-body {\n  padding: 16px 16px 12px;\n  background-color: #fff;\n}\n.vc-chrome-saturation-wrap {\n  width: 100%;\n  padding-bottom: 55%;\n  position: relative;\n  border-radius: 2px 2px 0 0;\n  overflow: hidden;\n}\n.vc-chrome-saturation-wrap .vc-saturation-circle {\n  width: 12px;\n  height: 12px;\n}\n.vc-chrome-fields .vc-input__input {\n  font-size: 11px;\n  color: #333;\n  width: 100%;\n  border-radius: 2px;\n  border: none;\n  box-shadow: inset 0 0 0 1px #dadada;\n  height: 21px;\n  text-align: center;\n}\n.vc-chrome-fields .vc-input__label {\n  text-transform: uppercase;\n  font-size: 11px;\n  line-height: 11px;\n  color: #969696;\n  text-align: center;\n  display: block;\n  margin-top: 12px;\n}\n.vc-chrome__disable-alpha .vc-chrome-active-color {\n  width: 18px;\n  height: 18px;\n}\n.vc-chrome__disable-alpha .vc-chrome-color-wrap {\n  width: 30px;\n}\n.vc-chrome__disable-alpha .vc-chrome-hue-wrap {\n  margin-top: 4px;\n  margin-bottom: 4px;\n}\n",""])},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["vc-chrome",e.disableAlpha?"vc-chrome__disable-alpha":""],attrs:{role:"application","aria-label":"Chrome color picker"}},[i("div",{staticClass:"vc-chrome-saturation-wrap"},[i("saturation",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),i("div",{staticClass:"vc-chrome-body"},[i("div",{staticClass:"vc-chrome-controls"},[i("div",{staticClass:"vc-chrome-color-wrap"},[i("div",{staticClass:"vc-chrome-active-color",style:{background:e.activeColor},attrs:{"aria-label":"current color is "+e.colors.hex}}),e._v(" "),e.disableAlpha?e._e():i("checkboard")],1),e._v(" "),i("div",{staticClass:"vc-chrome-sliders"},[i("div",{staticClass:"vc-chrome-hue-wrap"},[i("hue",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),e.disableAlpha?e._e():i("div",{staticClass:"vc-chrome-alpha-wrap"},[i("alpha",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1)])]),e._v(" "),e.disableFields?e._e():i("div",{staticClass:"vc-chrome-fields-wrap"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0===e.fieldsIndex,expression:"fieldsIndex === 0"}],staticClass:"vc-chrome-fields"},[i("div",{staticClass:"vc-chrome-field"},[e.hasAlpha?e._e():i("ed-in",{attrs:{label:"hex",value:e.colors.hex},on:{change:e.inputChange}}),e._v(" "),e.hasAlpha?i("ed-in",{attrs:{label:"hex",value:e.colors.hex8},on:{change:e.inputChange}}):e._e()],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===e.fieldsIndex,expression:"fieldsIndex === 1"}],staticClass:"vc-chrome-fields"},[i("div",{staticClass:"vc-chrome-field"},[i("ed-in",{attrs:{label:"r",value:e.colors.rgba.r},on:{change:e.inputChange}})],1),e._v(" "),i("div",{staticClass:"vc-chrome-field"},[i("ed-in",{attrs:{label:"g",value:e.colors.rgba.g},on:{change:e.inputChange}})],1),e._v(" "),i("div",{staticClass:"vc-chrome-field"},[i("ed-in",{attrs:{label:"b",value:e.colors.rgba.b},on:{change:e.inputChange}})],1),e._v(" "),e.disableAlpha?e._e():i("div",{staticClass:"vc-chrome-field"},[i("ed-in",{attrs:{label:"a",value:e.colors.a,"arrow-offset":.01,max:1},on:{change:e.inputChange}})],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===e.fieldsIndex,expression:"fieldsIndex === 2"}],staticClass:"vc-chrome-fields"},[i("div",{staticClass:"vc-chrome-field"},[i("ed-in",{attrs:{label:"h",value:e.hsl.h},on:{change:e.inputChange}})],1),e._v(" "),i("div",{staticClass:"vc-chrome-field"},[i("ed-in",{attrs:{label:"s",value:e.hsl.s},on:{change:e.inputChange}})],1),e._v(" "),i("div",{staticClass:"vc-chrome-field"},[i("ed-in",{attrs:{label:"l",value:e.hsl.l},on:{change:e.inputChange}})],1),e._v(" "),e.disableAlpha?e._e():i("div",{staticClass:"vc-chrome-field"},[i("ed-in",{attrs:{label:"a",value:e.colors.a,"arrow-offset":.01,max:1},on:{change:e.inputChange}})],1)]),e._v(" "),i("div",{staticClass:"vc-chrome-toggle-btn",attrs:{role:"button","aria-label":"Change another color definition"},on:{click:e.toggleViews}},[i("div",{staticClass:"vc-chrome-toggle-icon"},[i("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"},on:{mouseover:e.showHighlight,mouseenter:e.showHighlight,mouseout:e.hideHighlight}},[i("path",{attrs:{fill:"#333",d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}})])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.highlight,expression:"highlight"}],staticClass:"vc-chrome-toggle-icon-highlight"})])])])])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(59),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(146),a=!1,l=function(e){a||i(144)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Twitter.vue",t.default=c.exports},function(e,t,i){var n=i(145);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("669a48a5",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-twitter {\n  background: #fff;\n  border: 0 solid rgba(0,0,0,0.25);\n  box-shadow: 0 1px 4px rgba(0,0,0,0.25);\n  border-radius: 4px;\n  position: relative;\n}\n.vc-twitter-triangle {\n  width: 0px;\n  height: 0px;\n  border-style: solid;\n  border-width: 0 9px 10px 9px;\n  border-color: transparent transparent #fff transparent;\n  position: absolute;\n}\n.vc-twitter-triangle-shadow {\n  width: 0px;\n  height: 0px;\n  border-style: solid;\n  border-width: 0 9px 10px 9px;\n  border-color: transparent transparent rgba(0, 0, 0, .1) transparent;\n  position: absolute;\n}\n.vc-twitter-body {\n  padding: 15px 9px 9px 15px;\n}\n.vc-twitter .vc-editable-input {\n  position: relative;\n}\n.vc-twitter .vc-editable-input input {\n  width: 100px;\n  font-size: 14px;\n  color: #666;\n  border: 0px;\n  outline: none;\n  height: 28px;\n  box-shadow: inset 0 0 0 1px #F0F0F0;\n  box-sizing: content-box;\n  border-radius: 0 4px 4px 0;\n  float: left;\n  padding: 1px;\n  padding-left: 8px;\n}\n.vc-twitter .vc-editable-input span {\n  display: none;\n}\n.vc-twitter-hash {\n  background: #F0F0F0;\n  height: 30px;\n  width: 30px;\n  border-radius: 4px 0 0 4px;\n  float: left;\n  color: #98A1A4;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.vc-twitter-swatch {\n  width: 30px;\n  height: 30px;\n  float: left;\n  border-radius: 4px;\n  margin: 0 6px 6px 0;\n  cursor: pointer;\n  position: relative;\n  outline: none;\n}\n.vc-twitter-clear {\n  clear: both;\n}\n.vc-twitter-hide-triangle .vc-twitter-triangle {\n  display: none;\n}\n.vc-twitter-hide-triangle .vc-twitter-triangle-shadow {\n  display: none;\n}\n.vc-twitter-top-left-triangle .vc-twitter-triangle{\n  top: -10px;\n  left: 12px;\n}\n.vc-twitter-top-left-triangle .vc-twitter-triangle-shadow{\n  top: -11px;\n  left: 12px;\n}\n.vc-twitter-top-right-triangle .vc-twitter-triangle{\n  top: -10px;\n  right: 12px;\n}\n.vc-twitter-top-right-triangle .vc-twitter-triangle-shadow{\n  top: -11px;\n  right: 12px;\n}\n",""])},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vc-twitter",class:{"vc-twitter-hide-triangle ":"hide"===e.triangle,"vc-twitter-top-left-triangle ":"top-left"===e.triangle,"vc-twitter-top-right-triangle ":"top-right"===e.triangle},style:{width:"number"==typeof e.width?e.width+"px":e.width}},[i("div",{staticClass:"vc-twitter-triangle-shadow"}),e._v(" "),i("div",{staticClass:"vc-twitter-triangle"}),e._v(" "),i("div",{staticClass:"vc-twitter-body"},[e._l(e.defaultColors,(function(t,n){return i("span",{key:n,staticClass:"vc-twitter-swatch",style:{background:t,boxShadow:"0 0 4px "+(e.equal(t)?t:"transparent")},on:{click:function(i){return e.handlerClick(t)}}})})),e._v(" "),i("div",{staticClass:"vc-twitter-hash"},[e._v("#")]),e._v(" "),i("editable-input",{attrs:{label:"#",value:e.hex},on:{change:e.inputChange}}),e._v(" "),i("div",{staticClass:"vc-twitter-clear"})],2)])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r}])},2373:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dropdown-container",class:{inline:e.inline,borderless:e.borderless}},[i("div",{staticClass:"dropdown-click-area",class:{"hover-effect":e.hoverEffect&&!e.disabled},style:e.dropwonClickAreaStyle,on:{click:e.toggleDropdown}},[null===e.value?e._t("default"):i("div",[e.selectedOption?i("div",[e.selectedOption.iconClass?i("i",{class:e.selectedOption.iconClass}):e._e(),e._v(" "),i("span",{style:e.selectedOption.style||{}},[e._v(" "+e._s(e.selectedOption.name)+" ")])]):i("span",[e._v("Unknown Value")])])],2),e._v(" "),e.shown?i("div",{ref:"dropdownPopup",staticClass:"dropdown-popup",style:{top:e.y+"px",left:e.x+"px","max-width":e.maxWidth+"px"}},[e.searchEnabled?i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],ref:"searchTextfield",staticClass:"dropdown-search",attrs:{placeholder:"Search...","data-input-type":"dropdown-search"},domProps:{value:e.searchKeyword},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancelPopup()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.pickFirstOption(e.filteredOptions)}],input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}}):e._e(),e._v(" "),i("div",{style:{"max-width":e.maxWidth+"px","max-height":e.maxHeight+"px",overflow:"auto"}},[i("ul",e._l(e.filteredOptions,(function(t){return i("li",{on:{click:function(i){return e.onOptionClicked(t)},mouseover:function(i){return e.onOptionMouseOver(t)},mouseleave:function(t){return e.onOptionMouseLeave()}}},[t.iconClass?i("i",{class:t.iconClass}):e._e(),e._v(" "),t.html?i("div",{domProps:{innerHTML:e._s(t.html)}}):i("span",{style:t.style||{}},[e._v(" "+e._s(t.name)+" ")])])})),0)])]):e._e(),e._v(" "),e.shown&&e.hoveredOption.shown?i("div",{staticClass:"dropdown-option-tooltip",style:{top:e.hoveredOption.y+"px",left:e.hoveredOption.x+"px",width:e.hoveredOption.w+"px",height:e.hoveredOption.h+"px"}},[i("h3",[e.hoveredOption.iconClass?i("i",{class:e.hoveredOption.iconClass}):e._e(),e._v("\n            "+e._s(e.hoveredOption.title)+"\n        ")]),e._v("\n        "+e._s(e.hoveredOption.text)+"\n    ")]):e._e()])};n._withStripped=!0;var r=i(6234);const s={props:{options:{type:Array,required:!0},value:{type:String,default:null},hoverEffect:{type:Boolean,default:!0},searchEnabled:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},autoFocusSearch:{type:Boolean,default:!0},inline:{type:Boolean,default:!1},width:{type:Number,default:0},borderless:{type:Boolean,default:!1}},mounted(){document.body.addEventListener("click",this.onBodyClick),document.body.addEventListener("keydown",this.onGlobalKeydown)},beforeDestroy(){document.body.removeEventListener("click",this.onBodyClick),document.body.removeEventListener("keydown",this.onGlobalKeydown)},data(){let e=null;return this.value&&(e=(0,r.sE)(this.options,(e=>e.name===this.value))),{shown:!1,lastTimeClicked:0,searchKeyword:"",x:0,y:0,maxHeight:300,searchTextfieldHeight:30,maxWidth:400,elementRect:null,selectedOption:e,hoveredOption:{shown:!1,title:"",text:"",x:0,y:0,w:200,h:200}}},methods:{toggleDropdown(e){if(this.searchKeyword="",this.disabled)return;const t=e.target.getBoundingClientRect();this.elementRect=t,this.lastTimeClicked=(new Date).getTime(),this.shown=!this.shown,this.shown?(this.emitToggled(),this.$nextTick((()=>{this.readjustDropdownPopup(),this.$refs.searchTextfield&&this.autoFocusSearch&&this.$refs.searchTextfield.focus()}))):this.emitHidden()},emitToggled(){this.$emit("dropdown-toggled")},emitHidden(){this.$emit("dropdown-hidden")},readjustDropdownPopup(){const e=this.$refs.dropdownPopup;if(!e||!this.elementRect)return;const t=e.getBoundingClientRect().width,i=e.getBoundingClientRect().height;let n=Math.max(0,this.elementRect.x),r=Math.max(0,this.elementRect.bottom),s=n+t,o=r+i+this.searchTextfieldHeight;s>window.innerWidth?this.x=n+window.innerWidth-s:this.x=n,o>window.innerHeight?window.innerHeight-r-this.searchTextfieldHeight>r?(this.y=r,this.maxHeight=window.innerHeight-r-this.searchTextfieldHeight):(this.y=Math.max(5,r-i),this.maxHeight=Math.max(100,Math.min(300,r-this.y-this.searchTextfieldHeight-5))):this.y=r},onOptionClicked(e){this.$emit("selected",e)},onBodyClick(e){if(!0===this.shown&&(new Date).getTime()-this.lastTimeClicked>200){if(e.srcElement&&"dropdown-search"===e.srcElement.getAttribute("data-input-type"))return;this.cancelPopup()}},onGlobalKeydown(e){if(!0===this.shown&&(new Date).getTime()-this.lastTimeClicked>200){if(e.srcElement&&"dropdown-search"===e.srcElement.getAttribute("data-input-type"))return;this.cancelPopup()}},cancelPopup(){this.shown&&this.emitHidden(),this.shown=!1},pickFirstOption(e){e.length>0&&this.onOptionClicked(e[0]),this.cancelPopup()},onOptionMouseOver(e){if(e.description){if(this.hoveredOption.title!==e.name||!this.hoveredOption.shown){this.hoveredOption.shown=!0,this.hoveredOption.title=e.name,this.hoveredOption.iconClass=e.iconClass,this.hoveredOption.text=e.description;const t=this.$refs.dropdownPopup;if(t){const e=t.getBoundingClientRect();let i=e.left-this.hoveredOption.w,n=e.top;i<0&&(i=e.right);let r=n+this.hoveredOption.h-window.innerHeight;r>0&&(n-=r),this.hoveredOption.x=i,this.hoveredOption.y=n}}}else this.hoveredOption.shown=!1},onOptionMouseLeave(){this.hoveredOption.shown=!1}},computed:{filteredOptions(){return(0,r.hX)(this.options,(e=>e.name.toLowerCase().indexOf(this.searchKeyword.toLowerCase())>=0))},dropwonClickAreaStyle(){const e={};return this.inline&&this.width>0&&(e["min-width"]=`${this.width}px`),e}},watch:{value(e){this.selectedOption=(0,r.sE)(this.options,(t=>t.name===e))}}},o=(0,i(1900).Z)(s,n,[],!1,null,null,null).exports},9021:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.useMask?i("div",{staticClass:"modal-mask"}):e._e(),e._v(" "),i("div",{ref:"modalContainer",staticClass:"modal-container",style:{width:e.actualWidth+"px",top:e.y+"px",left:e.x+"px"}},[e.showHeader?i("div",{staticClass:"modal-header",class:{dragging:e.dragging},on:{touchstart:e.initModalDrag,mousedown:e.initModalDrag}},[i("h3",[e._v(e._s(e.title))]),e._v(" "),e.closable?i("span",{staticClass:"modal-close",on:{click:function(t){return e.$emit("close")}}},[i("i",{staticClass:"fas fa-times"})]):e._e()]):e._e(),e._v(" "),i("div",{staticClass:"modal-body",style:e.modalBodyStyles},[e._t("default")],2),e._v(" "),e.showFooter?i("div",{staticClass:"modal-footer"},[i("div",{staticClass:"modal-controls"},[e.primaryButton?i("span",{staticClass:"btn btn-primary",class:{disabled:e.primaryButtonDisabled},on:{click:function(t){return e.$emit("primary-submit")}}},[e._v(e._s(e.primaryButton))]):e._e(),e._v(" "),e.secondaryButton?i("span",{class:"btn "+e.secondaryButtonStyle,on:{click:function(t){return e.$emit("secondary-submit")}}},[e._v(e._s(e.secondaryButton))]):e.closable?i("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.$emit("close")}}},[e._v(e._s(e.closeName))]):e._e()])]):e._e()])])};n._withStripped=!0;var r=i(1068);function s(e,t,i,n){return e+t<n?n-t:i-e<n?i-n:e}const o=50,a={},l={props:{title:{type:String,default:""},width:{type:Number,default:600},maxWidth:{type:Number,default:0},maxHeight:{type:Number,default:0},stretchWidth:{type:Boolean,default:!1},primaryButton:{type:String,default:null},primaryButtonDisabled:{type:Boolean,default:!1},secondaryButton:{type:String,default:null},secondaryButtonStyle:{type:String,default:"btn-secondary"},useMask:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},closeName:{type:String,default:"Close"},repositionId:{type:Number,default:0}},beforeMount(){this.stretchWidth&&(this.actualWidth=window.innerWidth-80,this.maxWidth>0&&(this.actualWidth=Math.min(this.actualWidth,this.maxWidth))),document.addEventListener("keydown",this.onKeyPress)},mounted(){const e=this.$refs.modalContainer.getBoundingClientRect();let t=(window.innerWidth-e.width)/2,i=(window.innerHeight-e.height)/2;const n=a[this.title];n&&(t=n.x,i=n.y),this.x=s(t,e.width,window.innerWidth,o),this.y=s(i,40,window.innerHeight,o)},beforeDestroy(){document.removeEventListener("keydown",this.onKeyPress)},data(){return{x:100,y:100,actualWidth:Math.min(this.width,window.innerWidth-20),dragging:!1}},methods:{onKeyPress(e){if("Escape"===e.key){if(e.target.classList.contains("script-editor"))return;this.$emit("close")}},initModalDrag(e){let t=this.x,i=this.y;const n=this.$refs.modalContainer.getBoundingClientRect();(0,r.E)(e).onDragStart((()=>{this.dragging=!0})).onDrag(((e,r,l,c,h)=>{const d=r-c,u=l-h;this.x=s(t+d,n.width,window.innerWidth,o),this.y=s(i+u,40,window.innerHeight,o),a[this.title]={x:this.x,y:this.y}})).onDone((()=>{this.dragging=!1})).build()},repositionModal(){const e=this.$refs.modalContainer.getBoundingClientRect();if(e.right>window.innerWidth){const t=e.left-e.right+window.innerWidth;this.x=s(t,e.width,window.innerWidth,o)}if(e.bottom>window.innerHeight){const t=e.top-e.bottom+window.innerHeight;this.y=s(t,40,window.innerHeight,o)}}},computed:{modalBodyStyles(){const e={};return this.maxHeight>0?e["max-height"]=`${Math.min(this.maxHeight,window.innerHeight-120)}px`:e["max-height"]=window.innerHeight-120+"px",e}},watch:{repositionId(){this.$nextTick((()=>{this.repositionModal()}))}}},c=(0,i(1900).Z)(l,n,[],!1,null,null,null).exports},9240:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"number-textfield-container",class:{disabled:e.disabled}},[e.name?i("div",{ref:"label",staticClass:"label",on:{click:e.onLabelClicked}},[e._v(e._s(e.name))]):e._e(),e._v(" "),!e.name&&e.icon?i("div",{ref:"icon",staticClass:"label"},[i("i",{class:e.icon})]):e._e(),e._v(" "),i("div",{staticClass:"wrapper"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"}],ref:"textfield",attrs:{type:"text",disabled:e.disabled},domProps:{value:e.text},on:{blur:e.submitEvent,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitEvent.apply(null,arguments)},input:function(t){t.target.composing||(e.text=t.target.value)}}}),e._v(" "),i("div",{staticClass:"step-controls"},[i("span",{staticClass:"step step-up",on:{click:function(t){return e.onStepClicked(1)},mousedown:e.onMouseDownIncrement}},[i("i",{staticClass:"fas fa-caret-up"})]),e._v(" "),i("span",{staticClass:"step step-down",on:{click:function(t){return e.onStepClicked(-1)},mousedown:e.onMouseDownDecrement}},[i("i",{staticClass:"fas fa-caret-down"})])])])])};n._withStripped=!0;var r=i(3590);function s(e){if(e%1==0)return""+e;let t="";return t=Math.floor(Math.abs(e))>0?""+r.Z.roundPrecise(e,3):""+r.Z.roundPrecise(e,4),t}const o={props:{value:[Number,String,Object],format:{type:String,default:"float"},name:{type:String,default:null},icon:{type:String,default:null},min:{type:Number,default:null},max:{type:Number,default:null},disabled:{type:Boolean,default:!1},incrementSpeed:{type:Number,default:1},incrementMaxSpeed:{type:Number,default:50},incrementAcceleration:{type:Number,default:.15}},beforeDestroy(){document.body.removeEventListener("mouseup",this.onMouseUp)},data(){return{text:s(this.value),number:this.value,autoIncrementDelayTimeoutId:-1,autoIncrementDirection:1,autoIncrementInitDelay:300,autoIncrementDelay:50,autoIncrementIntervalId:-1,autoIncrementSpeed:this.incrementSpeed,autoIncrementMaxSpeed:this.incrementMaxSpeed,autoIncrementAcceleration:this.incrementAcceleration}},methods:{onLabelClicked(){this.$refs.textfield.focus()},textToFloat(e){const t=parseFloat(e.replace(/[^\d.-]/g,""));return isFinite(t)?t:0},textToInt(e){const t=parseInt(e.replace(/[^\d-]/g,""));return isFinite(t)?t:0},textToNumber(e){return e=""+e,"float"===this.format?this.textToFloat(e):this.textToInt(e)},submitEvent(){this.number=this.enforceLimits(this.textToNumber(this.text)),this.$emit("changed",this.number)},onStepClicked(e){if(this.disabled)return;let t=this.textToNumber(this.text);t+=e,this.number=this.enforceLimits(t),this.$emit("changed",this.number),this.text=""+this.number},enforceLimits(e){return null!==this.min&&e<this.min?this.min:null!==this.max&&e>this.max?this.max:e},onMouseDownIncrement(e){this.onMouseDown(e,1)},onMouseDownDecrement(e){this.onMouseDown(e,-1)},onMouseDown(e,t){this.autoIncrementDirection=t,this.autoIncrementDelayTimeoutId&&clearTimeout(this.autoIncrementDelayTimeoutId),this.autoIncrementDelayTimeoutId=setTimeout((()=>{this.initAutoIncrement()}),this.autoIncrementInitDelay),document.body.addEventListener("mouseup",this.onMouseUp)},onMouseUp(){document.body.removeEventListener("mouseup",this.onMouseUp),this.autoIncrementIntervalId&&(clearInterval(this.autoIncrementIntervalId),this.autoIncrementIntervalId=-1),this.autoIncrementDelayTimeoutId&&(clearTimeout(this.autoIncrementDelayTimeoutId),this.autoIncrementDelayTimeoutId=-1)},initAutoIncrement(){this.autoIncrementSpeed=this.incrementSpeed,this.number=this.textToNumber(this.text),this.autoIncrementIntervalId=setInterval((()=>{this.number=this.enforceLimits(this.number+this.autoIncrementDirection*Math.floor(this.autoIncrementSpeed)),this.text=""+this.number,this.$emit("changed",this.number),this.autoIncrementSpeed<this.autoIncrementMaxSpeed&&(this.autoIncrementSpeed+=this.autoIncrementAcceleration)}),this.autoIncrementDelay)}},watch:{value(e){this.text=s(e)}}},a=(0,i(1900).Z)(o,n,[],!1,null,null,null).exports},4628:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tooltip",class:{disabled:e.disabled},on:{mouseover:e.onMouseOver}},[i("i",{staticClass:"tooltip-icon fas fa-info-circle"}),e._v(" "),e.disabled?e._e():i("div",{staticClass:"tooltip-wrapper",style:{left:e.x+"px",top:e.y+"px"},attrs:{id:"tooltip-wrapper-"+e.id}},[i("div",{staticClass:"tooltip-text"},[e._t("default")],2)])])};n._withStripped=!0;var r=i(4670),s=i.n(r);const o={props:{disabled:{type:Boolean,default:!1}},data:()=>({id:s().generate(),x:0,y:0}),methods:{onMouseOver(e){this.x=e.x+10;let t=e.y+20;const i=document.getElementById(`tooltip-wrapper-${this.id}`);if(i){const n=i.getBoundingClientRect();n.height+t>window.innerHeight&&(t=e.y-n.height)}this.y=t}}},a=(0,i(1900).Z)(o,n,[],!1,null,null,null).exports},4896:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"advanced-color-editor",class:{disabled:e.disabled},style:{width:e.width,height:e.height}},[e.color.type&&"none"!==e.color.type?e._e():i("span",{staticClass:"none-picker-toggle-button",on:{click:function(t){return e.showModal()}}}),e._v(" "),"solid"===e.color.type?i("span",{staticClass:"color-picker-toggle-button",style:{background:e.color.color},on:{click:function(t){return e.showModal()}}}):e._e(),e._v(" "),"image"===e.color.type?i("div",{staticClass:"image-container",on:{click:function(t){return e.showModal()}}},[i("img",{attrs:{src:e.color.image}})]):e._e(),e._v(" "),"gradient"===e.color.type?i("div",{staticClass:"gradient-container",style:{background:e.gradientPreview},on:{click:function(t){return e.showModal()}}}):e._e(),e._v(" "),e.modal.shown?i("modal",{attrs:{title:"Color",width:400,"use-mask":!1},on:{close:function(t){e.modal.shown=!1}}},[i("ul",{staticClass:"tabs"},e._l(e.colorTypes,(function(t){return i("li",[i("span",{staticClass:"tab",class:{active:e.color.type===t},on:{click:function(i){return e.selectColorType(t)}}},[e._v("\n                    "+e._s(t)+"\n                ")])])})),0),e._v(" "),i("div",{staticClass:"tabs-body",staticStyle:{"min-height":"320px"}},["none"===e.color.type?i("div",[i("p",[e._v("\n                    This setting disables the fill\n                ")])]):e._e(),e._v(" "),"solid"===e.color.type?i("div",[i("color-picker",{attrs:{palette:[],pressets:[]},on:{input:e.updateSolidColor},model:{value:e.modal.pickerColor,callback:function(t){e.$set(e.modal,"pickerColor",t)},expression:"modal.pickerColor"}})],1):e._e(),e._v(" "),"image"===e.color.type?i("div",[i("div",{staticClass:"image-control"},[i("input",{staticClass:"textfield",attrs:{placeholder:"Image URL..."},domProps:{value:e.modal.image.path},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onImagePathChange.apply(null,arguments)},blur:e.onImagePathChange}}),e._v(" "),e.isUploadEnabled?i("div",{staticClass:"file-upload-button"},[i("i",{staticClass:"fas fa-file-upload icon"}),e._v(" "),i("input",{attrs:{type:"file",accept:"image/*"},on:{change:e.onImageUpload}})]):e._e()]),e._v(" "),i("div",{staticClass:"ctrl-group"},[i("input",{attrs:{type:"checkbox",id:"image-stretch-"+e.id},domProps:{checked:e.color.stretch||!1},on:{input:e.onImageStretchChange}}),i("label",{attrs:{for:"image-stretch-"+e.id}},[e._v(" Stretch")])]),e._v(" "),e.isUploading?i("div",{staticClass:"msg msg-info"},[i("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" Uploading...\n                ")]):e._e(),e._v(" "),e.uploadErrorMessage?i("div",{staticClass:"msg msg-error"},[e._v(e._s(e.uploadErrorMessage))]):e._e(),e._v(" "),"image"===e.color.type&&e.color.image?i("img",{staticStyle:{"max-width":"360px","max-height":"360px"},attrs:{src:e.color.image}}):e._e()]):e._e(),e._v(" "),"gradient"===e.color.type?i("div",[i("div",{ref:"gradientSliderContainer",staticClass:"gradient-slider-container text-nonselectable"},[i("div",{staticClass:"gradient-container large",style:{background:e.gradientPreview},on:{dblclick:e.onGradientContainerDblClick}}),e._v(" "),e._l(e.color.gradient.colors,(function(t,n){return i("div",{staticClass:"gradient-slider",style:{left:t.p+"%"}},[i("div",{staticClass:"gradient-slider-knob",class:{selected:n===e.gradient.selectedSliderIdx},style:{background:t.c},on:{mousedown:function(t){return e.onGradientSliderKnobClick(n,arguments[0])},dblclick:function(t){return e.onGradientSliderKnobDblClick(n)}}})])}))],2),e._v(" "),i("div",{staticClass:"gradient-controls"},[i("div",{staticClass:"ctrl-group"},[i("div",{staticClass:"ctrl-label"},[e._v("Gradient Type")]),e._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:e.color.gradient.type,expression:"color.gradient.type"}],on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.color.gradient,"type",t.target.multiple?i:i[0])},e.emitChange]}},[i("option",{attrs:{value:"linear"}},[e._v("Linear")]),e._v(" "),i("option",{attrs:{value:"radial"}},[e._v("Radial")])])]),e._v(" "),"linear"===e.color.gradient.type?i("div",{staticClass:"ctrl-group"},[i("div",{staticClass:"ctrl-label"},[e._v("Direction")]),e._v(" "),i("number-textfield",{attrs:{value:e.color.gradient.direction},on:{changed:function(t){e.color.gradient.direction=arguments[0],e.emitChange()}}})],1):e._e(),e._v(" "),i("div",{staticClass:"ctrl-group"},[i("span",{staticClass:"btn btn-secondary",on:{click:e.invertGradient}},[e._v("Invert")])])]),e._v(" "),i("div",{staticClass:"gradient-color-picker"},[i("color-picker",{key:"gradient-"+e.id+"-"+e.gradient.selectedSliderIdx+"-"+e.revision,attrs:{value:e.gradient.selectedColor},on:{input:e.updateGradientSliderColor}})],1)]):e._e()])]):e._e()],1)};n._withStripped=!0;var r=i(4670),s=i.n(r),o=i(4023),a=i.n(o),l=i(9021),c=i(9240),h=i(6012),d=i(4691),u=i(4925),p=i(3590);const m={props:{editorId:{type:String,required:!0},value:{type:Object,required:!0},width:{type:String,default:"100%"},height:{type:String,default:"26px"},disabled:{type:Boolean,default:!1}},components:{"color-picker":a().Chrome,Modal:l.Z,NumberTextfield:c.Z},beforeMount(){this.updateCurrentColor(this.value)},mounted(){document.body.addEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp)},beforeDestroy(){document.body.removeEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp)},data(){return{id:s().generate(),revision:0,colorTypes:["none","solid","image","gradient"],color:d.Z.clone(this.value),modal:{shown:!1,pickerColor:{hex:this.value.color||"#fff"},image:{path:this.value.image||""}},gradient:{selectedSliderIdx:0,isDragging:!1,selectedColor:{hex:"#fff"},originalClickPoint:{x:0},originalKnobPosition:0},gradientPreview:"",isUploading:!1,uploadErrorMessage:null}},watch:{value(e){this.updateCurrentColor(e)}},methods:{showModal(){this.disabled||(this.modal.shown=!0)},updateCurrentColor(e){"gradient"===e.type&&(this.gradient.selectedColor.hex=e.gradient.colors[this.gradient.selectedSliderIdx].c,this.gradientPreview=this.computeGradientPreview(e.gradient)),this.color=d.Z.clone(e),this.modal.pickerColor={hex:e.color||"#fff"},"image"===this.color.type&&(this.modal.image.path=this.color.image),this.image={path:e.image||""}},onImageStretchChange(e){this.color.stretch=e.target.checked,this.emitChange()},emitChange(){this.$emit("changed",d.Z.clone(this.color))},updateSolidColor(e){this.color.color=`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${e.rgba.a})`,this.emitChange()},selectColorType(e){if(this.color.type=e,"image"!==e||this.color.image||(this.color.image="",this.color.stretch=!1,this.color.imageBox={x:0,y:0,w:1,h:1}),"solid"!==e||this.color.color||(this.color.color="rgba(255,255,255,1.0)"),"gradient"===e&&!this.color.gradient){let e="rgba(0,0,0,1.0)",t="rgba(255,255,255,1.0)";this.color.color&&(e=this.color.color,t=this.color.color),this.color.gradient={colors:[{c:e,p:0},{c:t,p:100}],type:"linear",direction:0},this.gradientPreview=this.computeGradientPreview(this.color.gradient)}this.emitChange()},onImagePathChange(e){this.color.image=e.target.value,this.emitChange()},onImageUpload(e){if(!this.$store.state.apiClient||!this.$store.state.apiClient.uploadFile)return;const t=e.target.files[0];t&&(this.isUploading=!0,this.uploadErrorMessage=null,this.$store.state.apiClient.uploadFile(t).then((e=>{this.isUploading=!1,this.color.image=e,this.modal.image.path=e,this.emitChange()})).catch((e=>{this.isUploading=!1,this.uploadErrorMessage="Failed to upload image",e.data&&e.data.message&&u.Z.addErrorSystemMessage(this.$store,e.data.message)})))},onMouseUp(e){this.gradient.isDragging&&"gradient"===this.color.type&&(this.gradient.isDragging=!1,this.color.gradient.colors.sort(((e,t)=>e.p-t.p)))},onMouseMove(e){if(this.gradient.isDragging){if(0===e.buttons)return void(this.gradient.isDragging=!1);const t=e.clientX,i=this.$refs.gradientSliderContainer.getBoundingClientRect();let n=0;n=t<i.left?0:t>i.right?100:Math.round(1e4*(t-i.left)/i.width)/100,this.color.gradient.colors[this.gradient.selectedSliderIdx].p=n,this.gradientPreview=this.computeGradientPreview(this.color.gradient),this.$forceUpdate(),this.emitChange()}},onGradientContainerDblClick(e){const t=e.clientX,i=this.$refs.gradientSliderContainer.getBoundingClientRect();if(t<i.left||t>i.right)return;const n=Math.round(1e4*(t-i.left)/i.width)/100;this.color.gradient.colors.sort(((e,t)=>e.p-t.p));let r=0,s=!1;for(let e=0;e<this.color.gradient.colors.length&&!s;e++)n>this.color.gradient.colors[e].p?r=e+1:(r=e,s=!0);this.color.gradient.colors.splice(r,0,{c:"rgba(0,0,0,1.0)",p:n}),0===r&&this.color.gradient.colors.length>1?this.color.gradient.colors[0].c=this.color.gradient.colors[1].c:r===this.color.gradient.colors.length-1&&this.color.gradient.colors.length>1?this.color.gradient.colors[r].c=this.color.gradient.colors[r-1].c:this.color.gradient.colors.length>2&&(this.color.gradient.colors[r].c=function(e,t,i){let n=i.p-t.p;if(Math.abs(n)<.001)return t.c;let r=Math.max(0,Math.min((e.p-t.p)/n,1));const s=(0,h.l)(t.c),o=(0,h.l)(i.c),a=Math.max(0,Math.min(Math.round(s.r*(1-r)+o.r*r),255)),l=Math.max(0,Math.min(Math.round(s.g*(1-r)+o.g*r),255)),c=Math.max(0,Math.min(Math.round(s.b*(1-r)+o.b*r),255)),d=Math.max(0,Math.min(Math.round(s.a*(1-r)+o.a*r),1));return(0,h.N)({r:a,g:l,b:c,a:d})}(this.color.gradient.colors[r],this.color.gradient.colors[r-1],this.color.gradient.colors[r+1])),this.gradient.selectedSliderIdx=r,this.gradient.selectedColor.hex=this.color.gradient.colors[r].c,this.revision+=1,this.gradient.isDragging=!1,this.gradientPreview=this.computeGradientPreview(this.color.gradient),this.emitChange()},onGradientSliderKnobClick(e,t){this.gradient.isDragging=!0,this.gradient.originalClickPoint.x=t.clientX,this.gradient.selectedColor.hex=this.color.gradient.colors[e].c,this.gradient.selectedSliderIdx=e,this.gradient.originalKnobPosition=this.color.gradient.colors[e].p},onGradientSliderKnobDblClick(e){this.color.gradient.colors.length>2&&(this.color.gradient.colors.splice(e,1),e>0&&(e-=1),this.color.gradient.selectedColor=this.color.gradient.colors[e].c,this.revision+=1,this.gradientPreview=this.computeGradientPreview(this.color.gradient),this.emitChange())},updateGradientSliderColor(e){this.color.gradient.colors[this.gradient.selectedSliderIdx].c=`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${e.rgba.a})`,this.gradientPreview=this.computeGradientPreview(this.color.gradient),this.emitChange()},invertGradient(){this.color.gradient.colors.reverse();for(let e=0;e<this.color.gradient.colors.length;e++)this.color.gradient.colors[e].p=p.Z.clamp(100-this.color.gradient.colors[e].p,0,100);this.gradientPreview=this.computeGradientPreview(this.color.gradient),this.emitChange()},computeGradientPreview(e){let t="linear-gradient(90deg, ",i=e.colors,n=!1;for(let e=0;e<i.length-1;e++)i[e].p>i[e+1].p&&(n=!0);n&&(i=e.colors.slice(),i.sort(((e,t)=>e.p-t.p)));for(let e=0;e<i.length;e++)e>0&&(t+=", "),t+=`${i[e].c} ${i[e].p}%`;return t+=")",t}},computed:{isUploadEnabled(){return this.$store.state.apiClient&&this.$store.state.apiClient.uploadFile}}},f=m,g=(0,i(1900).Z)(f,n,[],!1,null,null,null).exports},7455:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"color-picker",class:["color-picker-uid-"+e.uid],style:{width:e.width,"min-width":e.width,height:e.height},attrs:{title:e.hint}},[i("div",{ref:"toggleButton",staticClass:"color-picker-toggle-button",class:{disabled:e.disabled}},[i("span",{staticClass:"color-picker-toggle-button-background"}),e._v(" "),i("span",{staticClass:"color-picker-toggle-button-fill",style:e.cssStyle,on:{click:function(t){return e.toggleColorPicker()}}})]),e._v(" "),e.tooltip.shown?i("div",{ref:"tooltip",staticClass:"color-picker-tooltip",style:{left:e.tooltip.x+"px",top:e.tooltip.y+"px"}},[i("color-picker",{on:{input:e.updateColor},model:{value:e.vuePickerColor,callback:function(t){e.vuePickerColor=t},expression:"vuePickerColor"}})],1):e._e()])};n._withStripped=!0;var r=i(4670),s=i.n(r),o=i(4023),a=i.n(o),l=i(8595);const c={props:{editorId:{type:String,required:!1},color:{type:String,default:"rgba(0,0,0,1.0)"},width:{type:String,default:"100%"},height:{type:String,default:"26px"},hollow:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hint:{type:String,default:""}},components:{"color-picker":a().Chrome},beforeMount(){document.body.addEventListener("click",this.onGlobalClick)},beforeDestroy(){document.body.removeEventListener("click",this.onGlobalClick),l.Z.colorControlToggled.$emit(this.editorId,!1)},data(){return{uid:s().generate(),pickerColor:this.color,vuePickerColor:{hex:this.color},showColorPicker:!1,tooltip:{shown:!1,x:0,y:0},oldColor:null,oldAlpha:1}},methods:{toggleColorPicker(){if(!this.disabled){if(this.tooltip.shown)return l.Z.colorControlToggled.$emit(this.editorId,!1),void(this.tooltip.shown=!1);this.oldColor=this.color,this.vuePickerColor={hex:this.color},this.tooltip.shown=!0,l.Z.colorControlToggled.$emit(this.editorId,!0),this.$nextTick((()=>{this.readjustTooltipPosition()}))}},updateColor(e){this.pickerColor=e.hex,this.$emit("input",`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${e.rgba.a})`)},readjustTooltipPosition(){const e=this.$refs.tooltip,t=this.$refs.toggleButton;if(!e||!t)return;const i=e.getBoundingClientRect(),n=t.getBoundingClientRect(),r=window.innerWidth,s=window.innerHeight;let o=0,a=0;o=n.left<r/2?n.right:n.left-i.width,a=n.top<s/2?n.top:n.bottom-i.height,o+i.width>window.innerWidth&&(o-=o+i.width-window.innerWidth),o=Math.max(0,o),a+i.height>window.innerHeight&&(a-=a+i.height-window.innerHeight),a=Math.max(60,a),this.tooltip.x=o,this.tooltip.y=a},onGlobalClick(e){!this.tooltip.shown||e.target&&e.target.closest(`.color-picker-uid-${this.uid}`)||(l.Z.colorControlToggled.$emit(this.editorId,!1),this.tooltip.shown=!1)}},watch:{color(e){this.pickerColor=e,this.vuePickerColor.hex=e,this.$forceUpdate()}},computed:{cssStyle(){return this.hollow?{background:"none",border:`2px solid ${this.pickerColor}`}:{background:this.pickerColor,border:`2px solid ${this.pickerColor}`}}}},h=(0,i(1900).Z)(c,n,[],!1,null,null,null).exports},7502:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"script-editor-container"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.script,expression:"script"}],staticClass:"script-editor",style:{height:e.height+"px"},attrs:{autocapitalize:"off",autocomplete:"off",autocorrect:"off",spellcheck:"false"},domProps:{value:e.script},on:{input:[function(t){t.target.composing||(e.script=t.target.value)},function(t){return e.$emit("changed",arguments[0].target.value)}],keydown:e.onTextareaKeydown}}),e._v(" "),i("span",{staticClass:"text-editor-enlarge",on:{click:function(t){e.enlarged=!0}}},[i("i",{staticClass:"fas fa-expand"})]),e._v(" "),e.enlarged?i("div",{staticClass:"textarea-enlarged-container"},[i("div",{staticClass:"rich-text-editor-menubar"},[i("span",{staticClass:"btn btn-secondary action-close",on:{click:function(t){e.enlarged=!1}}},[e._v("Close")])]),e._v(" "),i("div",{staticClass:"editor-frame"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.script,expression:"script"}],staticClass:"script-editor",domProps:{value:e.script},on:{input:[function(t){t.target.composing||(e.script=t.target.value)},function(t){return e.$emit("changed",arguments[0].target.value)}],keydown:e.onTextareaKeydown}})])]):e._e()])};n._withStripped=!0;const r={props:{value:{type:String,default:""},height:{type:Number,default:400}},data(){return{enlarged:!1,script:this.value}},methods:{onTextareaKeydown(e){!function(e,t){if("Tab"===t.key){t.preventDefault();const{selectionStart:i,selectionEnd:n}=e;t.shiftKey?function(e){const{value:t,selectionStart:i,selectionEnd:n}=e,r=t.substring(0,i).split("\n"),s=r.length-1,o=t.substring(0,n).split("\n").length-1,a=t.split("\n").map(((e,t)=>s<=t&&t<=o&&e.startsWith("\t")?e.substring(1):e)).join("\n");e.value=a;const l=r[s];e.selectionStart=null!=l&&l.startsWith("\t")?i-1:i,e.selectionEnd=n-(t.length-a.length)}(e):i===n?function(e){const{value:t,selectionEnd:i}=e;e.value=`${t.substring(0,i)}\t${t.substring(i)}`,e.selectionStart=e.selectionEnd=i+1}(e):function(e){const{value:t,selectionStart:i,selectionEnd:n}=e,r=t.substring(0,i).split("\n"),s=r.length-1,o=t.substring(0,n).split("\n").length-1,a=t.split("\n").map(((e,t)=>s<=t&&t<=o?`\t${e}`:e)).join("\n");e.value=a;const l=r[s];e.selectionStart=l&&/\S/.test(l)?i+1:i,e.selectionEnd=n+(o-s+1)}(e)}else if("Enter"===t.key){const{selectionStart:i,selectionEnd:n}=e;i===n&&(t.preventDefault(),function(e,t){const i=e.value,n=function(e,t){let i=t;"\n"===e.charAt(t)&&(i=t-1);for(let n=i;n>=0;n--)if("\n"===e.charAt(n))return e.substring(n+1,t);return e.substring(0,t)}(i,t).replaceAll("\n",""),r=n.trim(),s=r.length>0?r.charAt(r.length-1):"";let o=n.replace(/^(\s*).*$/,"$1");("{"===s||"("===s)&&(o+="\t"),e.value=i.substring(0,t)+"\n"+o+i.substring(t),e.selectionStart=t+1+o.length,e.selectionEnd=e.selectionStart}(e,i))}}(e.target,e)}},watch:{value(e){this.script=e}}},s=(0,i(1900).Z)(r,n,[],!1,null,null,null).exports},9421:(e,t,i)=>{"use strict";i.d(t,{uQ:()=>s,pz:()=>r,ZP:()=>a});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",["image"===e.fill.type&&e.fill.image?i("defs",[i("pattern",{attrs:{id:e.fillId,patternUnits:"userSpaceOnUse",width:e.area.w,height:e.area.h}},[i("image",{attrs:{"xlink:href":e.fill.image,x:e.area.w*e.imageBox.x,y:e.area.h*e.imageBox.y,width:e.area.w*e.imageBox.w,height:e.area.h*e.imageBox.h,preserveAspectRatio:e.imagePreserveAspectRatio}})])]):e._e(),e._v(" "),"gradient"===e.fill.type&&e.fill.gradient?i("defs",["linear"===e.fill.gradient.type?i("linearGradient",{attrs:{id:e.fillId,x1:e.direction.x1+"%",y1:e.direction.y1+"%",x2:e.direction.x2+"%",y2:e.direction.y2+"%"}},e._l(e.fill.gradient.colors,(function(e){return i("stop",{style:{"stop-color":e.c},attrs:{offset:e.p+"%"}})})),1):e._e(),e._v(" "),"radial"===e.fill.gradient.type?i("radialGradient",{attrs:{id:e.fillId,cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"}},e._l(e.fill.gradient.colors,(function(e){return i("stop",{style:{"stop-color":e.c},attrs:{offset:e.p+"%"}})})),1):e._e()],1):e._e()])};function r(e,t){return e?"solid"===e.type?e.color:"image"===e.type&&e.image||"gradient"===e.type&&e.gradient?`url(#${t})`:"none":"none"}function s(e){return r(e.shapeProps.fill,`fill-pattern-${e.id}`)}n._withStripped=!0;const o={props:["fillId","fill","area"],computed:{direction(){let e=parseInt(this.fill.gradient.direction);if(isFinite(e)||(e=0),"gradient"===this.fill.type&&this.fill.gradient){const t=50*Math.cos(Math.PI*(e-90)/180),i=50*Math.sin(Math.PI*(e-90)/180);return{x1:50-t,y1:50-i,x2:50+t,y2:50+i}}return{x1:0,y1:0,x2:100,y2:0}},imagePreserveAspectRatio(){return this.fill.stretch?"none":"xMidYMid meet"},imageBox(){return"image"===this.fill.type&&this.fill.imageBox?this.fill.imageBox:{x:0,y:0,w:1,h:1}}}},a=(0,i(1900).Z)(o,n,[],!1,null,null,null).exports},3055:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",[i("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),i("path",{attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,fill:e.svgFill}}),e._v(" "),i("circle",{attrs:{cx:"15",cy:"15",r:"5",fill:"#EC6762"}}),e._v(" "),i("circle",{attrs:{cx:"30",cy:"15",r:"5",fill:"#F4BE5E"}}),e._v(" "),i("circle",{attrs:{cx:"45",cy:"15",r:"5",fill:"#61C761"}})],1)};n._withStripped=!0;var r=i(9498),s=i(9421);const o=e=>{const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4);return`M ${t-n} ${i}  L ${n} ${i} a ${n} ${n} 0 0 1 ${-n} ${-n}  L 0 ${n}  a ${n} ${n} 0 0 1 ${n} ${-n}   L ${t-n} 0   a ${n} ${n} 0 0 1 ${n} ${n}  L ${t} ${i-n}   a ${n} ${n} 0 0 1 ${-n} ${n} Z`},a="rgba(40, 40, 40, 1.0)";function l(e,t,i){const n=c[t.shapeProps.lang];if(!n)return;let r=e.state.assetsPath;"/"===r&&(r="");const s=new Worker(`${r}/js/syntax-highlight-worker.js`);s.onmessage=e=>{const t=i.querySelector(".item-text-element");t&&(t.innerHTML=e.data)};const o=document.createElement("code");o.appendChild(document.createTextNode(t.textSlots.body.text)),s.postMessage({text:o.innerText,lang:n})}const c={Bash:"bash",C:"c","C++":"cpp","C#":"csharp",CSS:"css",Diff:"diff",GO:"go",GraphQL:"graphql",Ini:"ini",Java:"java",JavaScript:"javascript",JSON:"json",Kotlin:"kotlin",Less:"less",Lua:"lua",Makefile:"makefile",Markdown:"markdown","Objective C":"objectivec",Perl:"perl",PHP:"php","PHP Template":"php-template",Text:"plaintext",Python:"python","Python REPL":"python-repl",R:"r",Ruby:"ruby",Rust:"rust",SCSS:"scss",Shell:"shell",SQL:"sql",Swift:"swift",TypeScript:"typescript","VB.NET":"vbnet",WebAssembly:"wasm",XML:"xml",YAML:"yaml"},h=Object.keys(c),d={props:["item","editorId"],components:{AdvancedFill:s.ZP},shapeConfig:{shapeType:"vue",id:"code_block",menuItems:[{group:"General",name:"Code Block",iconUrl:"assets/images/items/code-block.svg",item:{textSlots:{title:{text:"<b>Code</b>",halign:"center",valign:"middle",color:"rgba(245, 245, 245, 1.0)",paddingTop:4,paddingLeft:10,paddingRight:10,paddingBottom:4},body:{font:"Courier New",text:"",color:"rgba(245, 245, 245, 1.0)",halign:"left",valign:"top",whiteSpace:"pre-wrap",paddingTop:10,paddingLeft:10,paddingRight:10,paddingBottom:10}}}}],getPins:e=>(0,r.Fb)(e),computePath:o,onTextSlotTextUpdate(e,t,i,n){"body"===i&&l(e,t,n)},getTextSlots:e=>[{name:"title",area:{x:0,y:0,w:e.area.w,h:Math.max(0,e.shapeProps.headerHeight)}},{name:"body",markupDisabled:!0,cssClass:`syntax-theme-${e.shapeProps.theme}`,area:{x:0,y:e.shapeProps.headerHeight,w:e.area.w,h:Math.max(1,e.area.h-e.shapeProps.headerHeight)}}],editorProps:{},args:{theme:{type:"choice",value:"dark",options:["dark","light"],name:"Theme",onUpdate:function(e,t,i,n){"dark"===i?(t.shapeProps.fill={type:"solid",color:a},t.textSlots.title.color="rgba(245, 245, 245, 1.0)",t.textSlots.body.color="rgba(245, 245, 245, 1.0)"):(t.shapeProps.fill={type:"solid",color:"rgba(240, 240, 240, 1.0)"},t.textSlots.title.color="rgba(0, 0, 0, 1.0)",t.textSlots.body.color="rgba(0, 0, 0, 1.0)")}},lang:{type:"choice",value:"JavaScript",options:h,name:"Language",onUpdate:function(e,t,i,n){const r=document.getElementById(`item-text-slot-${t.id}-body`);r&&l(e,t,r)}},fill:{type:"advanced-color",value:{type:"solid",color:a},name:"Fill"},strokeColor:{type:"color",value:"rgba(80, 80, 80, 1.0)",name:"Stroke color"},strokeSize:{type:"number",value:1,name:"Stroke size"},cornerRadius:{type:"number",value:4,name:"Corner radius",min:0},headerHeight:{type:"number",value:30,name:"Header hight",min:0}},mounted(e,t,i){Array.isArray(i)&&i.forEach((i=>{"body"===i.getAttribute("data-text-slot-name")&&l(e,t,i)}))}},computed:{shapePath(){return o(this.item)},svgFill(){return(0,s.uQ)(this.item)}}},u=(0,i(1900).Z)(d,n,[],!1,null,null,null).exports},2629:(e,t,i)=>{"use strict";i.d(t,{YL:()=>y,LM:()=>v,lK:()=>g,ZP:()=>w,Si:()=>x});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",[i("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),i("advanced-fill",{attrs:{fillId:"fill-pattern-button-"+e.item.id,fill:e.item.shapeProps.buttonFill,area:e.item.area}}),e._v(" "),i("advanced-fill",{attrs:{fillId:"fill-pattern-button-hovered-"+e.item.id,fill:e.item.shapeProps.buttonHoverFill,area:e.item.area}}),e._v(" "),"embedded"!==e.item.shapeProps.kind?i("path",{attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,"stroke-dasharray":e.strokeDashArray,"stroke-dashoffset":e.item.meta.strokeOffset,fill:e.svgFill}}):e._e(),e._v(" "),"embedded"!==e.item.shapeProps.kind&&"body"!==e.hideTextSlot&&e.bodyTextShown?i("foreignObject",{attrs:{x:0,y:0,width:e.item.area.w,height:e.bodyTextSlotHeight}},[i("div",{staticClass:"item-text-container",style:e.bodyTextStyle,attrs:{xmlns:"http://www.w3.org/1999/xhtml"},domProps:{innerHTML:e._s(e.sanitizedBodyText)}})]):e._e(),e._v(" "),(!e.isLoading||!e.item.shapeProps.showProgressBar)&&e.buttonShown&&e.buttonArea.w>0&&e.buttonArea.h>0?i("g",{staticStyle:{cursor:"pointer"}},[e.buttonHovered?i("path",{attrs:{fill:e.svgButtonHoverFill,"stroke-width":e.item.shapeProps.buttonStrokeSize+"px",stroke:e.item.shapeProps.buttonStrokeColor,d:e.buttonPath}}):i("path",{attrs:{fill:e.svgButtonFill,"stroke-width":e.item.shapeProps.buttonStrokeSize+"px",stroke:e.item.shapeProps.buttonHoverStrokeColor,d:e.buttonPath}}),e._v(" "),"button"!==e.hideTextSlot?i("foreignObject",{attrs:{x:e.buttonArea.x,y:e.buttonArea.y,width:e.buttonArea.w,height:e.buttonArea.h}},[i("div",{staticClass:"item-text-container",style:e.textStyle,attrs:{xmlns:"http://www.w3.org/1999/xhtml"},domProps:{innerHTML:e._s(e.sanitizedButtonText)}})]):e._e()]):e._e(),e._v(" "),e.isLoading&&e.item.shapeProps.showProgressBar&&e.progressBar.w>0&&e.progressBar.h>0?i("foreignObject",{attrs:{x:e.progressBar.x,y:e.progressBar.y,width:e.progressBar.w,height:e.progressBar.h}},[i("div",{staticClass:"progress-bar",style:e.progressBarStyle})]):e._e(),e._v(" "),!e.isLoading&&e.item.meta&&e.item.meta.componentLoadFailed?i("g",{staticStyle:{cursor:"pointer"}},[i("rect",{attrs:{x:0,y:0,width:e.item.area.w,height:e.item.area.h,fill:"rgba(250, 70, 70)"}}),e._v(" "),i("foreignObject",{attrs:{x:0,y:0,width:e.item.area.w,height:e.item.area.h}},[i("div",{staticClass:"item-text-container",style:e.failureMessageStyle,attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[i("b",[e._v("Loading failed")])])])]):e._e(),e._v(" "),e.item.meta&&e.item.meta.cyclicComponent?i("g",[i("rect",{attrs:{x:0,y:0,width:e.item.area.w,height:e.item.area.h,fill:"rgba(250, 70, 70)"}}),e._v(" "),i("foreignObject",{attrs:{x:0,y:0,width:e.item.area.w,height:e.item.area.h}},[i("div",{staticClass:"item-text-container",style:e.failureMessageStyle,attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[i("b",[e._v("Cyclic dependency!")])])])]):e._e()],1)};n._withStripped=!0;var r=i(9498),s=i(4502),o=i(9421),a=i(5635),l=i(3762),c=i(3590),h=i(4670),d=i.n(h),u=i(8595);const p=e=>{const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.cornerRadius,e.area.w/2,e.area.h/2);return`M ${t-n} ${i}  L ${n} ${i} a ${n} ${n} 0 0 1 ${-n} ${-n}  L 0 ${n}  a ${n} ${n} 0 0 1 ${n} ${-n}   L ${t-n} 0   a ${n} ${n} 0 0 1 ${n} ${n}  L ${t} ${i-n}   a ${n} ${n} 0 0 1 ${-n} ${n} Z`};function m(e,t,i){const n=e.area.w-10,r=e.area.h-10,s=Math.min(t,n),o=Math.min(i,r);return{x:(e.area.w-s)/2,y:Math.max(5,e.area.h-o-10),w:s,h:o}}function f(e){const t=m(e,e.shapeProps.buttonWidth,e.shapeProps.buttonHeight),i=Math.min(e.shapeProps.buttonCornerRadius,t.w/2,t.h/2),n=t.x,r=t.y,s=t.w,o=t.h;return`M ${n+s-i} ${r+o}  L ${n+i} ${r+o} a ${i} ${i} 0 0 1 ${-i} ${-i}  L ${n} ${r+i}  a ${i} ${i} 0 0 1 ${i} ${-i}   L ${n+s-i} ${r}   a ${i} ${i} 0 0 1 ${i} ${i}  L ${n+s} ${r+o-i}   a ${i} ${i} 0 0 1 ${-i} ${i} Z`}const g="Component Loaded",v="Component Failed",y="Component Destroyed";function x(e,t,i,n,r){if(!e.shapeProps.showBackButton||"external"!==e.shapeProps.kind)return null;const s=e.area.w/1900,o=e.area.h/600,a=Math.max(s,o)*e.shapeProps.backButtonScale;return{id:e.id+"-go-back-btn",shape:"rect",area:{x:0+e.area.w-(95+e.shapeProps.backButtonHPad)*a,y:(30-e.shapeProps.backButtonVPad)*a,w:95,h:30,sx:a,sy:a,r:0,px:0,py:0},textSlots:{body:{text:"<b>go back</b>",color:e.shapeProps.backButtonTextColor}},selfOpacity:50,visible:!0,cursor:"pointer",shapeProps:{cornerRadius:e.shapeProps.backButtonCornerRadius,strokeSize:0,fill:e.shapeProps.backButtonFill},behavior:{events:[{id:d().generate(),event:"clicked",actions:[{id:d().generate(),element:"#"+e.id,method:"_transformScreen",args:{x:i.x,y:i.y,scale:i.scale,inBackground:!0}},{id:d().generate(),element:"#"+t.id,method:"hide",args:{}},{id:d().generate(),element:"#"+e.id,method:"destroyComponent",args:{}}]},{id:d().generate(),event:"mousein",actions:[{id:d().generate(),element:"self",method:"set",args:{field:"selfOpacity",value:100,animated:!0,animationDuration:.2,transition:"ease-in-out",inBackground:!1}}]},{id:d().generate(),event:"mouseout",actions:[{id:d().generate(),element:"self",method:"set",args:{field:"selfOpacity",value:50,animated:!0,animationDuration:.2,transition:"ease-in-out",inBackground:!1}}]}]}}}const b={props:["item","editorId"],components:{AdvancedFill:o.ZP},shapeConfig:{shapeType:"vue",id:"component",menuItems:[{group:"General",name:"Component",iconUrl:"assets/images/items/component.svg",description:"\n                Lets you embed other documents into this item.\n            ",item:{textSlots:{body:{text:"Component",valign:"middle",halign:"center",paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0},button:{text:"Load more",paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0}}}}],getPins:e=>(0,r.Fb)(e),getTextSlots(e){if("embedded"===e.shapeProps.kind)return[];const t=m(e,e.shapeProps.buttonWidth,e.shapeProps.buttonHeight);let i=e.area.h,n=!1;"external"===e.shapeProps.kind&&e.shapeProps.showButton&&(i=t.y,n=!0);const r=[{name:"body",area:{x:0,y:0,w:e.area.w,h:i}}];return n&&r.push({name:"button",area:t}),r},onMouseDown(e,t,i,n,r){u.Z.item.custom.$emit("mouse-down",e,t.id,i)},onMouseMove(e,t,i,n,r){u.Z.item.custom.$emit("mouse-move",e,t.id,i)},computeCustomAreas:e=>"embedded"===e.shapeProps.kind||e.meta&&e.meta.componentLoadFailed?[]:[{id:"load-button",cursor:"pointer",path:f(e)}],computePath:p,controlPoints:{make(e){const t={cornerRadius:{x:Math.min(e.area.w,Math.max(e.area.w-e.shapeProps.cornerRadius,e.area.w/2)),y:0}};if("external"===e.shapeProps.kind&&e.shapeProps.showButton){const i=m(e,e.shapeProps.buttonWidth,e.shapeProps.buttonHeight);t.buttonCornerRadius={x:i.x+i.w-Math.min(e.shapeProps.buttonCornerRadius,i.w/2,i.h/2),y:i.y}}return t},handleDrag(e,t,i,n,r,s){if("cornerRadius"===t)e.shapeProps.cornerRadius=Math.max(0,c.Z.roundPrecise(e.area.w-Math.max(e.area.w/2,i+r),1));else if("buttonCornerRadius"===t){const t=m(e,e.shapeProps.buttonWidth,e.shapeProps.buttonHeight);e.shapeProps.buttonCornerRadius=Math.min(t.h/2,t.w/2,Math.max(0,c.Z.roundPrecise(t.x+t.w-i-r)))}}},args:{kind:{type:"choice",value:"external",name:"Kind",options:["external","embedded"],description:"External - allows to fetch other documents and render them inside the component. Embedded - uses the items in the same document"},schemeId:{type:"scheme-ref",value:"",name:"External Document",depends:{kind:"external"},description:"ID of the document that this component should load"},referenceItem:{type:"element",name:"Item",depends:{kind:"embedded"},description:"Reference item that this component should render"},fill:{type:"advanced-color",value:{type:"solid",color:"rgba(255,255,255,1)"},name:"Fill"},strokeColor:{type:"color",value:"#466AAA",name:"Stroke color"},strokeSize:{type:"number",value:2,name:"Stroke size"},strokePattern:{type:"stroke-pattern",value:"solid",name:"Stroke pattern"},cornerRadius:{type:"number",value:0,name:"Corner radius",min:0},placement:{type:"choice",value:"centered",options:["centered","stretch"],name:"Placement"},autoZoom:{type:"boolean",value:!0,name:"Auto zoom",description:"Zoom into component when it is loaded",depends:{kind:"external"}},showButton:{type:"boolean",value:!0,name:"Show button",description:"Displays a button which user can click to load component in view mode",depends:{kind:"external"}},buttonFill:{type:"advanced-color",value:{type:"solid",color:"rgba(14,195,255,0.15)"},name:"Button Fill",depends:{showButton:!0,kind:"external"}},buttonStrokeColor:{type:"color",value:"rgba(24,127,191,0.9)",name:"Button stroke color",depends:{showButton:!0,kind:"external"}},buttonHoverFill:{type:"advanced-color",value:{type:"solid",color:"rgba(14,195,255,0.45)"},name:"Hovered button Fill",depends:{showButton:!0,kind:"external"}},buttonHoverStrokeColor:{type:"color",value:"rgba(24,127,191,0.9)",name:"Hovered button stroke color",depends:{showButton:!0,kind:"external"}},buttonStrokeSize:{type:"number",value:2,name:"Button stroke size",depends:{showButton:!0,kind:"external"}},buttonCornerRadius:{type:"number",value:0,name:"Button Corner radius",min:0,depends:{showButton:!0,kind:"external"}},buttonWidth:{type:"number",value:180,name:"Button width",depends:{showButton:!0,kind:"external"}},buttonHeight:{type:"number",value:40,name:"Button height",depends:{showButton:!0,kind:"external"}},showProgressBar:{type:"boolean",value:!0,name:"Show progress bar",depends:{kind:"external"}},progressColor1:{type:"color",value:"rgba(24,127,191,1)",name:"Progress bar color 1",depends:{showProgressBar:!0,kind:"external"}},progressColor2:{type:"color",value:"rgba(140,214,219,1)",name:"Progress bar color 2",depends:{showProgressBar:!0,kind:"external"}},showBackButton:{type:"boolean",value:!0,name:"Show back button",depends:{kind:"external"}},backButtonFill:{type:"advanced-color",value:{type:"solid",color:"rgba(102,102,102,1.0)"},name:"Button Fill",depends:{showBackButton:!0,kind:"external"}},backButtonTextColor:{type:"color",value:"rgba(245,245,245,1.0)",name:"Back button text color",depends:{showBackButton:!0,kind:"external"}},backButtonVPad:{type:"number",value:20,name:"Back button vertical padding",depends:{showBackButton:!0,kind:"external"}},backButtonHPad:{type:"number",value:20,name:"Back button horizontal padding",depends:{showBackButton:!0,kind:"external"}},backButtonCornerRadius:{type:"number",value:15,name:"Back button corner radius",depends:{showBackButton:!0,kind:"external"}},backButtonScale:{type:"number",value:1,name:"Back button scale",depends:{showBackButton:!0,kind:"external"}}},editorProps:{customTextRendering:!0},getEvents:e=>[{name:g},{name:v},{name:y}]},beforeMount(){u.Z.item.custom.$on("mouse-move",this.editorId,this.item.id,this.onMouseMove),u.Z.item.custom.$on("mouse-down",this.editorId,this.item.id,this.onMouseDown),u.Z.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChanged),u.Z.textSlot.triggered.specific.$on(this.editorId,this.item.id,this.onItemTextSlotEditTriggered),u.Z.textSlot.canceled.specific.$on(this.editorId,this.item.id,this.onItemTextSlotEditCanceled),u.Z.component.loadRequested.specific.$on(this.editorId,this.item.id,this.onComponentLoadRequested),u.Z.component.loadFailed.specific.$on(this.editorId,this.item.id,this.onComponentLoadFailed),u.Z.component.mounted.specific.$on(this.editorId,this.item.id,this.onComponentMounted)},beforeDestroy(){u.Z.item.custom.$off("mouse-move",this.editorId,this.item.id,this.onMouseMove),u.Z.item.custom.$off("mouse-down",this.editorId,this.item.id,this.onMouseDown),u.Z.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChanged),u.Z.textSlot.triggered.specific.$off(this.editorId,this.item.id,this.onItemTextSlotEditTriggered),u.Z.textSlot.canceled.specific.$off(this.editorId,this.item.id,this.onItemTextSlotEditCanceled),u.Z.component.loadRequested.specific.$off(this.editorId,this.item.id,this.onComponentLoadRequested),u.Z.component.loadFailed.specific.$off(this.editorId,this.item.id,this.onComponentLoadFailed),u.Z.component.mounted.specific.$off(this.editorId,this.item.id,this.onComponentMounted)},data(){const e=this.item._childItems&&this.item._childItems.length>0;return{buttonHovered:!1,buttonShown:"external"===this.item.shapeProps.kind&&this.item.shapeProps.showButton&&!e,bodyTextShown:!e,isLoading:!1,hideTextSlot:null,textStyle:this.createTextStyle(),bodyTextStyle:this.createBodyTextStyle()}},methods:{onMouseMove(e){"load-button"===e?this.onButtonMouseOver():this.onButtonMouseLeave()},onMouseDown(e){!this.isLoading&&this.item.meta&&this.item.meta.componentLoadFailed?this.resetFailureMessage():"load-button"===e&&this.onLoadSchemeClick()},onLoadSchemeClick(){this.isLoading=!0,u.Z.component.loadRequested.specific.$emit(this.editorId,this.item.id,this.item)},onItemChanged(){this.item._childItems&&this.item._childItems.length>0&&(this.buttonShown=!1,this.bodyTextShown=!1),this.isLoading=!1,this.buttonHovered=!1,this.textStyle=this.createTextStyle(),this.bodyTextStyle=this.createBodyTextStyle()},createBodyTextStyle(){let e={};if(this.item.textSlots&&this.item.textSlots.body){e=(0,a.A)(this.item.textSlots.body);const t=m(this.item,this.item.shapeProps.buttonWidth,this.item.shapeProps.buttonHeight);e.width=`${this.item.area.w}px`;let i=this.item.area.h;"external"===this.item.shapeProps.kind&&this.item.shapeProps.showButton&&(i=t.y),e.height=`${i}px`}return e},createTextStyle(){let e={};if(this.item.textSlots&&this.item.textSlots.button){e=(0,a.A)(this.item.textSlots.button);const t=m(this.item,this.item.shapeProps.buttonWidth,this.item.shapeProps.buttonHeight);e.width=`${t.w}px`,e.height=`${t.h}px`}return e},onItemTextSlotEditTriggered(e,t,i,n){this.hideTextSlot=t},onItemTextSlotEditCanceled(e,t){this.hideTextSlot=null},onButtonMouseOver(){this.buttonHovered=!0,this.$forceUpdate()},onButtonMouseLeave(){this.buttonHovered=!1,this.$forceUpdate()},onComponentLoadRequested(){this.isLoading=!0},onComponentLoadFailed(){this.isLoading=!1},onComponentMounted(){this.isLoading=!1},resetFailureMessage(){this.item.meta.componentLoadFailed=!1,this.$forceUpdate()}},computed:{buttonPath(){return f(this.item)},shapePath(){return p(this.item)},svgFill(){return(0,o.pz)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`)},svgButtonFill(){return(0,o.pz)(this.item.shapeProps.buttonFill,`fill-pattern-button-${this.item.id}`)},svgButtonHoverFill(){return(0,o.pz)(this.item.shapeProps.buttonHoverFill,`fill-pattern-button-hovered-${this.item.id}`)},strokeDashArray(){return s.Z.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize)},buttonArea(){return m(this.item,this.item.shapeProps.buttonWidth,this.item.shapeProps.buttonHeight)},bodyTextSlotHeight(){const e=m(this.item,this.item.shapeProps.buttonWidth,this.item.shapeProps.buttonHeight);return"external"===this.item.shapeProps.kind&&this.item.shapeProps.showButton?e.y:this.item.area.h},sanitizedBodyText(){return this.item.textSlots&&this.item.textSlots.body?(0,l.Z)(this.item.textSlots.body.text):""},sanitizedButtonText(){if(this.isLoading)return"Loading ...";let e="";return this.item.textSlots&&this.item.textSlots.button&&(e=this.item.textSlots.button.text),(0,l.Z)(e)},failureMessageStyle(){return{color:"rgb(255, 255, 255)","font-size":"14px","font-family":"Arial, Helvetica, sans-serif",padding:"10px","text-align":"center","vertical-align":"middle","white-space":"normal",display:"table-cell","box-sizing":"border-box",width:`${this.item.area.w}px`,height:`${this.item.area.h}px`}},progressBar(){return m(this.item,180,10)},progressBarStyle(){return{background:`linear-gradient(90deg, ${this.item.shapeProps.progressColor1} 0%, ${this.item.shapeProps.progressColor2} 25%, ${this.item.shapeProps.progressColor2} 50%, ${this.item.shapeProps.progressColor1} 75%) 0% 0% / 60% 100%`}},progressBarHeight(){return Math.min(20,this.item.area.h)}}},w=(0,i(1900).Z)(b,n,[],!1,null,null,null).exports},2513:(e,t,i)=>{"use strict";i.d(t,{Z:()=>G,t:()=>H});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",[i("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),i("path",{staticStyle:{"stroke-linejoin":"round"},attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,"stroke-dasharray":e.strokeDashArray,"stroke-dashoffset":e.item.meta.strokeOffset,fill:e.svgFill}}),e._v(" "),e.item.shapeProps.thick?e._e():i("g",e._l(e.caps,(function(t){return i("path",{attrs:{d:t.path,"data-item-id":e.item.id,stroke:e.item.shapeProps.strokeColor,"stroke-width":e.item.shapeProps.strokeSize,fill:t.hollow?"none":e.item.shapeProps.strokeColor,"stroke-linejoin":"round"}})})),0)],1)};n._withStripped=!0;var r=i(6234),s=i(4502),o=i(2017),a=i(3590),l=i(125),c=i(4691),h=i(9421),d=i(8595),u=i(2644),p=i(8270),m=i(791);function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach((function(t){v(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function v(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const y=new o.Yd("Connector");function x(e){return a.Z.roundPrecise2(e)}const b=0,w=1,C=2,P=3,k=4,S=5,I=6,A=[w,b,P,C,k];function _(e,t){return e<=-.5?C:e>=.5?P:t<=-.5?b:t>=.5?w:void 0}const E=[[0,0,-1,1],[0,0,1,-1],[1,-1,0,0],[-1,1,0,0]];function T(e){return e===P||e===C?I:e===b||e===w?S:k}function M(e){return A[e]}function $(e,t){return{way:t>e?w:b,value:Math.abs(t-e)}}function O(e,t){return{way:t>e?P:C,value:Math.abs(t-e)}}const D=(e,t,i,n)=>{const r=(t+n)/2;return[$(t,r),O(e,i),$(r,n)]},B=(e,t,i,n)=>[O(e,i),$(t,n)],L=(e,t,i,n)=>[$(t,n),O(e,i)],R=(e,t,i,n)=>{const r=(e+i)/2;return[O(e,r),$(t,n),O(r,i)]};function N(e,t,i,n,r,s){const o=M(i);let l=[];const c=n-e,h=r-t;a.Z.tooSmall(c)||l.push(n>e?P:C),a.Z.tooSmall(h)||l.push(r>t?w:b),2===l.length&&(l[0]===o||s===l[0]&&l[1]!==o||s===k&&l[1]===i)&&(l=[l[1],l[0]]);const d=T(i),u=T(l[0]),p=T(s);if(u===p||d===p)if(p===S){if(r<t&&i!==w||r>t&&i!==b)return D(e,t,n,r)}else if(n<e&&i!==P||n>e&&i!==C)return R(e,t,n,r);return u===I?B(e,t,n,r):L(e,t,n,r)}function Z(e,t,i,n){return i===P?e+=n:i===C?e-=n:i===b?t-=n:i===w&&(t+=n),{x:e,y:t}}function F(e,t,i){const n=c.Z.clone(e.shapeProps.points),s=[];let o=b,a=k;n[0].hasOwnProperty("nx")&&(o=_(n[0].nx,n[0].ny));const l=n[n.length-1];if(l.hasOwnProperty("nx")&&(a=_(l.nx,l.ny)),e.shapeProps.sourceCap&&"empty"!==e.shapeProps.sourceCap){const t=Z(0,0,o,e.shapeProps.sourceCapSize),i=U(n[0].x,n[0].y,n[0].x+t.x,n[0].y+t.y,e.shapeProps.sourceCapSize,e.shapeProps.sourceCap);i&&(i.prolongLine||(n[0].x=i.entryPoint.x,n[0].y=i.entryPoint.y),s.push(i))}const h=[];let d=o,u=n[0];const p=e=>{(0,r.Ed)(e,(e=>{h.push(e),u=Z(u.x,u.y,e.way,e.value)})),d=e[e.length-1].way};for(let e=1;e<n.length-1;e++)p(N(u.x,u.y,d,n[e].x,n[e].y,k));p(N(u.x,u.y,d,l.x,l.y,M(a)));let m=`M ${n[0].x} ${n[0].y}`;if(u=n[0],!t)return(0,r.Ed)(h,((t,i)=>{const n=Z(u.x,u.y,t.way,t.value);let r=null;i===h.length-1&&e.shapeProps.destinationCap&&"empty"!==e.shapeProps.destinationCap&&(r=U(n.x,n.y,u.x,u.y,e.shapeProps.destinationCapSize,e.shapeProps.destinationCap)),r?(m+=` L ${r.entryPoint.x} ${r.entryPoint.y}`,s.push(r)):(m+=` L ${n.x} ${n.y}`,u=n)})),{path:m,caps:s};const f=Math.max(0,e.shapeProps.stepSize);let g=0;for(let e=0;e<h.length-1;e++){const t=h[e],n=h[e+1],r=Math.min(t.value,n.value);if(r>1&&n.way!==t.way){const e=Math.min(f,r/2),s=Z(u.x,u.y,t.way,t.value-g),o=Z(u.x,u.y,t.way,t.value-e-g),a=Z(s.x,s.y,n.way,e);if(i){const i=(v=t.way,y=n.way,E[v][y]>0?1:0);m+=` L ${o.x} ${o.y} A ${e} ${e} 0 0 ${i} ${a.x} ${a.y}`}else m+=` L ${o.x} ${o.y} L ${a.x} ${a.y}`;g=e,u=a}else{const e=Z(u.x,u.y,t.way,t.value-g);m+=` L ${e.x} ${e.y}`,u=e,g=0}}var v,y;const x=h[h.length-1],w=Z(u.x,u.y,x.way,x.value-g);let C=null;return e.shapeProps.destinationCap&&"empty"!==e.shapeProps.destinationCap&&(C=U(w.x,w.y,u.x,u.y,e.shapeProps.destinationCapSize,e.shapeProps.destinationCap)),C?(m+=` L ${C.entryPoint.x} ${C.entryPoint.y}`,C.prolongLine&&(m+=` L ${w.x} ${w.y}`),s.push(C)):m+=` L ${w.x} ${w.y}`,{path:m,caps:s}}function j(e){if(e.shapeProps.points.length<2)return"";let t="";const i=[],n=[],s=[],o=[],l=[],c=[];(0,r.Ed)(e.shapeProps.points,((t,r)=>{if(r<e.shapeProps.points.length-1){const a=e.shapeProps.points[r+1];i[r]={x:a.x-t.x,y:a.y-t.y};const h=i[r].x*i[r].x+i[r].y*i[r].y;if(h>.001){const e=Math.sqrt(h);n[r]={x:i[r].x/e,y:i[r].y/e}}else n[r]=i[r];s[r]={x:n[r].y*e.shapeProps.thickWidth,y:-n[r].x*e.shapeProps.thickWidth},o[r]={x:-s[r].x,y:-s[r].y},l[r]={x:t.x+s[r].x,y:t.y+s[r].y},c[r]={x:t.x+o[r].x,y:t.y+o[r].y}}}));const h=[];let d=!1,u=!1;(0,r.Ed)(e.shapeProps.points,((r,o)=>{if(0!==o){if(o>0&&o<e.shapeProps.points.length-1)if(h[o]=a.Z.angleBetweenVectors(i[o].x,i[o].y,-i[o-1].x,-i[o-1].y),h[o]<0){const e=a.Z.linesIntersection(a.Z.createLineEquation(l[o-1].x,l[o-1].y,l[o-1].x+i[o-1].x,l[o-1].y+i[o-1].y),a.Z.createLineEquation(l[o].x,l[o].y,l[o].x+i[o].x,l[o].y+i[o].y));e&&h[o]<-.1?t+=` L ${e.x} ${e.y}`:t+=` L ${l[o].x} ${l[o].y}`}else t+=` L ${r.x+s[o-1].x} ${r.y+s[o-1].y}  L ${r.x+s[o].x} ${r.y+s[o].y}`;if(o===e.shapeProps.points.length-1&&o>0){const a=i[o-1].x*i[o-1].x+i[o-1].y*i[o-1].y,l=3*e.shapeProps.thickWidth;if("triangle"===e.shapeProps.destinationCap&&Math.sqrt(a)>l){d=!0;const e=r.x-n[o-1].x*l,i=r.y-n[o-1].y*l;t+=` L ${e+s[o-1].x} ${i+s[o-1].y} L ${e+2*s[o-1].x} ${i+2*s[o-1].y} L ${r.x} ${r.y}`}else t+=` L ${r.x+s[o-1].x} ${r.y+s[o-1].y}`}}else{const a=i[0].x*i[0].x+i[0].y*i[0].y,c=3*e.shapeProps.thickWidth;if("triangle"===e.shapeProps.sourceCap&&Math.sqrt(a)>c){u=!0;const i=r.x+n[0].x*e.shapeProps.thickWidth*3,o=r.y+n[0].y*e.shapeProps.thickWidth*3;t+=` M ${x(r.x)} ${x(r.y)}  L ${i+2*s[0].x} ${o+2*s[0].y} L ${i+s[0].x} ${o+s[0].y}`}else t=`M ${x(l[o].x)} ${x(l[o].y)}`}}));for(let r=e.shapeProps.points.length-1;r>=0;r--){const s=e.shapeProps.points[r];if(r===e.shapeProps.points.length-1)if(d){const i=s.x-n[r-1].x*e.shapeProps.thickWidth*3,a=s.y-n[r-1].y*e.shapeProps.thickWidth*3;t+=` L ${i+2*o[r-1].x} ${a+2*o[r-1].y} L ${i+o[r-1].x} ${a+o[r-1].y}`}else t+=` L ${s.x+o[r-1].x} ${s.y+o[r-1].y}`;else if(r>0)if(h[r]>0){const e=a.Z.linesIntersection(a.Z.createLineEquation(c[r-1].x,c[r-1].y,c[r-1].x+i[r-1].x,c[r-1].y+i[r-1].y),a.Z.createLineEquation(c[r].x,c[r].y,c[r].x+i[r].x,c[r].y+i[r].y));e&&h[r]>.1?t+=` L ${e.x} ${e.y}`:t+=` L ${c[r].x} ${c[r].y}`}else t+=` L ${s.x+o[r].x} ${s.y+o[r].y} L ${s.x+o[r-1].x} ${s.y+o[r-1].y}`;else if(0===r)if(u){const i=s.x+n[0].x*e.shapeProps.thickWidth*3,r=s.y+n[0].y*e.shapeProps.thickWidth*3;t+=` L ${i+o[0].x} ${r+o[0].y} L ${i+2*o[0].x} ${r+2*o[0].y} Z`}else t+=`L ${s.x+o[r].x} ${s.y+o[r].y} z`}return t}function z(e){return e.shapeProps.points.length<2?null:e.shapeProps.thick?{path:j(e),caps:[]}:"smooth"===e.shapeProps.smoothing?function(e){const t=c.Z.clone(e.shapeProps.points);if(t.length<2)return{path:null,caps:[]};let i="";const n=[];let s=null,o=null,l=null;if(e.shapeProps.sourceCap&&"empty"!==e.shapeProps.sourceCap){let i=t[1].x,r=t[1].y;void 0!==t[0].nx&&(i=t[0].x+t[0].nx*e.shapeProps.sourceCapSize,r=t[0].y+t[0].ny*e.shapeProps.sourceCapSize),s=U(t[0].x,t[0].y,i,r,e.shapeProps.sourceCapSize,e.shapeProps.sourceCap),s&&(t[0].x=s.entryPoint.x,t[0].y=s.entryPoint.y,n.push(s))}if(e.shapeProps.destinationCap&&"empty"!==e.shapeProps.destinationCap){const i=t.length-1;let r=t[i-1].x,s=t[i-1].y;void 0!==t[i].nx&&(r=t[i].x+t[i].nx*e.shapeProps.destinationCapSize,s=t[i].y+t[i].ny*e.shapeProps.destinationCapSize),o=U(t[i].x,t[i].y,r,s,e.shapeProps.destinationCapSize,e.shapeProps.destinationCap,e.shapeProps.fill),o&&(t[i].x=o.entryPoint.x,t[i].y=o.entryPoint.y,n.push(o))}if(2===t.length&&e.shapeProps.sourceItem&&e.shapeProps.destinationItem&&void 0!==t[0].nx&&void 0!==t[1].nx){const i=t[0],r=t[1],l=a.Z.distanceBetweenPoints(i.x,i.y,r.x,r.y);let c=l/3;const h=a.Z.vectorLength(i.nx+r.nx,i.ny+r.ny),d=a.Z.distanceBetweenPoints(i.x+i.nx,i.y+i.ny,r.x+r.nx,r.y+r.ny);if(h<.2&&d<l){const e=a.Z.rotateVector90Clockwise(i.nx,i.ny),t=a.Z.createLineEquation(i.x,i.y,i.x+e.x,i.y+e.y);c=a.Z.distanceFromPointToLine(r.x,r.y,t)/1.5}let u="";if(u=s&&s.prolongLine?`M ${i.x} ${x(i.y)} L ${x(i.x)} ${x(i.y)} `:`M ${x(i.x)} ${x(i.y)} `,u+=`C ${x(i.x+c*i.nx)} ${x(i.y+c*i.ny)} ${x(r.x+c*r.nx)}  ${x(r.y+c*r.ny)} ${x(r.x)} ${x(r.y)} `,o&&o.prolongLine){const t=e.shapeProps.points[e.shapeProps.points.length-1];u+=`L ${x(t.x)} ${x(t.y)}`}return{path:u,caps:n}}const h=[];if((0,r.Ed)(t,((e,i)=>{let n=e;i>0&&(n=t[i-1]);let r=e;i<t.length-1&&(r=t[i+1]);let s=r.x-n.x,o=r.y-n.y;const a=Math.sqrt(s*s+o*o);a>1e-5&&(s/=a,o/=a),h[i]={x:s,y:o}})),(0,r.Ed)(t,((n,r)=>{if(0===r)i=s&&s.prolongLine?`M ${x(e.shapeProps.points[0].x)} ${x(e.shapeProps.points[0].y)} L ${x(n.x)} ${x(n.y)} `:`M ${x(n.x)} ${x(n.y)} `;else if(1===r&&e.shapeProps.sourceItem&&void 0!==l.nx){const e=a.Z.distanceBetweenPoints(l.x,l.y,n.x,n.y)/3.5;let s=0,o=0;r<t.length-1&&(s=h[r].x,o=h[r].y),i+=` C ${x(l.x+e*l.nx)} ${x(l.y+e*l.ny)} ${x(n.x-e*s)} ${x(n.y-e*o)} ${x(n.x)} ${x(n.y)}`}else if(r===t.length-1&&e.shapeProps.destinationItem&&void 0!==n.nx){const e=a.Z.distanceBetweenPoints(l.x,l.y,n.x,n.y)/3.5;let t=0,s=0;r>1&&(t=h[r-1].x,s=h[r-1].y),i+=` C ${x(l.x+e*t)} ${x(l.y+e*s)}  ${x(n.x+e*n.nx)} ${x(n.y+e*n.ny)} ${x(n.x)} ${x(n.y)}`}else{const e=a.Z.distanceBetweenPoints(l.x,l.y,n.x,n.y)/3.5;let t=h[r-1].x,s=h[r-1].y,o=h[r].x,c=h[r].y;i+=` C ${x(l.x+e*t)} ${x(l.y+e*s)}  ${x(n.x-e*o)} ${x(n.y-e*c)} ${x(n.x)} ${x(n.y)}`}l=n})),o&&o.prolongLine){const t=e.shapeProps.points[e.shapeProps.points.length-1];i+=`L ${t.x} ${t.y}`}return{path:i,caps:n}}(e):"step"===e.shapeProps.smoothing?F(e,!1,!1):"step-cut"===e.shapeProps.smoothing?F(e,!0,!1):"step-smooth"===e.shapeProps.smoothing?F(e,!0,!0):function(e){let t="";const i=[];return(0,r.Ed)(e.shapeProps.points,((n,r)=>{if(0===r){let r=null;if(e.shapeProps.sourceCap&&"empty"!==e.shapeProps.sourceCap){const t=e.shapeProps.points[1];r=U(n.x,n.y,t.x,t.y,e.shapeProps.sourceCapSize,e.shapeProps.sourceCap)}r?(t=r.prolongLine?`M ${n.x} ${n.y} L ${r.entryPoint.x} ${r.entryPoint.y} `:`M ${r.entryPoint.x} ${r.entryPoint.y} `,i.push(r)):t=`M ${n.x} ${n.y} `}else if(r===e.shapeProps.points.length-1){let s=null;if(e.shapeProps.destinationCap&&"empty"!==e.shapeProps.destinationCap){const t=e.shapeProps.points[r-1];s=U(n.x,n.y,t.x,t.y,e.shapeProps.destinationCapSize,e.shapeProps.destinationCap)}s?(t+=`L ${s.entryPoint.x} ${s.entryPoint.y} `,s.prolongLine&&(t+=`L ${n.x} ${n.y} `),i.push(s)):t+=`L ${n.x} ${n.y} `}else t+=` L ${n.x} ${n.y} `})),{path:t,caps:i}}(e)}function U(e,t,i,n,r,s){if("empty"!==s){const o=i-e,a=n-t,c=o*o+a*a;if(c>1e-4){const i=Math.sqrt(c);return(0,l.g)(e,t,o*r/i,a*r/i,s)}}return null}function H(e,t){if(e.hasOwnProperty("nx")&&e.hasOwnProperty("ny")&&t){const i=t.x-e.x,n=t.y-e.y;180*a.Z.cosineAngleBetweenVectors(e.nx,e.ny,i,n)/Math.PI>90&&(e.nx=-e.nx,e.ny=-e.ny)}}const q=[{t:"L",x:4,y:88},{t:"L",x:136,y:4}],W="Connections",V={props:["item","editorId"],components:{AdvancedFill:h.ZP},shapeConfig:{shapeType:"vue",id:"connector",computePath:function(e){const t=z(e);return t?t.path:null},readjustItem:function(e,t,i,n,s){return y.info("readjustItem",e.id,e.name,{item:e,isSoft:i,context:n},s),i||function(e,t){if(y.info("readjustItemArea",e.id,e.name,{item:e},t),e.shapeProps.points.length<1)return;const i=[];(0,r.Ed)(e.shapeProps.points,(t=>{i.push((0,u.rs)(t.x,t.y,e))}));let n=i[0].x,s=i[0].y,o=i[0].x,l=i[0].y;(0,r.Ed)(i,(e=>{n=Math.min(n,e.x),s=Math.min(s,e.y),o=Math.max(o,e.x),l=Math.max(l,e.y)}));const c=[];(0,r.Ed)(i,((t,i)=>{const r=e.shapeProps.points[i];c.push(g(g({},r),{},{x:t.x-n,y:t.y-s}))})),e.shapeProps.points=c,e.area.r=0,e.area.w=Math.max(0,o-n),e.area.h=Math.max(0,l-s);const h=a.Z.findTranslationMatchingWorldPoint(n,s,0,0,e.area,e.meta.transformMatrix);e.area.x=h.x,e.area.y=h.y}(e,s),e.shapeProps.sourceItem&&e.shapeProps.points.length>1&&H(e.shapeProps.points[0],e.shapeProps.points[1]),e.shapeProps.destinationItem&&e.shapeProps.points.length>1&&H(e.shapeProps.points[e.shapeProps.points.length-1],e.shapeProps.points[e.shapeProps.points.length-2]),!0},getSnappers:function(e){const t=[];return(0,r.Ed)(e.shapeProps.points,(i=>{const n=(0,u.rs)(i.x,i.y,e);t.push({item:e,snapperType:"horizontal",value:n.y}),t.push({item:e,snapperType:"vertical",value:n.x})})),t},scriptFunctions:function(e,t,i){const n=(e,t)=>{if(e<0||e>=i.shapeProps.points.length)throw new Error(`Invalid point index: ${e}`);return t(i.shapeProps.points[e])};return{totalPoints:()=>i.shapeProps.points.length,getPointWorldPos:e=>n(e,(e=>{const t=(0,p.oJ)(e,i.area.w,i.area.h);return m.O.fromPoint((0,u.rs)(t.x,t.y,i))})),setPointWorldPos:(r,s,o)=>n(r,(n=>{const r=(0,u.N5)(s,o,i),a=(0,p.Vk)(r,i.area.w,i.area.h);n.x=a.x,n.y=a.y,t.readjustItemAndDescendants(i.id,!0),d.Z.item.changed.specific.$emit(e,i.id)}))}},menuItems:[{group:W,name:"Empty Connector",iconUrl:"assets/images/items/connector-empty.svg",item:{shapeProps:{thick:!1,sourceCap:"empty",destinationCap:"empty",points:q}}},{group:W,name:"Step Connector",iconUrl:"assets/images/items/connector-step.svg",item:{shapeProps:{thick:!1,sourceCap:"empty",destinationCap:"empty",smoothing:"step",points:[{x:4,y:88},{x:70,y:51},{x:136,y:4}]}}},{group:W,name:"Step Connector",iconUrl:"assets/images/items/connector-step-smooth.svg",item:{shapeProps:{thick:!1,sourceCap:"empty",destinationCap:"empty",smoothing:"step-smooth",points:[{x:4,y:88},{x:70,y:51},{x:136,y:4}]}}},{group:W,name:"Triangle Connector",iconUrl:"assets/images/items/connector-triangle.svg",item:{shapeProps:{thick:!1,sourceCap:"empty",destinationCap:"triangle",points:q}}},{group:W,name:"Triangle Connector",iconUrl:"assets/images/items/connector-triangle-white.svg",item:{shapeProps:{thick:!1,sourceCap:"empty",destinationCap:"triangle-h",points:q}}},{group:W,name:"Arrow Connector",iconUrl:"assets/images/items/connector-arrow.svg",item:{shapeProps:{thick:!1,sourceCap:"empty",destinationCap:"arrow",points:q}}},{group:W,name:"Triangle Connector (Both Sides)",iconUrl:"assets/images/items/connector-triangle-both.svg",item:{shapeProps:{thick:!1,sourceCap:"triangle",destinationCap:"triangle",points:q}}},{group:W,name:"Triangle Connector (Both Sides)",iconUrl:"assets/images/items/connector-triangle-white-both.svg",item:{shapeProps:{thick:!1,sourceCap:"triangle-h",destinationCap:"triangle-h",points:q}}},{group:W,name:"Arrow Connector (Both Sides)",iconUrl:"assets/images/items/connector-arrow-both.svg",item:{shapeProps:{thick:!1,sourceCap:"arrow",destinationCap:"arrow",points:q}}},{group:W,name:"Thick Connector",iconUrl:"assets/images/items/connector-arrow-thick.svg",item:{shapeProps:{sourceCap:"empty",destinationCap:"triangle",points:q,thick:!0,thickWidth:10}}},{group:W,name:"Thick Connector (Both Arrows)",iconUrl:"assets/images/items/connector-arrow-thick-both.svg",item:{shapeProps:{sourceCap:"triangle",destinationCap:"triangle",points:q,thick:!0,thickWidth:10}}}],getTextSlots:()=>[],getPins(e){const t={};return(0,r.Ed)(e.shapeProps.points,(e=>{t[e.id]={x:e.x,y:e.y}})),t},editorProps:{description:"rich"},args:{strokeColor:{type:"color",value:"rgba(30,30,30,1.0)",name:"Stroke color"},strokeSize:{type:"number",value:2,name:"Stroke size"},strokePattern:{type:"stroke-pattern",value:"solid",name:"Stroke pattern"},points:{type:"path-points",value:[],name:"Path points",hidden:!0},sourceCap:{type:"path-cap",value:"empty",name:"Source Cap"},sourceCapSize:{type:"number",value:20,name:"Source Cap Size"},destinationCap:{type:"path-cap",value:"empty",name:"Destination Cap"},destinationCapSize:{type:"number",value:20,name:"Destination Cap Size"},smoothing:{type:"choice",value:"smooth",options:["linear","smooth","step","step-cut","step-smooth"],name:"Smoothing Type"},stepSize:{type:"number",value:10,name:"Step size",depends:{smoothing:["step-cut","step-smooth"]}},thick:{type:"boolean",value:!1,name:"Thick"},fill:{type:"advanced-color",value:{type:"solid",color:"rgba(255,255,255,1.0)"},name:"Fill",depends:{thick:!0}},thickWidth:{type:"number",value:10,name:"Thick Width",min:1,max:1e3,depends:{thick:!0}},sourceItem:{type:"element",value:null,name:"Source Item",description:"Attach this curve to an item as a source",hidden:!0},destinationItem:{type:"element",value:null,name:"Destination Item",description:"Attach this curve to an item as a destination",hidden:!0},sourceItemPosition:{type:"number",value:0,name:"Position On Source Item",description:"Distance on the path of the item where this curve should be attached to",hidden:!0},destinationItemPosition:{type:"number",value:0,name:"Position On Source Item",description:"Distance on the path of the item where this curve should be attached to",hidden:!0},sourcePin:{type:"string",value:"",name:"Source Item Pin",description:"If non-empty it means that the connector is attached to a specific pin",hidden:!0},destinationPin:{type:"string",value:"",name:"Destination Item Pin",description:"If non-empty it means that the connector is attached to a specific pin",hidden:!0}}},mounted(){d.Z.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChange)},beforeDestroy(){d.Z.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChange)},data(){const e=z(this.item);return{shapePath:e?e.path:null,caps:e?e.caps:null}},methods:{onItemChange(){y.info("onItemChange",this.item.id,this.item.name,this.item);const e=z(this.item);e&&(this.shapePath=e.path,this.caps=e.caps),y.info("computed path and caps",this.item.id,this.item.name,this.shapePath,this.caps),this.$forceUpdate()}},computed:{strokeDashArray(){return s.Z.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize)},svgFill(){return this.item.shapeProps.thick?(0,h.pz)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`):"none"}}},G=(0,i(1900).Z)(V,n,[],!1,null,null,null).exports},5120:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",{attrs:{"data-preview-ignore":"true"}},[e.item.shapeProps.showName?i("foreignObject",{attrs:{x:0,y:-20-e.boundsCorrection,width:e.item.area.w,height:20}},[i("div",{staticStyle:{"font-size":"12px","font-weight":"bold",display:"table-cell",padding:"2px 5px",height:"20px","font-family":"Arial, Helvetica, sans-serif","text-align":"left","vertical-align":"bottom","white-space":"nowrap"},style:{background:e.item.shapeProps.strokeColor,color:"white"},attrs:{"data-item-id":e.item.id}},[e._v("\n            "+e._s(e.item.name)+"\n        ")])]):e._e(),e._v(" "),i("path",{attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,"stroke-dasharray":e.strokeDashArray,"stroke-dashoffset":e.item.meta.strokeOffset,"data-item-id":e.item.id,fill:"none"}}),e._v(" "),e.item.shapeProps.screenBounds?i("path",{attrs:{d:e.screenBoundsPath,"stroke-width":2*e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,fill:"none","data-item-id":e.item.id}}):e._e()])};n._withStripped=!0;var r=i(4502),s=i(7196);const o={props:["item"],shapeConfig:{shapeType:"vue",id:"dummy",menuItems:[{group:"General",name:"Dummy",iconUrl:"assets/images/items/dummy.svg",description:"\n                Dummy item can be used in order to group mulitple items together.\n                It is only visible in the edit mode and completely transparent in view mode.\n            ",item:{name:"Dummy",shapeProps:{}},previewArea:{x:3,y:30,w:150,h:120}},{group:"General",name:"Screen bounds",iconUrl:"assets/images/items/screen-bounds.svg",description:"\n                Specifies the bounds of the screen. Users will not be able to scroll outside of it in view mode.\n                If the document is loaded inside of a component it will also work as view box and limit the rendering of the component items to the view box area.\n            ",item:{name:"Bounds",shapeProps:{screenBounds:!0,strokeColor:"#E8821B87",strokePattern:"dotted"}},previewArea:{x:3,y:30,w:150,h:120}}],getTextSlots:e=>[],computePath:s._U,computeOutline:s.bL,editorProps:{onlyEditMode:!0},args:{strokeColor:{name:"Stroke",type:"color",value:"rgba(50, 175, 209, 1)"},strokeSize:{name:"Stroke Size",type:"number",value:2},strokePattern:{type:"stroke-pattern",value:"dashed",name:"Stroke pattern"},showName:{type:"boolean",value:!0,name:"Display Name"},screenBounds:{type:"boolean",value:!1,name:"Screen bounds",description:"If set to true than this item will specifies the bounds of the screen. Users will not be able to scroll outside of it in view mode.If the document is loaded inside of a component it will also work as view box and limit the rendering of the component items to the view box area."}}},computed:{shapePath(){return(0,s._U)(this.item)},screenBoundsPath(){const e=this.item.area.w,t=this.item.area.h,i=Math.min(e,t)/6;return`M 0 ${i} l 0 ${-i} l ${i} 0 M ${e-i} 0 l ${i} 0 l 0 ${i}M ${e} ${t-i} l 0 ${i} l ${-i} 0M ${i} ${t} l ${-i} 0 l 0 ${-i}`},strokeDashArray(){return r.Z.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize)},boundsCorrection(){return this.item.shapeProps.screenBounds?this.item.shapeProps.strokeSize+1:0}}},a=(0,i(1900).Z)(o,n,[],!1,null,null,null).exports},1526:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",[e._l(e.buttons,(function(t){return i("g",[i("path",{staticStyle:{"-webkit-transition":"fill 200ms linear","-ms-transition":"fill 200ms linear",transition:"fill 200ms linear"},attrs:{d:t.path,fill:e.hoveredButtonId===t.id?e.item.shapeProps.hoverFillColor:e.item.shapeProps.fillColor,stroke:e.item.shapeProps.strokeColor,"stroke-width":"1"}}),e._v(" "),i("foreignObject",{attrs:{x:t.x,y:t.y,width:t.size,height:t.size}},[i("div",{staticStyle:{display:"flex","align-items":"center",height:"100%","text-align":"center","vertical-align":"middle"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[i("i",{class:[e.isPlaying?t.iconPlaying:t.icon],style:{display:"inline-block",width:"100%","text-align":"center","font-size":e.buttonFontSize,color:e.item.shapeProps.strokeColor}})])])])})),e._v(" "),e.currentSection?i("foreignObject",{attrs:{x:"0",y:e.buttonSize+6+e.topOffset,width:e.item.area.w,height:"60",xmlns:"http://www.w3.org/1999/xhtml"}},[i("div",{style:e.framesTextStyle},[i("div",[e._v(e._s(e.currentSection.number)+" / "+e._s(e.totalSections))]),e._v(" "),e.shoulShowCurrentSectionName?i("div",[e._v(e._s(e.currentSection.name))]):e._e()])]):e._e()],2)};n._withStripped=!0;var r=i(6234),s=i(8595);function o(e){const t=e.shapeProps.sections.length>0?5:1,i=e.area.w/2-(t/2*20+4*(t-1)/2),n=e.shapeProps.sections.length>0?60:30,r=Math.max(0,e.area.h-n),s=(e,t,n,s)=>({id:t,icon:n,iconPlaying:s,path:`M ${i+24*e} ${r+10} a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0 z`,x:i+24*e,y:r,size:20});return e.shapeProps.sections.length>0?[s(0,"fast-backward","fas fa-fast-backward","fas fa-fast-backward"),s(1,"step-backward","fas fa-step-backward","fas fa-step-backward"),s(2,"play-stop","fas fa-play","fas fa-pause"),s(3,"step-forward","fas fa-step-forward","fas fa-step-forward"),s(4,"fast-forward","fas fa-fast-forward","fas fa-fast-forward")]:[s(0,"play-stop","fas fa-play","fas fa-pause")]}const a={props:["item","editorId"],shapeConfig:{shapeType:"vue",id:"frame_player",menuItems:[{group:"General",name:"Frame Player",iconUrl:"assets/images/items/frame-player.svg",size:{w:140,h:100},item:{textSlots:{title:{text:"<b>Frame Player</b>",color:"#000000",fontSize:14}}}}],getPins:e=>({}),getTextSlots(e){const t=e.shapeProps.sections.length>0?60:30;return[{name:"title",area:{x:0,y:0,w:e.area.w,h:Math.max(0,e.area.h-t)}}]},computePath(e){const t=e.area.w,i=e.area.h;return`M 0 0   L ${t} 0  L ${t} ${i}  L 0 ${i} z`},onMouseMove(e,t,i){s.Z.item.custom.$emit("mouse-move",e,t.id,i)},onMouseOut(e,t){s.Z.item.custom.$emit("mouse-out",e,t.id)},onMouseDown(e,t,i){s.Z.item.custom.$emit("mouse-down",e,t.id,i)},computeCustomAreas:e=>o(e).map((e=>({id:e.id,cursor:"pointer",path:e.path}))),args:{totalFrames:{type:"number",value:5,name:"Total frames"},fps:{type:"number",value:1,name:"Frames per second"},fillColor:{type:"color",value:"rgba(220, 220, 220, 1.0)",name:"Fill color"},hoverFillColor:{type:"color",value:"rgba(190, 190, 190, 1.0)",name:"Hover fill color"},strokeColor:{type:"color",value:"rgba(30,30,30,1.0)",name:"Stroke color"},animations:{type:"animations",value:[],name:"Animations",hidden:!0},functions:{type:"animation-functions",value:{},name:"Animation Functions",hidden:!0},sections:{type:"animation-sections",value:[],name:"Sections",hidden:!0}}},beforeMount(){s.Z.framePlayer.prepared.$emit(this.editorId,this.item,this.createFrameCallbacks()),s.Z.item.custom.$on("mouse-move",this.editorId,this.item.id,this.onMouseMove),s.Z.item.custom.$on("mouse-down",this.editorId,this.item.id,this.onMouseDown),s.Z.item.custom.$on("mouse-out",this.editorId,this.item.id,this.onMouseOut)},beforeDestroy(){s.Z.item.custom.$off("mouse-move",this.editorId,this.item.id,this.onMouseMove),s.Z.item.custom.$off("mouse-down",this.editorId,this.item.id,this.onMouseDown),s.Z.item.custom.$off("mouse-out",this.editorId,this.item.id,this.onMouseOut)},data(){const e=[],t=new Map,i=new Map;this.item.shapeProps.sections.sort(((e,t)=>e.frame-t.frame)),(0,r.Ed)(this.item.shapeProps.sections,((e,n)=>{const r={number:n+1,name:e.value,frame:e.frame};t.set(e.frame,r),i.set(r.number,r)}));let n=null,s=null;for(let i=0;i<this.item.shapeProps.totalFrames;i++){const r=i+1;t.has(r)&&(s=t.get(r),n||(n=s)),e[i]=s}return{currentFrame:1,isPlaying:!1,intervalId:null,buttonFontSize:"10px",sectionsMapping:e,sectionsByNumber:i,currentSection:n,totalSections:this.item.shapeProps.sections.length,hoveredButtonId:null,buttons:o(this.item),buttonSize:20}},methods:{onMouseMove(e){this.hoveredButtonId=e},onMouseOut(){this.hoveredButtonId=null},onMouseDown(e){"fast-backward"===e?this.onClickedToBegin():"step-backward"===e?this.onClickedLeft():"play-stop"===e?this.onClickedTogglePlay():"step-forward"===e?this.onClickPlayToNext():"fast-forward"===e&&this.onClickFastRight()},onClickedToBegin(){const e=this.sectionsByNumber.get(1);e&&(this.currentFrame=1,this.currentSection=e,this.emitCurrentFrameEvent())},onClickFastRight(){if(this.currentSection){const e=this.sectionsByNumber.get(this.currentSection.number+1);if(e){const t=e.frame;t>=0&&(this.currentFrame=t,this.currentSection=e,this.emitCurrentFrameEvent())}}},onClickedLeft(){if(this.currentSection){const e=this.sectionsByNumber.get(this.currentSection.number-1);if(e){const t=e.frame;t>=0&&(this.currentFrame=t,this.currentSection=e,this.emitCurrentFrameEvent())}}},createFrameCallbacks(){return{onFrame:e=>{this.currentFrame=e,e<=this.sectionsMapping.length&&e>0&&(this.currentSection=this.sectionsMapping[e-1])},onFinish:()=>{this.isPlaying=!1}}},onClickPlayToNext(){if(this.currentSection){let e=-1;const t=this.sectionsByNumber.get(this.currentSection.number+1);if(t){const i=t.frame;i<=this.item.shapeProps.totalFrames&&(e=i)}this.$emit("frame-animator",{operation:"play",item:this.item,frame:this.currentFrame,stopFrame:e,callbacks:this.createFrameCallbacks()})}},onClickedTogglePlay(){if(this.isPlaying)this.$emit("frame-animator",{operation:"stop",item:this.item});else{this.isPlaying=!0;let e=this.currentFrame;this.currentFrame>=this.item.shapeProps.totalFrames&&(e=1),this.$emit("frame-animator",{operation:"play",item:this.item,frame:e,callbacks:this.createFrameCallbacks()})}},emitCurrentFrameEvent(){this.$emit("frame-animator",{operation:"setFrame",item:this.item,frame:this.currentFrame})}},computed:{framesTextStyle(){return{color:this.item.textSlots.title.color,"font-size":`${this.item.textSlots.title.fontSize}px`,"text-align":"center"}},topOffset(){return Math.max(0,this.item.area.h-60)},shoulShowCurrentSectionName(){return!!this.currentSection&&""+this.currentSection.number!==this.currentSection.name}}},l=(0,i(1900).Z)(a,n,[],!1,null,null,null).exports},4530:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",{attrs:{"data-preview-ignore":"true"}},[i("foreignObject",{attrs:{x:0,y:-20,width:e.item.area.w,height:20}},[i("div",{staticStyle:{"font-size":"12px","font-weight":"bold",display:"table-cell",padding:"2px 5px",height:"20px","font-family":"Arial, Helvetica, sans-serif","text-align":"left","vertical-align":"bottom","white-space":"normal"},style:{background:e.item.shapeProps.strokeColor,color:"white"},attrs:{"data-item-id":e.item.id}},[e._v("\n            "+e._s(e.item.name)+"\n        ")])]),e._v(" "),i("path",{attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,"stroke-dasharray":e.strokeDashArray,"stroke-dashoffset":e.item.meta.strokeOffset,fill:"none"}})])};n._withStripped=!0;var r=i(4502),s=i(7196);const o={props:["item"],shapeConfig:{shapeType:"vue",components:{},id:"hud",menuItems:[{group:"General",name:"HUD",iconUrl:"assets/images/items/hud.svg",description:"\n                HUD stands for Heads Up Display.\n                When going into view mode, HUD item will always be rendered in the viewport.\n                This lets you design your own menu on top of the scene, which will always stay in the same spot"}],getTextSlots:e=>[],computePath:s._U,computeOutline:s.bL,editorProps:{onlyEditMode:!0},args:{strokeColor:{name:"Stroke",type:"color",value:"#32D143"},strokeSize:{name:"Stroke Size",type:"number",value:2},strokePattern:{type:"stroke-pattern",value:"dashed",name:"Stroke pattern"},horizontalPosition:{type:"choice",value:"left",options:["left","right","center"],name:"Horizontal Position"},verticalPosition:{type:"choice",value:"top",options:["top","bottom","center"],name:"Vertical Position"}}},computed:{shapePath(){return(0,s._U)(this.item)},strokeDashArray(){return r.Z.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize)}}},a=(0,i(1900).Z)(o,n,[],!1,null,null,null).exports},477:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",[i("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.titleArea}}),e._v(" "),i("advanced-fill",{attrs:{fillId:"titlefill-pattern-"+e.item.id,fill:e.item.shapeProps.titleFill,area:e.item.area}}),e._v(" "),e.item.shapeProps.showTitle?i("rect",{attrs:{x:0,y:0,width:e.item.area.w,height:e.item.shapeProps.titleHeight,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,fill:e.svgTitleFill}}):e._e(),e._v(" "),e.item.shapeProps.showTitle?i("rect",{attrs:{x:e.imageX,y:e.imageY,width:e.imageWidth,height:e.imageHeight,"stroke-width":0,stroke:"none",fill:e.svgFill}}):e._e(),e._v(" "),i("g",{attrs:{transform:"translate(0 "+e.imageY+")"}},[i("clipPath",{attrs:{id:"image-crop-clip-path-"+e.item.id}},[i("path",{attrs:{d:"M 0 0  L "+e.item.area.w+" 0   L "+e.item.area.w+" "+e.item.area.h+"  L 0 "+e.item.area.h+" Z","data-item-id":e.item.id,"stroke-width":"0px",stroke:"rgba(255, 255, 255, 0)",fill:"rgba(255, 255, 255, 0)"}})]),e._v(" "),i("pattern",{attrs:{id:"image-fill-"+e.item.id,patternUnits:"userSpaceOnUse",width:e.imageWidth,height:e.imageHeight}},[i("image",{attrs:{"xlink:href":e.imagePath,x:-e.item.shapeProps.crop.x*e.imageWidth,y:-e.item.shapeProps.crop.y*e.imageHeight,width:e.imageWidth*(1+e.item.shapeProps.crop.x+e.item.shapeProps.crop.w),height:e.imageHeight*(1+e.item.shapeProps.crop.y+e.item.shapeProps.crop.h),preserveAspectRatio:e.imagePreserveAspectRatio}})]),e._v(" "),i("g",{style:{"clip-path":"url(#image-crop-clip-path-"+e.item.id+")"}},[i("rect",{attrs:{x:0,y:0,width:e.imageWidth,height:e.imageHeight,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,fill:"url(#image-fill-"+e.item.id+")"}})])])],1)};n._withStripped=!0;var r=i(9498),s=i(9421);const o=e=>{const t=e.area.w,i=e.area.h;return`M 0 0  L ${t} 0  L ${t} ${i} L 0 ${i} Z`},a={props:["item"],components:{AdvancedFill:s.ZP},shapeConfig:{shapeType:"vue",id:"image",menuItems:[{group:"General",name:"Image",imageProperty:"shapeProps.image",iconUrl:"assets/images/items/image.svg",description:"It lets you upload an image or specify a link to external image",item:{shapeProps:{image:""}}}],getPins:e=>(0,r.Fb)(e),computePath:o,getTextSlots:e=>[{name:"title",area:{x:0,y:0,w:e.area.w,h:Math.max(0,e.shapeProps.titleHeight)}}],editorProps:{},args:{image:{type:"image",name:"Image"},stretch:{type:"boolean",value:!1,name:"Stretch"},strokeColor:{type:"color",value:"rgba(80, 80, 80, 1.0)",name:"Stroke color"},strokeSize:{type:"number",value:0,name:"Stroke size"},showTitle:{type:"boolean",value:!1,name:"Title"},crop:{type:"crop-area",value:{x:0,y:0,w:0,h:0},name:"Crop",hidden:!0},titleHeight:{type:"number",value:36,name:"Title height",min:0,depends:{showTitle:!0}},titleFill:{type:"advanced-color",value:{type:"solid",color:"rgba(240,240,240,1.0)"},name:"Title Background",depends:{showTitle:!0}},fill:{type:"advanced-color",value:{type:"solid",color:"rgba(240,240,240,1.0)"},name:"Background",depends:{showTitle:!0}}}},computed:{shapePath(){return o(this.item)},svgTitleFill(){return(0,s.pz)(this.item.shapeProps.titleFill,`titlefill-pattern-${this.item.id}`)},svgFill(){return(0,s.pz)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`)},imagePreserveAspectRatio(){return this.item.shapeProps.stretch?"none":"xMidYMid meet"},titleArea(){return{x:0,y:0,w:this.item.area.w,h:this.item.shapeProps.titleHeight}},imageX:()=>0,imageY(){return this.item.shapeProps.showTitle?this.item.shapeProps.titleHeight:0},imageWidth(){return this.item.area.w},imageHeight(){return this.item.shapeProps.showTitle?Math.max(0,this.item.area.h-this.item.shapeProps.titleHeight):this.item.area.h},imagePath(){return this.item.shapeProps.image?this.item.shapeProps.image:this.$store.getters.assetsPath+"/images/missing-scheme-preview.png"}}},l=(0,i(1900).Z)(a,n,[],!1,null,null,null).exports},1061:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",[e.hideTextSlot?e._e():i("a",{staticClass:"item-link",attrs:{"xlink:href":e.item.shapeProps.url,target:e.target}},[e.item.shapeProps.showIcon?i("foreignObject",{style:e.iconStyle,attrs:{x:"0",y:"0",width:e.textOffset,height:e.item.area.h}},[i("div",{attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[i("i",{class:e.iconClass})])]):e._e(),e._v(" "),e.textWidth>0?i("foreignObject",{style:e.linkStyle,attrs:{x:e.textOffset,y:"0",width:e.textWidth,height:e.item.area.h}},[i("div",{attrs:{xmlns:"http://www.w3.org/1999/xhtml"},domProps:{innerHTML:e._s(e.linkHtml)}})]):e._e()])])};n._withStripped=!0;var r=i(6234),s=i(9874),o=i(3762),a=i(5635),l=i(8595);const c={props:["item","editorId"],shapeConfig:{shapeType:"vue",id:"link",menuItems:[{group:"General",name:"Link",iconUrl:"assets/images/items/link.svg",item:{textSlots:{link:{text:"Link",fontSize:16,paddingLeft:0,paddingTop:0,paddingBottom:0,paddingRight:0,color:"#047EFB",halign:"left",valign:"top"}},cursor:"pointer"}}],computePath(e){const t=e.area.w,i=e.area.h;return`M 0 0   L ${t} 0  L ${t} ${i}  L 0 ${i} z`},editorProps:{customTextRendering:!0},getTextSlots:e=>[{name:"link",area:{x:0,y:0,w:e.area.w,h:e.area.h}}],onMouseDown(e,t){l.Z.item.custom.$emit("mouse-down",e,t.id)},args:{url:{type:"string",value:"",name:"URL"},otherTab:{type:"boolean",value:!0,name:"In Other Tab",description:"Open the link in another tab"},underline:{type:"boolean",value:!0,name:"Underline"},showIcon:{type:"boolean",value:!0,name:"Show Icon"},icon:{type:"choice",value:"default",name:"Icon",options:(0,r.UI)(s.Z.knownTypes,(e=>e.name))},iconColor:{type:"color",value:"#666666",name:"Color",depends:{showIcon:!0}}}},beforeMount(){l.Z.item.custom.$on("mouse-down",this.editorId,this.item.id,this.onLinkClick),l.Z.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChanged),l.Z.textSlot.triggered.specific.$on(this.editorId,this.item.id,this.onItemTextSlotEditTriggered),l.Z.textSlot.canceled.specific.$on(this.editorId,this.item.id,this.onItemTextSlotEditCanceled)},beforeDestroy(){l.Z.item.custom.$off("mouse-down",this.editorId,this.item.id,this.onLinkClick),l.Z.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChanged),l.Z.textSlot.triggered.specific.$off(this.editorId,this.item.id,this.onItemTextSlotEditTriggered),l.Z.textSlot.canceled.specific.$off(this.editorId,this.item.id,this.onItemTextSlotEditCanceled)},data(){return{linkStyle:this.createLinkStyle(),hideTextSlot:!1}},methods:{createLinkStyle(){const e=(0,a.A)(this.item.textSlots.link);return e["text-decoration"]=this.item.shapeProps.underline?"underline":"none",e},onLinkClick(){this.item.shapeProps.otherTab?window.open(this.item.shapeProps.url,"_blank")||window.location.replace(this.item.shapeProps.url):window.location=this.item.shapeProps.url},calculateTextOffset(){return this.item.shapeProps.showIcon?1.4*this.item.textSlots.link.fontSize:0},onItemChanged(){this.linkStyle=this.createLinkStyle()},onItemTextSlotEditTriggered(e,t,i,n){this.hideTextSlot=!0},onItemTextSlotEditCanceled(e,t){this.hideTextSlot=!1}},computed:{target(){return this.item.shapeProps.otherTab?"_blank":"_self"},iconStyle(){return{color:this.item.shapeProps.iconColor,"padding-top":this.linkStyle["padding-left"],"padding-bottom":this.linkStyle["padding-left"]}},linkHtml(){return(0,o.Z)(this.item.textSlots.link.text)},textOffset(){return this.calculateTextOffset()},textWidth(){return this.item.area.w-this.calculateTextOffset()},iconClass(){return s.Z.findTypeByNameOrDefault(this.item.shapeProps.icon).cssClass}}},h=(0,i(1900).Z)(c,n,[],!1,null,null,null).exports},3730:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g,T:()=>m});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",[i("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),i("path",{staticStyle:{"stroke-linejoin":"round"},attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,"stroke-dasharray":e.strokeDashArray,"stroke-dashoffset":e.item.meta.strokeOffset,fill:e.fill}})],1)};n._withStripped=!0;var r=i(9421),s=i(4502),o=i(2017),a=i(3590),l=i(8270),c=i(8595),h=i(791),d=i(2644);const u=new o.Yd("Path");function p(e){let t="";return e.shapeProps.paths.forEach((i=>{const n=(0,l.FI)(e.area.w,e.area.h,i.points,i.closed);n&&(t+=n+" ")})),t}function m(e,t){t||(t=5);const i=[];let n=[];i.push(n),e.forEach(((e,t)=>{e.break&&(n=[],i.push(n)),n.push(e)}));let r=[];return i.forEach(((e,i)=>{const n=a.Z.smoothPathPoints(a.Z.simplifyPathPointsUsingRDP(e,t));i>0&&e.length>0&&(e[0].break=!0),r=r.concat(n)})),r}const f={props:["item","editorId"],components:{AdvancedFill:r.ZP},shapeConfig:{shapeType:"vue",id:"path",menuItems:[],computePath:p,getSnappers:function(e){const t=[];return e.shapeProps.paths.forEach((i=>{i.points.forEach((i=>{const n=(0,d.rs)(i.x,i.y,e);t.push({item:e,snapperType:"horizontal",value:n.y}),t.push({item:e,snapperType:"vertical",value:n.x})}))})),t},getPins(e){const t={};return e.shapeProps.paths.forEach((i=>{i.points.forEach((i=>{const n=(0,l.oJ)(i,e.area.w,e.area.h);t[i.id]={x:n.x,y:n.y}}))})),t},getTextSlots:()=>[],editorProps:{description:"rich"},controlPoints:null,args:{fill:{type:"advanced-color",value:{type:"none"},name:"Fill"},strokeColor:{type:"color",value:"rgba(30,30,30,1.0)",name:"Stroke color"},strokeSize:{type:"number",value:2,name:"Stroke size"},strokePattern:{type:"stroke-pattern",value:"solid",name:"Stroke pattern"},paths:{type:"path-array",value:[],name:"Paths",hidden:!0}},scriptFunctions:function(e,t,i){const n=()=>{t.readjustItemAndDescendants(i.id,!0),c.Z.item.changed.specific.$emit(e,i.id)},r=(e,t)=>{if(e<0||e>=i.shapeProps.length)throw new Error(`Invalid path index: ${e}`);return t(i.shapeProps.paths[e])},s=(e,t,i)=>{if(t<0||t>=e.points.length)throw new Error(`Invalid point index: ${t}`);return i(e.points[t])};return{totalPaths:()=>i.shapeProps.paths.length,totalPathPoints:e=>r(e,(e=>e.points.length)),isPathClosed:e=>r(e,(e=>e.closed)),closePath(e){r(e,(e=>{e.closed=!0,n()}))},openPath(e){r(e,(e=>{e.closed=!1,n()}))},getPathPointWorldPos:(e,t)=>r(e,(e=>s(e,t,(e=>{const t=(0,l.oJ)(e,i.area.w,i.area.h);return h.O.fromPoint((0,d.rs)(t.x,t.y,i))})))),setPathPointWorldPos:(e,t,o,a)=>r(e,(e=>s(e,t,(e=>{const t=(0,d.N5)(o,a,i),r=(0,l.Vk)(t,i.area.w,i.area.h);e.x=r.x,e.y=r.y,n()}))))}}},mounted(){c.Z.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChange)},beforeDestroy(){c.Z.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChange)},data(){return{shapePath:p(this.item)}},methods:{onItemChange(){u.info("onItemChange",this.item.id,this.item.name,this.item),this.shapePath=p(this.item),this.$forceUpdate()}},computed:{strokeDashArray(){return s.Z.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize)},fill(){return(0,r.pz)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`)}}},g=(0,i(1900).Z)(f,n,[],!1,null,null,null).exports},9354:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",[i("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),i("defs",[i("linearGradient",{attrs:{id:"sticky-note-gradient-"+e.item.id,x1:"50%",y1:"100%",x2:"50%",y2:"0%"}},[i("stop",{staticStyle:{"stop-color":"rgba(196, 196, 196, 0.14)"},attrs:{offset:"0%"}}),e._v(" "),i("stop",{staticStyle:{"stop-color":"rgba(128, 128, 128, 0.4)"},attrs:{offset:"80.56%"}}),e._v(" "),i("stop",{staticStyle:{"stop-color":"rgba(0, 0, 0, 0.23)"},attrs:{offset:"87.22%"}}),e._v(" "),i("stop",{staticStyle:{"stop-color":"rgba(0, 0, 0, 0.3)"},attrs:{offset:"100%"}})],1)],1),e._v(" "),i("defs",[i("filter",{attrs:{id:"sticky-note-shadow-filter-"+e.item.id}},[i("feGaussianBlur",{attrs:{in:"SourceGraphic",stdDeviation:"4"}})],1)]),e._v(" "),i("g",{style:{opacity:.2},attrs:{filter:"url(#sticky-note-shadow-filter-"+e.item.id+")"}},[i("path",{attrs:{d:e.shadowPath,stroke:"none",fill:"rgba(0, 0, 0, 1)"}})]),e._v(" "),i("path",{attrs:{d:e.shapePath,stroke:"none",fill:e.svgFill}}),e._v(" "),i("path",{style:{opacity:.5,"mix-blend-mode":"multiply"},attrs:{d:e.shapePath,stroke:"none",fill:"url(#sticky-note-gradient-"+e.item.id+")"}})],1)};n._withStripped=!0;var r=i(9498),s=i(9421),o=i(6234);function a(e){const t=e.area.w,i=e.area.h;return`M ${t} ${i}  L 0 ${i} L 0 0   L ${t} 0 L ${t} ${i} Z`}const l={props:["item"],components:{AdvancedFill:s.ZP},shapeConfig:{shapeType:"vue",id:"sticky_note",menuItems:(0,o.UI)([{name:"yellow",color:"rgba(240,234,55,1)"},{name:"red",color:"rgba(255,98,55,1)"},{name:"lime",color:"rgba(175,255,105,1)"},{name:"green",color:"rgba(148,255,112,1)"},{name:"blue",color:"rgba(116,255,255,1)"},{name:"purple",color:"rgba(212,184,255,1)"},{name:"pink",color:"rgba(255,184,235,1)"},{name:"white",color:"rgba(250,250,250,1)"},{name:"grey",color:"rgba(200,200,200,1)"}],(e=>({group:"Sticky Notes",name:`Sticky Note (${e.name})`,iconSVG:`<path fill="${e.color}" d="M 1 1  L 41 1  L 41 31  L 1 31 Z"/>`,item:{shapeProps:{fill:{type:"solid",color:e.color}}},size:{w:180,h:180}}))),getPins:e=>(0,r.Fb)(e),getTextSlots:e=>[{name:"body",area:{x:0,y:0,w:e.area.w,h:e.area.h}}],computePath:a,args:{fill:{type:"advanced-color",value:{type:"solid",color:"rgba(240, 234, 55, 1.0)"},name:"Fill"}}},data:()=>({}),computed:{shapePath(){return a(this.item)},shadowPath(){const e=.1*this.item.area.w,t=.99*this.item.area.w,i=.1*this.item.area.h,n=.99*this.item.area.h;return`M ${e} ${i}  L ${t} ${i} L ${1.03*this.item.area.w} ${1.03*this.item.area.h}  L ${e} ${n} Z`},svgFill(){return(0,s.pz)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`)}}},c=(0,i(1900).Z)(l,n,[],!1,null,null,null).exports},4643:(e,t,i)=>{"use strict";i.d(t,{Z:()=>L});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",[i("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),i("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id+"-header",fill:e.item.shapeProps.headerFill,area:e.item.area}}),e._v(" "),i("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id+"-secondary-fill",fill:e.item.shapeProps.rowSecondaryFill,area:e.item.area}}),e._v(" "),i("g",e._l(e.cells,(function(e){return i("rect",{attrs:{x:e.area.x,y:e.area.y,width:e.area.w,height:e.area.h,stroke:"none",fill:e.fill}})})),0),e._v(" "),"simple"===e.item.shapeProps.tableStyle?i("g",[i("path",{attrs:{d:e.outlinePath,stroke:e.item.shapeProps.stroke,"stroke-width":e.item.shapeProps.strokeSize+"px",fill:"none"}}),e._v(" "),e._l(e.gridLines,(function(t){return i("line",{attrs:{stroke:e.item.shapeProps.stroke,"stroke-width":e.item.shapeProps.strokeSize+"px",x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}})}))],2):e._e()],1)};n._withStripped=!0;var r=i(9421),s=i(3590),o=i(8595),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-1 padded"},[i("NumberTextfield",{attrs:{value:e.item.shapeProps.columns,min:1,max:100,name:"Columns"},on:{changed:function(t){return e.$emit("shape-prop-changed","columns","number",arguments[0])}}})],1),e._v(" "),i("div",{staticClass:"col-1 padded"},[i("NumberTextfield",{attrs:{value:e.item.shapeProps.rows,min:1,max:100,name:"Rows"},on:{changed:function(t){return e.$emit("shape-prop-changed","rows","number",arguments[0])}}})],1)]),e._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-1 padded",attrs:{title:"Fill"}},[i("AdvancedColorEditor",{attrs:{editorId:e.editorId,value:e.item.shapeProps.fill,disabled:!1},on:{changed:function(t){return e.$emit("shape-prop-changed","fill","advanced-color",arguments[0])}}})],1),e._v(" "),i("div",{staticClass:"col-1 padded",attrs:{title:"Secondary fill"}},[i("AdvancedColorEditor",{attrs:{editorId:e.editorId,value:e.item.shapeProps.rowSecondaryFill,disabled:!e.item.shapeProps.oddEvenFill},on:{changed:function(t){return e.$emit("shape-prop-changed","rowSecondaryFill","advanced-color",arguments[0])}}})],1),e._v(" "),i("div",{staticClass:"col-1 padded",attrs:{title:"Header fill"}},[i("AdvancedColorEditor",{attrs:{editorId:e.editorId,value:e.item.shapeProps.headerFill,disabled:"none"===e.item.shapeProps.header},on:{changed:function(t){return e.$emit("shape-prop-changed","headerFill","advanced-color",arguments[0])}}})],1),e._v(" "),i("div",{staticClass:"col-1 padded",attrs:{title:"Stroke color"}},[i("ColorPicker",{attrs:{editorId:e.editorId,color:e.item.shapeProps.stroke,disabled:"flat"===e.item.shapeProps.style},on:{input:function(t){return e.$emit("shape-prop-changed","stroke","color",arguments[0])}}})],1)]),e._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-1 padded"},[i("NumberTextfield",{attrs:{value:e.item.shapeProps.strokeSize,min:1,max:100,name:"Stroke size",disabled:"flat"===e.item.shapeProps.style},on:{changed:function(t){return e.$emit("shape-prop-changed","strokeSize","number",arguments[0])}}})],1)]),e._v(" "),i("div",{staticClass:"hint hint-small text-centered"},[e._v("\n            Choose table style\n    ")]),e._v(" "),e._l(e.tableStyles,(function(t){return i("div",{staticClass:"toggle-button",on:{click:function(i){return e.applyTableStyle(t)}}},[i("svg",{attrs:{width:t.iconWidth+"px",height:t.iconHeight+"px"}},[i("g",{attrs:{transform:"translate(3,3)"}},[e._l(t.cells,(function(e){return i("rect",{attrs:{x:e.x,y:e.y,width:e.w,height:e.h,fill:e.color,stroke:"none"}})})),e._v(" "),e._l(t.gridLines,(function(e){return i("line",{attrs:{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stroke:"#aaaaaa"}})}))],2)])])})),e._v(" "),i("div",{staticStyle:{clear:"both"}})],2)};a._withStripped=!0;var l=i(9240),c=i(7455),h=i(4896),d=i(6234);const u=[{name:"Standard",shapeProps:{style:"simple",oddEvenFill:!1,header:"none",cutCorner:!1}},{name:"Flat",shapeProps:{style:"flat",oddEvenFill:!1,header:"none",cutCorner:!1}},{name:"Standard with header",shapeProps:{style:"simple",oddEvenFill:!1,header:"columns",cutCorner:!1}},{name:"Flat with header",shapeProps:{style:"flat",oddEvenFill:!1,header:"columns",cutCorner:!1}},{name:"Standard with vertical header",shapeProps:{style:"simple",oddEvenFill:!1,header:"rows",cutCorner:!1}},{name:"Flat with vertical header",shapeProps:{style:"flat",oddEvenFill:!1,header:"rows",cutCorner:!1}},{name:"Standard with header, odd/even",shapeProps:{style:"simple",oddEvenFill:!0,header:"columns",cutCorner:!1}},{name:"Flat with header, odd/even rows",shapeProps:{style:"flat",oddEvenFill:!0,header:"columns",cutCorner:!1}},{name:"Standard with both headers",shapeProps:{style:"simple",oddEvenFill:!1,header:"both",cutCorner:!1}},{name:"Flat with both headers",shapeProps:{style:"flat",oddEvenFill:!1,header:"both",cutCorner:!1}},{name:"Standard with both headers, no corner",shapeProps:{style:"simple",oddEvenFill:!1,header:"both",cutCorner:!0}},{name:"Flat with both headers, no corner",shapeProps:{style:"flat",oddEvenFill:!1,header:"both",cutCorner:!0}}];u.forEach((e=>{e.cells=[];const t="simple"===e.shapeProps.style?0:1;for(let i=0;i<4;i++)for(let n=0;n<3;n++){const r={color:"#ffffff",margin:"simple"===e.shapeProps.style?0:2,hasBorder:"simple"===e.shapeProps.style,x:20*n+t,w:20-2*t,y:12*i+t,h:12-2*t};e.shapeProps.oddEvenFill&&i>0&&i%2==0&&(r.color="#e3e3f3"),("columns"===e.shapeProps.header&&0===i||"rows"===e.shapeProps.header&&0===n||"both"===e.shapeProps.header&&(0===i||0===n))&&(r.color="#bbbbbb"),e.shapeProps.cutCorner&&0===i&&0===n||e.cells.push(r)}if(e.gridLines=[],"simple"===e.shapeProps.style){for(let t=0;t<=4;t++)e.gridLines.push({x1:e.shapeProps.cutCorner&&0===t?20:0,x2:60,y1:12*t,y2:12*t});for(let t=0;t<=3;t++)e.gridLines.push({x1:20*t,x2:20*t,y1:e.shapeProps.cutCorner&&0===t?12:0,y2:48})}e.iconWidth=66,e.iconHeight=54}));const p={props:{editorId:{type:String,required:!0},item:{type:Object},refreshKey:{type:String}},components:{NumberTextfield:l.Z,ColorPicker:c.Z,AdvancedColorEditor:h.Z},data:()=>({tableStyles:u}),methods:{applyTableStyle(e){(0,d.Ed)(e.shapeProps,((e,t)=>{this.item.shapeProps[t]=e})),this.$emit("item-mutated")}},watch:{refreshKey(){this.$forceUpdate()}}};var m=i(1900);const f=(0,m.Z)(p,a,[],!1,null,null,null).exports;var g=i(4691),v=i(7196);function y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function x(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?y(Object(i),!0).forEach((function(t){b(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function b(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const w=100;function C(e,t,i){const n=t.shapeProps.columns;t.shapeProps.columns=i,k(0,t,i,n),o.Z.item.changed.specific.$emit(e,t.id,"shapeProps.column"),o.Z.schemeChangeCommitted.$emit(e,`item.${t.id}.shapeProps.columns`)}function P(e,t,i){const n=t.shapeProps.rows;t.shapeProps.rows=i,S(0,t,i,n),o.Z.item.changed.specific.$emit(e,t.id,"shapeProps.rows"),o.Z.schemeChangeCommitted.$emit(e,`item.${t.id}.shapeProps.rows`)}function k(e,t,i,n){const r=[];let o=100,a=0;for(let e=0;e<n-1;e++){const i=t.area.w*t.shapeProps.colWidths[e]/100;a+=i,r[e]=i}if(o=Math.max(t.area.w/(2*Math.max(1,n)),t.area.w-a),i>n&&i>0&&!s.Z.tooSmall(t.area.w)){for(let e=n-1;e<i-1;e++)r.push(o),t.area.w+=o;for(let e=n-1;e<i;e++)for(let i=0;i<t.shapeProps.rows;i++){const n=`c_${i}_${e}`;t.textSlots.hasOwnProperty(n)||(t.textSlots[n]=e>0?x(x({},g.Z.clone(t.textSlots[`c_${i}_${e-1}`])),{},{text:""}):g.Z.clone(v.td))}}if(i<n&&i>0&&!s.Z.tooSmall(t.area.w)){let e=0;for(let n=0;n<i;n++)e+=t.shapeProps.colWidths[n]*t.area.w/100;t.area.w=e}t.shapeProps.colWidths.length>i&&(t.shapeProps.colWidths=t.shapeProps.colWidths.slice(0,i));let l=t.area.w;s.Z.tooSmall(l)&&(l=1);for(let e=0;e<i&&e<r.length;e++)t.shapeProps.colWidths[e]=100*r[e]/l}function S(e,t,i,n){const r=[];let o=0,a=100;for(let e=0;e<n-1;e++){const i=t.area.h*t.shapeProps.rowWidths[e]/100;o+=i,r[e]=i}if(a=Math.max(t.area.h/(2*Math.max(1,n)),t.area.h-o),i>n&&i>0&&!s.Z.tooSmall(t.area.h)){for(let e=n-1;e<i-1;e++)r.push(a),t.area.h+=a;for(let e=n-1;e<i;e++)for(let i=0;i<t.shapeProps.columns;i++){const n=`c_${e}_${i}`;t.textSlots.hasOwnProperty(n)||(t.textSlots[n]=e>0?x(x({},g.Z.clone(t.textSlots[`c_${e-1}_${i}`])),{},{text:""}):g.Z.clone(v.td))}}if(i<n&&i>0&&!s.Z.tooSmall(t.area.h)){let e=0;for(let n=0;n<i;n++)e+=t.shapeProps.rowWidths[n]*t.area.h/100;t.area.h=e}t.shapeProps.rowWidths.length>i&&(t.shapeProps.rowWidths=t.shapeProps.rowWidths.slice(0,i));let l=t.area.h;s.Z.tooSmall(l)&&(l=1);for(let e=0;e<i&&e<r.length;e++)t.shapeProps.rowWidths[e]=100*r[e]/l}function I(e){if("both"===e.shapeProps.header&&e.shapeProps.cutCorner){const t=e.area.w*e.shapeProps.colWidths[0]/100,i=e.area.h*e.shapeProps.rowWidths[0]/100;return`M ${t} 0 L ${e.area.w} 0 L ${e.area.w} ${e.area.h} L 0 ${e.area.h}  L 0 ${i} L ${t} ${i} Z`}return`M 0 0 L ${e.area.w} 0 L ${e.area.w} ${e.area.h} L 0 ${e.area.h} Z`}function A(e){const t=[];let i=0,n=e.area.h,r=0,s=0;"columns-single"===e.shapeProps.header&&(s=1),"rows-single"===e.shapeProps.header&&(r=1);for(let o=r;o<e.shapeProps.rows;o++){const r=Math.min(n,o<e.shapeProps.rows-1?e.shapeProps.rowWidths[o]*e.area.h/100:n);let a=0,l=e.area.w;for(let n=s;n<e.shapeProps.columns;n++){const s=Math.min(l,n<e.shapeProps.columns-1?e.shapeProps.colWidths[n]*e.area.w/100:l);let c=a,h=a+s,d=i,u=i+r,p=0;"flat"===e.shapeProps.tableStyle&&(p=e.shapeProps.cellPadding),c=Math.min(c+p,h),d=Math.min(d+p,u),"both"===e.shapeProps.header&&e.shapeProps.cutCorner&&0===o&&0===n||t.push({row:o,col:n,area:{x:c,y:d,w:Math.max(0,h-p-c),h:Math.max(0,u-p-d)}}),a+=s,l-=s}i+=r,n-=r}return t}function _(e){const t=[];let i=0;for(let n=0;n<e.shapeProps.columns-1&&n<e.shapeProps.colWidths.length;n++)t[n]=e.shapeProps.colWidths[n]*e.area.w/100,i+=t[n];const n=Math.max(0,e.area.w-i);return t.push(n),t}function E(e,t){e.shapeProps.colWidths=[];for(let i=0;i<e.shapeProps.columns-1;i++){const n=s.Z.tooSmall(e.area.w)?1:e.area.w;e.shapeProps.colWidths[i]=100*t[i]/n}}function T(e){const t=[];let i=0;for(let n=0;n<e.shapeProps.rows-1&&n<e.shapeProps.rowWidths.length;n++)t[n]=e.shapeProps.rowWidths[n]*e.area.h/100,i+=t[n];const n=Math.max(0,e.area.h-i);return t.push(n),t}function M(e,t){e.shapeProps.rowWidths=[];for(let i=0;i<e.shapeProps.rows-1;i++){const n=s.Z.tooSmall(e.area.h)?1:e.area.h;e.shapeProps.rowWidths[i]=100*t[i]/n}}function $(e,t){const i=_(e),n=t<i.length?i[t]:i[i.length-1];i.splice(t,0,n),e.area.w+=n,e.shapeProps.columns+=1,E(e,i);for(let i=e.shapeProps.columns-1;i>=t;i--)for(let t=0;t<e.shapeProps.rows;t++)e.textSlots[`c_${t}_${i}`]=e.textSlots[`c_${t}_${i-1}`];for(let i=0;i<e.shapeProps.rows;i++)t<e.shapeProps.columns-1?e.textSlots[`c_${i}_${t}`]=x(x({},g.Z.clone(e.textSlots[`c_${i}_${t+1}`])),{},{text:""}):e.textSlots[`c_${i}_${t}`]=t>0?x(x({},g.Z.clone(e.textSlots[`c_${i}_${t-1}`])),{},{text:""}):g.Z.clone(v.td);return!0}function O(e,t){const i=T(e),n=t<i.length?i[t]:i[i.length-1];i.splice(t,0,n),e.area.h+=n,e.shapeProps.rows+=1,M(e,i);for(let i=e.shapeProps.rows-1;i>=t;i--)for(let t=0;t<e.shapeProps.columns;t++)e.textSlots[`c_${i}_${t}`]=e.textSlots[`c_${i-1}_${t}`];for(let i=0;i<e.shapeProps.columns;i++)t<e.shapeProps.rows-1?e.textSlots[`c_${t}_${i}`]=x(x({},g.Z.clone(e.textSlots[`c_${t+1}_${i}`])),{},{text:""}):e.textSlots[`c_${t}_${i}`]=t>0?x(x({},g.Z.clone(e.textSlots[`c_${t-1}_${i}`])),{},{text:""}):g.Z.clone(v.td);return!0}function D(e,t,i){return{group:"Tables",name:e,iconUrl:`assets/images/items/${t}`,item:{shapeProps:i},previewArea:{x:5,y:5,w:200,h:100},size:{w:200,h:100}}}const B={props:["item"],components:{AdvancedFill:r.ZP},shapeConfig:{shapeType:"vue",id:"uml_table",menuItems:[D("Table","table-simple.svg",{columns:3,rows:3,header:"none"}),D("Table with header","table-h-header.svg",{columns:3,rows:3,header:"columns"}),D("Table with vertical header","table-v-header.svg",{columns:3,rows:3,header:"rows"}),D("Table with double header","table-dbl-header.svg",{columns:3,rows:3,header:"both",cutCorner:!1}),D("Table with double header","table-dbl-header-2.svg",{columns:3,rows:3,header:"both",cutCorner:!0})],getPins:function(e){return{}},computeOutline:I,getTextSlots:function(e){return A(e).map((e=>({name:`c_${e.row}_${e.col}`,area:e.area})))},fixItem:function(e){if(e.shapeProps.columns<1&&(e.shapeProps.columns=1),e.shapeProps.rows<1&&(e.shapeProps.rows=1),e.shapeProps.colWidths.length>e.shapeProps.columns-1)e.shapeProps.colWidths=e.shapeProps.colWidths.slice(0,e.shapeProps.columns-1);else if(e.shapeProps.colWidths.length<e.shapeProps.columns-1){const t=e.shapeProps.columns-1-e.shapeProps.colWidths.length;let i=0;for(let t=0;t<e.shapeProps.colWidths.length;t++)i+=e.shapeProps.colWidths[t]*e.area.w/100;const n=e.area.w;if(s.Z.tooSmall(n)&&(n=1),t>0){const r=100*Math.max(0,e.area.w-i)/(n*(t+1));for(let i=0;i<t;i++)e.shapeProps.colWidths.push(r)}}if(e.shapeProps.rowWidths.length>e.shapeProps.rows-1)e.shapeProps.rowWidths=e.shapeProps.rowWidths.slice(0,e.shapeProps.rows-1);else if(e.shapeProps.rowWidths.length<e.shapeProps.rows-1){const t=e.shapeProps.rows-1-e.shapeProps.rowWidths.length;let i=0;for(let t=0;t<e.shapeProps.rowWidths.length;t++)i+=e.shapeProps.rowWidths[t]*e.area.h/100;const n=e.area.h;if(s.Z.tooSmall(n)&&(n=1),t>0){const r=100*Math.max(0,e.area.h-i)/(n*(t+1));for(let i=0;i<t;i++)e.shapeProps.rowWidths.push(r)}}},controlPoints:{make(e){const t={};let i=0;for(let n=0;n<e.shapeProps.columns-1;n++)i+=e.shapeProps.colWidths[n]*e.area.w/100,t[`c_${n}`]={x:s.Z.clamp(i,0,e.area.w),y:0};i=0;for(let n=0;n<e.shapeProps.rows-1;n++)i+=e.shapeProps.rowWidths[n]*e.area.h/100,t[`r_${n}`]={x:0,y:s.Z.clamp(i,0,e.area.h)};return t},handleDrag(e,t,i,n,r,o){if(t.startsWith("c_")){let n=i+r;const o=e.area.w,a=Math.max(1,e.shapeProps.columns);if(s.Z.tooSmall(o))return;const l=parseInt(t.substr(2));let c=0;for(let t=0;t<l;t++)c+=e.shapeProps.colWidths[t]*o/100;const h=Math.max(0,n-c),d=5/a,u=100-5/a;e.shapeProps.colWidths[l]=s.Z.clamp(100*h/o,d,u)}else if(t.startsWith("r_")){let i=n+o;const r=e.area.h,a=Math.max(1,e.shapeProps.rows);if(s.Z.tooSmall(r))return;const l=parseInt(t.substr(2));let c=0;for(let t=0;t<l;t++)c+=e.shapeProps.rowWidths[t]*r/100;const h=Math.max(0,i-c),d=5/a,u=100-5/a;e.shapeProps.rowWidths[l]=s.Z.clamp(100*h/r,d,u)}}},args:{tableStyle:{type:"choice",value:"simple",options:["simple","flat"],name:"Style"},columns:{type:"number",value:3,name:"Columns",min:1,max:w,onUpdate:k},rows:{type:"number",value:3,name:"Rows",min:1,max:w,onUpdate:S},fill:{type:"advanced-color",value:{type:"solid",color:"rgba(245, 245, 245, 1.0)"},name:"Fill"},stroke:{type:"color",value:"rgba(145, 178, 196, 1.0)",name:"Stroke",depends:{tableStyle:"simple"}},strokeSize:{type:"number",value:1,name:"Stroke size",depends:{tableStyle:"simple"}},cellPadding:{type:"number",value:2,name:"Cell padding",depends:{tableStyle:"flat"}},header:{type:"choice",value:"columns",options:["none","columns","columns-single","rows","rows-single","both"],name:"Header fill override"},headerFill:{type:"advanced-color",value:{type:"solid",color:"rgba(168, 193, 219, 1.0)"},name:"Header fill"},cutCorner:{type:"boolean",value:!1,name:"Cut corner",depends:{header:"both"}},oddEvenFill:{type:"boolean",value:!1,name:"Odd/even fill"},rowSecondaryFill:{type:"advanced-color",value:{type:"solid",color:"rgba(234, 241, 246, 1.0)"},name:"Row secondary fill",depends:{oddEvenFill:!0}},colWidths:{type:"custom",value:[33.3,33.3],hidden:!0},rowWidths:{type:"custom",value:[33.3,33.3],hidden:!0}},editorProps:{textSlotTabsDisabled:!0,contextMenu(e,t,i){const{row:n,col:r}=function(e,t,i){let n=0,r=0,s=0;for(let i=0;i<e.shapeProps.columns-1&&(r=i,s+=e.shapeProps.colWidths[i]*e.area.w/100,!(t<s));i++);t>s&&(r+=1),s=0;for(let t=0;t<e.shapeProps.rows-1&&(n=t,s+=e.shapeProps.rowWidths[t]*e.area.h/100,!(i<s));t++);return i>s&&(n+=1),{row:n,col:r}}(i,e,t),s=n+1,o=r+1;let a=[{name:`Insert column before #${o}`,clicked:()=>$(i,r)},{name:`Insert column after #${o}`,clicked:()=>$(i,r+1)},{name:`Insert row before #${s}`,clicked:()=>O(i,n)},{name:`Insert row after #${s}`,clicked:()=>O(i,n+1)}];return i.shapeProps.columns>1&&a.push({name:`Delete column #${o}`,iconClass:"fas fa-trash",clicked:()=>function(e,t){if(e.shapeProps.columns<2)return!1;const i=_(e);if(e.shapeProps.columns-=1,t<e.shapeProps.colWidths.length){const n=i[t];e.area.w=Math.max(0,e.area.w-n),e.shapeProps.colWidths.splice(t,1),i.splice(t,1)}else t===e.shapeProps.colWidths.length&&(e.shapeProps.colWidths.length-=1,e.area.w=Math.max(0,e.area.w-i[i.length-1]));E(e,i);for(let i=t;i<e.shapeProps.columns;i++)for(let t=0;t<e.shapeProps.rows;t++)e.textSlots[`c_${t}_${i}`]=e.textSlots[`c_${t}_${i+1}`];for(let t=0;t<e.shapeProps.rows;t++)delete e.textSlots[`c_${t}_${e.shapeProps.columns}`];return!0}(i,r)}),i.shapeProps.rows>1&&a.push({name:`Delete row #${s}`,iconClass:"fas fa-trash",clicked:()=>function(e,t){if(e.shapeProps.rows<2)return!1;const i=T(e);e.shapeProps.rows-=1,t<e.shapeProps.rowWidths.length?(e.area.h=Math.max(0,e.area.h-i[t]),e.shapeProps.rowWidths.splice(t,1),i.splice(t,1)):t===e.shapeProps.rowWidths.length&&(e.shapeProps.rowWidths.length-=1,e.area.h=Math.max(0,e.area.h-i[i.length-1])),M(e,i);for(let i=t;i<e.shapeProps.rows;i++)for(let t=0;t<e.shapeProps.columns;t++)e.textSlots[`c_${i}_${t}`]=e.textSlots[`c_${i+1}_${t}`];for(let t=0;t<e.shapeProps.columns;t++)delete e.textSlots[`c_${e.shapeProps.rows}_${t}`];return!0}(i,n)}),a=a.concat([{name:"Copy text style to column",clicked:()=>function(e,t,i){const n=g.Z.clone(e.textSlots[`c_${t}_${i}`]);for(let r=0;r<e.shapeProps.rows;r++)if(r!=t){const t=`c_${r}_${i}`,s=e.textSlots[t].text;e.textSlots[t]=x(x({},n),{},{text:s})}return!0}(i,n,r)},{name:"Copy text style to row",clicked:()=>function(e,t,i){const n=g.Z.clone(e.textSlots[`c_${t}_${i}`]);for(let r=0;r<e.shapeProps.columns;r++)if(r!=i){const i=`c_${t}_${r}`,s=e.textSlots[i].text;e.textSlots[i]=x(x({},n),{},{text:s})}return!0}(i,n,r)},{name:"Copy text style to all cells",clicked:()=>function(e,t,i){const n=g.Z.clone(e.textSlots[`c_${t}_${i}`]);for(let r=0;r<e.shapeProps.rows;r++)for(let s=0;s<e.shapeProps.columns;s++)if(s!==i||r!==t){const t=`c_${r}_${s}`,i=e.textSlots[t].text;e.textSlots[t]=x(x({},n),{},{text:i})}return!0}(i,n,r)}]),"none"!==i.shapeProps.header&&(a=a.concat([{name:"Copy text style to header cells",clicked:()=>function(e,t,i){const n=e.shapeProps.header,r=g.Z.clone(e.textSlots[`c_${t}_${i}`]);for(let s=0;s<e.shapeProps.rows;s++)for(let o=0;o<e.shapeProps.columns;o++)if(!(("columns"!==n&&"both"!==n||0!==s)&&("rows"!==n&&"both"!==n||0!==o)||o===i&&s===t)){const t=`c_${s}_${o}`,i=e.textSlots[t].text;e.textSlots[t]=x(x({},r),{},{text:i})}return!0}(i,n,r)},{name:"Copy text style to regular cells",clicked:()=>function(e,t,i){const n=e.shapeProps.header,r=g.Z.clone(e.textSlots[`c_${t}_${i}`]);for(let s=0;s<e.shapeProps.rows;s++)for(let o=0;o<e.shapeProps.columns;o++)if(("columns"!==n&&"both"!==n||0!==s)&&("rows"!==n&&"both"!==n||0!==o)&&(o!==i||s!==t)){const t=`c_${s}_${o}`,i=e.textSlots[t].text;e.textSlots[t]=x(x({},r),{},{text:i})}return!0}(i,n,r)}])),[{name:"Table",subOptions:a}]},shapePropsEditor:{component:f},editBoxControls:(e,t)=>{const i=[];return t.shapeProps.columns<w&&i.push({name:"Add Column",type:"button",hPlace:"right",vPlace:"center",iconClass:"fa-solid fa-plus",position:{x:30,y:0},click:()=>{!function(e,t){t.shapeProps.columns>=w||C(e,t,t.shapeProps.columns+1)}(e,t)}}),t.shapeProps.columns>1&&i.push({name:"Remove Column",type:"button",hPlace:"right",vPlace:"top",iconClass:"fa-solid fa-minus",position:{x:0,y:30},click:()=>{!function(e,t){t.shapeProps.columns<=1||C(e,t,t.shapeProps.columns-1)}(e,t)}}),t.shapeProps.rows<w&&i.push({name:"Add Row",type:"button",hPlace:"center",vPlace:"bottom",iconClass:"fa-solid fa-plus",position:{x:0,y:30},click:()=>{!function(e,t){t.shapeProps.rows>=w||P(e,t,t.shapeProps.rows+1)}(e,t)}}),t.shapeProps.rows>1&&i.push({name:"Remove Row",type:"button",hPlace:"left",vPlace:"bottom",iconClass:"fa-solid fa-minus",position:{x:30,y:0},click:()=>{!function(e,t){t.shapeProps.rows<=1||P(e,t,t.shapeProps.rows-1)}(e,t)}}),i}}},data:()=>({}),computed:{svgFill(){return(0,r.pz)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`)},outlinePath(){return I(this.item)},gridLines(){const e=[];let t=0;const i="both"===this.item.shapeProps.header&&this.item.shapeProps.cutCorner,n=this.item.area.w*this.item.shapeProps.colWidths[0]/100,r=this.item.area.h*this.item.shapeProps.rowWidths[0]/100;for(let r=1;r<this.item.shapeProps.rows;r++)t+=this.item.shapeProps.rowWidths[r-1]*this.item.area.h/100,e.push({x1:1===r&&i?n:0,x2:this.item.area.w,y1:t,y2:t});t=0;for(let n=1;n<this.item.shapeProps.columns;n++)t+=this.item.shapeProps.colWidths[n-1]*this.item.area.w/100,e.push({x1:t,x2:t,y1:1===n&&i?r:0,y2:this.item.area.h});return e},cells(){const e=(0,r.pz)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`),t=(0,r.pz)(this.item.shapeProps.headerFill,`fill-pattern-${this.item.id}-header`),i=(0,r.pz)(this.item.shapeProps.rowSecondaryFill,`fill-pattern-${this.item.id}-secondary-fill`),n=this.item.shapeProps.header;return A(this.item).map((r=>((0!==r.row||"columns"!==n&&"columns-single"!==n&&"both"!==n)&&(0!==r.col||"rows"!==n&&"rows-single"!==n&&"both"!==n)?this.item.shapeProps.oddEvenFill&&r.row%2==1?r.fill=i:r.fill=e:r.fill=t,r)))}}},L=(0,m.Z)(B,n,[],!1,null,null,null).exports},6453:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",[i("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),i("path",{attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,fill:e.svgFill}}),e._v(" "),"view"===e.mode?i("foreignObject",{attrs:{x:e.item.shapeProps.cornerRadius,y:0,width:Math.max(0,e.item.area.w-2*e.item.shapeProps.cornerRadius),height:e.item.area.h}},[e.item.shapeProps.multiline?i("textarea",{style:e.inputStyle,attrs:{id:"textfield-item-"+e.item.id},domProps:{value:e.itemInputValue},on:{blur:e.onBlur,input:e.onTextfieldInput}}):i("input",{style:e.inputStyle,attrs:{id:"textfield-item-"+e.item.id,type:e.item.shapeProps.type},domProps:{value:e.itemInputValue},on:{blur:e.onBlur,input:e.onTextfieldInput}})]):e._e(),e._v(" "),"placeholder"===e.hideTextSlot||e.item.args&&e.item.args.value?e._e():i("foreignObject",{attrs:{x:e.item.shapeProps.cornerRadius,y:0,width:Math.max(0,e.item.area.w-2*e.item.shapeProps.cornerRadius),height:e.item.area.h},on:{click:e.onPlaceholderClick}},[i("div",{staticClass:"item-text-container",style:e.placeholderTextStyle,attrs:{xmlns:"http://www.w3.org/1999/xhtml"},domProps:{innerHTML:e._s(e.sanitizedBodyText)}})])],1)};n._withStripped=!0;var r=i(9498),s=i(9421),o=i(5635),a=i(8595),l=i(3762),c=i(6085);function h(e){const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.cornerRadius,e.area.w/2,e.area.h/2);return`M ${t-n} ${i}  L ${n} ${i} a ${n} ${n} 0 0 1 ${-n} ${-n}  L 0 ${n}  a ${n} ${n} 0 0 1 ${n} ${-n}   L ${t-n} 0   a ${n} ${n} 0 0 1 ${n} ${n}  L ${t} ${i-n}   a ${n} ${n} 0 0 1 ${-n} ${n} Z`}const d={props:["item","editorId","mode"],components:{AdvancedFill:s.ZP},shapeConfig:{shapeType:"vue",id:"textfield",menuItems:[{group:"General",name:"Textfield",iconUrl:"assets/images/items/textfield.svg",item:{cursor:"text",textSlots:{placeholder:{text:"",color:"rgba(160,160,160,1.0)",halign:"left"}}},previewArea:{x:5,y:5,w:200,h:40},size:{w:200,h:40}}],getPins:e=>(0,r.Fb)(e),getTextSlots(e){const t=Math.max(0,e.shapeProps.cornerRadius);return[{name:"placeholder",area:{x:t,y:0,w:Math.max(0,e.area.w-2*t),h:e.area.h}}]},computePath:h,editorProps:{customTextRendering:!0,disableEventLayer:!0},controlPoints:{make:e=>({cornerRadius:{x:Math.min(e.area.w,Math.max(e.area.w-e.shapeProps.cornerRadius,e.area.w/2)),y:0}}),handleDrag(e,t,i,n,r,s){"cornerRadius"===t&&(e.shapeProps.cornerRadius=Math.max(0,myMath.roundPrecise(e.area.w-Math.max(e.area.w/2,i+r),1)))}},args:{fill:{type:"advanced-color",value:{type:"solid",color:"rgba(255,255,255,1.0)"},name:"Fill"},textColor:{type:"color",value:"rgba(80, 80, 80, 1.0)",name:"Text color"},strokeColor:{type:"color",value:"rgba(80, 80, 80, 1.0)",name:"Stroke color"},strokeSize:{type:"number",value:1,name:"Stroke size"},cornerRadius:{type:"number",value:5,name:"Corner radius",min:0},multiline:{type:"boolean",value:!1,name:"Multiline"},type:{type:"choice",value:"text",name:"Type",options:["text","number"],depends:{multiline:!1}}}},beforeMount(){a.Z.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChanged),a.Z.textSlot.triggered.specific.$on(this.editorId,this.item.id,this.onItemTextSlotEditTriggered),a.Z.textSlot.canceled.specific.$on(this.editorId,this.item.id,this.onItemTextSlotEditCanceled)},beforeDestroy(){a.Z.textSlot.triggered.specific.$off(this.editorId,this.item.id,this.onItemTextSlotEditTriggered),a.Z.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChanged),a.Z.textSlot.canceled.specific.$off(this.editorId,this.item.id,this.onItemTextSlotEditCanceled)},data(){return{hideTextSlot:null,placeholderTextStyle:this.createPlaceholderTextStyle(),inputStyle:this.createInputStyle()}},methods:{createInputStyle(){let e={};return Math.max(0,this.item.shapeProps.cornerRadius),this.item.textSlots&&this.item.textSlots.placeholder&&(e=(0,o.A)(this.item.textSlots.placeholder)),e.display="block",e.width="100%",e.height="100%",e.color=this.item.shapeProps.color,e.border="none",e.background="none",e.outline="none",e},onPlaceholderClick(){"view"===this.mode&&(this.hideTextSlot="placeholder",document.getElementById(`textfield-item-${this.item.id}`).focus())},onBlur(e){"view"===this.mode&&(e.target.value||(this.hideTextSlot=null))},onItemTextSlotEditTriggered(e,t,i,n){this.hideTextSlot=t},onItemTextSlotEditCanceled(e,t){this.hideTextSlot=null},onItemChanged(){this.placeholderTextStyle=this.createPlaceholderTextStyle(),this.$forceUpdate()},createPlaceholderTextStyle(){let e={};const t=Math.max(0,this.item.shapeProps.cornerRadius);return this.item.textSlots&&this.item.textSlots.placeholder&&(e=(0,o.A)(this.item.textSlots.placeholder),e.width=`${Math.max(0,this.item.area.w-2*t)}px`,e.height=`${this.item.area.h}px`,e.cursor=this.item.cursor),e},onTextfieldInput(e){this.item.args||(this.item.args={}),this.item.args.value=e.target.value,a.Z.item.userEvent.$emit(this.editorId,this.item.id,c.Z.standardEvents.valueChange.id,this.item.args.value)}},computed:{shapePath(){return h(this.item)},svgFill(){return(0,s.pz)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`)},sanitizedBodyText(){return this.item.textSlots&&this.item.textSlots.placeholder?(0,l.Z)(this.item.textSlots.placeholder.text):""},itemInputValue(){return this.item.args&&this.item.args.hasOwnProperty("value")?this.item.args.value:""}}},u=(0,i(1900).Z)(d,n,[],!1,null,null,null).exports},8723:(e,t,i)=>{"use strict";i.d(t,{V:()=>s,Z:()=>a});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",[i("advanced-fill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),i("path",{attrs:{d:e.shapePath,fill:e.fill,stroke:e.item.shapeProps.strokeColor,"stroke-width":e.item.shapeProps.strokeSize+"px"}})],1)};n._withStripped=!0;var r=i(9421);function s(e,t){const i=t/4,n=2*t/3,r=Math.min(e/4,t/8);return`M ${e/2} ${2*r}  L ${e/2} ${n}  M 0 ${i} L ${e} ${i}  M 0 ${t} L ${e/2} ${n} M ${e/2} ${n} L ${e} ${t}  M ${e/2} ${r} m ${r} 0 a ${r},${r} 0 1,0 -${2*r},0 a ${r},${r} 0 1,0  ${2*r},0`}const o={props:["item"],shapeConfig:{shapeType:"vue",components:{AdvancedFill:r.ZP},id:"uml_actor",menuItems:[{group:"UML",name:"Actor",iconUrl:"assets/images/items/uml-actor.svg",previewArea:{x:0,y:0,w:30,h:90,r:0}}],computeOutline:e=>`M 0 0  l ${e.area.w} 0  l 0 ${e.area.h}  l ${-e.area.w} 0 z`,getTextSlots:e=>[],args:{fill:{name:"Fill",type:"advanced-color",value:{type:"solid",color:"rgba(240, 240, 240, 1.0)"}},strokeColor:{name:"Stroke",type:"color",value:"rgba(0, 0, 0, 1)"},strokeSize:{name:"Stroke Size",type:"number",value:1}}},computed:{shapePath(){return s(this.item.area.w,this.item.area.h)},fill(){return(0,r.pz)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`)}}},a=(0,i(1900).Z)(o,n,[],!1,null,null,null).exports},2401:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",[i("AdvancedFill",{attrs:{fillId:"fill-pattern-"+e.item.id,fill:e.item.shapeProps.fill,area:e.rectArea}}),e._v(" "),i("path",{attrs:{d:e.shapePath,stroke:e.shapeStroke,"stroke-width":e.item.shapeProps.strokeSize+"px",fill:e.svgFill}}),e._v(" "),i("line",{attrs:{x1:e.item.area.w/2,y1:Math.max(0,Math.min(e.item.shapeProps.size,e.item.area.h)),x2:e.item.area.w/2,y2:e.item.area.h,stroke:e.item.shapeProps.strokeColor,"stroke-dasharray":e.strokeDashArray,"stroke-dashoffset":e.item.meta.strokeOffset,"stroke-width":e.item.shapeProps.strokeSize+"px"}})],1)};n._withStripped=!0;var r=i(3590),s=i(8595),o=i(9421),a=i(4502),l=i(9498),c=i(8723);const h={props:["item","editorId"],components:{AdvancedFill:o.ZP},shapeConfig:{shapeType:"vue",id:"uml_lifeline",menuItems:[{group:"UML",name:"Lifeline",iconUrl:"assets/images/items/lifeline-rect.svg",item:{shapeProps:{lifelineType:"rect"}},size:{w:120,h:300}},{group:"UML",name:"Lifeline Entity",iconUrl:"assets/images/items/lifeline-entity.svg",item:{area:{x:0,y:0,w:60,h:200},shapeProps:{lifelineType:"entity"}},size:{w:80,h:300}},{group:"UML",name:"Lifeline Border",iconUrl:"assets/images/items/lifeline-border.svg",item:{area:{x:0,y:0,w:60,h:200},shapeProps:{lifelineType:"border"}},size:{w:80,h:300}},{group:"UML",name:"Lifeline Control",iconUrl:"assets/images/items/lifeline-control.svg",item:{area:{x:0,y:0,w:60,h:200},shapeProps:{lifelineType:"control"}},size:{w:80,h:300}},{group:"UML",name:"Lifeline Actor",iconUrl:"assets/images/items/lifeline-actor.svg",item:{area:{x:0,y:0,w:60,h:200},shapeProps:{lifelineType:"actor"}},size:{w:20,h:300},previewArea:{x:0,y:0,w:20,h:90,r:0}}],computeOutline(e){const t=r.Z.clamp(e.shapeProps.size,0,e.area.h);return`M ${e.area.w/2} ${t} L ${e.area.w/2} ${e.area.h} `+(0,l.Qb)(e.area.w,t,e.shapeProps.cornerRadius)},getPins:e=>[],getTextSlots(e){const t=r.Z.clamp(e.shapeProps.size,0,e.area.h);let i=null;if("entity"===e.shapeProps.lifelineType||"control"===e.shapeProps.lifelineType){const n=Math.min(e.area.w/2,t/2);i={x:e.area.w/2-n,y:0,w:2*n,h:2*n}}else if("border"===e.shapeProps.lifelineType){const n=Math.min(3*e.area.w/4/2,t/2);i={x:e.area.w/2-n,y:0,w:2*n,h:2*n}}else i={x:0,y:0,w:e.area.w,h:t};return[{name:"body",area:i}]},controlPoints:{make(e){const t={size:{x:e.area.w/2,y:r.Z.clamp(e.shapeProps.size,0,e.area.h)}};return"rect"===e.shapeProps.lifelineType&&(t.cornerRadius={x:Math.min(e.area.w,Math.max(e.area.w-e.shapeProps.cornerRadius,e.area.w/2)),y:0}),t},handleDrag(e,t,i,n,s,o){if("cornerRadius"===t)e.shapeProps.cornerRadius=Math.max(0,r.Z.roundPrecise(e.area.w-Math.max(e.area.w/2,i+s),1));else if("size"===t){if("entity"===e.shapeProps.lifelineType||"control"===e.shapeProps.lifelineType)return void(e.shapeProps.size=r.Z.clamp(n+o,0,Math.min(e.area.h,e.area.w)));if("border"===e.shapeProps.lifelineType)return void(e.shapeProps.size=r.Z.clamp(n+o,0,Math.min(e.area.h,3*e.area.w/4)));e.shapeProps.size=r.Z.clamp(n+o,0,e.area.h)}}},args:{size:{name:"Size",type:"number",value:40,min:0},fill:{name:"Fill",type:"advanced-color",value:{type:"solid",color:"rgba(240, 240, 240, 1.0)"}},lifelineType:{name:"Type",type:"choice",value:"rect",options:["rect","entity","border","control","actor"]},strokeColor:{name:"Stroke",type:"color",value:"rgba(0, 0, 0, 1)"},rectStroke:{name:"Rect stroke",type:"boolean",value:!0,depends:{lifelineType:"rect"}},strokePattern:{type:"stroke-pattern",value:"dashed",name:"Stroke pattern"},strokeSize:{name:"Stroke Size",type:"number",value:2},cornerRadius:{name:"Stroke Size",type:"number",value:1,depends:{type:"rect"},min:0}}},beforeMount(){s.Z.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChanged)},beforeDestroy(){s.Z.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChanged)},methods:{onItemChanged(){this.$forceUpdate()}},computed:{shapePath(){return function(e){const t=r.Z.clamp(e.shapeProps.size,0,e.area.h);if("entity"===e.shapeProps.lifelineType){const i=Math.min(e.area.w/2,t/2);return`M ${e.area.w/2} ${i}  m ${i}, 0 a ${i},${i} 0 1,0 -${2*i},0 a ${i},${i} 0 1,0  ${2*i},0  M ${e.area.w/2-i} ${2*i} l ${2*i} 0`}if("border"===e.shapeProps.lifelineType){let i=Math.min(e.area.w/2,t/2),n=i/3;const r=e.area.w/2;return i+n>r&&(i=3*r/4,n=r/4),`M ${e.area.w/2} ${i}  m ${i}, 0 a ${i},${i} 0 1,0 -${2*i},0 a ${i},${i} 0 1,0  ${2*i},0 M ${e.area.w/2-i-n} 0 l 0 ${2*i}M ${e.area.w/2-i-n} ${i} l ${n} 0`}if("control"===e.shapeProps.lifelineType){const i=Math.min(e.area.w/2,t/2),n=i/4;return`M ${e.area.w/2} ${i}  m ${i}, 0 a ${i},${i} 0 1,0 -${2*i},0 a ${i},${i} 0 1,0  ${2*i},0 M ${e.area.w/2} 0 l ${n} ${-n} M ${e.area.w/2} 0 l ${n} ${n}`}return"actor"===e.shapeProps.lifelineType?(0,c.V)(e.area.w,t):(0,l.Qb)(e.area.w,t,e.shapeProps.cornerRadius)}(this.item)},strokeDashArray(){return a.Z.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize)},svgFill(){return(0,o.pz)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`)},rectArea(){const e=r.Z.clamp(this.item.shapeProps.size,0,this.item.area.h);return{x:0,y:0,w:this.item.area.w,h:e}},shapeStroke(){return"rect"!==this.item.shapeProps.lifelineType||this.item.shapeProps.rectStroke?this.item.shapeProps.strokeColor:"none"}}},d=(0,i(1900).Z)(h,n,[],!1,null,null,null).exports},1900:(e,t,i)=>{"use strict";function n(e,t,i,n,r,s,o,a){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):r&&(l=a?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var h=c.render;c.render=function(e,t){return l.call(t),h(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}i.d(t,{Z:()=>n})},2934:function(e,t,i){e.exports=function(){"use strict";var e=Object.freeze({});function t(e){return null==e}function n(e){return null!=e}function r(e){return!0===e}function s(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function o(e){return null!==e&&"object"==typeof e}var a=Object.prototype.toString;function l(e){return"[object Object]"===a.call(e)}function c(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function h(e){return n(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function d(e){return null==e?"":Array.isArray(e)||l(e)&&e.toString===a?JSON.stringify(e,null,2):String(e)}function u(e){var t=parseFloat(e);return isNaN(t)?e:t}function p(e,t){for(var i=Object.create(null),n=e.split(","),r=0;r<n.length;r++)i[n[r]]=!0;return t?function(e){return i[e.toLowerCase()]}:function(e){return i[e]}}var m=p("slot,component",!0),f=p("key,ref,slot,slot-scope,is");function g(e,t){if(e.length){var i=e.indexOf(t);if(i>-1)return e.splice(i,1)}}var v=Object.prototype.hasOwnProperty;function y(e,t){return v.call(e,t)}function x(e){var t=Object.create(null);return function(i){return t[i]||(t[i]=e(i))}}var b=/-(\w)/g,w=x((function(e){return e.replace(b,(function(e,t){return t?t.toUpperCase():""}))})),C=x((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),P=/\B([A-Z])/g,k=x((function(e){return e.replace(P,"-$1").toLowerCase()})),S=Function.prototype.bind?function(e,t){return e.bind(t)}:function(e,t){function i(i){var n=arguments.length;return n?n>1?e.apply(t,arguments):e.call(t,i):e.call(t)}return i._length=e.length,i};function I(e,t){t=t||0;for(var i=e.length-t,n=new Array(i);i--;)n[i]=e[i+t];return n}function A(e,t){for(var i in t)e[i]=t[i];return e}function _(e){for(var t={},i=0;i<e.length;i++)e[i]&&A(t,e[i]);return t}function E(e,t,i){}var T=function(e,t,i){return!1},M=function(e){return e};function $(e,t){if(e===t)return!0;var i=o(e),n=o(t);if(!i||!n)return!i&&!n&&String(e)===String(t);try{var r=Array.isArray(e),s=Array.isArray(t);if(r&&s)return e.length===t.length&&e.every((function(e,i){return $(e,t[i])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(r||s)return!1;var a=Object.keys(e),l=Object.keys(t);return a.length===l.length&&a.every((function(i){return $(e[i],t[i])}))}catch(e){return!1}}function O(e,t){for(var i=0;i<e.length;i++)if($(e[i],t))return i;return-1}function D(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var B="data-server-rendered",L=["component","directive","filter"],R=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],N={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:T,isReservedAttr:T,isUnknownElement:T,getTagNamespace:E,parsePlatformTagName:M,mustUseProp:T,async:!0,_lifecycleHooks:R},Z=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function F(e,t,i,n){Object.defineProperty(e,t,{value:i,enumerable:!!n,writable:!0,configurable:!0})}var j,z=new RegExp("[^"+Z.source+".$_\\d]"),U="__proto__"in{},H="undefined"!=typeof window,q="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,W=q&&WXEnvironment.platform.toLowerCase(),V=H&&window.navigator.userAgent.toLowerCase(),G=V&&/msie|trident/.test(V),K=V&&V.indexOf("msie 9.0")>0,J=V&&V.indexOf("edge/")>0,Y=(V&&V.indexOf("android"),V&&/iphone|ipad|ipod|ios/.test(V)||"ios"===W),Q=(V&&/chrome\/\d+/.test(V),V&&/phantomjs/.test(V),V&&V.match(/firefox\/(\d+)/)),X={}.watch,ee=!1;if(H)try{var te={};Object.defineProperty(te,"passive",{get:function(){ee=!0}}),window.addEventListener("test-passive",null,te)}catch(e){}var ie=function(){return void 0===j&&(j=!H&&!q&&void 0!==i.g&&i.g.process&&"server"===i.g.process.env.VUE_ENV),j},ne=H&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function re(e){return"function"==typeof e&&/native code/.test(e.toString())}var se,oe="undefined"!=typeof Symbol&&re(Symbol)&&"undefined"!=typeof Reflect&&re(Reflect.ownKeys);se="undefined"!=typeof Set&&re(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var ae=E,le=0,ce=function(){this.id=le++,this.subs=[]};ce.prototype.addSub=function(e){this.subs.push(e)},ce.prototype.removeSub=function(e){g(this.subs,e)},ce.prototype.depend=function(){ce.target&&ce.target.addDep(this)},ce.prototype.notify=function(){for(var e=this.subs.slice(),t=0,i=e.length;t<i;t++)e[t].update()},ce.target=null;var he=[];function de(e){he.push(e),ce.target=e}function ue(){he.pop(),ce.target=he[he.length-1]}var pe=function(e,t,i,n,r,s,o,a){this.tag=e,this.data=t,this.children=i,this.text=n,this.elm=r,this.ns=void 0,this.context=s,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},me={child:{configurable:!0}};me.child.get=function(){return this.componentInstance},Object.defineProperties(pe.prototype,me);var fe=function(e){void 0===e&&(e="");var t=new pe;return t.text=e,t.isComment=!0,t};function ge(e){return new pe(void 0,void 0,void 0,String(e))}function ve(e){var t=new pe(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var ye=Array.prototype,xe=Object.create(ye);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){var t=ye[e];F(xe,e,(function(){for(var i=[],n=arguments.length;n--;)i[n]=arguments[n];var r,s=t.apply(this,i),o=this.__ob__;switch(e){case"push":case"unshift":r=i;break;case"splice":r=i.slice(2)}return r&&o.observeArray(r),o.dep.notify(),s}))}));var be=Object.getOwnPropertyNames(xe),we=!0;function Ce(e){we=e}var Pe=function(e){var t;this.value=e,this.dep=new ce,this.vmCount=0,F(e,"__ob__",this),Array.isArray(e)?(U?(t=xe,e.__proto__=t):function(e,t,i){for(var n=0,r=i.length;n<r;n++){var s=i[n];F(e,s,t[s])}}(e,xe,be),this.observeArray(e)):this.walk(e)};function ke(e,t){var i;if(o(e)&&!(e instanceof pe))return y(e,"__ob__")&&e.__ob__ instanceof Pe?i=e.__ob__:we&&!ie()&&(Array.isArray(e)||l(e))&&Object.isExtensible(e)&&!e._isVue&&(i=new Pe(e)),t&&i&&i.vmCount++,i}function Se(e,t,i,n,r){var s=new ce,o=Object.getOwnPropertyDescriptor(e,t);if(!o||!1!==o.configurable){var a=o&&o.get,l=o&&o.set;a&&!l||2!==arguments.length||(i=e[t]);var c=!r&&ke(i);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=a?a.call(e):i;return ce.target&&(s.depend(),c&&(c.dep.depend(),Array.isArray(t)&&function e(t){for(var i=void 0,n=0,r=t.length;n<r;n++)(i=t[n])&&i.__ob__&&i.__ob__.dep.depend(),Array.isArray(i)&&e(i)}(t))),t},set:function(t){var n=a?a.call(e):i;t===n||t!=t&&n!=n||a&&!l||(l?l.call(e,t):i=t,c=!r&&ke(t),s.notify())}})}}function Ie(e,t,i){if(Array.isArray(e)&&c(t))return e.length=Math.max(e.length,t),e.splice(t,1,i),i;if(t in e&&!(t in Object.prototype))return e[t]=i,i;var n=e.__ob__;return e._isVue||n&&n.vmCount?i:n?(Se(n.value,t,i),n.dep.notify(),i):(e[t]=i,i)}function Ae(e,t){if(Array.isArray(e)&&c(t))e.splice(t,1);else{var i=e.__ob__;e._isVue||i&&i.vmCount||y(e,t)&&(delete e[t],i&&i.dep.notify())}}Pe.prototype.walk=function(e){for(var t=Object.keys(e),i=0;i<t.length;i++)Se(e,t[i])},Pe.prototype.observeArray=function(e){for(var t=0,i=e.length;t<i;t++)ke(e[t])};var _e=N.optionMergeStrategies;function Ee(e,t){if(!t)return e;for(var i,n,r,s=oe?Reflect.ownKeys(t):Object.keys(t),o=0;o<s.length;o++)"__ob__"!==(i=s[o])&&(n=e[i],r=t[i],y(e,i)?n!==r&&l(n)&&l(r)&&Ee(n,r):Ie(e,i,r));return e}function Te(e,t,i){return i?function(){var n="function"==typeof t?t.call(i,i):t,r="function"==typeof e?e.call(i,i):e;return n?Ee(n,r):r}:t?e?function(){return Ee("function"==typeof t?t.call(this,this):t,"function"==typeof e?e.call(this,this):e)}:t:e}function Me(e,t){var i=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return i?function(e){for(var t=[],i=0;i<e.length;i++)-1===t.indexOf(e[i])&&t.push(e[i]);return t}(i):i}function $e(e,t,i,n){var r=Object.create(e||null);return t?A(r,t):r}_e.data=function(e,t,i){return i?Te(e,t,i):t&&"function"!=typeof t?e:Te(e,t)},R.forEach((function(e){_e[e]=Me})),L.forEach((function(e){_e[e+"s"]=$e})),_e.watch=function(e,t,i,n){if(e===X&&(e=void 0),t===X&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var r={};for(var s in A(r,e),t){var o=r[s],a=t[s];o&&!Array.isArray(o)&&(o=[o]),r[s]=o?o.concat(a):Array.isArray(a)?a:[a]}return r},_e.props=_e.methods=_e.inject=_e.computed=function(e,t,i,n){if(!e)return t;var r=Object.create(null);return A(r,e),t&&A(r,t),r},_e.provide=Te;var Oe=function(e,t){return void 0===t?e:t};function De(e,t,i){if("function"==typeof t&&(t=t.options),function(e,t){var i=e.props;if(i){var n,r,s={};if(Array.isArray(i))for(n=i.length;n--;)"string"==typeof(r=i[n])&&(s[w(r)]={type:null});else if(l(i))for(var o in i)r=i[o],s[w(o)]=l(r)?r:{type:r};e.props=s}}(t),function(e,t){var i=e.inject;if(i){var n=e.inject={};if(Array.isArray(i))for(var r=0;r<i.length;r++)n[i[r]]={from:i[r]};else if(l(i))for(var s in i){var o=i[s];n[s]=l(o)?A({from:s},o):{from:o}}}}(t),function(e){var t=e.directives;if(t)for(var i in t){var n=t[i];"function"==typeof n&&(t[i]={bind:n,update:n})}}(t),!t._base&&(t.extends&&(e=De(e,t.extends,i)),t.mixins))for(var n=0,r=t.mixins.length;n<r;n++)e=De(e,t.mixins[n],i);var s,o={};for(s in e)a(s);for(s in t)y(e,s)||a(s);function a(n){var r=_e[n]||Oe;o[n]=r(e[n],t[n],i,n)}return o}function Be(e,t,i,n){if("string"==typeof i){var r=e[t];if(y(r,i))return r[i];var s=w(i);if(y(r,s))return r[s];var o=C(s);return y(r,o)?r[o]:r[i]||r[s]||r[o]}}function Le(e,t,i,n){var r=t[e],s=!y(i,e),o=i[e],a=Fe(Boolean,r.type);if(a>-1)if(s&&!y(r,"default"))o=!1;else if(""===o||o===k(e)){var l=Fe(String,r.type);(l<0||a<l)&&(o=!0)}if(void 0===o){o=function(e,t,i){if(y(t,"default")){var n=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[i]&&void 0!==e._props[i]?e._props[i]:"function"==typeof n&&"Function"!==Ne(t.type)?n.call(e):n}}(n,r,e);var c=we;Ce(!0),ke(o),Ce(c)}return o}var Re=/^\s*function (\w+)/;function Ne(e){var t=e&&e.toString().match(Re);return t?t[1]:""}function Ze(e,t){return Ne(e)===Ne(t)}function Fe(e,t){if(!Array.isArray(t))return Ze(t,e)?0:-1;for(var i=0,n=t.length;i<n;i++)if(Ze(t[i],e))return i;return-1}function je(e,t,i){de();try{if(t)for(var n=t;n=n.$parent;){var r=n.$options.errorCaptured;if(r)for(var s=0;s<r.length;s++)try{if(!1===r[s].call(n,e,t,i))return}catch(e){Ue(e,n,"errorCaptured hook")}}Ue(e,t,i)}finally{ue()}}function ze(e,t,i,n,r){var s;try{(s=i?e.apply(t,i):e.call(t))&&!s._isVue&&h(s)&&!s._handled&&(s.catch((function(e){return je(e,n,r+" (Promise/async)")})),s._handled=!0)}catch(e){je(e,n,r)}return s}function Ue(e,t,i){if(N.errorHandler)try{return N.errorHandler.call(null,e,t,i)}catch(t){t!==e&&He(t)}He(e)}function He(e,t,i){if(!H&&!q||"undefined"==typeof console)throw e;console.error(e)}var qe,We=!1,Ve=[],Ge=!1;function Ke(){Ge=!1;var e=Ve.slice(0);Ve.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!=typeof Promise&&re(Promise)){var Je=Promise.resolve();qe=function(){Je.then(Ke),Y&&setTimeout(E)},We=!0}else if(G||"undefined"==typeof MutationObserver||!re(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())qe="undefined"!=typeof setImmediate&&re(setImmediate)?function(){setImmediate(Ke)}:function(){setTimeout(Ke,0)};else{var Ye=1,Qe=new MutationObserver(Ke),Xe=document.createTextNode(String(Ye));Qe.observe(Xe,{characterData:!0}),qe=function(){Ye=(Ye+1)%2,Xe.data=String(Ye)},We=!0}function et(e,t){var i;if(Ve.push((function(){if(e)try{e.call(t)}catch(e){je(e,t,"nextTick")}else i&&i(t)})),Ge||(Ge=!0,qe()),!e&&"undefined"!=typeof Promise)return new Promise((function(e){i=e}))}var tt=new se;function it(e){!function e(t,i){var n,r,s=Array.isArray(t);if(!(!s&&!o(t)||Object.isFrozen(t)||t instanceof pe)){if(t.__ob__){var a=t.__ob__.dep.id;if(i.has(a))return;i.add(a)}if(s)for(n=t.length;n--;)e(t[n],i);else for(n=(r=Object.keys(t)).length;n--;)e(t[r[n]],i)}}(e,tt),tt.clear()}var nt=x((function(e){var t="&"===e.charAt(0),i="~"===(e=t?e.slice(1):e).charAt(0),n="!"===(e=i?e.slice(1):e).charAt(0);return{name:e=n?e.slice(1):e,once:i,capture:n,passive:t}}));function rt(e,t){function i(){var e=arguments,n=i.fns;if(!Array.isArray(n))return ze(n,null,arguments,t,"v-on handler");for(var r=n.slice(),s=0;s<r.length;s++)ze(r[s],null,e,t,"v-on handler")}return i.fns=e,i}function st(e,i,n,s,o,a){var l,c,h,d;for(l in e)c=e[l],h=i[l],d=nt(l),t(c)||(t(h)?(t(c.fns)&&(c=e[l]=rt(c,a)),r(d.once)&&(c=e[l]=o(d.name,c,d.capture)),n(d.name,c,d.capture,d.passive,d.params)):c!==h&&(h.fns=c,e[l]=h));for(l in i)t(e[l])&&s((d=nt(l)).name,i[l],d.capture)}function ot(e,i,s){var o;e instanceof pe&&(e=e.data.hook||(e.data.hook={}));var a=e[i];function l(){s.apply(this,arguments),g(o.fns,l)}t(a)?o=rt([l]):n(a.fns)&&r(a.merged)?(o=a).fns.push(l):o=rt([a,l]),o.merged=!0,e[i]=o}function at(e,t,i,r,s){if(n(t)){if(y(t,i))return e[i]=t[i],s||delete t[i],!0;if(y(t,r))return e[i]=t[r],s||delete t[r],!0}return!1}function lt(e){return s(e)?[ge(e)]:Array.isArray(e)?function e(i,o){var a,l,c,h,d=[];for(a=0;a<i.length;a++)t(l=i[a])||"boolean"==typeof l||(h=d[c=d.length-1],Array.isArray(l)?l.length>0&&(ct((l=e(l,(o||"")+"_"+a))[0])&&ct(h)&&(d[c]=ge(h.text+l[0].text),l.shift()),d.push.apply(d,l)):s(l)?ct(h)?d[c]=ge(h.text+l):""!==l&&d.push(ge(l)):ct(l)&&ct(h)?d[c]=ge(h.text+l.text):(r(i._isVList)&&n(l.tag)&&t(l.key)&&n(o)&&(l.key="__vlist"+o+"_"+a+"__"),d.push(l)));return d}(e):void 0}function ct(e){return n(e)&&n(e.text)&&!1===e.isComment}function ht(e,t){if(e){for(var i=Object.create(null),n=oe?Reflect.ownKeys(e):Object.keys(e),r=0;r<n.length;r++){var s=n[r];if("__ob__"!==s){for(var o=e[s].from,a=t;a;){if(a._provided&&y(a._provided,o)){i[s]=a._provided[o];break}a=a.$parent}if(!a&&"default"in e[s]){var l=e[s].default;i[s]="function"==typeof l?l.call(t):l}}}return i}}function dt(e,t){if(!e||!e.length)return{};for(var i={},n=0,r=e.length;n<r;n++){var s=e[n],o=s.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,s.context!==t&&s.fnContext!==t||!o||null==o.slot)(i.default||(i.default=[])).push(s);else{var a=o.slot,l=i[a]||(i[a]=[]);"template"===s.tag?l.push.apply(l,s.children||[]):l.push(s)}}for(var c in i)i[c].every(ut)&&delete i[c];return i}function ut(e){return e.isComment&&!e.asyncFactory||" "===e.text}function pt(e){return e.isComment&&e.asyncFactory}function mt(t,i,n){var r,s=Object.keys(i).length>0,o=t?!!t.$stable:!s,a=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(o&&n&&n!==e&&a===n.$key&&!s&&!n.$hasNormal)return n;for(var l in r={},t)t[l]&&"$"!==l[0]&&(r[l]=ft(i,l,t[l]))}else r={};for(var c in i)c in r||(r[c]=gt(i,c));return t&&Object.isExtensible(t)&&(t._normalized=r),F(r,"$stable",o),F(r,"$key",a),F(r,"$hasNormal",s),r}function ft(e,t,i){var n=function(){var e=arguments.length?i.apply(null,arguments):i({}),t=(e=e&&"object"==typeof e&&!Array.isArray(e)?[e]:lt(e))&&e[0];return e&&(!t||1===e.length&&t.isComment&&!pt(t))?void 0:e};return i.proxy&&Object.defineProperty(e,t,{get:n,enumerable:!0,configurable:!0}),n}function gt(e,t){return function(){return e[t]}}function vt(e,t){var i,r,s,a,l;if(Array.isArray(e)||"string"==typeof e)for(i=new Array(e.length),r=0,s=e.length;r<s;r++)i[r]=t(e[r],r);else if("number"==typeof e)for(i=new Array(e),r=0;r<e;r++)i[r]=t(r+1,r);else if(o(e))if(oe&&e[Symbol.iterator]){i=[];for(var c=e[Symbol.iterator](),h=c.next();!h.done;)i.push(t(h.value,i.length)),h=c.next()}else for(a=Object.keys(e),i=new Array(a.length),r=0,s=a.length;r<s;r++)l=a[r],i[r]=t(e[l],l,r);return n(i)||(i=[]),i._isVList=!0,i}function yt(e,t,i,n){var r,s=this.$scopedSlots[e];s?(i=i||{},n&&(i=A(A({},n),i)),r=s(i)||("function"==typeof t?t():t)):r=this.$slots[e]||("function"==typeof t?t():t);var o=i&&i.slot;return o?this.$createElement("template",{slot:o},r):r}function xt(e){return Be(this.$options,"filters",e)||M}function bt(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function wt(e,t,i,n,r){var s=N.keyCodes[t]||i;return r&&n&&!N.keyCodes[t]?bt(r,n):s?bt(s,e):n?k(n)!==t:void 0===e}function Ct(e,t,i,n,r){if(i&&o(i)){var s;Array.isArray(i)&&(i=_(i));var a=function(o){if("class"===o||"style"===o||f(o))s=e;else{var a=e.attrs&&e.attrs.type;s=n||N.mustUseProp(t,a,o)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var l=w(o),c=k(o);l in s||c in s||(s[o]=i[o],r&&((e.on||(e.on={}))["update:"+o]=function(e){i[o]=e}))};for(var l in i)a(l)}return e}function Pt(e,t){var i=this._staticTrees||(this._staticTrees=[]),n=i[e];return n&&!t||St(n=i[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__"+e,!1),n}function kt(e,t,i){return St(e,"__once__"+t+(i?"_"+i:""),!0),e}function St(e,t,i){if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]&&"string"!=typeof e[n]&&It(e[n],t+"_"+n,i);else It(e,t,i)}function It(e,t,i){e.isStatic=!0,e.key=t,e.isOnce=i}function At(e,t){if(t&&l(t)){var i=e.on=e.on?A({},e.on):{};for(var n in t){var r=i[n],s=t[n];i[n]=r?[].concat(r,s):s}}return e}function _t(e,t,i,n){t=t||{$stable:!i};for(var r=0;r<e.length;r++){var s=e[r];Array.isArray(s)?_t(s,t,i):s&&(s.proxy&&(s.fn.proxy=!0),t[s.key]=s.fn)}return n&&(t.$key=n),t}function Et(e,t){for(var i=0;i<t.length;i+=2){var n=t[i];"string"==typeof n&&n&&(e[t[i]]=t[i+1])}return e}function Tt(e,t){return"string"==typeof e?t+e:e}function Mt(e){e._o=kt,e._n=u,e._s=d,e._l=vt,e._t=yt,e._q=$,e._i=O,e._m=Pt,e._f=xt,e._k=wt,e._b=Ct,e._v=ge,e._e=fe,e._u=_t,e._g=At,e._d=Et,e._p=Tt}function $t(t,i,n,s,o){var a,l=this,c=o.options;y(s,"_uid")?(a=Object.create(s))._original=s:(a=s,s=s._original);var h=r(c._compiled),d=!h;this.data=t,this.props=i,this.children=n,this.parent=s,this.listeners=t.on||e,this.injections=ht(c.inject,s),this.slots=function(){return l.$slots||mt(t.scopedSlots,l.$slots=dt(n,s)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return mt(t.scopedSlots,this.slots())}}),h&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=mt(t.scopedSlots,this.$slots)),c._scopeId?this._c=function(e,t,i,n){var r=jt(a,e,t,i,n,d);return r&&!Array.isArray(r)&&(r.fnScopeId=c._scopeId,r.fnContext=s),r}:this._c=function(e,t,i,n){return jt(a,e,t,i,n,d)}}function Ot(e,t,i,n,r){var s=ve(e);return s.fnContext=i,s.fnOptions=n,t.slot&&((s.data||(s.data={})).slot=t.slot),s}function Dt(e,t){for(var i in t)e[w(i)]=t[i]}Mt($t.prototype);var Bt={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var i=e;Bt.prepatch(i,i)}else(e.componentInstance=function(e,t){var i={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;return n(r)&&(i.render=r.render,i.staticRenderFns=r.staticRenderFns),new e.componentOptions.Ctor(i)}(e,Jt)).$mount(t?e.elm:void 0,t)},prepatch:function(t,i){var n=i.componentOptions;!function(t,i,n,r,s){var o=r.data.scopedSlots,a=t.$scopedSlots,l=!!(o&&!o.$stable||a!==e&&!a.$stable||o&&t.$scopedSlots.$key!==o.$key||!o&&t.$scopedSlots.$key),c=!!(s||t.$options._renderChildren||l);if(t.$options._parentVnode=r,t.$vnode=r,t._vnode&&(t._vnode.parent=r),t.$options._renderChildren=s,t.$attrs=r.data.attrs||e,t.$listeners=n||e,i&&t.$options.props){Ce(!1);for(var h=t._props,d=t.$options._propKeys||[],u=0;u<d.length;u++){var p=d[u],m=t.$options.props;h[p]=Le(p,m,i,t)}Ce(!0),t.$options.propsData=i}n=n||e;var f=t.$options._parentListeners;t.$options._parentListeners=n,Kt(t,n,f),c&&(t.$slots=dt(s,r.context),t.$forceUpdate())}(i.componentInstance=t.componentInstance,n.propsData,n.listeners,i,n.children)},insert:function(e){var t,i=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,ei(n,"mounted")),e.data.keepAlive&&(i._isMounted?((t=n)._inactive=!1,ii.push(t)):Xt(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?function e(t,i){if(!(i&&(t._directInactive=!0,Qt(t))||t._inactive)){t._inactive=!0;for(var n=0;n<t.$children.length;n++)e(t.$children[n]);ei(t,"deactivated")}}(t,!0):t.$destroy())}},Lt=Object.keys(Bt);function Rt(i,s,a,l,c){if(!t(i)){var d=a.$options._base;if(o(i)&&(i=d.extend(i)),"function"==typeof i){var u;if(t(i.cid)&&void 0===(i=function(e,i){if(r(e.error)&&n(e.errorComp))return e.errorComp;if(n(e.resolved))return e.resolved;var s=Ut;if(s&&n(e.owners)&&-1===e.owners.indexOf(s)&&e.owners.push(s),r(e.loading)&&n(e.loadingComp))return e.loadingComp;if(s&&!n(e.owners)){var a=e.owners=[s],l=!0,c=null,d=null;s.$on("hook:destroyed",(function(){return g(a,s)}));var u=function(e){for(var t=0,i=a.length;t<i;t++)a[t].$forceUpdate();e&&(a.length=0,null!==c&&(clearTimeout(c),c=null),null!==d&&(clearTimeout(d),d=null))},p=D((function(t){e.resolved=Ht(t,i),l?a.length=0:u(!0)})),m=D((function(t){n(e.errorComp)&&(e.error=!0,u(!0))})),f=e(p,m);return o(f)&&(h(f)?t(e.resolved)&&f.then(p,m):h(f.component)&&(f.component.then(p,m),n(f.error)&&(e.errorComp=Ht(f.error,i)),n(f.loading)&&(e.loadingComp=Ht(f.loading,i),0===f.delay?e.loading=!0:c=setTimeout((function(){c=null,t(e.resolved)&&t(e.error)&&(e.loading=!0,u(!1))}),f.delay||200)),n(f.timeout)&&(d=setTimeout((function(){d=null,t(e.resolved)&&m(null)}),f.timeout)))),l=!1,e.loading?e.loadingComp:e.resolved}}(u=i,d)))return function(e,t,i,n,r){var s=fe();return s.asyncFactory=e,s.asyncMeta={data:t,context:i,children:n,tag:r},s}(u,s,a,l,c);s=s||{},wi(i),n(s.model)&&function(e,t){var i=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[i]=t.model.value;var s=t.on||(t.on={}),o=s[r],a=t.model.callback;n(o)?(Array.isArray(o)?-1===o.indexOf(a):o!==a)&&(s[r]=[a].concat(o)):s[r]=a}(i.options,s);var p=function(e,i,r){var s=i.options.props;if(!t(s)){var o={},a=e.attrs,l=e.props;if(n(a)||n(l))for(var c in s){var h=k(c);at(o,l,c,h,!0)||at(o,a,c,h,!1)}return o}}(s,i);if(r(i.options.functional))return function(t,i,r,s,o){var a=t.options,l={},c=a.props;if(n(c))for(var h in c)l[h]=Le(h,c,i||e);else n(r.attrs)&&Dt(l,r.attrs),n(r.props)&&Dt(l,r.props);var d=new $t(r,l,o,s,t),u=a.render.call(null,d._c,d);if(u instanceof pe)return Ot(u,r,d.parent,a);if(Array.isArray(u)){for(var p=lt(u)||[],m=new Array(p.length),f=0;f<p.length;f++)m[f]=Ot(p[f],r,d.parent,a);return m}}(i,p,s,a,l);var m=s.on;if(s.on=s.nativeOn,r(i.options.abstract)){var f=s.slot;s={},f&&(s.slot=f)}!function(e){for(var t=e.hook||(e.hook={}),i=0;i<Lt.length;i++){var n=Lt[i],r=t[n],s=Bt[n];r===s||r&&r._merged||(t[n]=r?Nt(s,r):s)}}(s);var v=i.options.name||c;return new pe("vue-component-"+i.cid+(v?"-"+v:""),s,void 0,void 0,void 0,a,{Ctor:i,propsData:p,listeners:m,tag:c,children:l},u)}}}function Nt(e,t){var i=function(i,n){e(i,n),t(i,n)};return i._merged=!0,i}var Zt=1,Ft=2;function jt(e,i,a,l,c,h){return(Array.isArray(a)||s(a))&&(c=l,l=a,a=void 0),r(h)&&(c=Ft),function(e,i,s,a,l){return n(s)&&n(s.__ob__)?fe():(n(s)&&n(s.is)&&(i=s.is),i?(Array.isArray(a)&&"function"==typeof a[0]&&((s=s||{}).scopedSlots={default:a[0]},a.length=0),l===Ft?a=lt(a):l===Zt&&(a=function(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}(a)),"string"==typeof i?(h=e.$vnode&&e.$vnode.ns||N.getTagNamespace(i),c=N.isReservedTag(i)?new pe(N.parsePlatformTagName(i),s,a,void 0,void 0,e):s&&s.pre||!n(d=Be(e.$options,"components",i))?new pe(i,s,a,void 0,void 0,e):Rt(d,s,e,a,i)):c=Rt(i,s,e,a),Array.isArray(c)?c:n(c)?(n(h)&&function e(i,s,o){if(i.ns=s,"foreignObject"===i.tag&&(s=void 0,o=!0),n(i.children))for(var a=0,l=i.children.length;a<l;a++){var c=i.children[a];n(c.tag)&&(t(c.ns)||r(o)&&"svg"!==c.tag)&&e(c,s,o)}}(c,h),n(s)&&function(e){o(e.style)&&it(e.style),o(e.class)&&it(e.class)}(s),c):fe()):fe());var c,h,d}(e,i,a,l,c)}var zt,Ut=null;function Ht(e,t){return(e.__esModule||oe&&"Module"===e[Symbol.toStringTag])&&(e=e.default),o(e)?t.extend(e):e}function qt(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var i=e[t];if(n(i)&&(n(i.componentOptions)||pt(i)))return i}}function Wt(e,t){zt.$on(e,t)}function Vt(e,t){zt.$off(e,t)}function Gt(e,t){var i=zt;return function n(){null!==t.apply(null,arguments)&&i.$off(e,n)}}function Kt(e,t,i){zt=e,st(t,i||{},Wt,Vt,Gt,e),zt=void 0}var Jt=null;function Yt(e){var t=Jt;return Jt=e,function(){Jt=t}}function Qt(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function Xt(e,t){if(t){if(e._directInactive=!1,Qt(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var i=0;i<e.$children.length;i++)Xt(e.$children[i]);ei(e,"activated")}}function ei(e,t){de();var i=e.$options[t],n=t+" hook";if(i)for(var r=0,s=i.length;r<s;r++)ze(i[r],e,null,e,n);e._hasHookEvent&&e.$emit("hook:"+t),ue()}var ti=[],ii=[],ni={},ri=!1,si=!1,oi=0,ai=0,li=Date.now;if(H&&!G){var ci=window.performance;ci&&"function"==typeof ci.now&&li()>document.createEvent("Event").timeStamp&&(li=function(){return ci.now()})}function hi(){var e,t;for(ai=li(),si=!0,ti.sort((function(e,t){return e.id-t.id})),oi=0;oi<ti.length;oi++)(e=ti[oi]).before&&e.before(),t=e.id,ni[t]=null,e.run();var i=ii.slice(),n=ti.slice();oi=ti.length=ii.length=0,ni={},ri=si=!1,function(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Xt(e[t],!0)}(i),function(e){for(var t=e.length;t--;){var i=e[t],n=i.vm;n._watcher===i&&n._isMounted&&!n._isDestroyed&&ei(n,"updated")}}(n),ne&&N.devtools&&ne.emit("flush")}var di=0,ui=function(e,t,i,n,r){this.vm=e,r&&(e._watcher=this),e._watchers.push(this),n?(this.deep=!!n.deep,this.user=!!n.user,this.lazy=!!n.lazy,this.sync=!!n.sync,this.before=n.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=i,this.id=++di,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new se,this.newDepIds=new se,this.expression="","function"==typeof t?this.getter=t:(this.getter=function(e){if(!z.test(e)){var t=e.split(".");return function(e){for(var i=0;i<t.length;i++){if(!e)return;e=e[t[i]]}return e}}}(t),this.getter||(this.getter=E)),this.value=this.lazy?void 0:this.get()};ui.prototype.get=function(){var e;de(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;je(e,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&it(e),ue(),this.cleanupDeps()}return e},ui.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},ui.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var i=this.depIds;this.depIds=this.newDepIds,this.newDepIds=i,this.newDepIds.clear(),i=this.deps,this.deps=this.newDeps,this.newDeps=i,this.newDeps.length=0},ui.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(e){var t=e.id;if(null==ni[t]){if(ni[t]=!0,si){for(var i=ti.length-1;i>oi&&ti[i].id>e.id;)i--;ti.splice(i+1,0,e)}else ti.push(e);ri||(ri=!0,et(hi))}}(this)},ui.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||o(e)||this.deep){var t=this.value;if(this.value=e,this.user){var i='callback for watcher "'+this.expression+'"';ze(this.cb,this.vm,[e,t],this.vm,i)}else this.cb.call(this.vm,e,t)}}},ui.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},ui.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},ui.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||g(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}};var pi={enumerable:!0,configurable:!0,get:E,set:E};function mi(e,t,i){pi.get=function(){return this[t][i]},pi.set=function(e){this[t][i]=e},Object.defineProperty(e,i,pi)}var fi={lazy:!0};function gi(e,t,i){var n=!ie();"function"==typeof i?(pi.get=n?vi(t):yi(i),pi.set=E):(pi.get=i.get?n&&!1!==i.cache?vi(t):yi(i.get):E,pi.set=i.set||E),Object.defineProperty(e,t,pi)}function vi(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),ce.target&&t.depend(),t.value}}function yi(e){return function(){return e.call(this,this)}}function xi(e,t,i,n){return l(i)&&(n=i,i=i.handler),"string"==typeof i&&(i=e[i]),e.$watch(t,i,n)}var bi=0;function wi(e){var t=e.options;if(e.super){var i=wi(e.super);if(i!==e.superOptions){e.superOptions=i;var n=function(e){var t,i=e.options,n=e.sealedOptions;for(var r in i)i[r]!==n[r]&&(t||(t={}),t[r]=i[r]);return t}(e);n&&A(e.extendOptions,n),(t=e.options=De(i,e.extendOptions)).name&&(t.components[t.name]=e)}}return t}function Ci(e){this._init(e)}function Pi(e){return e&&(e.Ctor.options.name||e.tag)}function ki(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"==typeof e?e.split(",").indexOf(t)>-1:(i=e,"[object RegExp]"===a.call(i)&&e.test(t));var i}function Si(e,t){var i=e.cache,n=e.keys,r=e._vnode;for(var s in i){var o=i[s];if(o){var a=o.name;a&&!t(a)&&Ii(i,s,n,r)}}}function Ii(e,t,i,n){var r=e[t];!r||n&&r.tag===n.tag||r.componentInstance.$destroy(),e[t]=null,g(i,t)}!function(t){t.prototype._init=function(t){var i=this;i._uid=bi++,i._isVue=!0,t&&t._isComponent?function(e,t){var i=e.$options=Object.create(e.constructor.options),n=t._parentVnode;i.parent=t.parent,i._parentVnode=n;var r=n.componentOptions;i.propsData=r.propsData,i._parentListeners=r.listeners,i._renderChildren=r.children,i._componentTag=r.tag,t.render&&(i.render=t.render,i.staticRenderFns=t.staticRenderFns)}(i,t):i.$options=De(wi(i.constructor),t||{},i),i._renderProxy=i,i._self=i,function(e){var t=e.$options,i=t.parent;if(i&&!t.abstract){for(;i.$options.abstract&&i.$parent;)i=i.$parent;i.$children.push(e)}e.$parent=i,e.$root=i?i.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(i),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Kt(e,t)}(i),function(t){t._vnode=null,t._staticTrees=null;var i=t.$options,n=t.$vnode=i._parentVnode,r=n&&n.context;t.$slots=dt(i._renderChildren,r),t.$scopedSlots=e,t._c=function(e,i,n,r){return jt(t,e,i,n,r,!1)},t.$createElement=function(e,i,n,r){return jt(t,e,i,n,r,!0)};var s=n&&n.data;Se(t,"$attrs",s&&s.attrs||e,null,!0),Se(t,"$listeners",i._parentListeners||e,null,!0)}(i),ei(i,"beforeCreate"),function(e){var t=ht(e.$options.inject,e);t&&(Ce(!1),Object.keys(t).forEach((function(i){Se(e,i,t[i])})),Ce(!0))}(i),function(e){e._watchers=[];var t=e.$options;t.props&&function(e,t){var i=e.$options.propsData||{},n=e._props={},r=e.$options._propKeys=[];e.$parent&&Ce(!1);var s=function(s){r.push(s);var o=Le(s,t,i,e);Se(n,s,o),s in e||mi(e,"_props",s)};for(var o in t)s(o);Ce(!0)}(e,t.props),t.methods&&function(e,t){for(var i in e.$options.props,t)e[i]="function"!=typeof t[i]?E:S(t[i],e)}(e,t.methods),t.data?function(e){var t=e.$options.data;l(t=e._data="function"==typeof t?function(e,t){de();try{return e.call(t,t)}catch(e){return je(e,t,"data()"),{}}finally{ue()}}(t,e):t||{})||(t={});for(var i,n=Object.keys(t),r=e.$options.props,s=(e.$options.methods,n.length);s--;){var o=n[s];r&&y(r,o)||36!==(i=(o+"").charCodeAt(0))&&95!==i&&mi(e,"_data",o)}ke(t,!0)}(e):ke(e._data={},!0),t.computed&&function(e,t){var i=e._computedWatchers=Object.create(null),n=ie();for(var r in t){var s=t[r],o="function"==typeof s?s:s.get;n||(i[r]=new ui(e,o||E,E,fi)),r in e||gi(e,r,s)}}(e,t.computed),t.watch&&t.watch!==X&&function(e,t){for(var i in t){var n=t[i];if(Array.isArray(n))for(var r=0;r<n.length;r++)xi(e,i,n[r]);else xi(e,i,n)}}(e,t.watch)}(i),function(e){var t=e.$options.provide;t&&(e._provided="function"==typeof t?t.call(e):t)}(i),ei(i,"created"),i.$options.el&&i.$mount(i.$options.el)}}(Ci),function(e){Object.defineProperty(e.prototype,"$data",{get:function(){return this._data}}),Object.defineProperty(e.prototype,"$props",{get:function(){return this._props}}),e.prototype.$set=Ie,e.prototype.$delete=Ae,e.prototype.$watch=function(e,t,i){if(l(t))return xi(this,e,t,i);(i=i||{}).user=!0;var n=new ui(this,e,t,i);if(i.immediate){var r='callback for immediate watcher "'+n.expression+'"';de(),ze(t,this,[n.value],this,r),ue()}return function(){n.teardown()}}}(Ci),function(e){var t=/^hook:/;e.prototype.$on=function(e,i){var n=this;if(Array.isArray(e))for(var r=0,s=e.length;r<s;r++)n.$on(e[r],i);else(n._events[e]||(n._events[e]=[])).push(i),t.test(e)&&(n._hasHookEvent=!0);return n},e.prototype.$once=function(e,t){var i=this;function n(){i.$off(e,n),t.apply(i,arguments)}return n.fn=t,i.$on(e,n),i},e.prototype.$off=function(e,t){var i=this;if(!arguments.length)return i._events=Object.create(null),i;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)i.$off(e[n],t);return i}var s,o=i._events[e];if(!o)return i;if(!t)return i._events[e]=null,i;for(var a=o.length;a--;)if((s=o[a])===t||s.fn===t){o.splice(a,1);break}return i},e.prototype.$emit=function(e){var t=this._events[e];if(t){t=t.length>1?I(t):t;for(var i=I(arguments,1),n='event handler for "'+e+'"',r=0,s=t.length;r<s;r++)ze(t[r],this,i,this,n)}return this}}(Ci),function(e){e.prototype._update=function(e,t){var i=this,n=i.$el,r=i._vnode,s=Yt(i);i._vnode=e,i.$el=r?i.__patch__(r,e):i.__patch__(i.$el,e,t,!1),s(),n&&(n.__vue__=null),i.$el&&(i.$el.__vue__=i),i.$vnode&&i.$parent&&i.$vnode===i.$parent._vnode&&(i.$parent.$el=i.$el)},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){ei(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||g(t.$children,e),e._watcher&&e._watcher.teardown();for(var i=e._watchers.length;i--;)e._watchers[i].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),ei(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}(Ci),function(e){Mt(e.prototype),e.prototype.$nextTick=function(e){return et(e,this)},e.prototype._render=function(){var e,t=this,i=t.$options,n=i.render,r=i._parentVnode;r&&(t.$scopedSlots=mt(r.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=r;try{Ut=t,e=n.call(t._renderProxy,t.$createElement)}catch(i){je(i,t,"render"),e=t._vnode}finally{Ut=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof pe||(e=fe()),e.parent=r,e}}(Ci);var Ai=[String,RegExp,Array],_i={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Ai,exclude:Ai,max:[String,Number]},methods:{cacheVNode:function(){var e=this.cache,t=this.keys,i=this.vnodeToCache,n=this.keyToCache;if(i){var r=i.tag,s=i.componentInstance,o=i.componentOptions;e[n]={name:Pi(o),tag:r,componentInstance:s},t.push(n),this.max&&t.length>parseInt(this.max)&&Ii(e,t[0],t,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Ii(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",(function(t){Si(e,(function(e){return ki(t,e)}))})),this.$watch("exclude",(function(t){Si(e,(function(e){return!ki(t,e)}))}))},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,t=qt(e),i=t&&t.componentOptions;if(i){var n=Pi(i),r=this.include,s=this.exclude;if(r&&(!n||!ki(r,n))||s&&n&&ki(s,n))return t;var o=this.cache,a=this.keys,l=null==t.key?i.Ctor.cid+(i.tag?"::"+i.tag:""):t.key;o[l]?(t.componentInstance=o[l].componentInstance,g(a,l),a.push(l)):(this.vnodeToCache=t,this.keyToCache=l),t.data.keepAlive=!0}return t||e&&e[0]}}};!function(e){var t={get:function(){return N}};Object.defineProperty(e,"config",t),e.util={warn:ae,extend:A,mergeOptions:De,defineReactive:Se},e.set=Ie,e.delete=Ae,e.nextTick=et,e.observable=function(e){return ke(e),e},e.options=Object.create(null),L.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,A(e.options.components,_i),function(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var i=I(arguments,1);return i.unshift(this),"function"==typeof e.install?e.install.apply(e,i):"function"==typeof e&&e.apply(null,i),t.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=De(this.options,e),this}}(e),function(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var i=this,n=i.cid,r=e._Ctor||(e._Ctor={});if(r[n])return r[n];var s=e.name||i.options.name,o=function(e){this._init(e)};return(o.prototype=Object.create(i.prototype)).constructor=o,o.cid=t++,o.options=De(i.options,e),o.super=i,o.options.props&&function(e){var t=e.options.props;for(var i in t)mi(e.prototype,"_props",i)}(o),o.options.computed&&function(e){var t=e.options.computed;for(var i in t)gi(e.prototype,i,t[i])}(o),o.extend=i.extend,o.mixin=i.mixin,o.use=i.use,L.forEach((function(e){o[e]=i[e]})),s&&(o.options.components[s]=o),o.superOptions=i.options,o.extendOptions=e,o.sealedOptions=A({},o.options),r[n]=o,o}}(e),function(e){L.forEach((function(t){e[t]=function(e,i){return i?("component"===t&&l(i)&&(i.name=i.name||e,i=this.options._base.extend(i)),"directive"===t&&"function"==typeof i&&(i={bind:i,update:i}),this.options[t+"s"][e]=i,i):this.options[t+"s"][e]}}))}(e)}(Ci),Object.defineProperty(Ci.prototype,"$isServer",{get:ie}),Object.defineProperty(Ci.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Ci,"FunctionalRenderContext",{value:$t}),Ci.version="2.6.14";var Ei=p("style,class"),Ti=p("input,textarea,option,select,progress"),Mi=function(e,t,i){return"value"===i&&Ti(e)&&"button"!==t||"selected"===i&&"option"===e||"checked"===i&&"input"===e||"muted"===i&&"video"===e},$i=p("contenteditable,draggable,spellcheck"),Oi=p("events,caret,typing,plaintext-only"),Di=function(e,t){return Zi(t)||"false"===t?"false":"contenteditable"===e&&Oi(t)?t:"true"},Bi=p("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),Li="http://www.w3.org/1999/xlink",Ri=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Ni=function(e){return Ri(e)?e.slice(6,e.length):""},Zi=function(e){return null==e||!1===e};function Fi(e,t){return{staticClass:ji(e.staticClass,t.staticClass),class:n(e.class)?[e.class,t.class]:t.class}}function ji(e,t){return e?t?e+" "+t:e:t||""}function zi(e){return Array.isArray(e)?function(e){for(var t,i="",r=0,s=e.length;r<s;r++)n(t=zi(e[r]))&&""!==t&&(i&&(i+=" "),i+=t);return i}(e):o(e)?function(e){var t="";for(var i in e)e[i]&&(t&&(t+=" "),t+=i);return t}(e):"string"==typeof e?e:""}var Ui={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Hi=p("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),qi=p("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Wi=function(e){return Hi(e)||qi(e)};function Vi(e){return qi(e)?"svg":"math"===e?"math":void 0}var Gi=Object.create(null),Ki=p("text,number,password,search,email,tel,url");function Ji(e){return"string"==typeof e?document.querySelector(e)||document.createElement("div"):e}var Yi=Object.freeze({createElement:function(e,t){var i=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&i.setAttribute("multiple","multiple"),i},createElementNS:function(e,t){return document.createElementNS(Ui[e],t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,i){e.insertBefore(t,i)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},setStyleScope:function(e,t){e.setAttribute(t,"")}}),Qi={create:function(e,t){Xi(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Xi(e,!0),Xi(t))},destroy:function(e){Xi(e,!0)}};function Xi(e,t){var i=e.data.ref;if(n(i)){var r=e.context,s=e.componentInstance||e.elm,o=r.$refs;t?Array.isArray(o[i])?g(o[i],s):o[i]===s&&(o[i]=void 0):e.data.refInFor?Array.isArray(o[i])?o[i].indexOf(s)<0&&o[i].push(s):o[i]=[s]:o[i]=s}}var en=new pe("",{},[]),tn=["create","activate","update","remove","destroy"];function nn(e,i){return e.key===i.key&&e.asyncFactory===i.asyncFactory&&(e.tag===i.tag&&e.isComment===i.isComment&&n(e.data)===n(i.data)&&function(e,t){if("input"!==e.tag)return!0;var i,r=n(i=e.data)&&n(i=i.attrs)&&i.type,s=n(i=t.data)&&n(i=i.attrs)&&i.type;return r===s||Ki(r)&&Ki(s)}(e,i)||r(e.isAsyncPlaceholder)&&t(i.asyncFactory.error))}function rn(e,t,i){var r,s,o={};for(r=t;r<=i;++r)n(s=e[r].key)&&(o[s]=r);return o}var sn={create:on,update:on,destroy:function(e){on(e,en)}};function on(e,t){(e.data.directives||t.data.directives)&&function(e,t){var i,n,r,s=e===en,o=t===en,a=ln(e.data.directives,e.context),l=ln(t.data.directives,t.context),c=[],h=[];for(i in l)n=a[i],r=l[i],n?(r.oldValue=n.value,r.oldArg=n.arg,hn(r,"update",t,e),r.def&&r.def.componentUpdated&&h.push(r)):(hn(r,"bind",t,e),r.def&&r.def.inserted&&c.push(r));if(c.length){var d=function(){for(var i=0;i<c.length;i++)hn(c[i],"inserted",t,e)};s?ot(t,"insert",d):d()}if(h.length&&ot(t,"postpatch",(function(){for(var i=0;i<h.length;i++)hn(h[i],"componentUpdated",t,e)})),!s)for(i in a)l[i]||hn(a[i],"unbind",e,e,o)}(e,t)}var an=Object.create(null);function ln(e,t){var i,n,r=Object.create(null);if(!e)return r;for(i=0;i<e.length;i++)(n=e[i]).modifiers||(n.modifiers=an),r[cn(n)]=n,n.def=Be(t.$options,"directives",n.name);return r}function cn(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function hn(e,t,i,n,r){var s=e.def&&e.def[t];if(s)try{s(i.elm,e,i,n,r)}catch(n){je(n,i.context,"directive "+e.name+" "+t+" hook")}}var dn=[Qi,sn];function un(e,i){var r=i.componentOptions;if(!(n(r)&&!1===r.Ctor.options.inheritAttrs||t(e.data.attrs)&&t(i.data.attrs))){var s,o,a=i.elm,l=e.data.attrs||{},c=i.data.attrs||{};for(s in n(c.__ob__)&&(c=i.data.attrs=A({},c)),c)o=c[s],l[s]!==o&&pn(a,s,o,i.data.pre);for(s in(G||J)&&c.value!==l.value&&pn(a,"value",c.value),l)t(c[s])&&(Ri(s)?a.removeAttributeNS(Li,Ni(s)):$i(s)||a.removeAttribute(s))}}function pn(e,t,i,n){n||e.tagName.indexOf("-")>-1?mn(e,t,i):Bi(t)?Zi(i)?e.removeAttribute(t):(i="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,i)):$i(t)?e.setAttribute(t,Di(t,i)):Ri(t)?Zi(i)?e.removeAttributeNS(Li,Ni(t)):e.setAttributeNS(Li,t,i):mn(e,t,i)}function mn(e,t,i){if(Zi(i))e.removeAttribute(t);else{if(G&&!K&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==i&&!e.__ieph){var n=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",n)};e.addEventListener("input",n),e.__ieph=!0}e.setAttribute(t,i)}}var fn={create:un,update:un};function gn(e,i){var r=i.elm,s=i.data,o=e.data;if(!(t(s.staticClass)&&t(s.class)&&(t(o)||t(o.staticClass)&&t(o.class)))){var a=function(e){for(var t=e.data,i=e,r=e;n(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(t=Fi(r.data,t));for(;n(i=i.parent);)i&&i.data&&(t=Fi(t,i.data));return function(e,t){return n(e)||n(t)?ji(e,zi(t)):""}(t.staticClass,t.class)}(i),l=r._transitionClasses;n(l)&&(a=ji(a,zi(l))),a!==r._prevClass&&(r.setAttribute("class",a),r._prevClass=a)}}var vn,yn,xn,bn,wn,Cn,Pn={create:gn,update:gn},kn=/[\w).+\-_$\]]/;function Sn(e){var t,i,n,r,s,o=!1,a=!1,l=!1,c=!1,h=0,d=0,u=0,p=0;for(n=0;n<e.length;n++)if(i=t,t=e.charCodeAt(n),o)39===t&&92!==i&&(o=!1);else if(a)34===t&&92!==i&&(a=!1);else if(l)96===t&&92!==i&&(l=!1);else if(c)47===t&&92!==i&&(c=!1);else if(124!==t||124===e.charCodeAt(n+1)||124===e.charCodeAt(n-1)||h||d||u){switch(t){case 34:a=!0;break;case 39:o=!0;break;case 96:l=!0;break;case 40:u++;break;case 41:u--;break;case 91:d++;break;case 93:d--;break;case 123:h++;break;case 125:h--}if(47===t){for(var m=n-1,f=void 0;m>=0&&" "===(f=e.charAt(m));m--);f&&kn.test(f)||(c=!0)}}else void 0===r?(p=n+1,r=e.slice(0,n).trim()):g();function g(){(s||(s=[])).push(e.slice(p,n).trim()),p=n+1}if(void 0===r?r=e.slice(0,n).trim():0!==p&&g(),s)for(n=0;n<s.length;n++)r=In(r,s[n]);return r}function In(e,t){var i=t.indexOf("(");if(i<0)return'_f("'+t+'")('+e+")";var n=t.slice(0,i),r=t.slice(i+1);return'_f("'+n+'")('+e+(")"!==r?","+r:r)}function An(e,t){console.error("[Vue compiler]: "+e)}function _n(e,t){return e?e.map((function(e){return e[t]})).filter((function(e){return e})):[]}function En(e,t,i,n,r){(e.props||(e.props=[])).push(Nn({name:t,value:i,dynamic:r},n)),e.plain=!1}function Tn(e,t,i,n,r){(r?e.dynamicAttrs||(e.dynamicAttrs=[]):e.attrs||(e.attrs=[])).push(Nn({name:t,value:i,dynamic:r},n)),e.plain=!1}function Mn(e,t,i,n){e.attrsMap[t]=i,e.attrsList.push(Nn({name:t,value:i},n))}function $n(e,t,i,n,r,s,o,a){(e.directives||(e.directives=[])).push(Nn({name:t,rawName:i,value:n,arg:r,isDynamicArg:s,modifiers:o},a)),e.plain=!1}function On(e,t,i){return i?"_p("+t+',"'+e+'")':e+t}function Dn(t,i,n,r,s,o,a,l){var c;(r=r||e).right?l?i="("+i+")==='click'?'contextmenu':("+i+")":"click"===i&&(i="contextmenu",delete r.right):r.middle&&(l?i="("+i+")==='click'?'mouseup':("+i+")":"click"===i&&(i="mouseup")),r.capture&&(delete r.capture,i=On("!",i,l)),r.once&&(delete r.once,i=On("~",i,l)),r.passive&&(delete r.passive,i=On("&",i,l)),r.native?(delete r.native,c=t.nativeEvents||(t.nativeEvents={})):c=t.events||(t.events={});var h=Nn({value:n.trim(),dynamic:l},a);r!==e&&(h.modifiers=r);var d=c[i];Array.isArray(d)?s?d.unshift(h):d.push(h):c[i]=d?s?[h,d]:[d,h]:h,t.plain=!1}function Bn(e,t,i){var n=Ln(e,":"+t)||Ln(e,"v-bind:"+t);if(null!=n)return Sn(n);if(!1!==i){var r=Ln(e,t);if(null!=r)return JSON.stringify(r)}}function Ln(e,t,i){var n;if(null!=(n=e.attrsMap[t]))for(var r=e.attrsList,s=0,o=r.length;s<o;s++)if(r[s].name===t){r.splice(s,1);break}return i&&delete e.attrsMap[t],n}function Rn(e,t){for(var i=e.attrsList,n=0,r=i.length;n<r;n++){var s=i[n];if(t.test(s.name))return i.splice(n,1),s}}function Nn(e,t){return t&&(null!=t.start&&(e.start=t.start),null!=t.end&&(e.end=t.end)),e}function Zn(e,t,i){var n=i||{},r=n.number,s="$$v";n.trim&&(s="(typeof $$v === 'string'? $$v.trim(): $$v)"),r&&(s="_n("+s+")");var o=Fn(t,s);e.model={value:"("+t+")",expression:JSON.stringify(t),callback:"function ($$v) {"+o+"}"}}function Fn(e,t){var i=function(e){if(e=e.trim(),vn=e.length,e.indexOf("[")<0||e.lastIndexOf("]")<vn-1)return(bn=e.lastIndexOf("."))>-1?{exp:e.slice(0,bn),key:'"'+e.slice(bn+1)+'"'}:{exp:e,key:null};for(yn=e,bn=wn=Cn=0;!zn();)Un(xn=jn())?qn(xn):91===xn&&Hn(xn);return{exp:e.slice(0,wn),key:e.slice(wn+1,Cn)}}(e);return null===i.key?e+"="+t:"$set("+i.exp+", "+i.key+", "+t+")"}function jn(){return yn.charCodeAt(++bn)}function zn(){return bn>=vn}function Un(e){return 34===e||39===e}function Hn(e){var t=1;for(wn=bn;!zn();)if(Un(e=jn()))qn(e);else if(91===e&&t++,93===e&&t--,0===t){Cn=bn;break}}function qn(e){for(var t=e;!zn()&&(e=jn())!==t;);}var Wn,Vn="__r",Gn="__c";function Kn(e,t,i){var n=Wn;return function r(){null!==t.apply(null,arguments)&&Qn(e,r,i,n)}}var Jn=We&&!(Q&&Number(Q[1])<=53);function Yn(e,t,i,n){if(Jn){var r=ai,s=t;t=s._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=r||e.timeStamp<=0||e.target.ownerDocument!==document)return s.apply(this,arguments)}}Wn.addEventListener(e,t,ee?{capture:i,passive:n}:i)}function Qn(e,t,i,n){(n||Wn).removeEventListener(e,t._wrapper||t,i)}function Xn(e,i){if(!t(e.data.on)||!t(i.data.on)){var r=i.data.on||{},s=e.data.on||{};Wn=i.elm,function(e){if(n(e[Vn])){var t=G?"change":"input";e[t]=[].concat(e[Vn],e[t]||[]),delete e[Vn]}n(e[Gn])&&(e.change=[].concat(e[Gn],e.change||[]),delete e[Gn])}(r),st(r,s,Yn,Qn,Kn,i.context),Wn=void 0}}var er,tr={create:Xn,update:Xn};function ir(e,i){if(!t(e.data.domProps)||!t(i.data.domProps)){var r,s,o=i.elm,a=e.data.domProps||{},l=i.data.domProps||{};for(r in n(l.__ob__)&&(l=i.data.domProps=A({},l)),a)r in l||(o[r]="");for(r in l){if(s=l[r],"textContent"===r||"innerHTML"===r){if(i.children&&(i.children.length=0),s===a[r])continue;1===o.childNodes.length&&o.removeChild(o.childNodes[0])}if("value"===r&&"PROGRESS"!==o.tagName){o._value=s;var c=t(s)?"":String(s);nr(o,c)&&(o.value=c)}else if("innerHTML"===r&&qi(o.tagName)&&t(o.innerHTML)){(er=er||document.createElement("div")).innerHTML="<svg>"+s+"</svg>";for(var h=er.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;h.firstChild;)o.appendChild(h.firstChild)}else if(s!==a[r])try{o[r]=s}catch(e){}}}}function nr(e,t){return!e.composing&&("OPTION"===e.tagName||function(e,t){var i=!0;try{i=document.activeElement!==e}catch(e){}return i&&e.value!==t}(e,t)||function(e,t){var i=e.value,r=e._vModifiers;if(n(r)){if(r.number)return u(i)!==u(t);if(r.trim)return i.trim()!==t.trim()}return i!==t}(e,t))}var rr={create:ir,update:ir},sr=x((function(e){var t={},i=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach((function(e){if(e){var n=e.split(i);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}));function or(e){var t=ar(e.style);return e.staticStyle?A(e.staticStyle,t):t}function ar(e){return Array.isArray(e)?_(e):"string"==typeof e?sr(e):e}var lr,cr=/^--/,hr=/\s*!important$/,dr=function(e,t,i){if(cr.test(t))e.style.setProperty(t,i);else if(hr.test(i))e.style.setProperty(k(t),i.replace(hr,""),"important");else{var n=pr(t);if(Array.isArray(i))for(var r=0,s=i.length;r<s;r++)e.style[n]=i[r];else e.style[n]=i}},ur=["Webkit","Moz","ms"],pr=x((function(e){if(lr=lr||document.createElement("div").style,"filter"!==(e=w(e))&&e in lr)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<ur.length;i++){var n=ur[i]+t;if(n in lr)return n}}));function mr(e,i){var r=i.data,s=e.data;if(!(t(r.staticStyle)&&t(r.style)&&t(s.staticStyle)&&t(s.style))){var o,a,l=i.elm,c=s.staticStyle,h=s.normalizedStyle||s.style||{},d=c||h,u=ar(i.data.style)||{};i.data.normalizedStyle=n(u.__ob__)?A({},u):u;var p=function(e,t){for(var i,n={},r=e;r.componentInstance;)(r=r.componentInstance._vnode)&&r.data&&(i=or(r.data))&&A(n,i);(i=or(e.data))&&A(n,i);for(var s=e;s=s.parent;)s.data&&(i=or(s.data))&&A(n,i);return n}(i);for(a in d)t(p[a])&&dr(l,a,"");for(a in p)(o=p[a])!==d[a]&&dr(l,a,null==o?"":o)}}var fr={create:mr,update:mr},gr=/\s+/;function vr(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(gr).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var i=" "+(e.getAttribute("class")||"")+" ";i.indexOf(" "+t+" ")<0&&e.setAttribute("class",(i+t).trim())}}function yr(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(gr).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{for(var i=" "+(e.getAttribute("class")||"")+" ",n=" "+t+" ";i.indexOf(n)>=0;)i=i.replace(n," ");(i=i.trim())?e.setAttribute("class",i):e.removeAttribute("class")}}function xr(e){if(e){if("object"==typeof e){var t={};return!1!==e.css&&A(t,br(e.name||"v")),A(t,e),t}return"string"==typeof e?br(e):void 0}}var br=x((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),wr=H&&!K,Cr="transition",Pr="animation",kr="transition",Sr="transitionend",Ir="animation",Ar="animationend";wr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(kr="WebkitTransition",Sr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Ir="WebkitAnimation",Ar="webkitAnimationEnd"));var _r=H?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Er(e){_r((function(){_r(e)}))}function Tr(e,t){var i=e._transitionClasses||(e._transitionClasses=[]);i.indexOf(t)<0&&(i.push(t),vr(e,t))}function Mr(e,t){e._transitionClasses&&g(e._transitionClasses,t),yr(e,t)}function $r(e,t,i){var n=Dr(e,t),r=n.type,s=n.timeout,o=n.propCount;if(!r)return i();var a=r===Cr?Sr:Ar,l=0,c=function(){e.removeEventListener(a,h),i()},h=function(t){t.target===e&&++l>=o&&c()};setTimeout((function(){l<o&&c()}),s+1),e.addEventListener(a,h)}var Or=/\b(transform|all)(,|$)/;function Dr(e,t){var i,n=window.getComputedStyle(e),r=(n[kr+"Delay"]||"").split(", "),s=(n[kr+"Duration"]||"").split(", "),o=Br(r,s),a=(n[Ir+"Delay"]||"").split(", "),l=(n[Ir+"Duration"]||"").split(", "),c=Br(a,l),h=0,d=0;return t===Cr?o>0&&(i=Cr,h=o,d=s.length):t===Pr?c>0&&(i=Pr,h=c,d=l.length):d=(i=(h=Math.max(o,c))>0?o>c?Cr:Pr:null)?i===Cr?s.length:l.length:0,{type:i,timeout:h,propCount:d,hasTransform:i===Cr&&Or.test(n[kr+"Property"])}}function Br(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map((function(t,i){return Lr(t)+Lr(e[i])})))}function Lr(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Rr(e,i){var r=e.elm;n(r._leaveCb)&&(r._leaveCb.cancelled=!0,r._leaveCb());var s=xr(e.data.transition);if(!t(s)&&!n(r._enterCb)&&1===r.nodeType){for(var a=s.css,l=s.type,c=s.enterClass,h=s.enterToClass,d=s.enterActiveClass,p=s.appearClass,m=s.appearToClass,f=s.appearActiveClass,g=s.beforeEnter,v=s.enter,y=s.afterEnter,x=s.enterCancelled,b=s.beforeAppear,w=s.appear,C=s.afterAppear,P=s.appearCancelled,k=s.duration,S=Jt,I=Jt.$vnode;I&&I.parent;)S=I.context,I=I.parent;var A=!S._isMounted||!e.isRootInsert;if(!A||w||""===w){var _=A&&p?p:c,E=A&&f?f:d,T=A&&m?m:h,M=A&&b||g,$=A&&"function"==typeof w?w:v,O=A&&C||y,B=A&&P||x,L=u(o(k)?k.enter:k),R=!1!==a&&!K,N=Fr($),Z=r._enterCb=D((function(){R&&(Mr(r,T),Mr(r,E)),Z.cancelled?(R&&Mr(r,_),B&&B(r)):O&&O(r),r._enterCb=null}));e.data.show||ot(e,"insert",(function(){var t=r.parentNode,i=t&&t._pending&&t._pending[e.key];i&&i.tag===e.tag&&i.elm._leaveCb&&i.elm._leaveCb(),$&&$(r,Z)})),M&&M(r),R&&(Tr(r,_),Tr(r,E),Er((function(){Mr(r,_),Z.cancelled||(Tr(r,T),N||(Zr(L)?setTimeout(Z,L):$r(r,l,Z)))}))),e.data.show&&(i&&i(),$&&$(r,Z)),R||N||Z()}}}function Nr(e,i){var r=e.elm;n(r._enterCb)&&(r._enterCb.cancelled=!0,r._enterCb());var s=xr(e.data.transition);if(t(s)||1!==r.nodeType)return i();if(!n(r._leaveCb)){var a=s.css,l=s.type,c=s.leaveClass,h=s.leaveToClass,d=s.leaveActiveClass,p=s.beforeLeave,m=s.leave,f=s.afterLeave,g=s.leaveCancelled,v=s.delayLeave,y=s.duration,x=!1!==a&&!K,b=Fr(m),w=u(o(y)?y.leave:y),C=r._leaveCb=D((function(){r.parentNode&&r.parentNode._pending&&(r.parentNode._pending[e.key]=null),x&&(Mr(r,h),Mr(r,d)),C.cancelled?(x&&Mr(r,c),g&&g(r)):(i(),f&&f(r)),r._leaveCb=null}));v?v(P):P()}function P(){C.cancelled||(!e.data.show&&r.parentNode&&((r.parentNode._pending||(r.parentNode._pending={}))[e.key]=e),p&&p(r),x&&(Tr(r,c),Tr(r,d),Er((function(){Mr(r,c),C.cancelled||(Tr(r,h),b||(Zr(w)?setTimeout(C,w):$r(r,l,C)))}))),m&&m(r,C),x||b||C())}}function Zr(e){return"number"==typeof e&&!isNaN(e)}function Fr(e){if(t(e))return!1;var i=e.fns;return n(i)?Fr(Array.isArray(i)?i[0]:i):(e._length||e.length)>1}function jr(e,t){!0!==t.data.show&&Rr(t)}var zr=function(e){var i,o,a={},l=e.modules,c=e.nodeOps;for(i=0;i<tn.length;++i)for(a[tn[i]]=[],o=0;o<l.length;++o)n(l[o][tn[i]])&&a[tn[i]].push(l[o][tn[i]]);function h(e){var t=c.parentNode(e);n(t)&&c.removeChild(t,e)}function d(e,t,i,s,o,l,h){if(n(e.elm)&&n(l)&&(e=l[h]=ve(e)),e.isRootInsert=!o,!function(e,t,i,s){var o=e.data;if(n(o)){var l=n(e.componentInstance)&&o.keepAlive;if(n(o=o.hook)&&n(o=o.init)&&o(e,!1),n(e.componentInstance))return u(e,t),m(i,e.elm,s),r(l)&&function(e,t,i,r){for(var s,o=e;o.componentInstance;)if(n(s=(o=o.componentInstance._vnode).data)&&n(s=s.transition)){for(s=0;s<a.activate.length;++s)a.activate[s](en,o);t.push(o);break}m(i,e.elm,r)}(e,t,i,s),!0}}(e,t,i,s)){var d=e.data,p=e.children,g=e.tag;n(g)?(e.elm=e.ns?c.createElementNS(e.ns,g):c.createElement(g,e),y(e),f(e,p,t),n(d)&&v(e,t),m(i,e.elm,s)):r(e.isComment)?(e.elm=c.createComment(e.text),m(i,e.elm,s)):(e.elm=c.createTextNode(e.text),m(i,e.elm,s))}}function u(e,t){n(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,g(e)?(v(e,t),y(e)):(Xi(e),t.push(e))}function m(e,t,i){n(e)&&(n(i)?c.parentNode(i)===e&&c.insertBefore(e,t,i):c.appendChild(e,t))}function f(e,t,i){if(Array.isArray(t))for(var n=0;n<t.length;++n)d(t[n],i,e.elm,null,!0,t,n);else s(e.text)&&c.appendChild(e.elm,c.createTextNode(String(e.text)))}function g(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return n(e.tag)}function v(e,t){for(var r=0;r<a.create.length;++r)a.create[r](en,e);n(i=e.data.hook)&&(n(i.create)&&i.create(en,e),n(i.insert)&&t.push(e))}function y(e){var t;if(n(t=e.fnScopeId))c.setStyleScope(e.elm,t);else for(var i=e;i;)n(t=i.context)&&n(t=t.$options._scopeId)&&c.setStyleScope(e.elm,t),i=i.parent;n(t=Jt)&&t!==e.context&&t!==e.fnContext&&n(t=t.$options._scopeId)&&c.setStyleScope(e.elm,t)}function x(e,t,i,n,r,s){for(;n<=r;++n)d(i[n],s,e,t,!1,i,n)}function b(e){var t,i,r=e.data;if(n(r))for(n(t=r.hook)&&n(t=t.destroy)&&t(e),t=0;t<a.destroy.length;++t)a.destroy[t](e);if(n(t=e.children))for(i=0;i<e.children.length;++i)b(e.children[i])}function w(e,t,i){for(;t<=i;++t){var r=e[t];n(r)&&(n(r.tag)?(C(r),b(r)):h(r.elm))}}function C(e,t){if(n(t)||n(e.data)){var i,r=a.remove.length+1;for(n(t)?t.listeners+=r:t=function(e,t){function i(){0==--i.listeners&&h(e)}return i.listeners=t,i}(e.elm,r),n(i=e.componentInstance)&&n(i=i._vnode)&&n(i.data)&&C(i,t),i=0;i<a.remove.length;++i)a.remove[i](e,t);n(i=e.data.hook)&&n(i=i.remove)?i(e,t):t()}else h(e.elm)}function P(e,t,i,r){for(var s=i;s<r;s++){var o=t[s];if(n(o)&&nn(e,o))return s}}function k(e,i,s,o,l,h){if(e!==i){n(i.elm)&&n(o)&&(i=o[l]=ve(i));var u=i.elm=e.elm;if(r(e.isAsyncPlaceholder))n(i.asyncFactory.resolved)?A(e.elm,i,s):i.isAsyncPlaceholder=!0;else if(r(i.isStatic)&&r(e.isStatic)&&i.key===e.key&&(r(i.isCloned)||r(i.isOnce)))i.componentInstance=e.componentInstance;else{var p,m=i.data;n(m)&&n(p=m.hook)&&n(p=p.prepatch)&&p(e,i);var f=e.children,v=i.children;if(n(m)&&g(i)){for(p=0;p<a.update.length;++p)a.update[p](e,i);n(p=m.hook)&&n(p=p.update)&&p(e,i)}t(i.text)?n(f)&&n(v)?f!==v&&function(e,i,r,s,o){for(var a,l,h,u=0,p=0,m=i.length-1,f=i[0],g=i[m],v=r.length-1,y=r[0],b=r[v],C=!o;u<=m&&p<=v;)t(f)?f=i[++u]:t(g)?g=i[--m]:nn(f,y)?(k(f,y,s,r,p),f=i[++u],y=r[++p]):nn(g,b)?(k(g,b,s,r,v),g=i[--m],b=r[--v]):nn(f,b)?(k(f,b,s,r,v),C&&c.insertBefore(e,f.elm,c.nextSibling(g.elm)),f=i[++u],b=r[--v]):nn(g,y)?(k(g,y,s,r,p),C&&c.insertBefore(e,g.elm,f.elm),g=i[--m],y=r[++p]):(t(a)&&(a=rn(i,u,m)),t(l=n(y.key)?a[y.key]:P(y,i,u,m))?d(y,s,e,f.elm,!1,r,p):nn(h=i[l],y)?(k(h,y,s,r,p),i[l]=void 0,C&&c.insertBefore(e,h.elm,f.elm)):d(y,s,e,f.elm,!1,r,p),y=r[++p]);u>m?x(e,t(r[v+1])?null:r[v+1].elm,r,p,v,s):p>v&&w(i,u,m)}(u,f,v,s,h):n(v)?(n(e.text)&&c.setTextContent(u,""),x(u,null,v,0,v.length-1,s)):n(f)?w(f,0,f.length-1):n(e.text)&&c.setTextContent(u,""):e.text!==i.text&&c.setTextContent(u,i.text),n(m)&&n(p=m.hook)&&n(p=p.postpatch)&&p(e,i)}}}function S(e,t,i){if(r(i)&&n(e.parent))e.parent.data.pendingInsert=t;else for(var s=0;s<t.length;++s)t[s].data.hook.insert(t[s])}var I=p("attrs,class,staticClass,staticStyle,key");function A(e,t,i,s){var o,a=t.tag,l=t.data,c=t.children;if(s=s||l&&l.pre,t.elm=e,r(t.isComment)&&n(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(n(l)&&(n(o=l.hook)&&n(o=o.init)&&o(t,!0),n(o=t.componentInstance)))return u(t,i),!0;if(n(a)){if(n(c))if(e.hasChildNodes())if(n(o=l)&&n(o=o.domProps)&&n(o=o.innerHTML)){if(o!==e.innerHTML)return!1}else{for(var h=!0,d=e.firstChild,p=0;p<c.length;p++){if(!d||!A(d,c[p],i,s)){h=!1;break}d=d.nextSibling}if(!h||d)return!1}else f(t,c,i);if(n(l)){var m=!1;for(var g in l)if(!I(g)){m=!0,v(t,i);break}!m&&l.class&&it(l.class)}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,i,s,o){if(!t(i)){var l,h=!1,u=[];if(t(e))h=!0,d(i,u);else{var p=n(e.nodeType);if(!p&&nn(e,i))k(e,i,u,null,null,o);else{if(p){if(1===e.nodeType&&e.hasAttribute(B)&&(e.removeAttribute(B),s=!0),r(s)&&A(e,i,u))return S(i,u,!0),e;l=e,e=new pe(c.tagName(l).toLowerCase(),{},[],void 0,l)}var m=e.elm,f=c.parentNode(m);if(d(i,u,m._leaveCb?null:f,c.nextSibling(m)),n(i.parent))for(var v=i.parent,y=g(i);v;){for(var x=0;x<a.destroy.length;++x)a.destroy[x](v);if(v.elm=i.elm,y){for(var C=0;C<a.create.length;++C)a.create[C](en,v);var P=v.data.hook.insert;if(P.merged)for(var I=1;I<P.fns.length;I++)P.fns[I]()}else Xi(v);v=v.parent}n(f)?w([e],0,0):n(e.tag)&&b(e)}}return S(i,u,h),i.elm}n(e)&&b(e)}}({nodeOps:Yi,modules:[fn,Pn,tr,rr,fr,H?{create:jr,activate:jr,remove:function(e,t){!0!==e.data.show?Nr(e,t):t()}}:{}].concat(dn)});K&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&Jr(e,"input")}));var Ur={inserted:function(e,t,i,n){"select"===i.tag?(n.elm&&!n.elm._vOptions?ot(i,"postpatch",(function(){Ur.componentUpdated(e,t,i)})):Hr(e,t,i.context),e._vOptions=[].map.call(e.options,Vr)):("textarea"===i.tag||Ki(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",Gr),e.addEventListener("compositionend",Kr),e.addEventListener("change",Kr),K&&(e.vmodel=!0)))},componentUpdated:function(e,t,i){if("select"===i.tag){Hr(e,t,i.context);var n=e._vOptions,r=e._vOptions=[].map.call(e.options,Vr);r.some((function(e,t){return!$(e,n[t])}))&&(e.multiple?t.value.some((function(e){return Wr(e,r)})):t.value!==t.oldValue&&Wr(t.value,r))&&Jr(e,"change")}}};function Hr(e,t,i){qr(e,t),(G||J)&&setTimeout((function(){qr(e,t)}),0)}function qr(e,t,i){var n=t.value,r=e.multiple;if(!r||Array.isArray(n)){for(var s,o,a=0,l=e.options.length;a<l;a++)if(o=e.options[a],r)s=O(n,Vr(o))>-1,o.selected!==s&&(o.selected=s);else if($(Vr(o),n))return void(e.selectedIndex!==a&&(e.selectedIndex=a));r||(e.selectedIndex=-1)}}function Wr(e,t){return t.every((function(t){return!$(t,e)}))}function Vr(e){return"_value"in e?e._value:e.value}function Gr(e){e.target.composing=!0}function Kr(e){e.target.composing&&(e.target.composing=!1,Jr(e.target,"input"))}function Jr(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0),e.dispatchEvent(i)}function Yr(e){return!e.componentInstance||e.data&&e.data.transition?e:Yr(e.componentInstance._vnode)}var Qr={model:Ur,show:{bind:function(e,t,i){var n=t.value,r=(i=Yr(i)).data&&i.data.transition,s=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;n&&r?(i.data.show=!0,Rr(i,(function(){e.style.display=s}))):e.style.display=n?s:"none"},update:function(e,t,i){var n=t.value;!n!=!t.oldValue&&((i=Yr(i)).data&&i.data.transition?(i.data.show=!0,n?Rr(i,(function(){e.style.display=e.__vOriginalDisplay})):Nr(i,(function(){e.style.display="none"}))):e.style.display=n?e.__vOriginalDisplay:"none")},unbind:function(e,t,i,n,r){r||(e.style.display=e.__vOriginalDisplay)}}},Xr={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function es(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?es(qt(t.children)):e}function ts(e){var t={},i=e.$options;for(var n in i.propsData)t[n]=e[n];var r=i._parentListeners;for(var s in r)t[w(s)]=r[s];return t}function is(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}var ns=function(e){return e.tag||pt(e)},rs=function(e){return"show"===e.name},ss={name:"transition",props:Xr,abstract:!0,render:function(e){var t=this,i=this.$slots.default;if(i&&(i=i.filter(ns)).length){var n=this.mode,r=i[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return r;var o=es(r);if(!o)return r;if(this._leaving)return is(e,r);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:s(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var l=(o.data||(o.data={})).transition=ts(this),c=this._vnode,h=es(c);if(o.data.directives&&o.data.directives.some(rs)&&(o.data.show=!0),h&&h.data&&!function(e,t){return t.key===e.key&&t.tag===e.tag}(o,h)&&!pt(h)&&(!h.componentInstance||!h.componentInstance._vnode.isComment)){var d=h.data.transition=A({},l);if("out-in"===n)return this._leaving=!0,ot(d,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),is(e,r);if("in-out"===n){if(pt(o))return c;var u,p=function(){u()};ot(l,"afterEnter",p),ot(l,"enterCancelled",p),ot(d,"delayLeave",(function(e){u=e}))}}return r}}},os=A({tag:String,moveClass:String},Xr);function as(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function ls(e){e.data.newPos=e.elm.getBoundingClientRect()}function cs(e){var t=e.data.pos,i=e.data.newPos,n=t.left-i.left,r=t.top-i.top;if(n||r){e.data.moved=!0;var s=e.elm.style;s.transform=s.WebkitTransform="translate("+n+"px,"+r+"px)",s.transitionDuration="0s"}}delete os.mode;var hs={Transition:ss,TransitionGroup:{props:os,beforeMount:function(){var e=this,t=this._update;this._update=function(i,n){var r=Yt(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,r(),t.call(e,i,n)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",i=Object.create(null),n=this.prevChildren=this.children,r=this.$slots.default||[],s=this.children=[],o=ts(this),a=0;a<r.length;a++){var l=r[a];l.tag&&null!=l.key&&0!==String(l.key).indexOf("__vlist")&&(s.push(l),i[l.key]=l,(l.data||(l.data={})).transition=o)}if(n){for(var c=[],h=[],d=0;d<n.length;d++){var u=n[d];u.data.transition=o,u.data.pos=u.elm.getBoundingClientRect(),i[u.key]?c.push(u):h.push(u)}this.kept=e(t,null,c),this.removed=h}return e(t,null,s)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(as),e.forEach(ls),e.forEach(cs),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var i=e.elm,n=i.style;Tr(i,t),n.transform=n.WebkitTransform=n.transitionDuration="",i.addEventListener(Sr,i._moveCb=function e(n){n&&n.target!==i||n&&!/transform$/.test(n.propertyName)||(i.removeEventListener(Sr,e),i._moveCb=null,Mr(i,t))})}})))},methods:{hasMove:function(e,t){if(!wr)return!1;if(this._hasMove)return this._hasMove;var i=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){yr(i,e)})),vr(i,t),i.style.display="none",this.$el.appendChild(i);var n=Dr(i);return this.$el.removeChild(i),this._hasMove=n.hasTransform}}}};Ci.config.mustUseProp=Mi,Ci.config.isReservedTag=Wi,Ci.config.isReservedAttr=Ei,Ci.config.getTagNamespace=Vi,Ci.config.isUnknownElement=function(e){if(!H)return!0;if(Wi(e))return!1;if(e=e.toLowerCase(),null!=Gi[e])return Gi[e];var t=document.createElement(e);return e.indexOf("-")>-1?Gi[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:Gi[e]=/HTMLUnknownElement/.test(t.toString())},A(Ci.options.directives,Qr),A(Ci.options.components,hs),Ci.prototype.__patch__=H?zr:E,Ci.prototype.$mount=function(e,t){return function(e,t,i){var n;return e.$el=t,e.$options.render||(e.$options.render=fe),ei(e,"beforeMount"),n=function(){e._update(e._render(),i)},new ui(e,n,E,{before:function(){e._isMounted&&!e._isDestroyed&&ei(e,"beforeUpdate")}},!0),i=!1,null==e.$vnode&&(e._isMounted=!0,ei(e,"mounted")),e}(this,e=e&&H?Ji(e):void 0,t)},H&&setTimeout((function(){N.devtools&&ne&&ne.emit("init",Ci)}),0);var ds,us=/\{\{((?:.|\r?\n)+?)\}\}/g,ps=/[-.*+?^${}()|[\]\/\\]/g,ms=x((function(e){var t=e[0].replace(ps,"\\$&"),i=e[1].replace(ps,"\\$&");return new RegExp(t+"((?:.|\\n)+?)"+i,"g")})),fs={staticKeys:["staticClass"],transformNode:function(e,t){t.warn;var i=Ln(e,"class");i&&(e.staticClass=JSON.stringify(i));var n=Bn(e,"class",!1);n&&(e.classBinding=n)},genData:function(e){var t="";return e.staticClass&&(t+="staticClass:"+e.staticClass+","),e.classBinding&&(t+="class:"+e.classBinding+","),t}},gs={staticKeys:["staticStyle"],transformNode:function(e,t){t.warn;var i=Ln(e,"style");i&&(e.staticStyle=JSON.stringify(sr(i)));var n=Bn(e,"style",!1);n&&(e.styleBinding=n)},genData:function(e){var t="";return e.staticStyle&&(t+="staticStyle:"+e.staticStyle+","),e.styleBinding&&(t+="style:("+e.styleBinding+"),"),t}},vs=p("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),ys=p("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),xs=p("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),bs=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,ws=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+?\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Cs="[a-zA-Z_][\\-\\.0-9_a-zA-Z"+Z.source+"]*",Ps="((?:"+Cs+"\\:)?"+Cs+")",ks=new RegExp("^<"+Ps),Ss=/^\s*(\/?)>/,Is=new RegExp("^<\\/"+Ps+"[^>]*>"),As=/^<!DOCTYPE [^>]+>/i,_s=/^<!\--/,Es=/^<!\[/,Ts=p("script,style,textarea",!0),Ms={},$s={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},Os=/&(?:lt|gt|quot|amp|#39);/g,Ds=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,Bs=p("pre,textarea",!0),Ls=function(e,t){return e&&Bs(e)&&"\n"===t[0]};function Rs(e,t){var i=t?Ds:Os;return e.replace(i,(function(e){return $s[e]}))}var Ns,Zs,Fs,js,zs,Us,Hs,qs,Ws=/^@|^v-on:/,Vs=/^v-|^@|^:|^#/,Gs=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Ks=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Js=/^\(|\)$/g,Ys=/^\[.*\]$/,Qs=/:(.*)$/,Xs=/^:|^\.|^v-bind:/,eo=/\.[^.\]]+(?=[^\]]*$)/g,to=/^v-slot(:|$)|^#/,io=/[\r\n]/,no=/[ \f\t\r\n]+/g,ro=x((function(e){return(ds=ds||document.createElement("div")).innerHTML=e,ds.textContent})),so="_empty_";function oo(e,t,i){return{type:1,tag:e,attrsList:t,attrsMap:po(t),rawAttrsMap:{},parent:i,children:[]}}function ao(e,t){var i,n;(n=Bn(i=e,"key"))&&(i.key=n),e.plain=!e.key&&!e.scopedSlots&&!e.attrsList.length,function(e){var t=Bn(e,"ref");t&&(e.ref=t,e.refInFor=function(e){for(var t=e;t;){if(void 0!==t.for)return!0;t=t.parent}return!1}(e))}(e),function(e){var t;"template"===e.tag?(t=Ln(e,"scope"),e.slotScope=t||Ln(e,"slot-scope")):(t=Ln(e,"slot-scope"))&&(e.slotScope=t);var i=Bn(e,"slot");if(i&&(e.slotTarget='""'===i?'"default"':i,e.slotTargetDynamic=!(!e.attrsMap[":slot"]&&!e.attrsMap["v-bind:slot"]),"template"===e.tag||e.slotScope||Tn(e,"slot",i,function(e,t){return e.rawAttrsMap[":"+t]||e.rawAttrsMap["v-bind:"+t]||e.rawAttrsMap[t]}(e,"slot"))),"template"===e.tag){var n=Rn(e,to);if(n){var r=ho(n),s=r.name,o=r.dynamic;e.slotTarget=s,e.slotTargetDynamic=o,e.slotScope=n.value||so}}else{var a=Rn(e,to);if(a){var l=e.scopedSlots||(e.scopedSlots={}),c=ho(a),h=c.name,d=c.dynamic,u=l[h]=oo("template",[],e);u.slotTarget=h,u.slotTargetDynamic=d,u.children=e.children.filter((function(e){if(!e.slotScope)return e.parent=u,!0})),u.slotScope=a.value||so,e.children=[],e.plain=!1}}}(e),function(e){"slot"===e.tag&&(e.slotName=Bn(e,"name"))}(e),function(e){var t;(t=Bn(e,"is"))&&(e.component=t),null!=Ln(e,"inline-template")&&(e.inlineTemplate=!0)}(e);for(var r=0;r<Fs.length;r++)e=Fs[r](e,t)||e;return function(e){var t,i,n,r,s,o,a,l,c=e.attrsList;for(t=0,i=c.length;t<i;t++)if(n=r=c[t].name,s=c[t].value,Vs.test(n))if(e.hasBindings=!0,(o=uo(n.replace(Vs,"")))&&(n=n.replace(eo,"")),Xs.test(n))n=n.replace(Xs,""),s=Sn(s),(l=Ys.test(n))&&(n=n.slice(1,-1)),o&&(o.prop&&!l&&"innerHtml"===(n=w(n))&&(n="innerHTML"),o.camel&&!l&&(n=w(n)),o.sync&&(a=Fn(s,"$event"),l?Dn(e,'"update:"+('+n+")",a,null,!1,0,c[t],!0):(Dn(e,"update:"+w(n),a,null,!1,0,c[t]),k(n)!==w(n)&&Dn(e,"update:"+k(n),a,null,!1,0,c[t])))),o&&o.prop||!e.component&&Hs(e.tag,e.attrsMap.type,n)?En(e,n,s,c[t],l):Tn(e,n,s,c[t],l);else if(Ws.test(n))n=n.replace(Ws,""),(l=Ys.test(n))&&(n=n.slice(1,-1)),Dn(e,n,s,o,!1,0,c[t],l);else{var h=(n=n.replace(Vs,"")).match(Qs),d=h&&h[1];l=!1,d&&(n=n.slice(0,-(d.length+1)),Ys.test(d)&&(d=d.slice(1,-1),l=!0)),$n(e,n,r,s,d,l,o,c[t])}else Tn(e,n,JSON.stringify(s),c[t]),!e.component&&"muted"===n&&Hs(e.tag,e.attrsMap.type,n)&&En(e,n,"true",c[t])}(e),e}function lo(e){var t;if(t=Ln(e,"v-for")){var i=function(e){var t=e.match(Gs);if(t){var i={};i.for=t[2].trim();var n=t[1].trim().replace(Js,""),r=n.match(Ks);return r?(i.alias=n.replace(Ks,"").trim(),i.iterator1=r[1].trim(),r[2]&&(i.iterator2=r[2].trim())):i.alias=n,i}}(t);i&&A(e,i)}}function co(e,t){e.ifConditions||(e.ifConditions=[]),e.ifConditions.push(t)}function ho(e){var t=e.name.replace(to,"");return t||"#"!==e.name[0]&&(t="default"),Ys.test(t)?{name:t.slice(1,-1),dynamic:!0}:{name:'"'+t+'"',dynamic:!1}}function uo(e){var t=e.match(eo);if(t){var i={};return t.forEach((function(e){i[e.slice(1)]=!0})),i}}function po(e){for(var t={},i=0,n=e.length;i<n;i++)t[e[i].name]=e[i].value;return t}var mo=/^xmlns:NS\d+/,fo=/^NS\d+:/;function go(e){return oo(e.tag,e.attrsList.slice(),e.parent)}var vo,yo,xo=[fs,gs,{preTransformNode:function(e,t){if("input"===e.tag){var i,n=e.attrsMap;if(!n["v-model"])return;if((n[":type"]||n["v-bind:type"])&&(i=Bn(e,"type")),n.type||i||!n["v-bind"]||(i="("+n["v-bind"]+").type"),i){var r=Ln(e,"v-if",!0),s=r?"&&("+r+")":"",o=null!=Ln(e,"v-else",!0),a=Ln(e,"v-else-if",!0),l=go(e);lo(l),Mn(l,"type","checkbox"),ao(l,t),l.processed=!0,l.if="("+i+")==='checkbox'"+s,co(l,{exp:l.if,block:l});var c=go(e);Ln(c,"v-for",!0),Mn(c,"type","radio"),ao(c,t),co(l,{exp:"("+i+")==='radio'"+s,block:c});var h=go(e);return Ln(h,"v-for",!0),Mn(h,":type",i),ao(h,t),co(l,{exp:r,block:h}),o?l.else=!0:a&&(l.elseif=a),l}}}}],bo={expectHTML:!0,modules:xo,directives:{model:function(e,t,i){var n=t.value,r=t.modifiers,s=e.tag,o=e.attrsMap.type;if(e.component)return Zn(e,n,r),!1;if("select"===s)!function(e,t,i){var n='var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(i&&i.number?"_n(val)":"val")+"});";Dn(e,"change",n=n+" "+Fn(t,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),null,!0)}(e,n,r);else if("input"===s&&"checkbox"===o)!function(e,t,i){var n=i&&i.number,r=Bn(e,"value")||"null",s=Bn(e,"true-value")||"true",o=Bn(e,"false-value")||"false";En(e,"checked","Array.isArray("+t+")?_i("+t+","+r+")>-1"+("true"===s?":("+t+")":":_q("+t+","+s+")")),Dn(e,"change","var $$a="+t+",$$el=$event.target,$$c=$$el.checked?("+s+"):("+o+");if(Array.isArray($$a)){var $$v="+(n?"_n("+r+")":r)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+Fn(t,"$$a.concat([$$v])")+")}else{$$i>-1&&("+Fn(t,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+Fn(t,"$$c")+"}",null,!0)}(e,n,r);else if("input"===s&&"radio"===o)!function(e,t,i){var n=i&&i.number,r=Bn(e,"value")||"null";En(e,"checked","_q("+t+","+(r=n?"_n("+r+")":r)+")"),Dn(e,"change",Fn(t,r),null,!0)}(e,n,r);else if("input"===s||"textarea"===s)!function(e,t,i){var n=e.attrsMap.type,r=i||{},s=r.lazy,o=r.number,a=r.trim,l=!s&&"range"!==n,c=s?"change":"range"===n?Vn:"input",h="$event.target.value";a&&(h="$event.target.value.trim()"),o&&(h="_n("+h+")");var d=Fn(t,h);l&&(d="if($event.target.composing)return;"+d),En(e,"value","("+t+")"),Dn(e,c,d,null,!0),(a||o)&&Dn(e,"blur","$forceUpdate()")}(e,n,r);else if(!N.isReservedTag(s))return Zn(e,n,r),!1;return!0},text:function(e,t){t.value&&En(e,"textContent","_s("+t.value+")",t)},html:function(e,t){t.value&&En(e,"innerHTML","_s("+t.value+")",t)}},isPreTag:function(e){return"pre"===e},isUnaryTag:vs,mustUseProp:Mi,canBeLeftOpenTag:ys,isReservedTag:Wi,getTagNamespace:Vi,staticKeys:function(e){return e.reduce((function(e,t){return e.concat(t.staticKeys||[])}),[]).join(",")}(xo)},wo=x((function(e){return p("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(e?","+e:""))}));var Co=/^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/,Po=/\([^)]*?\);*$/,ko=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,So={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Io={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},Ao=function(e){return"if("+e+")return null;"},_o={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:Ao("$event.target !== $event.currentTarget"),ctrl:Ao("!$event.ctrlKey"),shift:Ao("!$event.shiftKey"),alt:Ao("!$event.altKey"),meta:Ao("!$event.metaKey"),left:Ao("'button' in $event && $event.button !== 0"),middle:Ao("'button' in $event && $event.button !== 1"),right:Ao("'button' in $event && $event.button !== 2")};function Eo(e,t){var i=t?"nativeOn:":"on:",n="",r="";for(var s in e){var o=To(e[s]);e[s]&&e[s].dynamic?r+=s+","+o+",":n+='"'+s+'":'+o+","}return n="{"+n.slice(0,-1)+"}",r?i+"_d("+n+",["+r.slice(0,-1)+"])":i+n}function To(e){if(!e)return"function(){}";if(Array.isArray(e))return"["+e.map((function(e){return To(e)})).join(",")+"]";var t=ko.test(e.value),i=Co.test(e.value),n=ko.test(e.value.replace(Po,""));if(e.modifiers){var r="",s="",o=[];for(var a in e.modifiers)if(_o[a])s+=_o[a],So[a]&&o.push(a);else if("exact"===a){var l=e.modifiers;s+=Ao(["ctrl","shift","alt","meta"].filter((function(e){return!l[e]})).map((function(e){return"$event."+e+"Key"})).join("||"))}else o.push(a);return o.length&&(r+=function(e){return"if(!$event.type.indexOf('key')&&"+e.map(Mo).join("&&")+")return null;"}(o)),s&&(r+=s),"function($event){"+r+(t?"return "+e.value+".apply(null, arguments)":i?"return ("+e.value+").apply(null, arguments)":n?"return "+e.value:e.value)+"}"}return t||i?e.value:"function($event){"+(n?"return "+e.value:e.value)+"}"}function Mo(e){var t=parseInt(e,10);if(t)return"$event.keyCode!=="+t;var i=So[e],n=Io[e];return"_k($event.keyCode,"+JSON.stringify(e)+","+JSON.stringify(i)+",$event.key,"+JSON.stringify(n)+")"}var $o={on:function(e,t){e.wrapListeners=function(e){return"_g("+e+","+t.value+")"}},bind:function(e,t){e.wrapData=function(i){return"_b("+i+",'"+e.tag+"',"+t.value+","+(t.modifiers&&t.modifiers.prop?"true":"false")+(t.modifiers&&t.modifiers.sync?",true":"")+")"}},cloak:E},Oo=function(e){this.options=e,this.warn=e.warn||An,this.transforms=_n(e.modules,"transformCode"),this.dataGenFns=_n(e.modules,"genData"),this.directives=A(A({},$o),e.directives);var t=e.isReservedTag||T;this.maybeComponent=function(e){return!!e.component||!t(e.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function Do(e,t){var i=new Oo(t);return{render:"with(this){return "+(e?"script"===e.tag?"null":Bo(e,i):'_c("div")')+"}",staticRenderFns:i.staticRenderFns}}function Bo(e,t){if(e.parent&&(e.pre=e.pre||e.parent.pre),e.staticRoot&&!e.staticProcessed)return Lo(e,t);if(e.once&&!e.onceProcessed)return Ro(e,t);if(e.for&&!e.forProcessed)return Zo(e,t);if(e.if&&!e.ifProcessed)return No(e,t);if("template"!==e.tag||e.slotTarget||t.pre){if("slot"===e.tag)return function(e,t){var i=e.slotName||'"default"',n=Uo(e,t),r="_t("+i+(n?",function(){return "+n+"}":""),s=e.attrs||e.dynamicAttrs?Wo((e.attrs||[]).concat(e.dynamicAttrs||[]).map((function(e){return{name:w(e.name),value:e.value,dynamic:e.dynamic}}))):null,o=e.attrsMap["v-bind"];return!s&&!o||n||(r+=",null"),s&&(r+=","+s),o&&(r+=(s?"":",null")+","+o),r+")"}(e,t);var i;if(e.component)i=function(e,t,i){var n=t.inlineTemplate?null:Uo(t,i,!0);return"_c("+e+","+Fo(t,i)+(n?","+n:"")+")"}(e.component,e,t);else{var n;(!e.plain||e.pre&&t.maybeComponent(e))&&(n=Fo(e,t));var r=e.inlineTemplate?null:Uo(e,t,!0);i="_c('"+e.tag+"'"+(n?","+n:"")+(r?","+r:"")+")"}for(var s=0;s<t.transforms.length;s++)i=t.transforms[s](e,i);return i}return Uo(e,t)||"void 0"}function Lo(e,t){e.staticProcessed=!0;var i=t.pre;return e.pre&&(t.pre=e.pre),t.staticRenderFns.push("with(this){return "+Bo(e,t)+"}"),t.pre=i,"_m("+(t.staticRenderFns.length-1)+(e.staticInFor?",true":"")+")"}function Ro(e,t){if(e.onceProcessed=!0,e.if&&!e.ifProcessed)return No(e,t);if(e.staticInFor){for(var i="",n=e.parent;n;){if(n.for){i=n.key;break}n=n.parent}return i?"_o("+Bo(e,t)+","+t.onceId+++","+i+")":Bo(e,t)}return Lo(e,t)}function No(e,t,i,n){return e.ifProcessed=!0,function e(t,i,n,r){if(!t.length)return r||"_e()";var s=t.shift();return s.exp?"("+s.exp+")?"+o(s.block)+":"+e(t,i,n,r):""+o(s.block);function o(e){return n?n(e,i):e.once?Ro(e,i):Bo(e,i)}}(e.ifConditions.slice(),t,i,n)}function Zo(e,t,i,n){var r=e.for,s=e.alias,o=e.iterator1?","+e.iterator1:"",a=e.iterator2?","+e.iterator2:"";return e.forProcessed=!0,(n||"_l")+"(("+r+"),function("+s+o+a+"){return "+(i||Bo)(e,t)+"})"}function Fo(e,t){var i="{",n=function(e,t){var i=e.directives;if(i){var n,r,s,o,a="directives:[",l=!1;for(n=0,r=i.length;n<r;n++){s=i[n],o=!0;var c=t.directives[s.name];c&&(o=!!c(e,s,t.warn)),o&&(l=!0,a+='{name:"'+s.name+'",rawName:"'+s.rawName+'"'+(s.value?",value:("+s.value+"),expression:"+JSON.stringify(s.value):"")+(s.arg?",arg:"+(s.isDynamicArg?s.arg:'"'+s.arg+'"'):"")+(s.modifiers?",modifiers:"+JSON.stringify(s.modifiers):"")+"},")}return l?a.slice(0,-1)+"]":void 0}}(e,t);n&&(i+=n+","),e.key&&(i+="key:"+e.key+","),e.ref&&(i+="ref:"+e.ref+","),e.refInFor&&(i+="refInFor:true,"),e.pre&&(i+="pre:true,"),e.component&&(i+='tag:"'+e.tag+'",');for(var r=0;r<t.dataGenFns.length;r++)i+=t.dataGenFns[r](e);if(e.attrs&&(i+="attrs:"+Wo(e.attrs)+","),e.props&&(i+="domProps:"+Wo(e.props)+","),e.events&&(i+=Eo(e.events,!1)+","),e.nativeEvents&&(i+=Eo(e.nativeEvents,!0)+","),e.slotTarget&&!e.slotScope&&(i+="slot:"+e.slotTarget+","),e.scopedSlots&&(i+=function(e,t,i){var n=e.for||Object.keys(t).some((function(e){var i=t[e];return i.slotTargetDynamic||i.if||i.for||jo(i)})),r=!!e.if;if(!n)for(var s=e.parent;s;){if(s.slotScope&&s.slotScope!==so||s.for){n=!0;break}s.if&&(r=!0),s=s.parent}var o=Object.keys(t).map((function(e){return zo(t[e],i)})).join(",");return"scopedSlots:_u(["+o+"]"+(n?",null,true":"")+(!n&&r?",null,false,"+function(e){for(var t=5381,i=e.length;i;)t=33*t^e.charCodeAt(--i);return t>>>0}(o):"")+")"}(e,e.scopedSlots,t)+","),e.model&&(i+="model:{value:"+e.model.value+",callback:"+e.model.callback+",expression:"+e.model.expression+"},"),e.inlineTemplate){var s=function(e,t){var i=e.children[0];if(i&&1===i.type){var n=Do(i,t.options);return"inlineTemplate:{render:function(){"+n.render+"},staticRenderFns:["+n.staticRenderFns.map((function(e){return"function(){"+e+"}"})).join(",")+"]}"}}(e,t);s&&(i+=s+",")}return i=i.replace(/,$/,"")+"}",e.dynamicAttrs&&(i="_b("+i+',"'+e.tag+'",'+Wo(e.dynamicAttrs)+")"),e.wrapData&&(i=e.wrapData(i)),e.wrapListeners&&(i=e.wrapListeners(i)),i}function jo(e){return 1===e.type&&("slot"===e.tag||e.children.some(jo))}function zo(e,t){var i=e.attrsMap["slot-scope"];if(e.if&&!e.ifProcessed&&!i)return No(e,t,zo,"null");if(e.for&&!e.forProcessed)return Zo(e,t,zo);var n=e.slotScope===so?"":String(e.slotScope),r="function("+n+"){return "+("template"===e.tag?e.if&&i?"("+e.if+")?"+(Uo(e,t)||"undefined")+":undefined":Uo(e,t)||"undefined":Bo(e,t))+"}",s=n?"":",proxy:true";return"{key:"+(e.slotTarget||'"default"')+",fn:"+r+s+"}"}function Uo(e,t,i,n,r){var s=e.children;if(s.length){var o=s[0];if(1===s.length&&o.for&&"template"!==o.tag&&"slot"!==o.tag){var a=i?t.maybeComponent(o)?",1":",0":"";return""+(n||Bo)(o,t)+a}var l=i?function(e,t){for(var i=0,n=0;n<e.length;n++){var r=e[n];if(1===r.type){if(Ho(r)||r.ifConditions&&r.ifConditions.some((function(e){return Ho(e.block)}))){i=2;break}(t(r)||r.ifConditions&&r.ifConditions.some((function(e){return t(e.block)})))&&(i=1)}}return i}(s,t.maybeComponent):0,c=r||qo;return"["+s.map((function(e){return c(e,t)})).join(",")+"]"+(l?","+l:"")}}function Ho(e){return void 0!==e.for||"template"===e.tag||"slot"===e.tag}function qo(e,t){return 1===e.type?Bo(e,t):3===e.type&&e.isComment?(n=e,"_e("+JSON.stringify(n.text)+")"):"_v("+(2===(i=e).type?i.expression:Vo(JSON.stringify(i.text)))+")";var i,n}function Wo(e){for(var t="",i="",n=0;n<e.length;n++){var r=e[n],s=Vo(r.value);r.dynamic?i+=r.name+","+s+",":t+='"'+r.name+'":'+s+","}return t="{"+t.slice(0,-1)+"}",i?"_d("+t+",["+i.slice(0,-1)+"])":t}function Vo(e){return e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function Go(e,t){try{return new Function(e)}catch(i){return t.push({err:i,code:e}),E}}function Ko(e){var t=Object.create(null);return function(i,n,r){(n=A({},n)).warn,delete n.warn;var s=n.delimiters?String(n.delimiters)+i:i;if(t[s])return t[s];var o=e(i,n),a={},l=[];return a.render=Go(o.render,l),a.staticRenderFns=o.staticRenderFns.map((function(e){return Go(e,l)})),t[s]=a}}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b");var Jo,Yo,Qo=(Jo=function(e,t){var i=function(e,t){Ns=t.warn||An,Us=t.isPreTag||T,Hs=t.mustUseProp||T,qs=t.getTagNamespace||T,t.isReservedTag,Fs=_n(t.modules,"transformNode"),js=_n(t.modules,"preTransformNode"),zs=_n(t.modules,"postTransformNode"),Zs=t.delimiters;var i,n,r=[],s=!1!==t.preserveWhitespace,o=t.whitespace,a=!1,l=!1;function c(e){if(h(e),a||e.processed||(e=ao(e,t)),r.length||e===i||i.if&&(e.elseif||e.else)&&co(i,{exp:e.elseif,block:e}),n&&!e.forbidden)if(e.elseif||e.else)o=e,(c=function(e){for(var t=e.length;t--;){if(1===e[t].type)return e[t];e.pop()}}(n.children))&&c.if&&co(c,{exp:o.elseif,block:o});else{if(e.slotScope){var s=e.slotTarget||'"default"';(n.scopedSlots||(n.scopedSlots={}))[s]=e}n.children.push(e),e.parent=n}var o,c;e.children=e.children.filter((function(e){return!e.slotScope})),h(e),e.pre&&(a=!1),Us(e.tag)&&(l=!1);for(var d=0;d<zs.length;d++)zs[d](e,t)}function h(e){if(!l)for(var t;(t=e.children[e.children.length-1])&&3===t.type&&" "===t.text;)e.children.pop()}return function(e,t){for(var i,n,r=[],s=t.expectHTML,o=t.isUnaryTag||T,a=t.canBeLeftOpenTag||T,l=0;e;){if(i=e,n&&Ts(n)){var c=0,h=n.toLowerCase(),d=Ms[h]||(Ms[h]=new RegExp("([\\s\\S]*?)(</"+h+"[^>]*>)","i")),u=e.replace(d,(function(e,i,n){return c=n.length,Ts(h)||"noscript"===h||(i=i.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),Ls(h,i)&&(i=i.slice(1)),t.chars&&t.chars(i),""}));l+=e.length-u.length,e=u,I(h,l-c,l)}else{var p=e.indexOf("<");if(0===p){if(_s.test(e)){var m=e.indexOf("--\x3e");if(m>=0){t.shouldKeepComment&&t.comment(e.substring(4,m),l,l+m+3),P(m+3);continue}}if(Es.test(e)){var f=e.indexOf("]>");if(f>=0){P(f+2);continue}}var g=e.match(As);if(g){P(g[0].length);continue}var v=e.match(Is);if(v){var y=l;P(v[0].length),I(v[1],y,l);continue}var x=k();if(x){S(x),Ls(x.tagName,e)&&P(1);continue}}var b=void 0,w=void 0,C=void 0;if(p>=0){for(w=e.slice(p);!(Is.test(w)||ks.test(w)||_s.test(w)||Es.test(w)||(C=w.indexOf("<",1))<0);)p+=C,w=e.slice(p);b=e.substring(0,p)}p<0&&(b=e),b&&P(b.length),t.chars&&b&&t.chars(b,l-b.length,l)}if(e===i){t.chars&&t.chars(e);break}}function P(t){l+=t,e=e.substring(t)}function k(){var t=e.match(ks);if(t){var i,n,r={tagName:t[1],attrs:[],start:l};for(P(t[0].length);!(i=e.match(Ss))&&(n=e.match(ws)||e.match(bs));)n.start=l,P(n[0].length),n.end=l,r.attrs.push(n);if(i)return r.unarySlash=i[1],P(i[0].length),r.end=l,r}}function S(e){var i=e.tagName,l=e.unarySlash;s&&("p"===n&&xs(i)&&I(n),a(i)&&n===i&&I(i));for(var c=o(i)||!!l,h=e.attrs.length,d=new Array(h),u=0;u<h;u++){var p=e.attrs[u],m=p[3]||p[4]||p[5]||"",f="a"===i&&"href"===p[1]?t.shouldDecodeNewlinesForHref:t.shouldDecodeNewlines;d[u]={name:p[1],value:Rs(m,f)}}c||(r.push({tag:i,lowerCasedTag:i.toLowerCase(),attrs:d,start:e.start,end:e.end}),n=i),t.start&&t.start(i,d,c,e.start,e.end)}function I(e,i,s){var o,a;if(null==i&&(i=l),null==s&&(s=l),e)for(a=e.toLowerCase(),o=r.length-1;o>=0&&r[o].lowerCasedTag!==a;o--);else o=0;if(o>=0){for(var c=r.length-1;c>=o;c--)t.end&&t.end(r[c].tag,i,s);r.length=o,n=o&&r[o-1].tag}else"br"===a?t.start&&t.start(e,[],!0,i,s):"p"===a&&(t.start&&t.start(e,[],!1,i,s),t.end&&t.end(e,i,s))}I()}(e,{warn:Ns,expectHTML:t.expectHTML,isUnaryTag:t.isUnaryTag,canBeLeftOpenTag:t.canBeLeftOpenTag,shouldDecodeNewlines:t.shouldDecodeNewlines,shouldDecodeNewlinesForHref:t.shouldDecodeNewlinesForHref,shouldKeepComment:t.comments,outputSourceRange:t.outputSourceRange,start:function(e,s,o,h,d){var u=n&&n.ns||qs(e);G&&"svg"===u&&(s=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];mo.test(n.name)||(n.name=n.name.replace(fo,""),t.push(n))}return t}(s));var p,m=oo(e,s,n);u&&(m.ns=u),"style"!==(p=m).tag&&("script"!==p.tag||p.attrsMap.type&&"text/javascript"!==p.attrsMap.type)||ie()||(m.forbidden=!0);for(var f=0;f<js.length;f++)m=js[f](m,t)||m;a||(function(e){null!=Ln(e,"v-pre")&&(e.pre=!0)}(m),m.pre&&(a=!0)),Us(m.tag)&&(l=!0),a?function(e){var t=e.attrsList,i=t.length;if(i)for(var n=e.attrs=new Array(i),r=0;r<i;r++)n[r]={name:t[r].name,value:JSON.stringify(t[r].value)},null!=t[r].start&&(n[r].start=t[r].start,n[r].end=t[r].end);else e.pre||(e.plain=!0)}(m):m.processed||(lo(m),function(e){var t=Ln(e,"v-if");if(t)e.if=t,co(e,{exp:t,block:e});else{null!=Ln(e,"v-else")&&(e.else=!0);var i=Ln(e,"v-else-if");i&&(e.elseif=i)}}(m),function(e){null!=Ln(e,"v-once")&&(e.once=!0)}(m)),i||(i=m),o?c(m):(n=m,r.push(m))},end:function(e,t,i){var s=r[r.length-1];r.length-=1,n=r[r.length-1],c(s)},chars:function(e,t,i){if(n&&(!G||"textarea"!==n.tag||n.attrsMap.placeholder!==e)){var r,c,h,d=n.children;(e=l||e.trim()?"script"===(r=n).tag||"style"===r.tag?e:ro(e):d.length?o?"condense"===o&&io.test(e)?"":" ":s?" ":"":"")&&(l||"condense"!==o||(e=e.replace(no," ")),!a&&" "!==e&&(c=function(e,t){var i=t?ms(t):us;if(i.test(e)){for(var n,r,s,o=[],a=[],l=i.lastIndex=0;n=i.exec(e);){(r=n.index)>l&&(a.push(s=e.slice(l,r)),o.push(JSON.stringify(s)));var c=Sn(n[1].trim());o.push("_s("+c+")"),a.push({"@binding":c}),l=r+n[0].length}return l<e.length&&(a.push(s=e.slice(l)),o.push(JSON.stringify(s))),{expression:o.join("+"),tokens:a}}}(e,Zs))?h={type:2,expression:c.expression,tokens:c.tokens,text:e}:" "===e&&d.length&&" "===d[d.length-1].text||(h={type:3,text:e}),h&&d.push(h))}},comment:function(e,t,i){if(n){var r={type:3,text:e,isComment:!0};n.children.push(r)}}}),i}(e.trim(),t);!1!==t.optimize&&function(e,t){e&&(vo=wo(t.staticKeys||""),yo=t.isReservedTag||T,function e(t){if(t.static=function(e){return 2!==e.type&&(3===e.type||!(!e.pre&&(e.hasBindings||e.if||e.for||m(e.tag)||!yo(e.tag)||function(e){for(;e.parent;){if("template"!==(e=e.parent).tag)return!1;if(e.for)return!0}return!1}(e)||!Object.keys(e).every(vo))))}(t),1===t.type){if(!yo(t.tag)&&"slot"!==t.tag&&null==t.attrsMap["inline-template"])return;for(var i=0,n=t.children.length;i<n;i++){var r=t.children[i];e(r),r.static||(t.static=!1)}if(t.ifConditions)for(var s=1,o=t.ifConditions.length;s<o;s++){var a=t.ifConditions[s].block;e(a),a.static||(t.static=!1)}}}(e),function e(t,i){if(1===t.type){if((t.static||t.once)&&(t.staticInFor=i),t.static&&t.children.length&&(1!==t.children.length||3!==t.children[0].type))return void(t.staticRoot=!0);if(t.staticRoot=!1,t.children)for(var n=0,r=t.children.length;n<r;n++)e(t.children[n],i||!!t.for);if(t.ifConditions)for(var s=1,o=t.ifConditions.length;s<o;s++)e(t.ifConditions[s].block,i)}}(e,!1))}(i,t);var n=Do(i,t);return{ast:i,render:n.render,staticRenderFns:n.staticRenderFns}},function(e){function t(t,i){var n=Object.create(e),r=[],s=[];if(i)for(var o in i.modules&&(n.modules=(e.modules||[]).concat(i.modules)),i.directives&&(n.directives=A(Object.create(e.directives||null),i.directives)),i)"modules"!==o&&"directives"!==o&&(n[o]=i[o]);n.warn=function(e,t,i){(i?s:r).push(e)};var a=Jo(t.trim(),n);return a.errors=r,a.tips=s,a}return{compile:t,compileToFunctions:Ko(t)}})(bo),Xo=(Qo.compile,Qo.compileToFunctions);function ea(e){return(Yo=Yo||document.createElement("div")).innerHTML=e?'<a href="\n"/>':'<div a="\n"/>',Yo.innerHTML.indexOf("&#10;")>0}var ta=!!H&&ea(!1),ia=!!H&&ea(!0),na=x((function(e){var t=Ji(e);return t&&t.innerHTML})),ra=Ci.prototype.$mount;return Ci.prototype.$mount=function(e,t){if((e=e&&Ji(e))===document.body||e===document.documentElement)return this;var i=this.$options;if(!i.render){var n=i.template;if(n)if("string"==typeof n)"#"===n.charAt(0)&&(n=na(n));else{if(!n.nodeType)return this;n=n.innerHTML}else e&&(n=function(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}(e));if(n){var r=Xo(n,{outputSourceRange:!1,shouldDecodeNewlines:ta,shouldDecodeNewlinesForHref:ia,delimiters:i.delimiters,comments:i.comments},this),s=r.render,o=r.staticRenderFns;i.render=s,i.staticRenderFns=o}}return ra.call(this,e,t)},Ci.compile=Xo,Ci}()},2868:()=>{},4777:()=>{},9830:()=>{},209:()=>{},7414:()=>{},2618:e=>{e.exports={nanoid:(e=21)=>{let t="",i=e;for(;i--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t=21)=>(i=t)=>{let n="",r=i;for(;r--;)n+=e[Math.random()*e.length|0];return n}}},2300:(e,t,i)=>{"use strict";i.d(t,{cv:()=>m});const n="function"==typeof btoa,r="function"==typeof Buffer,s=("function"==typeof TextDecoder&&new TextDecoder,"function"==typeof TextEncoder?new TextEncoder:void 0),o=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),a=((e=>{let t={};e.forEach(((e,i)=>t[e]=i))})(o),String.fromCharCode.bind(String)),l=("function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>"+"==e?"-":"_"))),c=n?e=>btoa(e):r?e=>Buffer.from(e,"binary").toString("base64"):e=>{let t,i,n,r,s="";const a=e.length%3;for(let a=0;a<e.length;){if((i=e.charCodeAt(a++))>255||(n=e.charCodeAt(a++))>255||(r=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=i<<16|n<<8|r,s+=o[t>>18&63]+o[t>>12&63]+o[t>>6&63]+o[63&t]}return a?s.slice(0,a-3)+"===".substring(a):s},h=r?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let i=0,n=e.length;i<n;i+=4096)t.push(a.apply(null,e.subarray(i,i+4096)));return c(t.join(""))},d=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?a(192|t>>>6)+a(128|63&t):a(224|t>>>12&15)+a(128|t>>>6&63)+a(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return a(240|t>>>18&7)+a(128|t>>>12&63)+a(128|t>>>6&63)+a(128|63&t)},u=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,p=r?e=>Buffer.from(e,"utf8").toString("base64"):s?e=>h(s.encode(e)):e=>c(e.replace(u,d)),m=(e,t=!1)=>t?l(p(e)):p(e)}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,i),s.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=i(2934),t=i.n(e);function n(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}var r={name:"router-view",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,t){var i=t.props,n=t.children,r=t.parent,s=t.data;s.routerView=!0;for(var o=r.$createElement,a=i.name,l=r.$route,c=r._routerViewCache||(r._routerViewCache={}),h=0,d=!1;r&&r._routerRoot!==r;)r.$vnode&&r.$vnode.data.routerView&&h++,r._inactive&&(d=!0),r=r.$parent;if(s.routerViewDepth=h,d)return o(c[a],s,n);var u=l.matched[h];if(!u)return c[a]=null,o();var p=c[a]=u.components[a];s.registerRouteInstance=function(e,t){var i=u.instances[a];(t&&i!==e||!t&&i===e)&&(u.instances[a]=t)},(s.hook||(s.hook={})).prepatch=function(e,t){u.instances[a]=t.componentInstance};var m=s.props=function(e,t){switch(typeof t){case"undefined":return;case"object":return t;case"function":return t(e);case"boolean":return t?e.params:void 0}}(l,u.props&&u.props[a]);if(m){m=s.props=function(e,t){for(var i in t)e[i]=t[i];return e}({},m);var f=s.attrs=s.attrs||{};for(var g in m)p.props&&g in p.props||(f[g]=m[g],delete m[g])}return o(p,s,n)}},s=/[!'()*]/g,o=function(e){return"%"+e.charCodeAt(0).toString(16)},a=/%2C/g,l=function(e){return encodeURIComponent(e).replace(s,o).replace(a,",")},c=decodeURIComponent;function h(e){var t={};return(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var i=e.replace(/\+/g," ").split("="),n=c(i.shift()),r=i.length>0?c(i.join("=")):null;void 0===t[n]?t[n]=r:Array.isArray(t[n])?t[n].push(r):t[n]=[t[n],r]})),t):t}function d(e){var t=e?Object.keys(e).map((function(t){var i=e[t];if(void 0===i)return"";if(null===i)return l(t);if(Array.isArray(i)){var n=[];return i.forEach((function(e){void 0!==e&&(null===e?n.push(l(t)):n.push(l(t)+"="+l(e)))})),n.join("&")}return l(t)+"="+l(i)})).filter((function(e){return e.length>0})).join("&"):null;return t?"?"+t:""}var u=/\/?$/;function p(e,t,i,n){var r=n&&n.options.stringifyQuery,s=t.query||{};try{s=m(s)}catch(e){}var o={name:t.name||e&&e.name,meta:e&&e.meta||{},path:t.path||"/",hash:t.hash||"",query:s,params:t.params||{},fullPath:v(t,r),matched:e?g(e):[]};return i&&(o.redirectedFrom=v(i,r)),Object.freeze(o)}function m(e){if(Array.isArray(e))return e.map(m);if(e&&"object"==typeof e){var t={};for(var i in e)t[i]=m(e[i]);return t}return e}var f=p(null,{path:"/"});function g(e){for(var t=[];e;)t.unshift(e),e=e.parent;return t}function v(e,t){var i=e.path,n=e.query;void 0===n&&(n={});var r=e.hash;return void 0===r&&(r=""),(i||"/")+(t||d)(n)+r}function y(e,t){return t===f?e===t:!!t&&(e.path&&t.path?e.path.replace(u,"")===t.path.replace(u,"")&&e.hash===t.hash&&x(e.query,t.query):!(!e.name||!t.name)&&e.name===t.name&&e.hash===t.hash&&x(e.query,t.query)&&x(e.params,t.params))}function x(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),!e||!t)return e===t;var i=Object.keys(e),n=Object.keys(t);return i.length===n.length&&i.every((function(i){var n=e[i],r=t[i];return"object"==typeof n&&"object"==typeof r?x(n,r):String(n)===String(r)}))}var b,w={name:"router-link",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:[String,Array],default:"click"}},render:function(e){var t=this,i=this.$router,n=this.$route,r=i.resolve(this.to,n,this.append),s=r.location,o=r.route,a=r.href,l={},c=i.options.linkActiveClass,h=i.options.linkExactActiveClass,d=null==c?"router-link-active":c,m=null==h?"router-link-exact-active":h,f=null==this.activeClass?d:this.activeClass,g=null==this.exactActiveClass?m:this.exactActiveClass,v=s.path?p(null,s,null,i):o;l[g]=y(n,v),l[f]=this.exact?l[g]:function(e,t){return 0===e.path.replace(u,"/").indexOf(t.path.replace(u,"/"))&&(!t.hash||e.hash===t.hash)&&function(e,t){for(var i in t)if(!(i in e))return!1;return!0}(e.query,t.query)}(n,v);var x=function(e){C(e)&&(t.replace?i.replace(s):i.push(s))},w={click:C};Array.isArray(this.event)?this.event.forEach((function(e){w[e]=x})):w[this.event]=x;var k={class:l};if("a"===this.tag)k.on=w,k.attrs={href:a};else{var S=P(this.$slots.default);if(S){S.isStatic=!1;var I=b.util.extend;(S.data=I({},S.data)).on=w,(S.data.attrs=I({},S.data.attrs)).href=a}else k.on=w}return e(this.tag,k,this.$slots.default)}};function C(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||void 0!==e.button&&0!==e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function P(e){if(e)for(var t,i=0;i<e.length;i++){if("a"===(t=e[i]).tag)return t;if(t.children&&(t=P(t.children)))return t}}var k="undefined"!=typeof window;function S(e,t,i){var n=e.charAt(0);if("/"===n)return e;if("?"===n||"#"===n)return t+e;var r=t.split("/");i&&r[r.length-1]||r.pop();for(var s=e.replace(/^\//,"").split("/"),o=0;o<s.length;o++){var a=s[o];".."===a?r.pop():"."!==a&&r.push(a)}return""!==r[0]&&r.unshift(""),r.join("/")}function I(e){return e.replace(/\/\//g,"/")}var A=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},_=function e(t,i,n){return A(i)||(n=i||n,i=[]),n=n||{},t instanceof RegExp?function(e,t){var i=e.source.match(/\((?!\?)/g);if(i)for(var n=0;n<i.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return N(e,t)}(t,i):A(t)?function(t,i,n){for(var r=[],s=0;s<t.length;s++)r.push(e(t[s],i,n).source);return N(new RegExp("(?:"+r.join("|")+")",Z(n)),i)}(t,i,n):function(e,t,i){return F(O(e,i),t,i)}(t,i,n)},E=O,T=B,M=F,$=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function O(e,t){for(var i,n=[],r=0,s=0,o="",a=t&&t.delimiter||"/";null!=(i=$.exec(e));){var l=i[0],c=i[1],h=i.index;if(o+=e.slice(s,h),s=h+l.length,c)o+=c[1];else{var d=e[s],u=i[2],p=i[3],m=i[4],f=i[5],g=i[6],v=i[7];o&&(n.push(o),o="");var y=null!=u&&null!=d&&d!==u,x="+"===g||"*"===g,b="?"===g||"*"===g,w=i[2]||a,C=m||f;n.push({name:p||r++,prefix:u||"",delimiter:w,optional:b,repeat:x,partial:y,asterisk:!!v,pattern:C?R(C):v?".*":"[^"+L(w)+"]+?"})}}return s<e.length&&(o+=e.substr(s)),o&&n.push(o),n}function D(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function B(e){for(var t=new Array(e.length),i=0;i<e.length;i++)"object"==typeof e[i]&&(t[i]=new RegExp("^(?:"+e[i].pattern+")$"));return function(i,n){for(var r="",s=i||{},o=(n||{}).pretty?D:encodeURIComponent,a=0;a<e.length;a++){var l=e[a];if("string"!=typeof l){var c,h=s[l.name];if(null==h){if(l.optional){l.partial&&(r+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(A(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(c=o(h[d]),!t[a].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(c)+"`");r+=(0===d?l.prefix:l.delimiter)+c}}else{if(c=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):o(h),!t[a].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+c+'"');r+=l.prefix+c}}else r+=l}return r}}function L(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function R(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function N(e,t){return e.keys=t,e}function Z(e){return e.sensitive?"":"i"}function F(e,t,i){A(t)||(i=t||i,t=[]);for(var n=(i=i||{}).strict,r=!1!==i.end,s="",o=0;o<e.length;o++){var a=e[o];if("string"==typeof a)s+=L(a);else{var l=L(a.prefix),c="(?:"+a.pattern+")";t.push(a),a.repeat&&(c+="(?:"+l+c+")*"),s+=c=a.optional?a.partial?l+"("+c+")?":"(?:"+l+"("+c+"))?":l+"("+c+")"}}var h=L(i.delimiter||"/"),d=s.slice(-h.length)===h;return n||(s=(d?s.slice(0,-h.length):s)+"(?:"+h+"(?=$))?"),s+=r?"$":n&&d?"":"(?="+h+"|$)",N(new RegExp("^"+s,Z(i)),t)}_.parse=E,_.compile=function(e,t){return B(O(e,t))},_.tokensToFunction=T,_.tokensToRegExp=M;var j=Object.create(null);function z(e,t,i){try{return(j[e]||(j[e]=_.compile(e)))(t||{},{pretty:!0})}catch(e){return""}}function U(e,t,i,n){var r=t||[],s=i||Object.create(null),o=n||Object.create(null);e.forEach((function(e){H(r,s,o,e)}));for(var a=0,l=r.length;a<l;a++)"*"===r[a]&&(r.push(r.splice(a,1)[0]),l--,a--);return{pathList:r,pathMap:s,nameMap:o}}function H(e,t,i,n,r,s){var o=n.path,a=n.name,l=n.pathToRegexpOptions||{},c=function(e,t,i){return i||(e=e.replace(/\/$/,"")),"/"===e[0]||null==t?e:I(t.path+"/"+e)}(o,r,l.strict);"boolean"==typeof n.caseSensitive&&(l.sensitive=n.caseSensitive);var h={path:c,regex:q(c,l),components:n.components||{default:n.component},instances:{},name:a,parent:r,matchAs:s,redirect:n.redirect,beforeEnter:n.beforeEnter,meta:n.meta||{},props:null==n.props?{}:n.components?n.props:{default:n.props}};n.children&&n.children.forEach((function(n){var r=s?I(s+"/"+n.path):void 0;H(e,t,i,n,h,r)})),void 0!==n.alias&&(Array.isArray(n.alias)?n.alias:[n.alias]).forEach((function(s){var o={path:s,children:n.children};H(e,t,i,o,r,h.path||"/")})),t[h.path]||(e.push(h.path),t[h.path]=h),a&&(i[a]||(i[a]=h))}function q(e,t){return _(e,[],t)}function W(e,t,i,n){var r="string"==typeof e?{path:e}:e;if(r.name||r._normalized)return r;if(!r.path&&r.params&&t){(r=V({},r))._normalized=!0;var s=V(V({},t.params),r.params);if(t.name)r.name=t.name,r.params=s;else if(t.matched.length){var o=t.matched[t.matched.length-1].path;r.path=z(o,s,t.path)}return r}var a=function(e){var t="",i="",n=e.indexOf("#");n>=0&&(t=e.slice(n),e=e.slice(0,n));var r=e.indexOf("?");return r>=0&&(i=e.slice(r+1),e=e.slice(0,r)),{path:e,query:i,hash:t}}(r.path||""),l=t&&t.path||"/",c=a.path?S(a.path,l,i||r.append):l,d=function(e,t,i){void 0===t&&(t={});var n,r=i||h;try{n=r(e||"")}catch(e){n={}}for(var s in t)n[s]=t[s];return n}(a.query,r.query,n&&n.options.parseQuery),u=r.hash||a.hash;return u&&"#"!==u.charAt(0)&&(u="#"+u),{_normalized:!0,path:c,query:d,hash:u}}function V(e,t){for(var i in t)e[i]=t[i];return e}function G(e,t){var i=U(e),n=i.pathList,r=i.pathMap,s=i.nameMap;function o(e,i,o){var l=W(e,i,!1,t),c=l.name;if(c){var h=s[c];if(!h)return a(null,l);var d=h.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!=typeof l.params&&(l.params={}),i&&"object"==typeof i.params)for(var u in i.params)!(u in l.params)&&d.indexOf(u)>-1&&(l.params[u]=i.params[u]);if(h)return l.path=z(h.path,l.params),a(h,l,o)}else if(l.path){l.params={};for(var p=0;p<n.length;p++){var m=n[p],f=r[m];if(K(f.regex,l.path,l.params))return a(f,l,o)}}return a(null,l)}function a(e,i,n){return e&&e.redirect?function(e,i){var n=e.redirect,r="function"==typeof n?n(p(e,i,null,t)):n;if("string"==typeof r&&(r={path:r}),!r||"object"!=typeof r)return a(null,i);var l=r,c=l.name,h=l.path,d=i.query,u=i.hash,m=i.params;if(d=l.hasOwnProperty("query")?l.query:d,u=l.hasOwnProperty("hash")?l.hash:u,m=l.hasOwnProperty("params")?l.params:m,c)return s[c],o({_normalized:!0,name:c,query:d,hash:u,params:m},void 0,i);if(h){var f=function(e,t){return S(e,t.parent?t.parent.path:"/",!0)}(h,e);return o({_normalized:!0,path:z(f,m),query:d,hash:u},void 0,i)}return a(null,i)}(e,n||i):e&&e.matchAs?function(e,t,i){var n=o({_normalized:!0,path:z(i,t.params)});if(n){var r=n.matched,s=r[r.length-1];return t.params=n.params,a(s,t)}return a(null,t)}(0,i,e.matchAs):p(e,i,n,t)}return{match:o,addRoutes:function(e){U(e,n,r,s)}}}function K(e,t,i){var n=t.match(e);if(!n)return!1;if(!i)return!0;for(var r=1,s=n.length;r<s;++r){var o=e.keys[r-1],a="string"==typeof n[r]?decodeURIComponent(n[r]):n[r];o&&(i[o.name]=a)}return!0}var J=Object.create(null);function Y(){window.history.replaceState({key:ce()},""),window.addEventListener("popstate",(function(e){X(),e.state&&e.state.key&&function(e){ae=e}(e.state.key)}))}function Q(e,t,i,n){if(e.app){var r=e.options.scrollBehavior;r&&e.app.$nextTick((function(){var e=function(){var e=ce();if(e)return J[e]}(),s=r(t,i,n?e:null);s&&("function"==typeof s.then?s.then((function(t){ne(t,e)})).catch((function(e){})):ne(s,e))}))}}function X(){var e=ce();e&&(J[e]={x:window.pageXOffset,y:window.pageYOffset})}function ee(e){return ie(e.x)||ie(e.y)}function te(e){return{x:ie(e.x)?e.x:window.pageXOffset,y:ie(e.y)?e.y:window.pageYOffset}}function ie(e){return"number"==typeof e}function ne(e,t){var i,n="object"==typeof e;if(n&&"string"==typeof e.selector){var r=document.querySelector(e.selector);if(r){var s=e.offset&&"object"==typeof e.offset?e.offset:{};t=function(e,t){var i=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{x:n.left-i.left-t.x,y:n.top-i.top-t.y}}(r,s={x:ie((i=s).x)?i.x:0,y:ie(i.y)?i.y:0})}else ee(e)&&(t=te(e))}else n&&ee(e)&&(t=te(e));t&&window.scrollTo(t.x,t.y)}var re,se=k&&(-1===(re=window.navigator.userAgent).indexOf("Android 2.")&&-1===re.indexOf("Android 4.0")||-1===re.indexOf("Mobile Safari")||-1!==re.indexOf("Chrome")||-1!==re.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,oe=k&&window.performance&&window.performance.now?window.performance:Date,ae=le();function le(){return oe.now().toFixed(3)}function ce(){return ae}function he(e,t){X();var i=window.history;try{t?i.replaceState({key:ae},"",e):(ae=le(),i.pushState({key:ae},"",e))}catch(i){window.location[t?"replace":"assign"](e)}}function de(e){he(e,!0)}function ue(e,t,i){var n=function(r){r>=e.length?i():e[r]?t(e[r],(function(){n(r+1)})):n(r+1)};n(0)}function pe(e,t){return me(e.map((function(e){return Object.keys(e.components).map((function(i){return t(e.components[i],e.instances[i],e,i)}))})))}function me(e){return Array.prototype.concat.apply([],e)}var fe="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function ge(e){var t=!1;return function(){for(var i=[],n=arguments.length;n--;)i[n]=arguments[n];if(!t)return t=!0,e.apply(this,i)}}var ve=function(e,t){this.router=e,this.base=function(e){if(!e)if(k){var t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else e="/";return"/"!==e.charAt(0)&&(e="/"+e),e.replace(/\/$/,"")}(t),this.current=f,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};function ye(e,t,i,n){var r=pe(e,(function(e,n,r,s){var o=function(e,t){return"function"!=typeof e&&(e=b.extend(e)),e.options[t]}(e,t);if(o)return Array.isArray(o)?o.map((function(e){return i(e,n,r,s)})):i(o,n,r,s)}));return me(n?r.reverse():r)}function xe(e,t){if(t)return function(){return e.apply(t,arguments)}}function be(e,t,i,n){t[i]?e(t[i]):n()&&setTimeout((function(){be(e,t,i,n)}),16)}ve.prototype.listen=function(e){this.cb=e},ve.prototype.onReady=function(e,t){this.ready?e():(this.readyCbs.push(e),t&&this.readyErrorCbs.push(t))},ve.prototype.onError=function(e){this.errorCbs.push(e)},ve.prototype.transitionTo=function(e,t,i){var n=this,r=this.router.match(e,this.current);this.confirmTransition(r,(function(){n.updateRoute(r),t&&t(r),n.ensureURL(),n.ready||(n.ready=!0,n.readyCbs.forEach((function(e){e(r)})))}),(function(e){i&&i(e),e&&!n.ready&&(n.ready=!0,n.readyErrorCbs.forEach((function(t){t(e)})))}))},ve.prototype.confirmTransition=function(e,t,i){var r=this,s=this.current,o=function(e){n(e)&&(r.errorCbs.length?r.errorCbs.forEach((function(t){t(e)})):console.error(e)),i&&i(e)};if(y(e,s)&&e.matched.length===s.matched.length)return this.ensureURL(),o();var a,l=function(e,t){var i,n=Math.max(e.length,t.length);for(i=0;i<n&&e[i]===t[i];i++);return{updated:t.slice(0,i),activated:t.slice(i),deactivated:e.slice(i)}}(this.current.matched,e.matched),c=l.updated,h=l.deactivated,d=l.activated,u=[].concat(function(e){return ye(e,"beforeRouteLeave",xe,!0)}(h),this.router.beforeHooks,function(e){return ye(e,"beforeRouteUpdate",xe)}(c),d.map((function(e){return e.beforeEnter})),(a=d,function(e,t,i){var r=!1,s=0,o=null;pe(a,(function(e,t,a,l){if("function"==typeof e&&void 0===e.cid){r=!0,s++;var c,h=ge((function(t){var n;((n=t).__esModule||fe&&"Module"===n[Symbol.toStringTag])&&(t=t.default),e.resolved="function"==typeof t?t:b.extend(t),a.components[l]=t,--s<=0&&i()})),d=ge((function(e){var t="Failed to resolve async component "+l+": "+e;o||(o=n(e)?e:new Error(t),i(o))}));try{c=e(h,d)}catch(e){d(e)}if(c)if("function"==typeof c.then)c.then(h,d);else{var u=c.component;u&&"function"==typeof u.then&&u.then(h,d)}}})),r||i()}));this.pending=e;var p=function(t,i){if(r.pending!==e)return o();try{t(e,s,(function(e){!1===e||n(e)?(r.ensureURL(!0),o(e)):"string"==typeof e||"object"==typeof e&&("string"==typeof e.path||"string"==typeof e.name)?(o(),"object"==typeof e&&e.replace?r.replace(e):r.push(e)):i(e)}))}catch(e){o(e)}};ue(u,p,(function(){var i=[],n=function(e,t,i){return ye(e,"beforeRouteEnter",(function(e,n,r,s){return function(e,t,i,n,r){return function(s,o,a){return e(s,o,(function(e){a(e),"function"==typeof e&&n.push((function(){be(e,t.instances,i,r)}))}))}}(e,r,s,t,i)}))}(d,i,(function(){return r.current===e}));ue(n.concat(r.router.resolveHooks),p,(function(){if(r.pending!==e)return o();r.pending=null,t(e),r.router.app&&r.router.app.$nextTick((function(){i.forEach((function(e){e()}))}))}))}))},ve.prototype.updateRoute=function(e){var t=this.current;this.current=e,this.cb&&this.cb(e),this.router.afterHooks.forEach((function(i){i&&i(e,t)}))};var we=function(e){function t(t,i){var n=this;e.call(this,t,i);var r=t.options.scrollBehavior;r&&Y();var s=Ce(this.base);window.addEventListener("popstate",(function(e){var i=n.current,o=Ce(n.base);n.current===f&&o===s||n.transitionTo(o,(function(e){r&&Q(t,e,i,!0)}))}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.go=function(e){window.history.go(e)},t.prototype.push=function(e,t,i){var n=this,r=this.current;this.transitionTo(e,(function(e){he(I(n.base+e.fullPath)),Q(n.router,e,r,!1),t&&t(e)}),i)},t.prototype.replace=function(e,t,i){var n=this,r=this.current;this.transitionTo(e,(function(e){de(I(n.base+e.fullPath)),Q(n.router,e,r,!1),t&&t(e)}),i)},t.prototype.ensureURL=function(e){if(Ce(this.base)!==this.current.fullPath){var t=I(this.base+this.current.fullPath);e?he(t):de(t)}},t.prototype.getCurrentLocation=function(){return Ce(this.base)},t}(ve);function Ce(e){var t=window.location.pathname;return e&&0===t.indexOf(e)&&(t=t.slice(e.length)),(t||"/")+window.location.search+window.location.hash}var Pe=function(e){function t(t,i,n){e.call(this,t,i),n&&function(e){var t=Ce(e);if(!/^\/#/.test(t))return window.location.replace(I(e+"/#"+t)),!0}(this.base)||ke()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this,t=this.router.options.scrollBehavior,i=se&&t;i&&Y(),window.addEventListener(se?"popstate":"hashchange",(function(){var t=e.current;ke()&&e.transitionTo(Se(),(function(n){i&&Q(e.router,n,t,!0),se||_e(n.fullPath)}))}))},t.prototype.push=function(e,t,i){var n=this,r=this.current;this.transitionTo(e,(function(e){Ae(e.fullPath),Q(n.router,e,r,!1),t&&t(e)}),i)},t.prototype.replace=function(e,t,i){var n=this,r=this.current;this.transitionTo(e,(function(e){_e(e.fullPath),Q(n.router,e,r,!1),t&&t(e)}),i)},t.prototype.go=function(e){window.history.go(e)},t.prototype.ensureURL=function(e){var t=this.current.fullPath;Se()!==t&&(e?Ae(t):_e(t))},t.prototype.getCurrentLocation=function(){return Se()},t}(ve);function ke(){var e=Se();return"/"===e.charAt(0)||(_e("/"+e),!1)}function Se(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.slice(t+1)}function Ie(e){var t=window.location.href,i=t.indexOf("#");return(i>=0?t.slice(0,i):t)+"#"+e}function Ae(e){se?he(Ie(e)):window.location.hash=e}function _e(e){se?de(Ie(e)):window.location.replace(Ie(e))}var Ee=function(e){function t(t,i){e.call(this,t,i),this.stack=[],this.index=-1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.push=function(e,t,i){var n=this;this.transitionTo(e,(function(e){n.stack=n.stack.slice(0,n.index+1).concat(e),n.index++,t&&t(e)}),i)},t.prototype.replace=function(e,t,i){var n=this;this.transitionTo(e,(function(e){n.stack=n.stack.slice(0,n.index).concat(e),t&&t(e)}),i)},t.prototype.go=function(e){var t=this,i=this.index+e;if(!(i<0||i>=this.stack.length)){var n=this.stack[i];this.confirmTransition(n,(function(){t.index=i,t.updateRoute(n)}))}},t.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},t.prototype.ensureURL=function(){},t}(ve),Te=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=G(e.routes||[],this);var t=e.mode||"hash";switch(this.fallback="history"===t&&!se&&!1!==e.fallback,this.fallback&&(t="hash"),k||(t="abstract"),this.mode=t,t){case"history":this.history=new we(this,e.base);break;case"hash":this.history=new Pe(this,e.base,this.fallback);break;case"abstract":this.history=new Ee(this,e.base)}},Me={currentRoute:{configurable:!0}};function $e(e,t){return e.push(t),function(){var i=e.indexOf(t);i>-1&&e.splice(i,1)}}Te.prototype.match=function(e,t,i){return this.matcher.match(e,t,i)},Me.currentRoute.get=function(){return this.history&&this.history.current},Te.prototype.init=function(e){var t=this;if(this.apps.push(e),!this.app){this.app=e;var i=this.history;if(i instanceof we)i.transitionTo(i.getCurrentLocation());else if(i instanceof Pe){var n=function(){i.setupListeners()};i.transitionTo(i.getCurrentLocation(),n,n)}i.listen((function(e){t.apps.forEach((function(t){t._route=e}))}))}},Te.prototype.beforeEach=function(e){return $e(this.beforeHooks,e)},Te.prototype.beforeResolve=function(e){return $e(this.resolveHooks,e)},Te.prototype.afterEach=function(e){return $e(this.afterHooks,e)},Te.prototype.onReady=function(e,t){this.history.onReady(e,t)},Te.prototype.onError=function(e){this.history.onError(e)},Te.prototype.push=function(e,t,i){this.history.push(e,t,i)},Te.prototype.replace=function(e,t,i){this.history.replace(e,t,i)},Te.prototype.go=function(e){this.history.go(e)},Te.prototype.back=function(){this.go(-1)},Te.prototype.forward=function(){this.go(1)},Te.prototype.getMatchedComponents=function(e){var t=e?e.matched?e:this.resolve(e).route:this.currentRoute;return t?[].concat.apply([],t.matched.map((function(e){return Object.keys(e.components).map((function(t){return e.components[t]}))}))):[]},Te.prototype.resolve=function(e,t,i){var n=W(e,t||this.history.current,i,this),r=this.match(n,t),s=r.redirectedFrom||r.fullPath,o=function(e,t,i){var n="hash"===i?"#"+t:t;return e?I(e+"/"+n):n}(this.history.base,s,this.mode);return{location:n,route:r,href:o,normalizedTo:n,resolved:r}},Te.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==f&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(Te.prototype,Me),Te.install=function e(t){if(!e.installed||b!==t){e.installed=!0,b=t;var i=function(e){return void 0!==e},n=function(e,t){var n=e.$options._parentVnode;i(n)&&i(n=n.data)&&i(n=n.registerRouteInstance)&&n(e,t)};t.mixin({beforeCreate:function(){i(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("router-view",r),t.component("router-link",w);var s=t.config.optionMergeStrategies;s.beforeRouteEnter=s.beforeRouteLeave=s.beforeRouteUpdate=s.created}},Te.version="2.8.1",k&&window.Vue&&window.Vue.use(Te);const Oe=Te;var De=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("router-view",{key:e.$route.fullPath}),e._v(" "),e.footerShown?i("schemio-footer"):e._e()],1)};function Be(e){return"SchemeEditorWebView"!==e.name&&"OfflineSchemeEditorWebView"!==e.name}De._withStripped=!0;const Le={data(){return{footerShown:Be(this.$route)}},watch:{$route(e,t){this.footerShown=Be(this.$route)}}};var Re=i(1900);const Ne=(0,Re.Z)(Le,De,[],!1,null,null,null).exports;var Ze=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"folder-view web-view"},[i("schemio-header",[i("div",{attrs:{slot:"loader"},slot:"loader"},[e.isLoading?i("div",{staticClass:"loader"},[i("div",{staticClass:"loader-element"})]):e._e()])]),e._v(" "),i("div",{staticClass:"middle-content"},[e.errorMessage?i("div",{staticClass:"msg msg-error"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),e.is404?i("div",[i("h4",[e._v("Sorry, specfied path does not exist")])]):i("div",[!e.viewOnly&&e.toolbarShown?i("div",{staticClass:"fs-toolbar"},[i("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.showNewDirectoryModel()}}},[i("i",{staticClass:"fas fa-folder-plus"}),e._v(" New directory\n                ")]),e._v(" "),i("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.showNewSchemeModel()}}},[i("i",{staticClass:"fas fa-file"}),e._v(" New Diagram\n                ")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Search ..."},domProps:{value:e.searchKeyword},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchSchemes.apply(null,arguments)},input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}}),e._v(" "),i("span",{staticClass:"btn btn-primary",on:{click:e.searchSchemes}},[i("i",{staticClass:"fas fa-search"}),e._v(" Search\n                ")])]):e._e(),e._v(" "),i("ul",{staticClass:"breadcrumbs"},e._l(e.breadcrumbs,(function(t,n){return i("li",[i("router-link",{staticClass:"breadcrumb-link",attrs:{to:"/f/"+t.path}},[e._v(e._s(t.name))]),e._v(" "),n<e.breadcrumbs.length-1?i("i",{staticClass:"fas fa-caret-right breadcrumb-separator"}):e._e()],1)})),0),e._v(" "),i("table",{staticClass:"entries-table"},[e._m(0),e._v(" "),i("tbody",e._l(e.entries,(function(t,n){return i("tr",[i("td",{staticClass:"icon-column"},["dir"===t.kind?i("router-link",{staticClass:"entry-link",attrs:{to:"/f/"+t.path}},[i("i",{staticClass:"icon fas fa-folder fa-2x"})]):"schemio:doc"===t.kind?i("router-link",{staticClass:"entry-link",attrs:{to:"/docs/"+t.id}},[t.previewURL?i("img",{staticClass:"scheme-preview",attrs:{src:t.previewURL+"?v="+t.encodedTime}}):i("i",{staticClass:"icon far fa-file fa-2x"})]):e._e()],1),e._v(" "),i("td",{staticClass:"name-column"},["dir"===t.kind?i("router-link",{staticClass:"entry-link",attrs:{to:"/f/"+t.path}},[i("span",{staticClass:"entry-link-text"},[e._v(e._s(t.name))])]):"schemio:doc"===t.kind?i("router-link",{staticClass:"entry-link",attrs:{to:"/docs/"+t.id}},[i("span",{staticClass:"entry-link-text"},[e._v(e._s(t.name))])]):e._e()],1),e._v(" "),i("td",{staticClass:"time-column"},[t.modifiedTime?i("span",[e._v(e._s(e._f("formatDateTime")(t.modifiedTime)))]):e._e()]),e._v(" "),i("td",{staticClass:"operation-column"},[".."===t.name||e.viewOnly?e._e():i("menu-dropdown",{attrs:{name:"",iconClass:"fas fa-ellipsis-v",options:t.menuOptions},on:{delete:function(i){return e.onDeleteEntry(t)},rename:function(i){return e.onRenameEntry(t,n)},move:function(i){return e.onMoveEntry(t,n)}}})],1)])})),0)]),e._v(" "),e.nextPageToken&&!e.isLoading?i("p",{staticStyle:{"text-align":"center"}},[i("span",{staticClass:"btn btn-primary",on:{click:e.loadNextPage}},[e._v("Load more")])]):e._e()]),e._v(" "),e.newDirectoryModal.shown?i("modal",{attrs:{title:"New Directory",primaryButton:"Create"},on:{close:function(t){e.newDirectoryModal.shown=!1},"primary-submit":function(t){return e.submitNewDirectory()}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.newDirectoryModal.name,expression:"newDirectoryModal.name"}],ref:"newDirectoryModalInput",staticClass:"textfield",attrs:{type:"text",placeholder:"Type name of new directory..."},domProps:{value:e.newDirectoryModal.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitNewDirectory()},input:function(t){t.target.composing||e.$set(e.newDirectoryModal,"name",t.target.value)}}}),e._v(" "),e.newDirectoryModal.errorMessage?i("div",{staticClass:"msg msg-error"},[e._v(e._s(e.newDirectoryModal.errorMessage))]):e._e()]):e._e(),e._v(" "),e.deleteEntryModal.shown?i("modal",{attrs:{title:"Confirm delete",primaryButton:"Delete"},on:{close:function(t){e.deleteEntryModal.shown=!1},"primary-submit":function(t){return e.confirmDeleteEntry(e.deleteEntryModal.entry)}}},[e._v("\n            Are you sure you want to delete\n            "),"dir"===e.deleteEntryModal.entry.kind?i("span",[i("b",[e._v(e._s(e.deleteEntryModal.entry.name))]),e._v(" and all of its documents?\n            ")]):i("span",[e._v("\n                scheme "),i("b",[e._v(e._s(e.deleteEntryModal.entry.name))]),e._v("?\n            ")]),e._v(" "),e.deleteEntryModal.errorMessage?i("div",{staticClass:"msg msg-error"},[e._v(e._s(e.deleteEntryModal.errorMessage))]):e._e()]):e._e(),e._v(" "),e.renameEntryModal.shown?i("modal",{attrs:{title:e.renameEntryModalTitle,primaryButton:"Rename"},on:{close:function(t){e.renameEntryModal.shown=!1},"primary-submit":function(t){return e.confirmEntryRename()}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.renameEntryModal.name,expression:"renameEntryModal.name"}],ref:"renameEntryModalInput",staticClass:"textfield",attrs:{type:"text"},domProps:{value:e.renameEntryModal.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmEntryRename()},input:function(t){t.target.composing||e.$set(e.renameEntryModal,"name",t.target.value)}}}),e._v(" "),e.renameEntryModal.errorMessage?i("div",{staticClass:"msg msg-error"},[e._v(e._s(e.renameEntryModal.errorMessage))]):e._e()]):e._e(),e._v(" "),e.newSchemeModal.shown?i("CreateNewSchemeModal",{on:{"scheme-submitted":e.onSchemeSubmitted,close:function(t){e.newSchemeModal.shown=!1}}}):e._e(),e._v(" "),e.moveEntryModal.shown?i("MoveToFolderModal",{attrs:{apiClient:e.apiClient,source:e.moveEntryModal.source,path:e.path},on:{close:function(t){e.moveEntryModal.shown=!1},moved:e.onEntryMoved}}):e._e(),e._v(" "),e.progressModal.shown?i("modal",{attrs:{title:e.progressModal.title},on:{close:function(t){e.progressModal.shown=!1}}},[i("i",{staticClass:"fas fa-spinner fa-spin fa-1x"}),e._v(" "),i("span",[e._v(e._s(e.progressModal.text))])]):e._e()],1)],1)};Ze._withStripped=!0;var Fe=i(6234),je=i(9021),ze=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{title:"New Diagram",primaryButton:"Create"},on:{"primary-submit":function(t){return e.submitNewScheme()},close:function(t){return e.$emit("close")}}},[i("h5",[e._v("Name")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.schemeName,expression:"schemeName"}],ref:"schemeNameInput",staticClass:"textfield",class:{"missing-field-error":e.mandatoryFields.name.highlight},attrs:{type:"text",placeholder:"Name..."},domProps:{value:e.schemeName},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitNewScheme()},input:function(t){t.target.composing||(e.schemeName=t.target.value)}}}),e._v(" "),i("h5",[e._v("Description")]),e._v(" "),i("rich-text-editor",{attrs:{value:e.schemeDescription},on:{changed:function(t){e.schemeDescription=arguments[0]}}}),e._v(" "),e.errorMessage?i("div",{staticClass:"msg msg-error"},[e._v(e._s(e.errorMessage))]):e._e()],1)};ze._withStripped=!0;var Ue=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"rich-text-editor-container"},[i("editor-menu-bar",{attrs:{editor:e.editor},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.commands,r=t.isActive,s=t.getMarkAttrs;return[i("div",{staticClass:"rich-text-editor-menubar"},[i("span",{staticClass:"editor-icon",class:{"is-active":r.bold()},on:{click:n.bold}},[i("i",{staticClass:"fas fa-bold"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.italic()},on:{click:n.italic}},[i("i",{staticClass:"fas fa-italic"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.strike()},on:{click:n.strike}},[i("i",{staticClass:"fas fa-strikethrough"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.underline()},on:{click:n.underline}},[i("i",{staticClass:"fas fa-underline"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.link()},on:{click:function(t){e.toggleLink(n.link,s("link"))}}},[i("i",{staticClass:"fas fa-link"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.code()},on:{click:n.code}},[i("i",{staticClass:"fas fa-code"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.heading({level:1})},on:{click:function(e){return n.heading({level:1})}}},[e._v("\n                H1\n            ")]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.heading({level:2})},on:{click:function(e){return n.heading({level:2})}}},[e._v("\n                H2\n            ")]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.heading({level:3})},on:{click:function(e){return n.heading({level:3})}}},[e._v("\n                H3\n            ")]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.bullet_list()},on:{click:n.bullet_list}},[i("i",{staticClass:"fas fa-list-ul"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.ordered_list()},on:{click:n.ordered_list}},[i("i",{staticClass:"fas fa-list-ol"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.blockquote()},on:{click:n.blockquote}},[i("i",{staticClass:"fas fa-quote-left"})])])]}}])}),e._v(" "),i("div",{staticClass:"editor-frame",class:{focused:e.focused},style:{width:e.width,height:e.height}},[i("div",{staticClass:"editor-content",style:{width:e.width,height:e.height},on:{click:e.onEditorClick}},[i("editor-content",{attrs:{editor:e.editor}})],1),e._v(" "),i("span",{staticClass:"text-editor-enlarge",on:{click:function(t){e.enlarged=!0}}},[i("i",{staticClass:"fas fa-expand"})])]),e._v(" "),e.enlarged?i("div",{staticClass:"textarea-enlarged-container"},[i("div",{staticClass:"rich-text-editor-menubar"},[i("editor-menu-bar",{attrs:{editor:e.editorLarge},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.commands,r=t.isActive,s=t.getMarkAttrs;return[i("div",{staticClass:"editor-menubar"},[i("span",{staticClass:"editor-icon",class:{"is-active":r.bold()},on:{click:n.bold}},[i("i",{staticClass:"fas fa-bold"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.italic()},on:{click:n.italic}},[i("i",{staticClass:"fas fa-italic"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.strike()},on:{click:n.strike}},[i("i",{staticClass:"fas fa-strikethrough"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.underline()},on:{click:n.underline}},[i("i",{staticClass:"fas fa-underline"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.link()},on:{click:function(t){e.toggleLink(n.link,s("link"))}}},[i("i",{staticClass:"fas fa-link"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.code()},on:{click:n.code}},[i("i",{staticClass:"fas fa-code"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.heading({level:1})},on:{click:function(e){return n.heading({level:1})}}},[e._v("\n                        H1\n                    ")]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.heading({level:2})},on:{click:function(e){return n.heading({level:2})}}},[e._v("\n                        H2\n                    ")]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.heading({level:3})},on:{click:function(e){return n.heading({level:3})}}},[e._v("\n                        H3\n                    ")]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.bullet_list()},on:{click:n.bullet_list}},[i("i",{staticClass:"fas fa-list-ul"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.ordered_list()},on:{click:n.ordered_list}},[i("i",{staticClass:"fas fa-list-ol"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.blockquote()},on:{click:n.blockquote}},[i("i",{staticClass:"fas fa-quote-left"})])])]}}],null,!1,24630616)}),e._v(" "),i("span",{staticClass:"btn btn-secondary action-close",on:{click:function(t){e.enlarged=!1}}},[e._v("Close")])],1),e._v(" "),i("div",{staticClass:"editor-frame"},[i("div",{staticClass:"editor-content",on:{click:e.onEditorClick}},[i("editor-content",{attrs:{editor:e.editorLarge}})],1)])]):e._e(),e._v(" "),e.linkModal.shown?i("modal",{attrs:{title:"Add Link","primary-button":"Save"},on:{close:function(t){e.linkModal.shown=!1},"primary-submit":e.onLinkModalSubmit}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.linkModal.url,expression:"linkModal.url"}],staticClass:"textfield",attrs:{placeholder:"https://"},domProps:{value:e.linkModal.url},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onLinkModalSubmit.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.linkModal,"url",t.target.value)}}})]):e._e()],1)};function He(e){this.content=e}Ue._withStripped=!0,He.prototype={constructor:He,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,i){var n=i&&i!=e?this.remove(i):this,r=n.find(e),s=n.content.slice();return-1==r?s.push(i||e,t):(s[r+1]=t,i&&(s[r]=i)),new He(s)},remove:function(e){var t=this.find(e);if(-1==t)return this;var i=this.content.slice();return i.splice(t,2),new He(i)},addToStart:function(e,t){return new He([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var i=this.remove(e).content.slice();return i.push(e,t),new He(i)},addBefore:function(e,t,i){var n=this.remove(t),r=n.content.slice(),s=n.find(e);return r.splice(-1==s?r.length:s,0,t,i),new He(r)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=He.from(e)).size?new He(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=He.from(e)).size?new He(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=He.from(e);for(var i=0;i<e.content.length;i+=2)t=t.remove(e.content[i]);return t},get size(){return this.content.length>>1}},He.from=function(e){if(e instanceof He)return e;var t=[];if(e)for(var i in e)t.push(i,e[i]);return new He(t)};const qe=He;function We(e,t,i){for(var n=0;;n++){if(n==e.childCount||n==t.childCount)return e.childCount==t.childCount?null:i;var r=e.child(n),s=t.child(n);if(r!=s){if(!r.sameMarkup(s))return i;if(r.isText&&r.text!=s.text){for(var o=0;r.text[o]==s.text[o];o++)i++;return i}if(r.content.size||s.content.size){var a=We(r.content,s.content,i+1);if(null!=a)return a}i+=r.nodeSize}else i+=r.nodeSize}}function Ve(e,t,i,n){for(var r=e.childCount,s=t.childCount;;){if(0==r||0==s)return r==s?null:{a:i,b:n};var o=e.child(--r),a=t.child(--s),l=o.nodeSize;if(o!=a){if(!o.sameMarkup(a))return{a:i,b:n};if(o.isText&&o.text!=a.text){for(var c=0,h=Math.min(o.text.length,a.text.length);c<h&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,i--,n--;return{a:i,b:n}}if(o.content.size||a.content.size){var d=Ve(o.content,a.content,i-1,n-1);if(d)return d}i-=l,n-=l}else i-=l,n-=l}}var Ge=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var i=0;i<e.length;i++)this.size+=e[i].nodeSize},Ke={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};Ge.prototype.nodesBetween=function(e,t,i,n,r){void 0===n&&(n=0);for(var s=0,o=0;o<t;s++){var a=this.content[s],l=o+a.nodeSize;if(l>e&&!1!==i(a,n+o,r,s)&&a.content.size){var c=o+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,t-c),i,n+c)}o=l}},Ge.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},Ge.prototype.textBetween=function(e,t,i,n){var r="",s=!0;return this.nodesBetween(e,t,(function(o,a){o.isText?(r+=o.text.slice(Math.max(e,a)-a,t-a),s=!i):o.isLeaf&&n?(r+="function"==typeof n?n(o):n,s=!i):!s&&o.isBlock&&(r+=i,s=!0)}),0),r},Ge.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,i=e.firstChild,n=this.content.slice(),r=0;for(t.isText&&t.sameMarkup(i)&&(n[n.length-1]=t.withText(t.text+i.text),r=1);r<e.content.length;r++)n.push(e.content[r]);return new Ge(n,this.size+e.size)},Ge.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var i=[],n=0;if(t>e)for(var r=0,s=0;s<t;r++){var o=this.content[r],a=s+o.nodeSize;a>e&&((s<e||a>t)&&(o=o.isText?o.cut(Math.max(0,e-s),Math.min(o.text.length,t-s)):o.cut(Math.max(0,e-s-1),Math.min(o.content.size,t-s-1))),i.push(o),n+=o.nodeSize),s=a}return new Ge(i,n)},Ge.prototype.cutByIndex=function(e,t){return e==t?Ge.empty:0==e&&t==this.content.length?this:new Ge(this.content.slice(e,t))},Ge.prototype.replaceChild=function(e,t){var i=this.content[e];if(i==t)return this;var n=this.content.slice(),r=this.size+t.nodeSize-i.nodeSize;return n[e]=t,new Ge(n,r)},Ge.prototype.addToStart=function(e){return new Ge([e].concat(this.content),this.size+e.nodeSize)},Ge.prototype.addToEnd=function(e){return new Ge(this.content.concat(e),this.size+e.nodeSize)},Ge.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},Ke.firstChild.get=function(){return this.content.length?this.content[0]:null},Ke.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},Ke.childCount.get=function(){return this.content.length},Ge.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},Ge.prototype.maybeChild=function(e){return this.content[e]},Ge.prototype.forEach=function(e){for(var t=0,i=0;t<this.content.length;t++){var n=this.content[t];e(n,i,t),i+=n.nodeSize}},Ge.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),We(this,e,t)},Ge.prototype.findDiffEnd=function(e,t,i){return void 0===t&&(t=this.size),void 0===i&&(i=e.size),Ve(this,e,t,i)},Ge.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return Ye(0,e);if(e==this.size)return Ye(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var i=0,n=0;;i++){var r=n+this.child(i).nodeSize;if(r>=e)return r==e||t>0?Ye(i+1,r):Ye(i,n);n=r}},Ge.prototype.toString=function(){return"<"+this.toStringInner()+">"},Ge.prototype.toStringInner=function(){return this.content.join(", ")},Ge.prototype.toJSON=function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null},Ge.fromJSON=function(e,t){if(!t)return Ge.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ge(t.map(e.nodeFromJSON))},Ge.fromArray=function(e){if(!e.length)return Ge.empty;for(var t,i=0,n=0;n<e.length;n++){var r=e[n];i+=r.nodeSize,n&&r.isText&&e[n-1].sameMarkup(r)?(t||(t=e.slice(0,n)),t[t.length-1]=r.withText(t[t.length-1].text+r.text)):t&&t.push(r)}return new Ge(t||e,i)},Ge.from=function(e){if(!e)return Ge.empty;if(e instanceof Ge)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ge([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(Ge.prototype,Ke);var Je={index:0,offset:0};function Ye(e,t){return Je.index=e,Je.offset=t,Je}function Qe(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var i=Array.isArray(e);if(Array.isArray(t)!=i)return!1;if(i){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!Qe(e[n],t[n]))return!1}else{for(var r in e)if(!(r in t)||!Qe(e[r],t[r]))return!1;for(var s in t)if(!(s in e))return!1}return!0}Ge.empty=new Ge([],0);var Xe=function(e,t){this.type=e,this.attrs=t};function et(e){var t=Error.call(this,e);return t.__proto__=et.prototype,t}Xe.prototype.addToSet=function(e){for(var t,i=!1,n=0;n<e.length;n++){var r=e[n];if(this.eq(r))return e;if(this.type.excludes(r.type))t||(t=e.slice(0,n));else{if(r.type.excludes(this.type))return e;!i&&r.type.rank>this.type.rank&&(t||(t=e.slice(0,n)),t.push(this),i=!0),t&&t.push(r)}}return t||(t=e.slice()),i||t.push(this),t},Xe.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},Xe.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},Xe.prototype.eq=function(e){return this==e||this.type==e.type&&Qe(this.attrs,e.attrs)},Xe.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},Xe.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var i=e.marks[t.type];if(!i)throw new RangeError("There is no mark type "+t.type+" in this schema");return i.create(t.attrs)},Xe.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!e[i].eq(t[i]))return!1;return!0},Xe.setFrom=function(e){if(!e||0==e.length)return Xe.none;if(e instanceof Xe)return[e];var t=e.slice();return t.sort((function(e,t){return e.type.rank-t.type.rank})),t},Xe.none=[],et.prototype=Object.create(Error.prototype),et.prototype.constructor=et,et.prototype.name="ReplaceError";var tt=function(e,t,i){this.content=e,this.openStart=t,this.openEnd=i},it={size:{configurable:!0}};function nt(e,t,i){var n=e.findIndex(t),r=n.index,s=n.offset,o=e.maybeChild(r),a=e.findIndex(i),l=a.index,c=a.offset;if(s==t||o.isText){if(c!=i&&!e.child(l).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(i))}if(r!=l)throw new RangeError("Removing non-flat range");return e.replaceChild(r,o.copy(nt(o.content,t-s-1,i-s-1)))}function rt(e,t,i,n){var r=e.findIndex(t),s=r.index,o=r.offset,a=e.maybeChild(s);if(o==t||a.isText)return n&&!n.canReplace(s,s,i)?null:e.cut(0,t).append(i).append(e.cut(t));var l=rt(a.content,t-o-1,i);return l&&e.replaceChild(s,a.copy(l))}function st(e,t,i){if(i.openStart>e.depth)throw new et("Inserted content deeper than insertion position");if(e.depth-i.openStart!=t.depth-i.openEnd)throw new et("Inconsistent open depths");return ot(e,t,i,0)}function ot(e,t,i,n){var r=e.index(n),s=e.node(n);if(r==t.index(n)&&n<e.depth-i.openStart){var o=ot(e,t,i,n+1);return s.copy(s.content.replaceChild(r,o))}if(i.content.size){if(i.openStart||i.openEnd||e.depth!=n||t.depth!=n){var a=function(e,t){for(var i=t.depth-e.openStart,n=t.node(i).copy(e.content),r=i-1;r>=0;r--)n=t.node(r).copy(Ge.from(n));return{start:n.resolveNoCache(e.openStart+i),end:n.resolveNoCache(n.content.size-e.openEnd-i)}}(i,e);return dt(s,ut(e,a.start,a.end,t,n))}var l=e.parent,c=l.content;return dt(l,c.cut(0,e.parentOffset).append(i.content).append(c.cut(t.parentOffset)))}return dt(s,pt(e,t,n))}function at(e,t){if(!t.type.compatibleContent(e.type))throw new et("Cannot join "+t.type.name+" onto "+e.type.name)}function lt(e,t,i){var n=e.node(i);return at(n,t.node(i)),n}function ct(e,t){var i=t.length-1;i>=0&&e.isText&&e.sameMarkup(t[i])?t[i]=e.withText(t[i].text+e.text):t.push(e)}function ht(e,t,i,n){var r=(t||e).node(i),s=0,o=t?t.index(i):r.childCount;e&&(s=e.index(i),e.depth>i?s++:e.textOffset&&(ct(e.nodeAfter,n),s++));for(var a=s;a<o;a++)ct(r.child(a),n);t&&t.depth==i&&t.textOffset&&ct(t.nodeBefore,n)}function dt(e,t){if(!e.type.validContent(t))throw new et("Invalid content for node "+e.type.name);return e.copy(t)}function ut(e,t,i,n,r){var s=e.depth>r&&lt(e,t,r+1),o=n.depth>r&&lt(i,n,r+1),a=[];return ht(null,e,r,a),s&&o&&t.index(r)==i.index(r)?(at(s,o),ct(dt(s,ut(e,t,i,n,r+1)),a)):(s&&ct(dt(s,pt(e,t,r+1)),a),ht(t,i,r,a),o&&ct(dt(o,pt(i,n,r+1)),a)),ht(n,null,r,a),new Ge(a)}function pt(e,t,i){var n=[];return ht(null,e,i,n),e.depth>i&&ct(dt(lt(e,t,i+1),pt(e,t,i+1)),n),ht(t,null,i,n),new Ge(n)}it.size.get=function(){return this.content.size-this.openStart-this.openEnd},tt.prototype.insertAt=function(e,t){var i=rt(this.content,e+this.openStart,t,null);return i&&new tt(i,this.openStart,this.openEnd)},tt.prototype.removeBetween=function(e,t){return new tt(nt(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},tt.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},tt.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},tt.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},tt.fromJSON=function(e,t){if(!t)return tt.empty;var i=t.openStart||0,n=t.openEnd||0;if("number"!=typeof i||"number"!=typeof n)throw new RangeError("Invalid input for Slice.fromJSON");return new tt(Ge.fromJSON(e,t.content),i,n)},tt.maxOpen=function(e,t){void 0===t&&(t=!0);for(var i=0,n=0,r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)i++;for(var s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)n++;return new tt(e,i,n)},Object.defineProperties(tt.prototype,it),tt.empty=new tt(Ge.empty,0,0);var mt=function(e,t,i){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=i},ft={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};mt.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},ft.parent.get=function(){return this.node(this.depth)},ft.doc.get=function(){return this.node(0)},mt.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},mt.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},mt.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},mt.prototype.start=function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1},mt.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},mt.prototype.before=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},mt.prototype.after=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},ft.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},ft.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var i=this.pos-this.path[this.path.length-1],n=e.child(t);return i?e.child(t).cut(i):n},ft.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},mt.prototype.posAtIndex=function(e,t){t=this.resolveDepth(t);for(var i=this.path[3*t],n=0==t?0:this.path[3*t-1]+1,r=0;r<e;r++)n+=i.child(r).nodeSize;return n},mt.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return Xe.none;if(this.textOffset)return e.child(t).marks;var i=e.maybeChild(t-1),n=e.maybeChild(t);if(!i){var r=i;i=n,n=r}for(var s=i.marks,o=0;o<s.length;o++)!1!==s[o].type.spec.inclusive||n&&s[o].isInSet(n.marks)||(s=s[o--].removeFromSet(s));return s},mt.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var i=t.marks,n=e.parent.maybeChild(e.index()),r=0;r<i.length;r++)!1!==i[r].type.spec.inclusive||n&&i[r].isInSet(n.marks)||(i=i[r--].removeFromSet(i));return i},mt.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},mt.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!t||t(this.node(i))))return new xt(this,e,i)},mt.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},mt.prototype.max=function(e){return e.pos>this.pos?e:this},mt.prototype.min=function(e){return e.pos<this.pos?e:this},mt.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},mt.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var i=[],n=0,r=t,s=e;;){var o=s.content.findIndex(r),a=o.index,l=o.offset,c=r-l;if(i.push(s,a,n+l),!c)break;if((s=s.child(a)).isText)break;r=c-1,n+=l+1}return new mt(t,i,r)},mt.resolveCached=function(e,t){for(var i=0;i<gt.length;i++){var n=gt[i];if(n.pos==t&&n.doc==e)return n}var r=gt[vt]=mt.resolve(e,t);return vt=(vt+1)%yt,r},Object.defineProperties(mt.prototype,ft);var gt=[],vt=0,yt=12,xt=function(e,t,i){this.$from=e,this.$to=t,this.depth=i},bt={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};bt.start.get=function(){return this.$from.before(this.depth+1)},bt.end.get=function(){return this.$to.after(this.depth+1)},bt.parent.get=function(){return this.$from.node(this.depth)},bt.startIndex.get=function(){return this.$from.index(this.depth)},bt.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(xt.prototype,bt);var wt=Object.create(null),Ct=function(e,t,i,n){this.type=e,this.attrs=t,this.content=i||Ge.empty,this.marks=n||Xe.none},Pt={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Pt.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},Pt.childCount.get=function(){return this.content.childCount},Ct.prototype.child=function(e){return this.content.child(e)},Ct.prototype.maybeChild=function(e){return this.content.maybeChild(e)},Ct.prototype.forEach=function(e){this.content.forEach(e)},Ct.prototype.nodesBetween=function(e,t,i,n){void 0===n&&(n=0),this.content.nodesBetween(e,t,i,n,this)},Ct.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},Pt.textContent.get=function(){return this.textBetween(0,this.content.size,"")},Ct.prototype.textBetween=function(e,t,i,n){return this.content.textBetween(e,t,i,n)},Pt.firstChild.get=function(){return this.content.firstChild},Pt.lastChild.get=function(){return this.content.lastChild},Ct.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},Ct.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},Ct.prototype.hasMarkup=function(e,t,i){return this.type==e&&Qe(this.attrs,t||e.defaultAttrs||wt)&&Xe.sameSet(this.marks,i||Xe.none)},Ct.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},Ct.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},Ct.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},Ct.prototype.slice=function(e,t,i){if(void 0===t&&(t=this.content.size),void 0===i&&(i=!1),e==t)return tt.empty;var n=this.resolve(e),r=this.resolve(t),s=i?0:n.sharedDepth(t),o=n.start(s),a=n.node(s).content.cut(n.pos-o,r.pos-o);return new tt(a,n.depth-s,r.depth-s)},Ct.prototype.replace=function(e,t,i){return st(this.resolve(e),this.resolve(t),i)},Ct.prototype.nodeAt=function(e){for(var t=this;;){var i=t.content.findIndex(e),n=i.index,r=i.offset;if(!(t=t.maybeChild(n)))return null;if(r==e||t.isText)return t;e-=r+1}},Ct.prototype.childAfter=function(e){var t=this.content.findIndex(e),i=t.index,n=t.offset;return{node:this.content.maybeChild(i),index:i,offset:n}},Ct.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),i=t.index,n=t.offset;if(n<e)return{node:this.content.child(i),index:i,offset:n};var r=this.content.child(i-1);return{node:r,index:i-1,offset:n-r.nodeSize}},Ct.prototype.resolve=function(e){return mt.resolveCached(this,e)},Ct.prototype.resolveNoCache=function(e){return mt.resolve(this,e)},Ct.prototype.rangeHasMark=function(e,t,i){var n=!1;return t>e&&this.nodesBetween(e,t,(function(e){return i.isInSet(e.marks)&&(n=!0),!n})),n},Pt.isBlock.get=function(){return this.type.isBlock},Pt.isTextblock.get=function(){return this.type.isTextblock},Pt.inlineContent.get=function(){return this.type.inlineContent},Pt.isInline.get=function(){return this.type.isInline},Pt.isText.get=function(){return this.type.isText},Pt.isLeaf.get=function(){return this.type.isLeaf},Pt.isAtom.get=function(){return this.type.isAtom},Ct.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),St(this.marks,e)},Ct.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},Ct.prototype.canReplace=function(e,t,i,n,r){void 0===i&&(i=Ge.empty),void 0===n&&(n=0),void 0===r&&(r=i.childCount);var s=this.contentMatchAt(e).matchFragment(i,n,r),o=s&&s.matchFragment(this.content,t);if(!o||!o.validEnd)return!1;for(var a=n;a<r;a++)if(!this.type.allowsMarks(i.child(a).marks))return!1;return!0},Ct.prototype.canReplaceWith=function(e,t,i,n){if(n&&!this.type.allowsMarks(n))return!1;var r=this.contentMatchAt(e).matchType(i),s=r&&r.matchFragment(this.content,t);return!!s&&s.validEnd},Ct.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},Ct.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var e=Xe.none,t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!Xe.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(e){return e.type.name})));this.content.forEach((function(e){return e.check()}))},Ct.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e},Ct.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var i=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,i)}var n=Ge.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,n,i)},Object.defineProperties(Ct.prototype,Pt);var kt=function(e){function t(t,i,n,r){if(e.call(this,t,i,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):St(this.marks,JSON.stringify(this.text))},i.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},i.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(t.prototype,i),t}(Ct);function St(e,t){for(var i=e.length-1;i>=0;i--)t=e[i].type.name+"("+t+")";return t}var It=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},At={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};It.parse=function(e,t){var i=new _t(e,t);if(null==i.next)return It.empty;var n=Tt(i);i.next&&i.err("Unexpected trailing text");var r,s,o=(r=function(e){var t=[[]];return r(function e(t,s){if("choice"==t.type)return t.exprs.reduce((function(t,i){return t.concat(e(i,s))}),[]);if("seq"==t.type)for(var o=0;;o++){var a=e(t.exprs[o],s);if(o==t.exprs.length-1)return a;r(a,s=i())}else{if("star"==t.type){var l=i();return n(s,l),r(e(t.expr,l),l),[n(l)]}if("plus"==t.type){var c=i();return r(e(t.expr,s),c),r(e(t.expr,c),c),[n(c)]}if("opt"==t.type)return[n(s)].concat(e(t.expr,s));if("range"==t.type){for(var h=s,d=0;d<t.min;d++){var u=i();r(e(t.expr,h),u),h=u}if(-1==t.max)r(e(t.expr,h),h);else for(var p=t.min;p<t.max;p++){var m=i();n(h,m),r(e(t.expr,h),m),h=m}return[n(h)]}if("name"==t.type)return[n(s,null,t.value)]}}(e,0),i()),t;function i(){return t.push([])-1}function n(e,i,n){var r={term:n,to:i};return t[e].push(r),r}function r(e,t){e.forEach((function(e){return e.to=t}))}}(n),s=Object.create(null),function e(t){var i=[];t.forEach((function(e){r[e].forEach((function(e){var t=e.term,n=e.to;if(t){var s=i.indexOf(t),o=s>-1&&i[s+1];Lt(r,n).forEach((function(e){o||i.push(t,o=[]),-1==o.indexOf(e)&&o.push(e)}))}}))}));for(var n=s[t.join(",")]=new It(t.indexOf(r.length-1)>-1),o=0;o<i.length;o+=2){var a=i[o+1].sort(Bt);n.next.push(i[o],s[a.join(",")]||e(a))}return n}(Lt(r,0)));return function(e,t){for(var i=0,n=[e];i<n.length;i++){for(var r=n[i],s=!r.validEnd,o=[],a=0;a<r.next.length;a+=2){var l=r.next[a],c=r.next[a+1];o.push(l.name),!s||l.isText||l.hasRequiredAttrs()||(s=!1),-1==n.indexOf(c)&&n.push(c)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,i),o},It.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},It.prototype.matchFragment=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=e.childCount);for(var n=this,r=t;n&&r<i;r++)n=n.matchType(e.child(r).type);return n},At.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},At.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},It.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var i=0;i<e.next.length;i+=2)if(this.next[t]==e.next[i])return!0;return!1},It.prototype.fillBefore=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=0);var n=[this];return function r(s,o){var a=s.matchFragment(e,i);if(a&&(!t||a.validEnd))return Ge.from(o.map((function(e){return e.createAndFill()})));for(var l=0;l<s.next.length;l+=2){var c=s.next[l],h=s.next[l+1];if(!c.isText&&!c.hasRequiredAttrs()&&-1==n.indexOf(h)){n.push(h);var d=r(h,o.concat(c));if(d)return d}}}(this,[])},It.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var i=this.computeWrapping(e);return this.wrapCache.push(e,i),i},It.prototype.computeWrapping=function(e){for(var t=Object.create(null),i=[{match:this,type:null,via:null}];i.length;){var n=i.shift(),r=n.match;if(r.matchType(e)){for(var s=[],o=n;o.type;o=o.via)s.push(o.type);return s.reverse()}for(var a=0;a<r.next.length;a+=2){var l=r.next[a];l.isLeaf||l.hasRequiredAttrs()||l.name in t||n.type&&!r.next[a+1].validEnd||(i.push({match:l.contentMatch,type:l,via:n}),t[l.name]=!0)}}},At.edgeCount.get=function(){return this.next.length>>1},It.prototype.edge=function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},It.prototype.toString=function(){var e=[];return function t(i){e.push(i);for(var n=1;n<i.next.length;n+=2)-1==e.indexOf(i.next[n])&&t(i.next[n])}(this),e.map((function(t,i){for(var n=i+(t.validEnd?"*":" ")+" ",r=0;r<t.next.length;r+=2)n+=(r?", ":"")+t.next[r].name+"->"+e.indexOf(t.next[r+1]);return n})).join("\n")},Object.defineProperties(It.prototype,At),It.empty=new It(!0);var _t=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},Et={next:{configurable:!0}};function Tt(e){var t=[];do{t.push(Mt(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function Mt(e){var t=[];do{t.push($t(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function $t(e){for(var t=function(e){if(e.eat("(")){var t=Tt(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var i=function(e,t){var i=e.nodeTypes,n=i[t];if(n)return[n];var r=[];for(var s in i){var o=i[s];o.groups.indexOf(t)>-1&&r.push(o)}return 0==r.length&&e.err("No node type or group '"+t+"' found"),r}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==i.length?i[0]:{type:"choice",exprs:i}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=Dt(e,t)}return t}function Ot(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function Dt(e,t){var i=Ot(e),n=i;return e.eat(",")&&(n="}"!=e.next?Ot(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:i,max:n,expr:t}}function Bt(e,t){return t-e}function Lt(e,t){var i=[];return function t(n){var r=e[n];if(1==r.length&&!r[0].term)return t(r[0].to);i.push(n);for(var s=0;s<r.length;s++){var o=r[s],a=o.term,l=o.to;a||-1!=i.indexOf(l)||t(l)}}(t),i.sort(Bt)}function Rt(e){var t=Object.create(null);for(var i in e){var n=e[i];if(!n.hasDefault)return null;t[i]=n.default}return t}function Nt(e,t){var i=Object.create(null);for(var n in e){var r=t&&t[n];if(void 0===r){var s=e[n];if(!s.hasDefault)throw new RangeError("No value supplied for attribute "+n);r=s.default}i[n]=r}return i}function Zt(e){var t=Object.create(null);if(e)for(var i in e)t[i]=new zt(e[i]);return t}Et.next.get=function(){return this.tokens[this.pos]},_t.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},_t.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(_t.prototype,Et);var Ft=function(e,t,i){this.name=e,this.schema=t,this.spec=i,this.groups=i.group?i.group.split(" "):[],this.attrs=Zt(i.attrs),this.defaultAttrs=Rt(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(i.inline||"text"==e),this.isText="text"==e},jt={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};jt.isInline.get=function(){return!this.isBlock},jt.isTextblock.get=function(){return this.isBlock&&this.inlineContent},jt.isLeaf.get=function(){return this.contentMatch==It.empty},jt.isAtom.get=function(){return this.isLeaf||this.spec.atom},Ft.prototype.hasRequiredAttrs=function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1},Ft.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},Ft.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:Nt(this.attrs,e)},Ft.prototype.create=function(e,t,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ct(this,this.computeAttrs(e),Ge.from(t),Xe.setFrom(i))},Ft.prototype.createChecked=function(e,t,i){if(t=Ge.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new Ct(this,this.computeAttrs(e),t,Xe.setFrom(i))},Ft.prototype.createAndFill=function(e,t,i){if(e=this.computeAttrs(e),(t=Ge.from(t)).size){var n=this.contentMatch.fillBefore(t);if(!n)return null;t=n.append(t)}var r=this.contentMatch.matchFragment(t).fillBefore(Ge.empty,!0);return r?new Ct(this,e,t.append(r),Xe.setFrom(i)):null},Ft.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0},Ft.prototype.allowsMarkType=function(e){return null==this.markSet||this.markSet.indexOf(e)>-1},Ft.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},Ft.prototype.allowedMarks=function(e){if(null==this.markSet)return e;for(var t,i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?t&&t.push(e[i]):t||(t=e.slice(0,i));return t?t.length?t:Xe.empty:e},Ft.compile=function(e,t){var i=Object.create(null);e.forEach((function(e,n){return i[e]=new Ft(e,t,n)}));var n=t.spec.topNode||"doc";if(!i[n])throw new RangeError("Schema is missing its top node type ('"+n+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(var r in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i},Object.defineProperties(Ft.prototype,jt);var zt=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},Ut={isRequired:{configurable:!0}};Ut.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(zt.prototype,Ut);var Ht=function(e,t,i,n){this.name=e,this.schema=i,this.spec=n,this.attrs=Zt(n.attrs),this.rank=t,this.excluded=null;var r=Rt(this.attrs);this.instance=r&&new Xe(this,r)};Ht.prototype.create=function(e){return!e&&this.instance?this.instance:new Xe(this,Nt(this.attrs,e))},Ht.compile=function(e,t){var i=Object.create(null),n=0;return e.forEach((function(e,r){return i[e]=new Ht(e,n++,t,r)})),i},Ht.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e},Ht.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},Ht.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var qt=function(e){for(var t in this.spec={},e)this.spec[t]=e[t];this.spec.nodes=qe.from(e.nodes),this.spec.marks=qe.from(e.marks),this.nodes=Ft.compile(this.spec.nodes,this),this.marks=Ht.compile(this.spec.marks,this);var i=Object.create(null);for(var n in this.nodes){if(n in this.marks)throw new RangeError(n+" can not be both a node and a mark");var r=this.nodes[n],s=r.spec.content||"",o=r.spec.marks;r.contentMatch=i[s]||(i[s]=It.parse(s,this.nodes)),r.inlineContent=r.contentMatch.inlineContent,r.markSet="_"==o?null:o?Wt(this,o.split(" ")):""!=o&&r.inlineContent?null:[]}for(var a in this.marks){var l=this.marks[a],c=l.spec.excludes;l.excluded=null==c?[l]:""==c?[]:Wt(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function Wt(e,t){for(var i=[],n=0;n<t.length;n++){var r=t[n],s=e.marks[r],o=s;if(s)i.push(s);else for(var a in e.marks){var l=e.marks[a];("_"==r||l.spec.group&&l.spec.group.split(" ").indexOf(r)>-1)&&i.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[n]+"'")}return i}qt.prototype.node=function(e,t,i,n){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof Ft))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,i,n)},qt.prototype.text=function(e,t){var i=this.nodes.text;return new kt(i,i.defaultAttrs,e,Xe.setFrom(t))},qt.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},qt.prototype.nodeFromJSON=function(e){return Ct.fromJSON(this,e)},qt.prototype.markFromJSON=function(e){return Xe.fromJSON(this,e)},qt.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var Vt=function(e,t){var i=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((function(e){e.tag?i.tags.push(e):e.style&&i.styles.push(e)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var i=e.nodes[t.node];return i.contentMatch.matchType(i)}))};Vt.prototype.parse=function(e,t){void 0===t&&(t={});var i=new Xt(this,t,!1);return i.addAll(e,null,t.from,t.to),i.finish()},Vt.prototype.parseSlice=function(e,t){void 0===t&&(t={});var i=new Xt(this,t,!0);return i.addAll(e,null,t.from,t.to),tt.maxOpen(i.finish())},Vt.prototype.matchTag=function(e,t,i){for(var n=i?this.tags.indexOf(i)+1:0;n<this.tags.length;n++){var r=this.tags[n];if(ti(e,r.tag)&&(void 0===r.namespace||e.namespaceURI==r.namespace)&&(!r.context||t.matchesContext(r.context))){if(r.getAttrs){var s=r.getAttrs(e);if(!1===s)continue;r.attrs=s}return r}}},Vt.prototype.matchStyle=function(e,t,i,n){for(var r=n?this.styles.indexOf(n)+1:0;r<this.styles.length;r++){var s=this.styles[r];if(!(0!=s.style.indexOf(e)||s.context&&!i.matchesContext(s.context)||s.style.length>e.length&&(61!=s.style.charCodeAt(e.length)||s.style.slice(e.length+1)!=t))){if(s.getAttrs){var o=s.getAttrs(t);if(!1===o)continue;s.attrs=o}return s}}},Vt.schemaRules=function(e){var t=[];function i(e){for(var i=null==e.priority?50:e.priority,n=0;n<t.length;n++){var r=t[n];if((null==r.priority?50:r.priority)<i)break}t.splice(n,0,e)}var n,r=function(t){var n=e.marks[t].spec.parseDOM;n&&n.forEach((function(e){i(e=ii(e)),e.mark=t}))};for(var s in e.marks)r(s);for(var o in e.nodes)n=void 0,(n=e.nodes[o].spec.parseDOM)&&n.forEach((function(e){i(e=ii(e)),e.node=o}));return t},Vt.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new Vt(e,Vt.schemaRules(e)))};var Gt={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Kt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Jt={ol:!0,ul:!0};function Yt(e){return(e?1:0)|("full"===e?2:0)}var Qt=function(e,t,i,n,r,s,o){this.type=e,this.attrs=t,this.solid=r,this.match=s||(4&o?null:e.contentMatch),this.options=o,this.content=[],this.marks=i,this.activeMarks=Xe.none,this.pendingMarks=n,this.stashMarks=[]};Qt.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(Ge.from(e));if(!t){var i,n=this.type.contentMatch;return(i=n.findWrapping(e.type))?(this.match=n,i):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},Qt.prototype.finish=function(e){if(!(1&this.options)){var t,i=this.content[this.content.length-1];i&&i.isText&&(t=/[ \t\r\n\u000c]+$/.exec(i.text))&&(i.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-t[0].length)))}var n=Ge.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Ge.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n},Qt.prototype.popFromStashMark=function(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]},Qt.prototype.applyPending=function(e){for(var t=0,i=this.pendingMarks;t<i.length;t++){var n=i[t];(this.type?this.type.allowsMarkType(n.type):ni(n.type,e))&&!n.isInSet(this.activeMarks)&&(this.activeMarks=n.addToSet(this.activeMarks),this.pendingMarks=n.removeFromSet(this.pendingMarks))}},Qt.prototype.inlineContext=function(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Gt.hasOwnProperty(e.parentNode.nodeName.toLowerCase())};var Xt=function(e,t,i){this.parser=e,this.options=t,this.isOpen=i;var n,r=t.topNode,s=Yt(t.preserveWhitespace)|(i?4:0);n=r?new Qt(r.type,r.attrs,Xe.none,Xe.none,!0,t.topMatch||r.type.contentMatch,s):new Qt(i?null:e.schema.topNodeType,null,Xe.none,Xe.none,!0,null,s),this.nodes=[n],this.open=0,this.find=t.findPositions,this.needsBlock=!1},ei={top:{configurable:!0},currentPos:{configurable:!0}};function ti(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function ii(e){var t={};for(var i in e)t[i]=e[i];return t}function ni(e,t){var i=t.schema.nodes,n=function(n){var r=i[n];if(r.allowsMarkType(e)){var s=[],o=function(e){s.push(e);for(var i=0;i<e.edgeCount;i++){var n=e.edge(i),r=n.type,a=n.next;if(r==t)return!0;if(s.indexOf(a)<0&&o(a))return!0}};return o(r.contentMatch)?{v:!0}:void 0}};for(var r in i){var s=n(r);if(s)return s.v}}ei.top.get=function(){return this.nodes[this.open]},Xt.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),i=t?this.readStyles(function(e){for(var t,i=/\s*([\w-]+)\s*:\s*([^;]+)/g,n=[];t=i.exec(e);)n.push(t[1],t[2].trim());return n}(t)):null,n=this.top;if(null!=i)for(var r=0;r<i.length;r++)this.addPendingMark(i[r]);if(this.addElement(e),null!=i)for(var s=0;s<i.length;s++)this.removePendingMark(i[s],n)}},Xt.prototype.addTextNode=function(e){var t=e.nodeValue,i=this.top;if(2&i.options||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(1&i.options)t=2&i.options?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var n=i.content[i.content.length-1],r=e.previousSibling;(!n||r&&"BR"==r.nodeName||n.isText&&/[ \t\r\n\u000c]$/.test(n.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},Xt.prototype.addElement=function(e,t){var i,n=e.nodeName.toLowerCase();Jt.hasOwnProperty(n)&&this.parser.normalizeLists&&function(e){for(var t=e.firstChild,i=null;t;t=t.nextSibling){var n=1==t.nodeType?t.nodeName.toLowerCase():null;n&&Jt.hasOwnProperty(n)&&i?(i.appendChild(t),t=i):"li"==n?i=t:n&&(i=null)}}(e);var r=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(r?r.ignore:Kt.hasOwnProperty(n))this.findInside(e),this.ignoreFallback(e);else if(!r||r.skip||r.closeParent){r&&r.closeParent?this.open=Math.max(0,this.open-1):r&&r.skip.nodeType&&(e=r.skip);var s,o=this.top,a=this.needsBlock;if(Gt.hasOwnProperty(n))s=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),s&&this.sync(o),this.needsBlock=a}else this.addElementByRule(e,r,!1===r.consuming?i:null)},Xt.prototype.leafFallback=function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},Xt.prototype.ignoreFallback=function(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},Xt.prototype.readStyles=function(e){var t=Xe.none;e:for(var i=0;i<e.length;i+=2)for(var n=null;;){var r=this.parser.matchStyle(e[i],e[i+1],this,n);if(!r)continue e;if(r.ignore)return null;if(t=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(t),!1!==r.consuming)break;n=r}return t},Xt.prototype.addElementByRule=function(e,t,i){var n,r,s,o=this;t.node?(r=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(r.create(t.attrs))||this.leafFallback(e):n=this.enter(r,t.attrs,t.preserveWhitespace):(s=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(s));var a=this.top;if(r&&r.isLeaf)this.findInside(e);else if(i)this.addElement(e,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return o.insertNode(e)}));else{var l=t.contentElement;"string"==typeof l?l=e.querySelector(l):"function"==typeof l&&(l=l(e)),l||(l=e),this.findAround(e,l,!0),this.addAll(l,n)}n&&(this.sync(a),this.open--),s&&this.removePendingMark(s,a)},Xt.prototype.addAll=function(e,t,i,n){for(var r=i||0,s=i?e.childNodes[i]:e.firstChild,o=null==n?null:e.childNodes[n];s!=o;s=s.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(s),t&&Gt.hasOwnProperty(s.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,r)},Xt.prototype.findPlace=function(e){for(var t,i,n=this.open;n>=0;n--){var r=this.nodes[n],s=r.findWrapping(e);if(s&&(!t||t.length>s.length)&&(t=s,i=r,!s.length))break;if(r.solid)break}if(!t)return!1;this.sync(i);for(var o=0;o<t.length;o++)this.enterInner(t[o],null,!1);return!0},Xt.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var i=this.top;i.applyPending(e.type),i.match&&(i.match=i.match.matchType(e.type));for(var n=i.activeMarks,r=0;r<e.marks.length;r++)i.type&&!i.type.allowsMarkType(e.marks[r].type)||(n=e.marks[r].addToSet(n));return i.content.push(e.mark(n)),!0}return!1},Xt.prototype.enter=function(e,t,i){var n=this.findPlace(e.create(t));return n&&this.enterInner(e,t,!0,i),n},Xt.prototype.enterInner=function(e,t,i,n){this.closeExtra();var r=this.top;r.applyPending(e),r.match=r.match&&r.match.matchType(e,t);var s=null==n?-5&r.options:Yt(n);4&r.options&&0==r.content.length&&(s|=4),this.nodes.push(new Qt(e,t,r.activeMarks,r.pendingMarks,i,null,s)),this.open++},Xt.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},Xt.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},Xt.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},ei.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var i=this.nodes[t].content,n=i.length-1;n>=0;n--)e+=i[n].nodeSize;t&&e++}return e},Xt.prototype.findAtPoint=function(e,t){if(this.find)for(var i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==t&&(this.find[i].pos=this.currentPos)},Xt.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},Xt.prototype.findAround=function(e,t,i){if(e!=t&&this.find)for(var n=0;n<this.find.length;n++)null==this.find[n].pos&&1==e.nodeType&&e.contains(this.find[n].node)&&t.compareDocumentPosition(this.find[n].node)&(i?2:4)&&(this.find[n].pos=this.currentPos)},Xt.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},Xt.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var i=e.split("/"),n=this.options.context,r=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),s=-(n?n.depth+1:0)+(r?0:1),o=function(e,a){for(;e>=0;e--){var l=i[e];if(""==l){if(e==i.length-1||0==e)continue;for(;a>=s;a--)if(o(e-1,a))return!0;return!1}var c=a>0||0==a&&r?t.nodes[a].type:n&&a>=s?n.node(a-s).type:null;if(!c||c.name!=l&&-1==c.groups.indexOf(l))return!1;a--}return!0};return o(i.length-1,this.open)},Xt.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var i=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(var n in this.parser.schema.nodes){var r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}},Xt.prototype.addPendingMark=function(e){var t=function(e,t){for(var i=0;i<t.length;i++)if(e.eq(t[i]))return t[i]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)},Xt.prototype.removePendingMark=function(e,t){for(var i=this.open;i>=0;i--){var n=this.nodes[i];if(n.pendingMarks.lastIndexOf(e)>-1)n.pendingMarks=e.removeFromSet(n.pendingMarks);else{n.activeMarks=e.removeFromSet(n.activeMarks);var r=n.popFromStashMark(e);r&&n.type&&n.type.allowsMarkType(r.type)&&(n.activeMarks=r.addToSet(n.activeMarks))}if(n==t)break}},Object.defineProperties(Xt.prototype,ei);var ri=function(e,t){this.nodes=e||{},this.marks=t||{}};function si(e){var t={};for(var i in e){var n=e[i].spec.toDOM;n&&(t[i]=n)}return t}function oi(e){return e.document||window.document}ri.prototype.serializeFragment=function(e,t,i){var n=this;void 0===t&&(t={}),i||(i=oi(t).createDocumentFragment());var r=i,s=null;return e.forEach((function(e){if(s||e.marks.length){s||(s=[]);for(var i=0,o=0;i<s.length&&o<e.marks.length;){var a=e.marks[o];if(n.marks[a.type.name]){if(!a.eq(s[i])||!1===a.type.spec.spanning)break;i+=2,o++}else o++}for(;i<s.length;)r=s.pop(),s.pop();for(;o<e.marks.length;){var l=e.marks[o++],c=n.serializeMark(l,e.isInline,t);c&&(s.push(l,r),r.appendChild(c.dom),r=c.contentDOM||c.dom)}}r.appendChild(n.serializeNodeInner(e,t))})),i},ri.prototype.serializeNodeInner=function(e,t){void 0===t&&(t={});var i=ri.renderSpec(oi(t),this.nodes[e.type.name](e)),n=i.dom,r=i.contentDOM;if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,r,t):this.serializeFragment(e.content,t,r)}return n},ri.prototype.serializeNode=function(e,t){void 0===t&&(t={});for(var i=this.serializeNodeInner(e,t),n=e.marks.length-1;n>=0;n--){var r=this.serializeMark(e.marks[n],e.isInline,t);r&&((r.contentDOM||r.dom).appendChild(i),i=r.dom)}return i},ri.prototype.serializeMark=function(e,t,i){void 0===i&&(i={});var n=this.marks[e.type.name];return n&&ri.renderSpec(oi(i),n(e,t))},ri.renderSpec=function(e,t,i){if(void 0===i&&(i=null),"string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var n=t[0],r=n.indexOf(" ");r>0&&(i=n.slice(0,r),n=n.slice(r+1));var s=null,o=i?e.createElementNS(i,n):e.createElement(n),a=t[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var c in l=2,a)if(null!=a[c]){var h=c.indexOf(" ");h>0?o.setAttributeNS(c.slice(0,h),c.slice(h+1),a[c]):o.setAttribute(c,a[c])}for(var d=l;d<t.length;d++){var u=t[d];if(0===u){if(d<t.length-1||d>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:o,contentDOM:o}}var p=ri.renderSpec(e,u,i),m=p.dom,f=p.contentDOM;if(o.appendChild(m),f){if(s)throw new RangeError("Multiple content holes");s=f}}return{dom:o,contentDOM:s}},ri.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new ri(this.nodesFromSchema(e),this.marksFromSchema(e)))},ri.nodesFromSchema=function(e){var t=si(e.nodes);return t.text||(t.text=function(e){return e.text}),t},ri.marksFromSchema=function(e){return si(e.marks)};var ai=Math.pow(2,16);function li(e,t){return e+t*ai}function ci(e){return 65535&e}var hi=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=null),this.pos=e,this.deleted=t,this.recover=i},di=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};di.prototype.recover=function(e){var t=0,i=ci(e);if(!this.inverted)for(var n=0;n<i;n++)t+=this.ranges[3*n+2]-this.ranges[3*n+1];return this.ranges[3*i]+t+function(e){return(e-(65535&e))/ai}(e)},di.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},di.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},di.prototype._map=function(e,t,i){for(var n=0,r=this.inverted?2:1,s=this.inverted?1:2,o=0;o<this.ranges.length;o+=3){var a=this.ranges[o]-(this.inverted?n:0);if(a>e)break;var l=this.ranges[o+r],c=this.ranges[o+s],h=a+l;if(e<=h){var d=a+n+((l?e==a?-1:e==h?1:t:t)<0?0:c);if(i)return d;var u=e==(t<0?a:h)?null:li(o/3,e-a);return new hi(d,t<0?e!=a:e!=h,u)}n+=c-l}return i?e+n:new hi(e+n)},di.prototype.touches=function(e,t){for(var i=0,n=ci(t),r=this.inverted?2:1,s=this.inverted?1:2,o=0;o<this.ranges.length;o+=3){var a=this.ranges[o]-(this.inverted?i:0);if(a>e)break;var l=this.ranges[o+r];if(e<=a+l&&o==3*n)return!0;i+=this.ranges[o+s]-l}return!1},di.prototype.forEach=function(e){for(var t=this.inverted?2:1,i=this.inverted?1:2,n=0,r=0;n<this.ranges.length;n+=3){var s=this.ranges[n],o=s-(this.inverted?r:0),a=s+(this.inverted?0:r),l=this.ranges[n+t],c=this.ranges[n+i];e(o,o+l,a,a+c),r+=c-l}},di.prototype.invert=function(){return new di(this.ranges,!this.inverted)},di.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},di.offset=function(e){return 0==e?di.empty:new di(e<0?[0,-e,0]:[0,0,e])},di.empty=new di([]);var ui=function(e,t,i,n){this.maps=e||[],this.from=i||0,this.to=null==n?this.maps.length:n,this.mirror=t};function pi(e){var t=Error.call(this,e);return t.__proto__=pi.prototype,t}ui.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new ui(this.maps,this.mirror,e,t)},ui.prototype.copy=function(){return new ui(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},ui.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},ui.prototype.appendMapping=function(e){for(var t=0,i=this.maps.length;t<e.maps.length;t++){var n=e.getMirror(t);this.appendMap(e.maps[t],null!=n&&n<t?i+n:null)}},ui.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},ui.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},ui.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,i=this.maps.length+e.maps.length;t>=0;t--){var n=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=n&&n>t?i-n-1:null)}},ui.prototype.invert=function(){var e=new ui;return e.appendMappingInverted(this),e},ui.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var i=this.from;i<this.to;i++)e=this.maps[i].map(e,t);return e},ui.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},ui.prototype._map=function(e,t,i){for(var n=!1,r=this.from;r<this.to;r++){var s=this.maps[r].mapResult(e,t);if(null!=s.recover){var o=this.getMirror(r);if(null!=o&&o>r&&o<this.to){r=o,e=this.maps[o].recover(s.recover);continue}}s.deleted&&(n=!0),e=s.pos}return i?e:new hi(e,n)},pi.prototype=Object.create(Error.prototype),pi.prototype.constructor=pi,pi.prototype.name="TransformError";var mi=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ui},fi={before:{configurable:!0},docChanged:{configurable:!0}};function gi(){throw new Error("Override me")}fi.before.get=function(){return this.docs.length?this.docs[0]:this.doc},mi.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new pi(t.failed);return this},mi.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},fi.docChanged.get=function(){return this.steps.length>0},mi.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(mi.prototype,fi);var vi=Object.create(null),yi=function(){};yi.prototype.apply=function(e){return gi()},yi.prototype.getMap=function(){return di.empty},yi.prototype.invert=function(e){return gi()},yi.prototype.map=function(e){return gi()},yi.prototype.merge=function(e){return null},yi.prototype.toJSON=function(){return gi()},yi.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var i=vi[t.stepType];if(!i)throw new RangeError("No step type "+t.stepType+" defined");return i.fromJSON(e,t)},yi.jsonID=function(e,t){if(e in vi)throw new RangeError("Duplicate use of step JSON ID "+e);return vi[e]=t,t.prototype.jsonID=e,t};var xi=function(e,t){this.doc=e,this.failed=t};xi.ok=function(e){return new xi(e,null)},xi.fail=function(e){return new xi(null,e)},xi.fromReplace=function(e,t,i,n){try{return xi.ok(e.replace(t,i,n))}catch(e){if(e instanceof et)return xi.fail(e.message);throw e}};var bi=function(e){function t(t,i,n,r){e.call(this),this.from=t,this.to=i,this.slice=n,this.structure=!!r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&Ci(e,this.from,this.to)?xi.fail("Structure replace would overwrite content"):xi.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new di([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var i=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return i.deleted&&n.deleted?null:new t(i.pos,Math.max(i.pos,n.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var i=this.slice.size+e.slice.size==0?tt.empty:new tt(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,i,this.structure)}var n=this.slice.size+e.slice.size==0?tt.empty:new tt(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),n,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,i){if("number"!=typeof i.from||"number"!=typeof i.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(i.from,i.to,tt.fromJSON(e,i.slice),!!i.structure)},t}(yi);yi.jsonID("replace",bi);var wi=function(e){function t(t,i,n,r,s,o,a){e.call(this),this.from=t,this.to=i,this.gapFrom=n,this.gapTo=r,this.slice=s,this.insert=o,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(Ci(e,this.from,this.gapFrom)||Ci(e,this.gapTo,this.to)))return xi.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return xi.fail("Gap is not a flat range");var i=this.slice.insertAt(this.insert,t.content);return i?xi.fromReplace(e,this.from,this.to,i):xi.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new di([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var i=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+i,this.from+this.insert,this.from+this.insert+i,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var i=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return i.deleted&&n.deleted||r<i.pos||s>n.pos?null:new t(i.pos,n.pos,r,s,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,i){if("number"!=typeof i.from||"number"!=typeof i.to||"number"!=typeof i.gapFrom||"number"!=typeof i.gapTo||"number"!=typeof i.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(i.from,i.to,i.gapFrom,i.gapTo,tt.fromJSON(e,i.slice),i.insert,!!i.structure)},t}(yi);function Ci(e,t,i){for(var n=e.resolve(t),r=i-t,s=n.depth;r>0&&s>0&&n.indexAfter(s)==n.node(s).childCount;)s--,r--;if(r>0)for(var o=n.node(s).maybeChild(n.indexAfter(s));r>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,r--}return!1}function Pi(e,t,i){return(0==t||e.canReplace(t,e.childCount))&&(i==e.childCount||e.canReplace(0,i))}function ki(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),i=e.depth;;--i){var n=e.$from.node(i),r=e.$from.index(i),s=e.$to.indexAfter(i);if(i<e.depth&&n.canReplace(r,s,t))return i;if(0==i||n.type.spec.isolating||!Pi(n,r,s))break}}function Si(e,t,i,n){void 0===n&&(n=e);var r=function(e,t){var i=e.parent,n=e.startIndex,r=e.endIndex,s=i.contentMatchAt(n).findWrapping(t);if(!s)return null;var o=s.length?s[0]:t;return i.canReplaceWith(n,r,o)?s:null}(e,t),s=r&&function(e,t){var i=e.parent,n=e.startIndex,r=e.endIndex,s=i.child(n),o=t.contentMatch.findWrapping(s.type);if(!o)return null;for(var a=(o.length?o[o.length-1]:t).contentMatch,l=n;a&&l<r;l++)a=a.matchType(i.child(l).type);return a&&a.validEnd?o:null}(n,t);return s?r.map(Ii).concat({type:t,attrs:i}).concat(s.map(Ii)):null}function Ii(e){return{type:e,attrs:null}}function Ai(e,t,i,n){void 0===i&&(i=1);var r=e.resolve(t),s=r.depth-i,o=n&&n[n.length-1]||r.parent;if(s<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!o.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(var a=r.depth-1,l=i-2;a>s;a--,l--){var c=r.node(a),h=r.index(a);if(c.type.spec.isolating)return!1;var d=c.content.cutByIndex(h,c.childCount),u=n&&n[l]||c;if(u!=c&&(d=d.replaceChild(0,u.type.create(u.attrs))),!c.canReplace(h+1,c.childCount)||!u.type.validContent(d))return!1}var p=r.indexAfter(s),m=n&&n[0];return r.node(s).canReplaceWith(p,p,m?m.type:r.node(s+1).type)}function _i(e,t){var i=e.resolve(t),n=i.index();return function(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}(i.nodeBefore,i.nodeAfter)&&i.parent.canReplace(n,n+1)}function Ei(e,t,i){var n=e.resolve(t);if(!i.content.size)return t;for(var r=i.content,s=0;s<i.openStart;s++)r=r.firstChild.content;for(var o=1;o<=(0==i.openStart&&i.size?2:1);o++)for(var a=n.depth;a>=0;a--){var l=a==n.depth?0:n.pos<=(n.start(a+1)+n.end(a+1))/2?-1:1,c=n.index(a)+(l>0?1:0),h=n.node(a),d=!1;if(1==o)d=h.canReplace(c,c,r);else{var u=h.contentMatchAt(c).findWrapping(r.firstChild.type);d=u&&h.canReplaceWith(c,c,u[0])}if(d)return 0==l?n.pos:l<0?n.before(a+1):n.after(a+1)}return null}function Ti(e,t,i){for(var n=[],r=0;r<e.childCount;r++){var s=e.child(r);s.content.size&&(s=s.copy(Ti(s.content,t,s))),s.isInline&&(s=t(s,i,r)),n.push(s)}return Ge.fromArray(n)}yi.jsonID("replaceAround",wi),mi.prototype.lift=function(e,t){for(var i=e.$from,n=e.$to,r=e.depth,s=i.before(r+1),o=n.after(r+1),a=s,l=o,c=Ge.empty,h=0,d=r,u=!1;d>t;d--)u||i.index(d)>0?(u=!0,c=Ge.from(i.node(d).copy(c)),h++):a--;for(var p=Ge.empty,m=0,f=r,g=!1;f>t;f--)g||n.after(f+1)<n.end(f)?(g=!0,p=Ge.from(n.node(f).copy(p)),m++):l++;return this.step(new wi(a,l,s,o,new tt(c.append(p),h,m),c.size-h,!0))},mi.prototype.wrap=function(e,t){for(var i=Ge.empty,n=t.length-1;n>=0;n--)i=Ge.from(t[n].type.create(t[n].attrs,i));var r=e.start,s=e.end;return this.step(new wi(r,s,r,s,new tt(i,0,0),t.length,!0))},mi.prototype.setBlockType=function(e,t,i,n){var r=this;if(void 0===t&&(t=e),!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(i,n)&&function(e,t,i){var n=e.resolve(t),r=n.index();return n.parent.canReplaceWith(r,r+1,i)}(r.doc,r.mapping.slice(s).map(t),i)){r.clearIncompatible(r.mapping.slice(s).map(t,1),i);var o=r.mapping.slice(s),a=o.map(t,1),l=o.map(t+e.nodeSize,1);return r.step(new wi(a,l,a+1,l-1,new tt(Ge.from(i.create(n,null,e.marks)),0,0),1,!0)),!1}})),this},mi.prototype.setNodeMarkup=function(e,t,i,n){var r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at given position");t||(t=r.type);var s=t.create(i,null,n||r.marks);if(r.isLeaf)return this.replaceWith(e,e+r.nodeSize,s);if(!t.validContent(r.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new wi(e,e+r.nodeSize,e+1,e+r.nodeSize-1,new tt(Ge.from(s),0,0),1,!0))},mi.prototype.split=function(e,t,i){void 0===t&&(t=1);for(var n=this.doc.resolve(e),r=Ge.empty,s=Ge.empty,o=n.depth,a=n.depth-t,l=t-1;o>a;o--,l--){r=Ge.from(n.node(o).copy(r));var c=i&&i[l];s=Ge.from(c?c.type.create(c.attrs,s):n.node(o).copy(s))}return this.step(new bi(e,e,new tt(r.append(s),t,t),!0))},mi.prototype.join=function(e,t){void 0===t&&(t=1);var i=new bi(e-t,e+t,tt.empty,!0);return this.step(i)};var Mi=function(e){function t(t,i,n){e.call(this),this.from=t,this.to=i,this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,i=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),s=new tt(Ti(i.content,(function(e,i){return e.isAtom&&i.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),r),i.openStart,i.openEnd);return xi.fromReplace(e,this.from,this.to,s)},t.prototype.invert=function(){return new $i(this.from,this.to,this.mark)},t.prototype.map=function(e){var i=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return i.deleted&&n.deleted||i.pos>=n.pos?null:new t(i.pos,n.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,i){if("number"!=typeof i.from||"number"!=typeof i.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(i.from,i.to,e.markFromJSON(i.mark))},t}(yi);yi.jsonID("addMark",Mi);var $i=function(e){function t(t,i,n){e.call(this),this.from=t,this.to=i,this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,i=e.slice(this.from,this.to),n=new tt(Ti(i.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),i.openStart,i.openEnd);return xi.fromReplace(e,this.from,this.to,n)},t.prototype.invert=function(){return new Mi(this.from,this.to,this.mark)},t.prototype.map=function(e){var i=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return i.deleted&&n.deleted||i.pos>=n.pos?null:new t(i.pos,n.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,i){if("number"!=typeof i.from||"number"!=typeof i.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(i.from,i.to,e.markFromJSON(i.mark))},t}(yi);function Oi(e,t,i){return!i.openStart&&!i.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),i.content)}yi.jsonID("removeMark",$i),mi.prototype.addMark=function(e,t,i){var n=this,r=[],s=[],o=null,a=null;return this.doc.nodesBetween(e,t,(function(n,l,c){if(n.isInline){var h=n.marks;if(!i.isInSet(h)&&c.type.allowsMarkType(i.type)){for(var d=Math.max(l,e),u=Math.min(l+n.nodeSize,t),p=i.addToSet(h),m=0;m<h.length;m++)h[m].isInSet(p)||(o&&o.to==d&&o.mark.eq(h[m])?o.to=u:r.push(o=new $i(d,u,h[m])));a&&a.to==d?a.to=u:s.push(a=new Mi(d,u,i))}}})),r.forEach((function(e){return n.step(e)})),s.forEach((function(e){return n.step(e)})),this},mi.prototype.removeMark=function(e,t,i){var n=this;void 0===i&&(i=null);var r=[],s=0;return this.doc.nodesBetween(e,t,(function(n,o){if(n.isInline){s++;var a=null;if(i instanceof Ht)for(var l,c=n.marks;l=i.isInSet(c);)(a||(a=[])).push(l),c=l.removeFromSet(c);else i?i.isInSet(n.marks)&&(a=[i]):a=n.marks;if(a&&a.length)for(var h=Math.min(o+n.nodeSize,t),d=0;d<a.length;d++){for(var u=a[d],p=void 0,m=0;m<r.length;m++){var f=r[m];f.step==s-1&&u.eq(r[m].style)&&(p=f)}p?(p.to=h,p.step=s):r.push({style:u,from:Math.max(o,e),to:h,step:s})}}})),r.forEach((function(e){return n.step(new $i(e.from,e.to,e.style))})),this},mi.prototype.clearIncompatible=function(e,t,i){void 0===i&&(i=t.contentMatch);for(var n=this.doc.nodeAt(e),r=[],s=e+1,o=0;o<n.childCount;o++){var a=n.child(o),l=s+a.nodeSize,c=i.matchType(a.type,a.attrs);if(c){i=c;for(var h=0;h<a.marks.length;h++)t.allowsMarkType(a.marks[h].type)||this.step(new $i(s,l,a.marks[h]))}else r.push(new bi(s,l,tt.empty));s=l}if(!i.validEnd){var d=i.fillBefore(Ge.empty,!0);this.replace(s,s,new tt(d,0,0))}for(var u=r.length-1;u>=0;u--)this.step(r[u]);return this},mi.prototype.replace=function(e,t,i){void 0===t&&(t=e),void 0===i&&(i=tt.empty);var n=function(e,t,i,n){if(void 0===i&&(i=t),void 0===n&&(n=tt.empty),t==i&&!n.size)return null;var r=e.resolve(t),s=e.resolve(i);return Oi(r,s,n)?new bi(t,i,n):new Di(r,s,n).fit()}(this.doc,e,t,i);return n&&this.step(n),this},mi.prototype.replaceWith=function(e,t,i){return this.replace(e,t,new tt(Ge.from(i),0,0))},mi.prototype.delete=function(e,t){return this.replace(e,t,tt.empty)},mi.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var Di=function(e,t,i){this.$to=t,this.$from=e,this.unplaced=i,this.frontier=[];for(var n=0;n<=e.depth;n++){var r=e.node(n);this.frontier.push({type:r.type,match:r.contentMatchAt(e.indexAfter(n))})}this.placed=Ge.empty;for(var s=e.depth;s>0;s--)this.placed=Ge.from(e.node(s).copy(this.placed))},Bi={depth:{configurable:!0}};function Li(e,t,i){return 0==t?e.cutByIndex(i):e.replaceChild(0,e.firstChild.copy(Li(e.firstChild.content,t-1,i)))}function Ri(e,t,i){return 0==t?e.append(i):e.replaceChild(e.childCount-1,e.lastChild.copy(Ri(e.lastChild.content,t-1,i)))}function Ni(e,t){for(var i=0;i<t;i++)e=e.firstChild.content;return e}function Zi(e,t,i){if(t<=0)return e;var n=e.content;return t>1&&(n=n.replaceChild(0,Zi(n.firstChild,t-1,1==n.childCount?i-1:0))),t>0&&(n=e.type.contentMatch.fillBefore(n).append(n),i<=0&&(n=n.append(e.type.contentMatch.matchFragment(n).fillBefore(Ge.empty,!0)))),e.copy(n)}function Fi(e,t,i,n,r){var s=e.node(t),o=r?e.indexAfter(t):e.index(t);if(o==s.childCount&&!i.compatibleContent(s.type))return null;var a=n.fillBefore(s.content,!0,o);return a&&!function(e,t,i){for(var n=i;n<t.childCount;n++)if(!e.allowsMarks(t.child(n).marks))return!0;return!1}(i,s.content,o)?a:null}function ji(e,t,i,n,r){if(t<i){var s=e.firstChild;e=e.replaceChild(0,s.copy(ji(s.content,t+1,i,n,s)))}if(t>n){var o=r.contentMatchAt(0),a=o.fillBefore(e).append(e);e=a.append(o.matchFragment(a).fillBefore(Ge.empty,!0))}return e}function zi(e,t){for(var i=[],n=Math.min(e.depth,t.depth);n>=0;n--){var r=e.start(n);if(r<e.pos-(e.depth-n)||t.end(n)>t.pos+(t.depth-n)||e.node(n).type.spec.isolating||t.node(n).type.spec.isolating)break;(r==t.start(n)||n==e.depth&&n==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&n&&t.start(n-1)==r-1)&&i.push(n)}return i}Bi.depth.get=function(){return this.frontier.length-1},Di.prototype.fit=function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),i=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(t<0?this.$to:n.doc.resolve(t));if(!r)return null;for(var s=this.placed,o=n.depth,a=r.depth;o&&a&&1==s.childCount;)s=s.firstChild.content,o--,a--;var l=new tt(s,o,a);return t>-1?new wi(n.pos,t,this.$to.pos,this.$to.end(),l,i):l.size||n.pos!=this.$to.pos?new bi(n.pos,r.pos,l):void 0},Di.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--)for(var i=void 0,n=(t?(i=Ni(this.unplaced.content,t-1).firstChild).content:this.unplaced.content).firstChild,r=this.depth;r>=0;r--){var s=this.frontier[r],o=s.type,a=s.match,l=void 0,c=void 0;if(1==e&&(n?a.matchType(n.type)||(c=a.fillBefore(Ge.from(n),!1)):o.compatibleContent(i.type)))return{sliceDepth:t,frontierDepth:r,parent:i,inject:c};if(2==e&&n&&(l=a.findWrapping(n.type)))return{sliceDepth:t,frontierDepth:r,parent:i,wrap:l};if(i&&a.matchType(i.type))break}},Di.prototype.openMore=function(){var e=this.unplaced,t=e.content,i=e.openStart,n=e.openEnd,r=Ni(t,i);return!(!r.childCount||r.firstChild.isLeaf||(this.unplaced=new tt(t,i+1,Math.max(n,r.size+i>=t.size-n?i+1:0)),0))},Di.prototype.dropNode=function(){var e=this.unplaced,t=e.content,i=e.openStart,n=e.openEnd,r=Ni(t,i);if(r.childCount<=1&&i>0){var s=t.size-i<=i+r.size;this.unplaced=new tt(Li(t,i-1,1),i-1,s?i-1:n)}else this.unplaced=new tt(Li(t,i,1),i,n)},Di.prototype.placeNodes=function(e){for(var t=e.sliceDepth,i=e.frontierDepth,n=e.parent,r=e.inject,s=e.wrap;this.depth>i;)this.closeFrontierNode();if(s)for(var o=0;o<s.length;o++)this.openFrontierNode(s[o]);var a=this.unplaced,l=n?n.content:a.content,c=a.openStart-t,h=0,d=[],u=this.frontier[i],p=u.match,m=u.type;if(r){for(var f=0;f<r.childCount;f++)d.push(r.child(f));p=p.matchFragment(r)}for(var g=l.size+t-(a.content.size-a.openEnd);h<l.childCount;){var v=l.child(h),y=p.matchType(v.type);if(!y)break;(++h>1||0==c||v.content.size)&&(p=y,d.push(Zi(v.mark(m.allowedMarks(v.marks)),1==h?c:0,h==l.childCount?g:-1)))}var x=h==l.childCount;x||(g=-1),this.placed=Ri(this.placed,i,Ge.from(d)),this.frontier[i].match=p,x&&g<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var b=0,w=l;b<g;b++){var C=w.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),w=C.content}this.unplaced=x?0==t?tt.empty:new tt(Li(a.content,t-1,1),t-1,g<0?a.openEnd:t-1):new tt(Li(a.content,t,h),a.openStart,a.openEnd)},Di.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!Fi(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var i=this.$to.depth,n=this.$to.after(i);i>1&&n==this.$to.end(--i);)++n;return n},Di.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var i=this.frontier[t],n=i.match,r=i.type,s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=Fi(e,t,r,n,s);if(o){for(var a=t-1;a>=0;a--){var l=this.frontier[a],c=l.match,h=Fi(e,a,l.type,c,!0);if(!h||h.childCount)continue e}return{depth:t,fit:o,move:s?e.doc.resolve(e.after(t+1)):e}}}},Di.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Ri(this.placed,t.depth,t.fit)),e=t.move;for(var i=t.depth+1;i<=e.depth;i++){var n=e.node(i),r=n.type.contentMatch.fillBefore(n.content,!0,e.index(i));this.openFrontierNode(n.type,n.attrs,r)}return e},Di.prototype.openFrontierNode=function(e,t,i){var n=this.frontier[this.depth];n.match=n.match.matchType(e),this.placed=Ri(this.placed,this.depth,Ge.from(e.create(t,i))),this.frontier.push({type:e,match:e.contentMatch})},Di.prototype.closeFrontierNode=function(){var e=this.frontier.pop().match.fillBefore(Ge.empty,!0);e.childCount&&(this.placed=Ri(this.placed,this.frontier.length,e))},Object.defineProperties(Di.prototype,Bi),mi.prototype.replaceRange=function(e,t,i){if(!i.size)return this.deleteRange(e,t);var n=this.doc.resolve(e),r=this.doc.resolve(t);if(Oi(n,r,i))return this.step(new bi(e,t,i));var s=zi(n,this.doc.resolve(t));0==s[s.length-1]&&s.pop();var o=-(n.depth+1);s.unshift(o);for(var a=n.depth,l=n.pos-1;a>0;a--,l--){var c=n.node(a).type.spec;if(c.defining||c.isolating)break;s.indexOf(a)>-1?o=a:n.before(a)==l&&s.splice(1,0,-a)}for(var h=s.indexOf(o),d=[],u=i.openStart,p=i.content,m=0;;m++){var f=p.firstChild;if(d.push(f),m==i.openStart)break;p=f.content}u>0&&d[u-1].type.spec.defining&&n.node(h).type!=d[u-1].type?u-=1:u>=2&&d[u-1].isTextblock&&d[u-2].type.spec.defining&&n.node(h).type!=d[u-2].type&&(u-=2);for(var g=i.openStart;g>=0;g--){var v=(g+u+1)%(i.openStart+1),y=d[v];if(y)for(var x=0;x<s.length;x++){var b=s[(x+h)%s.length],w=!0;b<0&&(w=!1,b=-b);var C=n.node(b-1),P=n.index(b-1);if(C.canReplaceWith(P,P,y.type,y.marks))return this.replace(n.before(b),w?r.after(b):t,new tt(ji(i.content,0,i.openStart,v),v,i.openEnd))}}for(var k=this.steps.length,S=s.length-1;S>=0&&(this.replace(e,t,i),!(this.steps.length>k));S--){var I=s[S];I<0||(e=n.before(I),t=r.after(I))}return this},mi.prototype.replaceRangeWith=function(e,t,i){if(!i.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var n=function(e,t,i){var n=e.resolve(t);if(n.parent.canReplaceWith(n.index(),n.index(),i))return t;if(0==n.parentOffset)for(var r=n.depth-1;r>=0;r--){var s=n.index(r);if(n.node(r).canReplaceWith(s,s,i))return n.before(r+1);if(s>0)return null}if(n.parentOffset==n.parent.content.size)for(var o=n.depth-1;o>=0;o--){var a=n.indexAfter(o);if(n.node(o).canReplaceWith(a,a,i))return n.after(o+1);if(a<n.node(o).childCount)return null}}(this.doc,e,i.type);null!=n&&(e=t=n)}return this.replaceRange(e,t,new tt(Ge.from(i),0,0))},mi.prototype.deleteRange=function(e,t){for(var i=this.doc.resolve(e),n=this.doc.resolve(t),r=zi(i,n),s=0;s<r.length;s++){var o=r[s],a=s==r.length-1;if(a&&0==o||i.node(o).type.contentMatch.validEnd)return this.delete(i.start(o),n.end(o));if(o>0&&(a||i.node(o-1).canReplace(i.index(o-1),n.indexAfter(o-1))))return this.delete(i.before(o),n.after(o))}for(var l=1;l<=i.depth&&l<=n.depth;l++)if(e-i.start(l)==i.depth-l&&t>i.end(l)&&n.end(l)-t!=n.depth-l)return this.delete(i.before(l),t);return this.delete(e,t)};var Ui=Object.create(null),Hi=function(e,t,i){this.ranges=i||[new Wi(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},qi={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};qi.anchor.get=function(){return this.$anchor.pos},qi.head.get=function(){return this.$head.pos},qi.from.get=function(){return this.$from.pos},qi.to.get=function(){return this.$to.pos},qi.$from.get=function(){return this.ranges[0].$from},qi.$to.get=function(){return this.ranges[0].$to},qi.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},Hi.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},Hi.prototype.replace=function(e,t){void 0===t&&(t=tt.empty);for(var i=t.content.lastChild,n=null,r=0;r<t.openEnd;r++)n=i,i=i.lastChild;for(var s=e.steps.length,o=this.ranges,a=0;a<o.length;a++){var l=o[a],c=l.$from,h=l.$to,d=e.mapping.slice(s);e.replaceRange(d.map(c.pos),d.map(h.pos),a?tt.empty:t),0==a&&en(e,s,(i?i.isInline:n&&n.isTextblock)?-1:1)}},Hi.prototype.replaceWith=function(e,t){for(var i=e.steps.length,n=this.ranges,r=0;r<n.length;r++){var s=n[r],o=s.$from,a=s.$to,l=e.mapping.slice(i),c=l.map(o.pos),h=l.map(a.pos);r?e.deleteRange(c,h):(e.replaceRangeWith(c,h,t),en(e,i,t.isInline?-1:1))}},Hi.findFrom=function(e,t,i){var n=e.parent.inlineContent?new Vi(e):Xi(e.node(0),e.parent,e.pos,e.index(),t,i);if(n)return n;for(var r=e.depth-1;r>=0;r--){var s=t<0?Xi(e.node(0),e.node(r),e.before(r+1),e.index(r),t,i):Xi(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,i);if(s)return s}},Hi.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new Yi(e.node(0))},Hi.atStart=function(e){return Xi(e,e,0,0,1)||new Yi(e)},Hi.atEnd=function(e){return Xi(e,e,e.content.size,e.childCount,-1)||new Yi(e)},Hi.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var i=Ui[t.type];if(!i)throw new RangeError("No selection type "+t.type+" defined");return i.fromJSON(e,t)},Hi.jsonID=function(e,t){if(e in Ui)throw new RangeError("Duplicate use of selection JSON ID "+e);return Ui[e]=t,t.prototype.jsonID=e,t},Hi.prototype.getBookmark=function(){return Vi.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(Hi.prototype,qi),Hi.prototype.visible=!0;var Wi=function(e,t){this.$from=e,this.$to=t},Vi=function(e){function t(t,i){void 0===i&&(i=t),e.call(this,t,i)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={$cursor:{configurable:!0}};return i.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(i,n){var r=i.resolve(n.map(this.head));if(!r.parent.inlineContent)return e.near(r);var s=i.resolve(n.map(this.anchor));return new t(s.parent.inlineContent?s:r,r)},t.prototype.replace=function(t,i){if(void 0===i&&(i=tt.empty),e.prototype.replace.call(this,t,i),i==tt.empty){var n=this.$from.marksAcross(this.$to);n&&t.ensureMarks(n)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new Gi(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,i){if("number"!=typeof i.anchor||"number"!=typeof i.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(i.anchor),e.resolve(i.head))},t.create=function(e,t,i){void 0===i&&(i=t);var n=e.resolve(t);return new this(n,i==t?n:e.resolve(i))},t.between=function(i,n,r){var s=i.pos-n.pos;if(r&&!s||(r=s>=0?1:-1),!n.parent.inlineContent){var o=e.findFrom(n,r,!0)||e.findFrom(n,-r,!0);if(!o)return e.near(n,r);n=o.$head}return i.parent.inlineContent||(0==s||(i=(e.findFrom(i,-r,!0)||e.findFrom(i,r,!0)).$anchor).pos<n.pos!=s<0)&&(i=n),new t(i,n)},Object.defineProperties(t.prototype,i),t}(Hi);Hi.jsonID("text",Vi);var Gi=function(e,t){this.anchor=e,this.head=t};Gi.prototype.map=function(e){return new Gi(e.map(this.anchor),e.map(this.head))},Gi.prototype.resolve=function(e){return Vi.between(e.resolve(this.anchor),e.resolve(this.head))};var Ki=function(e){function t(t){var i=t.nodeAfter,n=t.node(0).resolve(t.pos+i.nodeSize);e.call(this,t,n),this.node=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(i,n){var r=n.mapResult(this.anchor),s=r.deleted,o=r.pos,a=i.resolve(o);return s?e.near(a):new t(a)},t.prototype.content=function(){return new tt(Ge.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new Ji(this.anchor)},t.fromJSON=function(e,i){if("number"!=typeof i.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(i.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(Hi);Ki.prototype.visible=!1,Hi.jsonID("node",Ki);var Ji=function(e){this.anchor=e};Ji.prototype.map=function(e){var t=e.mapResult(this.anchor),i=t.deleted,n=t.pos;return i?new Gi(n,n):new Ji(n)},Ji.prototype.resolve=function(e){var t=e.resolve(this.anchor),i=t.nodeAfter;return i&&Ki.isSelectable(i)?new Ki(t):Hi.near(t)};var Yi=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(t,i){if(void 0===i&&(i=tt.empty),i==tt.empty){t.delete(0,t.doc.content.size);var n=e.atStart(t.doc);n.eq(t.selection)||t.setSelection(n)}else e.prototype.replace.call(this,t,i)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return Qi},t}(Hi);Hi.jsonID("all",Yi);var Qi={map:function(){return this},resolve:function(e){return new Yi(e)}};function Xi(e,t,i,n,r,s){if(t.inlineContent)return Vi.create(e,i);for(var o=n-(r>0?0:1);r>0?o<t.childCount:o>=0;o+=r){var a=t.child(o);if(a.isAtom){if(!s&&Ki.isSelectable(a))return Ki.create(e,i-(r<0?a.nodeSize:0))}else{var l=Xi(e,a,i+r,r<0?a.childCount:0,r,s);if(l)return l}i+=a.nodeSize*r}}function en(e,t,i){var n=e.steps.length-1;if(!(n<t)){var r,s=e.steps[n];(s instanceof bi||s instanceof wi)&&(e.mapping.maps[n].forEach((function(e,t,i,n){null==r&&(r=n)})),e.setSelection(Hi.near(e.doc.resolve(r),i)))}}var tn=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return i.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},i.selectionSet.get=function(){return(1&this.updated)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=2,this},t.prototype.ensureMarks=function(e){return Xe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},i.storedMarksSet.get=function(){return(2&this.updated)>0},t.prototype.addStep=function(t,i){e.prototype.addStep.call(this,t,i),this.updated=-3&this.updated,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var i=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||Xe.none))),i.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,i){void 0===i&&(i=t);var n=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(n.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,i);var r=this.storedMarks;if(!r){var s=this.doc.resolve(t);r=i==t?s.marks():s.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(t,i,n.text(e,r)),this.selection.empty||this.setSelection(Hi.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},i.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=4,this},i.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(t.prototype,i),t}(mi);function nn(e,t){return t&&e?e.bind(t):e}var rn=function(e,t,i){this.name=e,this.init=nn(t.init,i),this.apply=nn(t.apply,i)},sn=[new rn("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new rn("selection",{init:function(e,t){return e.selection||Hi.atStart(t.doc)},apply:function(e){return e.selection}}),new rn("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,i,n){return n.selection.$cursor?e.storedMarks:null}}),new rn("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],on=function(e,t){var i=this;this.schema=e,this.fields=sn.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(i.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");i.plugins.push(e),i.pluginsByKey[e.key]=e,e.spec.state&&i.fields.push(new rn(e.key,e.spec.state,e))}))},an=function(e){this.config=e},ln={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};ln.schema.get=function(){return this.config.schema},ln.plugins.get=function(){return this.config.plugins},an.prototype.apply=function(e){return this.applyTransaction(e).state},an.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var i=0;i<this.config.plugins.length;i++)if(i!=t){var n=this.config.plugins[i];if(n.spec.filterTransaction&&!n.spec.filterTransaction.call(n,e,this))return!1}return!0},an.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],i=this.applyInner(e),n=null;;){for(var r=!1,s=0;s<this.config.plugins.length;s++){var o=this.config.plugins[s];if(o.spec.appendTransaction){var a=n?n[s].n:0,l=n?n[s].state:this,c=a<t.length&&o.spec.appendTransaction.call(o,a?t.slice(a):t,l,i);if(c&&i.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!n){n=[];for(var h=0;h<this.config.plugins.length;h++)n.push(h<s?{state:i,n:t.length}:{state:this,n:0})}t.push(c),i=i.applyInner(c),r=!0}n&&(n[s]={state:i,n:t.length})}}if(!r)return{state:i,transactions:t}}},an.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new an(this.config),i=this.config.fields,n=0;n<i.length;n++){var r=i[n];t[r.name]=r.apply(e,this[r.name],this,t)}for(var s=0;s<cn.length;s++)cn[s](this,e,t);return t},ln.tr.get=function(){return new tn(this)},an.create=function(e){for(var t=new on(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new an(t),n=0;n<t.fields.length;n++)i[t.fields[n].name]=t.fields[n].init(e,i);return i},an.prototype.reconfigure=function(e){for(var t=new on(this.schema,e.plugins),i=t.fields,n=new an(t),r=0;r<i.length;r++){var s=i[r].name;n[s]=this.hasOwnProperty(s)?this[s]:i[r].init(e,n)}return n},an.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var i in e){if("doc"==i||"selection"==i)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var n=e[i],r=n.spec.state;r&&r.toJSON&&(t[i]=r.toJSON.call(n,this[n.key]))}return t},an.fromJSON=function(e,t,i){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var n=new on(e.schema,e.plugins),r=new an(n);return n.fields.forEach((function(n){if("doc"==n.name)r.doc=Ct.fromJSON(e.schema,t.doc);else if("selection"==n.name)r.selection=Hi.fromJSON(r.doc,t.selection);else if("storedMarks"==n.name)t.storedMarks&&(r.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(i)for(var s in i){var o=i[s],a=o.spec.state;if(o.key==n.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,s))return void(r[n.name]=a.fromJSON.call(o,e,t[s],r))}r[n.name]=n.init(e,r)}})),r},an.addApplyListener=function(e){cn.push(e)},an.removeApplyListener=function(e){var t=cn.indexOf(e);t>-1&&cn.splice(t,1)},Object.defineProperties(an.prototype,ln);var cn=[];function hn(e,t,i){for(var n in e){var r=e[n];r instanceof Function?r=r.bind(t):"handleDOMEvents"==n&&(r=hn(r,t,{})),i[n]=r}return i}var dn=function(e){this.props={},e.props&&hn(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:pn("plugin")};dn.prototype.getState=function(e){return e[this.key]};var un=Object.create(null);function pn(e){return e in un?e+"$"+ ++un[e]:(un[e]=0,e+"$")}var mn=function(e){void 0===e&&(e="key"),this.key=pn(e)};mn.prototype.get=function(e){return e.config.pluginsByKey[this.key]},mn.prototype.getState=function(e){return e[this.key]};var fn={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var gn=/Edge\/(\d+)/.exec(navigator.userAgent),vn=/MSIE \d/.test(navigator.userAgent),yn=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),xn=fn.ie=!!(vn||yn||gn);fn.ie_version=vn?document.documentMode||6:yn?+yn[1]:gn?+gn[1]:null,fn.gecko=!xn&&/gecko\/(\d+)/i.test(navigator.userAgent),fn.gecko_version=fn.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var bn=!xn&&/Chrome\/(\d+)/.exec(navigator.userAgent);fn.chrome=!!bn,fn.chrome_version=bn&&+bn[1],fn.safari=!xn&&/Apple Computer/.test(navigator.vendor),fn.ios=fn.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),fn.mac=fn.ios||/Mac/.test(navigator.platform),fn.android=/Android \d/.test(navigator.userAgent),fn.webkit="webkitFontSmoothing"in document.documentElement.style,fn.webkit_version=fn.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var wn=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},Cn=function(e){var t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},Pn=null,kn=function(e,t,i){var n=Pn||(Pn=document.createRange());return n.setEnd(e,null==i?e.nodeValue.length:i),n.setStart(e,t||0),n},Sn=function(e,t,i,n){return i&&(An(e,t,i,n,-1)||An(e,t,i,n,1))},In=/^(img|br|input|textarea|hr)$/i;function An(e,t,i,n,r){for(;;){if(e==i&&t==n)return!0;if(t==(r<0?0:_n(e))){var s=e.parentNode;if(1!=s.nodeType||En(e)||In.test(e.nodeName)||"false"==e.contentEditable)return!1;t=wn(e)+(r<0?0:1),e=s}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(r<0?-1:0)]).contentEditable)return!1;t=r<0?_n(e):0}}}function _n(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function En(e){for(var t,i=e;i&&!(t=i.pmViewDesc);i=i.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var Tn=function(e){var t=e.isCollapsed;return t&&fn.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function Mn(e,t){var i=document.createEvent("Event");return i.initEvent("keydown",!0,!0),i.keyCode=e,i.key=i.code=t,i}function $n(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function On(e,t){return"number"==typeof e?e:e[t]}function Dn(e){var t=e.getBoundingClientRect(),i=t.width/e.offsetWidth||1,n=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*i,top:t.top,bottom:t.top+e.clientHeight*n}}function Bn(e,t,i){for(var n=e.someProp("scrollThreshold")||0,r=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument,o=i||e.dom;o;o=Cn(o))if(1==o.nodeType){var a=o==s.body||1!=o.nodeType,l=a?$n(s):Dn(o),c=0,h=0;if(t.top<l.top+On(n,"top")?h=-(l.top-t.top+On(r,"top")):t.bottom>l.bottom-On(n,"bottom")&&(h=t.bottom-l.bottom+On(r,"bottom")),t.left<l.left+On(n,"left")?c=-(l.left-t.left+On(r,"left")):t.right>l.right-On(n,"right")&&(c=t.right-l.right+On(r,"right")),c||h)if(a)s.defaultView.scrollBy(c,h);else{var d=o.scrollLeft,u=o.scrollTop;h&&(o.scrollTop+=h),c&&(o.scrollLeft+=c);var p=o.scrollLeft-d,m=o.scrollTop-u;t={left:t.left-p,top:t.top-m,right:t.right-p,bottom:t.bottom-m}}if(a)break}}function Ln(e){for(var t=[],i=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=i);e=Cn(e));return t}function Rn(e,t){for(var i=0;i<e.length;i++){var n=e[i],r=n.dom,s=n.top,o=n.left;r.scrollTop!=s+t&&(r.scrollTop=s+t),r.scrollLeft!=o&&(r.scrollLeft=o)}}var Nn=null;function Zn(e,t){for(var i,n,r=2e8,s=0,o=t.top,a=t.top,l=e.firstChild,c=0;l;l=l.nextSibling,c++){var h=void 0;if(1==l.nodeType)h=l.getClientRects();else{if(3!=l.nodeType)continue;h=kn(l).getClientRects()}for(var d=0;d<h.length;d++){var u=h[d];if(u.top<=o&&u.bottom>=a){o=Math.max(u.bottom,o),a=Math.min(u.top,a);var p=u.left>t.left?u.left-t.left:u.right<t.left?t.left-u.right:0;if(p<r){i=l,r=p,n=p&&3==i.nodeType?{left:u.right<t.left?u.right:u.left,top:t.top}:t,1==l.nodeType&&p&&(s=c+(t.left>=(u.left+u.right)/2?1:0));continue}}!i&&(t.left>=u.right&&t.top>=u.top||t.left>=u.left&&t.top>=u.bottom)&&(s=c+1)}}return i&&3==i.nodeType?function(e,t){for(var i=e.nodeValue.length,n=document.createRange(),r=0;r<i;r++){n.setEnd(e,r+1),n.setStart(e,r);var s=Un(n,1);if(s.top!=s.bottom&&Fn(t,s))return{node:e,offset:r+(t.left>=(s.left+s.right)/2?1:0)}}return{node:e,offset:0}}(i,n):!i||r&&1==i.nodeType?{node:e,offset:s}:Zn(i,n)}function Fn(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function jn(e,t,i){var n=e.childNodes.length;if(n&&i.top<i.bottom)for(var r=Math.max(0,Math.min(n-1,Math.floor(n*(t.top-i.top)/(i.bottom-i.top))-2)),s=r;;){var o=e.childNodes[s];if(1==o.nodeType)for(var a=o.getClientRects(),l=0;l<a.length;l++){var c=a[l];if(Fn(t,c))return jn(o,t,c)}if((s=(s+1)%n)==r)break}return e}function zn(e,t){var i,n,r,s,o=e.dom.ownerDocument;if(o.caretPositionFromPoint)try{var a=o.caretPositionFromPoint(t.left,t.top);a&&(r=(i=a).offsetNode,s=i.offset)}catch(e){}if(!r&&o.caretRangeFromPoint){var l=o.caretRangeFromPoint(t.left,t.top);l&&(r=(n=l).startContainer,s=n.startOffset)}var c,h=(e.root.elementFromPoint?e.root:o).elementFromPoint(t.left,t.top+1);if(!h||!e.dom.contains(1!=h.nodeType?h.parentNode:h)){var d=e.dom.getBoundingClientRect();if(!Fn(t,d))return null;if(!(h=jn(e.dom,t,d)))return null}if(fn.safari)for(var u=h;r&&u;u=Cn(u))u.draggable&&(r=s=null);if(h=function(e,t){var i=e.parentNode;return i&&/^li$/i.test(i.nodeName)&&t.left<e.getBoundingClientRect().left?i:e}(h,t),r){if(fn.gecko&&1==r.nodeType&&(s=Math.min(s,r.childNodes.length))<r.childNodes.length){var p,m=r.childNodes[s];"IMG"==m.nodeName&&(p=m.getBoundingClientRect()).right<=t.left&&p.bottom>t.top&&s++}r==e.dom&&s==r.childNodes.length-1&&1==r.lastChild.nodeType&&t.top>r.lastChild.getBoundingClientRect().bottom?c=e.state.doc.content.size:0!=s&&1==r.nodeType&&"BR"==r.childNodes[s-1].nodeName||(c=function(e,t,i,n){for(var r=-1,s=t;s!=e.dom;){var o=e.docView.nearestDesc(s,!0);if(!o)return null;if(o.node.isBlock&&o.parent){var a=o.dom.getBoundingClientRect();if(a.left>n.left||a.top>n.top)r=o.posBefore;else{if(!(a.right<n.left||a.bottom<n.top))break;r=o.posAfter}}s=o.dom.parentNode}return r>-1?r:e.docView.posFromDOM(t,i)}(e,r,s,t))}null==c&&(c=function(e,t,i){var n=Zn(t,i),r=n.node,s=n.offset,o=-1;if(1==r.nodeType&&!r.firstChild){var a=r.getBoundingClientRect();o=a.left!=a.right&&i.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(r,s,o)}(e,h,t));var f=e.docView.nearestDesc(h,!0);return{pos:c,inside:f?f.posAtStart-f.border:-1}}function Un(e,t){var i=e.getClientRects();return i.length?i[t<0?0:i.length-1]:e.getBoundingClientRect()}var Hn=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function qn(e,t,i){var n=e.docView.domFromPos(t,i<0?-1:1),r=n.node,s=n.offset,o=fn.webkit||fn.gecko;if(3==r.nodeType){if(!o||!Hn.test(r.nodeValue)&&(i<0?s:s!=r.nodeValue.length)){var a=s,l=s,c=i<0?1:-1;return i<0&&!s?(l++,c=-1):i>=0&&s==r.nodeValue.length?(a--,c=1):i<0?a--:l++,Wn(Un(kn(r,a,l),c),c<0)}var h=Un(kn(r,s,s),i);if(fn.gecko&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){var d=Un(kn(r,s-1,s-1),-1);if(d.top==h.top){var u=Un(kn(r,s,s+1),-1);if(u.top!=h.top)return Wn(u,u.left<d.left)}}return h}if(!e.state.doc.resolve(t).parent.inlineContent){if(s&&(i<0||s==_n(r))){var p=r.childNodes[s-1];if(1==p.nodeType)return Vn(p.getBoundingClientRect(),!1)}if(s<_n(r)){var m=r.childNodes[s];if(1==m.nodeType)return Vn(m.getBoundingClientRect(),!0)}return Vn(r.getBoundingClientRect(),i>=0)}if(s&&(i<0||s==_n(r))){var f=r.childNodes[s-1],g=3==f.nodeType?kn(f,_n(f)-(o?0:1)):1!=f.nodeType||"BR"==f.nodeName&&f.nextSibling?null:f;if(g)return Wn(Un(g,1),!1)}if(s<_n(r)){for(var v=r.childNodes[s];v.pmViewDesc&&v.pmViewDesc.ignoreForCoords;)v=v.nextSibling;var y=v?3==v.nodeType?kn(v,0,o?0:1):1==v.nodeType?v:null:null;if(y)return Wn(Un(y,-1),!0)}return Wn(Un(3==r.nodeType?kn(r):r,-i),i>=0)}function Wn(e,t){if(0==e.width)return e;var i=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:i,right:i}}function Vn(e,t){if(0==e.height)return e;var i=t?e.top:e.bottom;return{top:i,bottom:i,left:e.left,right:e.right}}function Gn(e,t,i){var n=e.state,r=e.root.activeElement;n!=t&&e.updateState(t),r!=e.dom&&e.focus();try{return i()}finally{n!=t&&e.updateState(n),r!=e.dom&&r&&r.focus()}}var Kn=/[\u0590-\u08ac]/,Jn=null,Yn=null,Qn=!1;var Xn=function(e,t,i,n){this.parent=e,this.children=t,this.dom=i,i.pmViewDesc=this,this.contentDOM=n,this.dirty=0},er={size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};Xn.prototype.matchesWidget=function(){return!1},Xn.prototype.matchesMark=function(){return!1},Xn.prototype.matchesNode=function(){return!1},Xn.prototype.matchesHack=function(e){return!1},Xn.prototype.parseRule=function(){return null},Xn.prototype.stopEvent=function(){return!1},er.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},er.border.get=function(){return 0},Xn.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},Xn.prototype.posBeforeChild=function(e){for(var t=0,i=this.posAtStart;t<this.children.length;t++){var n=this.children[t];if(n==e)return i;i+=n.size}},er.posBefore.get=function(){return this.parent.posBeforeChild(this)},er.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},er.posAfter.get=function(){return this.posBefore+this.size},er.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},Xn.prototype.localPosFromDOM=function(e,t,i){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(i<0){var n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}var s,o;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&(!(o=s.pmViewDesc)||o.parent!=this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}var a;if(e==this.dom&&this.contentDOM)a=t>wn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var l=e;;l=l.parentNode){if(l==this.dom){a=!1;break}if(l.parentNode.firstChild!=l)break}if(null==a&&t==e.childNodes.length)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!0;break}if(c.parentNode.lastChild!=c)break}}return(null==a?i>0:a)?this.posAtEnd:this.posAtStart},Xn.prototype.nearestDesc=function(e,t){for(var i=!0,n=e;n;n=n.parentNode){var r=this.getDesc(n);if(r&&(!t||r.node)){if(!i||!r.nodeDOM||(1==r.nodeDOM.nodeType?r.nodeDOM.contains(1==e.nodeType?e:e.parentNode):r.nodeDOM==e))return r;i=!1}}},Xn.prototype.getDesc=function(e){for(var t=e.pmViewDesc,i=t;i;i=i.parent)if(i==this)return t},Xn.prototype.posFromDOM=function(e,t,i){for(var n=e;n;n=n.parentNode){var r=this.getDesc(n);if(r)return r.localPosFromDOM(e,t,i)}return-1},Xn.prototype.descAt=function(e){for(var t=0,i=0;t<this.children.length;t++){var n=this.children[t],r=i+n.size;if(i==e&&r!=i){for(;!n.border&&n.children.length;)n=n.children[0];return n}if(e<r)return n.descAt(e-i-n.border);i=r}},Xn.prototype.domFromPos=function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var i=0,n=0,r=0;i<this.children.length;i++){var s=this.children[i],o=r+s.size;if(o>e||s instanceof lr){n=e-r;break}r=o}if(n)return this.children[i].domFromPos(n-this.children[i].border,t);for(var a=void 0;i&&!(a=this.children[i-1]).size&&a instanceof ir&&a.widget.type.side>=0;i--);if(t<=0){for(var l,c=!0;(l=i?this.children[i-1]:null)&&l.dom.parentNode!=this.contentDOM;i--,c=!1);return l&&t&&c&&!l.border&&!l.domAtom?l.domFromPos(l.size,t):{node:this.contentDOM,offset:l?wn(l.dom)+1:0}}for(var h,d=!0;(h=i<this.children.length?this.children[i]:null)&&h.dom.parentNode!=this.contentDOM;i++,d=!1);return h&&d&&!h.border&&!h.domAtom?h.domFromPos(0,t):{node:this.contentDOM,offset:h?wn(h.dom):this.contentDOM.childNodes.length}},Xn.prototype.parseRange=function(e,t,i){if(void 0===i&&(i=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var n=-1,r=-1,s=i,o=0;;o++){var a=this.children[o],l=s+a.size;if(-1==n&&e<=l){var c=s+a.border;if(e>=c&&t<=l-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,c);e=s;for(var h=o;h>0;h--){var d=this.children[h-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){n=wn(d.dom)+1;break}e-=d.size}-1==n&&(n=0)}if(n>-1&&(l>t||o==this.children.length-1)){t=l;for(var u=o+1;u<this.children.length;u++){var p=this.children[u];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){r=wn(p.dom);break}t+=p.size}-1==r&&(r=this.contentDOM.childNodes.length);break}s=l}return{node:this.contentDOM,from:e,to:t,fromOffset:n,toOffset:r}},Xn.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},Xn.prototype.domAfterPos=function(e){var t=this.domFromPos(e,0),i=t.node,n=t.offset;if(1!=i.nodeType||n==i.childNodes.length)throw new RangeError("No node after pos "+e);return i.childNodes[n]},Xn.prototype.setSelection=function(e,t,i,n){for(var r=Math.min(e,t),s=Math.max(e,t),o=0,a=0;o<this.children.length;o++){var l=this.children[o],c=a+l.size;if(r>a&&s<c)return l.setSelection(e-a-l.border,t-a-l.border,i,n);a=c}var h=this.domFromPos(e,e?-1:1),d=t==e?h:this.domFromPos(t,t?-1:1),u=i.getSelection(),p=!1;if((fn.gecko||fn.safari)&&e==t){var m=h.node,f=h.offset;if(3==m.nodeType){if((p=f&&"\n"==m.nodeValue[f-1])&&f==m.nodeValue.length)for(var g=m,v=void 0;g;g=g.parentNode){if(v=g.nextSibling){"BR"==v.nodeName&&(h=d={node:v.parentNode,offset:wn(v)+1});break}var y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{var x=m.childNodes[f-1];p=x&&("BR"==x.nodeName||"false"==x.contentEditable)}}if(fn.gecko&&u.focusNode&&u.focusNode!=d.node&&1==u.focusNode.nodeType){var b=u.focusNode.childNodes[u.focusOffset];b&&"false"==b.contentEditable&&(n=!0)}if(n||p&&fn.safari||!Sn(h.node,h.offset,u.anchorNode,u.anchorOffset)||!Sn(d.node,d.offset,u.focusNode,u.focusOffset)){var w=!1;if((u.extend||e==t)&&!p){u.collapse(h.node,h.offset);try{e!=t&&u.extend(d.node,d.offset),w=!0}catch(e){if(!(e instanceof DOMException))throw e}}if(!w){if(e>t){var C=h;h=d,d=C}var P=document.createRange();P.setEnd(d.node,d.offset),P.setStart(h.node,h.offset),u.removeAllRanges(),u.addRange(P)}}},Xn.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},er.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},Xn.prototype.markDirty=function(e,t){for(var i=0,n=0;n<this.children.length;n++){var r=this.children[n],s=i+r.size;if(i==s?e<=s&&t>=i:e<s&&t>i){var o=i+r.border,a=s-r.border;if(e>=o&&t<=a)return this.dirty=e==i||t==s?2:1,void(e!=o||t!=a||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(e-o,t-o):r.dirty=3);r.dirty=r.dom==r.contentDOM&&r.dom.parentNode==this.contentDOM?2:3}i=s}this.dirty=2},Xn.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var i=1==e?2:1;t.dirty<i&&(t.dirty=i)}},er.domAtom.get=function(){return!1},er.ignoreForCoords.get=function(){return!1},Object.defineProperties(Xn.prototype,er);var tr=[],ir=function(e){function t(t,i,n,r){var s,o=i.type.toDOM;if("function"==typeof o&&(o=o(n,(function(){return s?s.parent?s.parent.posBeforeChild(s):void 0:r}))),!i.type.spec.raw){if(1!=o.nodeType){var a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable=!1,o.classList.add("ProseMirror-widget")}e.call(this,t,tr,o,null),this.widget=i,s=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={domAtom:{configurable:!0}};return t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},t.prototype.destroy=function(){this.widget.type.destroy(this.dom),e.prototype.destroy.call(this)},i.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,i),t}(Xn),nr=function(e){function t(t,i,n,r){e.call(this,t,tr,i,null),this.textDOM=n,this.text=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={size:{configurable:!0}};return i.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,i),t}(Xn),rr=function(e){function t(t,i,n,r){e.call(this,t,[],n,r),this.mark=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,i,n,r){var s=r.nodeViews[i.type.name],o=s&&s(i,r,n);return o&&o.dom||(o=ri.renderSpec(document,i.type.spec.toDOM(i,n))),new t(e,i,o.dom,o.contentDOM||o.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,i){if(e.prototype.markDirty.call(this,t,i),0!=this.dirty){for(var n=this.parent;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=0}},t.prototype.slice=function(e,i,n){var r=t.create(this.parent,this.mark,!0,n),s=this.children,o=this.size;i<o&&(s=wr(s,i,o,n)),e>0&&(s=wr(s,0,e,n));for(var a=0;a<s.length;a++)s[a].parent=r;return r.children=s,r},t}(Xn),sr=function(e){function t(t,i,n,r,s,o,a,l,c){e.call(this,t,i.isLeaf?tr:[],s,o),this.nodeDOM=a,this.node=i,this.outerDeco=n,this.innerDeco=r,o&&this.updateChildren(l,c)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(e,i,n,r,s,o){var a,l,c=s.nodeViews[i.type.name],h=c&&c(i,s,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:o}),n,r),d=h&&h.dom,u=h&&h.contentDOM;if(i.isText)if(d){if(3!=d.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else d=document.createTextNode(i.text);else d||(d=(a=ri.renderSpec(document,i.type.spec.toDOM(i))).dom,u=a.contentDOM);u||i.isText||"BR"==d.nodeName||(d.hasAttribute("contenteditable")||(d.contentEditable=!1),i.type.spec.draggable&&(d.draggable=!0));var p=d;return d=gr(d,n,i),h?l=new cr(e,i,n,r,d,u,p,h,s,o+1):i.isText?new ar(e,i,n,r,d,p,s):new t(e,i,n,r,d,u,p,s,o+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?Ge.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,i){return 0==this.dirty&&e.eq(this.node)&&vr(t,this.outerDeco)&&i.eq(this.innerDeco)},i.size.get=function(){return this.node.nodeSize},i.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var i=this,n=this.node.inlineContent,r=t,s=e.composing&&this.localCompositionInfo(e,t),o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new xr(this,o&&o.node);!function(e,t,i,n){var r=t.locals(e),s=0;if(0!=r.length)for(var o=0,a=[],l=null,c=0;;){if(o<r.length&&r[o].to==s){for(var h=r[o++],d=void 0;o<r.length&&r[o].to==s;)(d||(d=[h])).push(r[o++]);if(d){d.sort(br);for(var u=0;u<d.length;u++)i(d[u],c,!!l)}else i(h,c,!!l)}var p=void 0,m=void 0;if(l)m=-1,p=l,l=null;else{if(!(c<e.childCount))break;m=c,p=e.child(c++)}for(var f=0;f<a.length;f++)a[f].to<=s&&a.splice(f--,1);for(;o<r.length&&r[o].from<=s&&r[o].to>s;)a.push(r[o++]);var g=s+p.nodeSize;if(p.isText){var v=g;o<r.length&&r[o].from<v&&(v=r[o].from);for(var y=0;y<a.length;y++)a[y].to<v&&(v=a[y].to);v<g&&(l=p.cut(v-s),p=p.cut(0,v-s),g=v,m=-1)}n(p,a.length?p.isInline&&!p.isLeaf?a.filter((function(e){return!e.inline})):a.slice():tr,t.forChild(s,p),m),s=g}else for(var x=0;x<e.childCount;x++){var b=e.child(x);n(b,r,t.forChild(s,b),x),s+=b.nodeSize}}(this.node,this.innerDeco,(function(t,s,o){t.spec.marks?l.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!o&&l.syncToMarks(s==i.node.childCount?Xe.none:i.node.child(s).marks,n,e),l.placeWidget(t,e,r)}),(function(t,i,o,c){var h;l.syncToMarks(t.marks,n,e),l.findNodeMatch(t,i,o,c)||a&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(h=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(t,i,o,h,e)||l.updateNextNode(t,i,o,e,c)||l.addNode(t,i,o,e,r),r+=t.nodeSize})),l.syncToMarks(tr,n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||2==this.dirty)&&(o&&this.protectLocalComposition(e,o),hr(this.contentDOM,this.children,e),fn.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))},t.prototype.localCompositionInfo=function(e,t){var i=e.state.selection,n=i.from,r=i.to;if(!(!(e.state.selection instanceof Vi)||n<t||r>t+this.node.content.size)){var s=e.root.getSelection(),o=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=_n(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(s.focusNode,s.focusOffset);if(o&&this.dom.contains(o.parentNode)){if(this.node.inlineContent){var a=o.nodeValue,l=function(e,t,i,n){for(var r=0,s=0;r<e.childCount&&s<=n;){var o=e.child(r++),a=s;if(s+=o.nodeSize,o.isText){for(var l=o.text;r<e.childCount;){var c=e.child(r++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=i){var h=l.lastIndexOf(t,n-a);if(h>=0&&h+t.length+a>=i)return a+h}}}return-1}(this.node.content,a,n-t,r-t);return l<0?null:{node:o,pos:l,text:a}}return{node:o,pos:-1}}}},t.prototype.protectLocalComposition=function(e,t){var i=t.node,n=t.pos,r=t.text;if(!this.getDesc(i)){for(var s=i;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=null)}var o=new nr(this,s,i,r);e.compositionNodes.push(o),this.children=wr(this.children,n,n+r.length,e,o)}},t.prototype.update=function(e,t,i,n){return!(3==this.dirty||!e.sameMarkup(this.node)||(this.updateInner(e,t,i,n),0))},t.prototype.updateInner=function(e,t,i,n){this.updateOuterDeco(t),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(n,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!vr(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,i=this.dom;this.dom=mr(this.dom,this.nodeDOM,pr(this.outerDeco,this.node,t),pr(e,this.node,t)),this.dom!=i&&(i.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},i.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,i),t}(Xn);function or(e,t,i,n,r){return gr(n,t,e),new sr(null,e,t,i,n,n,n,r,0)}var ar=function(e){function t(t,i,n,r,s,o,a){e.call(this,t,i,n,r,s,null,o,a)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}},t.prototype.update=function(e,t,i,n){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node)||(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,n.trackWrites==this.nodeDOM&&(n.trackWrites=null)),this.node=e,this.dirty=0,0))},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,i,n){return t==this.nodeDOM?this.posAtStart+Math.min(i,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,i,n)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,i,n){var r=this.node.cut(e,i),s=document.createTextNode(r.text);return new t(this.parent,r,this.outerDeco,this.innerDeco,s,s,n)},t.prototype.markDirty=function(t,i){e.prototype.markDirty.call(this,t,i),this.dom==this.nodeDOM||0!=t&&i!=this.nodeDOM.nodeValue.length||(this.dirty=3)},i.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,i),t}(sr),lr=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(e){return 0==this.dirty&&this.dom.nodeName==e},i.domAtom.get=function(){return!0},i.ignoreForCoords.get=function(){return"IMG"==this.dom.nodeName},Object.defineProperties(t.prototype,i),t}(Xn),cr=function(e){function t(t,i,n,r,s,o,a,l,c,h){e.call(this,t,i,n,r,s,o,a,c,h),this.spec=l}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,i,n,r){if(3==this.dirty)return!1;if(this.spec.update){var s=this.spec.update(t,i,n);return s&&this.updateInner(t,i,n,r),s}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,i,n,r)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,i,n,r){this.spec.setSelection?this.spec.setSelection(t,i,n):e.prototype.setSelection.call(this,t,i,n,r)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(sr);function hr(e,t,i){for(var n=e.firstChild,r=!1,s=0;s<t.length;s++){var o=t[s],a=o.dom;if(a.parentNode==e){for(;a!=n;)n=yr(n),r=!0;n=n.nextSibling}else r=!0,e.insertBefore(a,n);if(o instanceof rr){var l=n?n.previousSibling:e.lastChild;hr(o.contentDOM,o.children,i),n=l?l.nextSibling:e.firstChild}}for(;n;)n=yr(n),r=!0;r&&i.trackWrites==e&&(i.trackWrites=null)}function dr(e){e&&(this.nodeName=e)}dr.prototype=Object.create(null);var ur=[new dr];function pr(e,t,i){if(0==e.length)return ur;for(var n=i?ur[0]:new dr,r=[n],s=0;s<e.length;s++){var o=e[s].type.attrs;if(o)for(var a in o.nodeName&&r.push(n=new dr(o.nodeName)),o){var l=o[a];null!=l&&(i&&1==r.length&&r.push(n=new dr(t.isInline?"span":"div")),"class"==a?n.class=(n.class?n.class+" ":"")+l:"style"==a?n.style=(n.style?n.style+";":"")+l:"nodeName"!=a&&(n[a]=l))}}return r}function mr(e,t,i,n){if(i==ur&&n==ur)return t;for(var r=t,s=0;s<n.length;s++){var o=n[s],a=i[s];if(s){var l=void 0;a&&a.nodeName==o.nodeName&&r!=e&&(l=r.parentNode)&&l.tagName.toLowerCase()==o.nodeName||((l=document.createElement(o.nodeName)).pmIsDeco=!0,l.appendChild(r),a=ur[0]),r=l}fr(r,a||ur[0],o)}return r}function fr(e,t,i){for(var n in t)"class"==n||"style"==n||"nodeName"==n||n in i||e.removeAttribute(n);for(var r in i)"class"!=r&&"style"!=r&&"nodeName"!=r&&i[r]!=t[r]&&e.setAttribute(r,i[r]);if(t.class!=i.class){for(var s=t.class?t.class.split(" ").filter(Boolean):tr,o=i.class?i.class.split(" ").filter(Boolean):tr,a=0;a<s.length;a++)-1==o.indexOf(s[a])&&e.classList.remove(s[a]);for(var l=0;l<o.length;l++)-1==s.indexOf(o[l])&&e.classList.add(o[l]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=i.style){if(t.style)for(var c,h=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=h.exec(t.style);)e.style.removeProperty(c[1]);i.style&&(e.style.cssText+=i.style)}}function gr(e,t,i){return mr(e,e,ur,pr(t,i,1!=e.nodeType))}function vr(e,t){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!e[i].type.eq(t[i].type))return!1;return!0}function yr(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var xr=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.preMatch=function(e,t){for(var i=e.childCount,n=t.length,r=new Map;i>0&&n>0;n--){var s=t[n-1],o=s.node;if(o){if(o!=e.child(i-1))break;--i,r.set(s,i)}}return{index:i,matched:r}}(e.node.content,e.children)};function br(e,t){return e.type.side-t.type.side}function wr(e,t,i,n,r){for(var s=[],o=0,a=0;o<e.length;o++){var l=e[o],c=a,h=a+=l.size;c>=i||h<=t?s.push(l):(c<t&&s.push(l.slice(0,t-c,n)),r&&(s.push(r),r=null),h>i&&s.push(l.slice(i-c,l.size,n)))}return s}function Cr(e,t){var i=e.root.getSelection(),n=e.state.doc;if(!i.focusNode)return null;var r=e.docView.nearestDesc(i.focusNode),s=r&&0==r.size,o=e.docView.posFromDOM(i.focusNode,i.focusOffset);if(o<0)return null;var a,l,c=n.resolve(o);if(Tn(i)){for(a=c;r&&!r.node;)r=r.parent;if(r&&r.node.isAtom&&Ki.isSelectable(r.node)&&r.parent&&(!r.node.isInline||!function(e,t,i){for(var n=0==t,r=t==_n(e);n||r;){if(e==i)return!0;var s=wn(e);if(!(e=e.parentNode))return!1;n=n&&0==s,r=r&&s==_n(e)}}(i.focusNode,i.focusOffset,r.dom))){var h=r.posBefore;l=new Ki(o==h?c:n.resolve(h))}}else{var d=e.docView.posFromDOM(i.anchorNode,i.anchorOffset);if(d<0)return null;a=n.resolve(d)}return l||(l=Mr(e,a,c,"pointer"==t||e.state.selection.head<c.pos&&!s?1:-1)),l}function Pr(e){return e.editable?e.hasFocus():$r(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function kr(e,t){var i=e.state.selection;if(Er(e,i),Pr(e)){if(!t&&e.mouseDown&&e.mouseDown.allowDefault)return e.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection();if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),i=document.createRange(),n=e.cursorWrapper.dom,r="IMG"==n.nodeName;r?i.setEnd(n.parentNode,wn(n)+1):i.setEnd(n,0),i.collapse(!1),t.removeAllRanges(),t.addRange(i),!r&&!e.state.selection.visible&&fn.ie&&fn.ie_version<=11&&(n.disabled=!0,n.disabled=!1)}(e);else{var n,r,s=i.anchor,o=i.head;!Sr||i instanceof Vi||(i.$from.parent.inlineContent||(n=Ir(e,i.from)),i.empty||i.$from.parent.inlineContent||(r=Ir(e,i.to))),e.docView.setSelection(s,o,e.root,t),Sr&&(n&&_r(n),r&&_r(r)),i.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var i=e.root.getSelection(),n=i.anchorNode,r=i.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){i.anchorNode==n&&i.anchorOffset==r||(t.removeEventListener("selectionchange",e.hideSelectionGuard),setTimeout((function(){Pr(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}xr.prototype.destroyBetween=function(e,t){if(e!=t){for(var i=e;i<t;i++)this.top.children[i].destroy();this.top.children.splice(e,t-e),this.changed=!0}},xr.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},xr.prototype.syncToMarks=function(e,t,i){for(var n=0,r=this.stack.length>>1,s=Math.min(r,e.length);n<s&&(n==r-1?this.top:this.stack[n+1<<1]).matchesMark(e[n])&&!1!==e[n].type.spec.spanning;)n++;for(;n<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);for(var o=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[r])){o=a;break}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{var l=rr.create(this.top,e[r],t,i);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,r++}},xr.prototype.findNodeMatch=function(e,t,i,n){var r=this.top.children,s=-1;if(n>=this.preMatch.index){for(var o=this.index;o<r.length;o++)if(this.preMatch.matched.get(r[o])==n){r[o].matchesNode(e,t,i)&&(s=o);break}}else for(var a=this.index,l=Math.min(r.length,a+5);a<l;a++){var c=r[a];if(c.matchesNode(e,t,i)&&!this.preMatch.matched.has(c)){s=a;break}}return!(s<0||(this.destroyBetween(this.index,s),this.index++,0))},xr.prototype.updateNodeAt=function(e,t,i,n,r){return!!this.top.children[n].update(e,t,i,r)&&(this.destroyBetween(this.index,n),this.index=n+1,!0)},xr.prototype.findIndexWithChild=function(e){for(;;){var t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){var i=e.pmViewDesc;if(i)for(var n=this.index;n<this.top.children.length;n++)if(this.top.children[n]==i)return n;return-1}e=t}},xr.prototype.updateNextNode=function(e,t,i,n,r){for(var s=this.index;s<this.top.children.length;s++){var o=this.top.children[s];if(o instanceof sr){var a=this.preMatch.matched.get(o);if(null!=a&&a!=r)return!1;var l=o.dom;if((!this.lock||!(l==this.lock||1==l.nodeType&&l.contains(this.lock.parentNode))||e.isText&&o.node&&o.node.isText&&o.nodeDOM.nodeValue==e.text&&3!=o.dirty&&vr(t,o.outerDeco))&&o.update(e,t,i,n))return this.destroyBetween(this.index,s),o.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1},xr.prototype.addNode=function(e,t,i,n,r){this.top.children.splice(this.index++,0,sr.create(this.top,e,t,i,n,r)),this.changed=!0},xr.prototype.placeWidget=function(e,t,i){var n=this.index<this.top.children.length?this.top.children[this.index]:null;if(!n||!n.matchesWidget(e)||e!=n.widget&&n.widget.type.toDOM.parentNode){var r=new ir(this.top,e,t,i);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++},xr.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof rr;)e=e.children[e.children.length-1];e&&e instanceof ar&&!/\n$/.test(e.node.text)||((fn.safari||fn.chrome)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG"),this.addHackNode("BR"))},xr.prototype.addHackNode=function(e){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(e))this.index++;else{var t=document.createElement(e);"IMG"==e&&(t.className="ProseMirror-separator"),"BR"==e&&(t.className="ProseMirror-trailingBreak"),this.top.children.splice(this.index++,0,new lr(this.top,tr,t,null)),this.changed=!0}};var Sr=fn.safari||fn.chrome&&fn.chrome_version<63;function Ir(e,t){var i=e.docView.domFromPos(t,0),n=i.node,r=i.offset,s=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(fn.safari&&s&&"false"==s.contentEditable)return Ar(s);if(!(s&&"false"!=s.contentEditable||o&&"false"!=o.contentEditable)){if(s)return Ar(s);if(o)return Ar(o)}}function Ar(e){return e.contentEditable="true",fn.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function _r(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Er(e,t){if(t instanceof Ki){var i=e.docView.descAt(t.from);i!=e.lastSelectedViewDesc&&(Tr(e),i&&i.selectNode(),e.lastSelectedViewDesc=i)}else Tr(e)}function Tr(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function Mr(e,t,i,n){return e.someProp("createSelectionBetween",(function(n){return n(e,t,i)}))||Vi.between(t,i,n)}function $r(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Or(e,t){var i=e.selection,n=i.$anchor,r=i.$head,s=t>0?n.max(r):n.min(r),o=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return o&&Hi.findFrom(o,t)}function Dr(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Br(e,t,i){var n=e.state.selection;if(!(n instanceof Vi)){if(n instanceof Ki&&n.node.isInline)return Dr(e,new Vi(t>0?n.$to:n.$from));var r=Or(e.state,t);return!!r&&Dr(e,r)}if(!n.empty||i.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var s=Or(e.state,t);return!!(s&&s instanceof Ki)&&Dr(e,s)}if(!(fn.mac&&i.indexOf("m")>-1)){var o,a=n.$head,l=a.textOffset?null:t<0?a.nodeBefore:a.nodeAfter;if(!l||l.isText)return!1;var c=t<0?a.pos-l.nodeSize:a.pos;return!!(l.isAtom||(o=e.docView.descAt(c))&&!o.contentDOM)&&(Ki.isSelectable(l)?Dr(e,new Ki(t<0?e.state.doc.resolve(a.pos-l.nodeSize):a)):!!fn.webkit&&Dr(e,new Vi(e.state.doc.resolve(t<0?c:c+l.nodeSize))))}}function Lr(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Rr(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function Nr(e){var t=e.root.getSelection(),i=t.focusNode,n=t.focusOffset;if(i){var r,s,o=!1;for(fn.gecko&&1==i.nodeType&&n<Lr(i)&&Rr(i.childNodes[n])&&(o=!0);;)if(n>0){if(1!=i.nodeType)break;var a=i.childNodes[n-1];if(Rr(a))r=i,s=--n;else{if(3!=a.nodeType)break;n=(i=a).nodeValue.length}}else{if(Fr(i))break;for(var l=i.previousSibling;l&&Rr(l);)r=i.parentNode,s=wn(l),l=l.previousSibling;if(l)n=Lr(i=l);else{if((i=i.parentNode)==e.dom)break;n=0}}o?jr(e,t,i,n):r&&jr(e,t,r,s)}}function Zr(e){var t=e.root.getSelection(),i=t.focusNode,n=t.focusOffset;if(i){for(var r,s,o=Lr(i);;)if(n<o){if(1!=i.nodeType)break;if(!Rr(i.childNodes[n]))break;r=i,s=++n}else{if(Fr(i))break;for(var a=i.nextSibling;a&&Rr(a);)r=a.parentNode,s=wn(a)+1,a=a.nextSibling;if(a)n=0,o=Lr(i=a);else{if((i=i.parentNode)==e.dom)break;n=o=0}}r&&jr(e,t,r,s)}}function Fr(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function jr(e,t,i,n){if(Tn(t)){var r=document.createRange();r.setEnd(i,n),r.setStart(i,n),t.removeAllRanges(),t.addRange(r)}else t.extend&&t.extend(i,n);e.domObserver.setCurSelection();var s=e.state;setTimeout((function(){e.state==s&&kr(e)}),50)}function zr(e,t,i){var n=e.state.selection;if(n instanceof Vi&&!n.empty||i.indexOf("s")>-1)return!1;if(fn.mac&&i.indexOf("m")>-1)return!1;var r=n.$from,s=n.$to;if(!r.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var o=Or(e.state,t);if(o&&o instanceof Ki)return Dr(e,o)}if(!r.parent.inlineContent){var a=t<0?r:s,l=n instanceof Yi?Hi.near(a,t):Hi.findFrom(a,t);return!!l&&Dr(e,l)}return!1}function Ur(e,t){if(!(e.state.selection instanceof Vi))return!0;var i=e.state.selection,n=i.$head,r=i.$anchor,s=i.empty;if(!n.sameParent(r))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var o=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){var a=e.state.tr;return t<0?a.delete(n.pos-o.nodeSize,n.pos):a.delete(n.pos,n.pos+o.nodeSize),e.dispatch(a),!0}return!1}function Hr(e,t,i){e.domObserver.stop(),t.contentEditable=i,e.domObserver.start()}function qr(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(fn.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var i=document.createElement("div");return i.appendChild(document.createElement("li")),{skip:i}}if(e.parentNode.lastChild==e||fn.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function Wr(e,t,i){return Math.max(i.anchor,i.head)>t.content.size?null:Mr(e,t.resolve(i.anchor),t.resolve(i.head))}function Vr(e,t,i){for(var n=e.depth,r=t?e.end():e.pos;n>0&&(t||e.indexAfter(n)==e.node(n).childCount);)n--,r++,t=!1;if(i)for(var s=e.node(n).maybeChild(e.indexAfter(n));s&&!s.isLeaf;)s=s.firstChild,r++;return r}function Gr(e,t){for(var i=[],n=t.content,r=t.openStart,s=t.openEnd;r>1&&s>1&&1==n.childCount&&1==n.firstChild.childCount;){r--,s--;var o=n.firstChild;i.push(o.type.name,o.attrs!=o.type.defaultAttrs?o.attrs:null),n=o.content}var a=e.someProp("clipboardSerializer")||ri.fromSchema(e.state.schema),l=ns(),c=l.createElement("div");c.appendChild(a.serializeFragment(n,{document:l}));for(var h,d=c.firstChild;d&&1==d.nodeType&&(h=ts[d.nodeName.toLowerCase()]);){for(var u=h.length-1;u>=0;u--){for(var p=l.createElement(h[u]);c.firstChild;)p.appendChild(c.firstChild);c.appendChild(p),"tbody"!=h[u]&&(r++,s++)}d=c.firstChild}return d&&1==d.nodeType&&d.setAttribute("data-pm-slice",r+" "+s+" "+JSON.stringify(i)),{dom:c,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function Kr(e,t,i,n,r){var s,o,a=r.parent.type.spec.code;if(!i&&!t)return null;var l=t&&(n||a||!i);if(l){if(e.someProp("transformPastedText",(function(e){t=e(t,a||n)})),a)return t?new tt(Ge.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):tt.empty;var c=e.someProp("clipboardTextParser",(function(e){return e(t,r,n)}));if(c)o=c;else{var h=r.marks(),d=e.state.schema,u=ri.fromSchema(d);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((function(e){var t=s.appendChild(document.createElement("p"));e&&t.appendChild(u.serializeNode(d.text(e,h)))}))}}else e.someProp("transformPastedHTML",(function(e){i=e(i)})),s=function(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var i,n=ns().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e);if((i=r&&ts[r[1].toLowerCase()])&&(e=i.map((function(e){return"<"+e+">"})).join("")+e+i.map((function(e){return"</"+e+">"})).reverse().join("")),n.innerHTML=e,i)for(var s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}(i),fn.webkit&&function(e){for(var t=e.querySelectorAll(fn.chrome?"span:not([class]):not([style])":"span.Apple-converted-space"),i=0;i<t.length;i++){var n=t[i];1==n.childNodes.length&&""==n.textContent&&n.parentNode&&n.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),n)}}(s);var p=s&&s.querySelector("[data-pm-slice]"),m=p&&/^(\d+) (\d+) (.*)/.exec(p.getAttribute("data-pm-slice"));if(!o){var f=e.someProp("clipboardParser")||e.someProp("domParser")||Vt.fromSchema(e.state.schema);o=f.parseSlice(s,{preserveWhitespace:!(!l&&!m),context:r,ruleFromNode:function(e){if("BR"==e.nodeName&&!e.nextSibling)return{ignore:!0}}})}if(m)o=function(e,t){if(!e.size)return e;var i,n=e.content.firstChild.type.schema;try{i=JSON.parse(t)}catch(t){return e}for(var r=e.content,s=e.openStart,o=e.openEnd,a=i.length-2;a>=0;a-=2){var l=n.nodes[i[a]];if(!l||l.hasRequiredAttrs())break;r=Ge.from(l.create(i[a+1],r)),s++,o++}return new tt(r,s,o)}(es(o,+m[1],+m[2]),m[3]);else if(o=tt.maxOpen(function(e,t){if(e.childCount<2)return e;for(var i=function(i){var n=t.node(i).contentMatchAt(t.index(i)),r=void 0,s=[];if(e.forEach((function(e){if(s){var t,i=n.findWrapping(e.type);if(!i)return s=null;if(t=s.length&&r.length&&Yr(i,r,e,s[s.length-1],0))s[s.length-1]=t;else{s.length&&(s[s.length-1]=Qr(s[s.length-1],r.length));var o=Jr(e,i);s.push(o),n=n.matchType(o.type,o.attrs),r=i}}})),s)return{v:Ge.from(s)}},n=t.depth;n>=0;n--){var r=i(n);if(r)return r.v}return e}(o.content,r),!0),o.openStart||o.openEnd){for(var g=0,v=0,y=o.content.firstChild;g<o.openStart&&!y.type.spec.isolating;g++,y=y.firstChild);for(var x=o.content.lastChild;v<o.openEnd&&!x.type.spec.isolating;v++,x=x.lastChild);o=es(o,g,v)}return e.someProp("transformPasted",(function(e){o=e(o)})),o}function Jr(e,t,i){void 0===i&&(i=0);for(var n=t.length-1;n>=i;n--)e=t[n].create(null,Ge.from(e));return e}function Yr(e,t,i,n,r){if(r<e.length&&r<t.length&&e[r]==t[r]){var s=Yr(e,t,i,n.lastChild,r+1);if(s)return n.copy(n.content.replaceChild(n.childCount-1,s));if(n.contentMatchAt(n.childCount).matchType(r==e.length-1?i.type:e[r+1]))return n.copy(n.content.append(Ge.from(Jr(i,e,r+1))))}}function Qr(e,t){if(0==t)return e;var i=e.content.replaceChild(e.childCount-1,Qr(e.lastChild,t-1)),n=e.contentMatchAt(e.childCount).fillBefore(Ge.empty,!0);return e.copy(i.append(n))}function Xr(e,t,i,n,r,s){var o=t<0?e.firstChild:e.lastChild,a=o.content;return r<n-1&&(a=Xr(a,t,i,n,r+1,s)),r>=i&&(a=t<0?o.contentMatchAt(0).fillBefore(a,e.childCount>1||s<=r).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Ge.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(a))}function es(e,t,i){return t<e.openStart&&(e=new tt(Xr(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),i<e.openEnd&&(e=new tt(Xr(e.content,1,i,e.openEnd,0,0),e.openStart,i)),e}var ts={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},is=null;function ns(){return is||(is=document.implementation.createHTMLDocument("title"))}var rs={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ss=fn.ie&&fn.ie_version<=11,as=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};as.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},as.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var ls=function(e,t){var i=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)i.queue.push(e[t]);fn.ie&&fn.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?i.flushSoon():i.flush()})),this.currentSelection=new as,ss&&(this.onCharData=function(e){i.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),i.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};ls.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))},ls.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},ls.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,rs),ss&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},ls.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var i=0;i<t.length;i++)this.queue.push(t[i]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}ss&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},ls.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},ls.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},ls.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},ls.prototype.onSelectionChange=function(){if((!(e=this.view).editable||e.root.activeElement==e.dom)&&$r(e)){var e;if(this.suppressingSelectionUpdates)return kr(this.view);if(fn.ie&&fn.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&Sn(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},ls.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},ls.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,i=this.view.docView.nearestDesc(t);return i&&i.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},ls.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&$r(this.view)&&!this.ignoreSelectionChange(t),n=-1,r=-1,s=!1,o=[];if(this.view.editable)for(var a=0;a<e.length;a++){var l=this.registerMutation(e[a],o);l&&(n=n<0?l.from:Math.min(l.from,n),r=r<0?l.to:Math.max(l.to,r),l.typeOver&&(s=!0))}if(fn.gecko&&o.length>1){var c=o.filter((function(e){return"BR"==e.nodeName}));if(2==c.length){var h=c[0],d=c[1];h.parentNode&&h.parentNode.parentNode==d.parentNode?d.remove():h.remove()}}(n>-1||i)&&(n>-1&&(this.view.docView.markDirty(n,r),u=this.view,cs||(cs=!0,"normal"==getComputedStyle(u.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))),this.handleDOMChange(n,r,s,o),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||kr(this.view),this.currentSelection.set(t))}var u},ls.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var i=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(i==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!i||i.ignoreMutation(e))return null;if("childList"==e.type){for(var n=0;n<e.addedNodes.length;n++)t.push(e.addedNodes[n]);if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};var r=e.previousSibling,s=e.nextSibling;if(fn.ie&&fn.ie_version<=11&&e.addedNodes.length)for(var o=0;o<e.addedNodes.length;o++){var a=e.addedNodes[o],l=a.previousSibling,c=a.nextSibling;(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(r=l),(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(s=c)}var h=r&&r.parentNode==e.target?wn(r)+1:0,d=i.localPosFromDOM(e.target,h,-1),u=s&&s.parentNode==e.target?wn(s):e.target.childNodes.length;return{from:d,to:i.localPosFromDOM(e.target,u,1)}}return"attributes"==e.type?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var cs=!1,hs={},ds={};function us(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function ps(e){e.someProp("handleDOMEvents",(function(t){for(var i in t)e.eventHandlers[i]||e.dom.addEventListener(i,e.eventHandlers[i]=function(t){return ms(e,t)})}))}function ms(e,t){return e.someProp("handleDOMEvents",(function(i){var n=i[t.type];return!!n&&(n(e,t)||t.defaultPrevented)}))}function fs(e){return{left:e.clientX,top:e.clientY}}function gs(e,t,i,n,r){if(-1==n)return!1;for(var s=e.state.doc.resolve(n),o=function(n){if(e.someProp(t,(function(t){return n>s.depth?t(e,i,s.nodeAfter,s.before(n),r,!0):t(e,i,s.node(n),s.before(n),r,!1)})))return{v:!0}},a=s.depth+1;a>0;a--){var l=o(a);if(l)return l.v}return!1}function vs(e,t,i){e.focused||e.focus();var n=e.state.tr.setSelection(t);"pointer"==i&&n.setMeta("pointer",!0),e.dispatch(n)}function ys(e,t,i,n){return gs(e,"handleDoubleClickOn",t,i,n)||e.someProp("handleDoubleClick",(function(i){return i(e,t,n)}))}function xs(e,t,i,n){return gs(e,"handleTripleClickOn",t,i,n)||e.someProp("handleTripleClick",(function(i){return i(e,t,n)}))||function(e,t,i){if(0!=i.button)return!1;var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(vs(e,Vi.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(t),s=r.depth+1;s>0;s--){var o=s>r.depth?r.nodeAfter:r.node(s),a=r.before(s);if(o.inlineContent)vs(e,Vi.create(n,a+1,a+1+o.content.size),"pointer");else{if(!Ki.isSelectable(o))continue;vs(e,Ki.create(n,a),"pointer")}return!0}}(e,i,n)}function bs(e){return As(e)}ds.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!Ps(e,t))if(229!=t.keyCode&&e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!fn.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(i){return i(e,t)}))||function(e,t){var i=t.keyCode,n=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==i||fn.mac&&72==i&&"c"==n?Ur(e,-1)||Nr(e):46==i||fn.mac&&68==i&&"c"==n?Ur(e,1)||Zr(e):13==i||27==i||(37==i?Br(e,-1,n)||Nr(e):39==i?Br(e,1,n)||Zr(e):38==i?zr(e,-1,n)||Nr(e):40==i?function(e){if(fn.safari&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),i=t.focusNode,n=t.focusOffset;if(i&&1==i.nodeType&&0==n&&i.firstChild&&"false"==i.firstChild.contentEditable){var r=i.firstChild;Hr(e,r,!0),setTimeout((function(){return Hr(e,r,!1)}),20)}}}(e)||zr(e,1,n)||Zr(e):n==(fn.mac?"m":"c")&&(66==i||73==i||89==i||90==i))}(e,t)?t.preventDefault():us(e,"key");else{var i=Date.now();e.lastIOSEnter=i,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==i&&(e.someProp("handleKeyDown",(function(t){return t(e,Mn(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},ds.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},ds.keypress=function(e,t){if(!(Ps(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||fn.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(i){return i(e,t)})))t.preventDefault();else{var i=e.state.selection;if(!(i instanceof Vi&&i.$from.sameParent(i.$to))){var n=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,i.$from.pos,i.$to.pos,n)}))||e.dispatch(e.state.tr.insertText(n).scrollIntoView()),t.preventDefault()}}};var ws=fn.mac?"metaKey":"ctrlKey";hs.mousedown=function(e,t){e.shiftKey=t.shiftKey;var i=bs(e),n=Date.now(),r="singleClick";n-e.lastClick.time<500&&function(e,t){var i=t.x-e.clientX,n=t.y-e.clientY;return i*i+n*n<100}(t,e.lastClick)&&!t[ws]&&("singleClick"==e.lastClick.type?r="doubleClick":"doubleClick"==e.lastClick.type&&(r="tripleClick")),e.lastClick={time:n,x:t.clientX,y:t.clientY,type:r};var s=e.posAtCoords(fs(t));s&&("singleClick"==r?(e.mouseDown&&e.mouseDown.done(),e.mouseDown=new Cs(e,s,t,i)):("doubleClick"==r?ys:xs)(e,s.pos,s.inside,t)?t.preventDefault():us(e,"pointer"))};var Cs=function(e,t,i,n){var r,s,o=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=i,this.flushed=n,this.selectNode=i[ws],this.allowDefault=i.shiftKey,this.delayedSelectionSync=!1,t.inside>-1)r=e.state.doc.nodeAt(t.inside),s=t.inside;else{var a=e.state.doc.resolve(t.pos);r=a.parent,s=a.depth?a.before():0}this.mightDrag=null;var l=n?null:i.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c?c.dom:null;var h=e.state.selection;(0==i.button&&r.type.spec.draggable&&!1!==r.type.spec.selectable||h instanceof Ki&&h.from<=s&&h.to>s)&&(this.mightDrag={node:r,pos:s,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&fn.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){o.view.mouseDown==o&&o.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),us(e,"pointer")};function Ps(e,t){return!!e.composing||!!(fn.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}Cs.prototype.done=function(){var e=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((function(){return kr(e.view)})),this.view.mouseDown=null},Cs.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(fs(e))),this.allowDefault||!t?us(this.view,"pointer"):function(e,t,i,n,r){return gs(e,"handleClickOn",t,i,n)||e.someProp("handleClick",(function(i){return i(e,t,n)}))||(r?function(e,t){if(-1==t)return!1;var i,n,r=e.state.selection;r instanceof Ki&&(i=r.node);for(var s=e.state.doc.resolve(t),o=s.depth+1;o>0;o--){var a=o>s.depth?s.nodeAfter:s.node(o);if(Ki.isSelectable(a)){n=i&&r.$from.depth>0&&o>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos?s.before(r.$from.depth):s.before(o);break}}return null!=n&&(vs(e,Ki.create(e.state.doc,n),"pointer"),!0)}(e,i):function(e,t){if(-1==t)return!1;var i=e.state.doc.resolve(t),n=i.nodeAfter;return!!(n&&n.isAtom&&Ki.isSelectable(n))&&(vs(e,new Ki(i),"pointer"),!0)}(e,i))}(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||fn.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||fn.chrome&&!(this.view.state.selection instanceof Vi)&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(vs(this.view,Hi.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):us(this.view,"pointer")}},Cs.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),us(this.view,"pointer"),0==e.buttons&&this.done()},hs.touchdown=function(e){bs(e),us(e,"pointer")},hs.contextmenu=function(e){return bs(e)};var ks=fn.android?5e3:-1;function Ss(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return As(e)}),t))}function Is(e){var t;for(e.composing&&(e.composing=!1,e.compositionEndedAt=((t=document.createEvent("Event")).initEvent("event",!0,!0),t.timeStamp));e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function As(e,t){if(e.domObserver.forceFlush(),Is(e),t||e.docView.dirty){var i=Cr(e);return i&&!i.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(i)):e.updateState(e.state),!0}return!1}ds.compositionstart=ds.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,i=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!i.textOffset&&i.parentOffset&&i.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||i.marks(),As(e,!0),e.markCursor=null;else if(As(e),fn.gecko&&t.selection.empty&&i.parentOffset&&!i.textOffset&&i.nodeBefore.marks.length)for(var n=e.root.getSelection(),r=n.focusNode,s=n.focusOffset;r&&1==r.nodeType&&0!=s;){var o=s<0?r.lastChild:r.childNodes[s-1];if(!o)break;if(3==o.nodeType){n.collapse(o,o.nodeValue.length);break}r=o,s=-1}e.composing=!0}Ss(e,ks)},ds.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,Ss(e,20))};var _s=fn.ie&&fn.ie_version<15||fn.ios&&fn.webkit_version<604;function Es(e,t,i,n){var r=Kr(e,t,i,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,n,r||tt.empty)})))return!0;if(!r)return!1;var s=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(r),o=s?e.state.tr.replaceSelectionWith(s,e.shiftKey):e.state.tr.replaceSelection(r);return e.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}hs.copy=ds.cut=function(e,t){var i=e.state.selection,n="cut"==t.type;if(!i.empty){var r=_s?null:t.clipboardData,s=Gr(e,i.content()),o=s.dom,a=s.text;r?(t.preventDefault(),r.clearData(),r.setData("text/html",o.innerHTML),r.setData("text/plain",a)):function(e,t){if(e.dom.parentNode){var i=e.dom.parentNode.appendChild(document.createElement("div"));i.appendChild(t),i.style.cssText="position: fixed; left: -10000px; top: 10px";var n=getSelection(),r=document.createRange();r.selectNodeContents(t),e.dom.blur(),n.removeAllRanges(),n.addRange(r),setTimeout((function(){i.parentNode&&i.parentNode.removeChild(i),e.focus()}),50)}}(e,o),n&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},ds.paste=function(e,t){var i=_s?null:t.clipboardData;i&&Es(e,i.getData("text/plain"),i.getData("text/html"),t)?t.preventDefault():function(e,t){if(e.dom.parentNode){var i=e.shiftKey||e.state.selection.$from.parent.type.spec.code,n=e.dom.parentNode.appendChild(document.createElement(i?"textarea":"div"));i||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((function(){e.focus(),n.parentNode&&n.parentNode.removeChild(n),i?Es(e,n.value,null,t):Es(e,n.textContent,n.innerHTML,t)}),50)}}(e,t)};var Ts=function(e,t){this.slice=e,this.move=t},Ms=fn.mac?"altKey":"ctrlKey";for(var $s in hs.dragstart=function(e,t){var i=e.mouseDown;if(i&&i.done(),t.dataTransfer){var n=e.state.selection,r=n.empty?null:e.posAtCoords(fs(t));if(r&&r.pos>=n.from&&r.pos<=(n instanceof Ki?n.to-1:n.to));else if(i&&i.mightDrag)e.dispatch(e.state.tr.setSelection(Ki.create(e.state.doc,i.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var s=e.docView.nearestDesc(t.target,!0);s&&s.node.type.spec.draggable&&s!=e.docView&&e.dispatch(e.state.tr.setSelection(Ki.create(e.state.doc,s.posBefore)))}var o=e.state.selection.content(),a=Gr(e,o),l=a.dom,c=a.text;t.dataTransfer.clearData(),t.dataTransfer.setData(_s?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",_s||t.dataTransfer.setData("text/plain",c),e.dragging=new Ts(o,!t[Ms])}},hs.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},ds.dragover=ds.dragenter=function(e,t){return t.preventDefault()},ds.drop=function(e,t){var i=e.dragging;if(e.dragging=null,t.dataTransfer){var n=e.posAtCoords(fs(t));if(n){var r=e.state.doc.resolve(n.pos);if(r){var s=i&&i.slice;s?e.someProp("transformPasted",(function(e){s=e(s)})):s=Kr(e,t.dataTransfer.getData(_s?"Text":"text/plain"),_s?null:t.dataTransfer.getData("text/html"),!1,r);var o=i&&!t[Ms];if(e.someProp("handleDrop",(function(i){return i(e,t,s||tt.empty,o)})))t.preventDefault();else if(s){t.preventDefault();var a=s?Ei(e.state.doc,r.pos,s):r.pos;null==a&&(a=r.pos);var l=e.state.tr;o&&l.deleteSelection();var c=l.mapping.map(a),h=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,d=l.doc;if(h?l.replaceRangeWith(c,c,s.content.firstChild):l.replaceRange(c,c,s),!l.doc.eq(d)){var u=l.doc.resolve(c);if(h&&Ki.isSelectable(s.content.firstChild)&&u.nodeAfter&&u.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new Ki(u));else{var p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((function(e,t,i,n){return p=n})),l.setSelection(Mr(e,u,l.doc.resolve(p)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}}}}}},hs.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&kr(e)}),20))},hs.blur=function(e,t){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.set({}),e.focused=!1)},hs.beforeinput=function(e,t){if(fn.chrome&&fn.android&&"deleteContentBackward"==t.inputType){var i=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==i&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,Mn(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},ds)hs[$s]=ds[$s];function Os(e,t){if(e==t)return!0;for(var i in e)if(e[i]!==t[i])return!1;for(var n in t)if(!(n in e))return!1;return!0}var Ds=function(e,t){this.spec=t||Fs,this.side=this.spec.side||0,this.toDOM=e};Ds.prototype.map=function(e,t,i,n){var r=e.mapResult(t.from+n,this.side<0?-1:1),s=r.pos;return r.deleted?null:new Rs(s-i,s-i,this)},Ds.prototype.valid=function(){return!0},Ds.prototype.eq=function(e){return this==e||e instanceof Ds&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Os(this.spec,e.spec))},Ds.prototype.destroy=function(e){this.spec.destroy&&this.spec.destroy(e)};var Bs=function(e,t){this.spec=t||Fs,this.attrs=e};Bs.prototype.map=function(e,t,i,n){var r=e.map(t.from+n,this.spec.inclusiveStart?-1:1)-i,s=e.map(t.to+n,this.spec.inclusiveEnd?1:-1)-i;return r>=s?null:new Rs(r,s,this)},Bs.prototype.valid=function(e,t){return t.from<t.to},Bs.prototype.eq=function(e){return this==e||e instanceof Bs&&Os(this.attrs,e.attrs)&&Os(this.spec,e.spec)},Bs.is=function(e){return e.type instanceof Bs};var Ls=function(e,t){this.spec=t||Fs,this.attrs=e};Ls.prototype.map=function(e,t,i,n){var r=e.mapResult(t.from+n,1);if(r.deleted)return null;var s=e.mapResult(t.to+n,-1);return s.deleted||s.pos<=r.pos?null:new Rs(r.pos-i,s.pos-i,this)},Ls.prototype.valid=function(e,t){var i,n=e.content.findIndex(t.from),r=n.index,s=n.offset;return s==t.from&&!(i=e.child(r)).isText&&s+i.nodeSize==t.to},Ls.prototype.eq=function(e){return this==e||e instanceof Ls&&Os(this.attrs,e.attrs)&&Os(this.spec,e.spec)};var Rs=function(e,t,i){this.from=e,this.to=t,this.type=i},Ns={spec:{configurable:!0},inline:{configurable:!0}};Rs.prototype.copy=function(e,t){return new Rs(e,t,this.type)},Rs.prototype.eq=function(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},Rs.prototype.map=function(e,t,i){return this.type.map(e,this,t,i)},Rs.widget=function(e,t,i){return new Rs(e,e,new Ds(t,i))},Rs.inline=function(e,t,i,n){return new Rs(e,t,new Bs(i,n))},Rs.node=function(e,t,i,n){return new Rs(e,t,new Ls(i,n))},Ns.spec.get=function(){return this.type.spec},Ns.inline.get=function(){return this.type instanceof Bs},Object.defineProperties(Rs.prototype,Ns);var Zs=[],Fs={},js=function(e,t){this.local=e&&e.length?e:Zs,this.children=t&&t.length?t:Zs};js.create=function(e,t){return t.length?Vs(t,e,0,Fs):zs},js.prototype.find=function(e,t,i){var n=[];return this.findInner(null==e?0:e,null==t?1e9:t,n,0,i),n},js.prototype.findInner=function(e,t,i,n,r){for(var s=0;s<this.local.length;s++){var o=this.local[s];o.from<=t&&o.to>=e&&(!r||r(o.spec))&&i.push(o.copy(o.from+n,o.to+n))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var l=this.children[a]+1;this.children[a+2].findInner(e-l,t-l,i,n+l,r)}},js.prototype.map=function(e,t,i){return this==zs||0==e.maps.length?this:this.mapInner(e,t,0,0,i||Fs)},js.prototype.mapInner=function(e,t,i,n,r){for(var s,o=0;o<this.local.length;o++){var a=this.local[o].map(e,i,n);a&&a.type.valid(t,a)?(s||(s=[])).push(a):r.onRemove&&r.onRemove(this.local[o].spec)}return this.children.length?function(e,t,i,n,r,s,o){for(var a=e.slice(),l=function(e,t,i,n){for(var o=0;o<a.length;o+=3){var l=a[o+1],c=void 0;-1==l||e>l+s||(t>=a[o]+s?a[o+1]=-1:i>=r&&(c=n-i-(t-e))&&(a[o]+=c,a[o+1]+=c))}},c=0;c<i.maps.length;c++)i.maps[c].forEach(l);for(var h=!1,d=0;d<a.length;d+=3)if(-1==a[d+1]){var u=i.map(e[d]+s),p=u-r;if(p<0||p>=n.content.size){h=!0;continue}var m=i.map(e[d+1]+s,-1)-r,f=n.content.findIndex(p),g=f.index,v=f.offset,y=n.maybeChild(g);if(y&&v==p&&v+y.nodeSize==m){var x=a[d+2].mapInner(i,y,u+1,e[d]+s+1,o);x!=zs?(a[d]=p,a[d+1]=m,a[d+2]=x):(a[d+1]=-2,h=!0)}else h=!0}if(h){var b=function(e,t,i,n,r,s,o){function a(e,t){for(var s=0;s<e.local.length;s++){var l=e.local[s].map(n,r,t);l?i.push(l):o.onRemove&&o.onRemove(e.local[s].spec)}for(var c=0;c<e.children.length;c+=3)a(e.children[c+2],e.children[c]+t+1)}for(var l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+s+1);return i}(a,e,t||[],i,r,s,o),w=Vs(b,n,0,o);t=w.local;for(var C=0;C<a.length;C+=3)a[C+1]<0&&(a.splice(C,3),C-=3);for(var P=0,k=0;P<w.children.length;P+=3){for(var S=w.children[P];k<a.length&&a[k]<S;)k+=3;a.splice(k,0,w.children[P],w.children[P+1],w.children[P+2])}}return new js(t&&t.sort(Gs),a)}(this.children,s,e,t,i,n,r):s?new js(s.sort(Gs)):zs},js.prototype.add=function(e,t){return t.length?this==zs?js.create(e,t):this.addInner(e,t,0):this},js.prototype.addInner=function(e,t,i){var n,r=this,s=0;e.forEach((function(e,o){var a,l=o+i;if(a=qs(t,e,l)){for(n||(n=r.children.slice());s<n.length&&n[s]<o;)s+=3;n[s]==o?n[s+2]=n[s+2].addInner(e,a,l+1):n.splice(s,0,o,o+e.nodeSize,Vs(a,e,l+1,Fs)),s+=3}}));for(var o=Hs(s?Ws(t):t,-i),a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new js(o.length?this.local.concat(o).sort(Gs):this.local,n||this.children)},js.prototype.remove=function(e){return 0==e.length||this==zs?this:this.removeInner(e,0)},js.prototype.removeInner=function(e,t){for(var i=this.children,n=this.local,r=0;r<i.length;r+=3){for(var s=void 0,o=i[r]+t,a=i[r+1]+t,l=0,c=void 0;l<e.length;l++)(c=e[l])&&c.from>o&&c.to<a&&(e[l]=null,(s||(s=[])).push(c));if(s){i==this.children&&(i=this.children.slice());var h=i[r+2].removeInner(s,o+1);h!=zs?i[r+2]=h:(i.splice(r,3),r-=3)}}if(n.length)for(var d=0,u=void 0;d<e.length;d++)if(u=e[d])for(var p=0;p<n.length;p++)n[p].eq(u,t)&&(n==this.local&&(n=this.local.slice()),n.splice(p--,1));return i==this.children&&n==this.local?this:n.length||i.length?new js(n,i):zs},js.prototype.forChild=function(e,t){if(this==zs)return this;if(t.isLeaf)return js.empty;for(var i,n,r=0;r<this.children.length;r+=3)if(this.children[r]>=e){this.children[r]==e&&(i=this.children[r+2]);break}for(var s=e+1,o=s+t.content.size,a=0;a<this.local.length;a++){var l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Bs){var c=Math.max(s,l.from)-s,h=Math.min(o,l.to)-s;c<h&&(n||(n=[])).push(l.copy(c,h))}}if(n){var d=new js(n.sort(Gs));return i?new Us([d,i]):d}return i||zs},js.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof js)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var i=0;i<this.children.length;i+=3)if(this.children[i]!=e.children[i]||this.children[i+1]!=e.children[i+1]||!this.children[i+2].eq(e.children[i+2]))return!1;return!0},js.prototype.locals=function(e){return Ks(this.localsInner(e))},js.prototype.localsInner=function(e){if(this==zs)return Zs;if(e.inlineContent||!this.local.some(Bs.is))return this.local;for(var t=[],i=0;i<this.local.length;i++)this.local[i].type instanceof Bs||t.push(this.local[i]);return t};var zs=new js;js.empty=zs,js.removeOverlap=Ks;var Us=function(e){this.members=e};function Hs(e,t){if(!t||!e.length)return e;for(var i=[],n=0;n<e.length;n++){var r=e[n];i.push(new Rs(r.from+t,r.to+t,r.type))}return i}function qs(e,t,i){if(t.isLeaf)return null;for(var n=i+t.nodeSize,r=null,s=0,o=void 0;s<e.length;s++)(o=e[s])&&o.from>i&&o.to<n&&((r||(r=[])).push(o),e[s]=null);return r}function Ws(e){for(var t=[],i=0;i<e.length;i++)null!=e[i]&&t.push(e[i]);return t}function Vs(e,t,i,n){var r=[],s=!1;t.forEach((function(t,o){var a=qs(e,t,o+i);if(a){s=!0;var l=Vs(a,t,i+o+1,n);l!=zs&&r.push(o,o+t.nodeSize,l)}}));for(var o=Hs(s?Ws(e):e,-i).sort(Gs),a=0;a<o.length;a++)o[a].type.valid(t,o[a])||(n.onRemove&&n.onRemove(o[a].spec),o.splice(a--,1));return o.length||r.length?new js(o,r):zs}function Gs(e,t){return e.from-t.from||e.to-t.to}function Ks(e){for(var t=e,i=0;i<t.length-1;i++){var n=t[i];if(n.from!=n.to)for(var r=i+1;r<t.length;r++){var s=t[r];if(s.from!=n.from){s.from<n.to&&(t==e&&(t=e.slice()),t[i]=n.copy(n.from,s.from),Js(t,r,n.copy(s.from,n.to)));break}s.to!=n.to&&(t==e&&(t=e.slice()),t[r]=s.copy(s.from,n.to),Js(t,r+1,s.copy(n.to,s.to)))}}return t}function Js(e,t,i){for(;t<e.length&&Gs(i,e[t])>0;)t++;e.splice(t,0,i)}function Ys(e){var t=[];return e.someProp("decorations",(function(i){var n=i(e.state);n&&n!=zs&&t.push(n)})),e.cursorWrapper&&t.push(js.create(e.state.doc,[e.cursorWrapper.deco])),Us.from(t)}Us.prototype.map=function(e,t){var i=this.members.map((function(i){return i.map(e,t,Fs)}));return Us.from(i)},Us.prototype.forChild=function(e,t){if(t.isLeaf)return js.empty;for(var i=[],n=0;n<this.members.length;n++){var r=this.members[n].forChild(e,t);r!=zs&&(r instanceof Us?i=i.concat(r.members):i.push(r))}return Us.from(i)},Us.prototype.eq=function(e){if(!(e instanceof Us)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},Us.prototype.locals=function(e){for(var t,i=!0,n=0;n<this.members.length;n++){var r=this.members[n].localsInner(e);if(r.length)if(t){i&&(t=t.slice(),i=!1);for(var s=0;s<r.length;s++)t.push(r[s])}else t=r}return t?Ks(i?t:t.sort(Gs)):Zs},Us.from=function(e){switch(e.length){case 0:return zs;case 1:return e[0];default:return new Us(e)}};var Qs=function(e,t){this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(ro),this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=io(this),this.markCursor=null,this.cursorWrapper=null,to(this),this.nodeViews=no(this),this.docView=or(this.state.doc,eo(this),Ys(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.lastAndroidDelete=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new ls(e,(function(t,i,n,r){return function(e,t,i,n,r){if(t<0){var s=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,o=Cr(e,s);if(o&&!e.state.selection.eq(o)){var a=e.state.tr.setSelection(o);"pointer"==s?a.setMeta("pointer",!0):"key"==s&&a.scrollIntoView(),e.dispatch(a)}}else{var l=e.state.doc.resolve(t),c=l.sharedDepth(i);t=l.before(c+1),i=e.state.doc.resolve(i).after(c+1);var h=e.state.selection,d=function(e,t,i){var n=e.docView.parseRange(t,i),r=n.node,s=n.fromOffset,o=n.toOffset,a=n.from,l=n.to,c=e.root.getSelection(),h=null,d=c.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(h=[{node:d,offset:c.anchorOffset}],Tn(c)||h.push({node:c.focusNode,offset:c.focusOffset})),fn.chrome&&8===e.lastKeyCode)for(var u=o;u>s;u--){var p=r.childNodes[u-1],m=p.pmViewDesc;if("BR"==p.nodeName&&!m){o=u;break}if(!m||m.size)break}var f=e.state.doc,g=e.someProp("domParser")||Vt.fromSchema(e.state.schema),v=f.resolve(a),y=null,x=g.parse(r,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:s,to:o,preserveWhitespace:!v.parent.type.spec.code||"full",editableContent:!0,findPositions:h,ruleFromNode:qr,context:v});if(h&&null!=h[0].pos){var b=h[0].pos,w=h[1]&&h[1].pos;null==w&&(w=b),y={anchor:b+a,head:w+a}}return{doc:x,sel:y,from:a,to:l}}(e,t,i);if(fn.chrome&&e.cursorWrapper&&d.sel&&d.sel.anchor==e.cursorWrapper.deco.from){var u=e.cursorWrapper.deco.type.toDOM.nextSibling,p=u&&u.nodeValue?u.nodeValue.length:1;d.sel={anchor:d.sel.anchor+p,head:d.sel.anchor+p}}var m,f,g=e.state.doc,v=g.slice(d.from,d.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(m=e.state.selection.to,f="end"):(m=e.state.selection.from,f="start"),e.lastKeyCode=null;var y=function(e,t,i,n,r){var s=e.findDiffStart(t,i);if(null==s)return null;var o=e.findDiffEnd(t,i+e.size,i+t.size),a=o.a,l=o.b;return"end"==r&&(n-=a+Math.max(0,s-Math.min(a,l))-s),a<s&&e.size<t.size?(l=(s-=n<=s&&n>=a?s-n:0)+(l-a),a=s):l<s&&(a=(s-=n<=s&&n>=l?s-n:0)+(a-l),l=s),{start:s,endA:a,endB:l}}(v.content,d.doc.content,d.from,m,f);if(!y){if(!(n&&h instanceof Vi&&!h.empty&&h.$head.sameParent(h.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if((fn.ios&&e.lastIOSEnter>Date.now()-225||fn.android)&&r.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))&&e.someProp("handleKeyDown",(function(t){return t(e,Mn(13,"Enter"))})))return void(e.lastIOSEnter=0);if(d.sel){var x=Wr(e,e.state.doc,d.sel);x&&!x.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(x))}return}y={start:h.from,endA:h.to,endB:h.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&y.start==y.endB&&e.state.selection instanceof Vi&&(y.start>e.state.selection.from&&y.start<=e.state.selection.from+2?y.start=e.state.selection.from:y.endA<e.state.selection.to&&y.endA>=e.state.selection.to-2&&(y.endB+=e.state.selection.to-y.endA,y.endA=e.state.selection.to)),fn.ie&&fn.ie_version<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>d.from&&" "==d.doc.textBetween(y.start-d.from-1,y.start-d.from+1)&&(y.start--,y.endA--,y.endB--);var b,w=d.doc.resolveNoCache(y.start-d.from),C=d.doc.resolveNoCache(y.endB-d.from),P=w.sameParent(C)&&w.parent.inlineContent;if((fn.ios&&e.lastIOSEnter>Date.now()-225&&(!P||r.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!P&&w.pos<d.doc.content.size&&(b=Hi.findFrom(d.doc.resolve(w.pos+1),1,!0))&&b.head==C.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,Mn(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>y.start&&function(e,t,i,n,r){if(!n.parent.isTextblock||i-t<=r.pos-n.pos||Vr(n,!0,!1)<r.pos)return!1;var s=e.resolve(t);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;var o=e.resolve(Vr(s,!0,!0));return!(!o.parent.isTextblock||o.pos>i||Vr(o,!0,!1)<i)&&n.parent.content.cut(n.parentOffset).eq(o.parent.content)}(g,y.start,y.endA,w,C)&&e.someProp("handleKeyDown",(function(t){return t(e,Mn(8,"Backspace"))})))fn.android&&fn.chrome&&e.domObserver.suppressSelectionUpdates();else{fn.chrome&&fn.android&&y.toB==y.from&&(e.lastAndroidDelete=Date.now()),fn.android&&!P&&w.start()!=C.start()&&0==C.parentOffset&&w.depth==C.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==y.endA&&(y.endB-=2,C=d.doc.resolveNoCache(y.endB-d.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,Mn(13,"Enter"))}))}),20));var k,S,I,A,_=y.start,E=y.endA;if(P)if(w.pos==C.pos)fn.ie&&fn.ie_version<=11&&0==w.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return kr(e)}),20)),k=e.state.tr.delete(_,E),S=g.resolve(y.start).marksAcross(g.resolve(y.endA));else if(y.endA==y.endB&&(A=g.resolve(y.start))&&(I=function(e,t){for(var i,n,r,s=e.firstChild.marks,o=t.firstChild.marks,a=s,l=o,c=0;c<o.length;c++)a=o[c].removeFromSet(a);for(var h=0;h<s.length;h++)l=s[h].removeFromSet(l);if(1==a.length&&0==l.length)n=a[0],i="add",r=function(e){return e.mark(n.addToSet(e.marks))};else{if(0!=a.length||1!=l.length)return null;n=l[0],i="remove",r=function(e){return e.mark(n.removeFromSet(e.marks))}}for(var d=[],u=0;u<t.childCount;u++)d.push(r(t.child(u)));if(Ge.from(d).eq(e))return{mark:n,type:i}}(w.parent.content.cut(w.parentOffset,C.parentOffset),A.parent.content.cut(A.parentOffset,y.endA-A.start()))))k=e.state.tr,"add"==I.type?k.addMark(_,E,I.mark):k.removeMark(_,E,I.mark);else if(w.parent.child(w.index()).isText&&w.index()==C.index()-(C.textOffset?0:1)){var T=w.parent.textBetween(w.parentOffset,C.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,_,E,T)})))return;k=e.state.tr.insertText(T,_,E)}if(k||(k=e.state.tr.replace(_,E,d.doc.slice(y.start-d.from,y.endB-d.from))),d.sel){var M=Wr(e,k.doc,d.sel);M&&!(fn.chrome&&fn.android&&e.composing&&M.empty&&(y.start!=y.endB||e.lastAndroidDelete<Date.now()-100)&&(M.head==_||M.head==k.mapping.map(E)-1)||fn.ie&&M.empty&&M.head==_)&&k.setSelection(M)}S&&k.ensureMarks(S),e.dispatch(k.scrollIntoView())}}}(e,t,i,n,r)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var i=hs[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var i=t.target;i!=e.dom;i=i.parentNode)if(!i||11==i.nodeType||i.pmViewDesc&&i.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||ms(e,t)||!e.editable&&t.type in ds||i(e,t)})};for(var i in hs)t(i);fn.safari&&e.dom.addEventListener("input",(function(){return null})),ps(e)}(this),this.prevDirectPlugins=[],this.pluginViews=[],this.updatePluginViews()},Xs={props:{configurable:!0},root:{configurable:!0},isDestroyed:{configurable:!0}};function eo(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),t.translate="no",e.someProp("attributes",(function(i){if("function"==typeof i&&(i=i(e.state)),i)for(var n in i)"class"==n&&(t.class+=" "+i[n]),"style"==n?t.style=(t.style?t.style+";":"")+i[n]:t[n]||"contenteditable"==n||"nodeName"==n||(t[n]=String(i[n]))})),[Rs.node(0,e.state.doc.content.size,t)]}function to(e){if(e.markCursor){var t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:Rs.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function io(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function no(e){var t={};return e.someProp("nodeViews",(function(e){for(var i in e)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=e[i])})),t}function ro(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}Xs.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},Qs.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ps(this),this._props=e,e.plugins&&(e.plugins.forEach(ro),this.directPlugins=e.plugins),this.updateStateInner(e.state,!0)},Qs.prototype.setProps=function(e){var t={};for(var i in this._props)t[i]=this._props[i];for(var n in t.state=this.state,e)t[n]=e[n];this.update(t)},Qs.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},Qs.prototype.updateStateInner=function(e,t){var i=this,n=this.state,r=!1,s=!1;if(e.storedMarks&&this.composing&&(Is(this),s=!0),this.state=e,t){var o=no(this);(function(e,t){var i=0,n=0;for(var r in e){if(e[r]!=t[r])return!0;i++}for(var s in t)n++;return i!=n})(o,this.nodeViews)&&(this.nodeViews=o,r=!0),ps(this)}this.editable=io(this),to(this);var a=Ys(this),l=eo(this),c=t?"reset":e.scrollToSelection>n.scrollToSelection?"to selection":"preserve",h=r||!this.docView.matchesNode(e.doc,l,a);!h&&e.selection.eq(n.selection)||(s=!0);var d,u,p,m,f,g,v,y,x,b,w="preserve"==c&&s&&null==this.dom.style.overflowAnchor&&function(e){for(var t,i,n=e.dom.getBoundingClientRect(),r=Math.max(0,n.top),s=(n.left+n.right)/2,o=r+1;o<Math.min(innerHeight,n.bottom);o+=5){var a=e.root.elementFromPoint(s,o);if(a!=e.dom&&e.dom.contains(a)){var l=a.getBoundingClientRect();if(l.top>=r-20){t=a,i=l.top;break}}}return{refDOM:t,refTop:i,stack:Ln(e.dom)}}(this);if(s){this.domObserver.stop();var C=h&&(fn.ie||fn.chrome)&&!this.composing&&!n.selection.empty&&!e.selection.empty&&(m=n.selection,f=e.selection,g=Math.min(m.$anchor.sharedDepth(m.head),f.$anchor.sharedDepth(f.head)),m.$anchor.start(g)!=f.$anchor.start(g));if(h){var P=fn.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!r&&this.docView.update(e.doc,l,a,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=or(e.doc,l,a,this.dom,this)),P&&!this.trackWrites&&(C=!0)}C||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(d=this,u=d.docView.domFromPos(d.state.selection.anchor,0),p=d.root.getSelection(),Sn(u.node,u.offset,p.anchorNode,p.anchorOffset)))?kr(this,C):(Er(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(n),"reset"==c)this.dom.scrollTop=0;else if("to selection"==c){var k=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(i)}))||(e.selection instanceof Ki?Bn(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),k):Bn(this,this.coordsAtPos(e.selection.head,1),k))}else w&&(y=(v=w).refDOM,x=v.refTop,Rn(v.stack,0==(b=y?y.getBoundingClientRect().top:0)?0:b-x))},Qs.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},Qs.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var t=0;t<this.pluginViews.length;t++){var i=this.pluginViews[t];i.update&&i.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var n=0;n<this.directPlugins.length;n++){var r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(var s=0;s<this.state.plugins.length;s++){var o=this.state.plugins[s];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},Qs.prototype.someProp=function(e,t){var i,n=this._props&&this._props[e];if(null!=n&&(i=t?t(n):n))return i;for(var r=0;r<this.directPlugins.length;r++){var s=this.directPlugins[r].props[e];if(null!=s&&(i=t?t(s):s))return i}var o=this.state.plugins;if(o)for(var a=0;a<o.length;a++){var l=o[a].props[e];if(null!=l&&(i=t?t(l):l))return i}},Qs.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Qs.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(Nn)return e.focus(Nn);var t=Ln(e);e.focus(null==Nn?{get preventScroll(){return Nn={preventScroll:!0},!0}}:void 0),Nn||(Nn=!1,Rn(t,0))}(this.dom),kr(this),this.domObserver.start()},Xs.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},Qs.prototype.posAtCoords=function(e){return zn(this,e)},Qs.prototype.coordsAtPos=function(e,t){return void 0===t&&(t=1),qn(this,e,t)},Qs.prototype.domAtPos=function(e,t){return void 0===t&&(t=0),this.docView.domFromPos(e,t)},Qs.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},Qs.prototype.posAtDOM=function(e,t,i){void 0===i&&(i=-1);var n=this.docView.posFromDOM(e,t,i);if(null==n)throw new RangeError("DOM position not inside the editor");return n},Qs.prototype.endOfTextblock=function(e,t){return function(e,t,i){return Jn==t&&Yn==i?Qn:(Jn=t,Yn=i,Qn="up"==i||"down"==i?function(e,t,i){var n=t.selection,r="up"==i?n.$from:n.$to;return Gn(e,t,(function(){for(var t=e.docView.domFromPos(r.pos,"up"==i?-1:1).node;;){var n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.dom;break}t=n.dom.parentNode}for(var s=qn(e,r.pos,1),o=t.firstChild;o;o=o.nextSibling){var a=void 0;if(1==o.nodeType)a=o.getClientRects();else{if(3!=o.nodeType)continue;a=kn(o,0,o.nodeValue.length).getClientRects()}for(var l=0;l<a.length;l++){var c=a[l];if(c.bottom>c.top+1&&("up"==i?s.top-c.top>2*(c.bottom-s.top):c.bottom-s.bottom>2*(s.bottom-c.top)))return!1}}return!0}))}(e,t,i):function(e,t,i){var n=t.selection.$head;if(!n.parent.isTextblock)return!1;var r=n.parentOffset,s=!r,o=r==n.parent.content.size,a=e.root.getSelection();return Kn.test(n.parent.textContent)&&a.modify?Gn(e,t,(function(){var t=a.getRangeAt(0),r=a.focusNode,s=a.focusOffset,o=a.caretBidiLevel;a.modify("move",i,"character");var l=!(n.depth?e.docView.domAfterPos(n.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||r==a.focusNode&&s==a.focusOffset;return a.removeAllRanges(),a.addRange(t),null!=o&&(a.caretBidiLevel=o),l})):"left"==i||"backward"==i?s:o}(e,t,i))}(this,t||this.state,e)},Qs.prototype.destroy=function(){this.docView&&(function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ys(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Xs.isDestroyed.get=function(){return null==this.docView},Qs.prototype.dispatchEvent=function(e){return function(e,t){ms(e,t)||!hs[t.type]||!e.editable&&t.type in ds||hs[t.type](e,t)}(this,e)},Qs.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(Qs.prototype,Xs);var so=function(e,t){var i=this;this.editorView=e,this.width=t.width||1,this.color=t.color||"black",this.class=t.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(t){var n=function(e){return i[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}}))};so.prototype.destroy=function(){var e=this;this.handlers.forEach((function(t){var i=t.name,n=t.handler;return e.editorView.dom.removeEventListener(i,n)}))},so.prototype.update=function(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())},so.prototype.setCursor=function(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},so.prototype.updateOverlay=function(){var e,t=this.editorView.state.doc.resolve(this.cursorPos);if(!t.parent.inlineContent){var i=t.nodeBefore,n=t.nodeAfter;if(i||n){var r=this.editorView.nodeDOM(this.cursorPos-(i?i.nodeSize:0)).getBoundingClientRect(),s=i?r.bottom:r.top;i&&n&&(s=(s+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:r.left,right:r.right,top:s-this.width/2,bottom:s+this.width/2}}}if(!e){var o=this.editorView.coordsAtPos(this.cursorPos);e={left:o.left-this.width/2,right:o.left+this.width/2,top:o.top,bottom:o.bottom}}var a,l,c=this.editorView.dom.offsetParent;if(this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!c||c==document.body&&"static"==getComputedStyle(c).position)a=-pageXOffset,l=-pageYOffset;else{var h=c.getBoundingClientRect();a=h.left-c.scrollLeft,l=h.top-c.scrollTop}this.element.style.left=e.left-a+"px",this.element.style.top=e.top-l+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"},so.prototype.scheduleRemoval=function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return t.setCursor(null)}),e)},so.prototype.dragover=function(e){if(this.editorView.editable){var t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),i=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),n=i&&i.type.spec.disableDropCursor,r="function"==typeof n?n(this.editorView,t):n;if(t&&!r){var s=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&null==(s=Ei(this.editorView.state.doc,s,this.editorView.dragging.slice)))return this.setCursor(null);this.setCursor(s),this.scheduleRemoval(5e3)}}},so.prototype.dragend=function(){this.scheduleRemoval(20)},so.prototype.drop=function(){this.scheduleRemoval(20)},so.prototype.dragleave=function(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)};for(var oo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},ao={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},lo="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),co="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),ho="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),uo="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),po="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),mo=lo&&(uo||+lo[1]<57)||ho&&uo,fo=0;fo<10;fo++)oo[48+fo]=oo[96+fo]=String(fo);for(fo=1;fo<=24;fo++)oo[fo+111]="F"+fo;for(fo=65;fo<=90;fo++)oo[fo]=String.fromCharCode(fo+32),ao[fo]=String.fromCharCode(fo);for(var go in oo)ao.hasOwnProperty(go)||(ao[go]=oo[go]);var vo="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function yo(e){var t,i,n,r,s=e.split(/-(?!$)/),o=s[s.length-1];"Space"==o&&(o=" ");for(var a=0;a<s.length-1;a++){var l=s[a];if(/^(cmd|meta|m)$/i.test(l))r=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))n=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);vo?r=!0:i=!0}}return t&&(o="Alt-"+o),i&&(o="Ctrl-"+o),r&&(o="Meta-"+o),n&&(o="Shift-"+o),o}function xo(e,t,i){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==i&&t.shiftKey&&(e="Shift-"+e),e}function bo(e){return new dn({props:{handleKeyDown:wo(e)}})}function wo(e){var t=function(e){var t=Object.create(null);for(var i in e)t[yo(i)]=e[i];return t}(e);return function(e,i){var n,r=function(e){var t=!(mo&&(e.ctrlKey||e.altKey||e.metaKey)||(co||po)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?ao:oo)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(i),s=1==r.length&&" "!=r,o=t[xo(r,i,!s)];if(o&&o(e.state,e.dispatch,e))return!0;if(s&&(i.shiftKey||i.altKey||i.metaKey||r.charCodeAt(0)>127)&&(n=oo[i.keyCode])&&n!=r){var a=t[xo(n,i,!0)];if(a&&a(e.state,e.dispatch,e))return!0}else if(s&&i.shiftKey){var l=t[xo(r,i,!0)];if(l&&l(e.state,e.dispatch,e))return!0}return!1}}var Co=function(e){function t(t){e.call(this,t,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(i,n){var r=i.resolve(n.map(this.head));return t.valid(r)?new t(r):e.near(r)},t.prototype.content=function(){return tt.empty},t.prototype.eq=function(e){return e instanceof t&&e.head==this.head},t.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},t.fromJSON=function(e,i){if("number"!=typeof i.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(e.resolve(i.pos))},t.prototype.getBookmark=function(){return new Po(this.anchor)},t.valid=function(e){var t=e.parent;if(t.isTextblock||!function(e){for(var t=e.depth;t>=0;t--){var i=e.index(t);if(0!=i)for(var n=e.node(t).child(i-1);;n=n.lastChild){if(0==n.childCount&&!n.inlineContent||n.isAtom||n.type.spec.isolating)return!0;if(n.inlineContent)return!1}}return!0}(e)||!function(e){for(var t=e.depth;t>=0;t--){var i=e.indexAfter(t),n=e.node(t);if(i!=n.childCount)for(var r=n.child(i);;r=r.firstChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}(e))return!1;var i=t.type.spec.allowGapCursor;if(null!=i)return i;var n=t.contentMatchAt(e.index()).defaultType;return n&&n.isTextblock},t.findFrom=function(e,i,n){e:for(;;){if(!n&&t.valid(e))return e;for(var r=e.pos,s=null,o=e.depth;;o--){var a=e.node(o);if(i>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(i>0?e.indexAfter(o):e.index(o)-1);break}if(0==o)return null;r+=i;var l=e.doc.resolve(r);if(t.valid(l))return l}for(;;){var c=i>0?s.firstChild:s.lastChild;if(!c){if(s.isAtom&&!s.isText&&!Ki.isSelectable(s)){e=e.doc.resolve(r+s.nodeSize*i),n=!1;continue e}break}s=c,r+=i;var h=e.doc.resolve(r);if(t.valid(h))return h}return null}},t}(Hi);Co.prototype.visible=!1,Hi.jsonID("gapcursor",Co);var Po=function(e){this.pos=e};Po.prototype.map=function(e){return new Po(e.map(this.pos))},Po.prototype.resolve=function(e){var t=e.resolve(this.pos);return Co.valid(t)?new Co(t):Hi.near(t)};var ko=wo({ArrowLeft:So("horiz",-1),ArrowRight:So("horiz",1),ArrowUp:So("vert",-1),ArrowDown:So("vert",1)});function So(e,t){var i="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,n,r){var s=e.selection,o=t>0?s.$to:s.$from,a=s.empty;if(s instanceof Vi){if(!r.endOfTextblock(i)||0==o.depth)return!1;a=!1,o=e.doc.resolve(t>0?o.after():o.before())}var l=Co.findFrom(o,t,a);return!!l&&(n&&n(e.tr.setSelection(new Co(l))),!0)}}function Io(e,t,i){if(!e.editable)return!1;var n=e.state.doc.resolve(t);if(!Co.valid(n))return!1;var r=e.posAtCoords({left:i.clientX,top:i.clientY}).inside;return!(r>-1&&Ki.isSelectable(e.state.doc.nodeAt(r))||(e.dispatch(e.state.tr.setSelection(new Co(n))),0))}function Ao(e){if(!(e.selection instanceof Co))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",js.create(e.doc,[Rs.widget(e.selection.head,t,{key:"gapcursor"})])}function _o(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function Eo(e,t,i){for(;e;e="start"==t?e.firstChild:e.lastChild){if(e.isTextblock)return!0;if(i&&1!=e.childCount)return!1}return!1}function To(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Mo(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var i=e.node(t);if(e.index(t)+1<i.childCount)return e.doc.resolve(e.after(t+1));if(i.type.spec.isolating)break}return null}function $o(e){for(var t=0;t<e.edgeCount;t++){var i=e.edge(t).type;if(i.isTextblock&&!i.hasRequiredAttrs())return i}return null}function Oo(e,t){var i=e.selection,n=i.$head,r=i.$anchor;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;var s=n.node(-1),o=n.indexAfter(-1),a=$o(s.contentMatchAt(o));if(!s.canReplaceWith(o,o,a))return!1;if(t){var l=n.after(),c=e.tr.replaceWith(l,l,a.createAndFill());c.setSelection(Hi.near(c.doc.resolve(l),1)),t(c.scrollIntoView())}return!0}function Do(e,t,i){var n,r,s=t.nodeBefore,o=t.nodeAfter;if(s.type.spec.isolating||o.type.spec.isolating)return!1;if(function(e,t,i){var n=t.nodeBefore,r=t.nodeAfter,s=t.index();return!(!(n&&r&&n.type.compatibleContent(r.type))||(!n.content.size&&t.parent.canReplace(s-1,s)?(i&&i(e.tr.delete(t.pos-n.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(s,s+1)||!r.isTextblock&&!_i(e.doc,t.pos)||(i&&i(e.tr.clearIncompatible(t.pos,n.type,n.contentMatchAt(n.childCount)).join(t.pos).scrollIntoView()),0)))}(e,t,i))return!0;var a=t.parent.canReplace(t.index(),t.index()+1);if(a&&(n=(r=s.contentMatchAt(s.childCount)).findWrapping(o.type))&&r.matchType(n[0]||o.type).validEnd){if(i){for(var l=t.pos+o.nodeSize,c=Ge.empty,h=n.length-1;h>=0;h--)c=Ge.from(n[h].create(null,c));c=Ge.from(s.copy(c));var d=e.tr.step(new wi(t.pos-1,l,t.pos,l,new tt(c,1,0),n.length,!0)),u=l+2*n.length;_i(d.doc,u)&&d.join(u),i(d.scrollIntoView())}return!0}var p=Hi.findFrom(t,1),m=p&&p.$from.blockRange(p.$to),f=m&&ki(m);if(null!=f&&f>=t.depth)return i&&i(e.tr.lift(m,f).scrollIntoView()),!0;if(a&&Eo(o,"start",!0)&&Eo(s,"end")){for(var g=s,v=[];v.push(g),!g.isTextblock;)g=g.lastChild;for(var y=o,x=1;!y.isTextblock;y=y.firstChild)x++;if(g.canReplace(g.childCount,g.childCount,y.content)){if(i){for(var b=Ge.empty,w=v.length-1;w>=0;w--)b=Ge.from(v[w].copy(b));i(e.tr.step(new wi(t.pos-v.length,t.pos+o.nodeSize,t.pos+x,t.pos+o.nodeSize-x,new tt(b,v.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Bo(e,t){return function(i,n){var r=i.selection,s=r.from,o=r.to,a=!1;return i.doc.nodesBetween(s,o,(function(n,r){if(a)return!1;if(n.isTextblock&&!n.hasMarkup(e,t))if(n.type==e)a=!0;else{var s=i.doc.resolve(r),o=s.index();a=s.parent.canReplaceWith(o,o+1,e)}})),!!a&&(n&&n(i.tr.setBlockType(s,o,e,t).scrollIntoView()),!0)}}function Lo(e,t){return function(i,n){var r=i.selection,s=r.empty,o=r.$cursor,a=r.ranges;if(s&&!o||!function(e,t,i){for(var n=function(n){var r=t[n],s=r.$from,o=r.$to,a=0==s.depth&&e.type.allowsMarkType(i);if(e.nodesBetween(s.pos,o.pos,(function(e){if(a)return!1;a=e.inlineContent&&e.type.allowsMarkType(i)})),a)return{v:!0}},r=0;r<t.length;r++){var s=n(r);if(s)return s.v}return!1}(i.doc,a,e))return!1;if(n)if(o)e.isInSet(i.storedMarks||o.marks())?n(i.tr.removeStoredMark(e)):n(i.tr.addStoredMark(e.create(t)));else{for(var l=!1,c=i.tr,h=0;!l&&h<a.length;h++){var d=a[h],u=d.$from,p=d.$to;l=i.doc.rangeHasMark(u.pos,p.pos,e)}for(var m=0;m<a.length;m++){var f=a[m],g=f.$from,v=f.$to;if(l)c.removeMark(g.pos,v.pos,e);else{var y=g.pos,x=v.pos,b=g.nodeAfter,w=v.nodeBefore,C=b&&b.isText?/^\s*/.exec(b.text)[0].length:0,P=w&&w.isText?/\s*$/.exec(w.text)[0].length:0;y+C<x&&(y+=C,x-=P),c.addMark(y,x,e.create(t))}}n(c.scrollIntoView())}return!0}}function Ro(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,i,n){for(var r=0;r<e.length;r++)if(e[r](t,i,n))return!0;return!1}}var No=Ro(_o,(function(e,t,i){var n=e.selection.$cursor;if(!n||(i?!i.endOfTextblock("backward",e):n.parentOffset>0))return!1;var r=To(n);if(!r){var s=n.blockRange(),o=s&&ki(s);return null!=o&&(t&&t(e.tr.lift(s,o).scrollIntoView()),!0)}var a=r.nodeBefore;if(!a.type.spec.isolating&&Do(e,r,t))return!0;if(0==n.parent.content.size&&(Eo(a,"end")||Ki.isSelectable(a))){if(t){var l=e.tr.deleteRange(n.before(),n.after());l.setSelection(Eo(a,"end")?Hi.findFrom(l.doc.resolve(l.mapping.map(r.pos,-1)),-1):Ki.create(l.doc,r.pos-a.nodeSize)),t(l.scrollIntoView())}return!0}return!(!a.isAtom||r.depth!=n.depth-1||(t&&t(e.tr.delete(r.pos-a.nodeSize,r.pos).scrollIntoView()),0))}),(function(e,t,i){var n=e.selection,r=n.$head,s=r;if(!n.empty)return!1;if(r.parent.isTextblock){if(i?!i.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=To(r)}var o=s&&s.nodeBefore;return!(!o||!Ki.isSelectable(o)||(t&&t(e.tr.setSelection(Ki.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),0))})),Zo=Ro(_o,(function(e,t,i){var n=e.selection.$cursor;if(!n||(i?!i.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size))return!1;var r=Mo(n);if(!r)return!1;var s=r.nodeAfter;if(Do(e,r,t))return!0;if(0==n.parent.content.size&&(Eo(s,"start")||Ki.isSelectable(s))){if(t){var o=e.tr.deleteRange(n.before(),n.after());o.setSelection(Eo(s,"start")?Hi.findFrom(o.doc.resolve(o.mapping.map(r.pos)),1):Ki.create(o.doc,o.mapping.map(r.pos))),t(o.scrollIntoView())}return!0}return!(!s.isAtom||r.depth!=n.depth-1||(t&&t(e.tr.delete(r.pos,r.pos+s.nodeSize).scrollIntoView()),0))}),(function(e,t,i){var n=e.selection,r=n.$head,s=r;if(!n.empty)return!1;if(r.parent.isTextblock){if(i?!i.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=Mo(r)}var o=s&&s.nodeAfter;return!(!o||!Ki.isSelectable(o)||(t&&t(e.tr.setSelection(Ki.create(e.doc,s.pos)).scrollIntoView()),0))})),Fo={Enter:Ro((function(e,t){var i=e.selection,n=i.$head,r=i.$anchor;return!(!n.parent.type.spec.code||!n.sameParent(r)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))}),(function(e,t){var i=e.selection,n=i.$from,r=i.$to;if(i instanceof Yi||n.parent.inlineContent||r.parent.inlineContent)return!1;var s=$o(r.parent.contentMatchAt(r.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){var o=(!n.parentOffset&&r.index()<r.parent.childCount?n:r).pos,a=e.tr.insert(o,s.createAndFill());a.setSelection(Vi.create(a.doc,o+1)),t(a.scrollIntoView())}return!0}),(function(e,t){var i=e.selection.$cursor;if(!i||i.parent.content.size)return!1;if(i.depth>1&&i.after()!=i.end(-1)){var n=i.before();if(Ai(e.doc,n))return t&&t(e.tr.split(n).scrollIntoView()),!0}var r=i.blockRange(),s=r&&ki(r);return null!=s&&(t&&t(e.tr.lift(r,s).scrollIntoView()),!0)}),(function(e,t){var i=e.selection,n=i.$from,r=i.$to;if(e.selection instanceof Ki&&e.selection.node.isBlock)return!(!n.parentOffset||!Ai(e.doc,n.pos)||(t&&t(e.tr.split(n.pos).scrollIntoView()),0));if(!n.parent.isBlock)return!1;if(t){var s=r.parentOffset==r.parent.content.size,o=e.tr;(e.selection instanceof Vi||e.selection instanceof Yi)&&o.deleteSelection();var a=0==n.depth?null:$o(n.node(-1).contentMatchAt(n.indexAfter(-1))),l=s&&a?[{type:a}]:null,c=Ai(o.doc,o.mapping.map(n.pos),1,l);if(l||c||!Ai(o.doc,o.mapping.map(n.pos),1,a&&[{type:a}])||(l=[{type:a}],c=!0),c&&(o.split(o.mapping.map(n.pos),1,l),!s&&!n.parentOffset&&n.parent.type!=a)){var h=o.mapping.map(n.before()),d=o.doc.resolve(h);n.node(-1).canReplaceWith(d.index(),d.index()+1,a)&&o.setNodeMarkup(o.mapping.map(n.before()),a)}t(o.scrollIntoView())}return!0})),"Mod-Enter":Oo,Backspace:No,"Mod-Backspace":No,"Shift-Backspace":No,Delete:Zo,"Mod-Delete":Zo,"Mod-a":function(e,t){return t&&t(e.tr.setSelection(new Yi(e.doc))),!0}},jo={"Ctrl-h":Fo.Backspace,"Alt-Backspace":Fo["Mod-Backspace"],"Ctrl-d":Fo.Delete,"Ctrl-Alt-Backspace":Fo["Mod-Delete"],"Alt-Delete":Fo["Mod-Delete"],"Alt-d":Fo["Mod-Delete"]};for(var zo in Fo)jo[zo]=Fo[zo];var Uo=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?jo:Fo,Ho=function(e,t){var i;this.match=e,this.handler="string"==typeof t?(i=t,function(e,t,n,r){var s=i;if(t[1]){var o=t[0].lastIndexOf(t[1]);s+=t[0].slice(o+t[1].length);var a=(n+=o)-r;a>0&&(s=t[0].slice(o-a,o)+s,n=r)}return e.tr.insertText(s,n,r)}):t};function qo(e,t,i,n,r,s){if(e.composing)return!1;var o=e.state,a=o.doc.resolve(t);if(a.parent.type.spec.code)return!1;for(var l=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,null,"")+n,c=0;c<r.length;c++){var h=r[c].match.exec(l),d=h&&r[c].handler(o,h,t-(h[0].length-n.length),i);if(d)return e.dispatch(d.setMeta(s,{transform:d,from:t,to:i,text:n})),!0}return!1}function Wo(e,t){for(var i=e.plugins,n=0;n<i.length;n++){var r=i[n],s=void 0;if(r.spec.isInputRules&&(s=r.getState(e))){if(t){for(var o=e.tr,a=s.transform,l=a.steps.length-1;l>=0;l--)o.step(a.steps[l].invert(a.docs[l]));if(s.text){var c=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,e.schema.text(s.text,c))}else o.delete(s.from,s.to);t(o)}return!0}}return!1}function Vo(e,t,i,n){return new Ho(e,(function(e,r,s,o){var a=i instanceof Function?i(r):i,l=e.tr.delete(s,o),c=l.doc.resolve(s).blockRange(),h=c&&Si(c,t,a);if(!h)return null;l.wrap(c,h);var d=l.doc.resolve(s-1).nodeBefore;return d&&d.type==t&&_i(l.doc,s-1)&&(!n||n(r,d))&&l.join(s-1),l}))}function Go(e,t,i){return new Ho(e,(function(e,n,r,s){var o=e.doc.resolve(r),a=i instanceof Function?i(n):i;return o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t)?e.tr.delete(r,s).setBlockType(r,r,t,a):null}))}function Ko(e){return t=>function(e,t){for(let i=e.depth;i>0;i-=1){const n=e.node(i);if(t(n))return{pos:i>0?e.before(i):0,start:e.start(i),depth:i,node:n}}}(t.$from,e)}function Jo(e,t){const{from:i,to:n}=e.selection;let r=[];e.doc.nodesBetween(i,n,(e=>{r=[...r,...e.marks]}));const s=r.find((e=>e.type.name===t.name));return s?s.attrs:{}}function Yo(e=null,t=null){if(!e||!t)return!1;const i=e.parent.childAfter(e.parentOffset);if(!i.node)return!1;const n=i.node.marks.find((e=>e.type===t));if(!n)return!1;let r=e.index(),s=e.start()+i.offset,o=r+1,a=s+i.node.nodeSize;for(;r>0&&n.isInSet(e.parent.child(r-1).marks);)r-=1,s-=e.parent.child(r).nodeSize;for(;o<e.parent.childCount&&n.isInSet(e.parent.child(o).marks);)a+=e.parent.child(o).nodeSize,o+=1;return{from:s,to:a}}function Qo(e,t){const{from:i,to:n}=e.selection;let r=[];e.doc.nodesBetween(i,n,(e=>{r=[...r,e]}));const s=r.reverse().find((e=>e.type.name===t.name));return s?s.attrs:{}}function Xo(e,t,i={}){const n=(r=t,function(e){if(function(e){return e instanceof Ki}(e)){const{node:t}=e,{$from:i}=e;if(function(e,t){return Array.isArray(e)&&e.indexOf(t.type)>-1||t.type===e}(r,t))return{node:t,pos:i.pos,depth:i.depth}}})(e.selection)||Ko((e=>e.type===t))(e.selection);var r;return Object.keys(i).length&&n?n.node.hasMarkup(t,{...n.node.attrs,...i}):!!n}function ea(e){return function(t,i){var n=t.selection,r=n.$from,s=n.$to,o=r.blockRange(s,(function(t){return t.childCount&&t.firstChild.type==e}));return!!o&&(!i||(r.node(o.depth-1).type==e?function(e,t,i,n){var r=e.tr,s=n.end,o=n.$to.end(n.depth);return s<o&&(r.step(new wi(s-1,o,s,o,new tt(Ge.from(i.create(null,n.parent.copy())),1,0),1,!0)),n=new xt(r.doc.resolve(n.$from.pos),r.doc.resolve(o),n.depth)),t(r.lift(n,ki(n)).scrollIntoView()),!0}(t,i,e,o):function(e,t,i){for(var n=e.tr,r=i.parent,s=i.end,o=i.endIndex-1,a=i.startIndex;o>a;o--)s-=r.child(o).nodeSize,n.delete(s-1,s+1);var l=n.doc.resolve(i.start),c=l.nodeAfter;if(n.mapping.map(i.end)!=i.start+l.nodeAfter.nodeSize)return!1;var h=0==i.startIndex,d=i.endIndex==r.childCount,u=l.node(-1),p=l.index(-1);if(!u.canReplace(p+(h?0:1),p+1,c.content.append(d?Ge.empty:Ge.from(r))))return!1;var m=l.pos,f=m+c.nodeSize;return n.step(new wi(m-(h?1:0),f+(d?1:0),m+1,f-1,new tt((h?Ge.empty:Ge.from(r.copy(Ge.empty))).append(d?Ge.empty:Ge.from(r.copy(Ge.empty))),h?0:1,d?0:1),h?0:1)),t(n.scrollIntoView()),!0}(t,i,o)))}}function ta(e){return function(t,i){var n=t.selection,r=n.$from,s=n.$to,o=r.blockRange(s,(function(t){return t.childCount&&t.firstChild.type==e}));if(!o)return!1;var a=o.startIndex;if(0==a)return!1;var l=o.parent,c=l.child(a-1);if(c.type!=e)return!1;if(i){var h=c.lastChild&&c.lastChild.type==l.type,d=Ge.from(h?e.create():null),u=new tt(Ge.from(e.create(null,Ge.from(l.type.create(null,d)))),h?3:1,0),p=o.start,m=o.end;i(t.tr.step(new wi(p-(h?3:1),m,p,m,u,1,!0)).scrollIntoView())}return!0}}function ia(e,t,i){return new Ho(e,((e,n,r,s)=>{const o=i instanceof Function?i(n):i,{tr:a}=e,l=n.length-1;let c=s,h=r;if(n[l]){const i=r+n[0].indexOf(n[l-1]),o=i+n[l-1].length-1,d=i+n[l-1].lastIndexOf(n[l]),u=d+n[l].length,p=function(e,t,i){let n=[];return i.doc.nodesBetween(e,t,((e,t)=>{n=[...n,...e.marks.map((i=>({start:t,end:t+e.nodeSize,mark:i})))]})),n}(r,s,e).filter((e=>{const{excluded:i}=e.mark.type;return i.find((e=>e.name===t.name))})).filter((e=>e.end>i));if(p.length)return!1;u<o&&a.delete(u,o),d>i&&a.delete(i,d),h=i,c=h+n[l].length}return a.addMark(h,c,t.create(o)),a.removeStoredMark(t),a}))}function na(e,t,i){const n=r=>{const s=[];return r.forEach((r=>{if(r.isText){const{text:n}=r;let o,a=0;do{if(o=e.exec(n),o){const e=o.index,n=e+o[0].length,l=i instanceof Function?i(o[0]):i;e>0&&s.push(r.cut(a,e)),s.push(r.cut(e,n).mark(t.create(l).addToSet(r.marks))),a=n}}while(o);a<n.length&&s.push(r.cut(a))}else s.push(r.copy(n(r.content)))})),Ge.fromArray(s)};return new dn({props:{transformPasted:e=>new tt(n(e.content),e.openStart,e.openEnd)}})}function ra(e,t,i){const n=(r,s)=>{const o=[];return r.forEach((r=>{if(r.isText){const{text:n,marks:a}=r;let l,c=0;const h=!!a.filter((e=>"link"===e.type.name))[0];for(;!h&&null!==(l=e.exec(n));)if(s&&s.type.allowsMarkType(t)&&l[1]){const e=l.index,n=e+l[0].length,s=e+l[0].indexOf(l[1]),a=s+l[1].length,h=i instanceof Function?i(l):i;e>0&&o.push(r.cut(c,e)),o.push(r.cut(s,a).mark(t.create(h).addToSet(r.marks))),c=n}c<n.length&&o.push(r.cut(c))}else o.push(r.copy(n(r.content,r)))})),Ge.fromArray(o)};return new dn({props:{transformPasted:e=>new tt(n(e.content),e.openStart,e.openEnd)}})}function sa(e,t,i={}){return(n,r,s)=>Xo(n,e,i)?Bo(t)(n,r,s):Bo(e,i)(n,r,s)}function oa(e,t){return e.type===t.nodes.bullet_list||e.type===t.nodes.ordered_list||e.type===t.nodes.todo_list}function aa(e,t){return(i,n,r)=>{const{schema:s,selection:o}=i,{$from:a,$to:l}=o,c=a.blockRange(l);if(!c)return!1;const h=Ko((e=>oa(e,s)))(o);if(c.depth>=1&&h&&c.depth-h.depth<=1){if(h.node.type===e)return ea(t)(i,n,r);if(oa(h.node,s)&&e.validContent(h.node.content)){const{tr:t}=i;return t.setNodeMarkup(h.pos,e),n&&n(t),!1}}return function(e,t){return function(i,n){var r=i.selection,s=r.$from,o=r.$to,a=s.blockRange(o),l=!1,c=a;if(!a)return!1;if(a.depth>=2&&s.node(a.depth-1).type.compatibleContent(e)&&0==a.startIndex){if(0==s.index(a.depth-1))return!1;var h=i.doc.resolve(a.start-2);c=new xt(h,h,a.depth),a.endIndex<a.parent.childCount&&(a=new xt(s,i.doc.resolve(o.end(a.depth)),a.depth)),l=!0}var d=Si(c,e,t,a);return!!d&&(n&&n(function(e,t,i,n,r){for(var s=Ge.empty,o=i.length-1;o>=0;o--)s=Ge.from(i[o].type.create(i[o].attrs,s));e.step(new wi(t.start-(n?2:0),t.end,t.start,t.end,new tt(s,0,0),i.length,!0));for(var a=0,l=0;l<i.length;l++)i[l].type==r&&(a=l+1);for(var c=i.length-a,h=t.start+i.length-(n?2:0),d=t.parent,u=t.startIndex,p=t.endIndex,m=!0;u<p;u++,m=!1)!m&&Ai(e.doc,h,c)&&(e.split(h,c),h+=2*c),h+=d.child(u).nodeSize;return e}(i.tr,a,d,l,e).scrollIntoView()),!0)}}(e)(i,n,r)}}function la(e,t={}){return(i,n,r)=>Xo(i,e,t)?function(e,t){var i=e.selection,n=i.$from,r=i.$to,s=n.blockRange(r),o=s&&ki(s);return null!=o&&(t&&t(e.tr.lift(s,o).scrollIntoView()),!0)}(i,n):function(e,t){return function(i,n){var r=i.selection,s=r.$from,o=r.$to,a=s.blockRange(o),l=a&&Si(a,e,t);return!!l&&(n&&n(i.tr.wrap(a,l).scrollIntoView()),!0)}}(e,t)(i,n,r)}new Ho(/--$/,""),new Ho(/\.\.\.$/,""),new Ho(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),new Ho(/"$/,""),new Ho(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),new Ho(/'$/,"");class ca{constructor(e,{editor:t,extension:i,parent:n,node:r,view:s,decorations:o,getPos:a}){this.component=e,this.editor=t,this.extension=i,this.parent=n,this.node=r,this.view=s,this.decorations=o,this.isNode=!!this.node.marks,this.isMark=!this.isNode,this.getPos=this.isMark?this.getMarkPos:a,this.captureEvents=!0,this.dom=this.createDOM(),this.contentDOM=this.vm.$refs.content}createDOM(){const e=t().extend(this.component),i={editor:this.editor,node:this.node,view:this.view,getPos:()=>this.getPos(),decorations:this.decorations,selected:!1,options:this.extension.options,updateAttrs:e=>this.updateAttrs(e)};return"function"==typeof this.extension.setSelection&&(this.setSelection=this.extension.setSelection),"function"==typeof this.extension.update&&(this.update=this.extension.update),this.vm=new e({parent:this.parent,propsData:i}).$mount(),this.vm.$el}update(e,t){return e.type===this.node.type&&(e===this.node&&this.decorations===t||(this.node=e,this.decorations=t,this.updateComponentProps({node:e,decorations:t})),!0)}updateComponentProps(e){if(!this.vm._props)return;const i=t().config.silent;t().config.silent=!0,Object.entries(e).forEach((([e,t])=>{this.vm._props[e]=t})),t().config.silent=i}updateAttrs(e){if(!this.view.editable)return;const{state:t}=this.view,{type:i}=this.node,n=this.getPos(),r={...this.node.attrs,...e},s=this.isMark?t.tr.removeMark(n.from,n.to,i).addMark(n.from,n.to,i.create(r)):t.tr.setNodeMarkup(n,null,r);this.view.dispatch(s)}ignoreMutation(e){return!("selection"===e.type||this.contentDOM&&this.contentDOM.contains(e.target))}stopEvent(e){if("function"==typeof this.extension.stopEvent)return this.extension.stopEvent(e);const t=!!this.extension.schema.draggable;if(t&&"mousedown"===e.type){const t=e.target.closest&&e.target.closest("[data-drag-handle]");t&&(this.dom===t||this.dom.contains(t))&&(this.captureEvents=!1,document.addEventListener("dragend",(()=>{this.captureEvents=!0}),{once:!0}))}const i="copy"===e.type,n="paste"===e.type,r="cut"===e.type,s=e.type.startsWith("drag")||"drop"===e.type;return!(t&&s||i||n||r)&&this.captureEvents}selectNode(){this.updateComponentProps({selected:!0})}deselectNode(){this.updateComponentProps({selected:!1})}getMarkPos(){const e=this.view.posAtDOM(this.dom);return Yo(this.view.state.doc.resolve(e),this.node.type)}destroy(){this.vm.$destroy()}}class ha{on(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}emit(e,...t){this._callbacks=this._callbacks||{};const i=this._callbacks[e];return i&&i.forEach((e=>e.apply(this,t))),this}off(e,t){if(arguments.length){const i=this._callbacks?this._callbacks[e]:null;i&&(t?this._callbacks[e]=i.filter((e=>e!==t)):delete this._callbacks[e])}else this._callbacks={};return this}}class da{constructor(e={}){this.options={...this.defaultOptions,...e}}init(){return null}bindEditor(e=null){this.editor=e}get name(){return null}get type(){return"extension"}get defaultOptions(){return{}}get plugins(){return[]}inputRules(){return[]}pasteRules(){return[]}keys(){return{}}}class ua{constructor(e=[],t){e.forEach((e=>{e.bindEditor(t),e.init()})),this.extensions=e}get nodes(){return this.extensions.filter((e=>"node"===e.type)).reduce(((e,{name:t,schema:i})=>({...e,[t]:i})),{})}get options(){const{view:e}=this;return this.extensions.reduce(((t,i)=>({...t,[i.name]:new Proxy(i.options,{set(t,i,n){const r=t[i]!==n;return Object.assign(t,{[i]:n}),r&&e.updateState(e.state),!0}})})),{})}get marks(){return this.extensions.filter((e=>"mark"===e.type)).reduce(((e,{name:t,schema:i})=>({...e,[t]:i})),{})}get plugins(){return this.extensions.filter((e=>e.plugins)).reduce(((e,{plugins:t})=>[...e,...t]),[])}keymaps({schema:e}){return[...this.extensions.filter((e=>["extension"].includes(e.type))).filter((e=>e.keys)).map((t=>t.keys({schema:e}))),...this.extensions.filter((e=>["node","mark"].includes(e.type))).filter((e=>e.keys)).map((t=>t.keys({type:e[`${t.type}s`][t.name],schema:e})))].map((e=>bo(e)))}inputRules({schema:e,excludedExtensions:t}){if(!(t instanceof Array)&&t)return[];const i=t instanceof Array?this.extensions.filter((e=>!t.includes(e.name))):this.extensions;return[...i.filter((e=>["extension"].includes(e.type))).filter((e=>e.inputRules)).map((t=>t.inputRules({schema:e}))),...i.filter((e=>["node","mark"].includes(e.type))).filter((e=>e.inputRules)).map((t=>t.inputRules({type:e[`${t.type}s`][t.name],schema:e})))].reduce(((e,t)=>[...e,...t]),[])}pasteRules({schema:e,excludedExtensions:t}){if(!(t instanceof Array)&&t)return[];const i=t instanceof Array?this.extensions.filter((e=>!t.includes(e.name))):this.extensions;return[...i.filter((e=>["extension"].includes(e.type))).filter((e=>e.pasteRules)).map((t=>t.pasteRules({schema:e}))),...i.filter((e=>["node","mark"].includes(e.type))).filter((e=>e.pasteRules)).map((t=>t.pasteRules({type:e[`${t.type}s`][t.name],schema:e})))].reduce(((e,t)=>[...e,...t]),[])}commands({schema:e,view:t}){return this.extensions.filter((e=>e.commands)).reduce(((i,n)=>{const{name:r,type:s}=n,o={},a=n.commands({schema:e,...["node","mark"].includes(s)?{type:e[`${s}s`][r]}:{}}),l=(e,i)=>!!t.editable&&(t.focus(),e(i)(t.state,t.dispatch,t)),c=(e,t)=>{Array.isArray(t)?o[e]=e=>t.forEach((t=>l(t,e))):"function"==typeof t&&(o[e]=e=>l(t,e))};return"object"==typeof a?Object.entries(a).forEach((([e,t])=>{c(e,t)})):c(r,a),{...i,...o}}),{})}}class pa extends da{constructor(e={}){super(e)}get type(){return"mark"}get view(){return null}get schema(){return null}command(){return()=>{}}}function ma(e=0,t=0,i=0){return Math.min(Math.max(parseInt(e,10),t),i)}class fa extends da{constructor(e={}){super(e)}get type(){return"node"}get view(){return null}get schema(){return null}command(){return()=>{}}}class ga extends fa{get name(){return"doc"}get schema(){return{content:"block+"}}}class va extends fa{get name(){return"paragraph"}get schema(){return{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p"}],toDOM:()=>["p",0]}}commands({type:e}){return()=>Bo(e)}}class ya extends fa{get name(){return"text"}get schema(){return{group:"inline"}}}class xa extends ha{constructor(e={}){super(),this.defaultOptions={editorProps:{},editable:!0,autoFocus:null,extensions:[],content:"",topNode:"doc",emptyDocument:{type:"doc",content:[{type:"paragraph"}]},useBuiltInExtensions:!0,disableInputRules:!1,disablePasteRules:!1,dropCursor:{},enableDropCursor:!0,enableGapCursor:!0,parseOptions:{},injectCSS:!0,onInit:()=>{},onTransaction:()=>{},onUpdate:()=>{},onFocus:()=>{},onBlur:()=>{},onPaste:()=>{},onDrop:()=>{}},this.events=["init","transaction","update","focus","blur","paste","drop"],this.init(e)}init(e={}){this.setOptions({...this.defaultOptions,...e}),this.focused=!1,this.selection={from:0,to:0},this.element=document.createElement("div"),this.extensions=this.createExtensions(),this.nodes=this.createNodes(),this.marks=this.createMarks(),this.schema=this.createSchema(),this.plugins=this.createPlugins(),this.keymaps=this.createKeymaps(),this.inputRules=this.createInputRules(),this.pasteRules=this.createPasteRules(),this.view=this.createView(),this.commands=this.createCommands(),this.setActiveNodesAndMarks(),this.options.injectCSS&&function(e){{const e=document.createElement("style");e.type="text/css",e.textContent='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n';const{head:t}=document,{firstChild:i}=t;i?t.insertBefore(e,i):t.appendChild(e)}}(),null!==this.options.autoFocus&&this.focus(this.options.autoFocus),this.events.forEach((e=>{var t;this.on(e,this.options[(t=`on ${e}`,t.replace(/(?:^\w|[A-Z]|\b\w)/g,((e,t)=>0===t?e.toLowerCase():e.toUpperCase())).replace(/\s+/g,""))]||(()=>{}))})),this.emit("init",{view:this.view,state:this.state}),this.extensions.view=this.view}setOptions(e){this.options={...this.options,...e},this.view&&this.state&&this.view.updateState(this.state)}get builtInExtensions(){return this.options.useBuiltInExtensions?[new ga,new ya,new va]:[]}get state(){return this.view?this.view.state:null}createExtensions(){return new ua([...this.builtInExtensions,...this.options.extensions],this)}createPlugins(){return this.extensions.plugins}createKeymaps(){return this.extensions.keymaps({schema:this.schema})}createInputRules(){return this.extensions.inputRules({schema:this.schema,excludedExtensions:this.options.disableInputRules})}createPasteRules(){return this.extensions.pasteRules({schema:this.schema,excludedExtensions:this.options.disablePasteRules})}createCommands(){return this.extensions.commands({schema:this.schema,view:this.view})}createNodes(){return this.extensions.nodes}createMarks(){return this.extensions.marks}createSchema(){return new qt({topNode:this.options.topNode,nodes:this.nodes,marks:this.marks})}createState(){return an.create({schema:this.schema,doc:this.createDocument(this.options.content),plugins:[...this.plugins,(t={rules:this.inputRules},i=t.rules,n=new dn({state:{init:function(){return null},apply:function(e,t){return e.getMeta(this)||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:function(e,t,r,s){return qo(e,t,r,s,i,n)},handleDOMEvents:{compositionend:function(e){setTimeout((function(){var t=e.state.selection.$cursor;t&&qo(e,t.pos,t.pos,"",i,n)}))}}},isInputRules:!0}),n),...this.pasteRules,...this.keymaps,bo({Backspace:Wo}),bo(Uo),...this.options.enableDropCursor?[(e=this.options.dropCursor,void 0===e&&(e={}),new dn({view:function(t){return new so(t,e)}}))]:[],...this.options.enableGapCursor?[new dn({props:{decorations:Ao,createSelectionBetween:function(e,t,i){if(t.pos==i.pos&&Co.valid(i))return new Co(i)},handleClick:Io,handleKeyDown:ko}})]:[],new dn({key:new mn("editable"),props:{editable:()=>this.options.editable}}),new dn({props:{attributes:{tabindex:0},handleDOMEvents:{focus:(e,t)=>{this.focused=!0,this.emit("focus",{event:t,state:e.state,view:e});const i=this.state.tr.setMeta("focused",!0);this.view.dispatch(i)},blur:(e,t)=>{this.focused=!1,this.emit("blur",{event:t,state:e.state,view:e});const i=this.state.tr.setMeta("focused",!1);this.view.dispatch(i)}}}}),new dn({props:this.options.editorProps})]});var e,t,i,n}createDocument(e,t=this.options.parseOptions){if(null===e)return this.schema.nodeFromJSON(this.options.emptyDocument);if("object"==typeof e)try{return this.schema.nodeFromJSON(e)}catch(t){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",t),this.schema.nodeFromJSON(this.options.emptyDocument)}if("string"==typeof e){const i=`<div>${e}</div>`,n=(new window.DOMParser).parseFromString(i,"text/html").body.firstElementChild;return Vt.fromSchema(this.schema).parse(n,t)}return!1}createView(){return new Qs(this.element,{state:this.createState(),handlePaste:(...e)=>{this.emit("paste",...e)},handleDrop:(...e)=>{this.emit("drop",...e)},dispatchTransaction:this.dispatchTransaction.bind(this)})}setParentComponent(e=null){e&&this.view.setProps({nodeViews:this.initNodeViews({parent:e,extensions:[...this.builtInExtensions,...this.options.extensions]})})}initNodeViews({parent:e,extensions:t}){return t.filter((e=>["node","mark"].includes(e.type))).filter((e=>e.view)).reduce(((t,i)=>({...t,[i.name]:(t,n,r,s)=>{const o=i.view;return new ca(o,{editor:this,extension:i,parent:e,node:t,view:n,getPos:r,decorations:s})}})),{})}dispatchTransaction(e){const t=this.state.apply(e);this.view.updateState(t),this.selection={from:this.state.selection.from,to:this.state.selection.to},this.setActiveNodesAndMarks(),this.emit("transaction",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emitUpdate(e)}emitUpdate(e){this.emit("update",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:e})}resolveSelection(e=null){if(this.selection&&null===e)return this.selection;if("start"===e||!0===e)return{from:0,to:0};if("end"===e){const{doc:e}=this.state;return{from:e.content.size,to:e.content.size}}return{from:e,to:e}}focus(e=null){if(this.view.focused&&null===e||!1===e)return;const{from:t,to:i}=this.resolveSelection(e);this.setSelection(t,i),setTimeout((()=>this.view.focus()),10)}setSelection(e=0,t=0){const{doc:i,tr:n}=this.state,r=ma(e,0,i.content.size),s=ma(t,0,i.content.size),o=Vi.create(i,r,s),a=n.setSelection(o);this.view.dispatch(a)}blur(){this.view.dom.blur()}getSchemaJSON(){return JSON.parse(JSON.stringify({nodes:this.extensions.nodes,marks:this.extensions.marks}))}getHTML(){const e=document.createElement("div"),t=ri.fromSchema(this.schema).serializeFragment(this.state.doc.content);return e.appendChild(t),e.innerHTML}getJSON(){return this.state.doc.toJSON()}setContent(e={},t=!1,i){const{doc:n,tr:r}=this.state,s=this.createDocument(e,i),o=Vi.create(n,0,n.content.size),a=r.setSelection(o).replaceSelectionWith(s,!1).setMeta("preventUpdate",!t);this.view.dispatch(a)}clearContent(e=!1){this.setContent(this.options.emptyDocument,e)}setActiveNodesAndMarks(){this.activeMarks=Object.entries(this.schema.marks).reduce(((e,[t,i])=>({...e,[t]:(e={})=>function(e,t){const{from:i,$from:n,to:r,empty:s}=e.selection;return s?!!t.isInSet(e.storedMarks||n.marks()):!!e.doc.rangeHasMark(i,r,t)}(this.state,i)})),{}),this.activeMarkAttrs=Object.entries(this.schema.marks).reduce(((e,[t,i])=>({...e,[t]:Jo(this.state,i)})),{}),this.activeNodes=Object.entries(this.schema.nodes).reduce(((e,[t,i])=>({...e,[t]:(e={})=>Xo(this.state,i,e)})),{})}getMarkAttrs(e=null){return this.activeMarkAttrs[e]}getNodeAttrs(e=null){return{...Qo(this.state,this.schema.nodes[e])}}get isActive(){return Object.entries({...this.activeMarks,...this.activeNodes}).reduce(((e,[t,i])=>({...e,[t]:(e={})=>i(e)})),{})}registerPlugin(e=null,t){const i="function"==typeof t?t(e,this.state.plugins):[e,...this.state.plugins],n=this.state.reconfigure({plugins:i});this.view.updateState(n)}unregisterPlugin(e=null){if(!e||!this.view.docView)return;const t=this.state.reconfigure({plugins:this.state.plugins.filter((t=>!t.key.startsWith(`${e}$`)))});this.view.updateState(t)}destroy(){this.view&&this.view.destroy()}}var ba={props:{editor:{default:null,type:Object}},watch:{editor:{immediate:!0,handler(e){e&&e.element&&this.$nextTick((()=>{this.$el.appendChild(e.element.firstChild),e.setParentComponent(this)}))}}},render:e=>e("div"),beforeDestroy(){this.editor.element=this.$el}};class wa{constructor({options:e}){this.options=e,this.preventHide=!1,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.blurHandler=()=>{this.preventHide?this.preventHide=!1:this.options.editor.emit("menubar:focusUpdate",!1)},this.options.editor.on("blur",this.blurHandler)}handleClick(){this.preventHide=!0}destroy(){this.options.element.removeEventListener("mousedown",this.mousedownHandler),this.options.editor.off("blur",this.blurHandler)}}var Ca,Pa,ka={props:{editor:{default:null,type:Object}},data:()=>({focused:!1}),watch:{editor:{immediate:!0,handler(e){e&&this.$nextTick((()=>{var t;e.registerPlugin((t={editor:e,element:this.$el},new dn({key:new mn("menu_bar"),view:e=>new wa({editorView:e,options:t})}))),this.focused=e.focused,e.on("focus",(()=>{this.focused=!0})),e.on("menubar:focusUpdate",(e=>{this.focused=e}))}))}}},render(){return this.editor?this.$scopedSlots.default({focused:this.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor),getNodeAttrs:this.editor.getNodeAttrs.bind(this.editor)}):null}};if(Boolean,i(6470),"undefined"!=typeof WeakMap){var Sa=new WeakMap;Ca=function(e){return Sa.get(e)},Pa=function(e,t){return Sa.set(e,t),t}}else{var Ia=[],Aa=0;Ca=function(e){for(var t=0;t<Ia.length;t+=2)if(Ia[t]==e)return Ia[t+1]},Pa=function(e,t){return 10==Aa&&(Aa=0),Ia[Aa++]=e,Ia[Aa++]=t}}var _a=function(e,t,i,n){this.left=e,this.top=t,this.right=i,this.bottom=n},Ea=function(e,t,i,n){this.width=e,this.height=t,this.map=i,this.problems=n};function Ta(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],i=0;i<e.colspan;i++)t.push(0);return t}function Ma(e){var t=e.cached.tableNodeTypes;if(!t)for(var i in t=e.cached.tableNodeTypes={},e.nodes){var n=e.nodes[i],r=n.spec.tableRole;r&&(t[r]=n)}return t}function $a(e){for(var t=e.selection.$head,i=t.depth;i>0;i--)if("row"==t.node(i).type.spec.tableRole)return!0;return!1}function Oa(e){return"row"==e.parent.type.spec.tableRole&&e.nodeAfter}function Da(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function Ba(e,t,i){var n=e.start(-1),r=Ea.get(e.node(-1)).nextCell(e.pos-n,t,i);return null==r?null:e.node(0).resolve(n+r)}function La(e,t,i){var n={};for(var r in e)n[r]=e[r];return n[t]=i,n}function Ra(e,t,i){void 0===i&&(i=1);var n=La(e,"colspan",e.colspan-i);return n.colwidth&&(n.colwidth=n.colwidth.slice(),n.colwidth.splice(t,i),n.colwidth.some((function(e){return e>0}))||(n.colwidth=null)),n}Ea.prototype.findCell=function(e){for(var t=0;t<this.map.length;t++){var i=this.map[t];if(i==e){for(var n=t%this.width,r=t/this.width|0,s=n+1,o=r+1,a=1;s<this.width&&this.map[t+a]==i;a++)s++;for(var l=1;o<this.height&&this.map[t+this.width*l]==i;l++)o++;return new _a(n,r,s,o)}}throw new RangeError("No cell with offset "+e+" found")},Ea.prototype.colCount=function(e){for(var t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset "+e+" found")},Ea.prototype.nextCell=function(e,t,i){var n=this.findCell(e),r=n.left,s=n.right,o=n.top,a=n.bottom;return"horiz"==t?(i<0?0==r:s==this.width)?null:this.map[o*this.width+(i<0?r-1:s)]:(i<0?0==o:a==this.height)?null:this.map[r+this.width*(i<0?o-1:a)]},Ea.prototype.rectBetween=function(e,t){var i=this.findCell(e),n=i.left,r=i.right,s=i.top,o=i.bottom,a=this.findCell(t),l=a.left,c=a.right,h=a.top,d=a.bottom;return new _a(Math.min(n,l),Math.min(s,h),Math.max(r,c),Math.max(o,d))},Ea.prototype.cellsInRect=function(e){for(var t=[],i={},n=e.top;n<e.bottom;n++)for(var r=e.left;r<e.right;r++){var s=n*this.width+r,o=this.map[s];i[o]||(i[o]=!0,r==e.left&&r&&this.map[s-1]==o||n==e.top&&n&&this.map[s-this.width]==o||t.push(o))}return t},Ea.prototype.positionAt=function(e,t,i){for(var n=0,r=0;;n++){var s=r+i.child(n).nodeSize;if(n==e){for(var o=t+e*this.width,a=(e+1)*this.width;o<a&&this.map[o]<r;)o++;return o==a?s-1:this.map[o]}r=s}},Ea.get=function(e){return Ca(e)||Pa(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);for(var t=function(e){for(var t=-1,i=!1,n=0;n<e.childCount;n++){var r=e.child(n),s=0;if(i)for(var o=0;o<n;o++)for(var a=e.child(o),l=0;l<a.childCount;l++){var c=a.child(l);o+c.attrs.rowspan>n&&(s+=c.attrs.colspan)}for(var h=0;h<r.childCount;h++){var d=r.child(h);s+=d.attrs.colspan,d.attrs.rowspan>1&&(i=!0)}-1==t?t=s:t!=s&&(t=Math.max(t,s))}return t}(e),i=e.childCount,n=[],r=0,s=null,o=[],a=0,l=t*i;a<l;a++)n[a]=0;for(var c=0,h=0;c<i;c++){var d=e.child(c);h++;for(var u=0;;u++){for(;r<n.length&&0!=n[r];)r++;if(u==d.childCount)break;for(var p=d.child(u),m=p.attrs,f=m.colspan,g=m.rowspan,v=m.colwidth,y=0;y<g;y++){if(y+c>=i){(s||(s=[])).push({type:"overlong_rowspan",pos:h,n:g-y});break}for(var x=r+y*t,b=0;b<f;b++){0==n[x+b]?n[x+b]=h:(s||(s=[])).push({type:"collision",row:c,pos:h,n:f-b});var w=v&&v[b];if(w){var C=(x+b)%t*2,P=o[C];null==P||P!=w&&1==o[C+1]?(o[C]=w,o[C+1]=1):P==w&&o[C+1]++}}}r+=f,h+=p.nodeSize}for(var k=(c+1)*t,S=0;r<k;)0==n[r++]&&S++;S&&(s||(s=[])).push({type:"missing",row:c,n:S}),h++}for(var I=new Ea(t,i,n,s),A=!1,_=0;!A&&_<o.length;_+=2)null!=o[_]&&o[_+1]<i&&(A=!0);return A&&function(e,t,i){e.problems||(e.problems=[]);for(var n=0,r={};n<e.map.length;n++){var s=e.map[n];if(!r[s]){r[s]=!0;for(var o=i.nodeAt(s),a=null,l=0;l<o.attrs.colspan;l++){var c=t[(n+l)%e.width*2];null==c||o.attrs.colwidth&&o.attrs.colwidth[l]==c||((a||(a=Ta(o.attrs)))[l]=c)}a&&e.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}}(I,o,e),I}(e))},new mn("selectingCells");var Na=function(e){function t(t,i){void 0===i&&(i=t);var n=t.node(-1),r=Ea.get(n),s=t.start(-1),o=r.rectBetween(t.pos-s,i.pos-s),a=t.node(0),l=r.cellsInRect(o).filter((function(e){return e!=i.pos-s}));l.unshift(i.pos-s);var c=l.map((function(e){var t=n.nodeAt(e),i=e+s+1;return new Wi(a.resolve(i),a.resolve(i+t.content.size))}));e.call(this,c[0].$from,c[0].$to,c),this.$anchorCell=t,this.$headCell=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(e,i){var n=e.resolve(i.map(this.$anchorCell.pos)),r=e.resolve(i.map(this.$headCell.pos));if(Oa(n)&&Oa(r)&&Da(n,r)){var s=this.$anchorCell.node(-1)!=n.node(-1);return s&&this.isRowSelection()?t.rowSelection(n,r):s&&this.isColSelection()?t.colSelection(n,r):new t(n,r)}return Vi.between(n,r)},t.prototype.content=function(){for(var e=this.$anchorCell.node(-1),t=Ea.get(e),i=this.$anchorCell.start(-1),n=t.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i),r={},s=[],o=n.top;o<n.bottom;o++){for(var a=[],l=o*t.width+n.left,c=n.left;c<n.right;c++,l++){var h=t.map[l];if(!r[h]){r[h]=!0;var d=t.findCell(h),u=e.nodeAt(h),p=n.left-d.left,m=d.right-n.right;if(p>0||m>0){var f=u.attrs;p>0&&(f=Ra(f,0,p)),m>0&&(f=Ra(f,f.colspan-m,m)),u=d.left<n.left?u.type.createAndFill(f):u.type.create(f,u.content)}if(d.top<n.top||d.bottom>n.bottom){var g=La(u.attrs,"rowspan",Math.min(d.bottom,n.bottom)-Math.max(d.top,n.top));u=d.top<n.top?u.type.createAndFill(g):u.type.create(g,u.content)}a.push(u)}}s.push(e.child(o).copy(Ge.from(a)))}var v=this.isColSelection()&&this.isRowSelection()?e:s;return new tt(Ge.from(v),1,1)},t.prototype.replace=function(t,i){void 0===i&&(i=tt.empty);for(var n=t.steps.length,r=this.ranges,s=0;s<r.length;s++){var o=r[s],a=o.$from,l=o.$to,c=t.mapping.slice(n);t.replace(c.map(a.pos),c.map(l.pos),s?tt.empty:i)}var h=e.findFrom(t.doc.resolve(t.mapping.slice(n).map(this.to)),-1);h&&t.setSelection(h)},t.prototype.replaceWith=function(e,t){this.replace(e,new tt(Ge.from(t),0,0))},t.prototype.forEachCell=function(e){for(var t=this.$anchorCell.node(-1),i=Ea.get(t),n=this.$anchorCell.start(-1),r=i.cellsInRect(i.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n)),s=0;s<r.length;s++)e(t.nodeAt(r[s]),n+r[s])},t.prototype.isColSelection=function(){var e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;var i=e+this.$anchorCell.nodeAfter.attrs.rowspan,n=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(i,n)==this.$headCell.node(-1).childCount},t.colSelection=function(e,i){void 0===i&&(i=e);var n=Ea.get(e.node(-1)),r=e.start(-1),s=n.findCell(e.pos-r),o=n.findCell(i.pos-r),a=e.node(0);return s.top<=o.top?(s.top>0&&(e=a.resolve(r+n.map[s.left])),o.bottom<n.height&&(i=a.resolve(r+n.map[n.width*(n.height-1)+o.right-1]))):(o.top>0&&(i=a.resolve(r+n.map[o.left])),s.bottom<n.height&&(e=a.resolve(r+n.map[n.width*(n.height-1)+s.right-1]))),new t(e,i)},t.prototype.isRowSelection=function(){var e=Ea.get(this.$anchorCell.node(-1)),t=this.$anchorCell.start(-1),i=e.colCount(this.$anchorCell.pos-t),n=e.colCount(this.$headCell.pos-t);if(Math.min(i,n)>0)return!1;var r=i+this.$anchorCell.nodeAfter.attrs.colspan,s=n+this.$headCell.nodeAfter.attrs.colspan;return Math.max(r,s)==e.width},t.prototype.eq=function(e){return e instanceof t&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos},t.rowSelection=function(e,i){void 0===i&&(i=e);var n=Ea.get(e.node(-1)),r=e.start(-1),s=n.findCell(e.pos-r),o=n.findCell(i.pos-r),a=e.node(0);return s.left<=o.left?(s.left>0&&(e=a.resolve(r+n.map[s.top*n.width])),o.right<n.width&&(i=a.resolve(r+n.map[n.width*(o.top+1)-1]))):(o.left>0&&(i=a.resolve(r+n.map[o.top*n.width])),s.right<n.width&&(e=a.resolve(r+n.map[n.width*(s.top+1)-1]))),new t(e,i)},t.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},t.fromJSON=function(e,i){return new t(e.resolve(i.anchor),e.resolve(i.head))},t.create=function(e,i,n){return void 0===n&&(n=i),new t(e.resolve(i),e.resolve(n))},t.prototype.getBookmark=function(){return new Za(this.$anchorCell.pos,this.$headCell.pos)},t}(Hi);Na.prototype.visible=!1,Hi.jsonID("cell",Na);var Za=function(e,t){this.anchor=e,this.head=t};function Fa(e,t,i){return!i.eq(e.selection)&&(t&&t(e.tr.setSelection(i).scrollIntoView()),!0)}function ja(e,t){return function(i,n,r){var s=i.selection;if(s instanceof Na)return Fa(i,n,Hi.near(s.$headCell,t));if("horiz"!=e&&!s.empty)return!1;var o=Ha(r,e,t);if(null==o)return!1;if("horiz"==e)return Fa(i,n,Hi.near(i.doc.resolve(s.head+t),t));var a,l=i.doc.resolve(o),c=Ba(l,e,t);return a=c?Hi.near(c,1):t<0?Hi.near(i.doc.resolve(l.before(-1)),-1):Hi.near(i.doc.resolve(l.after(-1)),1),Fa(i,n,a)}}function za(e,t){return function(i,n,r){var s=i.selection;if(!(s instanceof Na)){var o=Ha(r,e,t);if(null==o)return!1;s=new Na(i.doc.resolve(o))}var a=Ba(s.$headCell,e,t);return!!a&&Fa(i,n,new Na(s.$anchorCell,a))}}function Ua(e,t){var i=e.selection;if(!(i instanceof Na))return!1;if(t){var n=e.tr,r=Ma(e.schema).cell.createAndFill().content;i.forEachCell((function(e,t){e.content.eq(r)||n.replace(n.mapping.map(t+1),n.mapping.map(t+e.nodeSize-1),new tt(r,0,0))})),n.docChanged&&t(n)}return!0}function Ha(e,t,i){if(!(e.state.selection instanceof Vi))return null;for(var n=e.state.selection.$head,r=n.depth-1;r>=0;r--){var s=n.node(r);if((i<0?n.index(r):n.indexAfter(r))!=(i<0?0:s.childCount))return null;if("cell"==s.type.spec.tableRole||"header_cell"==s.type.spec.tableRole){var o=n.before(r),a="vert"==t?i>0?"down":"up":i>0?"right":"left";return e.endOfTextblock(a)?o:null}}return null}function qa(e){var t,i=e.selection,n=function(e){var t=e.selection;return t.$anchorCell?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&"cell"==t.node.type.spec.tableRole?t.$anchor:function(e){for(var t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}(t.$head)||function(e){for(var t=e.nodeAfter,i=e.pos;t;t=t.firstChild,i++){var n=t.type.spec.tableRole;if("cell"==n||"header_cell"==n)return e.doc.resolve(i)}for(var r=e.nodeBefore,s=e.pos;r;r=r.lastChild,s--){var o=r.type.spec.tableRole;if("cell"==o||"header_cell"==o)return e.doc.resolve(s-r.nodeSize)}}(t.$head)}(e),r=n.node(-1),s=n.start(-1),o=Ea.get(r);return(t=i instanceof Na?o.rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s):o.findCell(n.pos-s)).tableStart=s,t.map=o,t.table=r,t}function Wa(e,t,i){for(var n=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1}),r=0;r<n.length;r++){var s=t.table.nodeAt(n[r]);if(s&&s.type!==i.header_cell)return!1}return!0}function Va(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(e){return function(t,i){if(!$a(t))return!1;if(i){for(var n=Ma(t.schema),r=qa(t),s=t.tr,o=r.map.cellsInRect("column"==e?new _a(r.left,0,r.right,r.map.height):"row"==e?new _a(0,r.top,r.map.width,r.bottom):r),a=o.map((function(e){return r.table.nodeAt(e)})),l=0;l<o.length;l++)a[l].type==n.header_cell&&s.setNodeMarkup(r.tableStart+o[l],n.cell,a[l].attrs);if(0==s.steps.length)for(var c=0;c<o.length;c++)s.setNodeMarkup(r.tableStart+o[c],n.header_cell,a[c].attrs);i(s)}return!0}}(e):function(t,i){if(!$a(t))return!1;if(i){var n=Ma(t.schema),r=qa(t),s=t.tr,o=Wa("row",r,n),a=Wa("column",r,n),l=("column"===e?o:"row"===e&&a)?1:0,c="column"==e?new _a(0,l,1,r.map.height):"row"==e?new _a(l,0,r.map.width,1):r,h="column"==e?a?n.cell:n.header_cell:"row"==e?o?n.cell:n.header_cell:n.cell;r.map.cellsInRect(c).forEach((function(e){var t=e+r.tableStart,i=s.doc.nodeAt(t);i&&s.setNodeMarkup(t,h,i.attrs)})),i(s)}return!0}}Za.prototype.map=function(e){return new Za(e.map(this.anchor),e.map(this.head))},Za.prototype.resolve=function(e){var t=e.resolve(this.anchor),i=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==i.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&i.index()<i.parent.childCount&&Da(t,i)?new Na(t,i):Hi.near(i,1)},wo({ArrowLeft:ja("horiz",-1),ArrowRight:ja("horiz",1),ArrowUp:ja("vert",-1),ArrowDown:ja("vert",1),"Shift-ArrowLeft":za("horiz",-1),"Shift-ArrowRight":za("horiz",1),"Shift-ArrowUp":za("vert",-1),"Shift-ArrowDown":za("vert",1),Backspace:Ua,"Mod-Backspace":Ua,Delete:Ua,"Mod-Delete":Ua}),new mn("fix-tables"),Va("row",{useDeprecatedLogic:!0}),Va("column",{useDeprecatedLogic:!0}),Va("cell",{useDeprecatedLogic:!0});var Ga=function(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Ka(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function Ka(e,t,i,n,r,s){for(var o=0,a=!0,l=t.firstChild,c=e.firstChild,h=0,d=0;h<c.childCount;h++)for(var u=c.child(h).attrs,p=u.colspan,m=u.colwidth,f=0;f<p;f++,d++){var g=r==d?s:m&&m[f],v=g?g+"px":"";o+=g||n,g||(a=!1),l?(l.style.width!=v&&(l.style.width=v),l=l.nextSibling):t.appendChild(document.createElement("col")).style.width=v}for(;l;){var y=l.nextSibling;l.parentNode.removeChild(l),l=y}a?(i.style.width=o+"px",i.style.minWidth=""):(i.style.width="",i.style.minWidth=o+"px")}Ga.prototype.update=function(e){return e.type==this.node.type&&(this.node=e,Ka(e,this.colgroup,this.table,this.cellMinWidth),!0)},Ga.prototype.ignoreMutation=function(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))};var Ja=new mn("tableColumnResizing"),Ya=function(e,t){this.activeHandle=e,this.dragging=t};Ya.prototype.apply=function(e){var t=this,i=e.getMeta(Ja);if(i&&null!=i.setHandle)return new Ya(i.setHandle,null);if(i&&void 0!==i.setDragging)return new Ya(t.activeHandle,i.setDragging);if(t.activeHandle>-1&&e.docChanged){var n=e.mapping.map(t.activeHandle,-1);Oa(e.doc.resolve(n))||(n=null),t=new Ya(n,t.dragging)}return t},new mn("collab");var Qa=200,Xa=function(){};Xa.prototype.append=function(e){return e.length?(e=Xa.from(e),!this.length&&e||e.length<Qa&&this.leafAppend(e)||this.length<Qa&&e.leafPrepend(this)||this.appendInner(e)):this},Xa.prototype.prepend=function(e){return e.length?Xa.from(e).append(this):this},Xa.prototype.appendInner=function(e){return new tl(this,e)},Xa.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?Xa.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},Xa.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},Xa.prototype.forEach=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=this.length),t<=i?this.forEachInner(e,t,i,0):this.forEachInvertedInner(e,t,i,0)},Xa.prototype.map=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=this.length);var n=[];return this.forEach((function(t,i){return n.push(e(t,i))}),t,i),n},Xa.from=function(e){return e instanceof Xa?e:e&&e.length?new el(e):Xa.empty};var el=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,i){return 0==e&&i==this.length?this:new t(this.values.slice(e,i))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,i,n){for(var r=t;r<i;r++)if(!1===e(this.values[r],n+r))return!1},t.prototype.forEachInvertedInner=function(e,t,i,n){for(var r=t-1;r>=i;r--)if(!1===e(this.values[r],n+r))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=Qa)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=Qa)return new t(e.flatten().concat(this.values))},i.length.get=function(){return this.values.length},i.depth.get=function(){return 0},Object.defineProperties(t.prototype,i),t}(Xa);Xa.empty=new el([]);var tl=function(e){function t(t,i){e.call(this),this.left=t,this.right=i,this.length=t.length+i.length,this.depth=Math.max(t.depth,i.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,i,n){var r=this.left.length;return!(t<r&&!1===this.left.forEachInner(e,t,Math.min(i,r),n))&&!(i>r&&!1===this.right.forEachInner(e,Math.max(t-r,0),Math.min(this.length,i)-r,n+r))&&void 0},t.prototype.forEachInvertedInner=function(e,t,i,n){var r=this.left.length;return!(t>r&&!1===this.right.forEachInvertedInner(e,t-r,Math.max(i,r)-r,n+r))&&!(i<r&&!1===this.left.forEachInvertedInner(e,Math.min(t,r),i,n))&&void 0},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var i=this.left.length;return t<=i?this.left.slice(e,t):e>=i?this.right.slice(e-i,t-i):this.left.slice(e,i).append(this.right.slice(0,t-i))},t.prototype.leafAppend=function(e){var i=this.right.leafAppend(e);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(e){var i=this.left.leafPrepend(e);if(i)return new t(i,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(Xa);const il=Xa;var nl=function(e,t){this.items=e,this.eventCount=t};nl.prototype.popEvent=function(e,t){var i=this;if(0==this.eventCount)return null;for(var n,r,s=this.items.length;;s--)if(this.items.get(s-1).selection){--s;break}t&&(n=this.remapping(s,this.items.length),r=n.maps.length);var o,a,l=e.tr,c=[],h=[];return this.items.forEach((function(e,t){if(!e.step)return n||(n=i.remapping(s,t+1),r=n.maps.length),r--,void h.push(e);if(n){h.push(new rl(e.map));var d,u=e.step.map(n.slice(r));u&&l.maybeStep(u).doc&&(d=l.mapping.maps[l.mapping.maps.length-1],c.push(new rl(d,null,null,c.length+h.length))),r--,d&&n.appendMap(d,r)}else l.maybeStep(e.step);return e.selection?(o=n?e.selection.map(n.slice(r)):e.selection,a=new nl(i.items.slice(0,s).append(h.reverse().concat(c)),i.eventCount-1),!1):void 0}),this.items.length,0),{remaining:a,transform:l,selection:o}},nl.prototype.addTransform=function(e,t,i,n){for(var r=[],s=this.eventCount,o=this.items,a=!n&&o.length?o.get(o.length-1):null,l=0;l<e.steps.length;l++){var c,h=e.steps[l].invert(e.docs[l]),d=new rl(e.mapping.maps[l],h,t);(c=a&&a.merge(d))&&(d=c,l?r.pop():o=o.slice(0,o.length-1)),r.push(d),t&&(s++,t=null),n||(a=d)}var u,p,m,f=s-i.depth;return f>ol&&(p=f,(u=o).forEach((function(e,t){if(e.selection&&0==p--)return m=t,!1})),o=u.slice(m),s-=f),new nl(o.append(r),s)},nl.prototype.remapping=function(e,t){var i=new ui;return this.items.forEach((function(t,n){var r=null!=t.mirrorOffset&&n-t.mirrorOffset>=e?i.maps.length-t.mirrorOffset:null;i.appendMap(t.map,r)}),e,t),i},nl.prototype.addMaps=function(e){return 0==this.eventCount?this:new nl(this.items.append(e.map((function(e){return new rl(e)}))),this.eventCount)},nl.prototype.rebased=function(e,t){if(!this.eventCount)return this;var i=[],n=Math.max(0,this.items.length-t),r=e.mapping,s=e.steps.length,o=this.eventCount;this.items.forEach((function(e){e.selection&&o--}),n);var a=t;this.items.forEach((function(t){var n=r.getMirror(--a);if(null!=n){s=Math.min(s,n);var l=r.maps[n];if(t.step){var c=e.steps[n].invert(e.docs[n]),h=t.selection&&t.selection.map(r.slice(a+1,n));h&&o++,i.push(new rl(l,c,h))}else i.push(new rl(l))}}),n);for(var l=[],c=t;c<s;c++)l.push(new rl(r.maps[c]));var h=this.items.slice(0,n).append(l).append(i),d=new nl(h,o);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-i.length)),d},nl.prototype.emptyItemCount=function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e},nl.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),i=t.maps.length,n=[],r=0;return this.items.forEach((function(s,o){if(o>=e)n.push(s),s.selection&&r++;else if(s.step){var a=s.step.map(t.slice(i)),l=a&&a.getMap();if(i--,l&&t.appendMap(l,i),a){var c=s.selection&&s.selection.map(t.slice(i));c&&r++;var h,d=new rl(l.invert(),a,c),u=n.length-1;(h=n.length&&n[u].merge(d))?n[u]=h:n.push(d)}}else s.map&&i--}),this.items.length,0),new nl(il.from(n.reverse()),r)},nl.empty=new nl(il.empty,0);var rl=function(e,t,i,n){this.map=e,this.step=t,this.selection=i,this.mirrorOffset=n};rl.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new rl(t.getMap().invert(),t,this.selection)}};var sl=function(e,t,i,n){this.done=e,this.undone=t,this.prevRanges=i,this.prevTime=n},ol=20;function al(e){var t=[];return e.forEach((function(e,i,n,r){return t.push(n,r)})),t}function ll(e,t){if(!e)return null;for(var i=[],n=0;n<e.length;n+=2){var r=t.map(e[n],1),s=t.map(e[n+1],-1);r<=s&&i.push(r,s)}return i}function cl(e,t,i,n){var r=ul(t),s=pl.get(t).spec.config,o=(n?e.undone:e.done).popEvent(t,r);if(o){var a=o.selection.resolve(o.transform.doc),l=(n?e.done:e.undone).addTransform(o.transform,t.selection.getBookmark(),s,r),c=new sl(n?l:o.remaining,n?o.remaining:l,null,0);i(o.transform.setSelection(a).setMeta(pl,{redo:n,historyState:c}).scrollIntoView())}}var hl=!1,dl=null;function ul(e){var t=e.plugins;if(dl!=t){hl=!1,dl=t;for(var i=0;i<t.length;i++)if(t[i].spec.historyPreserveItems){hl=!0;break}}return hl}var pl=new mn("history"),ml=new mn("closeHistory");function fl(e,t){var i=pl.getState(e);return!(!i||0==i.done.eventCount||(t&&cl(i,e,t,!1),0))}function gl(e,t){var i=pl.getState(e);return!(!i||0==i.undone.eventCount||(t&&cl(i,e,t,!0),0))}function vl(e){var t=pl.getState(e);return t?t.done.eventCount:0}function yl(e){var t=pl.getState(e);return t?t.undone.eventCount:0}class xl extends fa{get name(){return"blockquote"}get schema(){return{content:"block*",group:"block",defining:!0,draggable:!1,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]}}commands({type:e}){return()=>la(e)}keys({type:e}){return{"Ctrl->":la(e)}}inputRules({type:e}){return[Vo(/^\s*>\s$/,e)]}}class bl extends fa{get name(){return"bullet_list"}get schema(){return{content:"list_item+",group:"block",parseDOM:[{tag:"ul"}],toDOM:()=>["ul",0]}}commands({type:e,schema:t}){return()=>aa(e,t.nodes.list_item)}keys({type:e,schema:t}){return{"Shift-Ctrl-8":aa(e,t.nodes.list_item)}}inputRules({type:e}){return[Vo(/^\s*([-+*])\s$/,e)]}}class wl extends fa{get name(){return"code_block"}get schema(){return{content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]}}commands({type:e,schema:t}){return()=>sa(e,t.nodes.paragraph)}keys({type:e}){return{"Shift-Ctrl-\\":Bo(e)}}inputRules({type:e}){return[Go(/^```$/,e)]}}class Cl extends fa{get name(){return"hard_break"}get schema(){return{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]}}commands({type:e}){return()=>Ro(Oo,((t,i)=>(i(t.tr.replaceSelectionWith(e.create()).scrollIntoView()),!0)))}keys({type:e}){const t=Ro(Oo,((t,i)=>(i(t.tr.replaceSelectionWith(e.create()).scrollIntoView()),!0)));return{"Mod-Enter":t,"Shift-Enter":t}}}class Pl extends fa{get name(){return"heading"}get defaultOptions(){return{levels:[1,2,3,4,5,6]}}get schema(){return{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:this.options.levels.map((e=>({tag:`h${e}`,attrs:{level:e}}))),toDOM:e=>[`h${e.attrs.level}`,0]}}commands({type:e,schema:t}){return i=>sa(e,t.nodes.paragraph,i)}keys({type:e}){return this.options.levels.reduce(((t,i)=>({...t,[`Shift-Ctrl-${i}`]:Bo(e,{level:i})})),{})}inputRules({type:e}){return this.options.levels.map((t=>Go(new RegExp(`^(#{1,${t}})\\s$`),e,(()=>({level:t})))))}}class kl extends fa{get name(){return"list_item"}get schema(){return{content:"paragraph block*",defining:!0,draggable:!1,parseDOM:[{tag:"li"}],toDOM:()=>["li",0]}}keys({type:e}){return{Enter:(t=e,function(e,i){var n=e.selection,r=n.$from,s=n.$to,o=n.node;if(o&&o.isBlock||r.depth<2||!r.sameParent(s))return!1;var a=r.node(-1);if(a.type!=t)return!1;if(0==r.parent.content.size&&r.node(-1).childCount==r.indexAfter(-1)){if(2==r.depth||r.node(-3).type!=t||r.index(-2)!=r.node(-2).childCount-1)return!1;if(i){for(var l=Ge.empty,c=r.index(-1)?1:r.index(-2)?2:3,h=r.depth-c;h>=r.depth-3;h--)l=Ge.from(r.node(h).copy(l));var d=r.indexAfter(-1)<r.node(-2).childCount?1:r.indexAfter(-2)<r.node(-3).childCount?2:3;l=l.append(Ge.from(t.createAndFill()));var u=r.before(r.depth-(c-1)),p=e.tr.replace(u,r.after(-d),new tt(l,4-c,0)),m=-1;p.doc.nodesBetween(u,p.doc.content.size,(function(e,t){if(m>-1)return!1;e.isTextblock&&0==e.content.size&&(m=t+1)})),m>-1&&p.setSelection(e.selection.constructor.near(p.doc.resolve(m))),i(p.scrollIntoView())}return!0}var f=s.pos==r.end()?a.contentMatchAt(0).defaultType:null,g=e.tr.delete(r.pos,s.pos),v=f&&[null,{type:f}];return!!Ai(g.doc,r.pos,2,v)&&(i&&i(g.split(r.pos,2,v).scrollIntoView()),!0)}),Tab:ta(e),"Shift-Tab":ea(e)};var t}}class Sl extends fa{get name(){return"ordered_list"}get schema(){return{attrs:{order:{default:1}},content:"list_item+",group:"block",parseDOM:[{tag:"ol",getAttrs:e=>({order:e.hasAttribute("start")?+e.getAttribute("start"):1})}],toDOM:e=>1===e.attrs.order?["ol",0]:["ol",{start:e.attrs.order},0]}}commands({type:e,schema:t}){return()=>aa(e,t.nodes.list_item)}keys({type:e,schema:t}){return{"Shift-Ctrl-9":aa(e,t.nodes.list_item)}}inputRules({type:e}){return[Vo(/^(\d+)\.\s$/,e,(e=>({order:+e[1]})),((e,t)=>t.childCount+t.attrs.order===+e[1]))]}}!function(e){var t=e.cellAttributes||{},i={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var n in t)i[n]={default:t[n].default}}({tableGroup:"block",cellContent:"block+",cellAttributes:{background:{default:null,getFromDOM:e=>e.style.backgroundColor||null,setDOMAttr(e,t){if(e){const i={style:`${t.style||""}background-color: ${e};`};Object.assign(t,i)}}}}});class Il extends fa{get name(){return"todo_item"}get defaultOptions(){return{nested:!1}}get view(){return{props:["node","updateAttrs","view"],methods:{onChange(){this.updateAttrs({done:!this.node.attrs.done})}},template:'\n        <li :data-type="node.type.name" :data-done="node.attrs.done.toString()" data-drag-handle>\n          <span class="todo-checkbox" contenteditable="false" @click="onChange"></span>\n          <div class="todo-content" ref="content" :contenteditable="view.editable.toString()"></div>\n        </li>\n      '}}get schema(){return{attrs:{done:{default:!1}},draggable:!0,content:this.options.nested?"(paragraph|todo_list)+":"paragraph+",toDOM:e=>{const{done:t}=e.attrs;return["li",{"data-type":this.name,"data-done":t.toString()},["span",{class:"todo-checkbox",contenteditable:"false"}],["div",{class:"todo-content"},0]]},parseDOM:[{priority:51,tag:`[data-type="${this.name}"]`,getAttrs:e=>({done:"true"===e.getAttribute("data-done")})}]}}keys({type:e}){return{Enter:(t=e,function(e,i){const{$from:n,$to:r,node:s}=e.selection;if(s&&s.isBlock||n.depth<2||!n.sameParent(r))return!1;const o=n.node(-1);if(o.type!=t)return!1;if(0==n.parent.content.size){if(2==n.depth||n.node(-3).type!=t||n.index(-2)!=n.node(-2).childCount-1)return!1;if(i){let r=Ge.empty;const s=n.index(-1)>0;for(let e=n.depth-(s?1:2);e>=n.depth-3;e--)r=Ge.from(n.node(e).copy(r));r=r.append(Ge.from(t.createAndFill()));const o=e.tr.replace(n.before(s?null:-1),n.after(-3),new tt(r,s?3:2,2));o.setSelection(e.selection.constructor.near(o.doc.resolve(n.pos+(s?3:2)))),i(o.scrollIntoView())}return!0}const a=r.pos==n.end()?o.contentMatchAt(n.indexAfter(-1)).defaultType:null,l=e.tr.delete(n.pos,r.pos);let c=a&&[{type:t},{type:a}];return c||(c=[{type:t},null]),!!function(e,t,i=1,n){const r=e.resolve(t),s=r.depth-i,o=n&&n[n.length-1]||r.parent;if(s<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!o.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let e=r.depth-1,t=i-2;e>s;e--,t--){const i=r.node(e),s=r.index(e);if(i.type.spec.isolating)return!1;let o=i.content.cutByIndex(s,i.childCount);const a=n&&n[t]||i;if(a!=i&&(o=o.replaceChild(0,a.type.create(a.attrs))),!i.canReplace(s+1,i.childCount))return!1}const a=r.indexAfter(s),l=n&&n[0];return r.node(s).canReplaceWith(a,a,l?l.type:r.node(s+1).type)}(l.doc,n.pos,2,c)&&(i&&i(l.split(n.pos,2,c).scrollIntoView()),!0)}),Tab:this.options.nested?ta(e):()=>{},"Shift-Tab":ea(e)};var t}}class Al extends fa{get name(){return"todo_list"}get schema(){return{group:"block",content:"todo_item+",toDOM:()=>["ul",{"data-type":this.name},0],parseDOM:[{priority:51,tag:`[data-type="${this.name}"]`}]}}commands({type:e,schema:t}){return()=>aa(e,t.nodes.todo_item)}inputRules({type:e}){return[Vo(/^\s*(\[ \])\s$/,e)]}}class _l extends pa{get name(){return"bold"}get schema(){return{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:()=>["strong",0]}}keys({type:e}){return{"Mod-b":Lo(e)}}commands({type:e}){return()=>Lo(e)}inputRules({type:e}){return[ia(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,e)]}pasteRules({type:e}){return[ra(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,e)]}}class El extends pa{get name(){return"code"}get schema(){return{excludes:"_",parseDOM:[{tag:"code"}],toDOM:()=>["code",0]}}keys({type:e}){return{"Mod-`":Lo(e)}}commands({type:e}){return()=>Lo(e)}inputRules({type:e}){return[ia(/(?:`)([^`]+)(?:`)$/,e)]}pasteRules({type:e}){return[ra(/(?:`)([^`]+)(?:`)/g,e)]}}class Tl extends pa{get name(){return"italic"}get schema(){return{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]}}keys({type:e}){return{"Mod-i":Lo(e)}}commands({type:e}){return()=>Lo(e)}inputRules({type:e}){return[ia(/(?:^|[^_])(_([^_]+)_)$/,e),ia(/(?:^|[^*])(\*([^*]+)\*)$/,e)]}pasteRules({type:e}){return[ra(/_([^_]+)_/g,e),ra(/\*([^*]+)\*/g,e)]}}class Ml extends pa{get name(){return"link"}get defaultOptions(){return{openOnClick:!0,target:null}}get schema(){return{attrs:{href:{default:null},target:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:e=>({href:e.getAttribute("href"),target:e.getAttribute("target")})}],toDOM:e=>["a",{...e.attrs,rel:"noopener noreferrer nofollow",target:e.attrs.target||this.options.target},0]}}commands({type:e}){return t=>t.href?function(e,t){return(i,n)=>{const{tr:r,selection:s,doc:o}=i,{ranges:a,empty:l}=s;if(l){const{from:i,to:n}=Yo(s.$from,e);o.rangeHasMark(i,n,e)&&r.removeMark(i,n,e),r.addMark(i,n,e.create(t))}else a.forEach((i=>{const{$to:n,$from:s}=i;o.rangeHasMark(s.pos,n.pos,e)&&r.removeMark(s.pos,n.pos,e),r.addMark(s.pos,n.pos,e.create(t))}));return n(r)}}(e,t):function(e){return(t,i)=>{const{tr:n,selection:r}=t;let{from:s,to:o}=r;const{$from:a,empty:l}=r;if(l){const t=Yo(a,e);s=t.from,o=t.to}return n.removeMark(s,o,e),i(n)}}(e)}pasteRules({type:e}){return[na(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=,()!]*)/gi,e,(e=>({href:e})))]}get plugins(){return this.options.openOnClick?[new dn({props:{handleClick:(e,t,i)=>{const{schema:n}=e.state,r=Jo(e.state,n.marks.link);r.href&&i.target instanceof HTMLAnchorElement&&(i.stopPropagation(),window.open(r.href,r.target))}}})]:[]}}class $l extends pa{get name(){return"strike"}get schema(){return{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:e=>"line-through"===e}],toDOM:()=>["s",0]}}keys({type:e}){return{"Mod-d":Lo(e)}}commands({type:e}){return()=>Lo(e)}inputRules({type:e}){return[ia(/~([^~]+)~$/,e)]}pasteRules({type:e}){return[ra(/~([^~]+)~/g,e)]}}class Ol extends pa{get name(){return"underline"}get schema(){return{parseDOM:[{tag:"u"},{style:"text-decoration",getAttrs:e=>"underline"===e}],toDOM:()=>["u",0]}}keys({type:e}){return{"Mod-u":Lo(e)}}commands({type:e}){return()=>Lo(e)}}class Dl extends da{get name(){return"history"}get defaultOptions(){return{depth:"",newGroupDelay:""}}keys(){return{"Mod-z":fl,"Mod-y":gl,"Shift-Mod-z":gl,"Mod-":fl,"Shift-Mod-":gl}}get plugins(){return[(e={depth:this.options.depth,newGroupDelay:this.options.newGroupDelay},e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new dn({key:pl,state:{init:function(){return new sl(nl.empty,nl.empty,null,0)},apply:function(t,i,n){return function(e,t,i,n){var r,s=i.getMeta(pl);if(s)return s.historyState;i.getMeta(ml)&&(e=new sl(e.done,e.undone,null,0));var o=i.getMeta("appendedTransaction");if(0==i.steps.length)return e;if(o&&o.getMeta(pl))return o.getMeta(pl).redo?new sl(e.done.addTransform(i,null,n,ul(t)),e.undone,al(i.mapping.maps[i.steps.length-1]),e.prevTime):new sl(e.done,e.undone.addTransform(i,null,n,ul(t)),null,e.prevTime);if(!1===i.getMeta("addToHistory")||o&&!1===o.getMeta("addToHistory"))return(r=i.getMeta("rebased"))?new sl(e.done.rebased(i,r),e.undone.rebased(i,r),ll(e.prevRanges,i.mapping),e.prevTime):new sl(e.done.addMaps(i.mapping.maps),e.undone.addMaps(i.mapping.maps),ll(e.prevRanges,i.mapping),e.prevTime);var a=0==e.prevTime||!o&&(e.prevTime<(i.time||0)-n.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var i=!1;return e.mapping.maps[0].forEach((function(e,n){for(var r=0;r<t.length;r+=2)e<=t[r+1]&&n>=t[r]&&(i=!0)})),i}(i,e.prevRanges)),l=o?ll(e.prevRanges,i.mapping):al(i.mapping.maps[i.steps.length-1]);return new sl(e.done.addTransform(i,a?t.selection.getBookmark():null,n,ul(t)),nl.empty,l,i.time)}(i,n,t,e)}},config:e,props:{handleDOMEvents:{beforeinput:function(e,t){var i="historyUndo"==t.inputType?fl(e.state,e.dispatch):"historyRedo"==t.inputType&&gl(e.state,e.dispatch);return i&&t.preventDefault(),i}}}}))];var e}commands(){return{undo:()=>fl,redo:()=>gl,undoDepth:()=>vl,redoDepth:()=>yl}}}const Bl={props:{value:{type:String},id:{type:String},width:{type:String,default:"100%"},height:{type:String,default:"150px"}},components:{Modal:je.Z,EditorContent:ba,EditorMenuBar:ka},beforeMount(){this.editor=new xa({disablePasteRules:!0,disableInputRules:!0,extensions:[new xl,new wl,new Cl,new Pl({levels:[1,2,3]}),new bl,new Sl,new kl,new Il,new Al,new _l,new El,new Tl,new Ml,new $l,new Ol,new Dl],content:this.value,onUpdate:e=>{const t=e.getHTML();this.$emit("changed",t),this.editorLarge.setContent(t,!1)},onFocus:()=>{this.focused=!0},onBlur:()=>{this.focused=!1}}),this.editorLarge=new xa({disablePasteRules:!0,disableInputRules:!0,extensions:[new xl,new wl,new Cl,new Pl({levels:[1,2,3]}),new bl,new Sl,new kl,new Il,new Al,new _l,new El,new Tl,new Ml,new $l,new Ol,new Dl],content:this.value,onUpdate:e=>{const t=e.getHTML();this.$emit("changed",t),this.editor.setContent(t,!1)}})},beforeDestroy(){this.editor.destroy(),this.editorLarge.destroy()},data:()=>({editor:null,focused:!1,enlarged:!1,editorLarge:null,enlargedWidth:window.innerWidth-100,enlargedHeight:window.innerHeight-340,linkModal:{shown:!1,url:"",linkCommand:null}}),methods:{onEditorClick(e){e.target.className.indexOf("editor-content")>=0&&this.editor.view.dom.focus()},onLargeEditorClick(e){e.target.className.indexOf("editor-content")>=0&&this.editorLarge.view.dom.focus()},toggleLink(e,t){this.linkModal.linkCommand=e,t.href&&(this.linkModal.url=t.href.trim()),this.linkModal.shown=!0},onLinkModalSubmit(){const e=this.linkModal.url.trim();e?this.linkModal.linkCommand({href:e}):this.linkModal.linkCommand({href:null}),this.linkModal.shown=!1}},watch:{id(e){this.editorLarge.setContent(this.value),this.editor.setContent(this.value)}}},Ll=(0,Re.Z)(Bl,Ue,[],!1,null,null,null).exports,Rl={components:{Modal:je.Z,RichTextEditor:Ll},props:{name:{type:String,default:""},description:{type:String,default:""}},mounted(){this.$refs.schemeNameInput.focus()},data(){return{schemeName:this.name,schemeDescription:this.description,imageUrl:"",mandatoryFields:{name:{highlight:!1}},errorMessage:null}},methods:{submitNewScheme(){const e=this.schemeName.trim();e?this.$emit("scheme-submitted",{name:e,description:this.schemeDescription,tags:[],items:[]}):(this.mandatoryFields.name.highlight=!0,this.errorMessage="Diagram name should not be empty")}}},Nl=(0,Re.Z)(Rl,ze,[],!1,null,null,null).exports;var Zl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"menu-dropdown",attrs:{id:e.uid}},[i("div",{ref:"menuTitle",staticClass:"menu-dropdown-title"},[e.iconClass?i("span",{staticClass:"toggle-button",on:{click:e.toggleMenu}},[i("i",{class:e.iconClass}),e._v(" "+e._s(e.name))]):i("span",{staticClass:"link",on:{click:e.toggleMenu}},[e._v(e._s(e.name)+" "),i("i",{staticClass:"fas fa-caret-down"})])]),e._v(" "),e.menuDisplayed?i("ul",{ref:"menuList",style:{top:e.y+"px",left:e.x+"px","max-height":e.maxHeight+"px"}},e._l(e.options,(function(t){return i("li",{class:{disabled:t.disabled}},[t.link?i("a",{attrs:{href:t.link}},[e._v(e._s(t.name))]):i("span",{on:{click:function(i){return e.onOptionClicked(t)}}},[t.iconClass?i("i",{class:t.iconClass}):e._e(),e._v(" "+e._s(t.name))])])})),0):e._e()])};Zl._withStripped=!0;var Fl=i(4670),jl=i.n(Fl);const zl={props:["name","iconClass","options"],mounted(){document.body.addEventListener("click",this.onBodyClick)},beforeDestroy(){document.body.removeEventListener("click",this.onBodyClick)},data:()=>({uid:`menu-dropdown-${jl().generate()}`,menuDisplayed:!1,x:0,y:0,maxHeight:window.innerHeight-30}),methods:{toggleMenu(){this.maxHeight=window.innerHeight-this.$refs.menuTitle.getBoundingClientRect().bottom-10,this.menuDisplayed?this.menuDisplayed=!1:(this.menuDisplayed=!0,this.$nextTick((()=>this.readjustDropdownOnScreen())))},readjustDropdownOnScreen(){const e=this.$refs.menuTitle.getBoundingClientRect(),t=this.$refs.menuList.getBoundingClientRect(),i=t.width,n=t.height;let r=Math.max(0,e.x),s=Math.max(0,e.bottom),o=r+i,a=s+n+this.searchTextfieldHeight;o>window.innerWidth?this.x=r+window.innerWidth-o:this.x=r,a>window.innerHeight?this.y=e.top-n:this.y=s},onOptionClicked(e){e.disabled||(this.menuDisplayed=!1,e.event&&this.$emit(e.event),e.callback&&e.callback())},onBodyClick(e){if(!0===this.menuDisplayed){if(e.srcElement&&e.srcElement.closest(`#${this.uid}`))return;this.menuDisplayed=!1}}}},Ul=(0,Re.Z)(zl,Zl,[],!1,null,null,null).exports;var Hl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{attrs:{title:"Move to folder",primaryButton:e.primaryButton},on:{close:function(t){return e.$emit("close")},"primary-submit":e.moveToCurrentLocation}},[e.errorMessage?i("div",{staticClass:"msg msg-error"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),i("ul",{staticClass:"breadcrumbs"},e._l(e.breadcrumbs,(function(t,n){return i("li",[i("span",{staticClass:"breadcrumb-link",on:{click:function(i){return e.selectNewPath(t.path)}}},[e._v(e._s(t.name))]),e._v(" "),n<e.breadcrumbs.length-1?i("i",{staticClass:"fas fa-caret-right breadcrumb-separator"}):e._e()])})),0),e._v(" "),i("div",{staticClass:"entries-container"},[e.isLoading?i("div",[i("i",{staticClass:"fas fa-spinner fa-spin fa-1x"}),e._v(" "),i("span",[e._v("Loading...")])]):i("ul",{staticClass:"entries"},e._l(e.entries,(function(t){return i("li",[i("div",{staticClass:"entry",class:{disabled:t.disabled},on:{click:function(i){return e.selectNewPath(t.path)}}},[i("i",{staticClass:"icon fas fa-folder fa-2x"}),e._v(" "),i("span",{staticClass:"entry-link-text"},[e._v(e._s(t.name))])]),e._v(" "),t.disabled?e._e():i("span",{staticClass:"entry-move-button btn btn-secondary",on:{click:function(i){return e.moveTo(t.path)}}},[e._v("Move here")])])})),0)])])};Hl._withStripped=!0;const ql={components:{Modal:je.Z},props:{apiClient:{type:Object},path:{type:String,default:""},source:{type:Object,required:!0}},beforeMount(){this.selectNewPath(this.path)},data(){return{selectedPath:this.path,breadcrumbs:[],isLoading:!0,entries:[],cachedEntries:new Map,errorMessage:null}},methods:{loadEntries(){if(this.cachedEntries.has(this.selectedPath))return this.entries=this.cachedEntries.get(this.selectedPath),this.isLoading=!1,void this.$forceUpdate();this.isLoading=!0,this.apiClient.listEntries(this.selectedPath).then((e=>{this.breadcrumbs=e.breadcrumbs;const t=(0,Fe.UI)((0,Fe.hX)(e.entries,(e=>"dir"===e.kind)),(e=>(e.disabled="dir"===this.source.kind&&this.source.path===e.path,e)));this.cachedEntries.set(this.selectedPath,t),this.entries=t,this.isLoading=!1,this.$forceUpdate()})).catch((e=>{console.error(e),this.isLoading=!1,this.errorMessage="Failed to load directories"}))},selectNewPath(e){"dir"===this.source.kind&&this.source.path===e||(this.selectedPath=e,this.$forceUpdate(),this.loadEntries())},moveTo(e){"dir"===this.source.kind?this.apiClient.moveDir(this.source.path,e).then((()=>{this.$emit("moved")})):"schemio:doc"===this.source.kind&&this.apiClient.moveScheme(this.source.id,e).then((()=>{this.$emit("moved")}))},moveToCurrentLocation(){this.moveTo(this.selectedPath)}},computed:{primaryButton(){return this.selectedPath!==this.path?"Move here":null}}},Wl=ql,Vl=(0,Re.Z)(Wl,Hl,[],!1,null,null,null).exports;function Gl(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Kl(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Gl(Object(i),!0).forEach((function(t){Jl(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Gl(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Jl(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Yl=e=>"dir"===e?"a":"b";function Ql(e,t){return Yl(e.kind)+e.name.toLowerCase()<Yl(t.kind)+t.name.toLowerCase()?-1:1}function Xl(e){return e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||32===e||e>=39&&e<=46}const ec={components:{Modal:je.Z,CreateNewSchemeModal:Nl,MenuDropdown:Ul,MoveToFolderModal:Vl},props:{clientProvider:{type:Object,required:!0},toolbarShown:{type:Boolean,default:!0}},beforeMount(){this.loadNextPage()},data(){let e=this.$route.fullPath.trim();return"/"===e&&(e=""),0===e.indexOf("/f/")&&(e=decodeURI(e.substring(3))),{path:e,breadcrumbs:[],entries:[],errorMessage:null,viewOnly:!0,searchKeyword:"",nextPageToken:null,isLoading:!0,is404:!1,newDirectoryModal:{name:"",shown:!1,errorMessage:null},newSchemeModal:{shown:!1},deleteEntryModal:{entry:null,shown:!1,errorMessage:null},renameEntryModal:{entryIdx:-1,name:"",kind:null,shown:!1,errorMessage:null},moveEntryModal:{entryIdx:-1,shown:!1,errorMessage:null,source:null},progressModal:{title:"",text:"",shown:!1},apiClient:null}},methods:{reload(){this.nextPageToken=null,this.entries=[],this.loadNextPage(),this.newDirectoryModal.shown=!1,this.renameEntryModal.shown=!1,this.moveEntryModal.shown=!1,this.deleteEntryModal.shown=!1,this.newSchemeModal.shown=!1},showProgressModal(e,t){this.progressModal.shown=!0,this.progressModal.title=e,this.progressModal.text=t},showNewSchemeModel(){this.newSchemeModal.shown=!0},showNewDirectoryModel(){this.newDirectoryModal.name="",this.newDirectoryModal.err=null,this.newDirectoryModal.shown=!0,this.$nextTick((()=>{this.$refs.newDirectoryModalInput.focus()}))},submitNewDirectory(){this.newDirectoryModal.errorMessage=null;const e=this.newDirectoryModal.name.trim();if(e){for(let t=0;t<e.length;t++)if(!Xl(e.charCodeAt(t)))return void(this.newDirectoryModal.errorMessage="Unsupported symbol: "+e.charAt(t));this.showProgressModal("Creating directory",`Creating directory "${e}"`),this.apiClient.createDirectory(this.path,e).then((e=>{this.entries.push(Kl(Kl({},e),{},{menuOptions:[{name:"Delete",iconClass:"fas fa-trash",event:"delete"},{name:"Rename",iconClass:"fas fa-edit",event:"rename"},{name:"Move",iconClass:"fas fa-share",event:"move"}]})),this.entries.sort(Ql),this.newDirectoryModal.shown=!1,this.progressModal.shown=!1})).catch((e=>{this.newDirectoryModal.errorMessage="Failed to create new directory",this.progressModal.shown=!1}))}else this.newDirectoryModal.errorMessage="Directory name should not be empty"},onSchemeSubmitted(e){this.showProgressModal("Creating diagram",`Creating diagram "${e.name}"`),this.apiClient.createNewScheme(this.path,e).then((e=>{this.progressModal.shown=!1,"history"===this.$router.mode?this.$router.push({path:`/docs/${e.id}#m=edit`}):this.$router.push({path:`/docs/${e.id}?m=edit`})})).catch((e=>{console.error("Failed to create diagram",e),this.errorMessage="Failed to create diagram",this.progressModal.shown=!1}))},onDeleteEntry(e){this.deleteEntryModal.entry=e,this.deleteEntryModal.errorMessage=null,this.deleteEntryModal.shown=!0},confirmDeleteEntry(e){const t=e=>{for(let t=this.entries.length-1;t>=0;t--)e(this.entries[t])&&this.entries.splice(t,1)};"dir"===e.kind?(this.showProgressModal("Deleting directory",`Deleting directory "${e.name}"`),this.apiClient.deleteDir(e.path,e.name).then((()=>{t((t=>t.path===e.path)),this.deleteEntryModal.shown=!1,this.progressModal.shown=!1})).catch((e=>{this.deleteEntryModal.errorMessage="Failed to delete directory",this.progressModal.shown=!1}))):"schemio:doc"===e.kind&&(this.showProgressModal("Deleting diagram",`Deleting diagram "${e.name}"`),this.apiClient.deleteScheme(e.id).then((()=>{t((t=>t.id===e.id)),this.deleteEntryModal.shown=!1,this.progressModal.shown=!1})).catch((e=>{this.deleteEntryModal.errorMessage="Failed to delete diagram",this.progressModal.shown=!1})))},onRenameEntry(e,t){this.renameEntryModal.name=e.name,this.renameEntryModal.entryIdx=t,this.renameEntryModal.kind=e.kind,this.renameEntryModal.shown=!0,this.$nextTick((()=>{const e=this.$refs.renameEntryModalInput;e&&e.focus()}))},confirmEntryRename(){if(0===this.renameEntryModal.name.trim().length)return void(this.renameEntryModal.errorMessage="Name should not be empty");const e=this.entries[this.renameEntryModal.entryIdx].path;this.entries[this.renameEntryModal.entryIdx].name!==this.renameEntryModal.name&&("dir"===this.renameEntryModal.kind?(this.showProgressModal("Renaming directory",`Renaming directory "${this.renameEntryModal.name}"`),this.apiClient.renameDirectory(e,this.renameEntryModal.name).then((e=>{this.entries[this.renameEntryModal.entryIdx].name=e.name,this.entries[this.renameEntryModal.entryIdx].path=e.path,this.renameEntryModal.shown=!1,this.progressModal.shown=!1})).catch((e=>{e.response&&400===e.response.status?this.renameEntryModal.errorMessage="Such directory name is not allowed":this.renameEntryModal.errorMessage="Sorry, something went wrong. Was not able to rename this directory",this.progressModal.shown=!1}))):"schemio:doc"===this.renameEntryModal.kind&&(this.showProgressModal("Renaming diagram",`Renaming diagram "${this.renameEntryModal.name}"`),this.apiClient.renameScheme(this.entries[this.renameEntryModal.entryIdx].id,this.renameEntryModal.name).then((()=>{this.entries[this.renameEntryModal.entryIdx].name=this.renameEntryModal.name,this.renameEntryModal.shown=!1,this.progressModal.shown=!1})).catch((e=>{e.response&&400===e.response.status?this.renameEntryModal.errorMessage="Such document is not allowed":this.renameEntryModal.errorMessage="Sorry, something went wrong. Was not able to rename this scheme",this.progressModal.shown=!1}))))},onMoveEntry(e,t){this.moveEntryModal.entryIdx=t,this.moveEntryModal.errorMessage=null,this.moveEntryModal.shown=!0,this.moveEntryModal.source=e},onEntryMoved(){this.entries.splice(this.moveEntryModal.entryIdx,1),this.moveEntryModal.shown=!1,this.$forceUpdate()},searchSchemes(){this.$router.push({path:`/search?q=${encodeURIComponent(this.searchKeyword)}`})},loadNextPage(){this.isLoading=!0,this.clientProvider.create().then((e=>{this.$store.dispatch("setApiClient",e),this.apiClient=e})).then((()=>{const e={};return this.nextPageToken&&(e.nextPageToken=this.nextPageToken),this.apiClient.listEntries(this.path,e)})).then((e=>{this.nextPageToken=e.nextPageToken,this.breadcrumbs=(0,Fe.UI)(e.breadcrumbs,(e=>({kind:"dir",path:e.path,name:e.name}))),e.entries.sort(Ql),(0,Fe.Ed)(e.entries,(e=>{e.menuOptions=[{name:"Delete",iconClass:"fas fa-trash",event:"delete"},{name:"Rename",iconClass:"fas fa-edit",event:"rename"},{name:"Move",iconClass:"fas fa-share",event:"move"}],"schemio:doc"===e.kind&&(e.encodedTime=encodeURIComponent(new Date(e.modifiedTime).getTime()))})),this.entries=this.entries.concat(e.entries),this.viewOnly=e.viewOnly,this.isLoading=!1})).catch((e=>{console.error(e),this.isLoading=!1,e.response&&404===e.response.status?this.is404=!0:this.errorMessage="Oops, something went wrong"}))}},computed:{renameEntryModalTitle(){return"dir"===this.renameEntryModal.kind?"Rename directory":"schemio:doc"===this.renameEntryModal.kind?"Rename scheme":"Rename"}}},tc=ec,ic=(0,Re.Z)(tc,Ze,[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",{attrs:{colspan:"2"}},[e._v("Name")]),e._v(" "),i("th",{staticClass:"time-column"},[e._v("Modified")]),e._v(" "),i("th")])])}],!1,null,null,null).exports;var nc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"search-view web-view"},[i("schemio-header",[i("div",{attrs:{slot:"loader"},slot:"loader"},[e.isLoading?i("div",{staticClass:"loader"},[i("div",{staticClass:"loader-element"})]):e._e()])]),e._v(" "),i("div",{staticClass:"middle-content"},[e.errorMessage?i("div",{staticClass:"msg msg-error"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),e.searchResult?i("div",[i("div",{staticClass:"search-panel"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"searchField",staticClass:"textfield",attrs:{type:"text"},domProps:{value:e.query},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.toggleSearch.apply(null,arguments)},input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),i("span",{staticClass:"btn btn-primary",on:{click:e.toggleSearch}},[i("i",{staticClass:"fas fa-search"}),e._v(" Search\n                ")])]),e._v("\n\n            Total results: "+e._s(e.searchResult.totalResults)+"\n            "),i("Pagination",{attrs:{currentPage:e.page,totalPages:e.searchResult.totalPages,urlPrefix:"/search?q="+encodeURIComponent(e.query),useRouter:!0}}),e._v(" "),i("table",{staticClass:"entries-table"},[e._m(0),e._v(" "),i("tbody",e._l(e.searchResult.results,(function(t,n){return i("tr",[i("td",{staticClass:"icon-column"},[i("router-link",{staticClass:"entry-link",attrs:{to:"/docs/"+t.id}},[t.previewURL?i("img",{staticClass:"scheme-preview",attrs:{src:t.previewURL+"?v="+t.encodedTime}}):i("i",{staticClass:"icon far fa-file fa-2x"})])],1),e._v(" "),i("td",{staticClass:"name-column"},[i("router-link",{staticClass:"entry-link",attrs:{to:"/docs/"+t.id}},[i("span",{staticClass:"entry-link-text"},[e._v(e._s(t.name))])])],1),e._v(" "),i("td",{staticClass:"time-column"},[t.modifiedTime?i("span",[e._v(e._s(e._f("formatDateTime")(t.modifiedTime)))]):e._e()])])})),0)]),e._v(" "),e.nextPageToken&&!e.isLoading?i("p",{staticStyle:{"text-align":"center"}},[i("span",{staticClass:"btn btn-primary",on:{click:e.loadNextPage}},[e._v("Load more")])]):e._e()],1):e._e()])],1)};nc._withStripped=!0;var rc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pagination-container"},[e.pages.length>1?i("ul",{staticClass:"pagination"},[i("li",[e.currentPage>1?i("span",[e.useRouter?i("router-link",{attrs:{to:{path:e.urlForPage(e.currentPage-1)}}},[i("i",{staticClass:"fas fa-chevron-circle-left"})]):i("a",{attrs:{href:"#"},on:{click:function(t){return e.onNonRoutablePageClicked(e.currentPage-1)}}},[i("i",{staticClass:"fas fa-chevron-circle-left"})])],1):i("span",[i("i",{staticClass:"fas fa-chevron-circle-left"})])]),e._v(" "),e._l(e.pages,(function(t){return i("li",[t.active?i("span",[e.useRouter?i("router-link",{attrs:{to:{path:e.urlForPage(t.page)}}},[e._v(e._s(t.page))]):i("a",{class:{current:e.currentPage===t.page},attrs:{href:"#"},on:{click:function(i){return e.onNonRoutablePageClicked(t.page)}}},[e._v(e._s(t.page))])],1):i("span",[e._v(e._s(t.page))])])})),e._v(" "),i("li",[e.currentPage<e.totalPages?i("span",[e.useRouter?i("router-link",{attrs:{to:{path:e.urlForPage(e.currentPage+1)}}},[i("i",{staticClass:"fas fa-chevron-circle-right"})]):i("a",{attrs:{href:"#"},on:{click:function(t){return e.onNonRoutablePageClicked(e.currentPage+1)}}},[i("i",{staticClass:"fas fa-chevron-circle-right"})])],1):i("span",[i("i",{staticClass:"fas fa-chevron-circle-right"})])])],2):e._e()])};rc._withStripped=!0;const sc={props:{currentPage:{type:Number,default:1},totalPages:{type:Number,default:1},urlPrefix:{type:String,default:null},useRouter:{type:Boolean,default:!1}},data(){let e=this.urlPrefix;return e&&(e.indexOf("?")>0?e+="&":e+="?",e+="page="),{pages:this.buildPages(this.currentPage,this.totalPages),pageUrlPrefix:e}},methods:{urlForPage(e){return this.urlPrefix?this.pageUrlPrefix+e:"#"},onNonRoutablePageClicked(e){return this.$emit("page-clicked",e),!1},buildPages(e,t){let i=[],n=(e=Math.min(e,t))-2,r=e+2;n<1?r+=1-n:r>t&&(n-=r-t),n=Math.max(1,n),r=Math.min(t,r),n>1&&i.push({page:"1",active:!0}),n>2&&i.push({page:"...",active:!1});for(let t=n;t<=r;t++)i.push({page:t,active:t!==e});return r<t-1&&i.push({page:"...",active:!1}),i}}},oc=(0,Re.Z)(sc,rc,[],!1,null,null,null).exports,ac={components:{Pagination:oc},props:{clientProvider:{type:Object,required:!0}},beforeMount(){this.loadNextPage()},data(){return{query:this.$route.query.q,page:function(e){const t=parseInt(e);return isNaN(t)||void 0===t?1:Math.max(1,t)}(this.$route.query.page),isLoading:!0,searchResult:null,apiClient:null,nextPageToken:null,errorMessage:null}},methods:{toggleSearch(){this.$router.push({path:"/search",query:{q:this.query,page:1}})},loadNextPage(){this.isLoading=!0,this.clientProvider.create().then((e=>{this.$store.dispatch("setApiClient",e),this.apiClient=e;const t={query:this.query,page:this.page};return this.nextPageToken&&(t.nextPageToken=this.nextPageToken),e.findSchemes(t)})).then((e=>{this.isLoading=!1,this.errorMessage=null,this.searchResult&&"chunk"===e.kind?this.searchResult.results=this.searchResult.results.concat(e.results):this.searchResult=e,"chunk"===e.kind&&(this.nextPageToken=e.nextPageToken),this.$nextTick((()=>{this.$refs.searchField.focus()}))})).catch((e=>{console.error(e),this.isLoading=!1,this.errorMessage="Something went wrong, failed to search for your diagrams"}))}}},lc=ac,cc=(0,Re.Z)(lc,nc,[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",{attrs:{colspan:"2"}},[e._v("Name")]),e._v(" "),i("th",{staticClass:"time-column"},[e._v("Modified")])])])}],!1,null,null,null).exports;var hc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"about-view web-view"},[i("schemio-header"),e._v(" "),e._m(0)],1)};hc._withStripped=!0;const dc=(0,Re.Z)({},hc,[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"middle-content page-content"},[i("h1",[e._v("About")]),e._v(" "),i("p",[i("a",{attrs:{href:"/"}},[e._v("Schemio")]),e._v(" is a web based diagramming app that allows you to build interactive diagrams.\n            Although originally Schemio was not designed for this, but it is also possible to use it as a prototyping app.\n        ")]),e._v(" "),i("p",[e._v("\n            If you want to host Schemio yourself, you can get it from "),i("a",{attrs:{href:"https://github.com/ishubin/schemio"}},[e._v("GitHub")])]),e._v(" "),i("h2",[e._v("Features")]),e._v(" "),i("ul",[i("li",[e._v("Creating interactive diagrams")]),e._v(" "),i("li",[e._v("Documenting individual items in your diagrams")]),e._v(" "),i("li",[e._v("Linking diagrams. You can add links to other diagrams or to external documents")]),e._v(" "),i("li",[e._v("Component based diagrams: you can load diagrams dynamically inside of each other. This allows you to manage your digrams better and lets the user discover more and more while staying in original document")]),e._v(" "),i("li",[e._v("Frame animation editor: it is possible to use frame based animations for any property.")]),e._v(" "),i("li",[e._v("Draw free-form shapes")]),e._v(" "),i("li",[e._v("Relative transformations: you can attach items to other items in your diagrams and tweak rotation, pivot point and scale")]),e._v(" "),i("li",[e._v("Behavior editor: you can assign event handlers to any item (events like: init, click, mouse in, mouse out)")]),e._v(" "),i("li",[e._v("Various animation functions: you can have smooth transitions like fade in or fade out, move items, render particle effect etc.")]),e._v(" "),i("li",[e._v("Export entire diagram or only selected objects as SVG")]),e._v(" "),i("li",[e._v("Generate static version of all of your diagrams so that you can host it anywhere, even on GitHub pages")])]),e._v(" "),i("h2",[e._v("License")]),e._v(" "),i("p",[i("a",{attrs:{href:"/"}},[e._v("Schemio")]),e._v(" is subject to the terms of the Mozilla Public License, v. 2.0. You can obtain a copy of license at "),i("a",{attrs:{href:"https://mozilla.org/MPL/2.0/"}},[e._v("https://mozilla.org/MPL/2.0/")]),e._v(".\n        ")])])}],!1,null,null,null).exports;var uc=("undefined"!=typeof window?window:void 0!==i.g?i.g:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function pc(e,t){if(void 0===t&&(t=[]),null===e||"object"!=typeof e)return e;var i,n=(i=function(t){return t.original===e},t.filter(i)[0]);if(n)return n.copy;var r=Array.isArray(e)?[]:{};return t.push({original:e,copy:r}),Object.keys(e).forEach((function(i){r[i]=pc(e[i],t)})),r}function mc(e,t){Object.keys(e).forEach((function(i){return t(e[i],i)}))}function fc(e){return null!==e&&"object"==typeof e}var gc=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var i=e.state;this.state=("function"==typeof i?i():i)||{}},vc={namespaced:{configurable:!0}};vc.namespaced.get=function(){return!!this._rawModule.namespaced},gc.prototype.addChild=function(e,t){this._children[e]=t},gc.prototype.removeChild=function(e){delete this._children[e]},gc.prototype.getChild=function(e){return this._children[e]},gc.prototype.hasChild=function(e){return e in this._children},gc.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},gc.prototype.forEachChild=function(e){mc(this._children,e)},gc.prototype.forEachGetter=function(e){this._rawModule.getters&&mc(this._rawModule.getters,e)},gc.prototype.forEachAction=function(e){this._rawModule.actions&&mc(this._rawModule.actions,e)},gc.prototype.forEachMutation=function(e){this._rawModule.mutations&&mc(this._rawModule.mutations,e)},Object.defineProperties(gc.prototype,vc);var yc,xc=function(e){this.register([],e,!1)};function bc(e,t,i){if(t.update(i),i.modules)for(var n in i.modules){if(!t.getChild(n))return;bc(e.concat(n),t.getChild(n),i.modules[n])}}xc.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},xc.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,i){return e+((t=t.getChild(i)).namespaced?i+"/":"")}),"")},xc.prototype.update=function(e){bc([],this.root,e)},xc.prototype.register=function(e,t,i){var n=this;void 0===i&&(i=!0);var r=new gc(t,i);0===e.length?this.root=r:this.get(e.slice(0,-1)).addChild(e[e.length-1],r),t.modules&&mc(t.modules,(function(t,r){n.register(e.concat(r),t,i)}))},xc.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),i=e[e.length-1],n=t.getChild(i);n&&n.runtime&&t.removeChild(i)},xc.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),i=e[e.length-1];return!!t&&t.hasChild(i)};var wc=function(e){var t=this;void 0===e&&(e={}),!yc&&"undefined"!=typeof window&&window.Vue&&Ec(window.Vue);var i=e.plugins;void 0===i&&(i=[]);var n=e.strict;void 0===n&&(n=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new xc(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new yc,this._makeLocalGettersCache=Object.create(null);var r=this,s=this.dispatch,o=this.commit;this.dispatch=function(e,t){return s.call(r,e,t)},this.commit=function(e,t,i){return o.call(r,e,t,i)},this.strict=n;var a=this._modules.root.state;Ic(this,a,[],this._modules.root),Sc(this,a),i.forEach((function(e){return e(t)})),(void 0!==e.devtools?e.devtools:yc.config.devtools)&&function(e){uc&&(e._devtoolHook=uc,uc.emit("vuex:init",e),uc.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){uc.emit("vuex:mutation",e,t)}),{prepend:!0}),e.subscribeAction((function(e,t){uc.emit("vuex:action",e,t)}),{prepend:!0}))}(this)},Cc={state:{configurable:!0}};function Pc(e,t,i){return t.indexOf(e)<0&&(i&&i.prepend?t.unshift(e):t.push(e)),function(){var i=t.indexOf(e);i>-1&&t.splice(i,1)}}function kc(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var i=e.state;Ic(e,i,[],e._modules.root,!0),Sc(e,i,t)}function Sc(e,t,i){var n=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var r=e._wrappedGetters,s={};mc(r,(function(t,i){s[i]=function(e,t){return function(){return e(t)}}(t,e),Object.defineProperty(e.getters,i,{get:function(){return e._vm[i]},enumerable:!0})}));var o=yc.config.silent;yc.config.silent=!0,e._vm=new yc({data:{$$state:t},computed:s}),yc.config.silent=o,e.strict&&function(e){e._vm.$watch((function(){return this._data.$$state}),(function(){}),{deep:!0,sync:!0})}(e),n&&(i&&e._withCommit((function(){n._data.$$state=null})),yc.nextTick((function(){return n.$destroy()})))}function Ic(e,t,i,n,r){var s=!i.length,o=e._modules.getNamespace(i);if(n.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=n),!s&&!r){var a=Ac(t,i.slice(0,-1)),l=i[i.length-1];e._withCommit((function(){yc.set(a,l,n.state)}))}var c=n.context=function(e,t,i){var n=""===t,r={dispatch:n?e.dispatch:function(i,n,r){var s=_c(i,n,r),o=s.payload,a=s.options,l=s.type;return a&&a.root||(l=t+l),e.dispatch(l,o)},commit:n?e.commit:function(i,n,r){var s=_c(i,n,r),o=s.payload,a=s.options,l=s.type;a&&a.root||(l=t+l),e.commit(l,o,a)}};return Object.defineProperties(r,{getters:{get:n?function(){return e.getters}:function(){return function(e,t){if(!e._makeLocalGettersCache[t]){var i={},n=t.length;Object.keys(e.getters).forEach((function(r){if(r.slice(0,n)===t){var s=r.slice(n);Object.defineProperty(i,s,{get:function(){return e.getters[r]},enumerable:!0})}})),e._makeLocalGettersCache[t]=i}return e._makeLocalGettersCache[t]}(e,t)}},state:{get:function(){return Ac(e.state,i)}}}),r}(e,o,i);n.forEachMutation((function(t,i){!function(e,t,i,n){(e._mutations[t]||(e._mutations[t]=[])).push((function(t){i.call(e,n.state,t)}))}(e,o+i,t,c)})),n.forEachAction((function(t,i){var n=t.root?i:o+i,r=t.handler||t;!function(e,t,i,n){(e._actions[t]||(e._actions[t]=[])).push((function(t){var r,s=i.call(e,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:e.getters,rootState:e.state},t);return(r=s)&&"function"==typeof r.then||(s=Promise.resolve(s)),e._devtoolHook?s.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):s}))}(e,n,r,c)})),n.forEachGetter((function(t,i){!function(e,t,i,n){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return i(n.state,n.getters,e.state,e.getters)})}(e,o+i,t,c)})),n.forEachChild((function(n,s){Ic(e,t,i.concat(s),n,r)}))}function Ac(e,t){return t.reduce((function(e,t){return e[t]}),e)}function _c(e,t,i){return fc(e)&&e.type&&(i=t,t=e,e=e.type),{type:e,payload:t,options:i}}function Ec(e){yc&&e===yc||function(e){if(Number(e.version.split(".")[0])>=2)e.mixin({beforeCreate:i});else{var t=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[i].concat(e.init):i,t.call(this,e)}}function i(){var e=this.$options;e.store?this.$store="function"==typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}(yc=e)}Cc.state.get=function(){return this._vm._data.$$state},Cc.state.set=function(e){},wc.prototype.commit=function(e,t,i){var n=this,r=_c(e,t,i),s=r.type,o=r.payload,a=(r.options,{type:s,payload:o}),l=this._mutations[s];l&&(this._withCommit((function(){l.forEach((function(e){e(o)}))})),this._subscribers.slice().forEach((function(e){return e(a,n.state)})))},wc.prototype.dispatch=function(e,t){var i=this,n=_c(e,t),r=n.type,s=n.payload,o={type:r,payload:s},a=this._actions[r];if(a){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(o,i.state)}))}catch(e){}var l=a.length>1?Promise.all(a.map((function(e){return e(s)}))):a[0](s);return new Promise((function(e,t){l.then((function(t){try{i._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(o,i.state)}))}catch(e){}e(t)}),(function(e){try{i._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(o,i.state,e)}))}catch(e){}t(e)}))}))}},wc.prototype.subscribe=function(e,t){return Pc(e,this._subscribers,t)},wc.prototype.subscribeAction=function(e,t){return Pc("function"==typeof e?{before:e}:e,this._actionSubscribers,t)},wc.prototype.watch=function(e,t,i){var n=this;return this._watcherVM.$watch((function(){return e(n.state,n.getters)}),t,i)},wc.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},wc.prototype.registerModule=function(e,t,i){void 0===i&&(i={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),Ic(this,this.state,e,this._modules.get(e),i.preserveState),Sc(this,this.state)},wc.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var i=Ac(t.state,e.slice(0,-1));yc.delete(i,e[e.length-1])})),kc(this)},wc.prototype.hasModule=function(e){return"string"==typeof e&&(e=[e]),this._modules.isRegistered(e)},wc.prototype.hotUpdate=function(e){this._modules.update(e),kc(this,!0)},wc.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(wc.prototype,Cc);var Tc=Bc((function(e,t){var i={};return Dc(t).forEach((function(t){var n=t.key,r=t.val;i[n]=function(){var t=this.$store.state,i=this.$store.getters;if(e){var n=Lc(this.$store,0,e);if(!n)return;t=n.context.state,i=n.context.getters}return"function"==typeof r?r.call(this,t,i):t[r]},i[n].vuex=!0})),i})),Mc=Bc((function(e,t){var i={};return Dc(t).forEach((function(t){var n=t.key,r=t.val;i[n]=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];var n=this.$store.commit;if(e){var s=Lc(this.$store,0,e);if(!s)return;n=s.context.commit}return"function"==typeof r?r.apply(this,[n].concat(t)):n.apply(this.$store,[r].concat(t))}})),i})),$c=Bc((function(e,t){var i={};return Dc(t).forEach((function(t){var n=t.key,r=t.val;r=e+r,i[n]=function(){if(!e||Lc(this.$store,0,e))return this.$store.getters[r]},i[n].vuex=!0})),i})),Oc=Bc((function(e,t){var i={};return Dc(t).forEach((function(t){var n=t.key,r=t.val;i[n]=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];var n=this.$store.dispatch;if(e){var s=Lc(this.$store,0,e);if(!s)return;n=s.context.dispatch}return"function"==typeof r?r.apply(this,[n].concat(t)):n.apply(this.$store,[r].concat(t))}})),i}));function Dc(e){return function(e){return Array.isArray(e)||fc(e)}(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function Bc(e){return function(t,i){return"string"!=typeof t?(i=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,i)}}function Lc(e,t,i){return e._modulesNamespaceMap[i]}function Rc(e,t,i){var n=i?e.groupCollapsed:e.group;try{n.call(e,t)}catch(i){e.log(t)}}function Nc(e){try{e.groupEnd()}catch(t){e.log(" log end ")}}function Zc(){var e=new Date;return" @ "+Fc(e.getHours(),2)+":"+Fc(e.getMinutes(),2)+":"+Fc(e.getSeconds(),2)+"."+Fc(e.getMilliseconds(),3)}function Fc(e,t){return"0",i=t-e.toString().length,new Array(i+1).join("0")+e;var i}var jc={Store:wc,install:Ec,version:"3.6.2",mapState:Tc,mapMutations:Mc,mapGetters:$c,mapActions:Oc,createNamespacedHelpers:function(e){return{mapState:Tc.bind(null,e),mapGetters:$c.bind(null,e),mapMutations:Mc.bind(null,e),mapActions:Oc.bind(null,e)}},createLogger:function(e){void 0===e&&(e={});var t=e.collapsed;void 0===t&&(t=!0);var i=e.filter;void 0===i&&(i=function(e,t,i){return!0});var n=e.transformer;void 0===n&&(n=function(e){return e});var r=e.mutationTransformer;void 0===r&&(r=function(e){return e});var s=e.actionFilter;void 0===s&&(s=function(e,t){return!0});var o=e.actionTransformer;void 0===o&&(o=function(e){return e});var a=e.logMutations;void 0===a&&(a=!0);var l=e.logActions;void 0===l&&(l=!0);var c=e.logger;return void 0===c&&(c=console),function(e){var h=pc(e.state);void 0!==c&&(a&&e.subscribe((function(e,s){var o=pc(s);if(i(e,h,o)){var a=Zc(),l=r(e),d="mutation "+e.type+a;Rc(c,d,t),c.log("%c prev state","color: #9E9E9E; font-weight: bold",n(h)),c.log("%c mutation","color: #03A9F4; font-weight: bold",l),c.log("%c next state","color: #4CAF50; font-weight: bold",n(o)),Nc(c)}h=o})),l&&e.subscribeAction((function(e,i){if(s(e,i)){var n=Zc(),r=o(e),a="action "+e.type+n;Rc(c,a,t),c.log("%c action","color: #03A9F4; font-weight: bold",r),Nc(c)}})))}}};const zc=jc;var Uc=i(4691);class Hc{constructor(e,t,i){this.storage=e,this.name=t,this.limit=i,this.items={},this.amountOfElements=0,this.revision=0,this.loadFromSettingsStorage()}_saveItem(e,t){this.storage.setItem(e,JSON.stringify(t))}_getItem(e,t){const i=this.storage.getItem(e);return i?JSON.parse(i):t}loadFromSettingsStorage(){const e=this._getItem(`LSS-${this.name}`);e&&e.items&&e.amountOfElements&&e.revision&&(this.items=e.items,this.amountOfElements=e.amountOfElements,this.revision=e.revision)}saveToSettingsStorage(){this._saveItem(`LSS-${this.name}`,{items:this.items,amountOfElements:this.amountOfElements,revision:this.revision})}save(e,t){if(this.items.hasOwnProperty(e))return this.makeMostRecent(this.items[e]),this.items[e].v=t,void this.saveToSettingsStorage();this.amountOfElements>=this.limit&&this.evict(),this.items[e]={r:this.getNewRevision(),v:t},this.amountOfElements+=1,this.saveToSettingsStorage()}get(e,t){const i=this.items[e];return i?i.v:t}makeMostRecent(e){e.r=this.getNewRevision()}evict(){let e=null,t=0;(0,Fe.Ed)(this.items,((i,n)=>{(!e||t>i.r)&&(e=n,t=i.r)})),e&&(delete this.items[e],this.amountOfElements-=1)}getElementsCount(){return this.amountOfElements}getNewRevision(){return this.revision+=1,this.revision}}const qc={getItem:e=>window.localStorage.getItem(e),setItem(e,t){window.localStorage.setItem(e,t)}};function Wc(e,t){return new Hc(qc,e,t)}function Vc(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Gc(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Vc(Object(i),!0).forEach((function(t){Kc(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Vc(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Kc(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t().use(zc);const Jc="defaultConnectorSmoothing",Yc=Wc("store",100),Qc=new zc.Store({state:{rootPath:"/",assetsPath:"/assets",apiClient:null,editorSubStateName:null,itemMenu:{artPackIds:new Set,artPacks:[],shapeGroupIds:new Set},connecting:{connectorItem:null},patch:{settings:{additionsColor:"rgba(90, 255, 90, 0.4)",deletionsColor:"rgba(255, 90, 90, 0.4)",modificationsColor:"rgba(90, 90, 255, 0.4)"},diffColoringEnabled:!0},defaultConnectorSmoothing:Yc.get(Jc,"linear"),autoRemount:Yc.get("autoRemount",!0),showPivot:Yc.get("showPivot",!1),showItemDetailMarkers:Yc.get("showItemDetailMarkers",!0),copiedStyleItem:null,snap:{grid:Yc.get("snap.grid",!1),items:Yc.get("snap.items",!0)},itemSurround:{padding:40},itemControlPoints:[],selectedConnectorPath:null,selectedConnector:null,multiSelectBox:null,snappers:{horizontal:null,vertical:null},connectorProposedDestination:{shown:!1,connectorItemId:null,mx:0,my:0},imageUpload:{images:new Map},statusMessage:{message:null,isError:!1},systemMessages:[],draw:{epsilon:0,pencilSize:3,brushSize:5}},mutations:{SET_ROOT_PATH(e,t){e.rootPath=t},SET_ASSESTS_PATH(e,t){e.assetsPath=t},SET_API_CLIENT(e,t){e.apiClient=t},TOGGLE_AUTO_REMOUNT(e){e.autoRemount=!e.autoRemount,Yc.save("autoRemount",e.autoRemount)},TOGGLE_PIVOT(e){e.showPivot=!e.showPivot,Yc.save("showPivot",e.showPivot)},TOGGLE_ITEM_DETAIL_MARKERS(e){e.showItemDetailMarkers=!e.showItemDetailMarkers,Yc.save("showItemDetailMarkers",e.showItemDetailMarkers)},SET_DEFAULT_CONNECTOR_SMOOTHING(e,t){e.defaultConnectorSmoothing=t,Yc.save(Jc,t)},SET_GRID_SNAP(e,t){e.snap.grid=t,Yc.save("snap.grid",t)},SET_ITEM_SNAP(e,t){e.snap.items=t,Yc.save("snap.items",t)},SET_EDITOR_SUB_STATE_NAME(e,t){e.editorSubStateName=t},SET_ITEM_SURROUND_PADDING(e,t){e.itemSurround.padding=t},SET_ITEM_CONTROL_POINTS(e,t){e.itemControlPoints=t},CLEAR_ITEM_CONTROL_POINTS(e){e.itemControlPoints.length=0},SET_MULTI_SELECT_BOX(e,t){e.multiSelectBox=t},SET_SELECTED_CONNECTOR_WITH_PATH(e,{item:t,path:i}){e.selectedConnectorPath=i,e.selectedConnector=t},SET_ITEM_SNAPPER(e,t){"horizontal"===t.snapperType?e.snappers.horizontal=t:"vertical"===t.snapperType&&(e.snappers.vertical=t)},CLEAR_ITEM_SNAPPERS(e){e.snappers.horizontal=null,e.snappers.vertical=null},PROPOSE_CONNECTOR_DESTINATION_ITEMS(e,{connectorItemId:t,mx:i,my:n}){e.connectorProposedDestination.connectorItemId=t,e.connectorProposedDestination.mx=i,e.connectorProposedDestination.my=n,e.connectorProposedDestination.shown=!0},DISABLE_PROPOSE_CONNECTOR_DESTINATION_ITEMS(e){e.connectorProposedDestination.shown=!1},UPDATE_IMAGE_UPLOAD_STATUS(e,{imageId:t,uploading:i,uploadFailed:n}){n&&(e.statusMessage.message="Failed to upload image",e.statusMessage.isError=!0),i&&!n||!e.imageUpload.images.has(t)?e.imageUpload.images.set(t,{uploading:i,date:new Date}):e.imageUpload.images.delete(t);let r=0;if(e.imageUpload.images.forEach((e=>{e.uploading&&(r+=1)})),!e.statusMessage.isError||!e.statusMessage.message)if(r>0){let t="";r>1&&(t="s"),e.statusMessage.message=`Uploading ${r} image${t}`,e.statusMessage.isError=!1}else e.statusMessage.message=null,e.statusMessage.isError=!1},RESET_IMAGE_UPLOAD_STATUS(e){const t=new Date,i=[];e.imageUpload.images.forEach(((e,n)=>{t.getTime()-e.date.getTime()>45e3&&i.push(n)})),(0,Fe.Ed)(i,(t=>{e.imageUpload.images.delete(t)}))},CLEAR_STATUS_MESSAGE(e){e.statusMessage.message=null,e.statusMessage.isError=!1},SET_STATUS_MESSAGE(e,{message:t,isError:i}){e.statusMessage.message=t,e.statusMessage.isError=i},ADD_SYSTEM_MESSAGE(e,{message:t,status:i,id:n,iconClass:r}){if(n){for(let t=0;t<e.systemMessages.length;t++)if(e.systemMessages[t].id===n)return}else n=jl().generate();e.systemMessages.push({id:n,message:t,status:i,iconClass:r}),setTimeout((()=>{for(let t=0;t<e.systemMessages.length;t++)if(e.systemMessages[t].id===n)return void e.systemMessages.splice(t,1)}),5e3)},REMOVE_SYSTEM_MESSAGE(e,t){for(let i=0;i<e.systemMessages.length;i++)if(e.systemMessages[i].id===t)return void e.systemMessages.splice(i,1)},UPDATE_DRAW_PENCIL_SIZE(e,t){isNaN(t)||(e.draw.pencilSize=t)},UPDATE_DRAW_BRUSH_SIZE(e,t){isNaN(t)||(e.draw.brushSize=t)},UPDATE_DRAW_EPSILON(e,t){isNaN(t)||(e.draw.epsilon=t)},COPY_ITEM_STYLE(e,t){e.copiedStyleItem=Uc.Z.clone(t)},SET_PATCH_DIFF_COLORING_ENABLED(e,t){e.patch.diffColoringEnabled=t},UPDATE_PATCH_DIFF_COLOR(e,{changeType:t,color:i}){"additions"===t?e.patch.settings.additionsColor=i:"deletions"===t?e.patch.settings.deletionsColor=i:"modifications"===t&&(e.patch.settings.modificationsColor=i)},SET_CURRENT_CONNECTOR(e,{item:t}){e.connecting.connectorItem=t},ADD_ART_PACK(e,{artPack:t,artPackId:i}){e.itemMenu.artPackIds.has(i)||(e.itemMenu.artPacks.push(Gc(Gc({},t),{},{id:i})),e.itemMenu.artPackIds.add(i))},REMOVE_ART_PACK(e,t){if(e.itemMenu.artPackIds.has(t)){e.itemMenu.artPackIds.delete(t);for(let i=0;i<e.itemMenu.artPacks.length;i++)if(e.itemMenu.artPacks[i].id===t)return void e.itemMenu.artPacks.splice(i,1)}},REGISTER_SHAPE_GROUP_ID(e,t){e.itemMenu.shapeGroupIds.add(t)}},actions:{setRootPath({commit:e},t){e("SET_ROOT_PATH",t)},setAssetsPath({commit:e},t){e("SET_ASSESTS_PATH",t)},setApiClient({commit:e},t){e("SET_API_CLIENT",t)},setDefaultConnectorSmoothing({commit:e},t){e("SET_DEFAULT_CONNECTOR_SMOOTHING",t)},setGridSnap({commit:e},t){e("SET_GRID_SNAP",t)},setItemSnap({commit:e},t){e("SET_ITEM_SNAP",t)},setEditorSubStateName({commit:e},t){e("SET_EDITOR_SUB_STATE_NAME",t)},setItemSurroundPadding({commit:e},t){e("SET_ITEM_SURROUND_PADDING",t)},setItemControlPoints({commit:e},t){const i=[];(0,Fe.Ed)(t,((e,t)=>{i.push({id:t,point:e})})),e("SET_ITEM_CONTROL_POINTS",i)},clearItemControlPoints({commit:e}){e("CLEAR_ITEM_CONTROL_POINTS")},setMultiSelectBox({commit:e},t){e("SET_MULTI_SELECT_BOX",t)},setSelectedConnectorWithPath({commit:e},{item:t,path:i}){e("SET_SELECTED_CONNECTOR_WITH_PATH",{item:t,path:i})},setItemSnapper({commit:e},t){e("SET_ITEM_SNAPPER",t)},clearItemSnappers({commit:e}){e("CLEAR_ITEM_SNAPPERS")},toggleAutoRemount({commit:e}){e("TOGGLE_AUTO_REMOUNT")},togglePivot({commit:e}){e("TOGGLE_PIVOT")},toggleItemDetailMarkers({commit:e}){e("TOGGLE_ITEM_DETAIL_MARKERS")},proposeConnectorDestinationItems({commit:e},t){e("PROPOSE_CONNECTOR_DESTINATION_ITEMS",t)},disableProposeConnectorDestinationItems({commit:e}){e("DISABLE_PROPOSE_CONNECTOR_DESTINATION_ITEMS")},updateImageUploadStatus({commit:e},{imageId:t,uploading:i,uploadFailed:n}){e("UPDATE_IMAGE_UPLOAD_STATUS",{imageId:t,uploading:i,uploadFailed:n}),setTimeout((()=>{e("RESET_IMAGE_UPLOAD_STATUS")}),6e4)},clearStatusMessage({commit:e}){e("CLEAR_STATUS_MESSAGE")},setErrorStatusMessage({commit:e},t){e("SET_STATUS_MESSAGE",{message:t,isError:!0})},addSystemMessage({commit:e},{message:t,status:i,id:n,iconClass:r}){e("ADD_SYSTEM_MESSAGE",{message:t,status:i,id:n,iconClass:r})},removeSystemMessage({commit:e},t){e("REMOVE_SYSTEM_MESSAGE",t)},updateDrawEpsilon({commit:e},t){e("UPDATE_DRAW_EPSILON",t)},updateDrawPencilSize({commit:e},t){e("UPDATE_DRAW_PENCIL_SIZE",t)},updateDrawBrushSize({commit:e},t){e("UPDATE_DRAW_BRUSH_SIZE",t)},copyItemStyle({commit:e},t){e("COPY_ITEM_STYLE",t)},setPatchDiffColoringEnabled({commit:e},t){e("SET_PATCH_DIFF_COLORING_ENABLED",t)},updatePatchDiffColor({commit:e},{changeType:t,color:i}){e("UPDATE_PATCH_DIFF_COLOR",{changeType:t,color:i})},setCurrentConnector({commit:e},t){e("SET_CURRENT_CONNECTOR",{item:t})},addArtPack({commit:e},{artPack:t,artPackId:i}){e("ADD_ART_PACK",{artPack:t,artPackId:i})},removeArtPack({commit:e},t){e("REMOVE_ART_PACK",t)},registerShapeGroupId({commit:e},t){e("REGISTER_SHAPE_GROUP_ID",t)}},getters:{apiClient:e=>e.apiClient,itemControlPointsList:e=>e.itemControlPoints,multiSelectBox:e=>e.multiSelectBox,horizontalSnapper:e=>e.snappers.horizontal,verticalSnapper:e=>e.snappers.vertical,shouldSnapToGrid:e=>e.snap.grid,shouldSnapToItems:e=>e.snap.items,autoRemount:e=>e.autoRemount,showPivot:e=>e.showPivot,showItemDetailMarkers:e=>e.showItemDetailMarkers,connectorProposedDestination:e=>e.connectorProposedDestination,statusMessage:e=>e.statusMessage,selectedConnectorPath:e=>e.selectedConnectorPath,selectedConnector:e=>e.selectedConnector,systemMessages:e=>e.systemMessages,drawEpsilon:e=>e.draw.epsilon,drawPencilSize:e=>e.draw.pencilSize,drawBrushSize:e=>e.draw.brushSize,editorSubStateName:e=>e.editorSubStateName,patchAdditionsColor:e=>e.patch.settings.additionsColor,patchDeletionsColor:e=>e.patch.settings.deletionsColor,patchModificationsColor:e=>e.patch.settings.modificationsColor,patchIsDiffColoringEnabled:e=>e.patch.diffColoringEnabled,staticExportAllowed:e=>!(!e.apiClient||!e.apiClient.submitStaticExport),rootPath:e=>e.rootPath,assetsPath:e=>e.assetsPath}}),Xc=Qc;var eh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scheme-editor-view",class:{"diagram-404-view":e.is404}},[i("schemio-header",[i("div",{attrs:{slot:"middle-section"},slot:"middle-section"},[i("ul",{staticClass:"header-breadcrumbs"},e._l(e.breadcrumbs,(function(t,n){return i("li",["dir"===t.kind?i("router-link",{attrs:{to:"/f/"+t.path}},[i("i",{staticClass:"fas fa-folder"}),e._v("\n                        "+e._s(t.name)+"\n                    ")]):e._e(),e._v(" "),"ellipsis"===t.kind?i("span",[e._v("...")]):e._e(),e._v(" "),n<e.breadcrumbs.length-1?i("i",{staticClass:"fas fa-caret-right breadcrumb-separator"}):e._e()],1)})),0),e._v(" "),e.scheme?i("div",{staticClass:"scheme-title"},[i("img",{staticClass:"icon",attrs:{src:e.assetsPath+"/images/schemio-logo-white.small.png",height:"20"}}),e._v(" "),i("span",[e._v(e._s(e.scheme.name))])]):e._e()]),e._v(" "),i("div",{attrs:{slot:"loader"},slot:"loader"},[e.isLoading?i("div",{staticClass:"loader"},[i("div",{staticClass:"loader-element"})]):e._e()])]),e._v(" "),e.is404?i("div",{staticClass:"middle-content"},[i("h4",[e._v("Sorry, requested document was not found")])]):e.errorMessage?i("div",{staticClass:"middle-content"},[e.errorMessage?i("div",{staticClass:"msg msg-error"},[e._v(e._s(e.errorMessage))]):e._e()]):e._e(),e._v(" "),e.scheme?i("SchemioEditorWebApp",{key:"scheme-"+e.appReloadKey,attrs:{editorId:"scheme-"+e.appReloadKey,scheme:e.scheme,userStylesEnabled:e.userStylesEnabled,projectArtEnabled:e.projectArtEnabled,editorMode:e.editorMode,editAllowed:e.editAllowed,menuOptions:e.menuOptions,isStaticEditor:e.isStaticEditor,isOfflineEditor:e.isOfflineEditor,isSaving:e.isSaving,modificationKey:e.modificationKey,schemeReloadKey:e.schemeReloadKey,starterTemplates:e.starterTemplates},on:{"mode-changed":e.onSchemeEditorModeChanged,"delete-diagram-requested":function(t){e.deleteSchemeWarningShown=!0},"scheme-save-requested":e.onSaveSchemeRequested,"scheme-update-requested":e.onSchemeUpdateRequested,"new-diagram-requested-for-item":e.onNewDiagramRequestedForItem}}):e._e(),e._v(" "),e.newSchemePopup.show?i("CreateNewSchemeModal",{attrs:{name:e.newSchemePopup.name,description:e.newSchemePopup.description},on:{close:function(t){e.newSchemePopup.show=!1},"scheme-submitted":e.submitNewScheme}}):e._e(),e._v(" "),e.duplicateDiagramModal.shown?i("modal",{attrs:{title:"Duplicate diagram",primaryButton:"Create copy"},on:{close:function(t){e.duplicateDiagramModal.shown=!1},"primary-submit":function(t){return e.duplicateDiagram()}}},[i("p",[e._v("\n            Duplicate current diagram in a new file\n        ")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.duplicateDiagramModal.name,expression:"duplicateDiagramModal.name"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Name"},domProps:{value:e.duplicateDiagramModal.name},on:{input:function(t){t.target.composing||e.$set(e.duplicateDiagramModal,"name",t.target.value)}}}),e._v(" "),e.duplicateDiagramModal.errorMessage?i("div",{staticClass:"msg msg-danger"},[e._v("\n            "+e._s(e.duplicateDiagramModal.errorMessage)+"\n        ")]):e._e()]):e._e(),e._v(" "),e.deleteSchemeWarningShown?i("modal",{attrs:{title:"Delete diagram",primaryButton:"Delete"},on:{close:function(t){e.deleteSchemeWarningShown=!1},"primary-submit":function(t){return e.deleteScheme()}}},[e._v("\n        Are you sure you want to delete "),i("b",[e._v(e._s(e.scheme.name))]),e._v(" scheme?\n    ")]):e._e(),e._v(" "),e.exportAsLinkModalShown?i("export-as-link-modal",{attrs:{scheme:e.scheme},on:{close:function(t){e.exportAsLinkModalShown=!1}}}):e._e()],1)};eh._withStripped=!0;var th=i(5733),ih=i.n(th),nh=i(4925),rh=i(8537);function sh(e){return{encodeURLHash(e){let t="",i=!0;return(0,Fe.Ed)(e,((e,n)=>{i||(t+="&"),t+=n+"="+encodeURIComponent(e),i=!1})),t},decodeURLHash(t){if(t.startsWith("#")&&(t=t.substring(1)),!t)return{};const i={};let n=t;if("hash"===e){const e=t.indexOf("?");if(!(e>=0))return{};n=t.substring(e+1)}const r=n.split("&");return(0,Fe.Ed)(r,(e=>{const t=e.split("=");t.length>1&&(i[t[0]]=decodeURIComponent(t[1]))})),i},changeURLHash(t){const i=this.encodeURLHash(t);if("hash"===e){let e=location.hash;const t=location.hash.indexOf("?");t>=0&&(e=location.hash.substring(0,t)),0===e.length&&"#"!==e.charAt(0)&&(e="#"+e),history.pushState(null,null,e+"?"+i)}else history.pushState(null,null,"#"+i)}}}var oh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{title:"Export as link"},on:{close:function(t){return e.$emit("close")}}},[i("p",[e._v("\n        Exports diagram as a URL\n        "),i("span",{staticClass:"btn btn-secondary",on:{click:e.copyToClipboard}},[e._v("Copy to Clipboard")])]),e._v(" "),i("textarea",{ref:"textarea",staticStyle:{width:"100%"},attrs:{name:"link",rows:"30",readonly:"readonly"},domProps:{value:e.link}})])};oh._withStripped=!0;let ah=null;function lh(e){return ah=e,navigator.clipboard.writeText(e)}function ch(){return navigator.clipboard.readText?navigator.clipboard.readText().catch((e=>ah)):Promise.resolve(ah)}function hh(e,t){return lh(JSON.stringify({kind:e,data:t}))}const dh={props:["scheme"],components:{Modal:je.Z},beforeMount(){const e=JSON.stringify((0,rh.mY)(Uc.Z.sanitizeScheme(Uc.Z.clone(this.scheme)))),t=new(ih());t.file("doc.json",e),t.generateAsync({type:"base64",compression:"DEFLATE",compressionOptions:{level:9}}).then((e=>{const t={"+":".","/":"_","=":"-"},i=e.replace(/[+/=]/g,(e=>t[e])),n="offline-editor";let r="";r="hash"===(this.$router?this.$router.mode:"history")?`/#/${n}/?doc=${i}`:`/${n}#doc=${i}`,this.link=window.location.origin+r,this.$nextTick((()=>{this.$refs.textarea.focus(),this.$refs.textarea.select()}))}))},data:()=>({link:""}),methods:{copyToClipboard(){lh(this.link)}}},uh=(0,Re.Z)(dh,oh,[],!1,null,null,null).exports;var ph=i(3762),mh=i(8595),fh=i(7196),gh=i(2644);function vh(e){for(let i=e.childNodes.length-1;i>=0;i--){let n=e.childNodes[i];n&&n.nodeType===Node.ELEMENT_NODE?"true"!==n.getAttribute("data-preview-ignore")&&("foreignObject"!==(t=n).nodeName||t.childNodes.length>0&&""!==t.childNodes[0].innerText)?("p"===n.nodeName.toLowerCase()&&(n.style.marginTop=0,n.style.marginBottom=0,n.style.padding=0,n.style.minHeight="18px"),n.getAttributeNames().forEach((e=>{e.startsWith("data-")&&n.removeAttribute(e)})),vh(n)):e.removeChild(n):n&&n.nodeType===Node.COMMENT_NODE&&e.removeChild(n)}var t}function yh(e){return new Promise(((t,i)=>{const n=new XMLHttpRequest;n.open("get",e),n.responseType="blob",n.onload=function(){const e=new FileReader;e.onload=function(){t(this.result)},e.onerror=function(e){i(e)},e.readAsDataURL(n.response)},n.onerror=function(e){i(e)},n.send()}))}function xh(e,t){if(t||(t=[]),"image"===e.tagName){const i=e.getAttribute("xlink:href");i&&!i.startsWith("data:")&&t.push(e)}return(0,Fe.Ed)(e.childNodes,(e=>{xh(e,t)})),t}function bh(e){const t=xh(e),i=[],n=new Map;return(0,Fe.Ed)(t,(e=>{const t=e.getAttribute("xlink:href");n.has(t)?n.get(t).push(e):n.set(t,[e])})),n.forEach(((e,t)=>{i.push(function(e,t){const i=e.indexOf("?")<0?"?_schuid=":"&_schuid=",n=e+i+(new Date).getTime()+""+Math.round(1e4*Math.random());return yh(e).catch((e=>yh(n))).catch((t=>{if("/"!==n.charAt(0))return yh("https://corsproxy.io/?"+encodeURIComponent(e));throw t})).then((e=>{t.forEach((t=>{t.setAttribute("xlink:href",e)}))}))}(t,e))})),Promise.all(i)}var wh=i(2300),Ch=i(9669),Ph=i.n(Ch),kh=i(2643);const Sh={"Alfa Slab One":"assets/custom-fonts/embedded/alfa_slab_one.css","Cherry Swash":"assets/custom-fonts/embedded/cherry_swash.css","Caveat Brush":"assets/custom-fonts/embedded/caveat_brush.css",Heebo:"assets/custom-fonts/embedded/heebo.css","Carter One":"assets/custom-fonts/embedded/carter_one.css","Permanent Marker":"assets/custom-fonts/embedded/permanent_marker.css","Josefin Sans":"assets/custom-fonts/embedded/josefin_sans.css",Knewave:"assets/custom-fonts/embedded/knewave.css",Nunito:"assets/custom-fonts/embedded/nunito.css",Caveat:"assets/custom-fonts/embedded/caveat.css","Indie-Flower":"assets/custom-fonts/embedded/indie_flower.css","Single-Day":"assets/custom-fonts/embedded/single_day.css"};function Ih(e){if(0===e.length)return{exportedItems:[],width:0,height:0};const t=[];let i=null,n=null;const r=[];e.forEach((e=>{if(e.visible&&e.opacity>1e-4){const t=document.querySelector(`g[data-svg-item-container-id="${e.id}"]`);if(t){const s=function(e){const t=[];return(0,fh.Hp)([e],(e=>{e.visible&&e.opacity>1e-4&&"dummy"!==e.shape&&e.selfOpacity>1e-4&&t.push(e)})),(0,gh.av)(t)}(e);i?(i.x=Math.min(i.x,s.x),i.y=Math.min(i.y,s.y)):i={x:s.x,y:s.y},n?(n.x=Math.max(n.x,s.x+s.w),n.y=Math.max(n.y,s.y+s.h)):n={x:s.x+s.w,y:s.y+s.h};const o=t.cloneNode(!0);vh(o),r.push({item:e,itemDom:o})}}})),r.forEach((e=>{const n=e.item,r=e.itemDom,s=(0,gh.rs)(0,0,n),o=(0,gh.mo)(n),a=s.x-i.x,l=s.y-i.y;r.setAttribute("transform",`translate(${a},${l}) rotate(${o})`);const c=(new XMLSerializer).serializeToString(r);t.push({item:n,html:c})}));const s={exportedItems:t,width:n.x-i.x,height:n.y-i.y};return s.width>5&&(s.width=Math.round(s.width)),s.height>5&&(s.height=Math.round(s.height)),s.width<.001&&(s.width=20),s.height<.001&&(s.height=20),s}const Ah={width:100,height:100,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,backgroundColor:null,format:"svg"};function _h(e){const t=Ih(e),i=(0,Fe.UI)(t.exportedItems,(e=>e.html)).join("\n");return{previewSvgHtml:i,width:t.width,height:t.height,exportImage(e){e=(0,kh.I)(e,Ah);const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.innerHTML=i,n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("xmlns:xhtml","http://www.w3.org/1999/xhtml"),n.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");const r=t.width+e.paddingRight+e.paddingLeft,s=t.height+e.paddingBottom+e.paddingTop;return n.setAttribute("viewBox",`${-e.paddingLeft} ${-e.paddingTop} ${r} ${s}`),"png"===e.format&&(n.setAttribute("width",`${e.width}px`),n.setAttribute("height",`${e.height}px`)),bh(n).then((()=>Th(n))).then((()=>{const t=(new XMLSerializer).serializeToString(n);return"png"===e.format?function(e,t){return new Promise(((i,n)=>{const r=`data:image/svg+xml;base64,${(0,wh.cv)(e)}`,s=document.createElement("canvas");s.width=t.width,s.height=t.height;const o=s.getContext("2d"),a=new Image;a.onload=()=>{t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,s.width,s.height)),o.drawImage(a,t.paddingLeft,t.paddingTop),i(s.toDataURL("image/png"))},a.src=r,a.onerror=e=>n(e)}))}(t,e):`data:image/svg+xml;base64,${(0,wh.cv)(t)}`}))}}}function Eh(e,t){if(t||(t=new Set),"div"===e.nodeName.toLowerCase()){const i=e.style.fontFamily;i&&t.add(i.replaceAll(/("|')/g,""))}return e.childNodes.forEach((e=>Eh(e,t))),t}function Th(e){const t=Eh(e),i=[];return t.forEach((e=>{Sh[e]&&i.push(Ph().get(Sh[e]))})),Promise.all(i).then((t=>{t.forEach((t=>{const i=document.createElementNS("http://www.w3.org/2000/svg","defs");i.innerHTML="<style>\n"+t.data+"\n</style>",e.prepend(i)}))})).catch((e=>{console.error(e)}))}var Mh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scheme-editor-webapp"},[i("SchemioEditorApp",{key:"schemio-editor-app-"+e.appReloadKey,attrs:{editorId:e.editorId,scheme:e.scheme,schemePatch:e.schemePatch,mode:e.mode,schemeReloadKey:e.schemeReloadKey,editAllowed:e.editAllowed,modified:e.modified,userStylesEnabled:e.userStylesEnabled,projectArtEnabled:e.projectArtEnabled,schemeTagsEnabled:e.schemeTagsEnabled,menuOptions:e.editorMenuOptions,historyUndoable:e.historyUndoable,historyRedoable:e.historyRedoable,isSaving:e.isSaving,modeControlEnabled:e.modeControlEnabled,saveControlEnabled:e.saveControlEnabled,overridePatchControls:e.overridePatchControls,patchControls:e.patchControls,extraTabs:e.extraTabs,customItemMenuPanels:e.customItemMenuPanels,contextMenuExtraProvider:e.contextMenuExtraProvider,starterTemplates:e.starterTemplates},on:{"custom-tab-event":function(t){return e.$emit("custom-tab-event",t)},"patch-applied":e.onPatchApplied,"mode-change-requested":e.onModeChangeRequested,"scheme-save-requested":e.saveScheme,"history-committed":e.onHistoryCommitted,"undo-history-requested":e.undoHistory,"redo-history-requested":e.redoHistory,"editor-state-changed":e.onEditorStateChanged,"delete-diagram-requested":e.deleteDiagram,"export-picture-requested":e.openExportPictureModal,"context-menu-requested":e.onContextMenuRequested,"patch-origin-toggled":e.onPatchOriginToggled,"patch-modified-toggled":e.onPatchModifiedToggled,"patch-modified-generated":e.onPatchModifiedGenerated,"new-diagram-requested-for-item":function(t){return e.$emit("new-diagram-requested-for-item",arguments[0],arguments[1])},"patched-history-committed":e.onPatchedHistoryCommitted}}),e._v(" "),e.customContextMenu.show?i("ContextMenu",{key:e.customContextMenu.id,attrs:{"mouse-x":e.customContextMenu.mouseX,"mouse-y":e.customContextMenu.mouseY,options:e.customContextMenu.menuOptions},on:{close:function(t){e.customContextMenu.show=!1},selected:e.onCustomContextMenuOptionSelected}}):e._e(),e._v(" "),e.createPatchModalShown?i("CreatePatchModal",{key:"create-patch-modal-"+e.appReloadKey,attrs:{editorId:"scheme-"+e.appReloadKey,originScheme:e.originScheme,scheme:e.modifiedScheme},on:{close:function(t){e.createPatchModalShown=!1}}}):e._e(),e._v(" "),e.importSchemeFileShown?i("div",{staticStyle:{display:"none"}},[i("input",{ref:"importSchemeFileInput",attrs:{type:"file",accept:"application/json"},on:{change:e.onImportSchemeFileInputChanged}})]):e._e(),e._v(" "),e.importSchemeModal.shown?i("ImportSchemeModal",{attrs:{scheme:e.importSchemeModal.scheme},on:{close:function(t){e.importSchemeModal.shown=!1},"import-scheme-submitted":e.importScheme}}):e._e(),e._v(" "),e.exportJSONModalShown?i("export-json-modal",{attrs:{scheme:e.scheme},on:{close:function(t){e.exportJSONModalShown=!1}}}):e._e(),e._v(" "),e.exportPictureModal.shown?i("ExportPictureModal",{attrs:{items:e.exportPictureModal.items,kind:e.exportPictureModal.kind,"background-color":e.exportPictureModal.backgroundColor},on:{close:function(t){e.exportPictureModal.shown=!1}}}):e._e(),e._v(" "),e.exportHTMLModalShown?i("export-html-modal",{attrs:{scheme:e.scheme},on:{close:function(t){e.exportHTMLModalShown=!1}}}):e._e(),e._v(" "),e.loadPatchFileShown?i("div",{staticStyle:{display:"none"}},[i("input",{ref:"loadPatchFileInput",attrs:{type:"file",accept:"application/json"},on:{change:e.onLoadPatchFileInputChanged}})]):e._e()],1)};Mh._withStripped=!0;var $h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scheme-editor-app"},[e.patch.patchedScheme&&e.patch.isToggled?i("SchemeEditor",{key:"patched-scheme-"+e.patch.reloadKey,attrs:{editorId:e.editorId,scheme:e.patch.patchedScheme,mode:e.mode,active:e.active,schemeReloadKey:e.schemeReloadKey,patchIndex:e.patch.index,editAllowed:e.editAllowed,userStylesEnabled:e.userStylesEnabled,projectArtEnabled:e.projectArtEnabled,schemeTagsEnabled:e.schemeTagsEnabled,menuOptions:e.menuOptions,historyUndoable:e.historyUndoable,historyRedoable:e.historyRedoable,isSaving:e.isSaving,modeControlEnabled:e.modeControlEnabled,saveControlEnabled:e.saveControlEnabled,extraTabs:e.extraTabs,customItemMenuPanels:e.customItemMenuPanels,contextMenuExtraProvider:e.contextMenuExtraProvider,starterTemplates:e.starterTemplates},on:{"custom-tab-event":function(t){return e.$emit("custom-tab-event",t)},"items-selected":function(t){return e.$emit("items-selected")},"items-deselected":function(t){return e.$emit("items-deselected")},"new-scheme-submitted":e.onNewSchemeSubmitted,"mode-change-requested":e.onModeChangeRequested,"history-committed":function(t){return e.$emit("patched-history-committed",arguments[0],arguments[1])},"undo-history-requested":function(t){return e.$emit("undo-history-requested")},"redo-history-requested":function(t){return e.$emit("redo-history-requested")},"editor-state-changed":function(t){return e.$emit("editor-state-changed",arguments[0])},"delete-diagram-requested":function(t){return e.$emit("delete-diagram-requested")},"export-picture-requested":function(t){return e.$emit("export-picture-requested",arguments[0],arguments[1])},"context-menu-requested":function(t){return e.$emit("context-menu-requested",arguments[0],arguments[1],arguments[2])},"new-diagram-requested-for-item":function(t){return e.$emit("new-diagram-requested-for-item",arguments[0],arguments[1])}}}):i("SchemeEditor",{key:"origin-scheme",attrs:{editorId:e.editorId,scheme:e.scheme,mode:e.mode,modified:e.modified,active:e.active,schemeReloadKey:e.schemeReloadKey,editAllowed:e.editAllowed,patchIndex:e.patch.index,userStylesEnabled:e.userStylesEnabled,projectArtEnabled:e.projectArtEnabled,schemeTagsEnabled:e.schemeTagsEnabled,menuOptions:e.menuOptions,historyUndoable:e.historyUndoable,historyRedoable:e.historyRedoable,isSaving:e.isSaving,modeControlEnabled:e.modeControlEnabled,saveControlEnabled:e.saveControlEnabled,extraTabs:e.extraTabs,customItemMenuPanels:e.customItemMenuPanels,contextMenuExtraProvider:e.contextMenuExtraProvider,starterTemplates:e.starterTemplates},on:{"custom-tab-event":function(t){return e.$emit("custom-tab-event",t)},"items-selected":function(t){return e.$emit("items-selected")},"items-deselected":function(t){return e.$emit("items-deselected")},"new-scheme-submitted":e.onNewSchemeSubmitted,"mode-change-requested":e.onModeChangeRequested,"scheme-save-requested":function(t){return e.$emit("scheme-save-requested",arguments[0])},"history-committed":function(t){return e.$emit("history-committed",arguments[0],arguments[1])},"undo-history-requested":function(t){return e.$emit("undo-history-requested")},"redo-history-requested":function(t){return e.$emit("redo-history-requested")},"editor-state-changed":function(t){return e.$emit("editor-state-changed",arguments[0])},"delete-diagram-requested":function(t){return e.$emit("delete-diagram-requested")},"export-picture-requested":function(t){return e.$emit("export-picture-requested",arguments[0],arguments[1])},"context-menu-requested":function(t){return e.$emit("context-menu-requested",arguments[0],arguments[1],arguments[2])},"new-diagram-requested-for-item":function(t){return e.$emit("new-diagram-requested-for-item",arguments[0],arguments[1])}}}),e._v(" "),e.scheme&&e.patch.patchedScheme?i("div",{staticClass:"patch-menu-wrapper"},[i("div",{staticClass:"patch-menu-popup"},[e.patch.menuCollapsed?i("div",[i("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.patch.menuCollapsed=!1}}},[i("i",{staticClass:"fa-solid fa-angle-down"})])]):i("div",[i("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.patch.menuCollapsed=!0}}},[i("i",{staticClass:"fa-solid fa-angle-up"})]),e._v(" "),i("div",{staticClass:"toggle-group"},[i("span",{staticClass:"toggle-button",class:[e.patch.isToggled?"toggled":""],attrs:{title:"Displays the changed document"},on:{click:e.showPatchModified}},[e._v("Modified")]),e._v(" "),i("span",{staticClass:"toggle-button",class:[e.patch.isToggled?"":"toggled"],attrs:{title:"Original document without changes"},on:{click:e.showPatchOrigin}},[e._v("Origin")])]),e._v(" "),i("input",{attrs:{type:"checkbox",id:"chk-patch-menu-toggle-diff-coloring"},domProps:{checked:e.patchIsDiffColoringEnabled},on:{input:function(t){return e.updatePatchDiffColoring(arguments[0].target.checked)}}}),e._v(" "),i("label",{attrs:{for:"chk-patch-menu-toggle-diff-coloring"}},[e._v("diff")]),e._v(" "),i("ColorPicker",{attrs:{editorId:e.editorId,color:e.patchAdditionsColor,width:"16px",height:"16px",hint:"Additions",disabled:!e.patchIsDiffColoringEnabled},on:{input:function(t){return e.updatePatchDiffColor("additions",arguments[0])}}}),e._v(" "),i("ColorPicker",{attrs:{editorId:e.editorId,color:e.patchDeletionsColor,width:"16px",height:"16px",hint:"Deletions",disabled:!e.patchIsDiffColoringEnabled},on:{input:function(t){return e.updatePatchDiffColor("deletions",arguments[0])}}}),e._v(" "),i("ColorPicker",{attrs:{editorId:e.editorId,color:e.patchModificationsColor,width:"16px",height:"16px",hint:"Modifications",disabled:!e.patchIsDiffColoringEnabled},on:{input:function(t){return e.updatePatchDiffColor("modifications",arguments[0])}}}),e._v(" "),i("span",{staticClass:"btn btn-secondary",on:{click:function(t){e.patch.detailsModalShown=!0}}},[e._v("Show Changes")]),e._v(" "),e._l(e.patchControls,(function(t){return e.overridePatchControls?i("span",{staticClass:"btn",class:t.css,on:{click:function(e){return t.click()}}},[e._v(e._s(t.name))]):e._e()})),e._v(" "),e.overridePatchControls?e._e():i("span",{staticClass:"btn btn-primary",on:{click:e.applyPatch}},[e._v("Apply")]),e._v(" "),e.overridePatchControls?e._e():i("span",{staticClass:"btn btn-danger",on:{click:e.cancelPatch}},[e._v("Cancel")])],2)])]):e._e(),e._v(" "),e.patch.detailsModalShown?i("Modal",{attrs:{title:"Patch details",width:900},on:{close:function(t){e.patch.detailsModalShown=!1}}},[i("PatchDetails",{attrs:{originSchemeContainer:e.patch.originSchemeContainer,modifiedSchemeContainer:e.patch.modifiedSchemeContainer,patch:e.patch.patch}})],1):e._e(),e._v(" "),i("SystemMessagePanel"),e._v(" "),e.debuggerShown?i("Debugger",{on:{close:function(t){e.debuggerShown=!1}}}):e._e()],1)};$h._withStripped=!0;var Oh=i(2017),Dh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{title:"Debugger"},on:{close:function(t){return e.$emit("close")}}},[e._v("\n    This is Schemio Debugger\n    "),i("p",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.filter,expression:"filter"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Filter (regex)"},domProps:{value:e.filter},on:{input:function(t){t.target.composing||(e.filter=t.target.value)}}})]),e._v(" "),i("div",{staticStyle:{"max-heigh":"500px",overflow:"auto"}},[i("table",[i("thead",[i("tr",[i("th",[e._v("\n                        Logger\n                    ")]),e._v(" "),i("th",[i("input",{attrs:{type:"checkbox"},domProps:{checked:e.allLoggersEnabled},on:{input:function(t){return e.toggleAllLoggers(arguments[0].target.checked)}}})])])]),e._v(" "),i("tbody",e._l(e.loggers,(function(t){return i("tr",[i("td",[e._v(e._s(t.name))]),e._v(" "),i("td",[i("input",{attrs:{type:"checkbox"},domProps:{checked:t.enabled},on:{input:function(i){return e.toggleLogger(t.name,arguments[0].target.checked)}}})])])})),0)])])])};Dh._withStripped=!0;const Bh={components:{Modal:je.Z},data(){const e=[];let t=!0;return(0,Fe.Ed)(Oh.c7.loggers,((i,n)=>{i.enabled||(t=!1),e.push({name:n,enabled:i.enabled,color:i.background})})),{loggers:e,allLoggersEnabled:t,filter:Oh.c7.filterRegex||""}},methods:{toggleLogger(e,t){t?Oh.c7.enable(e):Oh.c7.disable(e)},toggleAllLoggers(e){(0,Fe.Ed)(this.loggers,(t=>{t.enabled=e,this.toggleLogger(t.name,e)}))}},watch:{filter(e){Oh.c7.filter(e)}}},Lh=(0,Re.Z)(Bh,Dh,[],!1,null,null,null).exports;var Rh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"system-message-panel"},[i("div",{staticClass:"messages"},e._l(e.systemMessages,(function(t){return i("transition",{key:"system-message-"+t.id,attrs:{name:"system-message"}},[i("div",{staticClass:"message",class:["message-"+t.status]},[i("span",{staticClass:"close-button",on:{click:function(i){return e.closeMessage(t.id)}}},[i("i",{staticClass:"fas fa-times"})]),e._v(" "),t.iconClass?i("i",{class:t.iconClass}):e._e(),e._v(" "),i("span",[e._v(e._s(t.message))])])])})),1)])};Rh._withStripped=!0;const Nh={methods:{closeMessage(e){nh.Z.removeSystemMessage(this.$store,e)}},computed:{systemMessages(){return this.$store.getters.systemMessages}}},Zh=(0,Re.Z)(Nh,Rh,[],!1,null,null,null).exports;var Fh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"editorComponent",staticClass:"scheme-editor-component"},[e.currentSchemeContainer?i("QuickHelperPanel",{key:"quick-helper-panel-"+e.mode,attrs:{editorId:e.editorId,"scheme-container":e.currentSchemeContainer,mode:e.mode,state:e.state,textSelectionEnabled:e.textSelectionEnabled,zoom:e.zoom,"edit-allowed":e.editAllowed,menuOptions:e.finalMenuOptions,historyUndoable:e.historyState.undoable,historyRedoable:e.historyState.redoable,isRecording:e.isRecording,isScreenGrabbing:e.isScreenGrabbing,modeControlEnabled:e.modeControlEnabled},on:{"shape-prop-changed":e.onItemShapePropChanged,"text-style-prop-change":e.onItemGenericTextSlotPropChanged,"clicked-zoom-to-selection":function(t){return e.zoomToSelection()},"clicked-undo":function(t){return e.historyUndo()},"clicked-redo":function(t){return e.historyRedo()},"clicked-bring-to-front":function(t){return e.bringSelectedItemsToFront()},"clicked-bring-to-back":function(t){return e.bringSelectedItemsToBack()},"clicked-grab-screen":function(t){return e.toggleGrabScreen()},"zoom-changed":e.onZoomChanged,"zoomed-to-items":e.zoomToItems,"mode-changed":e.emitModeChangeRequested,"text-selection-changed":e.onTextSelectionForViewChanged,"stop-drawing-requested":e.stopDrawing,"stop-connecting-requested":e.stopConnecting,"items-highlighted":e.onItemsHighlighted,"mobile-debugger-requested":e.toggleMobileDebugger}},[i("div",{staticClass:"quick-helper-panel-section"},["edit"===e.mode&&"editPath"===e.state?i("ul",{staticClass:"button-group"},[e.curveEditing.selectedPoints.length>0?i("li",[i("span",{staticClass:"toggle-button",class:{dimmed:"L"!=e.curveEditing.selectedPoints[0].t},attrs:{title:"Simple"},on:{click:function(t){return e.convertCurvePointToSimple()}}},[i("img",{attrs:{width:"16px",src:e.assetsPath+"/images/helper-panel/path-point-simple.svg"}})])]):e._e(),e._v(" "),e.curveEditing.selectedPoints.length>0?i("li",[i("span",{staticClass:"toggle-button",class:{dimmed:"B"!=e.curveEditing.selectedPoints[0].t},attrs:{title:"Simple"},on:{click:function(t){return e.convertCurvePointToBezier()}}},[i("img",{attrs:{width:"20px",src:e.assetsPath+"/images/helper-panel/path-point-bezier.svg"}})])]):e._e(),e._v(" "),i("li",[i("span",{staticClass:"btn btn-small btn-secondary",on:{click:e.onPathEditStopped}},[e._v("Stop edit")])])]):e._e(),e._v(" "),e.saveControlEnabled&&"edit"===e.mode&&"editPath"!==e.state&&"draw"!==e.state&&"connecting"!==e.state&&(e.modified||e.statusMessage.message)?i("ul",{staticClass:"button-group"},[e.modified?i("li",[e.isSaving?i("span",{staticClass:"btn btn-primary",on:{click:function(t){return e.saveScheme()}}},[i("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" Saving...")]):i("span",{staticClass:"btn btn-primary",on:{click:function(t){return e.saveScheme()}}},[e._v("Save")])]):e._e(),e._v(" "),e.statusMessage.message?i("li",[i("div",{staticClass:"msg",class:{"msg-error":e.statusMessage.isError,"msg-info":!e.statusMessage.isError}},[e._v("\n                        "+e._s(e.statusMessage.message)+"\n                        "),i("span",{staticClass:"msg-close",on:{click:e.clearStatusMessage}},[i("i",{staticClass:"fas fa-times"})])])]):e._e()]):e._e(),e._v(" "),e.animationRecorder?i("ul",{staticClass:"button-group"},[i("li",[i("span",{staticClass:"btn btn-danger",on:{click:function(t){return e.stopAnimationRecording()}}},[e._v("Stop recording")])])]):e._e(),e._v(" "),e.animationRecorderIsExporting?i("ul",{staticClass:"button-group"},[i("li",[e._v("\n                    Processing animation ...\n                ")])]):e._e()]),e._v(" "),i("div",{staticClass:"filler"}),e._v(" "),i("div",{staticClass:"quick-helper-panel-section"},[i("ul",{staticClass:"button-group"},[i("li",[e.fullScreen?i("span",{staticClass:"toggle-button",attrs:{title:"Exit fullscreen"},on:{click:e.exitFullScreen}},[i("i",{staticClass:"fa-solid fa-compress"})]):i("span",{staticClass:"toggle-button",attrs:{title:"Fullscreen view"},on:{click:e.switchToFullScreen}},[i("i",{staticClass:"fa-solid fa-expand"})])])])])]):e._e(),e._v(" "),i("div",{ref:"middleSection",staticClass:"scheme-editor-middle-section"},[!e.schemeContainer&&e.schemeLoadErrorMessage?i("div",{staticClass:"scheme-error-message"},[i("h3",[e._v(e._s(e.schemeLoadErrorMessage))])]):e._e(),e._v(" "),e.schemeContainer?i("div",{staticClass:"scheme-container"},[e.schemeContainer&&"edit"===e.mode?i("SvgEditor",{key:e.schemeContainer.scheme.id+"-edit-"+e.editorRevision,class:["state-"+e.state,"sub-state-"+e.editorSubStateName],attrs:{editorId:e.editorId,itemsReloadKey:e.svgEditorRevision,schemeContainer:e.schemeContainer,patchIndex:e.patchIndex,mode:e.mode,zoom:e.zoom,highlightedItems:e.highlightedItems,zoomedItems:e.zoomedItems,zoomToItemsTrigger:e.zoomToItemsTrigger,stateLayerShown:"draw"===e.state||"createItem"===e.state,screenTransform:e.initialScreenTransform},on:{"mouse-wheel":e.mouseWheel,"mouse-move":e.mouseMove,"mouse-down":e.mouseDown,"mouse-up":e.mouseUp,"mouse-double-click":e.mouseDoubleClick,"svg-size-updated":e.onSvgSizeUpdated,"screen-transform-updated":e.onScreenTransformUpdated}},[i("g",{attrs:{slot:"scene-transform"},slot:"scene-transform"},[e.schemeContainer.editBox&&"editPath"!==e.state&&"cropImage"!==e.state&&"imageBox"!==e.state&&!e.inPlaceTextEditor.shown?i("EditBox",{key:"edit-box-"+e.editorRevision+"-"+e.schemeContainer.editBox.id,attrs:{useFill:"pickElement"!==e.state&&e.editBoxUseFill,editorId:e.editorId,schemeContainer:e.schemeContainer,cursor:{x:e.cursorX,y:e.cursorY},apiClient:e.apiClient,"edit-box":e.schemeContainer.editBox,zoom:e.schemeContainer.screenTransform.scale,boundaryBoxColor:e.schemeContainer.scheme.style.boundaryBoxColor,controlPointsColor:e.schemeContainer.scheme.style.controlPointsColor},on:{"custom-control-clicked":e.onEditBoxCustomControlClicked,"template-rebuild-requested":e.onEditBoxTemplateRebuildRequested}}):e._e(),e._v(" "),"cropImage"===e.state&&e.cropImage.editBox?i("EditBox",{key:"crop-image-edit-box-"+e.editorRevision,attrs:{kind:"crop-image",editorId:e.editorId,schemeContainer:e.schemeContainer,cursor:{x:e.cursorX,y:e.cursorY},apiClient:e.apiClient,"edit-box":e.cropImage.editBox,zoom:e.schemeContainer.screenTransform.scale,boundaryBoxColor:e.schemeContainer.scheme.style.boundaryBoxColor,controlPointsColor:e.schemeContainer.scheme.style.controlPointsColor},on:{"custom-control-clicked":e.onEditBoxCustomControlClicked}}):e._e(),e._v(" "),"imageBox"===e.state&&e.imageBox.editBox?i("EditBox",{key:"image-box-edit-box-"+e.editorRevision,attrs:{kind:"crop-image",editorId:e.editorId,schemeContainer:e.schemeContainer,cursor:{x:e.cursorX,y:e.cursorY},apiClient:e.apiClient,"edit-box":e.imageBox.editBox,zoom:e.schemeContainer.screenTransform.scale,boundaryBoxColor:e.schemeContainer.scheme.style.boundaryBoxColor,controlPointsColor:e.schemeContainer.scheme.style.controlPointsColor},on:{"custom-control-clicked":e.onEditBoxCustomControlClicked}}):e._e(),e._v(" "),"editPath"===e.state&&e.curveEditing.item&&e.curveEditing.item.meta?i("g",[i("PathEditBox",{key:"item-curve-edit-box-"+e.editorRevision+"-"+e.curveEditing.item.id,attrs:{editorId:e.editorId,item:e.curveEditing.item,curvePaths:e.curveEditing.paths,pathPointsUpdateKey:e.pathPointsUpdateKey,zoom:e.schemeContainer.screenTransform.scale,"boundary-box-color":e.schemeContainer.scheme.style.boundaryBoxColor,"control-points-color":e.schemeContainer.scheme.style.controlPointsColor}})],1):e._e()],1),e._v(" "),i("div",{attrs:{slot:"overlay"},slot:"overlay"},["pickElement"===e.state?i("div",{staticClass:"editor-top-hint-label"},[e._v("Click any element to pick it")]):e._e(),e._v(" "),e.floatingHelperPanel.shown&&e.floatingHelperPanel.item?i("FloatingHelperPanel",{key:"floating-helper-panel-"+e.editorRevision+"-"+e.floatingHelperPanel.item.id,attrs:{editorId:e.editorId,x:e.floatingHelperPanel.x,y:e.floatingHelperPanel.y,item:e.floatingHelperPanel.item,schemeContainer:e.schemeContainer},on:{"item-updated":e.onItemUpdatedInFloatingHelperPanel,"edit-path-requested":e.onEditPathRequested,"image-crop-requested":e.startCroppingImage,close:function(t){e.floatingHelperPanel.shown=!1}}}):e._e(),e._v(" "),e.starterProposalModalShown&&e.starterTemplates&&e.starterTemplates.length>0?i("StarterProposalModal",{attrs:{templates:e.starterTemplates},on:{close:e.closeStarterProposalModal,selected:e.onStarterProposalSelected}}):e._e()],1)]):e._e(),e._v(" "),e.interactiveSchemeContainer&&"view"===e.mode?i("SvgEditor",{key:e.schemeContainer.scheme.id+"-view-"+e.editorRevision,class:["state-"+e.state,"sub-state-"+e.editorSubStateName],attrs:{itemsReloadKey:e.svgEditorRevision,editorId:e.editorId,schemeContainer:e.interactiveSchemeContainer,patchIndex:e.patchIndex,mode:e.mode,textSelectionEnabled:e.textSelectionEnabled,zoom:e.zoom,userEventBus:e.userEventBus,highlightedItems:e.highlightedItems,zoomedItems:e.zoomedItems,zoomToItemsTrigger:e.zoomToItemsTrigger,screenTransform:e.initialScreenTransform},on:{"mouse-wheel":e.mouseWheel,"mouse-move":e.mouseMove,"mouse-down":e.mouseDown,"mouse-up":e.mouseUp,"mouse-double-click":e.mouseDoubleClick,"svg-size-updated":e.onSvgSizeUpdated,"screen-transform-updated":e.onScreenTransformUpdated}},[i("div",{attrs:{slot:"overlay"},slot:"overlay"},["view"===e.mode&&e.textSelectionEnabled?i("div",{staticClass:"editor-top-hint-label"},[e._v("\n                        You can select any text, but you cannot interact with items\n                        "),i("span",{staticClass:"btn btn-primary",on:{click:function(t){e.textSelectionEnabled=!1}}},[e._v("Cancel")])]):e._e()])]):e._e(),e._v(" "),e.inPlaceTextEditor.shown?i("InPlaceTextEditBox",{key:"in-place-text-edit-"+e.inPlaceTextEditor.item.id+"-"+e.inPlaceTextEditor.slotName,attrs:{editorId:e.editorId,item:e.inPlaceTextEditor.item,slotName:e.inPlaceTextEditor.slotName,area:e.inPlaceTextEditor.area,"css-style":e.inPlaceTextEditor.style,text:e.inPlaceTextEditor.text,"markup-disabled":e.inPlaceTextEditor.markupDisabled,"creating-new-item":e.inPlaceTextEditor.creatingNewItem,scalingVector:e.inPlaceTextEditor.scalingVector,zoom:e.schemeContainer.screenTransform.scale,mouseDownId:e.mouseDownId},on:{close:e.closeItemTextEditor,updated:e.onInPlaceTextEditorUpdate,"item-renamed":e.onInPlaceTextEditorItemRenamed,"item-area-changed":e.onInPlaceTextEditorItemAreaChanged,"item-text-cleared":e.onInPlaceTextEditorItemTextCleared}}):e._e()],1):e._e(),e._v(" "),"edit"===e.mode&&(e.selectedItem&&"frame_player"===e.selectedItem.shape||e.currentAnimatorFramePlayer)?i("div",{staticClass:"bottom-panel",style:{height:e.currentAnimatorFramePlayer?e.bottomPanelHeight+"px":null}},[e.currentAnimatorFramePlayer?i("div",{staticClass:"bottom-panel-dragger",on:{touchstart:e.onBottomPanelMouseDown,mousedown:e.onBottomPanelMouseDown}}):e._e(),e._v(" "),i("div",{staticClass:"bottom-panel-body"},[i("div",{staticClass:"side-panel-filler-left",style:{width:e.sidePanelLeftWidth+"px"}}),e._v(" "),i("div",{staticClass:"bottom-panel-content"},[e.currentAnimatorFramePlayer?i("FrameAnimatorPanel",{key:e.currentAnimatorFramePlayer.id,attrs:{editorId:e.editorId,schemeContainer:e.schemeContainer,framePlayer:e.currentAnimatorFramePlayer,light:!1},on:{close:e.closeAnimatorEditor,"recording-state-updated":e.onFrameAnimatorRectordingStateUpdated}}):e.selectedItem?i("FrameAnimatorPanel",{key:e.selectedItem.id,attrs:{editorId:e.editorId,schemeContainer:e.schemeContainer,framePlayer:e.selectedItem,light:!0},on:{"animation-editor-opened":e.onAnimatiorEditorOpened,"recording-state-updated":e.onFrameAnimatorRectordingStateUpdated}}):e._e()],1),e._v(" "),i("div",{staticClass:"side-panel-filler-right",style:{width:e.sidePanelRightWidth+"px"}})])]):"edit"===e.mode&&e.selectedItem&&"component"===e.selectedItem.shape?i("div",{staticClass:"bottom-panel"},[i("div",{staticClass:"bottom-panel-body"},[i("div",{staticClass:"side-panel-filler-left",style:{width:e.sidePanelLeftWidth+"px"}}),e._v(" "),i("div",{staticClass:"bottom-panel-content"},[i("div",{staticClass:"toggle-group"},[i("span",{staticClass:"toggle-button",class:{toggled:"external"==e.selectedItem.shapeProps.kind},attrs:{title:"Loads external diagram"},on:{click:function(t){return e.switchSelectedComponentKind("external")}}},[e._v("\n                            External\n                        ")]),e._v(" "),i("span",{staticClass:"toggle-button",class:{toggled:"embedded"==e.selectedItem.shapeProps.kind},attrs:{title:"Use items in the same document"},on:{click:function(t){return e.switchSelectedComponentKind("embedded")}}},[e._v("\n                            Embedded\n                        ")])]),e._v(" "),"external"==e.selectedItem.shapeProps.kind?i("div",{staticClass:"diagram-controls"},[i("span",{staticClass:"label"},[e._v("External diagram: ")]),e._v(" "),i("DiagramPicker",{key:"selected-component-diagram-picker-"+e.selectedItem.id+"-"+e.selectedItem.shapeProps.schemeId,attrs:{diagramId:e.selectedItem.shapeProps.schemeId},on:{"diagram-selected":e.onDiagramPickedForSelectedComponent}})],1):e._e(),e._v(" "),"embedded"==e.selectedItem.shapeProps.kind?i("div",{staticClass:"diagram-controls"},[i("span",{staticClass:"label"},[e._v("Reference Item: ")]),e._v(" "),i("ElementPicker",{attrs:{editorId:e.editorId,element:e.selectedItem.shapeProps.referenceItem,schemeContainer:e.schemeContainer,useSelf:!1},on:{selected:e.setSelectedComponentReferenceItem}})],1):e._e()]),e._v(" "),i("div",{staticClass:"side-panel-filler-right",style:{width:e.sidePanelRightWidth+"px"}})])]):"edit"===e.mode&&"editPath"===e.state?i("div",{staticClass:"bottom-panel"},[i("div",{staticClass:"bottom-panel-body"},[i("div",{staticClass:"side-panel-filler-left",style:{width:e.sidePanelLeftWidth+"px"}}),e._v(" "),i("div",{staticClass:"bottom-panel-content"},[1!==e.curveEditing.selectedPoints.length?i("span",{staticClass:"label"},[e._v("x: "+e._s(e._f("prettifyAxisValue")(e.cursorX,e.zoom)))]):e._e(),e._v(" "),1!==e.curveEditing.selectedPoints.length?i("span",{staticClass:"label"},[e._v("y: "+e._s(e._f("prettifyAxisValue")(e.cursorY,e.zoom)))]):e._e(),e._v(" "),1===e.curveEditing.selectedPoints.length?i("div",{staticClass:"first-selected-point"},[i("span",{staticClass:"label"},[e._v("x: ")]),e._v(" "),i("input",{staticClass:"textfield",attrs:{type:"text"},domProps:{value:e.prettifyAxisValue(e.curveEditing.selectedPoints[0].x,e.zoom)},on:{blur:function(t){return e.onCurveEditingPointInput(t.target.value,"x")},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onCurveEditingPointInput(t.target.value,"x")}}}),e._v(" "),i("span",{staticClass:"label"},[e._v("y: ")]),e._v(" "),i("input",{staticClass:"textfield",attrs:{type:"text"},domProps:{value:e.prettifyAxisValue(e.curveEditing.selectedPoints[0].y,e.zoom)},on:{blur:function(t){return e.onCurveEditingPointInput(t.target.value,"y")},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onCurveEditingPointInput(t.target.value,"y")}}}),e._v(" "),"A"===e.curveEditing.selectedPoints[0].t?i("span",{staticClass:"label"},[e._v("arc height:")]):e._e(),e._v(" "),"A"===e.curveEditing.selectedPoints[0].t?i("input",{staticClass:"textfield",attrs:{type:"text"},domProps:{value:e.prettifyAxisValue(e.curveEditing.selectedPoints[0].h,e.zoom)},on:{input:function(t){return e.onCurveEditingArcHeightInput(t.target.value)}}}):e._e()]):e._e()]),e._v(" "),i("div",{staticClass:"side-panel-filler-right",style:{width:e.sidePanelRightWidth+"px"}})])]):e._e(),e._v(" "),"edit"===e.mode&&e.schemeContainer?i("div",{ref:"sidePanelLeft",staticClass:"side-panel side-panel-left",style:{width:e.sidePanelLeftWidth+"px"}},[i("span",{staticClass:"side-panel-expander",on:{touchstart:e.onLeftSidePanelExpanderMouseDown,mousedown:e.onLeftSidePanelExpanderMouseDown}},[e.sidePanelLeftWidth>0?i("i",{staticClass:"fas fa-angle-left"}):i("i",{staticClass:"fas fa-angle-right"})]),e._v(" "),e.sidePanelLeftWidth>0?i("div",{staticClass:"side-panel-overflow"},[i("div",{staticClass:"wrapper"},[i("CreateItemMenu",{key:e.editorId+"-"+e.schemeContainer.scheme.id,attrs:{editorId:e.editorId,"scheme-container":e.schemeContainer,projectArtEnabled:e.projectArtEnabled,customItemMenuPanels:e.customItemMenuPanels},on:{"item-picked-for-creation":e.switchStateCreateItem,"path-edited":e.startPathEditing,"drawing-pencil-requested":e.switchStatePencilDrawing,"drawing-brush-requested":e.switchStateBrushDrawing,"state-drag-item-requested":e.cancelCurrentState,"item-creation-dragged-to-editor":e.itemCreationDraggedToSvgEditor}})],1)]):e._e()]):e._e(),e._v(" "),e.schemeContainer?i("div",{ref:"sidePanelRight",staticClass:"side-panel side-panel-right",style:{width:e.sidePanelRightWidth+"px"}},[i("span",{staticClass:"side-panel-expander",on:{touchstart:e.onRightSidePanelExpanderMouseDown,mousedown:e.onRightSidePanelExpanderMouseDown}},[e.sidePanelRightWidth>0?i("i",{staticClass:"fas fa-angle-right"}):i("i",{staticClass:"fas fa-angle-left"})]),e._v(" "),e.sidePanelRightWidth>0?i("div",{staticClass:"side-panel-overflow"},[e.inPlaceTextEditor.shown?i("ul",{staticClass:"tabs text-nonselectable"},[e._m(0)]):"draw"===e.state?i("ul",{staticClass:"tabs text-nonselectable"},[e._m(1)]):i("ul",{staticClass:"tabs"},[e._l(e.tabs,(function(t){return i("li",[i("span",{staticClass:"tab",class:{active:e.currentTab===t},on:{click:function(i){return e.changeTab(t)}}},[e._v(e._s(t))])])})),e._v(" "),e._l(e.extraTabs,(function(t){return i("li",[i("div",{staticClass:"tab",class:{active:e.currentTab==="extra:"+t.name},on:{click:function(i){return e.changeTab("extra:"+t.name)}}},[t.icon?i("i",{staticClass:"tab-icon",class:t.icon}):i("span",[e._v(e._s(t.name))]),e._v(" "),t.count?i("span",[e._v("("+e._s(t.count)+")")]):e._e()])])})),e._v(" "),e._l(e.itemTextSlotsAvailable,(function(t){return"edit"===e.mode?i("li",[i("span",{staticClass:"tab",class:{active:e.currentTab===t.tabName},on:{click:function(i){return e.changeTab(t.tabName)}}},[e._v(" "+e._s(t.slotName))])]):e._e()})),e._v(" "),"view"!==e.mode&&e.selectedTemplateRef&&e.selectedTemplateRootItem?i("li",[i("span",{staticClass:"tab",class:{active:"template"===e.currentTab},on:{click:function(t){return e.changeTab("template")}}},[i("i",{staticClass:"fa-solid fa-scroll"}),e._v("Template")])]):e._e()],2),e._v(" "),i("span",{staticClass:"side-panel-close",on:{click:function(t){return e.hideSidePanelRight()}}},[e._v("Close")]),e._v(" "),"draw"===e.state?i("div",{staticClass:"tabs-body"},[i("DrawingControlsPanel",{attrs:{isBrush:e.isDrawingBrush},on:{"color-picked":e.onDrawColorPicked,"stop-drawing-requested":e.stopDrawing}})],1):i("div",{staticClass:"tabs-body"},["Doc"===e.currentTab&&e.schemeContainer&&!e.inPlaceTextEditor.shown?i("div",["edit"===e.mode?i("SchemeProperties",{attrs:{"scheme-container":e.schemeContainer,editorId:e.editorId,schemeTagsEnabled:e.schemeTagsEnabled},on:{"delete-diagram-requested":function(t){return e.$emit("delete-diagram-requested")}}}):i("scheme-details",{attrs:{scheme:e.schemeContainer.scheme}})],1):e._e(),e._v(" "),"Item"!==e.currentTab||e.inPlaceTextEditor.shown?e._e():i("div",["edit"===e.mode?i("div",[i("panel",{attrs:{name:"Items"}},[i("ItemSelector",{key:e.schemeRevision+"-"+e.schemeContainer.revision,attrs:{editorId:e.editorId,"scheme-container":e.schemeContainer,"min-height":200},on:{"item-right-clicked":e.onItemRightClick}})],1),e._v(" "),e.schemeContainer.selectedItems.length>0?i("ItemProperties",{key:e.schemeRevision+"-"+e.schemeContainer.selectedItems[0].id+"-"+e.schemeContainer.selectedItems[0].shape,attrs:{editorId:e.editorId,item:e.schemeContainer.selectedItems[0],revision:e.schemeRevision,schemeContainer:e.schemeContainer,userStylesEnabled:e.userStylesEnabled},on:{"shape-prop-changed":e.onItemShapePropChanged,"item-field-changed":e.onItemFieldChanged,"item-style-applied":e.onItemStyleApplied,"shape-changed":e.onItemShapeChanged}}):e._e()],1):e._e(),e._v(" "),e.sidePanelItemForViewMode&&"view"===e.mode?i("item-details",{attrs:{item:e.sidePanelItemForViewMode}}):e._e()],1),e._v(" "),"view"!==e.mode&&"template"===e.currentTab&&!e.inPlaceTextEditor.shown&&e.selectedTemplateRootItem&&e.selectedTemplateRef?i("div",[i("TemplateProperties",{key:e.schemeRevision+"-"+e.selectedTemplateRootItem.id+"-"+e.selectedTemplateRootItem.shape+"-"+e.templatePropertiesKey,attrs:{editorId:e.editorId,item:e.selectedTemplateRootItem,schemeContainer:e.schemeContainer,templateRef:e.selectedTemplateRef},on:{updated:e.onTemplatePropertiesUpdated,"break-template":e.breakTemplate,"update-template":e.updateTemplate,"template-rebuild-requested":e.onEditBoxTemplateRebuildRequested}})],1):e._e(),e._v(" "),e.inPlaceTextEditor.shown&&"edit"===e.mode?i("div",[i("TextSlotProperties",{attrs:{editorId:e.editorId,item:e.inPlaceTextEditor.item,"slot-name":e.inPlaceTextEditor.slotName},on:{"moved-to-slot":function(t){return e.onTextSlotMoved(e.inPlaceTextEditor.item,e.inPlaceTextEditor.slotName,arguments[0])},"property-changed":function(t){return e.onInPlaceEditTextPropertyChanged(e.inPlaceTextEditor.item,e.inPlaceTextEditor.slotName,arguments[0],arguments[1])}}})],1):e._e(),e._v(" "),i("div",[e._l(e.itemTextSlotsAvailable,(function(t){return"edit"===e.mode&&e.currentTab===t.tabName?i("TextSlotProperties",{key:"text-slot-"+t.item.id+"-"+t.slotName,attrs:{editorId:e.editorId,item:t.item,"slot-name":t.slotName},on:{"moved-to-slot":function(i){return e.onTextSlotMoved(t.item,t.slotName,arguments[0])},"property-changed":function(i){return e.onTextPropertyChanged(t.slotName,arguments[0],arguments[1])}}}):e._e()})),e._v(" "),e._l(e.extraTabs,(function(t){return e.currentTab==="extra:"+t.name?i(t.component,{key:"tab-"+e.currentTab,tag:"component",attrs:{mode:e.mode},on:{"tab-event":function(t){return e.$emit("custom-tab-event",t)}}}):e._e()}))],2)])]):e._e()]):e._e()]),e._v(" "),e.addLinkPopup.shown?i("LinkEditModal",{attrs:{edit:!1,title:"",url:"",type:""},on:{"submit-link":e.onItemLinkSubmit,close:function(t){e.addLinkPopup.shown=!1}}}):e._e(),e._v(" "),e.itemTooltip.shown?i("ItemTooltip",{key:"item-tooltip-"+e.itemTooltip.id,attrs:{item:e.itemTooltip.item,x:e.itemTooltip.x,y:e.itemTooltip.y},on:{close:function(t){e.itemTooltip.shown=!1}}}):e._e(),e._v(" "),e.itemDetails.item?i("ItemTooltip",{key:"item-details-tooltip-"+e.itemDetails.item.id,attrs:{item:e.itemDetails.item,x:e.itemDetails.x,y:e.itemDetails.y,isShortDetails:!0},on:{mouseover:e.onItemDetailsTooltipMouseOver,mouseleave:e.onItemDetailsTooltipMouseLeave,close:function(t){e.itemDetails.item=null}}}):e._e(),e._v(" "),e.connectorProposedDestination&&e.connectorProposedDestination.shown?i("connector-destination-proposal",{attrs:{x:e.connectorProposedDestination.mx,y:e.connectorProposedDestination.my,"connector-item-id":e.connectorProposedDestination.connectorItemId,"scheme-container":e.schemeContainer},on:{"item-selected":e.onConnectorDestinationItemSelected,close:function(t){return e.closeConnectorProposedDestination()}}}):e._e(),e._v(" "),e.exportShapeModal.shown?i("ShapeExporterModal",{attrs:{shapeGroupItem:e.exportShapeModal.shapeGroupItem},on:{close:function(t){e.exportShapeModal.shown=!1}}}):e._e(),e._v(" "),e.mobileDebuggerShown?i("modal",{attrs:{title:"hello"},on:{close:function(t){e.mobileDebuggerShown=!1}}},[i("ul",{staticClass:"mobile-debugger-log"},e._l(e.mobileLogEntries,(function(t){return i("li",{class:["log-level-"+t.level]},[e._v(e._s(t.text))])})),0)]):e._e(),e._v(" "),e.isLoading?i("modal",{attrs:{width:380,"show-header":!1,"show-footer":!1,"use-mask":!1}},[i("div",{staticClass:"scheme-loading-icon"},["load"===e.loadingStep?i("div",[i("i",{staticClass:"fas fa-spinner fa-spin fa-1x"}),e._v(" "),i("span",[e._v("Loading diagram...")])]):e._e(),e._v(" "),"load-shapes"===e.loadingStep?i("div",[i("i",{staticClass:"fas fa-spinner fa-spin fa-1x"}),e._v(" "),i("span",[e._v("Loading shapes...")])]):e._e(),e._v(" "),"img-preload"===e.loadingStep?i("div",[i("i",{staticClass:"fas fa-spinner fa-spin fa-1x"}),e._v(" "),i("span",[e._v("Preloading all images...  ")]),e._v(" "),i("span",{staticClass:"btn btn-secondary",on:{click:function(t){e.isLoading=!1}}},[e._v("Skip")])]):e._e()])]):e._e(),e._v(" "),e.isCopying?i("modal",{attrs:{width:380,"show-header":!1,"show-footer":!1,"use-mask":!1}},[i("div",{staticClass:"scheme-loading-icon"},[i("div",[i("i",{staticClass:"fas fa-spinner fa-spin fa-1x"}),e._v(" "),i("span",[e._v("Copying...  ")]),e._v(" "),i("span",{staticClass:"btn btn-secondary",on:{click:function(t){e.isCopying=!1}}},[e._v("Cancel")])])])]):e._e(),e._v(" "),e.exportTemplateModal.shown?i("export-template-modal",{attrs:{item:e.exportTemplateModal.item},on:{close:function(t){e.exportTemplateModal.shown=!1}}}):e._e(),e._v(" "),e.exportAnimationModalShown?i("ExportAnimationModal",{attrs:{editorId:e.editorId,schemeContainer:e.schemeContainer},on:{close:function(t){e.exportAnimationModalShown=!1},"export-requested":e.onAnimationExportRequested}}):e._e()],1)};Fh._withStripped=!0;var jh=i(1068),zh=i(3590);const Uh="escape",Hh="delete",qh="ctrl",Wh="cmd",Vh="shift",Gh="ctrl-a",Kh="ctrl-c",Jh="ctrl-v",Yh="ctrl-s",Qh="ctrl-x",Xh="ctrl-z",ed="ctrl-0",td="ctrl-shift-z",id="arrow-up",nd="arrow-down",rd="arrow-left",sd="arrow-right",od="space",ad="minus",ld="equals",cd={};function hd(e){return(0,Fe.w_)(cd,(t=>t(e)))}cd[Uh]=e=>"Escape"===e.key||"Esc"===e.key||27===e.keyCode,cd[Hh]=e=>"Backspace"===e.key||"Delete"===e.key||8===e.keyCode||127===e.keyCode,cd[Qh]=e=>"x"===e.key&&(e.metaKey||e.ctrlKey),cd[Gh]=e=>"a"===e.key&&(e.metaKey||e.ctrlKey),cd[Kh]=e=>"c"===e.key&&(e.metaKey||e.ctrlKey),cd[Jh]=e=>"v"===e.key&&(e.metaKey||e.ctrlKey),cd[Yh]=e=>"s"===e.key&&(e.metaKey||e.ctrlKey),cd[Xh]=e=>"z"===e.key&&(e.metaKey||e.ctrlKey)&&!e.shiftKey,cd[ed]=e=>48===e.keyCode&&(e.metaKey||e.ctrlKey)&&!e.shiftKey,cd[td]=e=>"z"===e.key&&(e.metaKey||e.ctrlKey)&&e.shiftKey,cd[rd]=e=>"ArrowLeft"===e.key,cd[sd]=e=>"ArrowRight"===e.key,cd[id]=e=>"ArrowUp"===e.key,cd[nd]=e=>"ArrowDown"===e.key,cd[od]=e=>" "===e.key||32===e.keyCode,cd[ad]=e=>"-"===e.key||189===e.keyCode,cd[ld]=e=>"="===e.key||187===e.keyCode,cd[qh]=e=>"Control"===e.key,cd[Wh]=e=>"Meta"===e.key,cd[Vh]=e=>"Shift"===e.key;const dd=new(t())({});let ud=null;function pd(e,t){if(t||(ud=null),(e=e||window.event).target!==document.body)return;const i=hd(e);if(i){if(t){if(ud===i&&!i.startsWith("arrow-"))return;ud=i}i===Gh&&e.target&&"body"===e.target.nodeName.toLowerCase()&&e.preventDefault(),dd.$emit("key-press",t,i,{ctrlCmdPressed:e.metaKey||e.ctrlKey},e)}}document.addEventListener("keydown",(e=>pd(e,!0))),document.addEventListener("keyup",(e=>pd(e,!1)));var md=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"section"},[i("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.$emit("stop-drawing-requested")}}},[e._v("Stop Drawing")])]),e._v(" "),i("div",{staticClass:"section"},e._l(e.drawColorPallete,(function(t){return i("div",{staticClass:"draw-color-pallete-option",style:{background:t},on:{click:function(i){return e.$emit("color-picked",t)}}})})),0),e._v(" "),i("table",{staticClass:"properties-table"},[i("tbody",[e.isBrush?i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Size")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("NumberTextfield",{attrs:{value:e.brushSize,min:1,max:1e3},on:{changed:e.onBrushSizeChanged}})],1)]):i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Size")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("NumberTextfield",{attrs:{value:e.pencilSize,min:1,max:1e3},on:{changed:e.onPencilSizeChanged}})],1)]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Smoothing")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("NumberTextfield",{attrs:{value:e.drawEpsilon,min:0,max:1e3},on:{changed:e.onDrawEpsilonChanged}})],1)])])])])};md._withStripped=!0;var fd=i(9240);function gd(){const e=[[90,79],[72,63],[61,40],[94,34]],t=[];for(let i=0;i<6;i++){const n=60*i;e.forEach((([e,i])=>{t.push(`hsl(${n},${e}%,${i}%)`)}))}return t}const vd={props:{isBrush:{type:Boolean,default:!1}},components:{NumberTextfield:fd.Z},data:()=>({drawColorPallete:["rgba(0,0,0,1)","rgba(76,76,76,1)","rgba(128,128,128,1)","rgba(170,170,170,1)","rgba(255,255,255,1)"].concat(gd()),brushSize:10}),methods:{onDrawEpsilonChanged(e){this.$store.dispatch("updateDrawEpsilon",e)},onBrushSizeChanged(e){this.$store.dispatch("updateDrawBrushSize",e)},onPencilSizeChanged(e){this.$store.dispatch("updateDrawPencilSize",e)}},computed:{drawEpsilon(){return this.$store.getters.drawEpsilon},pencilSize(){return this.$store.getters.drawPencilSize},brushSize(){return this.$store.getters.drawBrushSize}}},yd=(0,Re.Z)(vd,md,[],!1,null,null,null).exports;var xd=i(1377),bd=i(5635),wd=i(2373),Cd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"svg-editor",attrs:{id:"svg-editor"}},[i("svg",{ref:"svgDomElement",staticClass:"svg-editor-plot",class:e.cssClass,style:{background:e.schemeContainer.scheme.style.backgroundColor},attrs:{id:"svg-plot-"+e.editorId,"data-void":"true",oncontextmenu:"return false;"},on:{mousemove:e.mouseMove,touchstart:e.touchStart,touchend:e.touchEnd,touchmove:e.touchMove,mousedown:e.mouseDown,mouseup:e.mouseUp,dragenter:e.onDragEnter,dragover:e.onDragOver,dragleave:e.onDragLeave}},["view"===e.mode&&e.schemeContainer?i("g",[i("g",{attrs:{"data-type":"scene-transform",transform:e.transformSvg}},[e._l(e.schemeContainer.worldItems,(function(t){return t.visible&&"hud"!==t.shape?i("g",{staticClass:"item-container",class:"item-cursor-"+t.cursor},[i("ItemSvg",{key:t.id+"-"+t.shape+"-"+e.textSelectionEnabled+"-"+e.itemsReloadKey,attrs:{item:t,editorId:e.editorId,mode:e.mode,textSelectionEnabled:e.textSelectionEnabled,patchIndex:e.patchIndex},on:{"frame-animator":e.onFrameAnimatorEvent}})],1):e._e()})),e._v(" "),e._l(e.worldHighlightedItems,(function(t){return i("g",{attrs:{transform:t.transform}},[i("path",{style:{opacity:t.opacity},attrs:{d:t.path,fill:t.fill,stroke:t.stroke,"stroke-width":t.strokeSize+6/(t.scalingFactor*e.safeZoom)+"px","data-item-id":t.id,"data-preview-ignore":"true"}})])}))],2),e._v(" "),e._l(e.selectedItemLinks,(function(t,n){return i("g",{attrs:{"data-preview-ignore":"true"}},[i("a",{staticClass:"item-link",attrs:{id:"item-link-"+n,"xlink:href":e.linksAnimated?"#":t.url,target:"_blank",title:t.title},on:{click:function(i){return e.onSvgItemLinkClick(t.url,arguments[0])}}},[i("circle",{attrs:{cx:t.x,cy:t.y,r:12,stroke:e.linkPalette[n%e.linkPalette.length],fill:e.linkPalette[n%e.linkPalette.length]}}),e._v(" "),i("foreignObject",{attrs:{x:t.x-7,y:t.y-6,width:16,height:16}},[i("div",{staticClass:"item-link-icon"},[i("i",{class:t.iconClass})])]),e._v(" "),i("foreignObject",{attrs:{x:t.x+16,y:t.y-11,width:t.width,height:t.height}},[i("span",{staticClass:"item-link-title"},[e._v(e._s(e._f("formatLinkTitle")(t)))])])])])})),e._v(" "),i("g",e._l(e.schemeContainer.hudItems,(function(t){return t.visible?i("g",{style:{opacity:t.opacity/100,"mix-blend-mode":t.blendMode},attrs:{transform:e.createHUDTransform(t)}},e._l(t.childItems,(function(t){return t.visible?i("ItemSvg",{key:t.id+"-"+t.shape+"-"+e.textSelectionEnabled+"-"+e.itemsReloadKey,attrs:{item:t,editorId:e.editorId,textSelectionEnabled:e.textSelectionEnabled,patchIndex:e.patchIndex,mode:e.mode},on:{"frame-animator":e.onFrameAnimatorEvent}}):e._e()})),1):e._e()})),0)],2):e._e(),e._v(" "),"edit"===e.mode?i("g",[i("g",{staticClass:"grid",attrs:{"data-preview-ignore":"true",transform:e.gridTransform,"data-void":"true"}},[e._l(e.gridCount.x,(function(t){return i("line",{class:{"grid-line-zero":t===e.gridCount.x0},attrs:{x1:t*e.gridStep,y1:"0",x2:t*e.gridStep,y2:e.height+2*e.gridStep,stroke:e.schemeContainer.scheme.style.gridColor,"data-void":"true"}})})),e._v(" "),e._l(e.gridCount.y,(function(t){return i("line",{class:{"grid-line-zero":t===e.gridCount.y0},attrs:{x1:"0",y1:t*e.gridStep,x2:e.width+2*e.gridStep,y2:t*e.gridStep,stroke:e.schemeContainer.scheme.style.gridColor,"data-void":"true"}})}))],2),e._v(" "),i("rect",{attrs:{"data-preview-ignore":"true",x:"0",y:"0",width:e.width,height:e.height,fill:e.fileDropLayerFill},on:{dragenter:e.onFileDragEnter,dragover:e.onFileDragOver,dragleave:e.onFileDragLeave,drop:e.onFileDrop}}),e._v(" "),i("g",{attrs:{"data-type":"scene-transform",transform:e.transformSvg}},[e._l(e.schemeContainer.worldItems,(function(t){return t.visible?i("g",{staticClass:"item-container",class:"item-cursor-"+t.cursor},[i("ItemSvg",{key:t.id+"-"+t.shape+"-"+e.itemsReloadKey,attrs:{item:t,editorId:e.editorId,patchIndex:e.patchIndex,mode:e.mode}})],1):e._e()})),e._v(" "),e.schemeContainer.activeBoundaryBox?i("g",{attrs:{"data-preview-ignore":"true"}},[i("rect",{staticClass:"boundary-box",attrs:{stroke:e.schemeContainer.scheme.style.boundaryBoxColor,x:e.schemeContainer.activeBoundaryBox.x,y:e.schemeContainer.activeBoundaryBox.y,width:e.schemeContainer.activeBoundaryBox.w,height:e.schemeContainer.activeBoundaryBox.h}})]):e._e(),e._v(" "),e._t("scene-transform"),e._v(" "),e._l(e.worldHighlightedItems,(function(t){return i("g",{attrs:{transform:t.transform}},[i("path",{style:{opacity:t.opacity},attrs:{d:t.path,fill:t.fill,stroke:t.stroke,"stroke-width":t.strokeSize+6/(t.scalingFactor*e.safeZoom)+"px","data-item-id":t.id,"stroke-linejoin":"round","data-preview-ignore":"true"}}),e._v(" "),e._l(t.pins,(function(n){return i("circle",{staticStyle:{opacity:"0.5"},attrs:{cx:n.x,cy:n.y,r:8/(t.scalingFactor*e.safeZoom),"data-preview-ignore":"true",fill:t.stroke}})}))],2)}))],2),e._v(" "),e.multiSelectBox?i("g",[i("rect",{staticClass:"multi-select-box",attrs:{x:e._x(e.multiSelectBox.x),y:e._y(e.multiSelectBox.y),width:e._z(e.multiSelectBox.w),height:e._z(e.multiSelectBox.h)}})]):e._e(),e._v(" "),e.horizontalSnapper?i("line",{staticStyle:{stroke:"red",opacity:"0.4","stroke-width":"1px"},attrs:{x1:0,y1:e._y(e.horizontalSnapper.value),x2:e.width,y2:e._y(e.horizontalSnapper.value)}}):e._e(),e._v(" "),e.verticalSnapper?i("line",{staticStyle:{stroke:"red",opacity:"0.4","stroke-width":"1px"},attrs:{x1:e._x(e.verticalSnapper.value),y1:0,x2:e._x(e.verticalSnapper.value),y2:e.height}}):e._e(),e._v(" "),e.stateLayerShown?i("rect",{staticClass:"state-hover-layer",attrs:{x:"0",y:"0",width:e.width,height:e.height,fill:"rgba(255, 255, 255, 0.0)"}}):e._e()]):e._e()]),e._v(" "),e._t("overlay")],2)};Cd._withStripped=!0;var Pd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",{attrs:{transform:e.svgItemTransform,"data-svg-item-container-id":e.item.id,"data-item-id":e.item.id}},[e.itemSvgOutlinePath&&e.patchOutline&&e.patchIsDiffColoringEnabled?i("path",{attrs:{"data-preview-ignore":"true",d:e.itemSvgOutlinePath,"data-item-id":e.item.id,"stroke-width":e.patchOutlineStrokeSize,stroke:e.patchOutline,fill:"none"}}):e._e(),e._v(" "),e.effectFill?i("advanced-fill",{key:"effect-fill-"+e.item.id+"-"+e.revision,attrs:{fillId:"effect-fill-"+e.item.id,fill:e.effectFill,area:e.item.area}}):e._e(),e._v(" "),i("g",{style:{opacity:e.item.opacity/100,"mix-blend-mode":e.item.blendMode}},[e._l(e.backgroundEffects,(function(t){return i("g",{domProps:{innerHTML:e._s(t)}})})),e._v(" "),i("defs",e._l(e.svgFilters,(function(t){return i("filter",{attrs:{id:t.id,x:"-50%",y:"-50%",width:"200%",height:"200%"},domProps:{innerHTML:e._s(t.html)}})})),0),e._v(" "),i("g",{attrs:{filter:e.filterUrl}},[e.shouldBeDrawn&&e.shapeComponent&&e.item.visible?i(e.shapeComponent,{key:"item-component-"+e.item.id+"-"+e.item.shape+"-"+e.revision,tag:"component",style:{opacity:e.item.selfOpacity/100},attrs:{item:e.item,editorId:e.editorId,mode:e.mode},on:{"frame-animator":e.onFrameAnimatorEvent}}):e._e(),e._v(" "),!e.shapeComponent&&e.item.visible&&e.shapePrimitives&&e.shouldBeDrawn?i("g",{style:{opacity:e.item.selfOpacity/100}},e._l(e.shapePrimitives,(function(t,n){return i("g",["text"===t.type?i("g",[i("foreignObject",{attrs:{x:t.area.x,y:t.area.y,width:t.area.w,height:t.area.h}},[i("div",{style:{width:t.area.w+"px",height:t.area.h+"px",color:t.fontColor,"font-size":t.fontSize+"px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[i("div",[e._v(e._s(t.text))])])]),e._v(" "),i("rect",{attrs:{x:t.area.x,y:t.area.y,width:t.area.w,height:t.area.h,"stroke-width":"0","data-item-id":e.item.id,fill:"rgba(255,255,255,0.0)"}})]):i("g",[t.fill?i("advanced-fill",{key:"advanced-fill-"+e.item.id+"-"+n+"-"+e.revision,attrs:{fillId:"fill-templated-"+e.item.id+"-"+n,fill:t.fill,area:e.item.area}}):e._e(),e._v(" "),t.svgPath?i("path",{attrs:{d:t.svgPath,"stroke-width":t.strokeSize+"px",stroke:t.strokeColor,"stroke-dasharray":e.computeStrokeDashArray(t.strokePattern,t.strokeSize),"stroke-dashoffset":e.item.meta.strokeOffset,"data-item-id":e.item.id,"stroke-linejoin":"round",fill:e.computeSvgFill(t.fill,"fill-templated-"+e.item.id+"-"+n)}}):e._e()],1)])})),0):e._e(),e._v(" "),"missing"===e.shapeType&&e.item.visible?i("g",{staticClass:"missing-shape"},[i("rect",{attrs:{x:"0",y:"0",width:e.item.area.w,height:e.item.area.h}}),e._v(" "),i("foreignObject",{attrs:{x:"0",y:"0",width:e.item.area.w,height:e.item.area.h}},[i("div",{style:{width:e.item.area.w+"px",height:e.item.area.h+"px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[i("div",{style:e.missingShapeTextStyle},[e._v("Missing Shape")])])])]):e._e(),e._v(" "),e._l(e.textSlots,(function(t){return t.name!==e.hiddenTextSlotName?i("g",{style:{opacity:e.item.selfOpacity/100}},[i("foreignObject",{ref:"textSlots",refInFor:!0,attrs:{"data-text-slot-name":t.name,id:"item-text-slot-"+e.item.id+"-"+t.name,x:t.area.x,y:t.area.y,width:t.area.w,height:t.area.h}},[i("div",{staticClass:"item-text-container",class:t.cssClass,style:t.style,attrs:{xmlns:"http://www.w3.org/1999/xhtml","data-item-id":e.item.id}},[i("div",{staticClass:"item-text-element",staticStyle:{display:"inline-block"},attrs:{"data-item-text-element-item-id":e.item.id},domProps:{innerHTML:e._s(t.sanitizedText)}})])])]):e._e()}))],2),e._v(" "),e._l(e.foregroundEffects,(function(t){return i("g",{domProps:{innerHTML:e._s(t)}})})),e._v(" "),i("g",{attrs:{id:"animation-container-"+e.item.id}}),e._v(" "),e.item._childItems&&e.item.visible&&"edit"===e.mode?i("g",{style:e.componentChildrenLayerStyle},e._l(e.item._childItems,(function(t){return t.visible?i("ItemSvg",{key:"itsvg-"+t.id+"-"+t.shape+"-"+e.item.meta.revision,attrs:{item:t,editorId:e.editorId,patchIndex:e.patchIndex,mode:e.mode},on:{"frame-animator":e.onFrameAnimatorEvent}}):e._e()})),1):e._e(),e._v(" "),e.shouldBeDrawn&&e.itemSvgOutlinePath&&!e.textSelectionEnabled?i("path",{staticClass:"svg-event-layer",style:{cursor:e.item.cursor},attrs:{"data-preview-ignore":"true",id:"item-svg-path-"+e.item.id,d:e.itemSvgOutlinePath,"data-item-id":e.item.id,"stroke-width":e.hoverPathStrokeWidth,stroke:e.hoverPathStroke,fill:e.hoverPathFill},on:{dragenter:e.onItemDragEnter,dragover:e.onItemDragOver,dragleave:e.onItemDragLeave,drop:e.onItemDrop}}):e._e(),e._v(" "),"edit"===e.mode&&!e.isSelected&&e.showItemDetailMarkers&&(e.hasDescription||e.hasLinks||e.hasFiles)?i("g",{attrs:{"data-preview-ignore":"true"}},[i("foreignObject",{attrs:{x:e.detailsMarker.x,y:e.detailsMarker.y,width:e.detailsMarker.w,height:e.detailsMarker.h,"data-item-id":e.item.id}},[i("div",{staticClass:"item-details-marker-icon",attrs:{xmlns:"http://www.w3.org/1999/xhtml","data-item-id":e.item.id}},[e.hasFiles?i("i",{staticClass:"icon fa-solid fa-paperclip",attrs:{"data-item-id":e.item.id}}):e.hasLinks?i("i",{staticClass:"icon fa-solid fa-link",attrs:{"data-item-id":e.item.id}}):i("i",{staticClass:"icon fa-solid fa-paragraph",attrs:{"data-item-id":e.item.id}})])]),e._v(" "),i("rect",{style:{cursor:e.item.cursor},attrs:{x:e.detailsMarker.x,y:e.detailsMarker.y,width:e.detailsMarker.w,height:e.detailsMarker.h,"data-type":"item-details-marker","data-item-id":e.item.id,fill:"rgba(0,0,0,0)"}})]):e._e(),e._v(" "),"view"!==e.mode||e.textSelectionEnabled?e._e():i("g",e._l(e.customAreas,(function(t){return i("path",{staticClass:"svg-event-layer",style:{cursor:t.cursor?t.cursor:e.item.cursor},attrs:{"data-preview-ignore":"true",id:"item-svg-path-"+e.item.id,d:t.path,"data-type":"custom-item-area","data-item-id":e.item.id,"data-custom-area-id":t.id,"stroke-width":e.hoverPathStrokeWidth,stroke:"rgba(255, 255, 255, 0)",fill:e.hoverPathFill}})})),0),e._v(" "),"missing"===e.shapeType?i("rect",{staticClass:"svg-event-layer",attrs:{"data-preview-ignore":"true","data-item-id":e.item.id,x:"0",y:"0",width:e.item.area.w,height:e.item.area.h,stroke:"rgba(255, 255, 255, 0)",fill:e.hoverPathFill}}):e._e(),e._v(" "),e.item.clip||"component"===e.item.shape&&"embedded"!==e.item.shapeProps.kind?i("defs",[i("clipPath",{attrs:{id:"item-clip-path-"+e.item.id}},[e.itemSvgOutlinePath?i("path",{staticClass:"svg-event-layer",attrs:{d:e.itemSvgOutlinePath,"data-item-id":e.item.id,"stroke-width":"0px",stroke:"rgba(255, 255, 255, 0)",fill:"rgba(255, 255, 255, 0)"}}):e._e()])]):e._e(),e._v(" "),e.item.childItems&&e.item.visible?i("g",{style:e.childrenLayerStyle},e._l(e.item.childItems,(function(t){return t.visible&&("hud"!==t.shape&&"view"===e.mode||"edit"===e.mode)?i("ItemSvg",{key:"itsvg-"+t.id+"-"+t.shape+"-"+e.textSelectionEnabled,attrs:{item:t,editorId:e.editorId,textSelectionEnabled:e.textSelectionEnabled,patchIndex:e.patchIndex,mode:e.mode},on:{"frame-animator":e.onFrameAnimatorEvent}}):e._e()})),1):e._e(),e._v(" "),e.item._childItems&&e.item.visible&&"view"===e.mode?i("g",{style:e.componentChildrenLayerStyle},e._l(e.item._childItems,(function(t){return t.visible&&"hud"!==t.shape?i("ItemSvg",{key:"itsvg-"+t.id+"-"+t.shape+"-"+e.textSelectionEnabled,attrs:{item:t,editorId:e.editorId,textSelectionEnabled:e.textSelectionEnabled,mode:e.mode},on:{"frame-animator":e.onFrameAnimatorEvent}}):e._e()})),1):e._e()],2)],1)};Pd._withStripped=!0;var kd=i(9421),Sd=i(4502),Id=i(3363);function Ad(e,t,i){const n=document.createElementNS("http://www.w3.org/2000/svg",e);return t&&(0,Fe.Ed)(t,((e,t)=>{n.setAttribute(t,e)})),i&&(0,Fe.Ed)(i,(e=>{n.appendChild(e)})),n}const _d=Ad,Ed={"drop-shadow":{name:"Drop Shadow",args:{color:{type:"color",value:"rgba(0,0,0,1.0)",name:"Color"},dx:{type:"number",value:10,name:"Offset X"},dy:{type:"number",value:10,name:"Offset Y"},blur:{type:"number",value:5,name:"Blur",min:0,max:100},opacity:{type:"number",value:50,name:"Opacity (%)",min:0,max:100},inside:{type:"boolean",value:!1,name:"Inside"}},applyEffect(e,t,i){const n=Id.Z.find(e.shape);if(!n)return null;const r=n.computeOutline(e);if(!r)return null;const s=`item-effect-drop-shadow-${e.id}-${t}`;return i.inside?{kind:"svg-filter",html:_d("g",{},[_d("feComponentTransfer",{in:"SourceAlpha"},[_d("feFuncA",{type:"table",tableValues:"1 0"})]),_d("feGaussianBlur",{stdDeviation:i.blur}),_d("feOffset",{dx:i.dx,dy:i.dy,result:"offsetblur"}),_d("feFlood",{"flood-color":i.color,result:"color","flood-opacity":i.opacity/100}),_d("feComposite",{in2:"offsetblur",operator:"in"}),_d("feComposite",{in2:"SourceAlpha",operator:"in"}),_d("feMerge",{},[_d("feMergeNode",{in:"SourceGraphic"}),_d("feMergeNode")])]).innerHTML}:{kind:"back",html:_d("g",{},[_d("defs",{},[_d("filter",{id:s,x:"-500%",y:"-500%",width:"2000%",height:"2000%"},[_d("feGaussianBlur",{in:"SourceGraphic",stdDeviation:i.blur})])]),_d("path",{d:r,stroke:"none",fill:i.color,transform:`translate(${i.dx} ${i.dy})`,style:"opacity: "+i.opacity/100,filter:`url(#${s})`})]).innerHTML}}},blur:{name:"Blur",args:{size:{type:"number",value:5,name:"Size"}},applyEffect:(e,t,i)=>({kind:"svg-filter",html:_d("feGaussianBlur",{in:"SourceGraphic",stdDeviation:i.size}).outerHTML})},glow:{name:"Glow",description:"Some shapes do not support this effect",args:{color:{type:"color",value:"rgba(126,237,255,1.0)",name:"Color"},size:{type:"number",value:3,name:"Size",min:0,max:100},blur:{type:"number",value:5,name:"Blur",min:0,max:100},opacity:{type:"number",value:50,name:"Opacity (%)",min:0,max:100}},applyEffect(e,t,i){const n=Id.Z.find(e.shape);if(!n)return null;const r=n.computeOutline(e);if(!r)return null;const s=`item-effect-glow-${e.id}-${t}`;let o=i.size;const a=Id.Z.getShapePropDescriptor(n,"strokeSize");return a&&"number"===a.type&&(o=i.size+e.shapeProps.strokeSize),{kind:"front",html:_d("g",{},[_d("defs",{},[_d("filter",{id:s,x:"-500%",y:"-500%",width:"2000%",height:"2000%"},[_d("feGaussianBlur",{in:"SourceGraphic",stdDeviation:i.blur})])]),_d("path",{d:r,"data-item-id":e.id,stroke:i.color,"stroke-width":`${o}px`,fill:"none",style:"opacity: "+i.opacity/100,filter:`url(#${s})`})]).innerHTML}}},repeat:{name:"Repeat",description:"Some shapes do not support this effect",args:{repeat:{type:"number",value:3,name:"Repeat",min:1,max:20},dx:{type:"number",value:10,name:"Offset X"},dy:{type:"number",value:-10,name:"Offset Y"},fade:{type:"number",value:0,name:"Fade (%)",min:0,max:100}},applyEffect(e,t,i){const n=Id.Z.find(e.shape);if(!n||!n.computeOutline)return null;const r=n.computeOutline(e);if(!r)return null;const s=Id.Z.getShapeArgs(n);let o="none";s.fill&&"advanced-color"===s.fill.type?o=(0,kd.pz)(e.shapeProps.fill,`effect-fill-${e.id}`):s.fill&&"color"===s.fill.type&&(o=e.shapeProps.fill);const a=s.strokeColor&&"color"===s.strokeColor.type?e.shapeProps.strokeColor:"#111111",l=s.strokeSize&&"number"===s.strokeSize.type?e.shapeProps.strokeSize:1;let c="";s.strokePattern&&"stroke-pattern"===s.strokePattern.type&&(c=Sd.Z.createDashArray(e.shapeProps.strokePattern,l));const h=Ad("g",{});for(let t=0;t<i.repeat;t++){const n=(i.repeat-t)*i.dx,s=(i.repeat-t)*i.dy;let d=100,u=100-i.fade,p=(t+1)/i.repeat;const m=Ad("g",{transform:`translate(${n}, ${s})`,style:"opacity: "+(d*p+u*(1-p))/100});m.appendChild(Ad("path",{d:r,fill:o,stroke:a,"stroke-width":`${l}px`,"stroke-dasharray":c,"stroke-linejoin":"round","data-item-id":e.id})),h.appendChild(m)}return{kind:"back",html:h.innerHTML}}},"adjust-color":{name:"Adjust Color",args:{matrix:{type:"color-matrix",name:"Color matrix",value:[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0]]}},applyEffect(e,t,i){let n="1 0 0 0 00 1 0 0 00 0 1 0 00 0 0 1 0";return Array.isArray(i.matrix)&&(n="",i.matrix.forEach((e=>{Array.isArray(e)?n+=e.join(" "):n+="0 0 0 0 0",n+=" "}))),{kind:"svg-filter",html:_d("feColorMatrix",{type:"matrix",values:n}).outerHTML}}}};function Td(e){if(!e)return{};const t={};return(0,Fe.Ed)(e.args,((e,i)=>{t[i]=Uc.Z.clone(e.value)})),t}function Md(){return Ed}function $d(e){return Ed[e]}function Od(e){const t=[];let i="";const n=[],r=[];return(0,Fe.Ed)(e.effects,((s,o)=>{const a=$d(s.effect);if(a){const l=a.applyEffect(e,o,s.args);if("svg-filter"===l.kind){const n=`item-svg-filter-effect-${e.id}-${o}`;t.push({id:n,html:l.html}),i+=`url(#${n}) `}else"back"===l.kind?n.push(l.html):"front"===l.kind&&r.push(l.html)}})),{svgFilters:t,filterUrl:i,backgroundEffects:n,foregroundEffects:r}}function Dd(e){const t=Id.Z.getShapePropDescriptor(e,"strokeSize");return t&&"number"===t.type}const Bd={name:"ItemSvg",props:{editorId:{type:String,required:!0},item:{type:Object},mode:{type:String},patchIndex:{type:Object,default:null},mode:{type:String,default:"edit"},textSelectionEnabled:{type:Boolean,default:!1}},components:{AdvancedFill:kd.ZP},mounted(){this.switchShape(this.item.shape),mh.Z.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChanged),mh.Z.item.selected.specific.$on(this.editorId,this.item.id,this.onItemSelected),mh.Z.item.deselected.specific.$on(this.editorId,this.item.id,this.onItemDeselected),mh.Z.textSlot.triggered.specific.$on(this.editorId,this.item.id,this.onItemTextSlotEditTriggered),mh.Z.textSlot.canceled.specific.$on(this.editorId,this.item.id,this.onItemTextSlotEditCanceled);const e=Id.Z.find(this.item.shape);if(e&&e.shapeEvents.mounted&&e.shapeEvents.mounted(this.$store,this.item,this.$refs.textSlots),"edit"===this.mode){const e=document.getElementById(`in-place-text-edit-wrapper-${this.editorId}-${this.item.id}`);if(!e)return;this.hiddenTextSlotName=e.getAttribute("data-slot-name")}},beforeDestroy(){mh.Z.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChanged),mh.Z.item.selected.specific.$off(this.editorId,this.item.id,this.onItemSelected),mh.Z.item.deselected.specific.$off(this.editorId,this.item.id,this.onItemDeselected),mh.Z.textSlot.triggered.specific.$off(this.editorId,this.item.id,this.onItemTextSlotEditTriggered),mh.Z.textSlot.canceled.specific.$off(this.editorId,this.item.id,this.onItemTextSlotEditCanceled)},data(){const e=Id.Z.find(this.item.shape),t={shapeType:e?e.shapeType:"missing",shapeComponent:null,oldShape:this.item.shape,shapePrimitives:[],itemSvgOutlinePath:null,shouldRenderText:!0,isSelected:this.item.meta&&this.item.meta.selected,revision:0,textSlots:[],hiddenTextSlotName:null,supportsStrokeSize:!!e&&Dd(e),hasDescription:(0,fh.U3)(this.item),hasLinks:Array.isArray(this.item.links)&&this.item.links.length>0,hasFiles:Array.isArray(this.item.links)&&this.item.links.findIndex((e=>"file"===e.type))>=0,detailsMarker:e.getDetailsMarker(this.item),svgFilters:[],filterUrl:"",backgroundEffects:[],foregroundEffects:[],svgItemTransform:this.calculateSVGItemTransform(),customAreas:e&&e.computeCustomAreas?e.computeCustomAreas(this.item):[],draggingFileOver:!1};e&&(e.editorProps&&e.editorProps.customTextRendering?t.shouldRenderText=!1:t.textSlots=this.generateTextSlots());const{svgFilters:i,filterUrl:n,backgroundEffects:r,foregroundEffects:s}=Od(this.item);return t.effectFill=this.getEffectFill(),t.svgFilters=i,t.filterUrl=n,t.backgroundEffects=r,t.foregroundEffects=s,t},methods:{onItemDragEnter(e){"edit"===this.mode&&e.dataTransfer&&this.$store.state.apiClient&&this.$store.state.apiClient.uploadFile&&(this.draggingFileOver=!0)},onItemDragOver(e){"edit"===this.mode&&e.dataTransfer&&this.$store.state.apiClient&&this.$store.state.apiClient.uploadFile&&(this.draggingFileOver=!0)},onItemDragLeave(e){this.draggingFileOver=!1},onItemDrop(e){if(this.draggingFileOver=!1,e.preventDefault(),"edit"!==this.mode||!this.$store.state.apiClient||!this.$store.state.apiClient.uploadFile)return;let t=[...e.dataTransfer.items].filter((e=>"file"===e.kind));0!==t.length&&("link"===this.item.shape&&(t=[t[0]]),t.map((e=>e.getAsFile())).map((e=>{const t=e.name;return nh.Z.addInfoSystemMessage(this.$store,`Uploading file "${t}"...`,`file-uploading-${t}`,"fas fa-spinner fa-spin fa-1x"),this.$store.state.apiClient.uploadFile(e).then((e=>{"link"===this.item.shape?(this.item.shapeProps.url=e,this.item.shapeProps.icon="file",nh.Z.addInfoSystemMessage(this.$store,`Updated link url to ${e}`,`item-link-url-changed-${this.item.id}`),mh.Z.item.changed.specific.$emit(this.editorId,this.item.id),mh.Z.schemeChangeCommitted.$emit(this.editorId,`items.${this.item.id}.links`)):(Array.isArray(this.item.links)||(this.item.links=[]),this.item.links.push({title:t,url:e,type:"file"}),nh.Z.addInfoSystemMessage(this.$store,`Attached file "${t}" to item`,`item-link-url-changed-${this.item.id}-${t}`),mh.Z.item.changed.specific.$emit(this.editorId,this.item.id,"links"),mh.Z.schemeChangeCommitted.$emit(this.editorId,`items.${this.item.id}.links`))})).catch((e=>(console.error(e),e.response&&e.response.data&&e.response.data.message?nh.Z.addErrorSystemMessage(this.$store,e.response.data.message,`item-upload-error-${t}`):nh.Z.addErrorSystemMessage(this.$store,"Something went wrong, could not upload file",`item-upload-error-${t}`),null)))})))},getEffectFill(){const e=Id.Z.find(this.item.shape);if(!e)return null;const t=Id.Z.getShapeArgs(e);return this.item.effects&&this.item.effects.length>0&&"advanced-color"===t.fill.type?this.item.shapeProps.fill:null},calculateSVGItemTransform(){const e=zh.Z.standardTransformWithArea(zh.Z.identityMatrix(),this.item.area);return`matrix(${e[0][0]},${e[1][0]},${e[0][1]},${e[1][1]},${e[0][2]},${e[1][2]})`},switchShape(e){this.oldShape=this.item.shape;const t=Id.Z.find(e);t&&(this.shapeType=t.shapeType,this.supportsStrokeSize=Dd(t),this.customAreas=t&&t.computeCustomAreas?t.computeCustomAreas(this.item):[],t.vueComponent?this.shapeComponent=t.vueComponent:this.shapeComponent=null,"templated"===t.shapeType?this.shapePrimitives=t.computePrimitives(this.item):"standard"===t.shapeType&&(this.shapePrimitives=[{fill:this.item.shapeProps.fill,strokeColor:this.item.shapeProps.strokeColor,strokeSize:this.item.shapeProps.strokeSize,strokePattern:this.item.shapeProps.strokePattern,type:"path",svgPath:t.computePath(this.item)}]),this.effectFill=this.getEffectFill(),"view"===this.mode&&t.editorProps&&t.editorProps.disableEventLayer||(this.itemSvgOutlinePath=t.computeOutline(this.item)))},computeStrokeDashArray:(e,t)=>Sd.Z.createDashArray(e,t),onItemDeselected(){this.isSelected=!1},onItemSelected(){this.isSelected=!0},onItemChanged(e){this.svgItemTransform=this.calculateSVGItemTransform(),this.effectFill=this.getEffectFill();const t=Id.Z.find(this.item.shape);if(!t)return void(this.revision+=1);this.hasDescription=(0,fh.U3)(this.item),this.hasLinks=Array.isArray(this.item.links)&&this.item.links.length>0,this.hasFiles=Array.isArray(this.item.links)&&this.item.links.findIndex((e=>"file"===e.type))>=0,this.detailsMarker=t.getDetailsMarker(this.item),this.oldShape!==this.item.shape?this.switchShape(this.item.shape):t&&("templated"===t.shapeType?this.shapePrimitives=t.computePrimitives(this.item):"standard"===t.shapeType&&(this.shapePrimitives=[{fill:this.item.shapeProps.fill,strokeColor:this.item.shapeProps.strokeColor,strokeSize:this.item.shapeProps.strokeSize,strokePattern:this.item.shapeProps.strokePattern,type:"path",svgPath:t.computePath(this.item)}]),"view"===this.mode&&t.editorProps&&t.editorProps.disableEventLayer||(this.itemSvgOutlinePath=t.computeOutline(this.item)),this.customAreas=t&&t.computeCustomAreas?t.computeCustomAreas(this.item):[]),t.editorProps&&t.editorProps.customTextRendering||(this.textSlots=this.generateTextSlots());const{svgFilters:i,filterUrl:n,backgroundEffects:r,foregroundEffects:s}=Od(this.item);this.svgFilters=i,this.filterUrl=n,this.backgroundEffects=r,this.foregroundEffects=s,this.revision+=1,this.$forceUpdate()},onFrameAnimatorEvent(e){this.$emit("frame-animator",e)},generateTextSlots(){const e=Id.Z.find(this.item.shape);if(!e)return[];const t=Uc.Z.clone(e.getTextSlots(this.item)),i=[];return(0,Fe.Ed)(t,(e=>{const t=this.item.textSlots[e.name];t&&(e.text=t.text||"",e.sanitizedText=(0,ph.Z)(e.text),e.cssClass||(e.cssClass=""),e.style=(0,bd.A)(t),e.style.width=`${e.area.w}px`,e.style.height=`${e.area.h}px`,i.push(e))})),i},onItemTextSlotEditTriggered(e,t,i,n){this.hiddenTextSlotName=t},onItemTextSlotEditCanceled(e,t){this.hiddenTextSlotName===t&&(this.hiddenTextSlotName=null),this.$nextTick((()=>{const e=Id.Z.find(this.item.shape);if(e&&e.onTextSlotTextUpdate){const i=this.$refs.textSlots.find((e=>e.getAttribute("data-text-slot-name")===t));if(!i)return;e.onTextSlotTextUpdate(this.$store,this.item,t,i)}}))},computeSvgFill:(e,t)=>(0,kd.pz)(e,t)},computed:{hoverPathStrokeWidth(){return this.draggingFileOver?"8px":this.supportsStrokeSize?parseInt(this.item.shapeProps.strokeSize)+2+"px":"0px"},hoverPathStroke(){return this.draggingFileOver?"rgba(130, 240, 130, 0.7)":"rgba(255, 255, 255, 0)"},hoverPathFill(){return this.draggingFileOver?"rgba(140, 255, 140, 0.6)":"path"===this.item.shape&&this.item.shapeProps.fill&&"none"===this.item.shapeProps.fill.type?"none":"connector"!==this.item.shape||this.item.shapeProps.thick?"rgba(255, 255, 255, 0)":"none"},shouldBeDrawn(){if(!this.item.visible)return!1;const e=Id.Z.find(this.item.shape);return!(!e||"view"===this.mode&&e.editorProps&&e.editorProps.onlyEditMode)},componentChildrenLayerStyle(){return this.item.clip||"component"===this.item.shape?{"clip-path":`url(#item-clip-path-${this.item.id})`}:{}},childrenLayerStyle(){return this.item.clip?{"clip-path":`url(#item-clip-path-${this.item.id})`}:{}},patchOutline(){if(this.patchIndex){if(this.patchIndex.addedItems.has(this.item.id))return this.$store.getters.patchAdditionsColor;if(this.patchIndex.deletedItems.has(this.item.id))return this.$store.getters.patchDeletionsColor;if(this.patchIndex.modifiedItems.has(this.item.id))return this.$store.getters.patchModificationsColor}return null},patchIsDiffColoringEnabled(){return this.$store.getters.patchIsDiffColoringEnabled},patchOutlineStrokeSize(){return this.supportsStrokeSize?parseInt(this.item.shapeProps.strokeSize)+10+"px":"8px"},missingShapeTextStyle(){return{"font-size":Math.min(this.item.area.w,this.item.area.h)/6+"px",display:"inline-block"}},showItemDetailMarkers(){return this.$store.getters.showItemDetailMarkers}}},Ld=(0,Re.Z)(Bd,Pd,[],!1,null,null,null).exports;var Rd=i(9874),Nd=i(3341),Zd=i(2672),Fd=i(9737),jd=i(3805),zd=i(6085),Ud=i(2629);function Hd(e,t,i){if("object"!=typeof i||!Array.isArray(i.shapes))throw new Error(`Invalid shape group in ${url}`);i.shapes.forEach((e=>{if("templated"!==e.shapeConfig.shapeType)return;const i=function(e,t){return`ext:${t.shapeConfig.id}:${e}`}(t,e);Id.Z.registerTemplatedShape(i,e.shapeConfig)})),nh.Z.registerShapeGroupId(e,t)}function qd(e,t){const i=function(e){const t=new Set;return(0,fh.Hp)(e,(e=>{e.shape&&!Id.Z.find(e.shape)&&t.add(e.shape)})),Array.from(t)}(e);return i&&i.length>0?function(e,t){const i=new Set;if(e.forEach((e=>{const t=e.split(":");3===t.length&&i.add(t[2])})),0===i.size)return Promise.resolve(null);const n=t.state.assetsPath||"/assets",r=n.endsWith("/")?"":"/";return Ph().get(`${n}${r}shapes/shapes.json`).then((e=>{const n=e.data;if(!n)return null;const r=new Map;return n.forEach((e=>{r.set(e.id,e)})),Promise.all(Array.from(i).map((e=>{const i=r.get(e);return i?Ph().get(i.ref).then((i=>{const n="string"==typeof i.data?JSON.parse(i.data):i.data;Hd(t,e,n)})):Promise.resolve(null)})))}))}(i,t):Promise.resolve()}const Wd="item-details-marker",Vd={type:"void"},Gd={x:0,y:0},Kd={props:{editorId:{type:String,required:!0},mode:{type:String,default:"edit"},textSelectionEnabled:{type:Boolean,default:!1},stateLayerShown:{type:Boolean,default:!1},userEventBus:{type:Object,default:null},patchIndex:{type:Object,default:null},highlightedItems:{type:Object,default:null},zoomedItems:{type:Array,default:null},zoomToItemsTrigger:{type:String,default:null},schemeContainer:{default:null,type:Object},zoom:{default:1,type:Number},useMouseWheel:{default:!0,type:Boolean},itemsReloadKey:{default:0,type:Number}},components:{ItemSvg:Ld},beforeMount(){"view"===this.mode&&(this.reindexUserEvents(),this.prepareFrameAnimations()),mh.Z.zoomToAreaRequested.$on(this.editorId,this.onBringToView),mh.Z.item.linksShowRequested.any.$on(this.editorId,this.onShowItemLinks),mh.Z.item.clicked.any.$on(this.editorId,this.onAnyItemClicked),mh.Z.item.changed.any.$on(this.editorId,this.onAnyItemChanged),mh.Z.void.clicked.$on(this.editorId,this.onVoidClicked),mh.Z.void.doubleClicked.$on(this.editorId,this.onVoidDoubleClicked),mh.Z.item.selected.any.$on(this.editorId,this.onAnyItemSelected),mh.Z.component.mounted.any.$on(this.editorId,this.onComponentSchemeMounted),mh.Z.component.loadFailed.any.$on(this.editorId,this.onComponentLoadFailed),mh.Z.framePlayer.prepared.$on(this.editorId,this.onFramePlayerPrepared),mh.Z.clickableMarkers.toggled.$on(this.editorId,this.toggleClickableMarkers),mh.Z.editorResized.$on(this.editorId,this.updateSvgSize),mh.Z.component.loadRequested.any.$on(this.editorId,this.onComponentLoadRequested)},mounted(){if(this.updateSvgSize(),window.addEventListener("resize",this.updateSvgSize),this.useMouseWheel){var e=this.$refs.svgDomElement;e&&e.addEventListener("wheel",this.mouseWheel)}"view"===this.mode&&(0,Fe.Ed)(this.itemsForInit,((e,t)=>{this.userEventBus.emitItemEvent(t,zd.Z.standardEvents.init.id)}))},beforeDestroy(){if(this.highlightAnimated=!0,window.removeEventListener("resize",this.updateSvgSize),this.mouseEventsEnabled=!1,mh.Z.zoomToAreaRequested.$off(this.editorId,this.onBringToView),mh.Z.item.linksShowRequested.any.$off(this.editorId,this.onShowItemLinks),mh.Z.item.clicked.any.$off(this.editorId,this.onAnyItemClicked),mh.Z.item.changed.any.$off(this.editorId,this.onAnyItemChanged),mh.Z.void.clicked.$off(this.editorId,this.onVoidClicked),mh.Z.void.doubleClicked.$off(this.editorId,this.onVoidDoubleClicked),mh.Z.item.selected.any.$off(this.editorId,this.onAnyItemSelected),mh.Z.component.mounted.any.$off(this.editorId,this.onComponentSchemeMounted),mh.Z.component.loadFailed.any.$off(this.editorId,this.onComponentLoadFailed),mh.Z.framePlayer.prepared.$off(this.editorId,this.onFramePlayerPrepared),mh.Z.clickableMarkers.toggled.$off(this.editorId,this.toggleClickableMarkers),mh.Z.editorResized.$off(this.editorId,this.updateSvgSize),mh.Z.component.loadRequested.any.$off(this.editorId,this.onComponentLoadRequested),this.useMouseWheel){const e=this.$refs.svgDomElement;e&&e.removeEventListener("wheel",this.mouseWheel)}},data(){return{mouseEventsEnabled:!("view"===this.mode&&this.textSelectionEnabled),linkPalette:["#ec4b4b","#bd4bec","#4badec","#226D18","#6A590E","#0F8989","#7B245B"],lastClickPoint:null,doubleClickLastTime:-1e3,width:window.innerWidth,height:window.innerHeight,selectedItemLinks:[],linksAnimated:!1,lastHoveredItem:null,itemsForInit:{},clickableItemMarkers:[],worldHighlightedItems:[],lastTouchStartTime:0,lastTouchStartCoords:{x:-1e3,y:-1e3},draggingFileOver:!1,highlightAnimated:!1,highlightAnimationTime:0}},methods:{onComponentLoadRequested(e){this.$store.state.apiClient&&this.$store.state.apiClient.getScheme&&(e._childItems&&e._childItems.length>0&&(e._childItems=[]),e.meta.componentLoadFailed=!1,this.$store.state.apiClient.getScheme(e.shapeProps.schemeId).then((e=>e&&e.scheme?qd(e.scheme.items,this.$store).catch((e=>{console.error(e),nh.Z.addErrorSystemMessage(this.$store,"Failed to load shapes")})).then((()=>e)):Promise.reject("Empty document"))).then((t=>{const i=t.scheme,n=new Nd.ZP(i,this.editorId,this.mode,this.$store.state.apiClient,{onSchemeChangeCommitted:e=>mh.Z.schemeChangeCommitted.$emit(this.editorId,e)});this.schemeContainer.attachItemsToComponentItem(e,n.scheme.items),this.schemeContainer.prepareFrameAnimationsForItems(),this.schemeContainer.reindexTags(),mh.Z.item.changed.specific.$emit(this.editorId,e.id),"component"===e.shape&&e.shapeProps.autoZoom&&this.zoomToItems([e]),this.$nextTick((()=>{mh.Z.component.mounted.specific.$emit(this.editorId,e.id,e)}))})).catch((t=>{console.error(t),nh.Z.addErrorSystemMessage(this.$store,"Failed to load component","scheme-component-load"),e.meta.componentLoadFailed=!0,mh.Z.component.loadFailed.specific.$emit(this.editorId,e.id,e)})))},zoomToItems(e){if(0===e.length)return;const t=this.calculateZoomingAreaForItems(e);t&&mh.Z.zoomToAreaRequested.$emit(this.editorId,t,!0)},calculateZoomingAreaForItems(e){if("view"===this.mode&&(e=this.schemeContainer.filterNonHUDItems(e)),!e||0===e.length)return null;let t=(0,Fe.hX)(e,(e=>("view"!==this.mode||"dummy"!==e.shape)&&e.visible&&e.meta.calculatedVisibility));return 0===t.length&&e.length>0&&(t=e),(0,gh.av)(t)},updateSvgSize(){if(!this.$refs.svgDomElement)return;const e=this.$refs.svgDomElement.getBoundingClientRect();this.width=e.width,this.height=e.height,this.schemeContainer.screenSettings.width=e.width,this.schemeContainer.screenSettings.height=e.height,this.$emit("svg-size-updated",{width:this.width,height:this.height})},mouseCoordsFromEvent(e){return e.touches?e.touches.length>0?this.mouseCoordsFromPageCoords(e.touches[0].pageX,e.touches[0].pageY):e.changedTouches.length>0?this.mouseCoordsFromPageCoords(e.changedTouches[0].pageX,e.changedTouches[0].pageY):null:this.mouseCoordsFromPageCoords(e.pageX,e.pageY)},mouseCoordsFromPageCoords(e,t){var i=this.$refs.svgDomElement.getBoundingClientRect(),n=e-i.left,r=t-i.top;return{x:Math.round(n),y:Math.round(r)}},identifyElement(e,t){if(e){const i=e.getAttribute("data-type");if("path-segment"===i)return{type:i,pathIndex:parseInt(e.getAttribute("data-path-index")),segmentIndex:parseInt(e.getAttribute("data-path-segment-index"))};if("path-point"===i)return{type:i,pointIndex:parseInt(e.getAttribute("data-path-point-index")),pathIndex:parseInt(e.getAttribute("data-path-index"))};if("path-control-point"===i)return{type:i,pointIndex:parseInt(e.getAttribute("data-path-point-index")),pathIndex:parseInt(e.getAttribute("data-path-index")),controlPointIndex:parseInt(e.getAttribute("data-path-control-point-index"))};if("edit-box"===i||"edit-box-template-control"===i||"edit-box-custom-control"===i||"edit-box-rotational-dragger"===i||"edit-box-pivot-dragger"===i||"edit-box-reset-image-crop-link"===i||"edit-box-context-menu-button"===i)return{type:i,editBox:this.schemeContainer.editBox};if("edit-box-resize-dragger"===i)return{type:i,editBox:this.schemeContainer.editBox,draggerEdges:(0,Fe.UI)(e.getAttribute("data-dragger-edges").split(","),(e=>e.trim()))};if("custom-item-area"===i)return{type:i,item:this.schemeContainer.findItemById(e.getAttribute("data-item-id")),areaId:e.getAttribute("data-custom-area-id")};if(i===Wd)return{type:i,item:this.schemeContainer.findItemById(e.getAttribute("data-item-id"))};const n=e.getAttribute("data-item-id");if(n){const e=this.schemeContainer.findItemById(n);if(e)return{type:"item",item:e}}const r=e.getAttribute("data-connector-starter-item-id");if(r){const e=this.schemeContainer.findItemById(r);if(e)return{type:"connection-starter",connectorStarter:{item:e,point:t}}}const s=e.getAttribute("data-control-point-id");if(s){const t=this.schemeContainer.findItemById(e.getAttribute("data-control-point-item-id"));if(t)return{type:"control-point",controlPoint:{pointId:s,item:t}}}const o=e.closest(".item-text-element");if(o){const e=this.schemeContainer.findItemById(o.getAttribute("data-item-text-element-item-id"));if(e)return{type:"item-text-element",itemTextElement:{item:e}}}}return Vd},mouseWheel(e){const t=this.mouseCoordsFromEvent(e),i=this.toLocalPoint(t.x,t.y);this.$emit("mouse-wheel",i.x,i.y,t.x,t.y,e)},touchStart(e){if(!this.mouseEventsEnabled)return;e.preventDefault();const t=this.mouseCoordsFromEvent(e),i=performance.now(),n=(t.x-this.lastTouchStartCoords.x)*(t.x-this.lastTouchStartCoords.x)+(t.y-this.lastTouchStartCoords.y)*(t.y-this.lastTouchStartCoords.y);i-this.lastTouchStartTime<500&&n<50?this.mouseEvent("mouse-double-click",e):this.mouseEvent("mouse-down",e),this.lastTouchStartTime=i,this.lastTouchStartCoords=t},touchEnd(e){this.mouseEventsEnabled&&(e.preventDefault(),this.mouseEvent("mouse-up",e))},touchMove(e){this.mouseEventsEnabled&&(e.preventDefault(),this.mouseEvent("mouse-move",e))},mouseMove(e){this.mouseEventsEnabled&&(e.preventDefault(),this.mouseEvent("mouse-move",e))},mouseDown(e){let t=performance.now(),i=0;this.lastClickPoint&&(i=Math.abs(e.pageX-this.lastClickPoint.x)+Math.abs(e.pageY-this.lastClickPoint.y)),this.lastClickPoint={x:e.pageX,y:e.pageY};const n=t-this.doubleClickLastTime;0===e.button&&i<=2&&n<400?(this.doubleClickLastTime=0,this.mouseDoubleClick(e)):(0===e.button&&(this.doubleClickLastTime=t),this.mouseEvent("mouse-down",e))},mouseUp(e){this.mouseEvent("mouse-up",e)},mouseDoubleClick(e){this.mouseEvent("mouse-double-click",e)},mouseEvent(e,t){if(this.mouseEventsEnabled){var i=this.mouseCoordsFromEvent(t),n=this.toLocalPoint(i.x,i.y);Gd.x=i.x,Gd.y=i.y,this.$emit(e,n.x,n.y,i.x,i.y,this.identifyElement(t.srcElement,n),t)}},generateItemHighlight(e,t){const i=Id.Z.find(e.shape);if(!i)return;const n=i.computeOutline(e);if(!n)return;const r=(0,gh.aR)(e),s=(0,gh.pD)(e);let o=Math.max(s.x,s.y);zh.Z.tooSmall(o)&&(o=1);let a=6;if("path"===e.shape)a=e.shapeProps.strokeSize;else{const t=Id.Z.find(e.shape);Id.Z.getShapePropDescriptor(t,"strokeSize")&&(a=e.shapeProps.strokeSize)}const l={id:e.id,transform:`matrix(${r[0][0]},${r[1][0]},${r[0][1]},${r[1][1]},${r[0][2]},${r[1][2]})`,path:n,fill:"none",strokeSize:a,stroke:this.schemeContainer.scheme.style.boundaryBoxColor,pins:[],opacity:.5,scalingFactor:o};return t&&(l.pins=i.getPins(e)),l},highlightItems(e,t){this.worldHighlightedItems=[],this.highlightAnimated=!1,this.highlightAnimationTime=0,(0,Fe.Ed)(e,(e=>{const i=this.schemeContainer.findItemById(e);if(!i)return;const n=this.generateItemHighlight(i,t);this.worldHighlightedItems.push(n)}))},reindexUserEvents(){this.userEventBus&&(this.userEventBus.clear(),this.indexUserEventsInItems(this.schemeContainer.scheme.items,this.itemsForInit))},indexUserEventsInItems(e,t){(0,fh.Hp)(e,(e=>{e.behavior&&Array.isArray(e.behavior.events)&&e.behavior.events.forEach((i=>{const n=(0,Zd.z)(this.schemeContainer,e,i.actions);i.event===zd.Z.standardEvents.init.id&&(t[e.id]=1),this.userEventBus.subscribeItemEvent(e.id,i.event,n)}))}))},onComponentSchemeMounted(e){if(e._childItems){const t={};this.indexUserEventsInItems(e._childItems,t),(0,Fe.Ed)(t,((e,t)=>{this.userEventBus.emitItemEvent(t,zd.Z.standardEvents.init.id)}))}"component"===e.shape&&this.userEventBus&&this.userEventBus.emitItemEvent(e.id,Ud.lK)},onComponentLoadFailed(e){"component"===e.shape&&this.userEventBus&&this.userEventBus.emitItemEvent(e.id,Ud.LM)},prepareFrameAnimations(){this.schemeContainer.prepareFrameAnimations()},onFramePlayerPrepared(e,t){if("view"!==this.mode)return;const i=this.schemeContainer.getFrameAnimation(e.id);i&&i.setCallbacks(t)},onFrameAnimatorEvent(e){if("view"!==this.mode)return;const t=e.item.id,i=this.schemeContainer.getFrameAnimation(t);i&&("play"===e.operation?(i.setCallbacks(e.callbacks),i.setFrame(e.frame),e.stopFrame?i.setStopFrame(e.stopFrame):i.setStopFrame(-1),(0,Fd.oK)(this.editorId,i,t,"frame-player")):"setFrame"===e.operation?i.toggleFrame(e.frame):"stop"===e.operation&&i.stop())},onSvgItemLinkClick(e,t){return e.startsWith("/")&&!this.linksAnimated&&(window.open(e,"_blank")||window.location.replace(e),t.preventDefault()),!1},onShowItemLinks(e){"view"===this.mode&&(this.selectedItemLinks=this.generateItemLinks(e),this.$nextTick((()=>{(0,Fe.Ed)(this.selectedItemLinks,((e,t)=>{const i=document.querySelector(`#item-link-${t} span.item-link-title`);if(i){const t=i.getBoundingClientRect();e.width=t.width,e.height=t.height}}))})),this.startLinksAnimation())},onAnyItemChanged(e,t){"visible"===t&&this.$forceUpdate()},onAnyItemClicked(e){this.removeDrawnLinks(),this.resetHighlightedItems()},onAnyItemSelected(){this.resetHighlightedItems()},resetHighlightedItems(){this.highlightAnimated=!1,this.highlightAnimationTime=0,this.worldHighlightedItems.length>0&&(this.worldHighlightedItems=[])},onVoidClicked(){this.removeDrawnLinks()},onVoidDoubleClicked(e,t,i,n){if("edit"===this.mode){const i=Uc.Z.clone(fh.XZ);i.name=this.schemeContainer.copyNameAndMakeUnique("Label"),i.textSlots={body:{text:"",halign:"left",valign:"top",paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0}},i.shape="none",i.area={x:e,y:t,w:40,h:40},(0,xd.z9)(i),this.schemeContainer.addItem(i),this.$nextTick((()=>{mh.Z.textSlot.triggered.specific.$emit(this.editorId,i,"body",{x:0,y:0,w:i.area.w,h:i.area.h},!1,!0)}))}},removeDrawnLinks(){this.selectedItemLinks.length>0&&(this.selectedItemLinks=[])},onBringToView(e,t){let i=1;e.w>0&&e.h>0&&this.width>0&&this.height>0&&(i=Math.floor(100*Math.min(this.width/e.w,this.height/e.h))/100,i=Math.max(1e-4,i));const n=this.schemeContainer.screenTransform.x,r=this.schemeContainer.screenTransform.y,s=this.schemeContainer.screenTransform.scale,o=this.width/2-(e.x+e.w/2)*i,a=this.height/2-(e.y+e.h/2)*i;t?(0,Fd.oK)(this.editorId,new jd.ZP({durationMillis:400,animationType:"ease-out",update:e=>{this.schemeContainer.screenTransform.scale=s*(1-e)+i*e,this.schemeContainer.screenTransform.x=n*(1-e)+o*e,this.schemeContainer.screenTransform.y=r*(1-e)+a*e},destroy:()=>{this.informUpdateOfScreenTransform(this.schemeContainer.screenTransform)}}),"screen","screen-tansform"):(this.schemeContainer.screenTransform.scale=i,this.schemeContainer.screenTransform.x=o,this.schemeContainer.screenTransform.y=a,this.informUpdateOfScreenTransform(this.schemeContainer.screenTransform))},startLinksAnimation(){this.linksAnimated=!0,(0,Fd.oK)(this.editorId,new jd.ZP({durationMillis:300,update:e=>{(0,Fe.Ed)(this.selectedItemLinks,(t=>{t.x=t.startX*(1-e)+t.destinationX*e,t.y=t.startY*(1-e)+t.destinationY*e}))},destroy:()=>{this.linksAnimated=!1}}),"screen","links-animation")},generateItemLinks(e){if(e.links&&e.links.length>0){const t=this.schemeContainer.worldPointOnItem(e.area.w/2,e.area.h/2,e);let i=this._x(t.x),n=this._y(t.y),r=i,s=n;(n>this.height-100||n<100)&&(n=this.height/4);let o=Math.max(20,Math.min(40,this.height/(e.links.length+1))),a=n-e.links.length*o/2;const l=this.schemeContainer.worldPointOnItem(e.area.w,0,e);let c=this._x(l.x)+10;this.width-c<300&&(c=Math.max(10,this.width-300));const h=e=>"doc"===e.type&&e.url&&e.url.startsWith("/docs/")&&this.$router&&"history"!==this.$router.mode?"#"+e.url:e.url;return(0,Fe.UI)(e.links,((e,t)=>({url:h(e),type:e.type,iconClass:this.getIconClassForLink(e),title:e.title,x:i,y:n,startX:r,startY:s,destinationX:c,destinationY:a+o*t,width:1e3,height:30})))}return[]},informUpdateOfScreenTransform(e){this.$emit("screen-transform-updated",e)},calculateLinkBackgroundRectWidth:e=>e.title?10*e.title.length:10*e.url.length,getIconClassForLink(e){if("file"===e.type){const t=e.title.lastIndexOf("."),i=e.title.substring(Math.max(0,t+1)).toLowerCase();return Rd.Z.findFileIcon(i).cssClass}return Rd.Z.findTypeByNameOrDefault(e.type).cssClass},toLocalPoint(e,t){return{x:(e-this.schemeContainer.screenTransform.x)/this.schemeContainer.screenTransform.scale,y:(t-this.schemeContainer.screenTransform.y)/this.schemeContainer.screenTransform.scale}},createHUDTransform(e){let t=0,i=0;return"left"===e.shapeProps.horizontalPosition?t=0:"right"===e.shapeProps.horizontalPosition?t=this.width-e.area.w:"center"===e.shapeProps.horizontalPosition&&(t=(this.width-e.area.w)/2),"top"===e.shapeProps.verticalPosition?i=0:"bottom"===e.shapeProps.verticalPosition?i=this.height-e.area.h:"center"===e.shapeProps.verticalPosition&&(i=(this.height-e.area.h)/2),`translate(${t} ${i})`},onDragEnter(e){e.preventDefault(),e.stopPropagation()},onDragOver(e){e.preventDefault(),e.stopPropagation()},onDragLeave(e){e.preventDefault(),e.stopPropagation()},areaToViewport(e,t){const i=this.pointToViewport(e.x,e.y,t);return{x:i.x,y:i.y,w:e.w*t.scale,h:e.h*t.scale}},pointToViewport:(e,t,i)=>({x:e*i.scale+i.x,y:t*i.scale+i.y}),onFileDragEnter(e){e.dataTransfer&&this.$store.state.apiClient&&this.$store.state.apiClient.uploadFile&&(this.draggingFileOver=!0)},onFileDragOver(e){e.dataTransfer&&this.$store.state.apiClient&&this.$store.state.apiClient.uploadFile&&(this.draggingFileOver=!0)},onFileDragLeave(e){this.draggingFileOver=!1},onFileDrop(e){if(this.draggingFileOver=!1,e.preventDefault(),"edit"!==this.mode||!this.$store.state.apiClient||!this.$store.state.apiClient.uploadFile)return;let t=[...e.dataTransfer.items].filter((e=>"file"===e.kind));if(0===t.length)return;const i=this.mouseCoordsFromPageCoords(e.pageX,e.pageY),n=this.toLocalPoint(i.x,i.y);let r=-1;t.map((e=>e.getAsFile())).map((e=>{const t=e.type||"",i=e.name;return nh.Z.addInfoSystemMessage(this.$store,`Uploading file "${i}"...`,`file-uploading-${i}`,"fas fa-spinner fa-spin fa-1x"),this.$store.state.apiClient.uploadFile(e).then((e=>{r+=1;const s=Uc.Z.clone(fh.XZ);if(t.startsWith("image/")){s.name=i,s.shape="image",s.shapeProps={image:e};const t=200;s.area={x:n.x,y:n.y+r*(t+10),w:200,h:t}}else s.name="Link to "+i,s.shape="link",s.shapeProps={url:e,icon:"file"},s.cursor="pointer",s.textSlots={link:{text:i,halign:"left",valign:"top",fontSize:16,paddingLeft:0,paddingTop:0,paddingBottom:0,paddingRight:0,color:"#047EFB"}},s.area={x:n.x,y:n.y+40*r,w:12*i.length+30,h:30};(0,xd.z9)(s),this.schemeContainer.addItem(s),mh.Z.item.changed.specific.$emit(this.editorId,s.id,"links"),mh.Z.schemeChangeCommitted.$emit(this.editorId)})).catch((e=>(console.error(e),e.response&&e.response.data&&e.response.data.message?nh.Z.addErrorSystemMessage(this.$store,e.response.data.message,`item-upload-error-${i}`):nh.Z.addErrorSystemMessage(this.$store,"Something went wrong, could not upload file",`item-upload-error-${i}`),null)))}))},toggleClickableMarkers(){const e=[];(0,fh.tb)(this.schemeContainer.scheme.items,(t=>{if(!t.visible)return!1;if(t.description&&t.description.length>4||t.links&&t.links.lengt>0||(e=>{if(0===e.length)return!1;for(let t=0;t<e.length;t++){const i=e[t].event;if(i===zd.Z.standardEvents.mousein.id||i===zd.Z.standardEvents.clicked.id)return!0}return!1})(t.behavior.events)||t.behavior.dragging&&"none"!==t.behavior.dragging){const i=this.generateItemHighlight(t,!1);i.fill=i.stroke,e.push(i)}return!0})),this.worldHighlightedItems=e,this.animateCurrentHighlightedItems()},animateCurrentHighlightedItems(){if(this.highlightAnimationTime=0,this.highlightAnimated)return;if(this.highlightAnimated=!0,0===this.worldHighlightedItems.length)return;const e=t=>{const i=performance.now(),n=i-t;if(this.highlightAnimationTime+=n,!this.highlightAnimated||this.highlightAnimationTime>5e3||0===this.worldHighlightedItems.length)return this.highlightAnimationTime=0,this.highlightAnimated=!0,this.worldHighlightedItems=[],void this.$forceUpdate();for(let e=0;e<this.worldHighlightedItems.length;e++)this.worldHighlightedItems[e].opacity=.2*Math.cos(this.highlightAnimationTime/300)+.3;this.$forceUpdate(),requestAnimationFrame((()=>e(i)))};requestAnimationFrame((()=>e(performance.now())))},_x(e){return e*this.schemeContainer.screenTransform.scale+this.schemeContainer.screenTransform.x},_y(e){return e*this.schemeContainer.screenTransform.scale+this.schemeContainer.screenTransform.y},_z(e){return e*this.schemeContainer.screenTransform.scale}},computed:{fileDropLayerFill(){return this.draggingFileOver?"rgba(200,255,200,0.6)":"rgba(255,255,255,0.0)"},cssClass(){const e=["mode-"+this.mode];return"view"===this.mode&&this.textSelectionEnabled||e.push("text-nonselectable"),e},safeZoom(){return this.schemeContainer.screenTransform.scale>1e-5?this.schemeContainer.screenTransform.scale:1},transformSvg(){const e=Math.floor(this.schemeContainer.screenTransform.x||0),t=Math.floor(this.schemeContainer.screenTransform.y||0),i=this.schemeContainer.screenTransform.scale||1;return`translate(${e} ${t}) scale(${i} ${i})`},gridStep(){return zh.Z.getSnappingWidthForScale(this.schemeContainer.screenTransform.scale)*this.schemeContainer.screenTransform.scale},gridCount(){const e=zh.Z.getSnappingWidthForScale(this.schemeContainer.screenTransform.scale),t=e*this.schemeContainer.screenTransform.scale;if(t<4)return{x:0,y:0,x0:0,y0:0};const i=Math.ceil(this.width/t)+1,n=Math.ceil(this.height/t)+1,r=e*this.schemeContainer.screenTransform.scale;let s=Math.ceil(this.schemeContainer.screenTransform.x%r)-r,o=Math.ceil(this.schemeContainer.screenTransform.y%r)-r;return{x:i,y:n,x0:Math.ceil((this._x(0)-s)/t),y0:Math.ceil((this._y(0)-o)/t)}},gridTransform(){const e=zh.Z.getSnappingWidthForScale(this.schemeContainer.screenTransform.scale)*this.schemeContainer.screenTransform.scale;return`translate(${Math.ceil(this.schemeContainer.screenTransform.x%e)-e} ${Math.ceil(this.schemeContainer.screenTransform.y%e)-e})`},multiSelectBox(){return this.$store.getters.multiSelectBox},horizontalSnapper(){return this.$store.getters.horizontalSnapper},verticalSnapper(){return this.$store.getters.verticalSnapper},shouldShowDropMask(){return this.$store.getters.isDraggingItemCreation}},filters:{formatLinkTitle:e=>e.title?e.title:e.url},watch:{textSelectionEnabled(e){this.mouseEventsEnabled=!("view"===this.mode&&e),this.$forceUpdate()},highlightedItems(e){this.highlightItems(e.itemIds,e.showPins)},zoomToItemsTrigger(){this.zoomToItems(this.zoomedItems)}}},Jd=Kd,Yd=(0,Re.Z)(Jd,Cd,[],!1,null,null,null).exports;var Qd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",{style:{opacity:e.mainOpacity},attrs:{"data-preview-ignore":"true"}},[!e.isItemConnector&&e.isThin?i("path",{staticClass:"edit-box-outline",attrs:{transform:e.svgEditBoxTransform,d:"M 0 0 L "+e.editBox.area.w+" 0  L "+e.editBox.area.w+" "+e.editBox.area.h+" L 0 "+e.editBox.area.h+" Z","data-type":"edit-box","stroke-width":5/e.safeZoom,fill:"none",stroke:"rgba(255,255,255,0.0)"}}):e._e(),e._v(" "),e.isItemConnector?e._e():i("path",{class:{"edit-box-outline":e.isThin},staticStyle:{opacity:"0.8"},attrs:{transform:e.svgEditBoxTransform,d:"M 0 0 L "+e.editBox.area.w+" 0  L "+e.editBox.area.w+" "+e.editBox.area.h+" L 0 "+e.editBox.area.h+" Z","data-type":"edit-box","stroke-width":1/e.safeZoom,fill:"none",stroke:e.boundaryBoxColor}}),e._v(" "),e.isItemConnector?e._e():i("path",{staticStyle:{opacity:"0.8"},attrs:{transform:e.svgEditBoxTransform,d:"M 0 0 L "+e.editBox.area.w+" 0  L "+e.editBox.area.w+" "+e.editBox.area.h+" L 0 "+e.editBox.area.h+" Z","data-type":"edit-box","stroke-width":1/e.safeZoom,fill:e.editBoxFill,stroke:"none"},on:{dragenter:e.onItemDragEnter,dragover:e.onItemDragOver,dragleave:e.onItemDragLeave,drop:e.onItemDrop}}),e._v(" "),e._l(e.editBox.ruleGuides,(function(t){return i("g",["line"===t.t?i("line",{staticClass:"edit-box-rule-guide",attrs:{x1:t.p1.x,y1:t.p1.y,x2:t.p2.x,y2:t.p2.y,stroke:e.boundaryBoxColor,"stroke-width":3/e.safeZoom}}):e._e(),e._v(" "),"label"===t.t&&t.limit>(e.guideLabelSymbolSize*t.text.length+4)/e.safeZoom?i("g",{attrs:{transform:"translate("+t.x+", "+t.y+") scale("+1/e.safeZoom+", "+1/e.safeZoom+") translate("+(-e.guideLabelSymbolSize*t.text.length/2-2)+", -8)"}},[i("rect",{attrs:{x:"0",y:"0",width:e.guideLabelSymbolSize*t.text.length+4,height:"16",stroke:e.boundaryBoxColor,fill:"rgba(255,255,255,1.0)","stroke-width":1}}),e._v(" "),i("foreignObject",{attrs:{x:"0",y:"0",width:e.guideLabelSymbolSize*t.text.length+4,height:"16"}},[i("div",{staticStyle:{color:"white",display:"table-cell","text-align":"center","vertical-align":"middle","font-family":"'Courier New', monospace"},style:{"font-size":"10px",width:e.guideLabelSymbolSize*t.text.length+4+"px",height:"16px",color:e.boundaryBoxColor},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[e._v("\n                    "+e._s(t.text)+"\n                ")])])]):e._e()])})),e._v(" "),"regular"===e.kind?i("g",[1===e.editBox.items.length&&"connector"===e.editBox.items[0].shape&&e.selectedConnectorPath?i("g",{attrs:{transform:e.svgConnectorCompleteTransform}},[i("path",{staticStyle:{"stroke-linejoin":"round",opacity:"0.6"},attrs:{d:e.selectedConnectorPath,"stroke-width":e.editBox.items[0].shapeProps.strokeSize+3+"px",stroke:e.boundaryBoxColor,"data-preview-ignore":"true","data-item-id":e.editBox.items[0].id,fill:"none"}}),e._v(" "),i("path",{staticStyle:{"stroke-linejoin":"round"},attrs:{d:e.selectedConnectorPath,"stroke-width":e.editBox.items[0].shapeProps.strokeSize+"px",stroke:e.editBox.items[0].shapeProps.strokeColor,"data-preview-ignore":"true","data-item-id":e.editBox.items[0].id,"stroke-dasharray":e.createStrokeDashArray(e.editBox.items[0].shapeProps.strokePattern,e.editBox.items[0].shapeProps.strokeSize),fill:"none"}})]):e._e(),e._v(" "),e.editBox.connectorPoints.length>0?i("g",{attrs:{transform:e.svgEditBoxTransform}},e._l(e.editBox.connectorPoints,(function(t){return i("circle",{key:"item-control-point-"+t.itemId+"-"+t.id,staticClass:"item-control-point",attrs:{"data-control-point-item-id":t.itemId,"data-control-point-id":t.pointIdx,cx:t.x,cy:t.y,fill:"rgba(255,255,255,0.7)",stroke:e.boundaryBoxColor,"stroke-size":1/e.safeZoom,r:e.controlPointSize/e.safeZoom}})})),0):e._e(),e._v(" "),e.shouldShowControlPoints?i("g",{attrs:{transform:e.svgEditBoxTransform}},[e._l(e.controlPoints,(function(t){return i("circle",{key:"item-control-point-"+t.id,staticClass:"item-control-point",attrs:{"data-control-point-item-id":e.editBox.items[0].id,"data-control-point-id":t.id,cx:t.point.x,cy:t.point.y,fill:e.controlPointsColor,r:e.controlPointSize/e.safeZoom}})})),e._v(" "),e._l(e.customControls,(function(t,n){return i("g",{attrs:{transform:"translate("+(e.editBox.area.w*t.xAxis.widthFactor+t.xAxis.direction*(t.position.x*t.xAxis.scaleFactor/e.safeZoom+t.position.x*(1-t.xAxis.scaleFactor)))+", "+(e.editBox.area.h*t.yAxis.widthFactor+t.yAxis.direction*(t.position.y*t.yAxis.scaleFactor/e.safeZoom+t.position.y*(1-t.yAxis.scaleFactor)))+")"}},[i("circle",{staticClass:"item-control-point",attrs:{cx:0,cy:0,r:10/e.safeZoom,fill:e.controlPointsColor}}),e._v(" "),i("foreignObject",{attrs:{x:-10/e.safeZoom,y:-10/e.safeZoom,width:20/e.safeZoom,height:20/e.safeZoom}},[i("div",{staticStyle:{color:"white",display:"table-cell","text-align":"center","vertical-align":"middle"},style:{"font-size":12/e.safeZoom+"px",width:Math.round(20/e.safeZoom)+"px",height:Math.round(20/e.safeZoom)+"px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[i("i",{class:t.iconClass})])]),e._v(" "),i("circle",{staticClass:"item-control-point",attrs:{cx:0,cy:0,r:10/e.safeZoom,fill:"rgba(255, 255, 255, 0.0)",title:t.name,"data-type":"edit-box-custom-control"},on:{click:function(t){return e.onCustomControlClick(n)}}})])})),e._v(" "),e._l(e.templateControls,(function(t,n){return i("g",["button"===t.type?i("g",[i("rect",{staticClass:"item-control-point",attrs:{x:t.x-t.xc*t.width/e.safeZoom,y:t.y-t.yc*t.height/e.safeZoom,width:t.width/e.safeZoom,height:t.height/e.safeZoom,fill:e.controlPointsColor,rx:10/e.safeZoom}}),e._v(" "),i("foreignObject",{attrs:{x:t.x-t.xc*t.width/e.safeZoom,y:t.y-t.yc*t.height/e.safeZoom,width:t.width/e.safeZoom,height:t.height/e.safeZoom}},[i("div",{staticStyle:{color:"white",display:"table-cell","white-space":"nowrap","text-align":"center","vertical-align":"middle"},style:{"font-size":12/e.safeZoom+"px",width:Math.round(t.width/e.safeZoom)+"px",height:Math.round(t.height/e.safeZoom)+"px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[e._v("\n                            "+e._s(t.text)+"\n                        ")])]),e._v(" "),i("rect",{staticClass:"item-control-point",attrs:{x:t.x-t.xc*t.width/e.safeZoom,y:t.y-t.yc*t.height/e.safeZoom,width:t.width/e.safeZoom,height:t.height/e.safeZoom,fill:"rgba(0,0,0,0)",rx:10/e.safeZoom,"data-type":"edit-box-template-control"},on:{click:function(t){return e.onTemplateControlClick(n)}}})]):e._e()])}))],2):e._e()]):e._e(),e._v(" "),e.isItemConnector?e._e():i("g",{attrs:{transform:e.svgEditBoxTransform}},["regular"!==e.kind||e.isAutoLayoutEnabled||e.isLocked||!e.editBox.rotationEnabled?e._e():i("ellipse",{staticClass:"boundary-box-dragger",attrs:{"data-type":"edit-box-rotational-dragger",fill:e.boundaryBoxColor,cx:e.editBox.area.w/2,cy:-60/e.safeZoom,rx:e.controlPointSize/e.safeZoom,ry:e.controlPointSize/e.safeZoom}}),e._v(" "),!e.isAutoLayoutEnabled&&!e.isLocked&&e.editBox.connectorStarterEnabled&&1===e.editBox.items.length&&"regular"===e.kind&&e.connectionStarterDisplayed?i("transition",{attrs:{name:"edit-box-controls"}},[i("g",[i("path",{staticClass:"boundary-box-connector-starter",attrs:{transform:"translate("+(e.editBox.area.w/2+3/e.safeZoom)+"  "+(e.editBox.area.h+30/e.safeZoom)+") scale("+1/e.safeZoom+") rotate(90)","data-connector-starter-item-id":e.editBox.items[0].id,fill:e.boundaryBoxColor,d:"M 0 0  L 10 0  L 10 -3  L 20 3  L 10 9  L 10 6  L 0 6 Z"}}),e._v(" "),i("path",{staticClass:"boundary-box-connector-starter",attrs:{transform:"translate("+(e.editBox.area.w/2-3/e.safeZoom)+"  "+-30/e.safeZoom+") scale("+1/e.safeZoom+") rotate(270)","data-connector-starter-item-id":e.editBox.items[0].id,fill:e.boundaryBoxColor,d:"M 0 0  L 10 0  L 10 -3  L 20 3  L 10 9  L 10 6  L 0 6 Z"}}),e._v(" "),i("path",{staticClass:"boundary-box-connector-starter",attrs:{transform:"translate("+(e.editBox.area.w+30/e.safeZoom)+"  "+(e.editBox.area.h/2-3/e.safeZoom)+") scale("+1/e.safeZoom+")","data-connector-starter-item-id":e.editBox.items[0].id,fill:e.boundaryBoxColor,d:"M 0 0  L 10 0  L 10 -3  L 20 3  L 10 9  L 10 6  L 0 6 Z"}}),e._v(" "),i("path",{staticClass:"boundary-box-connector-starter",attrs:{transform:"translate("+-30/e.safeZoom+"  "+(e.editBox.area.h/2+3/e.safeZoom)+") scale("+1/e.safeZoom+") rotate(180)","data-connector-starter-item-id":e.editBox.items[0].id,fill:e.boundaryBoxColor,d:"M 0 0  L 10 0  L 10 -3  L 20 3  L 10 9  L 10 6  L 0 6 Z"}})])]):e._e(),e._v(" "),"regular"!==e.kind||e.isAutoLayoutEnabled||e.isLocked?e._e():i("g",[i("rect",{staticClass:"boundary-box-dragger",attrs:{"data-type":"edit-box-resize-dragger","data-dragger-edges":"top,left",fill:e.boundaryBoxColor,x:-(2*e.draggerSize+10)/e.safeZoom,y:-(2*e.draggerSize+10)/e.safeZoom,width:2*e.draggerSize/e.safeZoom,height:2*e.draggerSize/e.safeZoom}}),e._v(" "),i("rect",{staticClass:"boundary-box-dragger",attrs:{"data-type":"edit-box-resize-dragger","data-dragger-edges":"top",fill:e.boundaryBoxColor,x:e.editBox.area.w/2-e.draggerSize/e.safeZoom,y:-(2*e.draggerSize+10)/e.safeZoom,width:2*e.draggerSize/e.safeZoom,height:2*e.draggerSize/e.safeZoom}}),e._v(" "),i("rect",{staticClass:"boundary-box-dragger",attrs:{"data-type":"edit-box-resize-dragger","data-dragger-edges":"top,right",fill:e.boundaryBoxColor,x:e.editBox.area.w+10/e.safeZoom,y:-(2*e.draggerSize+10)/e.safeZoom,width:2*e.draggerSize/e.safeZoom,height:2*e.draggerSize/e.safeZoom}}),e._v(" "),i("rect",{staticClass:"boundary-box-dragger",attrs:{"data-type":"edit-box-resize-dragger","data-dragger-edges":"left",fill:e.boundaryBoxColor,x:-(2*e.draggerSize+10)/e.safeZoom,y:e.editBox.area.h/2-e.draggerSize/e.safeZoom,width:2*e.draggerSize/e.safeZoom,height:2*e.draggerSize/e.safeZoom}}),e._v(" "),i("rect",{staticClass:"boundary-box-dragger",attrs:{"data-type":"edit-box-resize-dragger","data-dragger-edges":"right",fill:e.boundaryBoxColor,x:e.editBox.area.w+10/e.safeZoom,y:e.editBox.area.h/2-e.draggerSize/e.safeZoom,width:2*e.draggerSize/e.safeZoom,height:2*e.draggerSize/e.safeZoom}}),e._v(" "),i("rect",{staticClass:"boundary-box-dragger",attrs:{"data-type":"edit-box-resize-dragger","data-dragger-edges":"bottom,left",fill:e.boundaryBoxColor,x:-(2*e.draggerSize+10)/e.safeZoom,y:e.editBox.area.h+10/e.safeZoom,width:2*e.draggerSize/e.safeZoom,height:2*e.draggerSize/e.safeZoom}}),e._v(" "),i("rect",{staticClass:"boundary-box-dragger",attrs:{"data-type":"edit-box-resize-dragger","data-dragger-edges":"bottom",fill:e.boundaryBoxColor,x:e.editBox.area.w/2-e.draggerSize/e.safeZoom,y:e.editBox.area.h+10/e.safeZoom,width:2*e.draggerSize/e.safeZoom,height:2*e.draggerSize/e.safeZoom}}),e._v(" "),i("rect",{staticClass:"boundary-box-dragger",attrs:{"data-type":"edit-box-resize-dragger","data-dragger-edges":"bottom,right",fill:e.boundaryBoxColor,x:e.editBox.area.w+10/e.safeZoom,y:e.editBox.area.h+10/e.safeZoom,width:2*e.draggerSize/e.safeZoom,height:2*e.draggerSize/e.safeZoom}}),e._v(" "),e.showPivot?i("g",{staticClass:"boundary-box-pivot-dragger"},[i("line",{attrs:{x1:e.editBox.area.w*e.editBox.pivotPoint.x,y1:e.editBox.area.h*e.editBox.pivotPoint.y-10/e.safeZoom,x2:e.editBox.area.w*e.editBox.pivotPoint.x,y2:e.editBox.area.h*e.editBox.pivotPoint.y+10/e.safeZoom,stroke:e.boundaryBoxColor,"stroke-width":1/e.safeZoom}}),e._v(" "),i("line",{attrs:{x1:e.editBox.area.w*e.editBox.pivotPoint.x-10/e.safeZoom,y1:e.editBox.area.h*e.editBox.pivotPoint.y,x2:e.editBox.area.w*e.editBox.pivotPoint.x+10/e.safeZoom,y2:e.editBox.area.h*e.editBox.pivotPoint.y,stroke:e.boundaryBoxColor,"stroke-width":1/e.safeZoom}}),e._v(" "),i("circle",{attrs:{"data-type":"edit-box-pivot-dragger",fill:"rgba(255,255,255,0.0)",stroke:e.boundaryBoxColor,"stroke-width":1/e.safeZoom,cx:e.editBox.area.w*e.editBox.pivotPoint.x,cy:e.editBox.area.h*e.editBox.pivotPoint.y,r:10/e.safeZoom}})]):e._e()]),e._v(" "),"regular"===e.kind?i("g",[i("g",{staticClass:"boundary-box-context-menu-button"},[i("rect",{attrs:{"data-type":"edit-box-context-menu-button",fill:e.boundaryBoxColor,x:e.editBox.area.w+30/e.safeZoom,y:-50/e.safeZoom,width:20/e.safeZoom,height:20/e.safeZoom,rx:2/e.safeZoom}}),e._v(" "),i("rect",{attrs:{"data-type":"edit-box-context-menu-button",fill:"#ffffff",x:e.editBox.area.w+30/e.safeZoom+3.5/e.safeZoom,y:-50/e.safeZoom+4/e.safeZoom,width:12.5/e.safeZoom,height:2/e.safeZoom,rx:1/e.safeZoom}}),e._v(" "),i("rect",{attrs:{"data-type":"edit-box-context-menu-button",fill:"#ffffff",x:e.editBox.area.w+30/e.safeZoom+3.5/e.safeZoom,y:-50/e.safeZoom+9/e.safeZoom,width:12.5/e.safeZoom,height:2/e.safeZoom,rx:1/e.safeZoom}}),e._v(" "),i("rect",{attrs:{"data-type":"edit-box-context-menu-button",fill:"#ffffff",x:e.editBox.area.w+30/e.safeZoom+3.5/e.safeZoom,y:-50/e.safeZoom+14/e.safeZoom,width:12.5/e.safeZoom,height:2/e.safeZoom,rx:1/e.safeZoom}}),e._v(" "),i("rect",{attrs:{"data-type":"edit-box-context-menu-button",fill:"rgba(255,255,255,0.0)",x:e.editBox.area.w+30/e.safeZoom,y:-50/e.safeZoom,width:20/e.safeZoom,height:20/e.safeZoom,rx:2/e.safeZoom}})])]):"crop-image"===e.kind?i("g",[i("g",{attrs:{transform:"translate("+10/e.safeZoom+", "+-20/e.safeZoom+") scale("+1/e.safeZoom+")"}},[i("foreignObject",{attrs:{x:0,y:0,width:"100",height:"20"}},[i("div",[i("span",{staticClass:"link",attrs:{"data-type":"edit-box-reset-image-crop-link"}},[e._v("Reset")])])])]),e._v(" "),i("path",{staticClass:"boundary-box-dragger",attrs:{transform:"translate("+e.editBox.area.w/2+", 0) rotate(0)",d:"M "+-e.cdsB+" "+-e.cds+" L "+e.cdsB+" "+-e.cds+"  L "+e.cdsB+" "+e.cds+" L "+-e.cdsB+" "+e.cds+" Z","data-type":"edit-box-resize-dragger","data-dragger-edges":"top",fill:e.boundaryBoxColor,stroke:"rgba(255,255,255,1.0)","stroke-width":1/e.safeZoom+"px"}}),e._v(" "),i("path",{staticClass:"boundary-box-dragger",attrs:{transform:"translate("+e.editBox.area.w+", "+e.editBox.area.h/2+") rotate(90)",d:"M "+-e.cdsB+" "+-e.cds+" L "+e.cdsB+" "+-e.cds+"  L "+e.cdsB+" "+e.cds+" L "+-e.cdsB+" "+e.cds+" Z","data-type":"edit-box-resize-dragger","data-dragger-edges":"right",fill:e.boundaryBoxColor,stroke:"rgba(255,255,255,1.0)","stroke-width":1/e.safeZoom+"px"}}),e._v(" "),i("path",{staticClass:"boundary-box-dragger",attrs:{transform:"translate("+e.editBox.area.w/2+", "+e.editBox.area.h+") rotate(0)",d:"M "+-e.cdsB+" "+-e.cds+" L "+e.cdsB+" "+-e.cds+"  L "+e.cdsB+" "+e.cds+" L "+-e.cdsB+" "+e.cds+" Z","data-type":"edit-box-resize-dragger","data-dragger-edges":"bottom",fill:e.boundaryBoxColor,stroke:"rgba(255,255,255,1.0)","stroke-width":1/e.safeZoom+"px"}}),e._v(" "),i("path",{staticClass:"boundary-box-dragger",attrs:{transform:"translate(0, "+e.editBox.area.h/2+") rotate(90)",d:"M "+-e.cdsB+" "+-e.cds+" L "+e.cdsB+" "+-e.cds+"  L "+e.cdsB+" "+e.cds+" L "+-e.cdsB+" "+e.cds+" Z","data-type":"edit-box-resize-dragger","data-dragger-edges":"left",fill:e.boundaryBoxColor,stroke:"rgba(255,255,255,1.0)","stroke-width":1/e.safeZoom+"px"}}),e._v(" "),i("path",{staticClass:"boundary-box-dragger",attrs:{d:"M "+-e.cds+" "+-e.cds+" L "+e.cdsB+" "+-e.cds+" L "+e.cdsB+" "+e.cds+" L "+e.cds+" "+e.cds+" L "+e.cds+" "+e.cdsB+" L "+-e.cds+" "+e.cdsB+" Z","data-type":"edit-box-resize-dragger","data-dragger-edges":"top,left",fill:e.boundaryBoxColor,stroke:"rgba(255,255,255,1.0)","stroke-width":1/e.safeZoom+"px"}}),e._v(" "),i("path",{staticClass:"boundary-box-dragger",attrs:{transform:"translate("+e.editBox.area.w+", 0) rotate(90)",d:"M "+-e.cds+" "+-e.cds+" L "+e.cdsB+" "+-e.cds+" L "+e.cdsB+" "+e.cds+" L "+e.cds+" "+e.cds+" L "+e.cds+" "+e.cdsB+" L "+-e.cds+" "+e.cdsB+" Z","data-type":"edit-box-resize-dragger","data-dragger-edges":"top,right",fill:e.boundaryBoxColor,stroke:"rgba(255,255,255,1.0)","stroke-width":1/e.safeZoom+"px"}}),e._v(" "),i("path",{staticClass:"boundary-box-dragger",attrs:{transform:"translate("+e.editBox.area.w+", "+e.editBox.area.h+") rotate(180)",d:"M "+-e.cds+" "+-e.cds+" L "+e.cdsB+" "+-e.cds+" L "+e.cdsB+" "+e.cds+" L "+e.cds+" "+e.cds+" L "+e.cds+" "+e.cdsB+" L "+-e.cds+" "+e.cdsB+" Z","data-type":"edit-box-resize-dragger","data-dragger-edges":"bottom,right",fill:e.boundaryBoxColor,stroke:"rgba(255,255,255,1.0)","stroke-width":1/e.safeZoom+"px"}}),e._v(" "),i("path",{staticClass:"boundary-box-dragger",attrs:{transform:"translate(0, "+e.editBox.area.h+") rotate(-90)",d:"M "+-e.cds+" "+-e.cds+" L "+e.cdsB+" "+-e.cds+" L "+e.cdsB+" "+e.cds+" L "+e.cds+" "+e.cds+" L "+e.cds+" "+e.cdsB+" L "+-e.cds+" "+e.cdsB+" Z","data-type":"edit-box-resize-dragger","data-dragger-edges":"bottom,left",fill:e.boundaryBoxColor,stroke:"rgba(255,255,255,1.0)","stroke-width":1/e.safeZoom+"px"}})]):e._e()],1)],2)};Qd._withStripped=!0;var Xd=i(4525);function eu(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function tu(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(i),!0).forEach((function(t){iu(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):eu(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function iu(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function nu(e){return"right"===e||"bottom"===e?{widthFactor:1,direction:1,scaleFactor:1}:"left"===e||"top"===e?{widthFactor:0,direction:-1,scaleFactor:1}:{widthFactor:0,direction:1,scaleFactor:0}}const ru={props:{useFill:{type:Boolean,default:!0},apiClient:{type:Object,required:!0},editorId:{type:String,required:!0},schemeContainer:{type:Object,required:!0},cursor:{type:Object},editBox:{type:Object,required:!0},zoom:{type:Number},boundaryBoxColor:{type:String},controlPointsColor:{type:String},kind:{type:String,default:"regular"}},beforeMount(){if(nh.Z.setSelectedConnector(this.$store,null),this.editBox.templateRef&&this.editBox.templateItemRoot&&this.fetchTemplate(this.editBox.templateRef),1===this.editBox.items.length){const e=this.editBox.items[0],t=Id.Z.find(e.shape);this.configureCustomControls(e,t?t.editorProps:{}),"connector"===e.shape&&1===this.editBox.itemIds.size&&nh.Z.setSelectedConnector(this.$store,e),nh.Z.setItemControlPoints(this.$store,e)}else nh.Z.clearItemControlPoints(this.$store)},mounted(){this.onCursorChange(this.cursor),mh.Z.colorControlToggled.$on(this.editorId,this.onColorControlToggled)},beforeDestroy(){this.clearConnectionStarterTimeout(),mh.Z.colorControlToggled.$off(this.editorId,this.onColorControlToggled)},data:()=>({draggerSize:window.innerWidth>900?5:8,controlPointSize:window.innerWidth>900?6:10,connectionStarterDisplayed:!1,connectionStarterTimerId:null,template:null,customControls:[],templateControls:[],colorControlToggled:!1,draggingFileOver:!1}),methods:{onItemDragEnter(e){this.$store.state.apiClient&&this.$store.state.apiClient.uploadFile&&this.editBox.items&&0!==this.editBox.items.length&&e.dataTransfer&&(this.draggingFileOver=!0)},onItemDragOver(e){this.$store.state.apiClient&&this.$store.state.apiClient.uploadFile&&this.editBox.items&&0!==this.editBox.items.length&&e.dataTransfer&&(this.draggingFileOver=!0)},onItemDragLeave(e){this.draggingFileOver=!1},onItemDrop(e){if(this.draggingFileOver=!1,e.preventDefault(),!this.$store.state.apiClient||!this.$store.state.apiClient.uploadFile||!this.editBox.items||0===this.editBox.items.length)return;let t=[...e.dataTransfer.items].filter((e=>"file"===e.kind));0!==t.length&&t.map((e=>e.getAsFile())).map((e=>{const t=e.name;return nh.Z.addInfoSystemMessage(this.$store,`Uploading file "${t}"...`,`file-uploading-${t}`,"fas fa-spinner fa-spin fa-1x"),this.$store.state.apiClient.uploadFile(e).then((e=>{this.editBox.items.forEach((i=>{"link"===i.shape?(i.shapeProps.url=e,i.shapeProps.icon="file",nh.Z.addInfoSystemMessage(this.$store,`Updated link url to ${e}`,`item-link-url-changed-${this.editBox.id}`),mh.Z.item.changed.specific.$emit(this.editorId,i.id)):(Array.isArray(i.links)||(i.links=[]),i.links.push({title:t,url:e,type:"file"}),nh.Z.addInfoSystemMessage(this.$store,`Attached file "${t}" to item`,`item-link-url-changed-${this.editBox.id}-${t}`),mh.Z.item.changed.specific.$emit(this.editorId,i.id,"links"))})),mh.Z.schemeChangeCommitted.$emit(this.editorId)})).catch((e=>(console.error(e),e.response&&e.response.data&&e.response.data.message?nh.Z.addErrorSystemMessage(this.$store,e.response.data.message,`item-upload-error-${t}`):nh.Z.addErrorSystemMessage(this.$store,"Something went wrong, could not upload file",`item-upload-error-${t}`),null)))}))},fetchTemplate(e){this.schemeContainer.getTemplate(e).then((e=>{this.template=e,this.buildTemplateControls()}))},createStrokeDashArray:(e,t)=>Sd.Z.createDashArray(e,t),clearConnectionStarterTimeout(){this.connectionStarterTimerId&&clearTimeout(this.connectionStarterTimerId)},hideConnectionStarter(){this.clearConnectionStarterTimeout(),this.connectionStarterTimerId=setTimeout((()=>{this.connectionStarterDisplayed=!1,this.connectionStarterTimerId=null}),500)},onCursorChange(e){const t=zh.Z.localPointInArea(e.x,e.y,this.editBox.area,null);t.x>=0&&t.x<=this.editBox.area.w&&t.y>=0&&t.y<=this.editBox.area.h?(this.connectionStarterDisplayed=!0,this.clearConnectionStarterTimeout()):this.hideConnectionStarter()},configureCustomControls(e,t){t&&t.editBoxControls&&t.editBoxControls(this.editorId,e).forEach((e=>{this.customControls.push(tu(tu({},e),{},{xAxis:nu(e.hPlace),yAxis:nu(e.vPlace)}))}))},onCustomControlClick(e){this.customControls[e].click(),this.$emit("custom-control-clicked",this.editBox.items[0])},buildTemplateControls(){if(!this.template||1!==this.editBox.items.length||!this.editBox.templateItemRoot)return;const e=this.editBox.templateItemRoot,t=e.args&&e.args.templateArgs?e.args.templateArgs:{},i=new Set;this.editBox.items.forEach((t=>{t.meta.templateRootId===e.id&&t.args.templatedId&&i.add(t.args.templatedId)})),this.templateControls=this.template.buildControls(t,e.area.w,e.area.h).filter((e=>!e.selectedItemId||i.has(e.selectedItemId))),this.templateControls.forEach((e=>{const t=(0,gh.rs)(e.x,e.y,this.editBox.templateItemRoot),i=zh.Z.localPointInArea(t.x,t.y,this.editBox.area),n=e.placement&&e.placement.length>1?e.placement:"TL";e.xc="R"===n.charAt(1)?1:0,e.yc="B"===n.charAt(0)?1:0,e.x=i.x,e.y=i.y}))},onTemplateControlClick(e){const t=this.editBox.templateItemRoot,i=this.templateControls[e].click(t);if(t.args&&t.args.templateArgs)for(let e in t.args.templateArgs)i.hasOwnProperty(e)&&(t.args.templateArgs[e]=i[e]);this.$emit("template-rebuild-requested",this.editBox.templateItemRoot.id,this.template,t.args.templateArgs)},onColorControlToggled(e){setTimeout((()=>{const e=[".stroke-control-color-container",".color-picker-tooltip"].map((e=>document.querySelectorAll(e).length)).reduce(((e,t)=>e+t),0);this.colorControlToggled=e>0}),100)}},watch:{cursor(e){this.onCursorChange(e)}},computed:{guideLabelSymbolSize:()=>9,editBoxFill(){return this.draggingFileOver?"rgba(140, 255, 140, 0.6)":this.useFill?"rgba(255,255,255,0.0)":"none"},svgConnectorCompleteTransform(){if(!this.$store.getters.selectedConnector)return"";const e=(0,gh.aR)(this.$store.getters.selectedConnector);return`matrix(${e[0][0]},${e[1][0]},${e[0][1]},${e[1][1]},${e[0][2]},${e[1][2]})`},svgEditBoxTransform(){const e=zh.Z.standardTransformWithArea(zh.Z.identityMatrix(),this.editBox.area);return`matrix(${e[0][0]},${e[1][0]},${e[0][1]},${e[1][1]},${e[0][2]},${e[1][2]})`},safeZoom(){return this.zoom>.001?this.zoom:1},cds(){return this.zoom>.001?.7*this.draggerSize/this.zoom:.7*this.draggerSize},cdsB(){return this.zoom>.001?3*this.draggerSize/this.zoom:3*this.draggerSize},controlPoints(){return this.$store.getters.itemControlPointsList},isItemConnector(){return 1===(e=this.editBox).items.length&&1===e.itemIds.size&&"connector"===e.items[0].shape||0===e.items.length&&1===e.connectorPoints.length;var e},shouldShowControlPoints(){return 1===this.editBox.items.length&&"path"!==this.editBox.items[0].shape},selectedConnectorPath(){return this.$store.getters.selectedConnectorPath},showPivot(){return this.$store.getters.showPivot},isThin(){const e=this.zoom>.001?this.zoom:1;return this.editBox.area.w/e<3||this.editBox.area.h/e<3},isAutoLayoutEnabled(){let e=!0;return this.editBox.items.forEach((t=>{e&=t.autoLayout&&t.autoLayout.on})),e},isLocked(){if(this.editBox.connectorPoints&&this.editBox.connectorPoints.length>0)return!1;let e=!0;return this.editBox.items.forEach((t=>{e&=t.locked})),e},mainOpacity(){return this.colorControlToggled?0:this.useFill?1:.5}}},su=ru,ou=(0,Re.Z)(su,Qd,[],!1,null,null,null).exports;var au=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("g",[e._l(e.pathSegments,(function(t){return i("path",{attrs:{"data-type":"path-segment","data-path-index":t.pathId,"data-path-segment-index":t.segmentId,d:t.path,fill:"none",stroke:"rgba(0,0,0,0.0)","stroke-width":e.strokeSize+"px"}})})),e._v(" "),e._l(e.curvePaths,(function(t,n){return i("g",e._l(t.points,(function(r,s){return i("g",{staticClass:"path-control-points"},["B"===r.t?i("g",[i("line",{attrs:{x1:r.x,y1:r.y,x2:r.x1+r.x,y2:r.y1+r.y,stroke:e.boundaryBoxColor,"stroke-width":1/e.safeZoom}}),e._v(" "),i("line",{attrs:{x1:r.x,y1:r.y,x2:r.x2+r.x,y2:r.y2+r.y,stroke:e.boundaryBoxColor,"stroke-width":1/e.safeZoom}})]):e._e(),e._v(" "),i("circle",{attrs:{"data-type":"path-point","data-path-point-index":s,"data-path-index":n,cx:r.x,cy:r.y,r:e.controlPointSize/e.safeZoom,fill:r.selected?e.controlPointsColor:e.boundaryBoxColor,stroke:"none"}}),e._v(" "),"B"===r.t?i("g",[i("path",{attrs:{"data-type":"path-control-point","data-path-point-index":s,"data-path-index":n,"data-path-control-point-index":"1",transform:"translate("+(r.x1+r.x)+" "+(r.y1+r.y)+")",d:"M "+e.rectSize*(r.vx1+r.vy1)/e.safeZoom+" "+e.rectSize*(r.vy1-r.vx1)/e.safeZoom+"  l "+2*-e.rectSize*r.vx1/e.safeZoom+" "+2*-e.rectSize*r.vy1/e.safeZoom+"  l "+2*-e.rectSize*r.vy1/e.safeZoom+" "+2*e.rectSize*r.vx1/e.safeZoom+" l "+2*e.rectSize*r.vx1/e.safeZoom+" "+2*e.rectSize*r.vy1/e.safeZoom+" z",fill:r.selected?e.controlPointsColor:e.boundaryBoxColor,stroke:"none"}}),e._v(" "),i("path",{attrs:{"data-type":"path-control-point","data-path-point-index":s,"data-path-index":n,"data-path-control-point-index":"2",transform:"translate("+(r.x2+r.x)+" "+(r.y2+r.y)+")",d:"M "+e.rectSize*(r.vx2+r.vy2)/e.safeZoom+" "+e.rectSize*(r.vy2-r.vx2)/e.safeZoom+"  l "+2*-e.rectSize*r.vx2/e.safeZoom+" "+2*-e.rectSize*r.vy2/e.safeZoom+"  l "+2*-e.rectSize*r.vy2/e.safeZoom+" "+2*e.rectSize*r.vx2/e.safeZoom+" l "+2*e.rectSize*r.vx2/e.safeZoom+" "+2*e.rectSize*r.vy2/e.safeZoom+" z",fill:r.selected?e.controlPointsColor:e.boundaryBoxColor,stroke:"none"}})]):e._e(),e._v(" "),"A"===r.t?i("g",[i("circle",{attrs:{"data-type":"path-control-point","data-path-point-index":s,"data-path-index":n,"data-path-control-point-index":"1",cx:r.h*(t.points[(s+1)%t.points.length].y-r.y)/100+(t.points[(s+1)%t.points.length].x+r.x)/2,cy:r.h*(r.x-t.points[(s+1)%t.points.length].x)/100+(t.points[(s+1)%t.points.length].y+r.y)/2,r:e.controlPointSize/e.safeZoom,fill:"rgba(255, 255, 255, 0.1)",stroke:r.selected?e.controlPointsColor:e.boundaryBoxColor,"stroke-width":3/e.safeZoom}})]):e._e()])})),0)}))],2)};au._withStripped=!0;var lu=i(8270);function cu(e,t){const i=(0,gh.rs)(e.x,e.y,t);if(i.t=e.t,e.hasOwnProperty("x1")){const n=(0,gh.rs)(e.x+e.x1,e.y+e.y1,t);i.x1=n.x-i.x,i.y1=n.y-i.y}if(e.hasOwnProperty("x2")){const n=(0,gh.rs)(e.x+e.x2,e.y+e.y2,t);i.x2=n.x-i.x,i.y2=n.y-i.y}return e.hasOwnProperty("h")&&(i.h=e.h),i}const hu={props:{editorId:{type:String,required:!0},curvePaths:{type:Array,required:!0},pathPointsUpdateKey:{type:Number,required:!0},item:{type:Object},zoom:{type:Number},boundaryBoxColor:{type:String},controlPointsColor:{type:String}},mounted(){mh.Z.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChanged)},beforeDestroy(){mh.Z.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChanged)},data(){return{pathSegments:this.buildPathSegments(),controlPointSize:window.innerWidth>900?5:10,rectSize:window.innerWidth>900?5:10}},methods:{onItemChanged(){this.pathSegments=this.buildPathSegments(),this.$forceUpdate()},buildPathSegments(){const e=[];return this.item.shapeProps.paths.forEach(((t,i)=>{let n=t.points.length-1;t.closed&&(n=t.points.length);for(let r=0;r<n;r++){const n=(r+1)%t.points.length,s=cu((0,lu.oJ)(t.points[r],this.item.area.w,this.item.area.h),this.item),o=cu((0,lu.oJ)(t.points[n],this.item.area.w,this.item.area.h),this.item);e.push({pathId:i,segmentId:r,path:(0,lu.FI)(lu.DC,lu.DC,[s,o],!1)})}})),e},update(){this.$forceUpdate()}},computed:{safeZoom(){return this.zoom>1e-5?this.zoom:1},strokeSize(){return Math.max(1,this.item.shapeProps.strokeSize)+2}},watch:{pathPointsUpdateKey(){this.update()}}},du=hu,uu=(0,Re.Z)(du,au,[],!1,null,null,null).exports;var pu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"in-place-edit-editor-wrapper",style:e.cssStyle2,attrs:{id:"in-place-text-edit-wrapper-"+e.editorId+"-"+e.item.id,"data-slot-name":e.slotName}},[e.markupDisabled?i("textarea",{ref:"textarea",staticClass:"in-place-text-editor",style:e.editorCssStyle,attrs:{"data-type":"item-in-place-text-editor",autofocus:""},domProps:{value:e.text},on:{keydown:e.onTextareaKeyDown,input:e.onTextareaInput}}):e.editor?i("div",{ref:"editor",staticClass:"item-text-container",style:e.editorCssStyle,attrs:{"data-type":"item-in-place-text-editor"}},[i("editor-content",{attrs:{editor:e.editor}})],1):e._e()])};pu._withStripped=!0;const mu={props:{editorId:{type:String,required:!0},item:{type:Object},slotName:{type:String},area:{type:Object},text:{type:String},cssStyle:{type:Object},zoom:{type:Number},creatingNewItem:{type:Boolean},scalingVector:{type:Object},markupDisabled:{type:Boolean,default:!1},mouseDownId:{type:Number}},components:{RichTextEditor:Ll,EditorContent:ba},beforeMount(){document.addEventListener("keydown",this.onKeyDown),mh.Z.textSlot.moved.$on(this.editorId,this.closeEditBox),this.init()},beforeDestroy(){document.removeEventListener("keydown",this.onKeyDown),mh.Z.textSlot.moved.$off(this.editorId,this.closeEditBox)},data(){return{editor:null,editorCssStyle:this.generateStyle(this.cssStyle)}},methods:{init(){this.markupDisabled||(this.editor=this.createEditor(this.text),mh.Z.inPlaceTextEditor.created.$emit(this.editorId,this.editor))},generateStyle(e){const t=Uc.Z.clone(e);let i=this.zoom;if(t.transform=`scale(${this.zoom})`,t["transform-origin"]="top left",!this.creatingNewItem){t.width=this.area.w/i+"px";const e=this.item.textSlots[this.slotName]?this.item.textSlots[this.slotName].valign:"top";("none"!==this.item.shape||"none"===this.item.shape&&"top"!==e)&&(t.height=this.area.h/i+"px")}return t},createEditor(e){const t=new xa({disablePasteRules:!0,disableInputRules:!0,extensions:[new xl,new wl,new Cl,new Pl({levels:[1,2,3]}),new bl,new Sl,new kl,new Il,new Al,new _l,new El,new Tl,new $l,new Ol,new Dl],autoFocus:!0,content:"",onUpdate:e=>{this.$emit("updated",e.getHTML())}});return t.setContent(this.text,!0,{preserveWhitespace:!0}),t},onKeyDown(e){hd(e)===Uh&&this.closeEditBox()},onTextareaKeyDown(e){if("Tab"==e.key){e.preventDefault();const t=e.target,i=t.selectionStart,n=t.selectionEnd;t.value=t.value.substring(0,i)+"    "+t.value.substring(n),t.selectionStart=t.selectionEnd=i+4,this.$emit("updated",e.target.value)}},onTextareaInput(e){this.$emit("updated",e.target.value)},closeEditBox(){if("none"===this.item.shape){const e=this.$refs.editor.getBoundingClientRect(),t=this.editor.getHTML(),i=document.createElement("div");i.innerHTML=(0,ph.Z)(t);const n=i.innerText.trim();if(n){if(this.creatingNewItem){let e=n;e.length>20&&(e=e.substring(0,20)),this.$emit("item-renamed",this.item,e)}this.$emit("item-area-changed",this.item,(e.width+2)/this.zoom,(e.height+2)/this.zoom)}else this.$emit("item-text-cleared",this.item)}this.$emit("close")}},computed:{cssStyle2(){return{left:`${this.area.x+1/this.zoom}px`,top:`${this.area.y+1/this.zoom}px`,transform:`scale(${this.scalingVector.x}, ${this.scalingVector.y})`}}},watch:{cssStyle(e){this.editorCssStyle=this.generateStyle(e)},mouseDownId(){this.closeEditBox()}}},fu=(0,Re.Z)(mu,pu,[],!1,null,null,null).exports,gu=["name","description","tags","style","settings"];var vu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"item-properties"},[i("ul",{staticClass:"button-group"},e._l(e.tabs,(function(t){return i("li",[i("span",{staticClass:"toggle-button",class:{toggled:t.name===e.currentTab},attrs:{title:t.displayName},on:{click:function(i){e.currentTab=t.name}}},[i("i",{class:[t.icon]})])])})),0),e._v(" "),e.isTemplatedChild?i("div",{staticClass:"msg msg-info msg-small"},[e._v('\n        This item was generated with template. Modifications to this item are discouraged.\n        Consider applying changes to the item in the "Template" tab.\n    ')]):e._e(),e._v(" "),"description"===e.currentTab?i("GeneralPanel",{key:"general-panel-"+e.item.id,attrs:{editorId:e.editorId,item:e.item,schemeContainer:e.schemeContainer},on:{"tags-changed":function(t){return e.emitItemFieldChange("tags",arguments[0])}}}):e._e(),e._v(" "),"description"===e.currentTab?i("LinksPanel",{key:"links-panel-"+e.item.id,attrs:{editorId:e.editorId,item:e.item}}):e._e(),e._v(" "),"behavior"===e.currentTab?i("div",[i("BehaviorProperties",{key:"behavior-panel-"+e.item.id+"-"+e.behaviorPanelRevision,attrs:{editorId:e.editorId,item:e.item,"scheme-container":e.schemeContainer},on:{"item-field-changed":function(t){return e.emitItemFieldChange(arguments[0],arguments[1])},"jumped-to-item":e.onJumpedToItem}})],1):e._e(),e._v(" "),"auto-layout"===e.currentTab&&e.item?i("div",[i("AutoLayoutProperties",{key:"auto-layout-properties-panel-"+e.item.id,attrs:{editorId:e.editorId,item:e.item,schemeContainer:e.schemeContainer}})],1):e._e(),e._v(" "),"styles"===e.currentTab?i("div",[i("styles-palette",{key:"styles-palette-for-item-"+e.item.id,attrs:{userStylesEnabled:e.userStylesEnabled,item:e.item},on:{"style-applied":e.onStyleApplied}})],1):e._e(),e._v(" "),"effects"===e.currentTab?i("div",[e.item.effects&&0!==e.item.effects.length?i("ul",{staticClass:"effects-list"},e._l(e.item.effects,(function(t,n){return i("li",[i("div",{staticClass:"effect-name",on:{click:function(t){return e.openEditEffectModal(n)}}},[e._v(e._s(e._f("prettyEffectName")(t.name)))]),e._v(" "),i("div",{staticClass:"effect-right-panel"},[i("span",{staticClass:"icon icon-effect-edit",on:{click:function(t){return e.openEditEffectModal(n)}}},[i("i",{staticClass:"fas fa-edit"})]),e._v(" "),i("span",{staticClass:"icon icon-effect-delete",on:{click:function(t){return e.deleteEffect(n)}}},[i("i",{staticClass:"fas fa-times"})])])])})),0):i("div",{staticClass:"hint hint-small"},[e._v("There are no effects yet")]),e._v(" "),i("span",{staticClass:"btn btn-secondary",on:{click:e.startAddingEffect}},[e._v("Add Effect")])]):e._e(),e._v(" "),"shape"===e.currentTab?i("div",[i("panel",{attrs:{name:"General",uid:"general-item-properties"}},[i("table",{staticClass:"properties-table"},[i("tbody",[i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Opacity")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("number-textfield",{attrs:{value:e.item.opacity,min:0,max:100},on:{changed:function(t){return e.emitItemFieldChange("opacity",arguments[0])}}})],1)]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Self Opacity")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("number-textfield",{attrs:{value:e.item.selfOpacity,min:0,max:100},on:{changed:function(t){return e.emitItemFieldChange("selfOpacity",arguments[0])}}})],1)]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Cursor")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("select",{domProps:{value:e.item.cursor},on:{input:function(t){return e.emitItemFieldChange("cursor",arguments[0].target.value)}}},e._l(e.knownCursors,(function(t){return i("option",[e._v(e._s(t))])})),0)])])])])]),e._v(" "),e.hasShapeArgs?i("panel",{attrs:{name:"Shape Properties"}},[e.shapeComponent.editorProps&&e.shapeComponent.editorProps.shapePropsEditor&&e.shapeComponent.editorProps.shapePropsEditor.component?i("div",[i(e.shapeComponent.editorProps.shapePropsEditor.component,{key:"shape-properties-editor-"+e.item.shape+"-"+e.item.id,tag:"component",attrs:{editorId:e.editorId,item:e.item,refreshKey:e.shapePropsEditorKey},on:{"shape-prop-changed":e.onShapePropChange,"item-mutated":e.onItemMutated}})],1):i("table",{staticClass:"properties-table"},[i("tbody",e._l(e.shapeComponent.args,(function(t,n){return e.shapePropsControlStates[n]&&!e.isArgumentHidden(t)?i("tr",[i("td",{staticClass:"label",class:{disabled:!e.shapePropsControlStates[n].shown},attrs:{width:"50%"}},[e._v("\n                            "+e._s(t.name)+"\n                            "),t.description?i("tooltip",{attrs:{disabled:!e.shapePropsControlStates[n].shown}},[e._v(e._s(t.description))]):e._e()],1),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("PropertyInput",{key:"prop-input-"+e.item.id+"-"+e.item.shape+"-"+n+"-"+e.item.shapeProps.thick,attrs:{editorId:e.editorId,descriptor:t,value:e.item.shapeProps[n],shapeProps:e.item.shapeProps,disabled:!e.shapePropsControlStates[n].shown,schemeContainer:e.schemeContainer,leftOriented:"sourceCap"===n,itemId:e.item.id},on:{input:function(i){return e.onShapePropChange(n,t.type,arguments[0])}}})],1)]):e._e()})),0)])]):e._e(),e._v(" "),e.schemeContainer.editBox?i("PositionPanel",{key:"position-panel-"+e.item.id+"-"+e.schemeContainer.editBox.id,attrs:{editorId:e.editorId,"edit-box":e.schemeContainer.editBox,item:e.item},on:{"area-changed":e.onPositionPanelAreaChanged,"scale-changed":e.onPositionPanelScaleChanged}}):e._e(),e._v(" "),i("panel",{attrs:{name:"Advanced"}},[i("table",{staticClass:"properties-table"},[i("tbody",[i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Blend mode")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("select",{domProps:{value:e.item.blendMode},on:{input:function(t){return e.emitItemFieldChange("blendMode",arguments[0].target.value)}}},e._l(e.knownBlendModes,(function(t){return i("option",[e._v(e._s(t))])})),0)])]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Visible")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("input",{staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{checked:e.item.visible},on:{input:function(t){return e.emitItemFieldChange("visible",arguments[0].target.checked)}}})])]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("\n                            Clip children\n                            "),i("tooltip",[e._v("Only renders parts of the child items that are located inside the visible shape of the parent item")])],1),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("input",{staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{checked:e.item.clip},on:{input:function(t){return e.emitItemFieldChange("clip",arguments[0].target.checked)}}})])]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("\n                            Allow mounting\n                            "),i("tooltip",[e._v("\n                                Allows mounting of other items to this item.\n                                You can disable it if you don't want other items to be automatically mounted to it.\n                            ")])],1),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("input",{staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{checked:e.item.mount},on:{input:function(t){return e.emitItemFieldChange("mount",arguments[0].target.checked)}}})])]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Shape")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("select",{domProps:{value:e.item.shape},on:{input:function(t){return e.$emit("shape-changed",arguments[0].target.value)}}},e._l(e.knownShapes,(function(t){return i("option",[e._v(e._s(t))])})),0)])]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("\n                            Interaction Mode\n                            "),i("tooltip",[e._v('\n                                Specifies item default behavior on click.\n                                "side-panel" or "tooltip" modes are only used in case item has a non-empty description\n                            ')])],1),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("select",{domProps:{value:e.item.interactionMode},on:{input:function(t){return e.emitItemFieldChange("interactionMode",arguments[0].target.value)}}},e._l(e.knownInteractionModes,(function(t){return i("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])})),0)])]),e._v(" "),"tooltip"===e.item.interactionMode?i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Tooltip Background")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("color-picker",{attrs:{editorId:e.editorId,color:e.item.tooltipBackground},on:{input:function(t){return e.emitItemFieldChange("tooltipBackground",arguments[0])}}})],1)]):e._e(),e._v(" "),"tooltip"===e.item.interactionMode?i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Tooltip Color")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("color-picker",{attrs:{editorId:e.editorId,color:e.item.tooltipColor},on:{input:function(t){return e.emitItemFieldChange("tooltipColor",arguments[0])}}})],1)]):e._e()])])])],1):e._e(),e._v(" "),e.editEffectModal.shown?i("EditEffectModal",{key:"edit-effect-modal-"+e.item.id+"-"+e.editEffectModal.currentEffectIndex+"-"+e.editEffectModal.effectId,attrs:{editorId:e.editorId,isAdding:e.editEffectModal.isAdding,effectId:e.editEffectModal.effectId,effectArgs:e.editEffectModal.effectArgs,schemeContainer:e.schemeContainer},on:{close:e.effectModalClosed,"effect-submited":e.onEffectSubmited,"effect-arg-changed":e.onEffectArgChanged,"effect-name-changed":e.onEffectNameChanged,"effect-id-changed":e.onEffectIdChanged}}):e._e()],1)};vu._withStripped=!0;var yu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"panel"},[i("div",{staticClass:"panel-title text-nonselectable",class:{"panel-expanded":e.isOpen,"panel-collapsed":!e.isOpen},on:{click:e.togglePanel}},[e._v("\n        "+e._s(e.name)+"\n    ")]),e._v(" "),e.closable?i("span",{staticClass:"panel-close",on:{click:function(t){return e.$emit("close")}}},[i("i",{staticClass:"fas fa-times"})]):e._e(),e._v(" "),e.isOpen?i("div",{staticClass:"panel-body"},[e._t("default")],2):e._e()])};yu._withStripped=!0;const xu=new Wc("panel-state",100),bu={props:{name:String,uid:String,closable:{type:Boolean,default:!1}},data(){return{isOpen:xu.get(this.name+this.uid,!0)}},methods:{togglePanel(){this.isOpen=!this.isOpen,xu.save(this.name+this.uid,this.isOpen),this.$emit("value",this.isOpen)}}},wu=(0,Re.Z)(bu,yu,[],!1,null,null,null).exports;var Cu=i(4628),Pu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("panel",{attrs:{name:"General"}},[i("h5",[e._v("Name")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.item.name,expression:"item.name"}],staticClass:"textfield",class:{disabled:e.isTemplatedChild},attrs:{type:"text",disabled:e.isTemplatedChild},domProps:{value:e.item.name},on:{input:[function(t){t.target.composing||e.$set(e.item,"name",t.target.value)},function(t){return e.commitSchemeChange("name")}]}}),e._v(" "),e.isTemplatedChild?e._e():i("div",[i("div",[i("h5",[e._v("Tags")]),e._v(" "),i("vue-tags-input",{attrs:{tags:e.itemTags,"autocomplete-items":e.filteredItemTags},on:{"tags-changed":e.onItemTagChange},model:{value:e.itemTag,callback:function(t){e.itemTag=t},expression:"itemTag"}})],1)]),e._v(" "),"rich"===e.descriptionType?i("div",[i("h5",{staticClass:"section"},[e._v("Description")]),e._v(" "),i("div",{staticClass:"textarea-wrapper"},[i("rich-text-editor",{attrs:{value:e.item.description},on:{changed:function(t){e.item.description=arguments[0],e.commitSchemeChange("description")}}})],1)]):e._e()])};Pu._withStripped=!0;var ku=i(7010),Su=i.n(ku);const Iu={props:{editorId:{type:String,required:!0},item:{type:Object},schemeContainer:{type:Object}},components:{VueTagsInput:Su(),Panel:wu,RichTextEditor:Ll},data(){const e=Id.Z.find(this.item.shape);let t="rich";return e&&e.editorProps&&e.editorProps.description&&(t=e.editorProps.description),{itemTag:"",existingItemTags:(0,Fe.UI)(this.schemeContainer.itemTags,(e=>({text:e}))),shapeComponent:e,descriptionType:t}},methods:{onItemTagChange(e){this.$emit("tags-changed",(0,Fe.UI)(e,(e=>e.text)))},commitSchemeChange(e){mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${this.item.id}.${e}`),mh.Z.item.changed.specific.$emit(this.editorId,this.item.id,e)}},computed:{filteredItemTags(){const e=this.itemTag.toLowerCase();return this.existingItemTags.filter((t=>t.text.toLowerCase().indexOf(e)>=0))},itemTags(){return(0,Fe.UI)(this.item.tags,(e=>({text:e})))},isTemplatedChild(){return this.item.args&&this.item.args.templated&&!this.item.args.templateRef}}},Au=(0,Re.Z)(Iu,Pu,[],!1,null,null,null).exports;var _u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("panel",{attrs:{name:"Position"}},[i("ul",{staticClass:"button-group"},[i("li",[i("span",{staticClass:"toggle-button",class:{toggled:e.editBox.locked},attrs:{title:e.editBox.locked?"Unlock item":"Lock item"},on:{click:function(t){return e.toggleItemLock()}}},[i("i",{staticClass:"fas",class:[e.editBox.locked?"fa-lock":"fa-unlock"]})])])]),e._v(" "),i("table",{staticStyle:{width:"100%"}},[i("tbody",[i("tr",[i("td",[i("number-textfield",{attrs:{value:e.x,name:"x"},on:{changed:function(t){return e.updateAreaProperty("x",arguments[0])}}})],1),e._v(" "),i("td",[i("number-textfield",{attrs:{value:e.w,name:"w"},on:{changed:function(t){return e.updateAreaProperty("w",arguments[0])}}})],1)]),e._v(" "),i("tr",[i("td",[i("number-textfield",{attrs:{value:e.y,name:"y"},on:{changed:function(t){return e.updateAreaProperty("y",arguments[0])}}})],1),e._v(" "),i("td",[i("number-textfield",{attrs:{value:e.h,name:"h"},on:{changed:function(t){return e.updateAreaProperty("h",arguments[0])}}})],1)]),e._v(" "),i("tr",[i("td",[i("number-textfield",{attrs:{value:e.r,icon:"fas fa-sync-alt"},on:{changed:function(t){return e.updateAreaProperty("r",arguments[0])}}})],1),e._v(" "),i("td")])])]),e._v(" "),e.isSingleItem?i("table",[i("tbody",[i("tr",[i("td",[i("number-textfield",{attrs:{value:e.sx,name:e.scaleNameX},on:{changed:function(t){return e.updateScaleX(arguments[0])}}})],1),e._v(" "),i("td",[i("span",{staticClass:"toggle-button",class:{toggled:e.scaleLocked},on:{click:function(t){e.scaleLocked=!e.scaleLocked}}},[i("i",{staticClass:"fas fa-lock"})])]),e._v(" "),i("td",[i("number-textfield",{attrs:{value:e.sy,name:"Scale Y",disabled:e.scaleLocked},on:{changed:function(t){return e.updateScaleY(arguments[0])}}})],1)])])]):e._e()])};_u._withStripped=!0;const Eu={props:["item","editBox","editorId"],components:{Panel:wu,NumberTextfield:fd.Z},beforeMount(){mh.Z.editBox.updated.$on(this.editorId,this.onEditBoxChange)},beforeDestroy(){mh.Z.editBox.updated.$off(this.editorId,this.onEditBoxChange)},data(){const e=this.editBox.items[0].area.sx,t=this.editBox.items[0].area.sy;return{x:this.editBox.area.x,y:this.editBox.area.y,w:this.editBox.area.w,h:this.editBox.area.h,r:this.editBox.area.r,isSingleItem:1===this.editBox.items.length,sx:e,sy:t,scaleLocked:e===t}},methods:{toggleItemLock(){this.editBox.locked=!this.editBox.locked,(0,Fe.Ed)(this.editBox.items,(e=>{e.locked=this.editBox.locked})),mh.Z.schemeChangeCommitted.$emit(this.editorId)},onEditBoxChange(){this.x=this.editBox.area.x,this.y=this.editBox.area.y,this.w=this.editBox.area.w,this.h=this.editBox.area.h,this.r=this.editBox.area.r},updateAreaProperty(e,t){this.$emit("area-changed",e,t)},updateScaleX(e){this.sx=e,this.scaleLocked&&(this.sy=this.sx),this.$emit("scale-changed",this.sx,this.sy)},updateScaleY(e){this.sy=e,this.$emit("scale-changed",this.sx,this.sy)}},computed:{scaleNameX(){return this.scaleLocked?"Scale":"Scale X"}}},Tu=(0,Re.Z)(Eu,_u,[],!1,null,null,null).exports;var Mu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("panel",{attrs:{name:"Links"}},[e.item.links&&0!==e.item.links.length?e._e():i("div",[e._v("There are no links")]),e._v(" "),i("ul",{staticClass:"links-editor"},e._l(e.item.links,(function(t,n){return i("li",[i("a",{staticClass:"link",attrs:{href:t.url,target:"_blank"}},[i("i",{class:e.getLinkCssClass(t)}),e._v("\n                "+e._s(e._f("formatLinkTitle")(t))+"\n            ")]),e._v(" "),i("span",{staticClass:"link edit-link",on:{click:function(i){return e.editLink(n,t)}}},[i("i",{staticClass:"fas fa-pen-square"})]),e._v(" "),i("span",{staticClass:"link delete-link",on:{click:function(t){return e.deleteLink(n)}}},[i("i",{staticClass:"fas fa-times"})])])})),0),e._v(" "),i("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.addLink()}}},[i("i",{staticClass:"fas fa-link"}),e._v(" Add")]),e._v(" "),e.editLinkData?i("LinkEditModal",{attrs:{edit:e.editLinkData.edit,title:e.editLinkData.title,url:e.editLinkData.url,type:e.editLinkData.type},on:{"submit-link":e.onLinkSubmit,close:function(t){e.editLinkData=null}}}):e._e()],1)};Mu._withStripped=!0;var $u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{title:e.popupTitle,"primary-button":e.submitTitle},on:{"primary-submit":function(t){return e.submitLink()},close:function(t){return e.$emit("close")}}},[i("h5",[e._v("Title")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.editTitle,expression:"editTitle"}],staticClass:"textfield",attrs:{type:"text"},domProps:{value:e.editTitle},on:{input:function(t){t.target.composing||(e.editTitle=t.target.value)}}}),e._v(" "),i("h5",[e._v("Type")]),e._v(" "),i("div",{staticClass:"toggle-group"},e._l(e.knownTypes,(function(t){return i("span",{staticClass:"toggle-button",class:{toggled:t.name===e.editType},on:{click:function(i){e.editType=t.name}}},[i("i",{class:t.cssClass}),e._v(" "+e._s(t.name)+"\n        ")])})),0),e._v(" "),i("h5",[e._v("URL")]),e._v(" "),"doc"===e.editType?i("div",{staticClass:"row gap centered"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.editUrl,expression:"editUrl"}],staticClass:"textfield col-1",attrs:{type:"text"},domProps:{value:e.editUrl},on:{input:function(t){t.target.composing||(e.editUrl=t.target.value)}}}),e._v(" "),i("span",{staticClass:"btn btn-secondary",attrs:{title:"Search diagrams"},on:{click:e.toggleSchemeSearch}},[i("i",{staticClass:"fas fa-search"})])]):"file"===e.editType?i("div",{staticClass:"row gap centered"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.editUrl,expression:"editUrl"}],staticClass:"textfield col-1",attrs:{type:"text"},domProps:{value:e.editUrl},on:{input:function(t){t.target.composing||(e.editUrl=t.target.value)}}}),e._v(" "),e.supportsUpload?i("div",{staticClass:"file-upload-button"},[e.isUploading?i("i",{staticClass:"fas fa-spinner fa-spin fa-1x"}):i("i",{staticClass:"fa-solid fa-file-arrow-up"}),e._v(" "),i("input",{attrs:{type:"file"},on:{change:e.onFileSelect}})]):e._e()]):i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.editUrl,expression:"editUrl"}],staticClass:"textfield",attrs:{type:"text"},domProps:{value:e.editUrl},on:{input:function(t){t.target.composing||(e.editUrl=t.target.value)}}})]),e._v(" "),e.errorMessage?i("div",{staticClass:"msg msg-error"},[e._v("\n        "+e._s(e.errorMessage)+"\n    ")]):e._e(),e._v(" "),e.showSchemeSearchModal?i("scheme-search-modal",{on:{close:function(t){e.showSchemeSearchModal=!1},"selected-scheme":e.onSchemeSelect}}):e._e()],1)};$u._withStripped=!0;var Ou=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{title:"Search Diagrams",height:600,repositionId:e.repositionId},on:{close:function(t){return e.$emit("close")}}},[i("div",{staticStyle:{position:"relative","margin-bottom":"5px"}},[e.isLoading?i("div",{staticClass:"loader"},[i("div",{staticClass:"loader-element"})]):e._e()]),e._v(" "),i("h5",[e._v("Name")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"textfield",attrs:{type:"text"},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),e.errorMessage?i("div",{staticClass:"msg msg-error"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),e.searchResult?i("div",{staticStyle:{height:"300px",overflow:"scroll"}},[i("pagination",{key:e.currentPage+"-"+e.totalPages,attrs:{"current-page":e.currentPage,"total-pages":e.totalPages},on:{"page-clicked":e.selectSearchPage}}),e._v(" "),i("table",{staticClass:"scheme-search-results"},[i("tbody",e._l(e.searchResult.results,(function(t){return i("tr",{staticClass:"scheme-row",on:{click:function(i){return e.onSchemeSelect(t)}}},[i("td",{staticClass:"scheme-icon"},[t.previewURL?i("img",{staticClass:"scheme-preview",attrs:{src:""+t.previewURL}}):i("i",{staticClass:"icon far fa-file fa-2x"})]),e._v(" "),i("td",{staticClass:"scheme-title"},[e._v(e._s(t.name))])])})),0)]),e._v(" "),e.nextPageToken&&!e.isLoading?i("p",{staticStyle:{"text-align":"center"}},[i("span",{staticClass:"btn btn-primary",on:{click:e.loadNextPage}},[e._v("Load more")])]):e._e()],1):e._e()])};Ou._withStripped=!0;const Du={components:{Modal:je.Z,Pagination:oc},mounted(){this.reloadSchemes()},data:()=>({query:"",currentPage:1,totalPages:0,searchResult:null,searchTimerId:null,resultsPerPage:20,isLoading:!1,nextPageToken:null,errorMessage:null,repositionId:0}),methods:{selectSearchPage(e){this.currentPage=e,this.reloadSchemes(e)},onSchemeSelect(e){this.$emit("selected-scheme",e)},reloadSchemes(e){this.isLoading=!0;const t={query:this.query,limit:this.resultsPerPage};e&&(t.page=e),this.$store.state.apiClient.findSchemes(t).then((e=>{this.errorMessage=null,this.isLoading=!1,this.searchResult=e,this.totalPages=e.totalPages,this.searchResult.results&&Array.isArray(this.searchResult.results)&&this.searchResult.results.forEach((e=>{e.previewURL&&!e.previewURL.startsWith("media://")&&(e.previewURL+=`?v=${e.modifiedTime}`)})),"chunk"===e.kind&&(this.nextPageToken=e.nextPageToken),this.repositionId+=1})).catch((e=>{console.error(e),this.isLoading=!1,this.errorMessage="Something went wrong, failed to search diagrams",this.repositionId+=1}))},loadNextPage(){this.isLoading=!0;const e={query:this.query,limit:this.resultsPerPage};e.nextPageToken=this.nextPageToken,this.$store.state.apiClient.findSchemes(e).then((e=>{this.errorMessage=null,this.isLoading=!1,this.searchResult.results=this.searchResult.results.concat(e.results),this.nextPageToken=e.nextPageToken,this.repositionId+=1})).catch((e=>{console.error(e),this.isLoading=!1,this.errorMessage="Something went wrong, failed to search diagrams"}))}},watch:{query(e){this.searchTimerId||(this.searchTimerId=setTimeout((()=>{this.searchTimerId=null,this.reloadSchemes(0)}),500))}}},Bu=(0,Re.Z)(Du,Ou,[],!1,null,null,null).exports,Lu={props:["edit","title","url","type"],components:{Modal:je.Z,SchemeSearchModal:Bu},data(){return{popupTitle:this.edit?"Edit Link":"Create Link",submitTitle:this.edit?"Update":"Create",editTitle:this.title,editUrl:this.url,editType:this.type&&this.type.length>0?this.type:"default",knownTypes:Rd.Z.knownTypes,showSchemeSearchModal:!1,selectedFile:null,errorMessage:null,isUploading:!1}},methods:{submitLink(){this.$emit("submit-link",{title:this.editTitle,url:this.editUrl,type:this.editType}),this.$emit("close")},toggleSchemeSearch(){this.showSchemeSearchModal=!0},onSchemeSelect(e){this.editType="doc",this.editUrl=e.link,this.editTitle||(this.editTitle=e.name),this.showSchemeSearchModal=!1},onFileSelect(e){this.selectedFile=e.target.files[0]}},computed:{supportsUpload(){return this.$store.state.apiClient&&this.$store.state.apiClient.uploadFile}},watch:{selectedFile(e){e&&(this.isUploading=!0,this.errorMessage=null,this.$store.state.apiClient.uploadFile(e).then((t=>{this.editTitle=e.name,this.isUploading=!1,this.errorMessage=null,this.editUrl=t})).catch((e=>{this.isUploading=!1,this.errorMessage="Something went wrong, could not upload file",e.data&&e.data.message&&StoreUtils.addErrorSystemMessage(this.$store,e.data.message)})))}}},Ru=(0,Re.Z)(Lu,$u,[],!1,null,null,null).exports,Nu={props:{editorId:{type:String,required:!0},item:{type:Object,required:!0}},components:{Panel:wu,LinkEditModal:Ru},data:()=>({editLinkData:null}),methods:{getLinkCssClass:e=>Rd.Z.findTypeByNameOrDefault(e.type).cssClass,addLink(){this.editLinkData={linkId:-1,edit:!1,title:"",url:"",type:""}},deleteLink(e){this.item.links.splice(e,1),mh.Z.schemeChangeCommitted.$emit(this.editorId)},editLink(e,t){this.editLinkData={linkId:e,edit:!0,title:t.title,url:t.url,type:t.type}},onLinkSubmit(e){this.editLinkData.linkId>=0?(this.item.links[this.editLinkData.linkId].title=e.title,this.item.links[this.editLinkData.linkId].url=e.url,this.item.links[this.editLinkData.linkId].type=e.type,mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${this.item.id}.links.${this.editLinkData.linkId}`)):(this.item.links||(this.item.links=[]),this.item.links.push({title:e.title,url:e.url,type:e.type}),mh.Z.schemeChangeCommitted.$emit(this.editorId)),mh.Z.item.changed.specific.$emit(this.editorId,this.item.id,"links")}},filters:{formatLinkTitle:e=>e.title?e.title:e.url}},Zu=(0,Re.Z)(Nu,Mu,[],!1,null,null,null).exports;var Fu=i(7455),ju=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{"actions-being-dragged":e.dragging.eventIndex>=0}},[e.extended?e._e():i("panel",{attrs:{uid:"behavior-tags",name:"General"}},[i("vue-tags-input",{attrs:{tags:e.itemTags,"autocomplete-items":e.filteredItemTagsSuggestions},on:{"tags-changed":e.onItemTagsChange},model:{value:e.itemTag,callback:function(t){e.itemTag=t},expression:"itemTag"}}),e._v(" "),i("table",{staticClass:"properties-table"},[i("tbody",[i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Dragging")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("dropdown",{attrs:{options:e.draggingOptions},on:{selected:e.onItemDraggingChange}},[e._v("\n                            "+e._s(e._f("toPrettyDraggingOptionName")(e.item.behavior.dragging))+"\n                        ")])],1)]),e._v(" "),"dragndrop"===e.item.behavior.dragging?i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Drop to")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("ElementPicker",{attrs:{editorId:e.editorId,element:e.item.behavior.dropTo,"scheme-container":e.schemeContainer,useSelf:!1,allowNone:!0,inline:!0,borderless:!1,disabled:"dragndrop"!==e.item.behavior.dragging},on:{selected:e.onItemDraggingDropToSelected}})],1)]):e._e(),e._v(" "),"path"===e.item.behavior.dragging?i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Drag path")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("ElementPicker",{attrs:{editorId:e.editorId,element:e.item.behavior.dragPath,"scheme-container":e.schemeContainer,useSelf:!1,allowNone:!0,inline:!0,borderless:!1,disabled:"path"!==e.item.behavior.dragging},on:{selected:e.onItemDraggingPathSelected}})],1)]):e._e(),e._v(" "),"path"===e.item.behavior.dragging?i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Align to path while dragging")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("input",{staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{checked:e.item.behavior.dragPathAlign},on:{input:function(t){return e.onItemDragAlignChange(t.target.checked)}}})])]):e._e(),e._v(" "),"path"===e.item.behavior.dragging?i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Drag rotation")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("NumberTextfield",{attrs:{value:e.item.behavior.dragPathRotation},on:{changed:e.onItemDragRotationChange}})],1)]):e._e()])])],1),e._v(" "),0===e.item.behavior.events.length?i("div",{staticClass:"hint"},[e._v("There are no events defined for this item yet. Start by adding an event")]):e._e(),e._v(" "),e._l(e.item.behavior.events,(function(t,n){return i("div",{staticClass:"behavior-container",class:{extended:e.extended}},[i("div",{staticClass:"behavior-event behavior-action-droppable",attrs:{"data-event-index":n}},[i("div",{staticClass:"behavior-menu"},[i("span",{staticClass:"link icon-collapse",on:{click:function(t){return e.toggleBehaviorCollapse(n)}}},[i("i",{staticClass:"fas",class:[e.eventMetas[n]&&e.eventMetas[n].collapsed?"fa-caret-right":"fa-caret-down"]})])]),e._v(" "),i("dropdown",{attrs:{options:e.eventOptions,"auto-focus-search":e.isStandardEvent(t.event),inline:!0,borderless:!0},on:{selected:function(t){return e.onBehaviorEventSelected(n,arguments[0])}}},[i("span",{staticClass:"icon-event"},[i("i",{staticClass:"fas fa-bell"})]),e._v(" "),e.isStandardEvent(t.event)?i("span",[e._v(e._s(e._f("toPrettyEventName")(t.event)))]):i("input",{staticClass:"custom-event-textfield",attrs:{id:"custom-event-textfield-"+e.item.id+"-"+n,type:"text"},domProps:{value:t.event},on:{input:function(e){t.event=arguments[0].target.value}}})])],1),e._v(" "),e.eventMetas[n]&&e.eventMetas[n].collapsed?e._e():i("div",[0===t.actions.length?i("div",{staticClass:"hint hint-small"},[e._v("This event has no actions yet...")]):e._e(),e._v(" "),!e.dragging.readyToDrop||e.dragging.dropTo.eventIndex!==n||0!==e.dragging.dropTo.actionIndex||t.actions&&0!==t.actions.length?e._e():i("div",{staticClass:"behavior-action-container behavior-drop-highlight",domProps:{innerHTML:e._s(e.dragging.action)}}),e._v(" "),e._l(t.actions,(function(t,r){return i("div",{staticClass:"behavior-action-droppable",attrs:{"data-event-index":n,"data-action-index":r}},[e.dragging.readyToDrop&&e.dragging.dropTo.eventIndex===n&&e.dragging.dropTo.actionIndex===r?i("div",{staticClass:"behavior-action-container behavior-drop-highlight",domProps:{innerHTML:e._s(e.dragging.action)}}):e._e(),e._v(" "),i("div",{staticClass:"behavior-action-container",class:{disabled:!t.on,dragged:e.dragging.readyToDrop&&n===e.dragging.eventIndex&&r===e.dragging.actionIndex},attrs:{id:"behavior-action-container-"+e.item.id+"-"+n+"-"+r}},[i("div",{staticClass:"icon-container"},[i("span",{staticClass:"link icon-delete",on:{click:function(t){return e.removeAction(n,r)}}},[i("i",{staticClass:"fas fa-times"})]),e._v(" "),i("span",{staticClass:"link icon-move",on:{mousedown:function(t){return e.onActionDraggerMouseDown(t,n,r)}}},[i("i",{staticClass:"fas fa-arrows-alt"})]),e._v(" "),i("span",{staticClass:"link icon-check",on:{click:function(t){return e.toggleActionOnOff(n,r)}}},[t.on?i("i",{staticClass:"fa-regular fa-square-check"}):i("i",{staticClass:"fa-regular fa-square"})])]),e._v(" "),i("div",{staticClass:"action-item"},[i("ElementPicker",{attrs:{editorId:e.editorId,element:t.element,"scheme-container":e.schemeContainer,"self-item":e.item,inline:!0,borderless:!0},on:{selected:function(t){return e.onActionElementSelected(n,r,arguments[0])}}})],1),e._v(" "),i("div",{staticClass:"behavior-goto-element",attrs:{title:"Double click to jump to element"},on:{dblclick:function(i){return e.jumpToElement(t.element)}}},[e._v(": ")]),e._v(" "),i("div",{staticClass:"action-method"},[i("dropdown",{key:t.element.item,attrs:{options:e.createMethodSuggestionsForElement(t.element),inline:!0,borderless:!0},on:{selected:function(t){return e.onActionMethodSelected(n,r,arguments[0])}}},["set"===t.method?i("span",[i("i",{staticClass:"fas fa-cog"}),e._v(" "+e._s(e._f("toPrettyPropertyName")(t.args.field,t.element,e.item,e.schemeContainer)))]):e._e(),e._v(" "),"set"!==t.method&&"sendEvent"!==t.method?i("span",{staticClass:"behavior-function"},[e._v(e._s(e._f("toPrettyMethod")(t.method,t.element))+" ")]):e._e(),e._v(" "),"sendEvent"===t.method?i("span",{staticClass:"behavior-function"},[i("i",{staticClass:"icon fas fa-play"}),e._v(" "+e._s(t.args.event)+" ")]):e._e()])],1),e._v(" "),"set"!==t.method&&"sendEvent"!==t.method&&t.args&&Object.keys(t.args).length>0?i("span",{staticClass:"action-method-arguments-expand",attrs:{title:"Edit function arguments"},on:{click:function(i){return e.showFunctionArgumentsEditor(t,n,r)}}},[e._v(e._s(e._f("toPrettyActionArgs")(t,e.schemeContainer)))]):e._e(),e._v(" "),"set"===t.method?i("span",{staticClass:"function-brackets"},[e._v(" = ")]):e._e(),e._v(" "),"set"===t.method?i("SetArgumentEditor",{key:t.args.field,attrs:{editorId:e.editorId,"argument-description":e.getArgumentDescriptionForElement(t.element,t.args.field),"argument-value":t.args.value,args:t.args},on:{"property-changed":function(t){return e.onArgumentPropertyChangeForSet(n,r,arguments[0],arguments[1])}}}):e._e()],1)])})),e._v(" "),e.dragging.readyToDrop&&e.dragging.dropTo.eventIndex===n&&e.dragging.dropTo.actionIndex>0&&e.dragging.dropTo.actionIndex>=t.actions.length?i("div",{staticClass:"behavior-action-container behavior-drop-highlight",domProps:{innerHTML:e._s(e.dragging.action)}}):e._e(),e._v(" "),i("div",{staticClass:"behavior-event-operations"},[i("span",{staticClass:"btn btn-small btn-secondary",on:{click:function(t){return e.addActionToEvent(n)}}},[e._v("+ Action")]),e._v(" "),i("span",{staticClass:"btn btn-small btn-secondary",on:{click:function(t){return e.duplicateBehavior(n)}}},[e._v("Duplicate")]),e._v(" "),i("span",{staticClass:"btn btn-small btn-secondary",on:{click:function(t){return e.copyEvent(n)}}},[e._v("Copy Event")]),e._v(" "),n>0?i("span",{staticClass:"btn btn-small btn-secondary",attrs:{title:"Move event up"},on:{click:function(t){return e.moveEventInOrder(n,n-1)}}},[i("i",{staticClass:"fas fa-caret-up"})]):e._e(),e._v(" "),n<e.item.behavior.events.length-1?i("span",{staticClass:"btn btn-small btn-secondary",attrs:{title:"Move event down"},on:{click:function(t){return e.moveEventInOrder(n,n+1)}}},[i("i",{staticClass:"fas fa-caret-down"})]):e._e(),e._v(" "),i("span",{staticClass:"btn btn-small btn-danger",on:{click:function(t){return e.removeBehaviorEvent(n)}}},[e._v("Delete")])])],2)])})),e._v(" "),i("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.addBehaviorEvent()}}},[e._v("+ Event")]),e._v(" "),i("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.copyAllEvents()}}},[e._v("Copy all events")]),e._v(" "),i("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.pasteEvents()}}},[e._v("Paste events")]),e._v(" "),e.functionArgumentsEditor.shown?i("modal",{attrs:{title:e.functionArgumentsEditor.functionDescription.name+" arguments",width:e.functionArgumentsEditor.width,"use-mask":!1},on:{close:function(t){e.functionArgumentsEditor.shown=!1}}},[e.functionArgumentsEditor.functionDescription.editorComponent?i("div",[i(e.functionArgumentsEditor.functionDescription.editorComponent,{tag:"component",attrs:{editorId:e.editorId,args:e.functionArgumentsEditor.args},on:{"argument-changed":e.onFunctionArgumentsEditorChange}})],1):i("div",{style:{"max-width":e.functionArgumentsEditor.width+"px"}},[i("p",[e._v(e._s(e.functionArgumentsEditor.functionDescription.description))]),e._v(" "),i("ArgumentsEditor",{attrs:{editorId:e.editorId,argsDefinition:e.functionArgumentsEditor.functionDescription.args,args:e.functionArgumentsEditor.args,"scheme-container":e.schemeContainer},on:{"argument-changed":e.onFunctionArgumentsEditorChange}})],1)]):e._e(),e._v(" "),i("div",{ref:"dragPreview",staticClass:"behavior-action-drag-preview"},[e.dragging.preview.elementIcon?i("i",{class:e.dragging.preview.elementIcon}):e._e(),e._v("\n        "+e._s(e.dragging.preview.elementName)+" "),i("span",{staticClass:"action-name-separator"},[e._v(":")]),e._v(" "),e.dragging.preview.method?i("span",[e._v(e._s(e.dragging.preview.method))]):e._e(),e._v(" "),e.dragging.preview.propertyName?i("i",{staticClass:"fas fa-cog"}):e._e(),e._v(" "),e.dragging.preview.propertyName?i("span",[e._v(e._s(e.dragging.preview.propertyName))]):e._e()])],2)};ju._withStripped=!0;var zu=i(2196),Uu=i(7731),Hu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"element-picker",class:{disabled:e.disabled}},[i("dropdown",{attrs:{options:e.allOptions,disabled:e.disabled,inline:e.inline,borderless:e.borderless},on:{selected:e.onElementSelected,"dropdown-toggled":e.onDropdownToggled,"dropdown-hidden":e.onDropdownHidden}},[i("div",{staticClass:"picked-element",class:["picked-element-type-"+e.enrichedElement.type,e.disabled?"disabled":""]},[i("i",{class:e.enrichedElement.iconClass}),e._v(" "),i("span",{staticClass:"element-name"},[e._v(e._s(e._f("toShortName")(e.enrichedElement.name)))])])])],1)};function qu(e,t){if(!e)return{name:"None",type:"none",iconClass:""};if(e.startsWith("tag:"))return{name:e.substr(5).trim(),type:"item-tag",iconClass:"fas fa-cubes"};if("self"===e)return{name:"self",iconClass:"fas fa-cube",type:"item"};const i=t.findFirstElementBySelector(e);return i?{name:i.name||i.id,iconClass:"fas fa-cube",type:"item"}:{name:"no item",type:"error",iconClass:"fas fa-exclamation-triangle"}}Hu._withStripped=!0;const Wu={props:{editorId:{type:String,required:!0},element:{type:String,default:null},selfItem:{type:Object,default:null},schemeContainer:{type:Object,required:!0},useSelf:{type:Boolean,default:!0},allowNone:{type:Boolean,default:!1},allowTags:{type:Boolean,default:!0},excludedItemIds:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},borderless:{type:Boolean,default:!1}},components:{Dropdown:wd.Z},mounted(){},beforeDestroy(){mh.Z.elementPick.canceled.$emit(this.editorId)},data(){return{allOptions:this.collectAllOptions()}},methods:{collectAllOptions(){const e=[];return this.allowNone&&e.push({iconClass:"",name:"None",id:"none",type:"none"}),this.useSelf&&e.push({iconClass:"fas fa-cube",name:"self",id:"self",type:"item"}),(0,Fe.Ed)(this.schemeContainer.getItems(),(t=>{let i=!0;this.excludedItemIds&&this.excludedItemIds.length>0&&(i=(0,Fe.cq)(this.excludedItemIds,t.id)<0),i&&e.push({iconClass:"fas fa-cube",name:t.name,id:t.id,type:"item"})})),this.allowTags&&(0,Fe.Ed)(this.schemeContainer.itemTags,(t=>{e.push({iconClass:"fas fa-cubes",name:t,id:t,type:"item-tag"})})),e},onElementSelected(e){"self"===e.id?this.$emit("selected","self"):"item"===e.type?this.$emit("selected",`#${e.id}`):"item-tag"===e.type?this.$emit("selected",`tag: ${e.id}`):"none"===e.type?this.$emit("selected",null):console.error(e.type+" is not supported")},onDropdownToggled(){mh.Z.elementPick.requested.$emit(this.editorId,(e=>{this.$emit("selected",e)}))},onDropdownHidden(){mh.Z.elementPick.canceled.$emit(this.editorId)}},computed:{enrichedElement(){return qu(this.element,this.schemeContainer)}},filters:{toShortName:e=>e.length>20?e.substr(0,19)+"":e}},Vu=(0,Re.Z)(Wu,Hu,[],!1,null,null,null).exports;var Gu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"set-argument-editor"},[i("div",{staticClass:"set-argument-wrapper"},[i("div",{staticClass:"set-argument-control"},["string"===e.argumentType||"image"===e.argumentType?i("input",{staticStyle:{width:"100px"},domProps:{value:e.argumentValue},on:{input:e.onInputValue}}):e._e(),e._v(" "),"number"===e.argumentType?i("number-textfield",{attrs:{value:e.argumentValue},on:{changed:e.emitValue}}):e._e(),e._v(" "),"color"===e.argumentType?i("color-picker",{attrs:{editorId:e.editorId,width:"18px",height:"18px",color:e.argumentValue},on:{input:e.emitValue}}):e._e(),e._v(" "),"advanced-color"===e.argumentType?i("advanced-color-editor",{attrs:{editorId:e.editorId,height:"18px",value:e.argumentValue},on:{changed:e.emitValue}}):e._e(),e._v(" "),"boolean"===e.argumentType?i("input",{attrs:{type:"checkbox"},domProps:{checked:e.argumentValue},on:{input:e.onCheckboxInput}}):e._e(),e._v(" "),e.isChoice?i("select",{domProps:{value:e.argumentValue},on:{input:e.onInputValue}},e._l(e.choiceOptions,(function(t){return i("option",{domProps:{value:t.name&&t.value?t.value:t}},[e._v(e._s(e._f("toPrettyOptionName")(t)))])})),0):e._e()],1),e._v(" "),e.supportsAnimation?i("div",{staticClass:"set-argument-options"},[e.args.animated?i("span",{staticClass:"set-animated",attrs:{title:"Animated"},on:{click:function(t){e.animationEditorShown=!0}}},[i("i",{staticClass:"fa-solid fa-video"})]):i("span",{staticClass:"set-instant",attrs:{title:"Instant"},on:{click:function(t){e.animationEditorShown=!0}}},[i("i",{staticClass:"fa-solid fa-video-slash"})])]):e._e()]),e._v(" "),e.animationEditorShown?i("modal",{attrs:{title:"Animation","use-mask":!1},on:{close:function(t){e.animationEditorShown=!1}}},[i("div",[i("table",{staticClass:"properties-table"},[i("tbody",[i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Animated")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("input",{attrs:{type:"checkbox"},domProps:{checked:e.args.animated},on:{input:function(t){return e.onPropertyChange("animated",t.target.checked)}}})])]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Duration")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("number-textfield",{attrs:{disabled:!e.args.animated,min:0,value:e.args.animationDuration},on:{changed:function(t){return e.onPropertyChange("animationDuration",arguments[0])}}})],1)]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Transition")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("select",{attrs:{disabled:!e.args.animated},domProps:{value:e.args.transition},on:{input:function(t){return e.onPropertyChange("transition",t.target.value)}}},e._l(e.transitions,(function(t){return i("option",{domProps:{value:t}},[e._v(e._s(t))])})),0)])]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("In Background")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("input",{attrs:{type:"checkbox",disabled:!e.args.animated},domProps:{checked:e.args.inBackground},on:{input:function(t){return e.onPropertyChange("inBackground",t.target.checked)}}})])])])])]),e._v(" "),"advanced-color"===e.argumentType&&e.args.value&&"gradient"===e.args.value.type?i("div",{staticClass:"msg msg-info"},[e._v("\n            Gradient animation only works when both original gradient and target gradient have same amount of color points\n        ")]):e._e()]):e._e()],1)};Gu._withStripped=!0;var Ku=i(4896);const Ju={props:{editorId:{type:String,required:!0},argumentValue:{type:Object},argumentDescription:{type:Object},args:{type:Object}},components:{Dropdown:wd.Z,ColorPicker:Fu.Z,AdvancedColorEditor:Ku.Z,NumberTextfield:fd.Z,Modal:je.Z},data(){let e=!1,t=[];return this.argumentDescription&&("stroke-pattern"===this.argumentDescription.type?(e=!0,t=Sd.Z.patterns):"choice"===this.argumentDescription.type&&(e=!0,t=this.argumentDescription.options)),{transitions:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],isChoice:e,choiceOptions:t,argumentType:this.argumentDescription.type,animationEditorShown:!1}},computed:{supportsAnimation(){return(0,Uu.f)(this.argumentDescription.type)}},methods:{emitValue(e){this.onPropertyChange("value",e)},onInputValue(e){this.emitValue(e.target.value)},onCheckboxInput(e){this.emitValue(e.target.checked)},onPropertyChange(e,t){this.$emit("property-changed",e,t)}},filters:{toPrettyOptionName:e=>e.name&&e.value?e.name:e}},Yu=(0,Re.Z)(Ju,Gu,[],!1,null,null,null).exports;var Qu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("table",{staticClass:"properties-table"},e._l(e.argsDefinition,(function(t,n){return!e.argumentControlStates[n]||e.isDisabledScript(t,n)||t.hidden?e._e():i("tr",["script"!==t.type?i("td",{staticClass:"label",class:{disabled:!e.argumentControlStates[n].shown},attrs:{width:"50%"}},[e._v("\n                "+e._s(t.name)+"\n                "),t.description?i("tooltip",[e._v(e._s(t.description))]):e._e()],1):e._e(),e._v(" "),"script"!==t.type?i("td",{staticClass:"value",class:{disabled:!e.argumentControlStates[n].shown},attrs:{width:"50%"}},["string"===t.type||"image"===t.type?i("input",{staticClass:"textfield",attrs:{disabled:!e.argumentControlStates[n].shown},domProps:{value:e.argumentValues[n]},on:{input:function(t){return e.onValueChange(n,arguments[0].target.value)}}}):e._e(),e._v(" "),"number"===t.type?i("number-textfield",{attrs:{value:e.argumentValues[n],min:t.min,max:t.max,disabled:!e.argumentControlStates[n].shown},on:{changed:function(t){return e.onValueChange(n,arguments[0])}}}):e._e(),e._v(" "),"color"===t.type?i("color-picker",{attrs:{editorId:e.editorId,color:e.argumentValues[n],disabled:!e.argumentControlStates[n].shown},on:{input:function(t){return e.onValueChange(n,arguments[0])}}}):e._e(),e._v(" "),"advanced-color"===t.type?i("advanced-color-editor",{attrs:{value:e.argumentValues[n],apiClient:e.apiClient,editorId:e.editorId,disabled:!e.argumentControlStates[n].shown},on:{changed:function(t){return e.onValueChange(n,arguments[0])}}}):e._e(),e._v(" "),"boolean"===t.type?i("input",{attrs:{type:"checkbox",disabled:!e.argumentControlStates[n].shown},domProps:{checked:e.argumentValues[n]},on:{input:function(t){return e.onValueChange(n,arguments[0].target.checked)}}}):e._e(),e._v(" "),"choice"===t.type?i("select",{attrs:{disabled:!e.argumentControlStates[n].shown},domProps:{value:e.argumentValues[n]},on:{input:function(t){return e.onValueChange(n,arguments[0].target.value)}}},e._l(t.options,(function(t){return i("option",[e._v(e._s(t))])})),0):e._e(),e._v(" "),"element"===t.type?i("ElementPicker",{attrs:{editorId:e.editorId,"scheme-container":e.schemeContainer,element:e.argumentValues[n],disabled:!e.argumentControlStates[n].shown,"use-self":!1},on:{selected:function(t){return e.onValueChange(n,arguments[0])}}}):e._e(),e._v(" "),"scheme-ref"===t.type?i("DiagramPicker",{key:"args-editor-diagram-picker-"+e.editorId+"-"+e.argumentValues[n],attrs:{diagramId:e.argumentValues[n]},on:{"diagram-selected":function(t){return e.onDiagramPicked(n,arguments[0])}}}):e._e(),e._v(" "),"path-cap"===t.type?i("PathCapDropdown",{attrs:{value:e.argumentValues[n],"is-source":!1,"is-thick":!1,width:"100%",height:16,disabled:!e.argumentControlStates[n].shown},on:{selected:function(t){return e.onValueChange(n,arguments[0])}}}):e._e()],1):i("td",{attrs:{colspan:"2"}},[i("div",{staticClass:"label"},[e._v("\n                    "+e._s(t.name)+"\n                    "),t.description?i("tooltip",[e._v(e._s(t.description))]):e._e(),e._v(" "),i("a",{staticClass:"link",attrs:{target:"_blank",href:"https://github.com/ishubin/schemio/blob/master/docs/Scripting.md"}},[e._v("(documentation)")])],1),e._v(" "),"script"===t.type?i("ScriptEditor",{key:"script-editor-"+n+"-"+e.editorId,attrs:{value:e.argumentValues[n]},on:{changed:function(t){return e.onValueChange(n,arguments[0])}}}):e._e()],1)])})),0)])};Qu._withStripped=!0;var Xu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"diagram-picker-wrapper"},[i("div",{staticClass:"diagram-picker",class:{specified:e.diagramId,empty:!e.diagramId,disabled:e.disabled}},[e.diagramId?i("i",{staticClass:"icon fa-solid fa-diagram-project",on:{click:function(t){e.searchModalShown=!0}}}):e._e(),e._v(" "),e.diagramId?i("div",{staticClass:"diagram-title",attrs:{title:e.diagramTitle},on:{click:e.toggleSearchModal}},[e.isLoading?i("i",{staticClass:"fas fa-spinner fa-spin fa-1x"}):e._e(),e._v(" "),i("span",[e._v(e._s(e.diagramTitle))])]):i("div",{staticClass:"diagram-title",on:{click:e.toggleSearchModal}},[i("span",{staticClass:"diagram-placeholder"},[e._v("Search diagram...")])]),e._v(" "),e.diagramLink?i("a",{staticClass:"diagram-picker-external-link",attrs:{title:"Open diagram in another tab",target:"_blank",href:e.diagramLink}},[i("i",{staticClass:"fa-solid fa-square-up-right"})]):e._e(),e._v(" "),e.searchModalShown?i("SchemeSearchModal",{on:{close:function(t){e.searchModalShown=!1},"selected-scheme":e.onDiagramPicked}}):e._e()],1)])};Xu._withStripped=!0;const ep={components:{SchemeSearchModal:Bu},props:{diagramId:{type:String},disabled:{type:Boolean,default:!1}},beforeMount(){this.diagramId&&this.$store.state.apiClient&&this.$store.state.apiClient.getSchemeInfo&&(this.isLoading=!0,this.$store.state.apiClient.getSchemeInfo(this.diagramId).then((e=>{this.isLoading=!1,this.diagramTitle=e.name,this.diagramLink=e.link})).catch((e=>{console.error(e),this.isLoading=!1,this.diagramTitle=this.diagramId})))},data:()=>({searchModalShown:!1,diagramTitle:null,diagramLink:null,isLoading:!1}),methods:{onDiagramPicked(e){this.searchModalShown=!1,this.$emit("diagram-selected",e)},toggleSearchModal(){const e=this.$store.state.apiClient;e&&e.diagramSearchProvider?e.diagramSearchProvider(this.diagramId).then((e=>{this.onDiagramPicked(e)})):this.disabled||(this.searchModalShown=!0)}}},tp=(0,Re.Z)(ep,Xu,[],!1,null,null,null).exports;var ip=i(7502),np=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("dropdown",{attrs:{options:e.capOptions},on:{selected:function(t){return e.$emit("selected",arguments[0].name)}}},[i("div",{domProps:{innerHTML:e._s(e.selectedCapHtml)}})])};np._withStripped=!0;var rp=i(125);function sp(e,t,i,n,r){let s=`<svg width="${e}px" height="${t}px"><g transform="translate(5, 0)">`,o=0,a=30;if(n){n.prolongLine||(r?o=n.entryPoint.x:a=n.entryPoint.x);let e="#111111";n.hollow&&(e="none"),s+=`<path d="${n.path}" fill="${e}" stroke="#111111" stroke-width="2"/>`}return s+=`<path d="M ${o} ${i} L ${a} ${i}" fill="none" stroke="#111111" stroke-width="2"/>`,s+="</g></svg>",s}const op=(0,Fe.UI)((0,rp.j)(),(e=>({name:e,cap:(0,rp.g)(30,15,-15,0,e)}))),ap=(0,Fe.UI)((0,rp.j)(),(e=>({name:e,cap:(0,rp.g)(0,15,15,0,e)})));function lp(e,t){return(0,Fe.UI)(e,(e=>({name:e.name,html:sp(100,30,15,e.cap,t)})))}const cp={props:{value:{type:String},isSource:{type:Boolean,default:!1},width:{type:String,default:"30px"},height:{type:Number,default:20},isThick:{type:Boolean,default:!1}},components:{Dropdown:wd.Z},data(){let e=op;this.isSource&&(e=ap);let t=[];return t=this.isThick?lp((0,Fe.hX)(e,(e=>"empty"===e.name||"triangle"===e.name)),this.isSource):lp(e,this.isSource),{capOptions:t,selectedCapHtml:this.generateSelectedCapHtml(this.value)}},methods:{generateSelectedCapHtml(e){let t=null;return t=this.isSource?(0,rp.g)(0,7,12,0,e):(0,rp.g)(30,7,-12,0,e),sp(40,this.height,7,t,this.isSource)}},watch:{value(e){this.selectedCapHtml=this.generateSelectedCapHtml(e)}}},hp=(0,Re.Z)(cp,np,[],!1,null,null,null).exports,dp={props:{editorId:{type:String,required:!0},argsDefinition:{type:Object,required:!0},args:{type:Object,required:!0},schemeContainer:{type:Object,required:!0},apiClient:{type:Object,default:null}},components:{Modal:je.Z,ColorPicker:Fu.Z,ElementPicker:Vu,Tooltip:Cu.Z,NumberTextfield:fd.Z,AdvancedColorEditor:Ku.Z,ScriptEditor:ip.Z,DiagramPicker:tp,PathCapDropdown:hp},beforeMount(){this.updateArgumentControlDependencies()},data(){const e={};return(0,Fe.Ed)(this.argsDefinition,((t,i)=>{this.args.hasOwnProperty(i)?e[i]=this.args[i]:e[i]=t.value})),{argumentValues:e,argumentControlStates:(0,Fe.O3)(this.argsDefinition,(()=>({shown:!0}))),scriptEnlarged:!1}},methods:{updateArgumentControlDependencies(){(0,Fe.Ed)(this.argsDefinition,((e,t)=>{if(e.depends){this.argumentControlStates[t]||(this.argumentControlStates[t]={shown:i});let i=!0;(0,Fe.Ed)(e.depends,((e,t)=>{i=i&&this.argumentValues[t]===e})),this.argumentControlStates[t].shown=i}}))},onValueChange(e,t){this.argumentValues[e]=t,this.emitArgumentChange(e),this.updateArgumentControlDependencies()},onDiagramPicked(e,t){this.onValueChange(e,t.id)},emitArgumentChange(e){this.$emit("argument-changed",e,this.argumentValues[e])},isDisabledScript(e,t){return"script"===e.type&&!this.argumentControlStates[t].shown}}},up=(0,Re.Z)(dp,Qu,[],!1,null,null,null).exports;function pp(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function mp(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function fp(e,t){const i=e.name.toUpperCase(),n=t.name.toUpperCase();return i<n?-1:i>n?1:0}const gp=Object.values(zd.Z.standardEvents),vp=(0,Fe.UI)(gp,(e=>e.id)),yp=Wc("behavior-collapse",400);function xp(e){const t=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?pp(Object(i),!0).forEach((function(t){mp(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):pp(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e);return delete t.id,t}function bp(e){return{event:e.event,actions:(0,Fe.UI)(e.actions,xp)}}function wp(e,t,i,n){const r=fh.DD[e];if(r)return r.name;if(0===e.indexOf("shapeProps.")){let r=null;if(r="self"===t?i:n.findFirstElementBySelector(t),r&&r.shape){const t=Id.Z.find(r.shape),i=e.substr(11);if(t&&t.args&&t.args.hasOwnProperty(i))return t.args[i].name;if("standard"===t.shapeType&&Id.Z.standardShapeProps.hasOwnProperty(i))return Id.Z.standardShapeProps[i].name}}else if(0===e.indexOf("textSlots.")){const t=e.indexOf("."),i=e.indexOf(".",t+1),n=e.substring(t+1,i),r=e.substring(i+1),s=(0,Fe.sE)(fh.eN,(e=>e.field===r));if(s)return`Text / ${n} / ${s.name}`}return e}const Cp={props:{editorId:{type:String,required:!0},item:{type:Object},schemeContainer:{type:Object},extended:{type:Boolean,default:!1}},components:{Dropdown:wd.Z,ElementPicker:Vu,SetArgumentEditor:Yu,Panel:wu,ArgumentsEditor:up,VueTagsInput:Su(),Modal:je.Z,NumberTextfield:fd.Z},data(){const e=(0,Fe.UI)(this.schemeContainer.getItems(),(e=>({id:e.id,name:e.name||"Unnamed"})));e.sort(fp);const t=(0,Fe.UI)(this.item.behavior.events,this.createBehaviorEventMeta);(0,Fe.Ed)(t,((e,t)=>{const i=yp.get(`${this.schemeContainer.scheme.id}/${this.item.id}/${t}`,0);e.collapsed=1===i}));const i=Id.Z.find(this.item.shape);let n=[];i.getEvents&&(n=i.getEvents(this.item).map((e=>e.name)));const r=[];return(0,Fe.Ed)(fh.qv,(e=>r.push(e))),{items:e,eventOptions:this.createEventOptions(),eventMetas:t,functionArgumentsEditor:{shown:!1,width:600,functionDescription:null,eventIndex:0,actionIndex:0,args:{}},itemTag:"",existingItemTags:(0,Fe.UI)(this.schemeContainer.itemTags,(e=>({text:e}))),shapeEvents:n,dragging:{action:null,eventIndex:-1,actionIndex:-1,readyToDrop:!1,preview:{elementName:"",elementIcon:"",method:"",propertyName:""},dropTo:{eventIndex:-1,actionIndex:-1}},draggingOptions:r}},methods:{updateItem(e){this.schemeContainer.updateItem(this.item.id,"behavior.events",e)},createBehaviorEventMeta:e=>({collapsed:!1}),onItemTagsChange(e){this.$emit("item-field-changed","tags",(0,Fe.UI)(e,(e=>e.text)))},toggleBehaviorCollapse(e){this.eventMetas[e].collapsed=!this.eventMetas[e].collapsed,yp.save(`${this.schemeContainer.scheme.id}/${this.item.id}/${e}`,this.eventMetas[e].collapsed?1:0)},moveEventInOrder(e,t){this.updateItem((i=>{if(t<0||t>=i.behavior.events.length)return;let n=i.behavior.events[e];i.behavior.events[e]=i.behavior.events[t],i.behavior.events[t]=n,n=this.eventMetas[e],this.eventMetas[e]=this.eventMetas[t],this.eventMetas[t]=n,this.$forceUpdate()}))},findElement(e){const t=this.schemeContainer.findElementsBySelector(e,this.item);return t.length>0?t[0]:null},createEventOptions(){let e=[];const t=Id.Z.find(this.item.shape);if(t){const i=t.getEvents(this.item);i.length>500&&(i.length=500),e=gp.concat((0,Fe.UI)(i,(e=>({id:e.name,name:e.name}))))}return e.push({id:"custom-event",name:"Custom event ..."}),e},createMethodSuggestionsForElement(e){const t=this.findElement(e);if(!t)return[];const i=[];(0,Fe.Ed)(zu.Z.main,((e,n)=>{if("set"!==n&&"sendEvent"!==n&&!n.startsWith("_")){let r=!0;if(e.supportedShapes){let i=!1;for(let n=0;n<e.supportedShapes.length;n++)if(e.supportedShapes[n]===t.shape){i=!0;break}r=i}r&&i.push({method:n,name:e.name,iconClass:"fas fa-running",description:e.description})}})),(0,Fe.Ed)(this.collectAllItemCustomEvents(t),(e=>{("component"!==t.shape||e!==Ud.lK&&e!==Ud.LM&&e!==Ud.YL)&&i.push({method:"custom-event",name:e,event:e,iconClass:"fas fa-running"})})),i.sort(((e,t)=>e.name<t.name?-1:1));const n=[];(0,Fe.Ed)(fh.DD,((e,t)=>{n.push({method:"set",name:e.name?e.name:t,fieldPath:t,iconClass:"fas fa-cog"})}));const r=Id.Z.find(t.shape);return r&&(0,Fe.Ed)(r.args,((e,t)=>{n.push({method:"set",name:e.name,fieldPath:`shapeProps.${t}`,iconClass:"fas fa-cog"})})),(0,Fe.Ed)(r.getTextSlots(t),(e=>{(0,Fe.Ed)(fh.eN,(t=>{n.push({method:"set",name:`Text / ${e.name} / ${t.name}`,fieldPath:`textSlots.${e.name}.${t.field}`,iconClass:"fas fa-cog"})}))})),n.sort(((e,t)=>e.name<t.name?-1:1)),i.concat(n)},collectAllItemCustomEvents(e){if(!e.behavior.events)return[];const t=(0,Fe.hX)(e.behavior.events,(e=>!this.isStandardEvent(e.event)));return(0,Fe.jj)((0,Fe.UI)(t,(e=>e.event)))},isStandardEvent(e){return(0,Fe.cq)(vp,e)>=0||(0,Fe.cq)(this.shapeEvents,e)>=0},addBehaviorEvent(){this.updateItem((e=>{e.behavior.events||(e.behavior.events=[]);const t={id:jl().generate(),event:"clicked",actions:[]};e.behavior.events.push(t),this.eventMetas.push(this.createBehaviorEventMeta(t)),this.emitChangeCommited(),this.$forceUpdate()}))},copyAllEvents(){hh("behavior-events",(0,Fe.UI)(this.item.behavior.events,bp)).then((()=>{nh.Z.addInfoSystemMessage(this.$store,"Copied all events")}))},copyEvent(e){const t=this.item.behavior.events[e];hh("behavior-events",[bp(t)]).then((()=>{const e=zd.Z.standardEvents[t.event],i=e?e.name:t.event;nh.Z.addInfoSystemMessage(this.$store,`Copied "${i}" event`)}))},pasteEvents(){("behavior-events",ch().then((e=>{try{const t=JSON.parse(e);if(t&&"behavior-events"===t.kind&&t.hasOwnProperty("data"))return t.data}catch(e){return null}}))).then((e=>{e&&e.length>0&&this.updateItem((t=>{(0,Fe.Ed)(e,(e=>{e.id=jl().generate(),(0,Fe.Ed)(e.actions,(e=>{e.id=jl().generate()})),t.behavior.events.push(e)})),mh.Z.schemeChangeCommitted.$emit(this.editorId)}))}))},removeBehaviorEvent(e){this.updateItem((t=>{t.behavior.events.splice(e,1),this.eventMetas.splice(e,1),this.emitChangeCommited()}))},onBehaviorEventSelected(e,t){this.updateItem((i=>{"custom-event"===t.id?(i.behavior.events[e].event="Unknown event...",this.$nextTick((()=>{const t=document.getElementById(`custom-event-textfield-${i.id}-${e}`);t&&t.focus()}))):i.behavior.events[e].event=t.id,this.emitChangeCommited()}))},addActionToEvent(e){this.updateItem((t=>{const i=t.behavior.events[e];i.actions||(i.actions=[]);let n="self";i.actions.length>0&&(n=i.actions[i.actions.length-1].element),i.actions.push({id:jl().generate(),element:n,method:"show",on:!0,args:(0,Fe.O3)(zu.Z.main.show.args,(e=>e.value))}),this.emitChangeCommited()}))},removeAction(e,t){this.updateItem((i=>{i.behavior.events[e].actions.splice(t,1),this.emitChangeCommited()}))},onActionElementSelected(e,t,i){this.updateItem((n=>{n.behavior.events[e].actions[t].element=i,this.emitChangeCommited()}))},onActionMethodSelected(e,t,i){this.updateItem((n=>{const r=n.behavior.events[e].actions[t];if(r){if("set"===i.method){r.method=i.method;const e={field:i.fieldPath,value:"",animated:!1,animationDuration:.2,transition:"ease-in-out",inBackground:!0},t=this.findElement(r.element);if(t){const n=(0,fh.u2)(Id.Z.find(t.shape),i.fieldPath);n&&(0,Uu.f)(n.type)&&(e.animated=!0),e.value=Uc.Z.getObjectProperty(t,i.fieldPath)}r.args=e}else if("custom-event"===i.method)r.method="sendEvent",r.args={event:i.event};else{r.method=i.method,r.args=this.getDefaultArgsForMethod(r,i.method);const e=this.findFirstElementPickerArgument(i.method);e&&mh.Z.elementPick.requested.$emit(this.editorId,(t=>{r.args[e]=t,this.emitChangeCommited()}))}this.emitChangeCommited()}}))},getDefaultArgsForMethod(e,t){let i=zu.Z.main;if(i[t]){const e=i[t].args;if(e){const t={};return(0,Fe.Ed)(e,((e,i)=>{t[i]=e.value})),t}}return{}},findFirstElementPickerArgument(e){const t=zu.Z.main;if(!t[e])return null;const i=t[e].args;if(!i)return null;for(let e in i)if(i.hasOwnProperty(e)&&"element"===i[e].type)return e;return null},getArgumentDescriptionForElement(e,t){const i=this.findElement(e);if(i&&i.shape){const e=(0,fh.u2)(Id.Z.find(i.shape),t);if(e)return e}return{type:"string"}},onArgumentPropertyChangeForSet(e,t,i,n){this.updateItem((r=>{r.behavior.events[e].actions[t].args[i]=n;const s=r.behavior.events[e].actions[t].args.field;this.emitChangeCommited(`${r.id}.behavior.events.${e}.actions.${t}.args.${s}`)}))},duplicateBehavior(e){this.updateItem((t=>{const i=Uc.Z.clone(t.behavior.events[e]);i.id=jl().generate(),(0,Fe.Ed)(i.actions,(e=>{e.id=jl().generate()})),t.behavior.events.push(i),this.eventMetas.push(this.createBehaviorEventMeta(i)),this.emitChangeCommited(),this.$forceUpdate()}))},emitChangeCommited(e){mh.Z.item.changed.specific.$emit(this.editorId,this.item.id),mh.Z.schemeChangeCommitted.$emit(this.editorId,e)},showFunctionArgumentsEditor(e,t,i){let n=zu.Z.main[e.method];n||(n={args:{}}),this.functionArgumentsEditor.functionDescription=n,this.functionArgumentsEditor.args=e.args,this.functionArgumentsEditor.eventIndex=t,this.functionArgumentsEditor.actionIndex=i,n.editorComponent?this.functionArgumentsEditor.width=900:this.functionArgumentsEditor.width=600,this.functionArgumentsEditor.shown=!0},onFunctionArgumentsEditorChange(e,t){this.updateItem((i=>{const n=this.functionArgumentsEditor.eventIndex,r=this.functionArgumentsEditor.actionIndex;if(n<i.behavior.events.length){const s=i.behavior.events[n];r<s.actions.length&&(s.actions[r].args[e]=t)}mh.Z.schemeChangeCommitted.$emit(this.editorId,`items.${i.id}.behavior.events.${n}.actions.${r}.args.${e}`)}))},prettyMethodName:e=>zu.Z.main[e]?zu.Z.main[e].name:e,onActionDraggerMouseDown(e,t,i){(0,jh.E)(e).withDroppableClass("behavior-action-droppable").withDraggedElement(this.$refs.dragPreview).onDragStart((()=>{let e="Drop here";const n=document.getElementById(`behavior-action-container-${this.item.id}-${t}-${i}`);n&&(e=n.innerHTML),this.dragging.action=e;const r=this.item.behavior.events[t].actions[i],s=qu(r.element,this.schemeContainer);this.dragging.preview.elementName=s.name,this.dragging.preview.elementIcon=s.iconClass,"set"===r.method?(this.dragging.preview.method=null,this.dragging.preview.propertyName=wp(r.args.field,r.element,this.item,this.schemeContainer)):(this.dragging.preview.propertyName=null,this.dragging.preview.method=this.prettyMethodName(r.method)),this.dragging.eventIndex=t,this.dragging.actionIndex=i,this.dragging.dropTo.eventIndex=-1,this.dragging.dropTo.actionIndex=-1})).onDragOver(((e,t,i,n)=>{const r=parseInt(t.getAttribute("data-event-index")),s=t.getAttribute("data-action-index");if(s){const e=parseInt(s);this.onDragOverToAction(r,e,t,n)}else this.onDragOverToEvent(r)})).onDone((()=>{this.onDragEnd()})).build()},onActionDragStarted(e,t){let i="Drop here";const n=document.getElementById(`behavior-action-container-${this.item.id}-${e}-${t}`);n&&(i=n.innerHTML),this.dragging.action=i,this.dragging.eventIndex=e,this.dragging.actionIndex=t,this.dragging.dropTo.eventIndex=-1,this.dragging.dropTo.actionIndex=-1},onDragOverToEvent(e){this.dragging.dropTo.eventIndex=e,this.dragging.dropTo.actionIndex=0,this.dragging.readyToDrop=!(this.dragging.eventIndex===e&&0===this.dragging.actionIndex)},onDragOverToAction(e,t,i,n){this.dragging.dropTo.eventIndex=e,this.dragging.dropTo.actionIndex=t;const r=i.getBoundingClientRect();n-(r.top+r.height/2)>0&&(this.dragging.dropTo.actionIndex=t+1);let s=!0;this.dragging.eventIndex===this.dragging.dropTo.eventIndex&&(this.dragging.actionIndex!==this.dragging.dropTo.actionIndex&&this.dragging.actionIndex!==this.dragging.dropTo.actionIndex-1||(s=!1)),this.dragging.readyToDrop=s},onDragEnd(){this.dragging.eventIndex>=0&&this.dragging.actionIndex>=0&&this.dragging.dropTo.eventIndex>=0&&this.dragging.dropTo.actionIndex>=0&&this.moveAction(this.dragging.eventIndex,this.dragging.actionIndex,this.dragging.dropTo.eventIndex,this.dragging.dropTo.actionIndex),this.resetDragging()},resetDragging(){this.dragging.action=null,this.dragging.eventIndex=-1,this.dragging.actionIndex=-1,this.dragging.readyToDrop=!1,this.dragging.dropTo.eventIndex=-1,this.dragging.dropTo.actionIndex=-1},moveAction(e,t,i,n){this.updateItem((r=>{if(e===i&&t===n)return;const s=this.item.behavior.events[e].actions.splice(t,1)[0];e===i&&n>t&&(n-=1),this.item.behavior.events[i].actions.splice(n,0,s),this.emitChangeCommited()}))},jumpToElement(e){const t=this.schemeContainer.findFirstElementBySelector(e);t&&this.$emit("jumped-to-item",t)},toggleActionOnOff(e,t){this.updateItem((i=>{const n=i.behavior.events[e].actions[t];n.on=!n.on,this.$forceUpdate()}))},onItemDraggingChange(e){this.updateItem((t=>{t.behavior.dragging=e.id,this.$forceUpdate(),mh.Z.schemeChangeCommitted.$emit(this.editorId)}))},onItemDraggingDropToSelected(e){this.updateItem((t=>{t.behavior.dropTo=e,this.$forceUpdate(),mh.Z.schemeChangeCommitted.$emit(this.editorId)}))},onItemDraggingPathSelected(e){this.updateItem((t=>{t.behavior.dragPath=e,this.$forceUpdate(),mh.Z.schemeChangeCommitted.$emit(this.editorId)}))},onItemDragAlignChange(e){this.updateItem((t=>{t.behavior.dragPathAlign=e,this.$forceUpdate(),mh.Z.schemeChangeCommitted.$emit(this.editorId)}))},onItemDragRotationChange(e){this.updateItem((t=>{t.behavior.dragPathRotation=e,this.$forceUpdate(),mh.Z.schemeChangeCommitted.$emit(this.editorId)}))}},filters:{toPrettyEventName:e=>zd.Z.standardEvents[e]?zd.Z.standardEvents[e].name:e,toPrettyMethod:(e,t)=>zu.Z.main[e]?zu.Z.main[e].name:e,toPrettyActionArgs(e,t){if(zu.Z.main[e.method]){const i=zu.Z.main[e.method];if(i.argsToShortString){const n=i.argsToShortString(e.args,t);return n.length>100?`( ${n.substring(0,100)} ... )`:`( ${n} )`}}return"( ... )"},toPrettyPropertyName:(e,t,i,n)=>wp(e,t,i,n),toPrettyDraggingOptionName(e){const t=fh.qv[e];return t?t.name:fh.qv.none.name}},computed:{filteredItemTagsSuggestions(){const e=this.itemTag.toLowerCase();return this.existingItemTags.filter((t=>t.text.toLowerCase().indexOf(e)>=0))},itemTags(){return(0,Fe.UI)(this.item.tags,(e=>({text:e})))}}},Pp=Cp,kp=(0,Re.Z)(Pp,ju,[],!1,null,null,null).exports;var Sp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{title:"Advanced Behavior Editor","stretch-width":!0,"max-width":900,"use-mask":!1},on:{close:function(t){return e.$emit("close")}}},[i("div",{ref:"advancedBehaviorContainer",staticClass:"advanced-behavior-editor"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Search..."},domProps:{value:e.searchKeyword},on:{input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}}),e._v(" "),i("div",{staticClass:"advanced-behavior-menu"},[i("ElementPicker",{key:"advanced-behavior-pick-item-1-"+e.revision,attrs:{editorId:e.editorId,"scheme-container":e.schemeContainer,"excluded-item-ids":e.existingItemIds,"use-self":!1,"allow-tags":!1,"none-label":"Choose item..."},on:{selected:function(t){return e.prependItemForElement(arguments[0])}}})],1),e._v(" "),i("div",{staticClass:"behavior-advanced-editor"},e._l(e.itemsWithBehavior,(function(t){return i("div",{attrs:{id:"advanced-behavior-item-"+t.id}},[i("span",{staticClass:"item-title"},[e._v(e._s(t.name))]),e._v(" "),i("BehaviorProperties",{key:"behavior-panel-"+t.id,attrs:{editorId:e.editorId,item:t,extended:!0,"scheme-container":e.schemeContainer},on:{"jumped-to-item":e.jumpToItem}})],1)})),0),e._v(" "),i("div",{staticClass:"advanced-behavior-menu"},[i("ElementPicker",{key:"advanced-behavior-pick-item-2-"+e.revision,attrs:{editorId:e.editorId,"scheme-container":e.schemeContainer,"excluded-item-ids":e.existingItemIds,"use-self":!1,"allow-tags":!1,"none-label":"Choose item..."},on:{selected:function(t){return e.appendItemForElement(arguments[0])}}})],1)])])};Sp._withStripped=!0;const Ip={components:{Modal:je.Z,BehaviorProperties:kp,ElementPicker:Vu},props:{editorId:{type:String,required:!0},schemeContainer:{type:Object}},beforeMount(){this.refreshExistingItems()},data:()=>({revision:0,searchKeyword:"",existingItems:[],existingItemIds:[]}),methods:{prependItemForElement(e){const t=this.schemeContainer.findFirstElementBySelector(e);t&&this.addItem(t,!1)},appendItemForElement(e){const t=this.schemeContainer.findFirstElementBySelector(e);t&&this.addItem(t,!0)},addItem(e,t){this.searchKeyword="";let i=0;t&&(i=this.existingItems.length),this.existingItems.splice(i,0,e),this.existingItemIds.splice(i,0,e.id),this.revision+=1},refreshExistingItems(){this.existingItems=this.filterItems(),this.existingItemIds=(0,Fe.UI)(this.existingItems,(e=>e.id))},filterItems(){return(0,Fe.hX)(this.schemeContainer.getItems(),(e=>e.behavior&&e.behavior.events&&e.behavior.events.length>0))},scrollToItem(e){if(!e)return;const t=document.getElementById(`advanced-behavior-item-${e.id}`);t&&(this.$refs.advancedBehaviorContainer.parentElement.scrollTop=t.offsetTop)},jumpToItem(e){(0,Fe.sE)(this.existingItemIds,(t=>t===e.id))||(this.addItem(e,!0),this.$nextTick((()=>{this.scrollToItem(e)})))}},computed:{itemsWithBehavior(){const e=this.searchKeyword.toLowerCase();return e?(0,Fe.hX)(this.schemeContainer.getItems(),(t=>t.name.toLowerCase().indexOf(e)>=0)):this.existingItems}}},Ap=(0,Re.Z)(Ip,Sp,[],!1,null,null,null).exports;var _p=i(1179),Ep=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("panel",{attrs:{uid:"default-styles",name:"Default Styles"}},e._l(e.defaultStyleSections,(function(t){return i("div",[i("ul",{staticClass:"shape-styles-preview"},e._l(t.styles,(function(t){return i("li",[i("div",{staticClass:"shape-style",on:{click:function(i){return e.applyStyle(t.style)}}},[i("svg",{attrs:{width:"70",height:"40"}},[i("advanced-fill",{attrs:{"fill-id":t.style.id,fill:t.style.fill,area:{x:4,y:4,w:62,h:32}}}),e._v(" "),i("rect",{attrs:{x:"4",y:"4",width:"62",height:"32",fill:t.previewFill,stroke:t.previewStroke,"stroke-width":"1"}})],1)])])})),0)])})),0),e._v(" "),e.userStylesEnabled?i("panel",{attrs:{uid:"user-styles",name:"User Styles"}},[i("span",{staticClass:"btn",on:{click:e.saveStyleFromItem}},[e._v("Add to Styles")]),e._v(" "),e.isEdit?i("span",{staticClass:"btn",on:{click:function(t){e.isEdit=!1}}},[i("i",{staticClass:"fas fa-edit"}),e._v(" Stop Edit")]):i("span",{staticClass:"btn",on:{click:function(t){e.isEdit=!0}}},[i("i",{staticClass:"fas fa-edit"}),e._v(" Edit")]),e._v(" "),i("ul",{staticClass:"shape-styles-preview"},e._l(e.stylePreviews,(function(t,n){return i("li",[i("div",{staticClass:"shape-style",on:{click:function(i){return e.applyUserStyle(t.style)}}},[e.isEdit?i("span",{staticClass:"link link-remove-style",on:{click:function(t){return e.removeStyle(n)}}},[i("i",{staticClass:"fas fa-times"})]):e._e(),e._v(" "),i("svg",{attrs:{width:"70",height:"40"}},[i("advanced-fill",{attrs:{"fill-id":t.style.id,fill:t.style.fill,area:{x:4,y:4,w:62,h:32}}}),e._v(" "),i("rect",{attrs:{x:"4",y:"4",width:"62",height:"32",fill:t.previewFill,stroke:t.previewStroke,"stroke-width":"1"}})],1)])])})),0)]):e._e()],1)};Ep._withStripped=!0;let Tp=1;function Mp(e,t,i){return{id:"simple-color-style-"+Tp++,fill:{type:"solid",color:e},strokeColor:t,textColor:i}}function $p(e,t,i,n){return{id:"gradient-color-style-"+Tp++,fill:{type:"gradient",gradient:{colors:[{c:e,p:0},{c:t,p:100}],type:"linear",direction:0}},strokeColor:i,textColor:n}}const Op=[{name:"Bright",styles:[Mp("rgba(240,240,240,1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),Mp("rgba(38, 37, 37, 1)","rgba(30,30,30,1.0)","rgba(248, 248, 248, 1)"),Mp("rgba(251, 99, 99, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),Mp("rgba(243, 180, 64, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),Mp("rgba(244, 254, 0, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),Mp("rgba(122, 255, 55, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),Mp("rgba(57, 219, 136, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),Mp("rgba(64, 236, 243, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),Mp("rgba(128, 157, 243, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),Mp("rgba(216, 128, 243, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)")]},{name:"Light",styles:[Mp("rgba(212, 210, 210, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),Mp("rgba(114, 112, 112, 1)","rgba(30,30,30,1.0)","rgba(248, 248, 248, 1)"),Mp("rgba(237, 168, 168, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),Mp("rgba(247, 208, 135, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),Mp("rgba(245, 249, 142, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),Mp("rgba(173, 245, 137, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),Mp("rgba(143, 245, 193, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),Mp("rgba(175, 247, 249, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),Mp("rgba(206, 215, 245, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)"),Mp("rgba(244, 208, 255, 1)","rgba(30,30,30,1.0)","rgba(0,0,0,1.0)")]},{name:"Dark",styles:[Mp("rgba(120, 116, 116, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),Mp("rgba(77, 76, 76, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),Mp("rgba(124, 39, 16, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),Mp("rgba(130, 80, 14, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),Mp("rgba(129, 140, 0, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),Mp("rgba(58, 120, 27, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),Mp("rgba(21, 108, 94, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),Mp("rgba(17, 100, 126, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),Mp("rgba(71, 106, 223, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),Mp("rgba(106, 46, 124, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)")]},{name:"Gradient",styles:[$p("rgba(151, 150, 150, 1)","rgba(247, 247, 247, 1)","rgba(94, 91, 91, 1)","rgba(0, 0, 0, 1)"),$p("rgba(62, 62, 62, 1)","rgba(180, 180, 180, 1)","rgba(30,30,30,1.0)","rgba(254, 254, 254, 1)"),$p("rgba(118, 38, 17, 1)","rgba(249, 143, 114, 1)","rgba(147, 22, 22, 1)","rgba(254, 254, 254, 1)"),$p("rgba(130, 80, 14, 1)","rgba(237, 192, 132, 1)","rgba(100, 75, 33, 1)","rgba(254, 254, 254, 1)"),$p("rgba(109, 118, 7, 1)","rgba(226, 235, 114, 1)","rgba(96, 93, 54, 1)","rgba(254, 254, 254, 1)"),$p("rgba(58, 120, 27, 1)","rgba(169, 233, 138, 1)","rgba(33, 84, 20, 1)","rgba(254, 254, 254, 1)"),$p("rgba(16, 85, 74, 1)","rgba(65, 214, 191, 1)","rgba(22, 90, 65, 1)","rgba(254, 254, 254, 1)"),$p("rgba(17, 100, 126, 1)","rgba(165, 223, 241, 1)","rgba(38, 81, 106, 1)","rgba(254, 254, 254, 1)"),$p("rgba(71, 106, 223, 1)","rgba(200, 211, 247, 1)","rgba(43, 65, 135, 1)","rgba(254, 254, 254, 1)"),$p("rgba(106, 46, 124, 1)","rgba(239, 196, 251, 1)","rgba(122, 43, 135, 1)","rgba(254, 254, 254, 1)")]}];function Dp(e,t){const i=Id.Z.find(e.shape);if(i&&("standard"===i.shapeType||i.args.fill&&"advanced-color"===i.args.fill.type&&i.args.strokeColor&&"color"===i.args.strokeColor.type)){if(e.shapeProps.fill=Uc.Z.clone(t.fill),e.shapeProps.strokeColor=Uc.Z.clone(t.strokeColor),t.textColor){const n=i.getTextSlots(e);n&&(0,Fe.Ed)(n,(i=>{e.textSlots[i.name]&&(e.textSlots[i.name].color=Uc.Z.clone(t.textColor))}))}return!0}return!1}let Bp=null;const Lp={props:{item:{type:Object},userStylesEnabled:{type:Boolean,default:!1}},components:{Panel:wu,AdvancedFill:kd.ZP},beforeMount(){this.init()},data(){return{isEdit:!1,previewItems:null,previewComponent:null,stylePreviews:[],defaultStyleSections:(0,Fe.UI)(Op,(e=>({name:e.name,styles:(0,Fe.UI)(e.styles,this.convertStyleToPreview)})))}},methods:{init(){null===Bp&&this.userStylesEnabled?this.$store.state.apiClient.getStyles().then((e=>{Bp=e,this.stylePreviews=(0,Fe.UI)(e,this.convertStyleToPreview)})):this.stylePreviews=(0,Fe.UI)(Bp,this.convertStyleToPreview)},convertStyleToPreview:e=>({style:e,previewFill:(0,kd.pz)(e.fill,e.id),previewStroke:e.strokeColor}),applyStyle(e){this.$emit("style-applied",e)},applyUserStyle(e){this.isEdit||this.applyStyle(e)},saveStyleFromItem(){if(this.stylePreviews.length>=100)return void nh.Z.addErrorSystemMessage(this.$store,"Cannot add style as you already have 100 styles. Please consider removing some.");const e=Id.Z.find(this.item.shape);if(!e)return;if(!("standard"===e.shapeType||e.args.fill&&"advanced-color"===e.args.fill.type&&e.args.strokeColor&&"color"===e.args.strokeColor))return;let t=null;const i=e.getTextSlots(this.item);if(i&&i.length>0){const e=i[0].name;this.item.textSlots[e]&&this.item.textSlots[e].color&&(t=this.item.textSlots[e].color)}this.$store.state.apiClient.saveStyle(this.item.shapeProps.fill,this.item.shapeProps.strokeColor,t).then((e=>{this.stylePreviews.push(this.convertStyleToPreview(e)),Bp.push(e)}))},removeStyle(e){const t=this.stylePreviews[e];if(!t)return;const i=t.style.id;this.$store.state.apiClient.deleteStyle(i).then((()=>{this.stylePreviews.splice(e,1),this.stylePreviews=(0,Fe.hX)(this.stylePreviews,(e=>e.style.id!==i))})),Bp=(0,Fe.hX)(Bp,(e=>e.id!==i))}}},Rp=Lp,Np=(0,Re.Z)(Rp,Ep,[],!1,null,null,null).exports;var Zp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{attrs:{title:e.isAdding?"Add effect":"Edit Effect",primaryButton:e.isAdding?"Add Effect":null,closeName:e.isAdding?"Cancel":"Close",width:400,useMask:!1},on:{"primary-submit":e.addEffect,close:function(t){return e.$emit("close")}}},[i("div",{staticClass:"section"},[i("div",{staticClass:"ctrl-label"},[e._v("Effect")]),e._v(" "),i("select",{domProps:{value:e.effectId},on:{input:function(t){return e.onEffectIdChanged(arguments[0].target.value)}}},e._l(e.knownEffects,(function(t){return i("option",{domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)]),e._v(" "),e.description?i("div",{staticClass:"hint hint-small"},[e._v(e._s(e.description))]):e._e(),e._v(" "),i("div",{staticClass:"ctrl-label"},[e._v("Name")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.effectName,expression:"effectName"}],staticClass:"textfield",domProps:{value:e.effectName},on:{input:function(t){t.target.composing||(e.effectName=t.target.value)}}}),e._v(" "),i("EffectEditor",{key:"effect-editor-"+e.effectId,attrs:{editorId:e.editorId,schemeContainer:e.schemeContainer,effectId:e.effectId,effectArgs:e.effectArgs},on:{"effect-arg-changed":e.onEffectArgEdited}})],1)};Zp._withStripped=!0;var Fp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("table",{staticClass:"properties-table"},[i("tbody",e._l(e.effectArgDefinitions,(function(t,n){return i("tr",["color-matrix"!==t.type?i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("\n                    "+e._s(t.name)+"\n                    "),t.description?i("tooltip",[e._v(e._s(t.description))]):e._e()],1):e._e(),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%",colspan:"color-matrix"===t.type?2:1}},[i("PropertyInput",{attrs:{editorId:e.editorId,descriptor:t,value:e.effectArgs[n],schemeContainer:e.schemeContainer},on:{input:function(t){return e.onPropChange(n,arguments[0])}}})],1)])})),0)])])};Fp._withStripped=!0;var jp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",["string"===e.descriptor.type?i("input",{staticClass:"textfield",attrs:{disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.emitValue(arguments[0].target.value)}}}):e._e(),e._v(" "),"image"===e.descriptor.type?i("input",{staticClass:"textfield",attrs:{disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.emitValue(arguments[0].target.value)}}}):e._e(),e._v(" "),"number"===e.descriptor.type?i("NumberTextfield",{attrs:{value:e.value,disabled:e.disabled,min:e.minValue,max:e.maxValue},on:{changed:function(t){return e.emitValue(arguments[0])}}}):e._e(),e._v(" "),"color"===e.descriptor.type?i("ColorPicker",{attrs:{editorId:e.editorId,color:e.value,disabled:e.disabled},on:{input:function(t){return e.emitValue(arguments[0])}}}):e._e(),e._v(" "),"advanced-color"===e.descriptor.type?i("AdvancedColorEditor",{attrs:{editorId:e.editorId,value:e.value,disabled:e.disabled},on:{changed:function(t){return e.emitValue(arguments[0])}}}):e._e(),e._v(" "),"boolean"===e.descriptor.type?i("input",{attrs:{type:"checkbox",disabled:e.disabled},domProps:{checked:e.value},on:{input:function(t){return e.emitValue(arguments[0].srcElement.checked)}}}):e._e(),e._v(" "),"choice"===e.descriptor.type?i("select",{attrs:{disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.emitValue(arguments[0].target.value)}}},e._l(e.descriptor.options,(function(t){return i("option",[e._v(e._s(t))])})),0):e._e(),e._v(" "),"stroke-pattern"===e.descriptor.type?i("StrokePatternDropdown",{attrs:{editorId:e.editorId,value:e.value,disabled:e.disabled},on:{selected:function(t){return e.emitValue(arguments[0])}}}):e._e(),e._v(" "),"path-cap"===e.descriptor.type?i("PathCapDropdown",{attrs:{value:e.value,"is-source":!e.leftOriented,"is-thick":e.isThickConnector,width:"16px",height:16,disabled:e.disabled},on:{selected:function(t){return e.emitValue(arguments[0])}}}):e._e(),e._v(" "),"element"===e.descriptor.type?i("ElementPicker",{attrs:{editorId:e.editorId,element:e.value,"use-self":!1,"allow-none":!0,"scheme-container":e.schemeContainer,disabled:e.disabled,"excluded-item-ids":[e.itemId]},on:{selected:function(t){return e.emitValue(arguments[0])}}}):e._e(),e._v(" "),"scheme-ref"===e.descriptor.type?i("DiagramPicker",{key:"item-props-diagram-picker-"+e.itemId+"-"+e.value,attrs:{diagramId:e.value,disabled:e.disabled},on:{"diagram-selected":e.onDiagramPicked}}):e._e(),e._v(" "),"color-matrix"===e.descriptor.type?i("ColorMatrix",{attrs:{matrix:e.value},on:{changed:function(t){return e.emitValue(arguments[0])}}}):e._e()],1)};jp._withStripped=!0;var zp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("dropdown",{attrs:{options:e.patternOptions},on:{selected:function(t){return e.$emit("selected",arguments[0].name)}}},[i("div",{domProps:{innerHTML:e._s(e.selectedPatternHtml)}})])};zp._withStripped=!0;const Up=[];(0,Fe.Ed)(Sd.Z.patterns,(e=>{Up.push({name:e,html:Sd.Z.generateStrokeHtml(e,2,15,150,30)})}));const Hp={props:{value:{type:String},width:{type:Number,default:140}},components:{Dropdown:wd.Z},data:()=>({patternOptions:Uc.Z.clone(Up)}),computed:{selectedPatternHtml(){return Sd.Z.generateStrokeHtml(this.value,2,6,this.width,15)}}},qp=(0,Re.Z)(Hp,zp,[],!1,null,null,null).exports;var Wp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"color-matrix"},[i("div",{staticClass:"color-component-selector"},[i("div",{staticClass:"ctrl-label"},[e._v("Channel")]),e._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:e.currentComponent,expression:"currentComponent"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.currentComponent=t.target.multiple?i:i[0]}}},e._l(e.colorComponents,(function(t){return i("option",{domProps:{value:t}},[e._v(e._s(t))])})),0)]),e._v(" "),i("div",{staticClass:"ctrl-label"},[e._v("Channel impact")]),e._v(" "),i("div",{staticClass:"color-component-inputs"},[i("div",{staticClass:"color-component-field"},[i("span",{staticClass:"label"},[e._v(e._s(e.currentComponent)+" to red")]),e._v(" "),i("div",[i("div",{staticClass:"slider-container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.red,expression:"red"}],staticClass:"slider",attrs:{type:"range",min:"-200",max:"200"},domProps:{value:e.red},on:{input:function(t){return e.onSliderChange("red",arguments[0].target.value)},__r:function(t){e.red=t.target.value}}}),e._v(" "),i("input",{staticClass:"slider-text",attrs:{type:"text"},domProps:{value:e.redText},on:{input:function(t){return e.onSliderTextChange("red",arguments[0].target.value)}}})])])]),e._v(" "),i("div",{staticClass:"color-component-field"},[i("span",{staticClass:"label"},[e._v(e._s(e.currentComponent)+" to green")]),e._v(" "),i("div",[i("div",{staticClass:"slider-container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.green,expression:"green"}],staticClass:"slider",attrs:{type:"range",min:"-200",max:"200"},domProps:{value:e.green},on:{input:function(t){return e.onSliderChange("green",arguments[0].target.value)},__r:function(t){e.green=t.target.value}}}),e._v(" "),i("input",{staticClass:"slider-text",attrs:{type:"text"},domProps:{value:e.greenText},on:{input:function(t){return e.onSliderTextChange("green",arguments[0].target.value)}}})])])]),e._v(" "),i("div",{staticClass:"color-component-field"},[i("span",{staticClass:"label"},[e._v(e._s(e.currentComponent)+" to blue")]),e._v(" "),i("div",[i("div",{staticClass:"slider-container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.blue,expression:"blue"}],staticClass:"slider",attrs:{type:"range",min:"-200",max:"200"},domProps:{value:e.blue},on:{input:function(t){return e.onSliderChange("blue",arguments[0].target.value)},__r:function(t){e.blue=t.target.value}}}),e._v(" "),i("input",{staticClass:"slider-text",attrs:{type:"text"},domProps:{value:e.blueText},on:{input:function(t){return e.onSliderTextChange("blue",arguments[0].target.value)}}})])])]),e._v(" "),i("div",{staticClass:"color-component-field"},[i("span",{staticClass:"label"},[e._v(e._s(e.currentComponent)+" to alpha")]),e._v(" "),i("div",[i("div",{staticClass:"slider-container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.alpha,expression:"alpha"}],staticClass:"slider",attrs:{type:"range",min:"-200",max:"200"},domProps:{value:e.alpha},on:{input:function(t){return e.onSliderChange("alpha",arguments[0].target.value)},__r:function(t){e.alpha=t.target.value}}}),e._v(" "),i("input",{staticClass:"slider-text",attrs:{type:"text"},domProps:{value:e.alphaText},on:{input:function(t){return e.onSliderTextChange("alpha",arguments[0].target.value)}}})])])])])])};Wp._withStripped=!0;const Vp={red:0,green:1,blue:2,alpha:3},Gp={props:["matrix"],components:{},data(){return{colorComponents:["red","green","blue","alpha"],currentComponent:"red",red:100*this.matrix[0][0],green:100*this.matrix[0][1],blue:100*this.matrix[0][2],alpha:100*this.matrix[0][3],redText:this.matrix[0][0],greenText:this.matrix[0][1],blueText:this.matrix[0][2],alphaText:this.matrix[0][3]}},methods:{selectColorComponent(e){const t=Vp[e];this.red=100*this.matrix[t][0],this.green=100*this.matrix[t][1],this.blue=100*this.matrix[t][2],this.alpha=100*this.matrix[t][3],this.redText=this.red/100,this.greenText=this.green/100,this.blueText=this.blue/100,this.alphaText=this.alpha/100,this.$forceUpdate()},onValueChange(e,t){const i=Vp[this.currentComponent],n=Uc.Z.clone(this.matrix);n[i][e]=t/100,this.$emit("changed",n)},onSliderTextChange(e,t){let i=parseFloat(t);isNaN(i)&&(i=0);const n=zh.Z.clamp(i,-2,2);"red"===e?(this.red=100*n,this.redText=t):"green"===e?(this.green=100*n,this.greenText=t):"blue"===e?(this.blue=100*n,this.blueText=t):"alpha"===e&&(this.alpha=100*n,this.alphaText=t)},onSliderChange(e,t){"red"===e?this.redText=t/100:"green"===e?this.greenText=t/100:"blue"===e?this.blueText=t/100:"alpha"===e&&(this.alphaText=t/100)}},watch:{currentComponent(e){this.selectColorComponent(e)},red(e){this.onValueChange(0,e)},green(e){this.onValueChange(1,e)},blue(e){this.onValueChange(2,e)},alpha(e){this.onValueChange(3,e)}}},Kp=Gp,Jp=(0,Re.Z)(Kp,Wp,[],!1,null,null,null).exports,Yp={props:{editorId:{type:String,required:!0},descriptor:{type:Object,required:!0},schemeContainer:{type:Object,required:!0},value:[Number,String,Object,Boolean],disabled:{type:Boolean,default:!1},leftOriented:{type:Boolean,default:!1},itemId:{type:String,defalut:null,required:!1},shapeProps:{type:Object,required:!1}},components:{NumberTextfield:fd.Z,ColorPicker:Fu.Z,AdvancedColorEditor:Ku.Z,StrokePatternDropdown:qp,PathCapDropdown:hp,ElementPicker:Vu,ColorMatrix:Jp,DiagramPicker:tp},methods:{emitValue(e){this.$emit("input",e)},onDiagramPicked(e){this.emitValue(e.id)}},computed:{minValue(){return this.descriptor.hasOwnProperty("min")?this.descriptor.min:null},maxValue(){return this.descriptor.hasOwnProperty("max")?this.descriptor.max:null},isThickConnector(){return!(!this.shapeProps||!this.shapeProps.thick)}}},Qp=(0,Re.Z)(Yp,jp,[],!1,null,null,null).exports,Xp={props:["editorId","effectId","effectArgs","schemeContainer"],components:{PropertyInput:Qp,Tooltip:Cu.Z},data(){const e=$d(this.effectId);return{effectArgDefinitions:Uc.Z.clone(e.args)}},methods:{onPropChange(e,t){this.$emit("effect-arg-changed",e,t)}}},em=(0,Re.Z)(Xp,Fp,[],!1,null,null,null).exports;function tm(){const e=[];return(0,Fe.Ed)(Md(),((t,i)=>{e.push({id:i,name:t.name})})),e}const im={components:{Modal:je.Z,EffectEditor:em},props:{editorId:{type:String,required:!0},title:{type:String,default:"Add effect"},isAdding:{type:Boolean,default:!0},effectId:{type:String,required:!0},effectArgs:{type:Object,required:!0},schemeContainer:{type:Object,required:!0}},data(){const e=$d(this.effectId);return{knownEffects:tm(),effectName:e.name,description:e.description}},methods:{addEffect(){this.$emit("effect-submited",{id:jl().generate(),effect:this.effectId,name:this.effectName,args:this.effectArgs})},onEffectArgEdited(e,t){this.$emit("effect-arg-changed",e,t)},onEffectIdChanged(e){this.$emit("effect-id-changed",e)}},watch:{effectName(e){this.$emit("effect-name-changed",e)}}},nm=(0,Re.Z)(im,Zp,[],!1,null,null,null).exports;var rm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"hint hint-small"},[e._v("\n        Auto-layout lets you define rules by which the positioning of the item should be adjusted, depending on the changes in the document\n    ")]),e._v(" "),e.item.autoLayout&&e.item.autoLayout.on?i("div",[i("span",{staticClass:"btn btn-danger",on:{click:e.turnAutoLayoutOff}},[e._v("Disable auto-layout")]),e._v(" "),i("div",{staticClass:"auto-layout-editor-plot"},[i("table",[i("tbody",[i("tr",[i("td"),e._v(" "),i("td",{staticClass:"guide-top guide-side",class:["guide-type-"+e.topGuide.type]},[i("div",{staticClass:"guide-container"},[i("span",{staticClass:"guide"}),e._v(" "),i("GuideLabel",{key:e.topGuide.id,attrs:{guide:e.topGuide,guideOptions:e.sideVerticalGuideOptions},on:{"value-changed":function(t){return e.onGuideValueChange(arguments[0],"top","relTop")},"type-selected":e.onTopTypeChange}})],1)]),e._v(" "),i("td")]),e._v(" "),i("tr",[i("td",{staticClass:"guide-left guide-side",class:["guide-type-"+e.leftGuide.type]},[i("div",{staticClass:"guide-container"},[i("span",{staticClass:"guide"}),e._v(" "),i("GuideLabel",{key:e.leftGuide.id,attrs:{guide:e.leftGuide,guideOptions:e.sideHorizontalGuideOptions},on:{"value-changed":function(t){return e.onGuideValueChange(arguments[0],"left","relLeft")},"type-selected":e.onLeftTypeChange}})],1)]),e._v(" "),i("td",{staticClass:"guide-center"},[i("div",{staticClass:"guide-container"},[i("div",{staticClass:"box"},[i("GuideLabel",{key:e.widthGuide.id,staticClass:"label-width",attrs:{guide:e.widthGuide,guideOptions:e.sizeGuideOptions},on:{"value-changed":function(t){return e.onGuideValueChange(arguments[0],"width","relWidth")},"type-selected":e.onWidthTypeChange}},[i("i",{staticClass:"label-width-arrow fa-solid fa-angle-right"})]),e._v(" "),i("GuideLabel",{key:e.heightGuide.id,staticClass:"label-height",attrs:{guide:e.heightGuide,guideOptions:e.sizeGuideOptions},on:{"value-changed":function(t){return e.onGuideValueChange(arguments[0],"height","relHeight")},"type-selected":e.onHeightTypeChange}},[i("i",{staticClass:"label-height-arrow fa-solid fa-angle-down"})])],1)])]),e._v(" "),i("td",{staticClass:"guide-right guide-side",class:["guide-type-"+e.rightGuide.type]},[i("div",{staticClass:"guide-container"},[i("span",{staticClass:"guide"}),e._v(" "),i("GuideLabel",{key:e.rightGuide.id,attrs:{guide:e.rightGuide,guideOptions:e.sideHorizontalGuideOptions},on:{"value-changed":function(t){return e.onGuideValueChange(arguments[0],"right","relRight")},"type-selected":e.onRightTypeChange}})],1)])]),e._v(" "),i("tr",[i("td"),e._v(" "),i("td",{staticClass:"guide-bottom guide-side",class:["guide-type-"+e.bottomGuide.type]},[i("div",{staticClass:"guide-container"},[i("span",{staticClass:"guide"}),e._v(" "),i("GuideLabel",{key:e.bottomGuide.id,attrs:{guide:e.bottomGuide,guideOptions:e.sideVerticalGuideOptions},on:{"value-changed":function(t){return e.onGuideValueChange(arguments[0],"bottom","relBottom")},"type-selected":e.onBottomTypeChange}})],1)]),e._v(" "),i("td")])])])])]):i("div",[e.autoLayoutAllowed?e._e():i("div",{staticClass:"msg msg-info"},[e._v("\n            Auto-layout is not available for this item. To make use of auto-layout make sure that the item is attached to any other item.\n        ")]),e._v(" "),i("span",{staticClass:"btn btn-secondary",class:{disabled:!e.autoLayoutAllowed},on:{click:e.turnAutoLayoutOn}},[e._v("Enable auto-layout")])])])};rm._withStripped=!0;var sm=i(9087),om=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"label"},[e.guide.number?i("span",{ref:"input",staticClass:"guide-input",attrs:{contenteditable:"true"},on:{keypress:e.onValueKeyPress,keyup:e.onValueKeyUp}},[e._v(e._s(e.guide.value))]):e._e(),e._v(" "),i("Dropdown",{attrs:{inline:!0,borderless:!0,hoverEffect:!1,searchEnabled:!1,options:e.filteredOptions},on:{selected:e.onGuideTypeSelected}},[i("i",{class:e.guide.icon})]),e._v(" "),e._t("default")],2)};om._withStripped=!0;const am={props:{guide:{type:Object,required:!0},guideOptions:{type:Array,required:!0}},components:{Dropdown:wd.Z},data(){return{filteredOptions:this.guideOptions.filter((e=>e.type!==this.guide.type))}},methods:{onGuideTypeSelected(e){this.$emit("type-selected",e)},onValueKeyPress(e){const t=e.charCode;(t<45||t>57||47===t)&&e.preventDefault()},onValueKeyUp(e){const t=parseInt(this.$refs.input.innerHTML);isNaN(t)||this.$emit("value-changed",t)}}},lm=am,cm=(0,Re.Z)(lm,om,[],!1,null,null,null).exports,hm="fa-solid fa-xmark",dm="fa-solid fa-ruler-combined",um="fa-solid fa-percent",pm="fa-solid fa-left-right",mm="fa-solid fa-up-down",fm={props:{item:{type:Object,required:!0},editorId:{type:String,required:!0},schemeContainer:{type:Object,required:!0}},components:{ElementPicker:Vu,NumberTextfield:fd.Z,GuideLabel:cm},data(){const e=this.item.meta&&this.item.meta.parentId?this.schemeContainer.findItemById(this.item.meta.parentId):null;return{autoLayoutAllowed:!!e,parentItem:e,leftGuide:this.buildLeftGuide(),rightGuide:this.buildRightGuide(),topGuide:this.buildTopGuide(),bottomGuide:this.buildBottomGuide(),widthGuide:this.buildWidthGuide(),heightGuide:this.buildHeightGuide(),sideHorizontalGuideOptions:[{type:"removed",name:"Remove",iconClass:hm},{type:"absolute",name:"Absolute",iconClass:dm},{type:"relative",name:"Relative",iconClass:um},{type:"centered",name:"Centered",iconClass:pm}],sideVerticalGuideOptions:[{type:"removed",name:"Remove",iconClass:hm},{type:"absolute",name:"Absolute",iconClass:dm},{type:"relative",name:"Relative",iconClass:um},{type:"centered",name:"Centered",iconClass:mm}],sizeGuideOptions:[{type:"removed",name:"Remove",iconClass:hm},{type:"absolute",name:"Absolute",iconClass:dm},{type:"relative",name:"Relative",iconClass:um}]}},methods:{updateItem(){this.schemeContainer.readjustItemAndDescendants(this.item.id),this.schemeContainer.updateEditBox(),this.schemeContainer.reindexItems(),mh.Z.item.changed.specific.$emit(this.editorId,this.item.id,"area"),mh.Z.schemeChangeCommitted.$emit(this.editorId,`items.${this.item.id}.autoLayout`)},rebuildAllGuides(){this.leftGuide=this.buildLeftGuide(),this.rightGuide=this.buildRightGuide(),this.topGuide=this.buildTopGuide(),this.bottomGuide=this.buildBottomGuide(),this.widthGuide=this.buildWidthGuide(),this.heightGuide=this.buildHeightGuide()},onTopTypeChange(e){"centered"===e.type?(0,sm.wK)(this.item,this.parentItem):"removed"===e.type?(0,sm.rh)(this.item,this.parentItem):"absolute"===e.type?(0,sm.Xs)(this.item,this.parentItem):"relative"===e.type&&(0,sm.vZ)(this.item,this.parentItem),this.updateItem(),this.rebuildAllGuides()},onBottomTypeChange(e){"centered"===e.type?(0,sm.wK)(this.item,this.parentItem):"removed"===e.type?(0,sm.tA)(this.item,this.parentItem):"absolute"===e.type?(0,sm.u1)(this.item,this.parentItem):"relative"===e.type&&(0,sm.ZU)(this.item,this.parentItem),this.updateItem(),this.rebuildAllGuides()},onLeftTypeChange(e){"centered"===e.type?(0,sm.X9)(this.item,this.parentItem):"removed"===e.type?(0,sm.BH)(this.item,this.parentItem):"absolute"===e.type?(0,sm.ks)(this.item,this.parentItem):"relative"===e.type&&(0,sm.RL)(this.item,this.parentItem),this.updateItem(),this.rebuildAllGuides()},onRightTypeChange(e){"centered"===e.type?(0,sm.X9)(this.item,this.parentItem):"removed"===e.type?(0,sm.xH)(this.item,this.parentItem):"absolute"===e.type?(0,sm.Yn)(this.item,this.parentItem):"relative"===e.type&&(0,sm.zD)(this.item,this.parentItem),this.updateItem(),this.rebuildAllGuides()},onWidthTypeChange(e){"removed"===e.type?(0,sm.vf)(this.item,this.parentItem):"absolute"===e.type?(0,sm.qO)(this.item,this.parentItem):"relative"===e.type&&(0,sm.o0)(this.item,this.parentItem),this.updateItem(),this.rebuildAllGuides()},onHeightTypeChange(e){"removed"===e.type?(0,sm.sM)(this.item,this.parentItem):"absolute"===e.type?(0,sm.SU)(this.item,this.parentItem):"relative"===e.type&&(0,sm.A9)(this.item,this.parentItem),this.updateItem(),this.rebuildAllGuides()},onGuideValueChange(e,...t){for(let i=0;i<t.length;i++){const n=t[i];if(this.item.autoLayout.rules.hasOwnProperty(n))return this.item.autoLayout.rules[n]=e,this.schemeContainer.readjustItemAndDescendants(this.item.id),mh.Z.schemeChangeCommitted.$emit(this.editorId,`items.${this.item.id}.autoLayout`),this.schemeContainer.updateEditBox(),void this.schemeContainer.delayFullReindex()}},turnAutoLayoutOn(){this.parentItem&&(this.item.autoLayout=(0,sm.So)(this.item,this.parentItem),this.updateItem(),this.rebuildAllGuides())},turnAutoLayoutOff(){this.item.autoLayout?(this.item.autoLayout.on=!1,this.item.autoLayout.rules={},this.updateItem(),this.rebuildAllGuides()):this.item.autoLayout={on:!1,rules:{}}},buildLeftGuide(){return this.item.autoLayout.rules.hasOwnProperty("left")?{id:jl().generate(),type:"absolute",value:this.item.autoLayout.rules.left,number:!0,icon:dm}:this.item.autoLayout.rules.hasOwnProperty("relLeft")?{id:jl().generate(),type:"relative",value:this.item.autoLayout.rules.relLeft,number:!0,icon:um}:this.item.autoLayout.rules.hcenter?{id:jl().generate(),type:"centered",value:"",icon:pm}:{id:jl().generate(),type:"removed",value:"",icon:hm}},buildRightGuide(){return this.item.autoLayout.rules.hasOwnProperty("right")?{id:jl().generate(),type:"absolute",value:this.item.autoLayout.rules.right,number:!0,icon:dm}:this.item.autoLayout.rules.hasOwnProperty("relRight")?{id:jl().generate(),type:"relative",value:this.item.autoLayout.rules.relRight,number:!0,icon:um}:this.item.autoLayout.rules.hcenter?{id:jl().generate(),type:"centered",value:"",icon:pm}:{id:jl().generate(),type:"removed",value:"",icon:hm}},buildTopGuide(){return this.item.autoLayout.rules.hasOwnProperty("top")?{id:jl().generate(),type:"absolute",value:this.item.autoLayout.rules.top,number:!0,icon:dm}:this.item.autoLayout.rules.hasOwnProperty("relTop")?{id:jl().generate(),type:"relative",value:this.item.autoLayout.rules.relTop,number:!0,icon:um}:this.item.autoLayout.rules.vcenter?{id:jl().generate(),type:"centered",value:"",icon:mm}:{id:jl().generate(),type:"removed",value:"",icon:hm}},buildBottomGuide(){return this.item.autoLayout.rules.hasOwnProperty("bottom")?{id:jl().generate(),type:"absolute",value:this.item.autoLayout.rules.bottom,number:!0,icon:dm}:this.item.autoLayout.rules.hasOwnProperty("relBottom")?{id:jl().generate(),type:"relative",value:this.item.autoLayout.rules.relBottom,number:!0,icon:um}:this.item.autoLayout.rules.vcenter?{id:jl().generate(),type:"centered",value:"",icon:mm}:{id:jl().generate(),type:"removed",value:"",icon:hm}},buildWidthGuide(){return this.item.autoLayout.rules.hasOwnProperty("width")?{id:jl().generate(),type:"absolute",value:this.item.autoLayout.rules.width,number:!0,icon:dm}:this.item.autoLayout.rules.hasOwnProperty("relWidth")?{id:jl().generate(),type:"relative",value:this.item.autoLayout.rules.relWidth,number:!0,icon:um}:{id:jl().generate(),type:"removed",value:"",icon:hm}},buildHeightGuide(){return this.item.autoLayout.rules.hasOwnProperty("height")?{id:jl().generate(),type:"absolute",value:this.item.autoLayout.rules.height,number:!0,icon:dm}:this.item.autoLayout.rules.hasOwnProperty("relHeight")?{id:jl().generate(),type:"relative",value:this.item.autoLayout.rules.relHeight,number:!0,icon:um}:{id:jl().generate(),type:"removed",value:"",icon:hm}}},computed:{}},gm=fm,vm=(0,Re.Z)(gm,rm,[],!1,null,null,null).exports,ym=[{name:"description",displayName:"Description",icon:"fas fa-paragraph"},{name:"shape",displayName:"Shape Properties",icon:"fas fa-vector-square"},{name:"behavior",displayName:"Behavior (Script)",icon:"fas fa-running"},{name:"auto-layout",displayName:"Auto-layout",icon:"fa-solid fa-ruler"},{name:"effects",displayName:"Effects",icon:"fa-solid fa-wand-magic-sparkles"},{name:"styles",displayName:"Style Palette",icon:"fas fa-palette"}],xm=(0,Fe.UI)(ym,(e=>e.name)),bm=Wc("tabs-state",100),wm={props:{editorId:{type:String,required:!0},item:{type:Object},schemeContainer:{type:Object},userStylesEnabled:{type:Boolean,default:!1}},components:{Panel:wu,Tooltip:Cu.Z,ColorPicker:Fu.Z,PositionPanel:Tu,LinksPanel:Zu,GeneralPanel:Au,BehaviorProperties:kp,AdvancedBehaviorProperties:Ap,StylesPalette:Np,NumberTextfield:fd.Z,EditEffectModal:nm,PropertyInput:Qp,AutoLayoutProperties:vm},beforeMount(){let e=bm.get(this.schemeContainer.scheme.id,xm[0]);(0,Fe.cq)(xm,e)<0&&(e=xm[0]),this.currentTab=e,mh.Z.behaviorPanel.requested.$on(this.editorId,this.onBehaviorPanelRequested),mh.Z.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChanged)},beforeDestroy(){mh.Z.behaviorPanel.requested.$off(this.editorId,this.onBehaviorPanelRequested),mh.Z.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChanged)},mounted(){this.oldShape=this.item.shape,this.shapeComponent=Id.Z.find(this.item.shape),this.updateShapePropsDependencies()},data(){const e=Id.Z.find(this.item.shape),t=Id.Z.getShapeIds();return t.sort(),{tabs:ym,knownCursors:["default","pointer","grab","crosshair","not-allowed","zoom-in","help","wait","text"],knownShapes:t,currentTab:"description",shapeComponent:e,oldShape:this.item.shape,knownBlendModes:Uc.Z.clone(_p.W),shapePropsControlStates:e?(0,Fe.O3)(e.args,(()=>({shown:!0}))):{},knownInteractionModes:fh.pp.values(),behaviorPanelRevision:1,editEffectModal:{effectId:"drop-shadow",isAdding:!0,shown:!1,currentEffectIndex:-1,effectArgs:{}},shapePropsEditorKey:1}},methods:{updateCurrentItem(e,t){this.schemeContainer.updateItem(this.item.id,e,t)},onItemChanged(){this.shapePropsEditorKey+=1,this.$forceUpdate()},emitItemFieldChange(e,t){this.$emit("item-field-changed",e,t)},onItemMutated(){mh.Z.item.changed.specific.$emit(this.editorId,this.item.id),mh.Z.schemeChangeCommitted.$emit(this.editorId),this.updateShapePropsDependencies(),this.$forceUpdate()},onShapePropChange(e,t,i){this.updateCurrentItem(`shapeProps.${e}`,(n=>{const r=Id.Z.find(n.shape);if(r&&r.args[e]){const t=r.args[e];if(t.onUpdate){const r=n.shapeProps[e];n.shapeProps[e]=i,t.onUpdate(this.$store,n,i,r),mh.Z.item.changed.specific.$emit(this.editorId,n.id,`shapeProps.${e}`)}}"color"!==t&&"advanced-color"!==t&&this.schemeContainer.updateEditBox(),this.$emit("shape-prop-changed",e,t,i),this.updateShapePropsDependencies(),this.$forceUpdate()}))},updateShapePropsDependencies(){this.shapeComponent&&(0,Fe.Ed)(this.shapeComponent.args,((e,t)=>{if(e.depends){let i=!0;(0,Fe.Ed)(e.depends,((e,t)=>{if(Array.isArray(e)){let n=!1;for(let i=0;i<e.length&&!n;i++)n=this.item.shapeProps[t]===e[i];i&=n}else i&=this.item.shapeProps[t]===e})),this.shapePropsControlStates[t]?this.shapePropsControlStates[t].shown=i:this.shapePropsControlStates[t]={shown:i}}}))},isArgumentHidden:e=>"path-points"===e.type||"animations"===e.type||e.hasOwnProperty("hidden")&&!0===e.hidden,onStyleApplied(e){this.$emit("item-style-applied",e)},onPositionPanelAreaChanged(e,t){const i=this.schemeContainer.editBox;if(i){if("w"===e||"h"===e)i.area[e]=t,this.schemeContainer.updateEditBoxItems(i,!1,Nd.pf),1===i.items.length&&nh.Z.setItemControlPoints(this.$store,i.items[0]);else if("r"===e){i.area.r=t;const e=zh.Z.worldPointInArea(i.pivotPoint.x*i.area.w,i.pivotPoint.y*i.area.h,i.area);i.area.x+=i.worldPivotPoint.x-e.x,i.area.y+=i.worldPivotPoint.y-e.y,this.schemeContainer.updateEditBoxItems(i,!1,Nd.hG)}else i.area[e]=t,this.schemeContainer.updateEditBoxItems(i,!1,Nd.W4);mh.Z.schemeChangeCommitted.$emit(this.editorId,`editbox.area.${e}`)}},onPositionPanelScaleChanged(e,t){if(this.schemeContainer.editBox&&1===this.schemeContainer.editBox.items.length){const i=this.schemeContainer.editBox.items[0];e>0&&(i.area.sx=e),t>0&&(i.area.sy=t),mh.Z.item.changed.specific.$emit(this.editorId,i.id,"area.sx"),mh.Z.schemeChangeCommitted.$emit(this.editorId,"editbox.area.s"),this.schemeContainer.updateEditBoxAreaOnly(),this.schemeContainer.updateChildTransforms(this.schemeContainer.editBox.items[0]),mh.Z.editBox.updated.$emit(this.editorId)}},onJumpedToItem(e){e&&this.schemeContainer.selectItem(e)},onBehaviorPanelRequested(){this.behaviorPanelRevision+=1,this.currentTab="behavior"},startAddingEffect(){this.updateCurrentItem("effects",(e=>{const t="drop-shadow",i=$d(t);this.editEffectModal.effectArgs=Td(i),e.effects.push({id:jl().generate(),effect:t,name:i.name,args:this.editEffectModal.effectArgs}),this.editEffectModal.isAdding=!0,this.editEffectModal.effectId=t,this.editEffectModal.shown=!0,this.editEffectModal.currentEffectIndex=e.effects.length-1,mh.Z.item.changed.specific.$emit(this.editorId,e.id,"effects")}))},effectModalClosed(){const e=this.editEffectModal.currentEffectIndex;this.updateCurrentItem(`effects.${e}`,(t=>{this.editEffectModal.isAdding&&(e>=0&&e<t.effects.length&&t.effects.splice(e,1),mh.Z.item.changed.specific.$emit(this.editorId,t.id,"effects"))})),this.editEffectModal.shown=!1,this.editEffectModal.currentEffectIndex=-1},onEffectArgChanged(e,t){const i=this.editEffectModal.currentEffectIndex;this.updateCurrentItem(`effects.${i}.args.${e}`,(n=>{i>=0&&i<n.effects.length&&(n.effects[i].args[e]=t),mh.Z.item.changed.specific.$emit(this.editorId,n.id,"effects"),this.editEffectModal.isAdding||mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${n.id}.effects`)}))},onEffectNameChanged(e){const t=this.editEffectModal.currentEffectIndex;this.updateCurrentItem(`effects.${t}`,(i=>{t>=0&&t<i.effects.length&&(i.effects[t].name=e)}))},onEffectSubmited(e){this.editEffectModal.shown=!1;const t=this.editEffectModal.currentEffectIndex;this.updateCurrentItem(`effects.${t}`,(i=>{this.editEffectModal.isAdding&&(t>=0&&t<i.effects.length&&(i.effects[t]=e),mh.Z.item.changed.specific.$emit(this.editorId,i.id,"effects"),mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${i.id}.effects`))}))},openEditEffectModal(e){this.editEffectModal.currentEffectIndex=e,this.editEffectModal.effectId=this.item.effects[e].effect,this.editEffectModal.isAdding=!1,this.editEffectModal.shown=!0,this.editEffectModal.effectArgs=this.item.effects[e].args},deleteEffect(e){this.updateCurrentItem(`effects.${e}`,(t=>{e<0||e>=t.effects.length||(t.effects.splice(e,1),mh.Z.item.changed.specific.$emit(this.editorId,t.id,"effects"),mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${t.id}.effects`))}))},onEffectIdChanged(e){this.updateCurrentItem(`effects.${idx}`,(t=>{if(this.editEffectModal.currentEffectIndex<0||this.editEffectModal.currentEffectIndex>=t.effects.length)return;const i=$d(e);this.editEffectModal.effectArgs=Td(i),this.editEffectModal.effectId=e,t.effects[this.editEffectModal.currentEffectIndex]={id:t.effects[this.editEffectModal.currentEffectIndex].id,effect:e,name:i.name,args:this.editEffectModal.effectArgs},mh.Z.item.changed.specific.$emit(this.editorId,t.id,"effects")}))}},computed:{isTemplatedChild(){return this.item.args&&this.item.args.templated&&!this.item.args.templateRef},hasShapeArgs(){const e=Id.Z.find(this.item.shape);return!(!e||!e.args)&&Object.keys(e.args).length>0}},watch:{currentTab(e){bm.save(this.schemeContainer.scheme.id,e)}},filters:{prettyEffectName:e=>e||"Unnamed Effect"}},Cm=wm,Pm=(0,Re.Z)(Cm,vu,[],!1,null,null,null).exports;var km=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"template-properties"},[e.isLoading?i("i",{staticClass:"fas fa-spinner fa-spin fa-1x"}):e._e(),e._v(" "),e.errorMessage?i("div",{staticClass:"msg msg-error"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),e.templateNotFound?i("div",{staticClass:"msg msg-error"},[e._v("Template for this item could not be found")]):e._e(),e._v(" "),e.template?i("div",[i("h4",[e._v(e._s(e.template.name))]),e._v(" "),e.template.description?i("p",{staticClass:"hint hint-small"},[e._v(e._s(e.template.description))]):e._e(),e._v(" "),e.template.args?i("ArgumentsEditor",{key:"item-"+e.item.id+"-template-args-"+e.reloadKey,attrs:{editorId:e.editorId,schemeContainer:e.schemeContainer,argsDefinition:e.template.args,args:e.args},on:{"argument-changed":e.onArgChanged}}):e._e(),e._v(" "),e._l(e.editorPanels,(function(t){return i("Panel",{key:"editor-panel-"+t.id,attrs:{name:t.name,uid:t.id}},["item-menu"===t.type?i("ul",{staticClass:"template-editor-panel-items-container"},e._l(t.items,(function(n){return i("li",{style:{width:t.slotSize.width+"px",height:t.slotSize.height+"px"},attrs:{title:n.name},on:{click:function(i){return e.onEditorPanelItemClicked(t,n)}}},[i("svg",{attrs:{width:t.slotSize.width+"px",height:t.slotSize.height+"px"}},[i("g",{attrs:{transform:"translate(4, 4)"}},[i("ItemSvg",{attrs:{editorId:e.editorId,item:n,mode:"edit"}})],1),e._v(" "),i("rect",{attrs:{x:"0",y:"0",width:t.slotSize.width+"px",height:t.slotSize.height+"px",fill:"rgba(0,0,0,0.0)",stroke:"none"}})])])})),0):e._e(),e._v(" "),"buttons"===t.type?i("ul",{staticClass:"properties-button-list"},e._l(t.buttons,(function(n){return i("li",[i("span",{staticClass:"btn btn-secondary",on:{click:function(i){return e.onEditorPanelItemClicked(t,n)}}},[e._v(e._s(n.name))])])})),0):e._e()])}))],2):e._e(),e._v(" "),i("div",{staticClass:"section"},[i("span",{staticClass:"btn btn-secondary",attrs:{title:"Updates all items with the latest changes in the template"},on:{click:e.updateTemplate}},[e._v("Update template")]),e._v(" "),i("span",{staticClass:"btn btn-danger",attrs:{title:"After the template is broken the items will not be regenerated"},on:{click:e.breakTemplate}},[e._v("Break template")])])])};km._withStripped=!0;const Sm={props:{item:{type:Object},templateRef:{type:String},schemeContainer:{type:Object},editorId:{type:String}},components:{ArgumentsEditor:up,ArgumentsEditor:up,ItemSvg:Ld,Panel:wu},beforeMount(){this.loadTemplate(),mh.Z.item.templateArgsUpdated.specific.$on(this.editorId,this.item.id,this.updateTemplateArgs)},beforeDestroy(){mh.Z.item.templateArgsUpdated.specific.$off(this.editorId,this.item.id,this.updateTemplateArgs)},data(){return{isLoading:!1,reloadKey:0,errorMessage:null,templateNotFound:!1,template:null,editorPanels:[],args:this.item.args&&this.item.args.templateArgs?this.item.args.templateArgs:{}}},methods:{onEditorPanelItemClicked(e,t){const i=e.click(t);if(this.template.args)for(let e in this.template.args)this.template.args.hasOwnProperty(e)&&(this.item.args.templateArgs[e]=i[e]);this.$emit("template-rebuild-requested",this.item.id,this.template,this.item.args.templateArgs),this.updateTemplateArgs()},updateTemplateArgs(){this.item.args&&this.item.args.templateArgs&&(this.args=this.item.args.templateArgs,this.reloadKey++)},loadTemplate(){this.templateNotFound=!1,this.isLoading=!0,this.schemeContainer.getTemplate(this.templateRef).then((e=>{this.isLoading=!1,this.template=e,e.argsDef&&(0,Fe.Ed)(e.argsDef,((e,t)=>{this.args.hasOwnProperty(t)||(this.args[t]=e.value)})),this.updateEditorPanels()})).catch((e=>{this.isLoading=!1,console.error(e),e.response&&404===e.response.status?this.templateNotFound=!0:this.errorMessage="Something went wrong, could not load template"}))},updateEditorPanels(){const e=[];(0,Fe.Ed)(this.schemeContainer.selectedItems,(t=>{t.meta.templateRootId===this.item.id&&e.push(t.args.templatedId)}));const t=this.template.buildEditor(this.item,this.args,this.item.area.w,this.item.area.h,e);this.editorPanels=t.panels},onArgChanged(e,t){this.item.args&&this.item.args.templateArgs&&(0,Fe.b0)(this.item.args.templateArgs,((t,i)=>{e!==i&&(this.args[i]=t)})),this.args[e]=t,this.$emit("updated",this.item.id,this.template,this.args),this.updateEditorPanels(),this.$forceUpdate()},breakTemplate(){this.$emit("break-template",this.item)},updateTemplate(){this.$emit("update-template",this.item.id,this.template,this.args)}},computed:{apiClient(){return this.$store.getters.apiClient}}},Im=Sm,Am=(0,Re.Z)(Im,km,[],!1,null,null,null).exports;var _m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.editor?i("editor-menu-bar",{attrs:{editor:e.editor},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.commands,r=t.isActive;return t.getMarkAttrs,[i("div",{staticClass:"rich-text-editor-menubar"},[i("span",{staticClass:"editor-icon",class:{"is-active":r.bold()},on:{click:n.bold}},[i("i",{staticClass:"fas fa-bold"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.italic()},on:{click:n.italic}},[i("i",{staticClass:"fas fa-italic"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.strike()},on:{click:n.strike}},[i("i",{staticClass:"fas fa-strikethrough"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.underline()},on:{click:n.underline}},[i("i",{staticClass:"fas fa-underline"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.code()},on:{click:n.code}},[i("i",{staticClass:"fas fa-code"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.heading({level:1})},on:{click:function(e){return n.heading({level:1})}}},[e._v("\n                H1\n            ")]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.heading({level:2})},on:{click:function(e){return n.heading({level:2})}}},[e._v("\n                H2\n            ")]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.heading({level:3})},on:{click:function(e){return n.heading({level:3})}}},[e._v("\n                H3\n            ")]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.bullet_list()},on:{click:n.bullet_list}},[i("i",{staticClass:"fas fa-list-ul"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.ordered_list()},on:{click:n.ordered_list}},[i("i",{staticClass:"fas fa-list-ol"})]),e._v(" "),i("span",{staticClass:"editor-icon",class:{"is-active":r.blockquote()},on:{click:n.blockquote}},[i("i",{staticClass:"fas fa-quote-left"})])])]}}],null,!1,3899355394)}):e._e(),e._v(" "),e.textSlot?i("div",[i("table",{staticClass:"properties-table"},[i("tbody",[i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Color")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("color-picker",{attrs:{editorId:e.editorId,color:e.textSlot.color},on:{input:function(t){return e.emitTextSlotPropertyChange("color",arguments[0])}}})],1)]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Bold")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("input",{attrs:{type:"checkbox"},domProps:{checked:e.textSlot.bold},on:{input:function(t){return e.emitTextSlotPropertyChange("bold",arguments[0].target.checked)}}})])]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Font")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("dropdown",{attrs:{options:e.allFonts,value:e.textSlot.font},on:{selected:function(t){return e.emitTextSlotPropertyChange("font",arguments[0].name)}}})],1)]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Font Size")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("number-textfield",{attrs:{value:e.textSlot.fontSize,min:0},on:{changed:function(t){return e.emitTextSlotPropertyChange("fontSize",arguments[0])}}})],1)]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Horizontal Align")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("ul",{staticClass:"button-group"},e._l(e.halignOptions,(function(t){return i("li",[i("span",{staticClass:"toggle-button",class:{toggled:e.textSlot.halign===t.value},attrs:{title:t.name},on:{click:function(i){return e.emitTextSlotPropertyChange("halign",t.value)}}},[i("i",{class:t.iconCss})])])})),0)])]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Vertical Align")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("ul",{staticClass:"button-group"},e._l(e.valignOptions,(function(t){return i("li",[i("span",{staticClass:"toggle-button",class:{toggled:e.textSlot.valign===t.value},attrs:{title:t.name},on:{click:function(i){return e.emitTextSlotPropertyChange("valign",t.value)}}},[i("i",{class:t.iconCss})])])})),0)])]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Padding Left")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("number-textfield",{attrs:{value:e.textSlot.paddingLeft},on:{changed:function(t){return e.emitTextSlotPropertyChange("paddingLeft",arguments[0])}}})],1)]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Padding Right")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("number-textfield",{attrs:{value:e.textSlot.paddingRight},on:{changed:function(t){return e.emitTextSlotPropertyChange("paddingRight",arguments[0])}}})],1)]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Padding Top")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("number-textfield",{attrs:{value:e.textSlot.paddingTop},on:{changed:function(t){return e.emitTextSlotPropertyChange("paddingTop",arguments[0])}}})],1)]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Padding Bottom")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("number-textfield",{attrs:{value:e.textSlot.paddingBottom},on:{changed:function(t){return e.emitTextSlotPropertyChange("paddingBottom",arguments[0])}}})],1)]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("White Space")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("select",{domProps:{value:e.textSlot.whiteSpace},on:{input:function(t){return e.emitTextSlotPropertyChange("whiteSpace",arguments[0].target.value)}}},e._l(e.supportedWhiteSpaceOptions,(function(t){return i("option",{domProps:{value:t.value}},[e._v(e._s(t.name))])})),0)])]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Letter spacing")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("number-textfield",{attrs:{value:e.textSlot.letterSpacing},on:{changed:function(t){return e.emitTextSlotPropertyChange("letterSpacing",arguments[0])}}})],1)]),e._v(" "),e._l(e.availableTextSlots,(function(t){return e.slotName===t||e.textSlotTabsDisabled?e._e():i("tr",[i("td",{attrs:{colspan:"2"}},[i("span",{staticClass:"btn btn-secondary",staticStyle:{width:"100%"},on:{click:function(i){return e.onMoveToSlotClicked(t)}}},[e._v('Move to "'+e._s(t)+'" slot')])])])}))],2)])]):e._e()],1)};_m._withStripped=!0;var Em=i(3086);const Tm={props:["item","editorId","slotName"],components:{EditorMenuBar:ka,Dropdown:wd.Z,NumberTextfield:fd.Z,ColorPicker:Fu.Z},beforeMount(){mh.Z.inPlaceTextEditor.created.$on(this.editorId,this.onTextEditorCreated),mh.Z.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChanged)},beforeDestroy(){mh.Z.inPlaceTextEditor.created.$off(this.editorId,this.onTextEditorCreated),mh.Z.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChanged)},data(){const e=Id.Z.find(this.item.shape);return{editor:null,textSlotTabsDisabled:e.editorProps&&e.editorProps.textSlotTabsDisabled,textSlot:this.item.textSlots[this.slotName],availableTextSlots:(0,Fe.UI)(e.getTextSlots(this.item),(e=>e.name)),allFonts:(0,Fe.UI)((0,Em._W)(),(e=>({name:e.name,style:{"font-family":e.family}}))),supportedWhiteSpaceOptions:fh.Ho,halignOptions:[{name:"Left",value:"left",iconCss:"fas fa-align-left"},{name:"Center",value:"center",iconCss:"fas fa-align-center"},{name:"Right",value:"right",iconCss:"fas fa-align-right"}],valignOptions:[{name:"Top",value:"top",iconCss:"schemio-icon schemio-icon-valign-top"},{name:"Middle",value:"middle",iconCss:"schemio-icon schemio-icon-valign-middle"},{name:"Bottom",value:"bottom",iconCss:"schemio-icon schemio-icon-valign-bottom"}]}},methods:{onItemChanged(e){e&&e.startsWith("textSlots.")&&(this.textSlot=this.item.textSlots[this.slotName],this.$forceUpdate())},onTextEditorCreated(e){this.editor=e},onMoveToSlotClicked(e){this.$emit("moved-to-slot",e)},emitTextSlotPropertyChange(e,t){this.$emit("property-changed",e,t)}}},Mm=(0,Re.Z)(Tm,_m,[],!1,null,null,null).exports;var $m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"item-details"},[i("h3",[e._v(e._s(e.item.name))]),e._v(" "),i("div",{domProps:{innerHTML:e._s(e.sanitizedItemDescription)}}),e._v(" "),e.item.links&&e.item.links.length>0?i("div",[i("h5",[e._v("Links")]),e._v(" "),i("ul",{staticClass:"links"},e._l(e.item.links,(function(t){return i("li",[i("a",{staticClass:"link",attrs:{href:t.url,target:"_blank"}},[i("i",{class:e.getLinkCssClass(t)}),e._v("\n                    "+e._s(e._f("formatLinkTitle")(t))+"\n                ")])])})),0)]):e._e()])};$m._withStripped=!0;const Om={props:["item"],methods:{getLinkCssClass:e=>Rd.Z.findTypeByNameOrDefault(e.type).cssClass},computed:{sanitizedItemDescription(){return(0,ph.Z)(this.item.description)}},filters:{formatLinkTitle:e=>e.title?e.title:e.url}},Dm=(0,Re.Z)(Om,$m,[],!1,null,null,null).exports;var Bm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.schemeContainer.scheme?i("div",[i("panel",{attrs:{name:"General"}},[i("h5",{staticClass:"section"},[e._v("Name")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.schemeContainer.scheme.name,expression:"schemeContainer.scheme.name"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Title ..."},domProps:{value:e.schemeContainer.scheme.name},on:{change:function(t){return e.onPropertyChange("name")},input:function(t){t.target.composing||e.$set(e.schemeContainer.scheme,"name",t.target.value)}}}),e._v(" "),e.schemeTagsEnabled?i("h5",{staticClass:"section"},[e._v("Tags")]):e._e(),e._v(" "),e.schemeTagsEnabled?i("vue-tags-input",{attrs:{tags:e.schemeTags,"autocomplete-items":e.filteredSchemeTags},on:{"tags-changed":e.onSchemeTagChange},model:{value:e.schemeTag,callback:function(t){e.schemeTag=t},expression:"schemeTag"}}):e._e(),e._v(" "),i("h5",{staticClass:"section"},[e._v("Description")]),e._v(" "),i("rich-text-editor",{attrs:{value:e.schemeContainer.scheme.description},on:{changed:function(t){e.schemeContainer.scheme.description=arguments[0],e.onPropertyChange("description")}}})],1),e._v(" "),i("panel",{attrs:{name:"Screen Settings"}},[i("table",{staticClass:"properties-table"},[i("tbody",[i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("\n                            Draggable\n                            "),i("tooltip",[e._v("\n                                Allows users to drag screen using mouse in view mode.\n                            ")])],1),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.screenSettings.draggable,expression:"screenSettings.draggable"}],attrs:{type:"checkbox",id:"chk-screen-draggable"},domProps:{checked:Array.isArray(e.screenSettings.draggable)?e._i(e.screenSettings.draggable,null)>-1:e.screenSettings.draggable},on:{change:function(t){var i=e.screenSettings.draggable,n=t.target,r=!!n.checked;if(Array.isArray(i)){var s=e._i(i,null);n.checked?s<0&&e.$set(e.screenSettings,"draggable",i.concat([null])):s>-1&&e.$set(e.screenSettings,"draggable",i.slice(0,s).concat(i.slice(s+1)))}else e.$set(e.screenSettings,"draggable",r)}}})])])])])]),e._v(" "),i("panel",{attrs:{name:"Style"}},[i("table",{staticClass:"properties-table"},[i("tbody",[i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Background")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("color-picker",{attrs:{editorId:e.editorId,color:e.schemeContainer.scheme.style.backgroundColor},on:{input:function(t){return e.onSchemeStylePropertyChange("backgroundColor",arguments[0])}}})],1)]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Grid")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("color-picker",{attrs:{editorId:e.editorId,color:e.schemeContainer.scheme.style.gridColor},on:{input:function(t){return e.onSchemeStylePropertyChange("gridColor",arguments[0])}}})],1)]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Bound box")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("color-picker",{attrs:{editorId:e.editorId,color:e.schemeContainer.scheme.style.boundaryBoxColor},on:{input:function(t){return e.onSchemeStylePropertyChange("boundaryBoxColor",arguments[0])}}})],1)]),e._v(" "),i("tr",[i("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Control points")]),e._v(" "),i("td",{staticClass:"value",attrs:{width:"50%"}},[i("color-picker",{attrs:{editorId:e.editorId,color:e.schemeContainer.scheme.style.controlPointsColor},on:{input:function(t){return e.onSchemeStylePropertyChange("controlPointsColor",arguments[0])}}})],1)])])])]),e._v(" "),i("panel",{attrs:{name:"Operations"}},[e.supportsSchemeDeletion?i("span",{staticClass:"btn btn-danger",on:{click:function(t){return e.$emit("delete-diagram-requested")}}},[e._v("Delete Diagram")]):e._e()])],1):e._e()])};Bm._withStripped=!0;const Lm={props:{editorId:{type:String,required:!0},schemeContainer:{type:Object},schemeTagsEnabled:{type:Boolean,default:!0}},components:{VueTagsInput:Su(),RichTextEditor:Ll,ColorPicker:Fu.Z,Panel:wu,Tooltip:Cu.Z},mounted(){this.$store.state.apiClient&&this.$store.state.apiClient.getTags&&this.$store.state.apiClient.getTags().then((e=>{this.existingSchemeTags=(0,Fe.UI)(e,(e=>({text:e})))}))},beforeDestroy(){},data(){return{schemeTag:"",existingSchemeTags:[],showDeleteSchemeWarning:!1,screenSettings:{draggable:this.schemeContainer.scheme.settings.screen.draggable}}},methods:{onSchemeStylePropertyChange(e,t){this.schemeContainer.scheme.style[e]=t,this.onPropertyChange(`scheme.style.${e}`)},onSchemeTagChange(e){this.schemeContainer.scheme.tags=(0,Fe.UI)(e,(e=>e.text)),this.onPropertyChange("tags")},onPropertyChange(e){mh.Z.schemeChangeCommitted.$emit(this.editorId,`scheme.${e}`)}},computed:{filteredSchemeTags(){const e=this.schemeTag.toLowerCase();return this.existingSchemeTags.filter((t=>t.text.toLowerCase().indexOf(e)>=0))},schemeTags(){return(0,Fe.UI)(this.schemeContainer.scheme.tags,(e=>({text:e})))},supportsSchemeDeletion(){return this.$store.state.apiClient&&this.$store.state.apiClient.deleteScheme}},watch:{"screenSettings.draggable":{handler(e){this.schemeContainer.scheme.settings.screen.draggable=e,mh.Z.schemeChangeCommitted.$emit(this.editorId,"scheme.settings.screen.draggable")}}}},Rm=(0,Re.Z)(Lm,Bm,[],!1,null,null,null).exports;var Nm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scheme-details"},[i("h3",[e._v(e._s(e.scheme.name))]),e._v(" "),i("div",{domProps:{innerHTML:e._s(e.sanitizedDescription)}})])};Nm._withStripped=!0;const Zm={props:["scheme"],data:()=>({}),computed:{sanitizedDescription(){return(0,ph.Z)(this.scheme.description)}}},Fm=(0,Re.Z)(Zm,Nm,[],!1,null,null,null).exports;var jm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"createItemMenu",staticClass:"create-item-menu"},[i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Search..."},domProps:{value:e.searchKeyword},on:{input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}}),e._v(" "),i("div",{staticClass:"item-menu"},[i("div",{staticClass:"item-container",attrs:{title:"Select/Drag"},on:{click:function(t){return e.initiateSelectAndDrag()}}},[i("img",{attrs:{src:e.assetsPath+"/images/icons/select.svg",width:"35",height:"30"}})]),e._v(" "),i("div",{staticClass:"item-container",attrs:{title:"Create Path"},on:{click:function(t){return e.initiatePathCreation()},mouseover:function(t){return e.showPreviewGif(t,"create-curve")},mouseleave:function(t){return e.stopPreviewGif("create-curve")}}},[i("img",{attrs:{src:e.assetsPath+"/images/icons/create-curve.svg",width:"35",height:"30"}})]),e._v(" "),i("div",{staticClass:"item-container",attrs:{title:"Pencil"},on:{click:function(t){return e.initiatePencilDrawing()},mouseover:function(t){return e.showPreviewGif(t,"draw")},mouseleave:function(t){return e.stopPreviewGif("draw")}}},[i("img",{attrs:{src:e.assetsPath+"/images/icons/draw.svg",width:"35",height:"30"}})]),e._v(" "),i("div",{staticClass:"item-container",attrs:{title:"Pen"},on:{click:function(t){return e.initiateBrushDrawing()},mouseover:function(t){return e.showPreviewGif(t,"brush-draw")},mouseleave:function(t){return e.stopPreviewGif("brush-draw")}}},[i("img",{attrs:{src:e.assetsPath+"/images/icons/brush-draw.svg",width:"35",height:"30"}})])]),e._v(" "),e._l(e.filteredItemPanels,(function(t){return t.items.length>0?i("panel",{attrs:{name:t.name}},[i("div",{staticClass:"item-menu"},e._l(t.items,(function(t){return i("div",{staticClass:"item-container",attrs:{title:t.name},on:{mouseleave:function(i){return e.stopPreviewItem(t)},mouseover:function(i){return e.showPreviewItem(t)},mousedown:function(i){return e.onItemMouseDown(i,t)},dragstart:e.preventEvent,drag:e.preventEvent}},[t.iconUrl?i("img",{attrs:{src:t.iconUrl,width:"42px",height:"32px"}}):t.iconSVG?i("svg",{attrs:{width:"42px",height:"32px"},domProps:{innerHTML:e._s(t.iconSVG)}}):e._e()])})),0)]):e._e()})),e._v(" "),e._l(e.extraShapeGroups,(function(t){return i("panel",{attrs:{name:t.name}},[i("div",{staticClass:"item-menu"},e._l(t.items,(function(t){return i("div",{staticClass:"item-container",attrs:{title:t.name},on:{mouseleave:function(i){return e.stopPreviewItem(t)},mouseover:function(i){return e.showExtraShapePreviewItem(t,t.id)},mousedown:function(i){return e.onItemMouseDown(i,t)},dragstart:e.preventEvent,drag:e.preventEvent}},[t.iconUrl?i("img",{attrs:{src:t.iconUrl,width:"42px",height:"32px"}}):t.iconSVG?i("svg",{attrs:{width:"42px",height:"32px"},domProps:{innerHTML:e._s(t.iconSVG)}}):e._e()])})),0)])})),e._v(" "),e._l(e.customItemMenuPanels,(function(t){return i("panel",{attrs:{name:t.name}},[i(t.component,{tag:"component",attrs:{"search-keyword":e.searchKeyword,"editor-id":e.editorId},on:{"stop-preview-item":e.stopPreviewItem,"show-preview-item":e.showPreviewItem,"item-mouse-down":e.onItemMouseDown}})],1)})),e._v(" "),e.projectArtEnabled?i("panel",{attrs:{name:"Project Art"}},[i("div",{staticClass:"buttons"},[i("span",{staticClass:"btn btn-primary",attrs:{title:"Upload art icon"},on:{click:function(t){e.customArtUploadModalShown=!0}}},[i("i",{staticClass:"fas fa-file-upload"})]),e._v(" "),i("span",{staticClass:"btn btn-primary",attrs:{title:"Edit art icons"},on:{click:function(t){e.editArtModalShown=!0}}},[i("i",{staticClass:"fas fa-pencil-alt"})])]),e._v(" "),i("div",{staticClass:"item-menu"},e._l(e.artList,(function(t){return!e.searchKeyword||e.safeTextMatchKeyword(t.name)?i("div",{staticClass:"item-container",on:{mouseover:function(i){return e.showPreviewArt(t)},mouseleave:function(i){return e.stopPreviewArt(t)},mousedown:function(i){return e.onArtMouseDown(i,t)},dragstart:e.preventEvent,drag:e.preventEvent}},[i("img",{attrs:{src:t.url}})]):e._e()})),0)]):e._e(),e._v(" "),e.templates||e.templatesLoading?i("panel",{attrs:{name:"Templates"}},[i("div",{staticClass:"buttons"},[i("span",{staticClass:"btn btn-secondary",on:{click:e.showExternalTemplateModal}},[i("i",{staticClass:"fa-solid fa-square-up-right"}),e._v(" External Template...")])]),e._v(" "),i("div",{staticClass:"item-menu"},e._l(e.templates,(function(t){return!e.searchKeyword||e.safeTextMatchKeyword(t.name)?i("div",{staticClass:"item-container item-container-template",on:{mouseover:function(i){return e.showPreviewTemplate(t)},mouseleave:function(i){return e.stopPreviewTemplate(t)},mousedown:function(i){return e.onTemplateMouseDown(i,t)},dragstart:e.preventEvent,drag:e.preventEvent}},[t.preview?i("img",{attrs:{src:t.preview}}):i("img",{attrs:{src:"assets/images/missing-preview.svg"}})]):e._e()})),0)]):e._e(),e._v(" "),e._l(e.filteredArtPacks,(function(t){return t.icons.length>0?i("panel",{attrs:{name:t.name,closable:!0},on:{close:function(i){return e.closeArtPack(t)}}},[i("div",{staticClass:"art-pack"},[t.author?i("div",{staticClass:"art-pack-author"},[e._v("\n                    Created by\n                    "),t.link?i("a",{attrs:{href:t.link}},[e._v(e._s(t.author))]):i("span",[e._v(e._s(t.author))])]):e._e(),e._v(" "),i("div",{staticClass:"item-menu"},e._l(t.icons,(function(t){return!e.searchKeyword||e.safeTextMatchKeyword(t.name)||e.safeTextMatchKeyword(t.description)?i("div",{staticClass:"item-container",on:{mouseover:function(i){return e.showPreviewArt(t)},mouseleave:function(i){return e.stopPreviewArt(t)},mousedown:function(i){return e.onArtMouseDown(i,t)},dragstart:e.preventEvent,drag:e.preventEvent}},[i("img",{attrs:{src:t.url,title:t.name+" "+t.description}})]):e._e()})),0)])]):e._e()})),e._v(" "),i("div",{staticClass:"section"},[i("span",{staticClass:"btn btn-secondary btn-block",on:{click:function(t){e.extraShapesModal.shown=!0}}},[e._v("More shapes ")])])],2),e._v(" "),e.imageCreation.popupShown?i("create-image-modal",{on:{close:function(t){e.imageCreation.popupShown=!1},"submit-image":function(t){return e.onImageSubmited(arguments[0])}}}):e._e(),e._v(" "),e.customArtUploadModalShown?i("custom-art-upload-modal",{on:{close:function(t){e.customArtUploadModalShown=!1},"art-created":e.onArtCreated}}):e._e(),e._v(" "),e.editArtModalShown?i("edit-art-modal",{attrs:{"art-list":e.artList},on:{close:function(t){e.editArtModalShown=!1}}}):e._e(),e._v(" "),e.errorMessage?i("modal",{attrs:{title:"Error"},on:{close:function(t){e.errorMessage=null}}},[e._v("\n        "+e._s(e.errorMessage)+"\n    ")]):e._e(),e._v(" "),e.extraShapesModal.shown?i("ExtraShapesModal",{on:{"art-pack-added":e.updateAllArtPacks,"extra-shapes-registered":e.updateAllPanels,close:function(t){e.extraShapesModal.shown=!1}}}):e._e(),e._v(" "),e.linkCreation.popupShown?i("LinkEditModal",{attrs:{edit:!1},on:{"submit-link":e.linkSubmited,close:function(t){e.linkCreation.popupShown=!1}}}):e._e(),e._v(" "),e.previewItem.shown?i("div",{staticClass:"preview-item",style:{left:e.previewItem.x+"px",top:e.previewItem.y+"px"}},[i("div",{staticClass:"item-container"},[e.previewItem.item?i("div",[i("h4",[e._v(e._s(e.previewItem.item.name))]),e._v(" "),e.previewItem.item.item?i("svg",{attrs:{width:e.previewWidth+"px",height:e.previewHeight+"px"}},[i("ItemSvg",{attrs:{editorId:e.editorId,item:e.previewItem.item.item,mode:"edit"}})],1):e._e()]):e._e(),e._v(" "),e.previewItem.artIcon?i("div",[i("h4",[e._v(e._s(e.previewItem.artIcon.name))]),e._v(" "),i("img",{staticClass:"preview-art",attrs:{src:e.previewItem.artIcon.url}})]):e._e(),e._v(" "),e.previewItem.gif?i("div",[i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e.assetsPath+"/images/animations/"+e.previewItem.gif+".gif"}})]):e._e(),e._v(" "),e.previewItem.template?i("div",[i("h4",[e._v(e._s(e.previewItem.template.name))]),e._v(" "),e.previewItem.template.preview?i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e.previewItem.template.preview}}):i("img",{staticStyle:{"max-width":"100%"},attrs:{src:"assets/images/missing-preview.svg"}})]):e._e(),e._v(" "),e.previewItem.description?i("div",{staticClass:"preview-item-description"},[e._v(e._s(e.previewItem.description))]):e._e()])]):e._e(),e._v(" "),i("div",{ref:"itemDragger",staticStyle:{position:"fixed"},style:{display:e.itemCreationDragged.item&&e.itemCreationDragged.startedDragging?"inline-block":"none"}},[e.itemCreationDragged.previewUrl?i("img",{attrs:{width:e.itemCreationDragged.width+"px",height:e.itemCreationDragged.height+"px",src:e.itemCreationDragged.previewUrl}}):e.itemCreationDragged.item&&e.itemCreationDragged.startedDragging?i("svg",{attrs:{width:e.itemCreationDragged.item.area.x+e.itemCreationDragged.item.area.w+50+"px",height:e.itemCreationDragged.item.area.y+e.itemCreationDragged.item.area.h+50+"px"}},[i("ItemSvg",{attrs:{editorId:e.editorId,item:e.itemCreationDragged.item,mode:"edit"}})],1):e._e()]),e._v(" "),e.externalTemplateModalShown?i("SchemeSearchModal",{on:{close:function(t){e.externalTemplateModalShown=!1},"selected-scheme":e.onExternalDiagramPicked}}):e._e()],1)};jm._withStripped=!0;var zm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{title:"Create Image","primary-button":e.primaryButton},on:{close:function(t){return e.$emit("close")},"primary-submit":function(t){return e.submitCreateImage()}}},[i("h5",[e._v("Image URL")]),e._v(" "),i("div",{staticClass:"image-control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Image URL..."},domProps:{value:e.url},on:{input:function(t){t.target.composing||(e.url=t.target.value)}}}),e._v(" "),e.supportsUpload?i("div",{staticClass:"file-upload-button"},[i("i",{staticClass:"fas fa-file-upload icon"}),e._v(" "),i("input",{attrs:{type:"file",accept:"image/*"},on:{change:e.onFileSelect}})]):e._e()]),e._v(" "),e.isUploading?i("div",{staticClass:"msg msg-info"},[i("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" Uploading...\n    ")]):e._e(),e._v(" "),e.errorUploading?i("div",{staticClass:"msg msg-error"},[e._v("\n        Could not upload image.\n    ")]):e._e(),e._v(" "),i("div",{staticClass:"image-preview"},[e.url.length>0?i("img",{attrs:{src:e.url}}):e._e()])])};zm._withStripped=!0;const Um={props:{imageUrl:{type:String,default:""},primaryButton:{type:String,default:"Create"}},components:{Modal:je.Z},data(){return{url:this.imageUrl,selectedFile:null,errorUploading:!1,isUploading:!1}},methods:{submitCreateImage(){this.$emit("submit-image",this.url)},onFileSelect(e){this.selectedFile=e.target.files[0]}},computed:{supportsUpload(){return this.$store.state.apiClient&&this.$store.state.apiClient.uploadFile}},watch:{selectedFile(e){e&&(this.isUploading=!0,this.errorUploading=!1,this.$store.state.apiClient.uploadFile(e).then((e=>{this.isUploading=!1,this.errorUploading=!1,this.url=e})).catch((e=>{this.isUploading=!1,this.errorUploading=!0,e.data&&e.data.message&&nh.Z.addErrorSystemMessage(this.$store,e.data.message)})))}}},Hm=(0,Re.Z)(Um,zm,[],!1,null,null,null).exports;var qm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{title:"Create Art Icon","primary-button":"Create"},on:{close:function(t){return e.$emit("close")},"primary-submit":function(t){return e.submitIcon()}}},[i("h5",[e._v("Icon name")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.iconName,expression:"iconName"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Name..."},domProps:{value:e.iconName},on:{input:function(t){t.target.composing||(e.iconName=t.target.value)}}}),e._v(" "),i("p",[e._v("\n        Use small images or even better - SVG icons.\n    ")]),e._v(" "),i("h5",[e._v("Image URL")]),e._v(" "),i("div",{staticClass:"image-control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Image URL..."},domProps:{value:e.url},on:{input:function(t){t.target.composing||(e.url=t.target.value)}}}),e._v(" "),e.supportsUpload?i("div",{staticClass:"file-upload-button"},[i("i",{staticClass:"fas fa-file-upload icon"}),e._v(" "),i("input",{attrs:{type:"file",accept:"image/*"},on:{change:e.onFileSelect}})]):e._e()]),e._v(" "),e.isUploading?i("div",{staticClass:"msg msg-info"},[i("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" Uploading...\n    ")]):e._e(),e._v(" "),e.errorMessage?i("div",{staticClass:"msg msg-error"},[e._v(e._s(e.errorMessage))]):e._e()])};qm._withStripped=!0;const Wm={components:{Modal:je.Z},data:()=>({url:"",iconName:"",selectedFile:null,errorMessage:null,isUploading:!1}),methods:{submitIcon(){this.$store.state.apiClient.createArt({name:this.iconName,url:this.url}).then((e=>{this.$emit("art-created",e)})).catch((e=>{this.errorMessage="Error creating art"}))},onFileSelect(e){this.selectedFile=e.target.files[0]}},computed:{supportsUpload(){return this.$store.state.apiClient&&this.$store.state.apiClient.uploadFile}},watch:{selectedFile(e){e&&(this.iconName||(this.iconName=e.name),this.isUploading=!0,this.$store.state.apiClient.uploadFile(e).then((e=>{this.isUploading=!1,this.errorMessage=null,this.url=e})).catch((e=>{this.isUploading=!1,this.errorMessage="Unable to upload a file",e.data&&e.data.message&&nh.Z.addErrorSystemMessage(this.$store,e.data.message)})))}}},Vm=(0,Re.Z)(Wm,qm,[],!1,null,null,null).exports;var Gm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{staticClass:"project-art-editor",attrs:{title:"Edit Art",width:800},on:{close:function(t){return e.$emit("close")}}},[i("div",{staticClass:"item-menu",staticStyle:{"max-height":"600px",overlow:"scroll"}},e._l(e.artList,(function(t,n){return i("div",{key:t.id,staticClass:"item-container"},[i("img",{attrs:{src:t.url}}),e._v(" "),i("span",[e._v(e._s(t.name))]),e._v(" "),i("i",{staticClass:"remove-icon fas fa-times",on:{click:function(t){return e.deleteArtAtIndex(n)}}})])})),0)])};Gm._withStripped=!0;const Km={props:["artList"],components:{Modal:je.Z},methods:{saveArt(e){this.$store.state.apiClient.saveArt(e.id,e)},deleteArtAtIndex(e){e>=0&&e<this.artList.length&&this.$store.state.apiClient.deleteArt(this.artList[e].id).then((()=>{this.selectedIndex=-1,this.artList.splice(e,1)}))}}},Jm=Km,Ym=(0,Re.Z)(Jm,Gm,[],!1,null,null,null).exports,Qm=new class{constructor(){this.itemShapeProps={},this.itemTextProps={}}registerItemShapeProp(e,t,i){this.itemShapeProps.hasOwnProperty(e)||(this.itemShapeProps[e]={}),this.itemShapeProps[e][t]=JSON.stringify(i)}applyItemProps(e){const t=this.itemShapeProps[e.shape];t&&(0,Fe.Ed)(t,((t,i)=>{e.shapeProps[i]=JSON.parse(t)}));const i=this.itemTextProps[e.shape];i&&(0,Fe.Ed)(i,((t,i)=>{e.textSlots&&e.textSlots[i]&&(0,Fe.Ed)(t,((t,n)=>{e.textSlots[i][n]=JSON.parse(t)}))}))}registerItemTextProp(e,t,i,n){this.itemTextProps.hasOwnProperty(e)||(this.itemTextProps[e]={}),this.itemTextProps[e].hasOwnProperty(t)||(this.itemTextProps[e][t]={}),this.itemTextProps[e][t][i]=JSON.stringify(n)}};var Xm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{title:"Additional shapes",width:900,repositionId:e.repositionId},on:{close:function(t){return e.$emit("close")}}},[e.isLoading?i("div",{staticClass:"loader"},[i("div",{staticClass:"loader-element"})]):e._e(),e._v(" "),e.errorMessage?i("div",{staticClass:"msg msg-danger"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),i("div",{staticClass:"external-shapes"},[i("div",{staticClass:"external-shapes-list"},[e.entries?i("ul",e._l(e.entries,(function(t,n){return i("li",{class:{selected:e.selectedEntryIdx===n},on:{click:function(i){return e.selectEntry(t,n)}}},[e._v("\n                    "+e._s(t.name)+"\n                    "),t.used?i("span",{staticClass:"added"},[e._v("added")]):e.selectedEntryIdx===n?i("span",{staticClass:"btn btn-add btn-primary",on:{click:function(t){return e.registerSelectedShapeGroup()}}},[e._v("Add")]):e._e()])})),0):i("div",{staticClass:"missing-extra-shapes"},[e._v("\n                No shapes available\n            ")])]),e._v(" "),e.selectedEntry?i("div",{staticClass:"external-shape-preview"},[i("div",{staticClass:"title"},[e._v(e._s(e.selectedEntry.name))]),e._v(" "),e.selectedEntry.description?i("div",{staticClass:"description"},[e._v(e._s(e.selectedEntry.description))]):e._e(),e._v(" "),e.selectedEntry.preview?i("div",{staticClass:"preview"},[i("img",{staticClass:"large",attrs:{src:e.selectedEntry.preview}})]):e._e(),e._v(" "),e.selectedEntry.previewImages?i("div",{staticClass:"preview"},e._l(e.selectedEntry.previewImages,(function(e){return i("div",{staticClass:"preview-icon"},[i("img",{attrs:{src:e}})])})),0):e._e()]):i("div",{staticClass:"external-shape-preview"})])])};function ef(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function tf(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ef(Object(i),!0).forEach((function(t){nf(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ef(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function nf(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Xm._withStripped=!0;const rf="/assets";function sf(e,t){return t&&t.startsWith(rf)&&(t=e.state.assetsPath+t.substring(7)),t}const of={components:{Modal:je.Z},beforeCreate(){this.isLoading=!0;const e=this.$store.state.assetsPath||rf,t=e.endsWith("/")?"":"/";Promise.all([Ph().get(`${e}${t}shapes/shapes.json`).then((e=>e.data)),Ph().get(`${e}${t}art/art.json`).then((e=>e.data))]).then((([e,t])=>{this.isLoading=!1,Array.isArray(e)||(e=[]),Array.isArray(t)||(t=[]);const i=e.map((e=>tf({type:"shape",used:this.$store.state.itemMenu.shapeGroupIds.has(e.id)},e))),n=t.map((e=>(e.ref=sf(this.$store,e.ref),Array.isArray(e.previewImages)&&(e.previewImages=e.previewImages.map((e=>sf(this.$store,e)))),tf({type:"art",used:this.$store.state.itemMenu.artPackIds.has(e.ref)},e)))),r=i.concat(n);r.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)),this.entries=r,this.repositionId++})).catch((e=>{this.isLoading=!1,this.errorMessage="Failed to load all shapes",console.error(e)}))},data:()=>({isLoading:!1,entries:null,selectedEntry:null,selectedEntryIdx:-1,errorMessage:null,repositionId:0}),methods:{selectEntry(e,t){this.selectedEntryIdx=t,this.selectedEntry=e},registerSelectedShapeGroup(){"shape"===this.selectedEntry.type?this.registerShapeGroup(this.selectedEntry):"art"===this.selectedEntry.type&&this.registerArtPack(this.selectedEntry)},registerArtPack(e){this.isLoading=!0,Ph().get(e.ref).then((t=>{const i=t.data;Array.isArray(i.icons)&&i.icons.forEach((e=>{e.url=sf(this.$store,e.url)})),this.isLoading=!1,nh.Z.addArtPack(this.$store,e.ref,i),this.$emit("art-pack-added",i),e.used=!0})).catch((e=>{this.isLoading=!1,console.error(e)}))},registerShapeGroup(e){const t=e.ref;this.isLoading=!0,Ph().get(t).then((t=>{this.isLoading=!1;const i="string"==typeof t.data?JSON.parse(t.data):t.data;Hd(this.$store,e.id,i),this.$emit("extra-shapes-registered"),e.used=!0})).catch((e=>{this.isLoading=!1,console.error(e)}))}}},af=of,lf=(0,Re.Z)(af,Xm,[],!1,null,null,null).exports;function cf(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function hf(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?cf(Object(i),!0).forEach((function(t){df(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):cf(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function df(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const uf={"create-curve":"Lets you design your own complex shapes",draw:"Allows to draw complex shapes with mouse. Once the drawing is submited - it will optimize its points so that you can easily edit it later"},pf="item-picked-for-creation",mf={props:{editorId:{type:String,required:!0},schemeContainer:{type:Object},projectArtEnabled:{type:Boolean,default:!0},customItemMenuPanels:{type:Array,default:()=>[]}},components:{Panel:wu,CreateImageModal:Hm,Modal:je.Z,CustomArtUploadModal:Vm,EditArtModal:Ym,LinkEditModal:Ru,ItemSvg:Ld,ExtraShapesModal:lf,ExtraShapesModal:lf,SchemeSearchModal:Bu},beforeMount(){this.loadProjectArt(),this.loadTemplates(),this.filterItemPanels()},data(){return{customArtUploadModalShown:!1,menu:"main",artPacks:[],filteredArtPacks:[],artList:[],searchKeyword:"",errorMessage:null,editArtModalShown:!1,itemPanels:this.generateItemPanels(),filteredItemPanels:[],linkCreation:{popupShown:!1,item:null,withMouse:!1},imageCreation:{popupShown:!1,item:null,withMouse:!1},previewItem:{shown:!1,x:0,y:0,item:null,artIcon:null,gif:null,y:50,description:null,template:null},itemCreationDragged:{startedDragging:!1,item:null,pageX:0,pageY:0,width:100,height:100,imageProperty:null,previewUrl:null},extraShapesModal:{shown:!1},templates:[],templatesLoading:!1,externalTemplateModalShown:!1}},methods:{loadProjectArt(){this.$store.state.apiClient&&this.$store.state.apiClient.getAllArt&&this.$store.state.apiClient.getAllArt().then((e=>{this.artList=e}))},loadTemplates(){this.$store.state.apiClient&&this.$store.state.apiClient.getAllTemplates&&(this.templatesLoading=!0,this.$store.state.apiClient.getAllTemplates().then((e=>{this.templatesLoading=!0,this.templates=e,this.$forceUpdate()})).catch((e=>{this.templatesLoading=!1,console.error("Failed to load templates",e),this.templates=[]})))},updateAllPanels(){this.itemPanels=this.generateItemPanels(),this.filterItemPanels()},generateItemPanels(){const e={};(0,Fe.Ed)(Id.Z.getRegistry(),((t,i)=>{t.menuItems&&(0,Fe.Ed)(t.menuItems,(n=>{n.iconUrl&&n.iconUrl.startsWith("/assets")&&(n.iconUrl=this.$store.state.assetsPath+n.iconUrl.substring(7));let r=n.group||"Ungrouped";e[r]||(e[r]={name:r,items:[]}),e[r].items.push(this.prepareItemForMenu(Uc.Z.clone(n),t,i))}))}));const t=[];return(0,Fe.Ed)(e,((e,i)=>{t.push(e)})),t},filterItemPanels(){const e=this.searchKeyword.toLowerCase();this.filteredItemPanels=(0,Fe.UI)(this.itemPanels,(t=>{let i=t.name.toLowerCase().indexOf(e)>=0;return{name:t.name,items:(0,Fe.hX)(t.items,(t=>!this.searchKeyword||i||t.name.toLowerCase().indexOf(e)>=0))}}))},updateAllArtPacks(){this.filterArtPacks(),this.$forceUpdate()},safeTextMatchKeyword(e){let t=e||"";const i=this.searchKeyword.toLowerCase();return t.toLowerCase().indexOf(i)>=0},filterArtPacks(){this.filteredArtPacks=(0,Fe.UI)(this.$store.state.itemMenu.artPacks,(e=>{let t=this.safeTextMatchKeyword(e.name);return{id:e.id,name:e.name,link:e.link,author:e.author,icons:(0,Fe.hX)(e.icons,(e=>!this.searchKeyword||t||this.safeTextMatchKeyword(e.name)||this.safeTextMatchKeyword(e.description)))}}))},prepareItemForMenu:(e,t,i)=>(e.item||(e.item={}),e.item.shape=i,e.item=Uc.Z.extendObject(e.item,fh.XZ),e.previewArea?e.item.area=e.previewArea:e.item.area={x:6,y:6,w:140,h:90},e.item.shape&&(0,xd.GO)(e.item),e),showExtraShapePreviewItem(e,t){if(!e.item){const i=Id.Z.find(t);this.prepareItemForMenu(e,i,t)}this.showPreviewItem(e)},showPreviewItem(e){(0,fh.Hp)([e.item],xd.z9),this.previewItem.template=null,this.previewItem.item=e,this.previewItem.artIcon=null,this.previewItem.template=null,this.previewItem.gif=null,this.previewItem.description=e.description,this.displayPreviewItemTooltip()},stopPreviewItem(e){this.previewItem.item&&this.previewItem.item.name===e.name&&(this.previewItem.shown=!1)},showPreviewArt(e){this.previewItem.template=null,this.previewItem.item=null,this.previewItem.artIcon=e,this.previewItem.gif=null,this.previewItem.template=null,this.previewItem.description=e.description,this.displayPreviewItemTooltip()},stopPreviewArt(e){this.previewItem.artIcon&&this.previewItem.artIcon.name===e.name&&(this.previewItem.shown=!1)},showPreviewTemplate(e){this.previewItem.item=null,this.previewItem.artIcon=null,this.previewItem.template=e,this.previewItem.gif=null,this.previewItem.description=e.description,this.displayPreviewItemTooltip()},stopPreviewTemplate(e){this.previewItem.template&&this.previewItem.template.path===e.path&&(this.previewItem.shown=!1)},showPreviewGif(e,t){this.previewItem.template=null,this.previewItem.item=null,this.previewItem.artIcon=null,this.previewItem.gif=t,this.previewItem.description=uf[t]?uf[t]:null,this.displayPreviewItemTooltip()},displayPreviewItemTooltip(){const e=this.$refs.createItemMenu.getBoundingClientRect();this.previewItem.x=e.right+20,this.previewItem.y=100,this.previewItem.shown=!0},stopPreviewGif(e){this.previewItem.gif===e&&(this.previewItem.shown=!1)},onArtCreated(e){this.artList.push(e),this.customArtUploadModalShown=!1},onItemPicked(e,t){if(this.itemCreationDragged.startedDragging)return;const i=Uc.Z.clone(e.item);return i.name=this.schemeContainer.generateUniqueName(e.name),"link"===e.item.shape?(this.linkCreation.item=i,this.linkCreation.withMouse=!0,void(this.linkCreation.popupShown=!0)):e.imageProperty?(this.itemCreationDragged.imageProperty=e.imageProperty,this.imageCreation.item=i,this.imageCreation.withMouse=!0,void(this.imageCreation.popupShown=!0)):void this.$emit(pf,i,t)},linkSubmited(e){this.linkCreation.popupShown=!1;const t=Uc.Z.clone(this.linkCreation.item);t.name=this.makeUniqueName("Link"),t.shapeProps.url=e.url,t.textSlots.link.text=e.title,t.shapeProps.icon=e.type,Qm.applyItemProps(t),this.linkCreation.withMouse?this.$emit(pf,t):this.$emit("item-creation-dragged-to-editor",t,this.itemCreationDragged.pageX+2,this.itemCreationDragged.pageY+2)},onImageSubmited(e){this.imageCreation.popupShown=!1;var t=new Image;const i=this,n=Uc.Z.clone(i.imageCreation.item);n.name=i.makeUniqueName("Image"),n.id=jl().generate(),n.area={x:0,y:0,w:100,h:100},Uc.Z.setObjectProperty(n,i.itemCreationDragged.imageProperty,e),this.imageCreation.withMouse?this.$emit(pf,n):(t.onload=function(){this.width>1&&this.height>1&&(n.area={x:0,y:0,w:this.width,h:this.height},i.$emit("item-creation-dragged-to-editor",n,i.itemCreationDragged.pageX+2,i.itemCreationDragged.pageY+2))},t.onerror=e=>{i.$emit("item-creation-dragged-to-editor",n,i.itemCreationDragged.pageX+2,i.itemCreationDragged.pageY+2)},t.src=e)},makeUniqueName(e){return this.schemeContainer.copyNameAndMakeUnique(e)},initiateSelectAndDrag(){this.previewItem.shown=!1,this.$emit("state-drag-item-requested")},initiatePathCreation(){this.previewItem.shown=!1;const e={name:this.makeUniqueName("Path"),area:{x:0,y:0,w:100,h:100,r:0,sx:1,sy:1,px:.5,py:.5},shape:"path",shapeProps:{paths:[]}};(0,xd.z9)(e),this.$emit("path-edited",e)},initiatePencilDrawing(e){this.previewItem.shown=!1,this.$emit("drawing-pencil-requested")},initiateBrushDrawing(e){this.previewItem.shown=!1,this.$emit("drawing-brush-requested")},preventEvent(e){e.preventDefault(),e.stopPropagation()},onArtMouseDown(e,t){const i={id:jl().generate(),cursor:"default",opacity:100,blendMode:"normal",name:this.makeUniqueName(t.name),description:"",text:"",links:[],shape:"image",area:{x:0,y:0,w:100,h:60},shapeProps:{strokeSize:0,showTitle:!1,image:t.url,stretch:!1}};(0,xd.z9)(i),this.onItemMouseDown(e,{item:i,name:i.name},!0)},onTemplateMouseDown(e,t){this.schemeContainer.getTemplate(t.path).then((t=>{const i=this.schemeContainer.generateItemFromTemplate(t,t.getDefaultArgs(),t.defaultArea.w,t.defaultArea.h);this.onItemMouseDown(e,{item:i,name:i.name},!0,t)})).catch((e=>{console.error(e),nh.Z.addErrorSystemMessage(this.$store,`Failed to load "${t.name}" template`,"failed-template")}))},onItemMouseDown(e,t,i,n){this.previewItem.shown=!1;const[r]=this.schemeContainer.cloneItems([t.item],!0);(0,fh.Hp)([r],xd.z9),(0,jh.E)(e).withDroppableClass("scheme-container").withDraggedElement(this.$refs.itemDragger).onDragStart((()=>{i||"sticky_note"===r.shape||Qm.applyItemProps(r),n||(t.previewArea?(r.area.w=t.previewArea.w,r.area.h=t.previewArea.h):(r.area.w=100,r.area.h=60)),t.size&&(r.area.w=t.size.w,r.area.h=t.size.h),n?t.iconUrl?this.itemCreationDragged.previewUrl=t.iconUrl:(this.itemCreationDragged.previewUrl=n.preview,this.itemCreationDragged.width=r.area.w,this.itemCreationDragged.height=r.area.h):this.itemCreationDragged.previewUrl=null,this.itemCreationDragged.item=r,this.itemCreationDragged.startedDragging=!0,t.imageProperty?this.itemCreationDragged.imageProperty=t.imageProperty:this.itemCreationDragged.imageProperty=null})).onDone((()=>{this.itemCreationDragged.item=null,this.itemCreationDragged.startedDragging=!1})).onSimpleClick((()=>{n?this.onItemPicked({name:n.name,item:r},n):this.onItemPicked(hf(hf({},t),{},{item:r}))})).onDrop(((e,i,s,o)=>(this.itemCreationDragged.pageX=s,this.itemCreationDragged.pageY=o,"link"===t.item.shape?(this.linkCreation.item=r,this.linkCreation.withMouse=!1,void(this.linkCreation.popupShown=!0)):t.imageProperty?(this.itemCreationDragged.imageProperty=t.imageProperty,this.imageCreation.item=r,this.imageCreation.withMouse=!1,void(this.imageCreation.popupShown=!0)):(r.area={x:0,y:0,w:r.area.w,h:r.area.h,r:0,px:.5,px:.5,sx:1,sy:1},r.name=this.makeUniqueName(t.name),void this.$emit("item-creation-dragged-to-editor",r,s,o,n))))).build()},closeArtPack(e){nh.Z.removeArtPack(this.$store,e.id),this.filterArtPacks()},showExternalTemplateModal(){const e=this.$store.state.apiClient;e&&e.diagramSearchProvider?e.diagramSearchProvider(this.diagramId).then((e=>{this.onExternalDiagramPicked(e)})):this.externalTemplateModalShown=!0},onExternalDiagramPicked(e){this.externalTemplateModalShown=!1,this.schemeContainer.getTemplate(`#doc:${e.id}`).then((e=>{const t=this.schemeContainer.generateItemFromTemplate(e,e.getDefaultArgs(),e.defaultArea.w,e.defaultArea.h);this.onItemMouseDown({pageX:0,pageY:0,buttons:0},{item:t,name:t.name},!0,e)})).catch((e=>{console.error(e),nh.Z.addErrorSystemMessage(this.$store,"Could to load template","no-items-template")}))}},watch:{searchKeyword(){this.filterItemPanels(),this.filterArtPacks()}},computed:{previewWidth(){return this.previewItem&&this.previewItem.item&&this.previewItem.item.item?this.previewItem.item.item.area.w+this.previewItem.item.item.area.x+10:150},previewHeight(){return this.previewItem&&this.previewItem.item&&this.previewItem.item.item?this.previewItem.item.item.area.h+this.previewItem.item.item.area.y+10:150},extraShapeGroups(){return this.$store.getters.extraShapeGroups},assetsPath(){return this.$store.getters.assetsPath}}},ff=(0,Re.Z)(mf,jm,[],!1,null,null,null).exports;var gf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"item-tooltip",class:{"item-short-details-tooltip":e.isShortDetails},style:e.tooltipStyle,attrs:{id:e.domId,"data-type":e.dataType,"data-item-id":e.item.id},on:{mouseover:function(t){return e.$emit("mouseover",t)},mouseleave:function(t){return e.$emit("mouseleave",t)}}},[e.isShortDetails?e._e():i("div",{staticClass:"tooltip-header"},[i("span",{staticClass:"item-tooltip-close",style:{color:e.tooltipColor},on:{click:function(t){return e.$emit("close")}}},[e._v("")]),e._v(" "),i("h3",{style:{color:e.tooltipColor}},[e._v(e._s(e.item.name))])]),e._v(" "),e.hasLinks?i("ul",{staticClass:"item-tooltip-links"},e._l(e.item.links,(function(t){return i("li",[i("a",{attrs:{href:t.url}},[i("i",{staticClass:"icon",class:t.iconClass}),e._v("\n                "+e._s(t.title)+"\n            ")])])})),0):e._e(),e._v(" "),i("div",{staticClass:"item-tooltip-body",domProps:{innerHTML:e._s(e.sanitizedItemDescription)}})])};function vf(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function yf(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}gf._withStripped=!0;const xf={props:{item:{type:Object,required:!0},x:{type:Number,required:!0},y:{type:Number,required:!0},isShortDetails:{type:Boolean,default:!1}},beforeMount(){document.body.addEventListener("click",this.onBodyClick)},mounted(){const e=document.getElementById(this.domId).getBoundingClientRect(),t=Math.min(0,window.innerWidth-this.x-e.width),i=Math.min(0,window.innerHeight-this.y-e.height);this.positionLeft=this.x+t,this.positionTop=this.y+i},beforeDestroy(){document.body.removeEventListener("click",this.onBodyClick)},data(){const e=this.isShortDetails?300:Math.min(300,.7*window.innerWidth),t=this.isShortDetails?200:Math.min(700,.7*window.innerWidth),i=Math.min(500,.7*window.innerHeight),n=(this.item.links||[]).map((e=>{const t=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?vf(Object(i),!0).forEach((function(t){yf(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):vf(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e);if("file"===e.type){const t=e.title.lastIndexOf("."),i=e.title.substring(Math.max(0,t+1));e.iconClass=Rd.Z.findFileIcon(i).cssClass}else e.iconClass=Rd.Z.findTypeByNameOrDefault(e.type).cssClass;return t}));return{domId:`item-tooltip-${this.item.id}`,positionLeft:this.x,positionTop:this.y,minWidth:e,maxWidth:t,maxHeight:i,hasLinks:n.length>0,tooltipBackground:this.item.tooltipBackground||"#eeeeee",tooltipColor:this.item.tooltipColor||"#111111"}},methods:{onBodyClick(e){e.srcElement.closest("svg.svg-editor-plot")||e.srcElement.closest(".item-tooltip")||this.$emit("close")}},computed:{tooltipStyle(){return{left:this.positionLeft+"px",top:this.positionTop+"px",background:this.tooltipBackground,color:this.tooltipColor,padding:"10px","min-width":`${this.minWidth}px`,"max-width":`${this.maxWidth}px`,"max-height":`${this.maxHeight}px`}},sanitizedItemDescription(){return(0,ph.Z)(this.item.description)},dataType(){return this.isShortDetails?"item-details-tooltip":"item-tooltip"}}},bf=xf,wf=(0,Re.Z)(bf,gf,[],!1,null,null,null).exports;var Cf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"panelContainer",staticClass:"connector-destination-proposal",style:{left:e.position.left+"px",top:e.position.top+"px"},attrs:{oncontextmenu:"return false;"}},[i("div",{staticClass:"item-menu"},e._l(e.itemEntries,(function(t){return i("div",{staticClass:"item-container",attrs:{title:t.name},on:{click:function(i){return e.onDestinationItemSelected(t)}}},[t.iconUrl?i("img",{attrs:{src:t.iconUrl,width:"42px",height:"32px"}}):e._e()])})),0)])};Cf._withStripped=!0;const Pf={props:{x:Number,y:Number,connectorItemId:String,schemeContainer:Object},components:{ItemSvg:Ld},mounted(){document.body.addEventListener("click",this.onBodyClick),document.body.addEventListener("keydown",this.onGlobalKeydown);const e=this.$refs.panelContainer.getBoundingClientRect();e.bottom>window.innerHeight&&(this.position.top=window.innerHeight-e.height-40),e.right>window.innerWidth&&(this.position.left=window.innerWidth-e.width-40)},beforeDestroy(){document.body.removeEventListener("click",this.onBodyClick),document.body.removeEventListener("keydown",this.onGlobalKeydown)},data(){const e=[];return(0,Fe.Ed)(Id.Z.getRegistry(),((t,i)=>{t.menuItems&&"sticky_note"!==i&&(0,Fe.Ed)(t.menuItems,(t=>{if(!t.imageProperty){const n=Uc.Z.clone(t);n.item||(n.item={}),n.item.shape=i,e.push(Uc.Z.clone(n))}}))})),{itemEntries:e,position:{left:this.x,top:this.y}}},methods:{onDestinationItemSelected(e){const t=Uc.Z.clone(e.item);t.name=e.name,this.enrichItem(t),this.$emit("item-selected",t),this.$emit("close")},enrichItem(e){(0,xd.z9)(e),(0,xd.GO)(e)},onBodyClick(e){e.target&&e.target.closest(".connector-destination-proposal")||this.$emit("close")},onGlobalKeydown(e){this.$emit("close")}}},kf=(0,Re.Z)(Pf,Cf,[],!1,null,null,null).exports;var Sf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"item-selector"},[i("div",{staticClass:"item-selector-top-panel"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],staticClass:"textfield",attrs:{type:"text",placeholder:"Search"},domProps:{value:e.searchKeyword},on:{input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}})]),e._v(" "),i("div",{ref:"itemSelectorContainer",staticClass:"item-selector-items",style:{height:e.height+"px","min-height":e.minHeight+"px"},attrs:{oncontextmenu:"return false;"}},e._l(e.filteredItems,(function(t,n){return i("div",{key:"itsel-"+t.id,ref:"row_"+t.id,refInFor:!0,staticClass:"item-selector-item-row-container item-droppable-area",attrs:{"data-item-id":t.id,"data-index":n}},[e.dragging.readyToDrop&&n===e.dragging.previewIdx&&e.dragging.dropAbove?i("div",{staticClass:"item-row item-drop-preview",style:{"padding-left":25*t.meta.ancestorIds.length+15+"px"}},[i("div",{staticClass:"item"},[i("div",{staticClass:"item-name"},[e.dragging.previewIconUrl?i("img",{staticClass:"item-icon",attrs:{src:e.dragging.previewIconUrl}}):i("i",{staticClass:"fas fa-cube"}),e._v(" "),i("span",[e._v(" "+e._s(e.dragging.previewItemName)+" ")])])])]):e._e(),e._v(" "),i("div",{staticClass:"item-row",style:{"padding-left":25*t.meta.ancestorIds.length+15+"px"}},[0===t.meta.collapseBitMask?i("div",{ref:"item_"+t.id,refInFor:!0,staticClass:"item",class:{selected:e.schemeContainer.isItemSelected(t),"templated-item":t.args&&t.args.templated,"templated-item-root":t.args&&t.args.templateRef},attrs:{title:t.args&&t.args.templated?"This item is templated":""},on:{dragstart:e.preventEvent,drag:e.preventEvent,mousedown:function(i){return e.onItemMouseDown(t,i)},dblclick:function(i){return e.onItemDoubleClicked(t)}}},[t.childItems&&t.childItems.length>0?i("span",{staticClass:"item-collapser",on:{click:function(i){return e.toggleItemCollapseState(t)}}},[t.meta.collapsed?i("i",{staticClass:"fas fa-angle-right"}):i("i",{staticClass:"fas fa-angle-down"})]):e._e(),e._v(" "),i("div",{staticClass:"item-name"},[t.meta.iconUrl?i("img",{staticClass:"item-icon",attrs:{src:t.meta.iconUrl}}):i("i",{staticClass:"fas fa-cube"}),e._v(" "),t.id!==e.nameEdit.itemId?i("span",[e._v("\n                            "+e._s(t.name)+"\n                        ")]):e._e(),e._v(" "),t.id===e.nameEdit.itemId?i("input",{directives:[{name:"model",rawName:"v-model",value:e.nameEdit.name,expression:"nameEdit.name"}],ref:"nameEditInput",refInFor:!0,attrs:{type:"text","data-type":"item-name-edit-in-place"},domProps:{value:e.nameEdit.name},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.cancelNameEdit()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancelNameEdit()}],input:function(t){t.target.composing||e.$set(e.nameEdit,"name",t.target.value)}}}):e._e()]),e._v(" "),i("div",{staticClass:"item-right-panel"},[i("span",{staticClass:"icon",on:{click:function(i){return e.toggleItemLock(t)}}},[t.locked?i("i",{staticClass:"fas fa-lock icon-locked"}):i("i",{staticClass:"fas fa-unlock icon-unlocked"})]),e._v(" "),i("span",{staticClass:"icon",on:{click:function(i){return e.toggleItemVisibility(t)}}},[t.visible?i("i",{staticClass:"fas fa-lightbulb icon-visible"}):i("i",{staticClass:"far fa-lightbulb icon-invisible"})])])]):e._e()]),e._v(" "),e.dragging.readyToDrop&&n===e.dragging.previewIdx&&!e.dragging.dropAbove?i("div",{staticClass:"item-row item-drop-preview",style:{"padding-left":e.dragging.padding+"px"}},[i("div",{staticClass:"item"},[i("div",{staticClass:"item-name"},[e.dragging.previewIconUrl?i("img",{staticClass:"item-icon",attrs:{src:e.dragging.previewIconUrl}}):i("i",{staticClass:"fas fa-cube"}),e._v(" "),i("span",[e._v("\n                            "+e._s(e.dragging.previewItemName)+"\n                        ")])])])]):e._e()])})),0),e._v(" "),i("div",{ref:"itemDragger",staticClass:"item-selector-drag-preview",staticStyle:{position:"fixed","white-space":"nowrap"},style:{display:e.dragging.startedDragging?"inline-block":"none"}},e._l(e.dragging.items,(function(t,n){return n<3?i("div",{staticClass:"item-name",class:"preview-"+n},[t.meta.iconUrl?i("img",{staticClass:"item-icon",attrs:{src:t.meta.iconUrl}}):i("i",{staticClass:"fas fa-cube"}),e._v(" "),i("span",[e._v("\n                "+e._s(t.name)+"\n            ")])]):e._e()})),0),e._v(" "),i("div",{staticClass:"item-selector-resize-dragger",on:{mousedown:e.onItemSelectorResizeDraggerMouseDown}})])};Sf._withStripped=!0;const If=Wc("item-selector",5);function Af(e){const t=Id.Z.find(e.shape);return t?("path"===e.shape?e.meta.iconUrl="assets/images/items/path.svg":t.menuItems&&t.menuItems.length>0&&(e.meta.iconUrl=t.menuItems[0].iconUrl),e):e}function _f(e,t,i){e&&(0,Fe.Ed)(e,(e=>{i(e,t),e.childItems&&_f(e.childItems,e,i)}))}const Ef={props:{editorId:{type:String,required:!0},schemeContainer:{type:Object},minHeight:{type:Number}},mounted(){document.body.addEventListener("mouseup",this.onMouseUp),mh.Z.item.selected.any.$on(this.editorId,this.onAnyItemSelected),mh.Z.item.deselected.any.$on(this.editorId,this.onAnyItemDeselected),this.scrollToSelection()},beforeDestroy(){document.body.removeEventListener("mouseup",this.onMouseUp),mh.Z.item.selected.any.$off(this.editorId,this.onAnyItemSelected),mh.Z.item.deselected.any.$off(this.editorId,this.onAnyItemDeselected)},data(){const e=parseInt(If.get("height",0));return{searchKeyword:"",height:zh.Z.clamp(e,this.minHeight,1e3),dragging:{items:[],destinationId:null,dropInside:!1,dropAbove:!1,readyToDrop:!1,previewItemName:"Drop here",previewIconUrl:null,startedDragging:!1,pageX:0,pageY:0,padding:0,previewIdx:-1},nameEdit:{itemId:null,name:""},filteredItems:this.schemeContainer.getItems().map(Af),lastClickedItem:null}},methods:{scrollToSelection(){if(1===this.schemeContainer.selectedItems.length){const e=this.schemeContainer.selectedItems[0].id,t=this.$refs[`row_${e}`];if(t&&t.length>=1){const e=t[0],i=this.$refs.itemSelectorContainer;if(e&&i){const t=e.offsetTop-i.offsetTop,n=i.getBoundingClientRect().height,r=t-i.scrollTop;(r<-5||r>n-5)&&(i.scrollTop=Math.max(0,t-20))}}}},onMouseUp(e){if(e.target&&"item-name-edit-in-place"===e.target.getAttribute("data-type"))return!0;this.nameEdit.itemId=null},cancelNameEdit(){this.nameEdit.itemId=null},preventEvent(e){e.preventDefault(),e.stopPropagation()},onItemMouseDown(e,t){if(t.target&&("item-name-edit-in-place"===t.target.getAttribute("data-type")||t.target.closest(".item-collapser")))return!0;const i=t;if(t.shiftKey&&this.lastClickedItem){const t=this.schemeContainer.findItemById(this.lastClickedItem.id);if(t)return this.selectItemsVertically(t,e),void(this.lastClickedItem=e);this.lastClickedItem=null}if(this.lastClickedItem=e,this.nameEdit.itemId&&this.nameEdit.itemId!==e.id&&(this.nameEdit.itemId=null),!t.shiftKey){const i=t.metaKey||t.ctrlKey;if(this.schemeContainer.isItemSelected(e)){if(i)return void this.schemeContainer.deselectItem(e,i)}else this.schemeContainer.selectItem(e,i)}2!==t.button?(0,jh.E)(t).withDraggedElement(this.$refs.itemDragger).withDroppableClass("item-droppable-area").withScrollableElement(this.$refs.itemSelectorContainer).onDragStart((t=>{this.dragging.items=[].concat(this.schemeContainer.selectedItems);const i=new Set;let n=!1;for(let t=0;t<this.dragging.items.length&&!n;t++)this.dragging.items[t].id===e.id&&(n=!0);n||this.dragging.items.unshift(e),this.dragging.items.forEach((e=>{(0,fh.Hp)([e],(e=>{i.add(e.id)}))}));const r=[];this.dragging.items.forEach((e=>{let t=!1;for(let n=0;n<e.meta.ancestorIds.length&&!t;n++)i.has(e.meta.ancestorIds[n])&&(t=!0);t||r.push(e)})),this.dragging.items=r,this.dragging.previewItemName=e.name,this.dragging.previewIconUrl=Af(e).meta.iconUrl,this.dragging.startedDragging=!0,this.filteredItems=(0,Fe.hX)(this.filterItemsByKeyword(this.searchKeyword),(e=>!i.has(e.id))),this.$forceUpdate()})).onDrag((e=>{this.dragging.pageX=e.pageX,this.dragging.pageY=e.pageY})).onDragOver(((e,t)=>{const i=t.getBoundingClientRect();let n=this.schemeContainer.findItemById(t.getAttribute("data-item-id")),r=e.clientY<i.top+i.height/2,s=!1;for(let e=0;e<this.filteredItems.length&&!s;e++)this.filteredItems[e].id===n.id&&(s=!0,this.dragging.previewIdx=e);const o=this.dragging.pageX-i.left-25*n.meta.ancestorIds.length-15;if(this.dragging.destinationId=n.id,this.dragging.dropInside=o>35,o<0&&n.meta.ancestorIds.length>0){const e=zh.Z.clamp(Math.ceil(Math.abs(o/25)),1,n.meta.ancestorIds.length);this.dragging.destinationId=n.meta.ancestorIds[n.meta.ancestorIds.length-e]}this.dragging.dropAbove=r,this.dragging.readyToDrop=!0,this.dragging.padding=25*(n.meta.ancestorIds.length+(this.dragging.dropInside?1:0))+15})).onDone((()=>{if(this.dragging.startedDragging||i.shiftKey||this.schemeContainer.selectItem(e,i.metaKey||i.ctrlKey),this.dragging.startedDragging=!1,this.dragging.readyToDrop&&this.dragging.items.length>0&&this.dragging.destinationId){let e=null;e=this.dragging.dropAbove?e=>{this.schemeContainer.remountItemBeforeOtherItem(e.id,this.dragging.destinationId)}:this.dragging.dropInside?e=>{this.schemeContainer.remountItemInsideOtherItem(e.id,this.dragging.destinationId,0)}:e=>{this.schemeContainer.remountItemAfterOtherItem(e.id,this.dragging.destinationId)};let t=this.dragging.items;this.dragging.dropAbove||(t=t.reverse()),(0,Fe.Ed)(t,(t=>{t.id!==this.dragging.destinationId&&e(t)}))}this.dragging.items=[],this.dragging.destinationId=null,this.filteredItems=this.filterItemsByKeyword(this.searchKeyword)})).build():this.$emit("item-right-clicked",e,t.pageX,t.pageY)},onItemDoubleClicked(e){this.nameEdit.name=e.name,this.nameEdit.itemId=e.id,this.$nextTick((()=>{const e=this.$refs.nameEditInput;e&&(Array.isArray(e)?e.length>0&&e[0].focus():e.focus())}))},selectItemsVertically(e,t){let i=-1,n=-1;for(let r=0;r<this.filteredItems.length&&(i<0||n<0);r+=1)this.filteredItems[r].id===e.id&&(i=r),this.filteredItems[r].id===t.id&&(n=r);if(i<0||n<0)return;const r=[];for(let e=Math.min(i,n);e<=Math.max(i,n);e+=1)r.push(this.filteredItems[e]);this.schemeContainer.selectMultipleItems(r,!0),this.$forceUpdate()},toggleItemCollapseState(e){e.meta.collapsed=!e.meta.collapsed,_f(e.childItems,e,((e,t)=>{e.meta.collapseBitMask=t.meta.collapseBitMask<<e.meta.ancestorIds.length|(t.meta.collapsed?1:0)})),this.$forceUpdate()},toggleItemVisibility(e){e.visible=!e.visible,mh.Z.item.changed.specific.$emit(this.editorId,e.id,"visible"),mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${e.id}.visible`),this.$forceUpdate()},toggleItemLock(e){e.locked=!e.locked,this.schemeContainer.updateEditBox(),this.$forceUpdate()},onAnyItemSelected(){this.scrollToSelection(),this.$forceUpdate()},onAnyItemDeselected(){this.$forceUpdate()},filterItemsByKeyword(e){const t=e.toLowerCase();return(0,Fe.hX)(this.schemeContainer.getItems(),(e=>(e.name||"").toLowerCase().indexOf(t)>=0)).map(Af)},onItemSelectorResizeDraggerMouseDown(e){(0,jh.E)(e).onDrag((e=>{const t=this.$refs.itemSelectorContainer.getBoundingClientRect(),i=e.pageY-t.bottom,n=zh.Z.clamp(this.height+i,this.minHeight,window.innerHeight-140);this.height=n,If.save("height",this.height)})).build()}},watch:{nameEdit:{deep:!0,handler(){if(this.nameEdit.itemId){const e=this.schemeContainer.findItemById(this.nameEdit.itemId);e&&(e.name=this.nameEdit.name,mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${e.id}.name`))}}},searchKeyword(e){this.filteredItems=e?this.filterItemsByKeyword(e):this.schemeContainer.getItems().map(Af)}}},Tf=Ef,Mf=(0,Re.Z)(Tf,Sf,[],!1,null,null,null).exports;var $f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{title:"Shape Exporter","primary-button":e.primaryButton},on:{"primary-submit":e.exportShapeGroup,close:function(t){return e.$emit("close")}}},[i("div",{staticClass:"shape-exporter-modal-body"},[i("div",{staticClass:"shape-exporter-settings"},[e.errorMessage?i("div",{staticClass:"msg msg-error"},[e._v("\n                "+e._s(e.errorMessage)+"\n            ")]):e._e(),e._v(" "),e.shapeGroup?i("div",[i("h4",[e._v(e._s(e.shapeGroup.group))]),e._v(" "),i("img",{attrs:{src:e.shapeGroup.preview,alt:""}})]):e._e()]),e._v(" "),i("div",{staticClass:"shape-exporter-shapes"},[i("table",[i("thead",[i("tr",[i("th",[e._v("ID")]),e._v(" "),i("th",[e._v("Name")]),e._v(" "),i("th",[e._v("Preview")])])]),e._v(" "),i("tbody",e._l(e.shapeGroup.shapes,(function(t){return i("tr",[i("td",[e._v(e._s(t.shapeConfig.id))]),e._v(" "),i("td",[e._v(e._s(t.name))]),e._v(" "),i("td",[i("img",{attrs:{width:"52px",height:"42px",src:t.shapeConfig.menuItems[0].iconUrl}})])])})),0)])])])])};function Of(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Df(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Of(Object(i),!0).forEach((function(t){Bf(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Of(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Bf(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}$f._withStripped=!0;const Lf={Group:"ext:group:shape_designer",Container:"ext:container:shape_designer",Pin:"ext:pin:shape_designer",TextSlot:"ext:textslot:shape_designer",Rect:"ext:rect:shape_designer",Ellipse:"ext:ellipse:shape_designer"};function Rf(e,t){return{type:"path",transformType:"relative",paths:(0,Fe.UI)(t.shapeProps.paths,(i=>({points:(0,Fe.UI)(i.points,(i=>{const n=(0,lu.oJ)(i,t.area.w,t.area.h),r=(0,gh.rs)(n.x,n.y,t),s=(0,gh.N5)(r.x,r.y,e),o=Df(Df({},n),{},{x:s.x,y:s.y});if("B"===n.t){const e=(0,gh.rs)(n.x+n.x1,n.y+n.y1,t),i=(0,gh.rs)(n.x+n.x2,n.y+n.y2,t);o.x1=e.x-r.x,o.y1=e.y-r.y,o.x2=i.x-r.x,o.y2=i.y-r.y}return(0,lu.Vk)(o,e.area.w,e.area.h)})),closed:i.closed})))}}function Nf(e,t){const i={strokeColor:{"$-expr":"args.strokeColor"},strokeSize:{"$-expr":`${e.shapeProps.strokeSize}*args.strokeSize`},strokePattern:{"$-expr":"args.strokePattern"}};return"none"===e.shapeProps.fill.type?i.fill={type:"none"}:e.shapeProps.strokeFill||(0,Fe.cq)(e.tags,"stroke-fill")>=0?i.fill={type:"solid",color:{"$-expr":"args.strokeColor"}}:i.fill={"$-expr":"args.fill"},Df(Df({},t),i)}function Zf(e,t){return zh.Z.tooSmall(t)?0:zh.Z.tooSmall(1-t)?{"$-expr":e}:{"$-expr":`${e}*${zh.Z.roundPrecise(t,4)}`}}function Ff(e,t){if(t.shape===Lf.Rect)return function(e,t){const{w:i,h:n}=t.area;return{type:"path",transformType:"relative",paths:[{closed:!0,points:[[0,0],[i,0],[i,n],[0,n]].map((([e,i])=>(0,gh.rs)(e,i,t))).map((t=>(0,gh.N5)(t.x,t.y,e))).map((t=>({t:"L",x:zh.Z.roundPrecise2(100*t.x/e.area.w),y:zh.Z.roundPrecise2(100*t.y/e.area.h)})))}]}}(e,t);if(t.shape===Lf.Ellipse)return function(e,t){const{x:i,y:n,w:r,h:s}=t.area,o=r/e.area.w,a=s/e.area.h;let l=null;if("circle"===t.shapeProps.arcType)if("horizontal"===t.shapeProps.align){const t=zh.Z.roundPrecise((n+s/2)/e.area.h,4);l={x:Zf("width",i/e.area.w),y:{"$-expr":`height * ${t} - width * ${zh.Z.roundPrecise(o,4)}/2`},w:Zf("width",o),h:Zf("width",o)}}else l={x:{"$-expr":`width * ${zh.Z.roundPrecise((i+r/2)/e.area.w,4)} - height * ${zh.Z.roundPrecise(a,4)}/2`},y:Zf("height",n/e.area.h),w:Zf("height",a),h:Zf("height",a)};else l={x:Zf("width",i/e.area.w),y:Zf("height",n/e.area.h),w:Zf("width",o),h:Zf("height",a)};return{type:"ellipse",area:l}}(e,t);throw new Error(`${t.shape} is not supported in user designed shapes`)}function jf(e){return e===Lf.Rect||e===Lf.Ellipse||"path"===e}const zf={name:"body",area:{x:0,y:0,w:{"$-expr":"width"},h:{"$-expr":"height"}}};function Uf(e){if(e.shape!==Lf.Container)throw new Error('The root item should be a "dummy" shape');if(!e.childItems||0===e.childItems.length)throw new Error(`There are no items in the "${e.name}" shape container`);const t={shapeType:"templated",pins:[],textSlots:e.shapeProps.useBodyTextSlot?[zf]:[],primitives:[],outlines:[]},i=e.area.w,n=e.area.h;if(Math.abs(i)<.01||Math.abs(n)<.01)throw new Error("Root item should have proper area");return(0,fh.Hp)(e.childItems,(i=>{i.shapeProps.outline||"outline"===i.name||i.tags&&(0,Fe.cq)(i.tags,"outline")>=0?"path"===i.shape?t.outlines=t.outlines.concat(Rf(e,i)):jf(i.shape)&&(t.outlines=t.outlines.concat(Ff(e,i))):"path"===i.shape?t.primitives.push(Nf(i,Rf(e,i))):jf(i.shape)?t.primitives.push(Nf(i,Ff(e,i))):i.shape===Lf.Pin?t.pins.push(function(e,t){const i=(0,gh.rs)(t.area.w/2,t.area.h/2,t),n=function(e,t,i){const n=(0,gh.N5)(e,t,i);return{x:zh.Z.roundPrecise2(100*n.x/i.area.w),y:zh.Z.roundPrecise2(100*n.y/i.area.h)}}(i.x,i.y,e),r={x:{"$-expr":`width * ${zh.Z.roundPrecise(n.x/100,4)}`},y:{"$-expr":`height * ${zh.Z.roundPrecise(n.y/100,4)}`}};return t.shapeProps.normal&&(r.nx=zh.Z.roundPrecise(Math.cos((t.area.r-90)*Math.PI/180),4),r.ny=zh.Z.roundPrecise(Math.sin((t.area.r-90)*Math.PI/180),4)),r.id=t.name,r}(e,i)):i.shape===Lf.TextSlot&&t.textSlots.push(function(e,t){const i=(0,gh.rs)(0,0,t),n=(0,gh.rs)(t.area.w,0,t),r=(0,gh.rs)(0,t.area.h,t),s=(0,gh.N5)(i.x,i.y,t),o=(0,gh.N5)(n.x,n.y,t),a=(0,gh.N5)(r.x,r.y,t),l=Math.abs(o.x-s.x)/e.area.w,c=Math.abs(a.y-s.y)/e.area.w;return{name:t.name,area:{x:{"$-expr":`width * ${zh.Z.roundPrecise(s.x/e.area.w,4)}`},y:{"$-expr":`height * ${zh.Z.roundPrecise(s.y/e.area.h,4)}`},w:{"$-expr":`width * ${zh.Z.roundPrecise(l,4)}`},h:{"$-expr":`height * ${zh.Z.roundPrecise(c,4)}`},r:0},props:(0,kh.o)(t.textSlots.body,fh.td)}}(e,i))})),{shapeConfig:Df(Df({},t),{},{includeStandardArgs:!0})}}var Hf=i(7113);function qf(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Wf(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?qf(Object(i),!0).forEach((function(t){Vf(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):qf(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Vf(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Gf(e,t,i){return i>1?t=e/i:i<1?e=t*i:t=e=Math.min(e,t),{w:e,h:t}}function Kf(e,t,i,n,r){let s=`<g transform="translate(${t}, ${i})">`;const o={area:{x:0,y:0,w:n,h:r},shapeProps:{fill:{type:"solid",color:"#ffffff"},strokeColor:"#111111",strokeSize:2,strokePattern:"solid"}};return(0,Hf.W)(e.shapeConfig).shapeConfig.computePrimitives(o).forEach((e=>{if(e.svgPath){const t=e.fill&&"solid"===e.fill.type?e.fill.color:"none";s+=`<path d="${e.svgPath}" fill="${t}" stroke="#111111" stroke-width="${e.strokeSize}px" stroke-linejoin="round"/>`}})),s+"</g>"}function Jf(e){const t=e.name,i={group:t,shapes:[],preview:null};return Array.isArray(e.childItems)&&e.childItems.forEach((e=>{const n=function(e,t){if("ext:container:shape_designer"!==e.shape)return null;let i=(e.shapeProps.shapeId||"").trim();i&&!/^shape(\s*|-)[0-9]*$/.test(i.toLowerCase())||(i=e.name.toLowerCase().replaceAll(/[\W_]+/g,"-"));let n=1;e.area.w>0&&e.area.h>0&&(n=e.area.w/e.area.h);const r=Uf(e),s=function(e,t){const{w:i,h:n}=Gf(42,32,t);let r=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 ${i} ${n}" xml:space="preserve" width="${i}px" height="${n}px">`;return r+=Kf(e,3,3,i-6,n-6),r+="</svg>",r}(r,n),o=(0,wh.cv)(s),a=Gf(80,80,n),l=Gf(150,150,n),c={};(0,Fe.Ed)(r.shapeConfig.textSlots,(e=>{c[e.name]=e.props,delete e.props}));const h={group:t,name:e.name,iconUrl:`data:image/svg+xml;base64,${o}`,size:{w:zh.Z.roundPrecise1(a.w),h:zh.Z.roundPrecise1(a.h)},previewArea:{x:0,y:0,w:zh.Z.roundPrecise1(l.w),h:zh.Z.roundPrecise1(l.h),r:0}};return r.shapeConfig.textSlots.length>0&&(h.item={textSlots:c}),{name:e.name,widthToHeightRatio:n,shapeConfig:Wf(Wf({},r.shapeConfig),{},{id:i,menuItems:[h]})}}(e,t);n&&i.shapes.push(n)})),i.preview=function(e){let t=0,i=0,n="";for(let r=0;r<e.shapes.length&&t<4;r++){const{w:s,h:o}=Gf(80,80,e.shapes[r].widthToHeightRatio),a=40+100*i-s/2,l=40+100*t-o/2;n+=Kf(e.shapes[r],a,l,s,o),i+=1,i>=5&&(i=0,t+=1)}const r=100*Math.min(e.shapes.length,5)+10,s=100*Math.min(t+1,4)+10;return"data:image/svg+xml;base64,"+(0,wh.cv)(`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="-10 -10 ${r+10} ${s+10}" xml:space="preserve" width="${r+20}px" height="${s+20}px">${n}</svg>`)}(i),i.shapes.forEach((e=>delete e.widthToHeightRatio)),i}const Yf={props:["shapeGroupItem"],components:{Modal:je.Z},data(){let e=null,t=null;try{e=Jf(this.shapeGroupItem)}catch(e){console.error(e),t="Failed to generate shape group"}return{shapeGroup:e,errorMessage:t}},methods:{exportShapeGroup(){if(this.shapeGroup){const e=this.shapeGroup.group.toLocaleLowerCase().replaceAll(/[^a-z0-9]/gi,"-");Uc.Z.forceDownload(`${e}.json`,"application/json",JSON.stringify(this.shapeGroup))}}},computed:{primaryButton(){return this.shapeGroup?"Export":null}}},Qf=(0,Re.Z)(Yf,$f,[],!1,null,null,null).exports;var Xf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"frame-animator-panel"},[e.light?i("div",{staticClass:"frame-animator-light"},[i("span",{staticClass:"btn btn-secondary btn-small",on:{click:e.openAnimationEditor}},[i("i",{staticClass:"fas fa-film"}),e._v(" Open Animation Editor")]),e._v(" "),i("span",{staticClass:"frame-animator-title"},[e._v(e._s(e.framePlayer.name))])]):i("div",{staticClass:"frame-animator-container"},[i("div",{staticClass:"frame-animator-header"},[i("div",{staticClass:"frame-animator-title"},[i("i",{staticClass:"fas fa-film"}),e._v(" "),i("h3",[e._v(e._s(e.framePlayer.name))])]),e._v(" "),i("div",{staticClass:"frame-animator-controls"},[i("div",{staticClass:"frame-animator-player-buttons"},[e.isRecording?i("div",[i("span",{staticClass:"btn btn-danger btn-small",attrs:{title:"Record items for currently selected frame"},on:{click:e.stopRecording}},[i("i",{staticClass:"fas fa-stop"}),e._v(" Stop recording\n                        ")])]):i("div",[i("span",{staticClass:"btn btn-danger btn-small",attrs:{title:"Record items for currently selected frame"},on:{click:e.startRecording}},[i("i",{staticClass:"far fa-dot-circle"})]),e._v(" "),i("span",{staticClass:"btn btn-secondary btn-small",attrs:{title:"Previous"},on:{click:e.moveFrameLeft}},[i("i",{staticClass:"fas fa-angle-left"})]),e._v(" "),e.isPlaying?i("span",{staticClass:"btn btn-secondary btn-small",attrs:{title:"Stop"},on:{click:e.stopAnimations}},[i("i",{staticClass:"fas fa-stop"})]):i("span",{staticClass:"btn btn-secondary btn-small",attrs:{title:"Play"},on:{click:e.playAnimations}},[i("i",{staticClass:"fas fa-play"})]),e._v(" "),i("span",{staticClass:"btn btn-secondary btn-small",attrs:{title:"Next"},on:{click:e.moveFrameRight}},[i("i",{staticClass:"fas fa-angle-right"})])])]),e._v(" "),!e.isRecording&&e.selectedFrameControl.trackIdx>=0&&e.selectedFrameControl.frame>=0?i("div",{staticClass:"frame-animator-frame-input"},[!e.selectedFrameControl.blank&&e.selectedFrameControl.propertyDescriptor?i("div",[i("PropertyInput",{key:"frame-prop-input-"+e.selectedFrameControl.trackIdx+"-"+e.selectedFrameControl.frame,attrs:{editorId:e.editorId,descriptor:e.selectedFrameControl.propertyDescriptor,value:e.selectedFrameControl.value,shapeProps:{},schemeContainer:e.schemeContainer,itemId:null},on:{input:e.onFramePropertyInput}})],1):e._e()]):e._e()]),e._v(" "),i("div",{staticClass:"frame-animator-right-panel"},[i("span",{staticClass:"icon",on:{click:function(t){return e.$emit("close")}}},[i("i",{staticClass:"fas fa-times"})])])]),e._v(" "),i("div",{ref:"frameAnimatorCanvas",staticClass:"frame-animator-canvas"},[i("table",{staticClass:"frame-animator-matrix"},[i("thead",[i("tr",{class:{"drop-below":e.trackDrag.on&&e.trackDrag.dropHead}},[i("th",{staticClass:"frame-animator-buttons"},[i("span",{staticClass:"btn btn-small",on:{click:function(t){return e.toggleAddTrackModal()}}},[e._v("Add track")])]),e._v(" "),e._l(e.totalFrames,(function(t){return i("th",{class:{current:t===e.currentFrame},attrs:{title:t},on:{click:function(i){return e.selectFrame(t)}}},[e._v("\n                            "+e._s(t)+"\n                        ")])}))],2)]),e._v(" "),i("tbody",[e._l(e.framesMatrix,(function(t,n){return i("tr",{staticClass:"track-droppable-area",class:{"selected-track":n===e.selectedTrackIdx,"track-missing":!t.propertyDescriptor&&"function-header"!==t.kind&&"function"!==t.kind,"drop-below":e.trackDrag.on&&!e.trackDrag.dropHead&&n===e.trackDrag.dstTrackIdx},style:{"background-color":t.color},attrs:{"data-track-index":n}},[i("td",{staticClass:"frame-animator-property",class:["frame-animator-property-"+t.kind,"item"===t.kind||"function-header"===t.kind?"draggable":null],attrs:{colspan:"function-header"===t.kind||"panel-buttons"===t.kind?e.totalFrames+1:1},on:{mousedown:function(t){return e.onTrackLabelMouseDown(n,t)}}},["item"===t.kind?i("div",[t.itemName?i("span",{staticClass:"frame-item-name"},[e._v(e._s(t.itemName))]):i("span",{staticClass:"frame-item-name"},[e._v("Deleted item")]),e._v(" "),t.propertyDescriptor&&t.propertyDescriptor.name?i("span",{staticClass:"frame-item-property"},[e._v(e._s(t.propertyDescriptor.name))]):i("span",{staticClass:"frame-item-property"},[e._v(e._s(t.property))])]):"sections"===t.kind?i("div",[i("i",{staticClass:"fas fa-paragraph"}),e._v(" Sections\n                            ")]):"function-header"===t.kind?i("div",{staticClass:"function-animator-track-header"},[e._v("\n                                "+e._s(t.name)+"\n                            ")]):"function"===t.kind||"scheme"===t.kind?i("div",[e._v("\n                                "+e._s(t.property)+"\n                            ")]):"panel-buttons"===t.kind?i("div",[i("span",{staticClass:"btn btn-small",on:{click:function(t){return e.toggleAddTrackModal()}}},[e._v("Add track")])]):e._e(),e._v(" "),"panel-buttons"!==t.kind?i("div",{staticClass:"frame-property-operations"},["function-header"===t.kind?i("span",{staticClass:"toggle-button",attrs:{title:"Edit function"},on:{click:function(i){return e.toggleEditFunctionArgumentsForTrack(t)}}},[i("i",{staticClass:"fas fa-cog"})]):e._e(),e._v(" "),"sections"!==t.kind&&"function"!==t.kind?i("span",{staticClass:"toggle-button",attrs:{title:"Remove animation track"},on:{click:function(i){return e.removeAnimationTrack(t)}}},[i("i",{staticClass:"fas fa-trash"})]):e._e()]):e._e()]),e._v(" "),e._l(t.frames,(function(r,s){return i("td",{staticClass:"frame frame-droppable-area",class:{active:!r.blank,current:r.frame===e.currentFrame,"drop-candidate":e.frameDrag.source.trackIdx===n&&e.frameDrag.destination.frameIdx===s},attrs:{"data-track-idx":n,"data-frame-idx":s,title:t.property+", frame: "+r.frame+", interpolation: "+r.kind+", value: "+r.value,draggable:"true"},on:{dblclick:function(t){return e.onFrameDoubleClick(n,s)},dragstart:e.preventEvent,drag:e.preventEvent,mousedown:function(t){return e.onMatrixFrameMouseDown(n,s,t)},contextmenu:function(t){return e.onFrameRightClick(t,n,s)}}},[r.blank||e.frameDrag.on&&n===e.frameDrag.source.trackIdx&&s===e.frameDrag.source.frameIdx?i("div",{staticClass:"empty-frame-number"},[e._v(e._s(r.frame))]):i("div",{staticClass:"active-frame"},["visibility-true"===r.icon?i("i",{staticClass:"fas fa-lightbulb"}):"visibility-false"===r.icon?i("i",{staticClass:"far fa-lightbulb"}):"opacity-none"===r.icon?i("i",{staticClass:"fa-regular fa-circle"}):"opacity-low"===r.icon?i("i",{staticClass:"fa-solid fa-circle-half-stroke"}):i("i",{staticClass:"fas fa-circle"})])])}))],2)})),e._v(" "),i("tr",[i("td",{staticClass:"frame-animator-buttons",attrs:{colspan:e.totalFrames+1}},[i("span",{staticClass:"btn btn-small",on:{click:function(t){return e.toggleFunctionAddModal()}}},[e._v("Add path function")])])])],2)])])]),e._v(" "),i("div",{ref:"frameDragPreview",staticClass:"frame-drag-preview",class:{"is-dragging":e.frameDrag.on}},[e.frameDrag.source.blank?e._e():i("span",{staticClass:"active-frame"},[i("i",{staticClass:"fas fa-circle"})])]),e._v(" "),i("div",{ref:"trackDragPreview",staticClass:"track-drag-preview",class:{"is-dragging":e.trackDrag.on}},[e._v("\n        "+e._s(e.trackDrag.text)+"\n    ")]),e._v(" "),e.frameContextMenu.shown?i("ContextMenu",{attrs:{mouseX:e.frameContextMenu.mouseX,mouseY:e.frameContextMenu.mouseY,options:e.frameContextMenu.options},on:{selected:e.onContextMenuOptionClick,close:function(t){e.frameContextMenu.shown=!1}}}):e._e(),e._v(" "),e.functionEditorModal.shown&&e.functionEditorModal.functionDescription?i("modal",{attrs:{title:'"'+e.functionEditorModal.functionDescription.name+'" arguments',primaryButton:e.functionEditorModal.isAdding?"Add":null,closeName:e.functionEditorModal.isAdding?"Cancel":"Close",width:400,"use-mask":!1},on:{close:function(t){e.functionEditorModal.shown=!1},"primary-submit":function(t){return e.onFunctionModalSubmit()}}},[i("div",{staticStyle:{"max-width":"400px"}},[i("ArgumentsEditor",{attrs:{editorId:e.editorId,argsDefinition:e.functionEditorModal.functionDescription.args,args:e.functionEditorModal.args,schemeContainer:e.schemeContainer},on:{"argument-changed":e.onFunctionModalArgumentChanged}})],1)]):e._e(),e._v(" "),e.addTrackModal.shown?i("modal",{attrs:{title:"Add animation track",primaryButton:"Add track",width:400,"use-mask":!1},on:{close:function(t){e.addTrackModal.shown=!1},"primary-submit":function(t){return e.addTrackFromModal()}}},[i("p",[e._v("Select the item and its property")]),e._v(" "),i("table",{staticClass:"properties-table"},[i("tbody",[i("tr",[i("td",{staticClass:"label",attrs:{width:"150px"}},[e._v("\n                        Item\n                    ")]),e._v(" "),i("td",[i("ElementPicker",{attrs:{editorId:e.editorId,"scheme-container":e.schemeContainer,element:e.addTrackModal.element,useSelf:!1,allowTags:!1,allowNone:!1},on:{selected:function(t){return e.onAddTrackModalElementSelected(arguments[0])}}})],1)]),e._v(" "),i("tr",[i("td",{staticClass:"label",class:{disabled:!e.addTrackModal.element},attrs:{width:"150px"}},[e._v("\n                        Property\n                    ")]),e._v(" "),i("td",[i("Dropdown",{key:"track-property-dropdown-"+e.editorId+"-"+e.addTrackModal.element,attrs:{disabled:!e.addTrackModal.element,options:e.addTrackModal.properties},on:{selected:e.onAddTrackModalPropertySelected}},[e.addTrackModal.selectedPropertyOption?i("span",[i("i",{class:e.addTrackModal.selectedPropertyOption.iconClass}),e._v("\n                                "+e._s(e.addTrackModal.selectedPropertyOption.name)+"\n                            ")]):i("span",[e._v("Choose property")])])],1)])])])]):e._e()],1)};Xf._withStripped=!0;var eg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"context-menu",style:{"max-height":e.maxHeight+"px"},attrs:{oncontextmenu:"return false;"}},[i("ul",{ref:"rootContextMenu",style:{top:e.y+"px",left:e.x+"px"}},e._l(e.options,(function(t,n){return i("li",{on:{click:function(i){return e.onOptionSelected(t)}}},[i("span",{staticClass:"context-menu-suboptions-icon"},[t.subOptions?i("i",{staticClass:"fas fa-caret-right"}):e._e()]),e._v(" "),t.iconClass?i("i",{class:t.iconClass}):e._e(),e._v(" "),i("span",{staticClass:"context-menu-option-name"},[e._v(e._s(t.name))]),e._v(" "),t.subOptions?i("ul",{style:e.subOptionsStyle(n,t.subOptions)},e._l(t.subOptions,(function(t){return i("li",{on:{click:function(i){return e.onOptionSelected(t)}}},[t.iconClass?i("i",{class:t.iconClass}):e._e(),e._v(" "),i("span",{staticClass:"context-menu-option-name"},[e._v(e._s(t.name))])])})),0):e._e()])})),0)])};eg._withStripped=!0;const tg={props:["mouseX","mouseY","options"],mounted(){document.body.addEventListener("mousedown",this.onDocumentClick),document.body.addEventListener("touchmove",this.onDocumentClick),document.body.addEventListener("touchstart",this.onDocumentClick);const e=this.$refs.rootContextMenu.getBoundingClientRect(),t=e.right-window.innerWidth,i=e.bottom-window.innerHeight;this.menuWidth=e.width,this.menuHeight=e.height,t>0&&(this.x-=t),i>0&&(this.y-=i)},beforeDestroy(){document.body.removeEventListener("mousedown",this.onDocumentClick),document.body.removeEventListener("touchmove",this.onDocumentClick),document.body.removeEventListener("touchstart",this.onDocumentClick)},data(){return{domId:jl().generate(),x:this.mouseX,y:this.mouseY,menuWidth:100,menuHeight:100,maxHeight:window.innerHeight-30,mountTime:(new Date).getTime()}},methods:{onDocumentClick(e){Uc.Z.domHasParentNode(e.target,(e=>e.classList.contains("context-menu")))||(new Date).getTime()-this.mountTime>500&&setTimeout((()=>{this.$emit("close")}),100)},onOptionSelected(e){e.subOptions||(this.$emit("selected",e),this.$emit("close"))},subOptionsStyle(e,t){const i={left:this.menuWidth-4+"px","min-width":`${this.menuWidth}px`},n=this.menuHeight/this.options.length,r=t.length*n,s=this.x+this.menuWidth,o=e*n+this.y,a=s+this.menuWidth-window.innerWidth,l=o+r-window.innerHeight;return l>0&&(i.top=-l+"px"),a>0&&(i.left=4-this.menuWidth+"px"),i}}},ig=(0,Re.Z)(tg,eg,[],!1,null,null,null).exports;function ng(e){return null!==e&&"object"==typeof e}function rg(e,t,i,n){let r=[];return n&&i.length>0&&!n(i)?{changes:[]}:(function(e){const t=typeof e;return"boolean"===t||"string"===t||"number"===t}(e)&&e!==t?r.push({path:i,oldValue:e,value:t}):ng(e)?r=r.concat(function(e,t,i,n){if(!ng(t))return{changes:i,oldValue:e,value:t};let r=[];return(0,Fe.Ed)(e,((e,s)=>{const o=i.concat([s]);if(t.hasOwnProperty(s)){const i=rg(e,t[s],o,n);i.changes.length>0&&(r=r.concat(i.changes))}})),{changes:r}}(e,t,i,n).changes):Array.isArray(e)&&(r=r.concat(sg(e,t,i,n).changes)),{changes:r})}function sg(e,t,i,n){if(!isArray(modifiedObject))return{changes:i,oldValue:originObject,value:modifiedObject};let r=[];return(0,Fe.Ed)(e,((e,s)=>{const o=i.concat([s]);if(t.length>s){const t=rg(e,modifiedObject[s],o,n);t.changes.length>0&&(r=r.concat(t.changes))}})),{changes:r}}var og=i(8370),ag=i(9375);const lg=new Set(["area","opacity","selfOpacity","visible","shapeProps"]);function cg(e,t,i){let n=Math.abs(Uc.Z.hashString(e+t))%360;const r=Math.abs(Uc.Z.hashString(i));n=(n+(r%20-10))%360;const s=[20,70],o=[87,97];return`hsl(${n}, ${r%(s[1]-s[0])+s[0]}%, ${r%(o[1]-o[0])+o[0]}%)`}const hg=["points","paths","sourceItem","destinationItem","sourceItemPosition","destinationItemPosition"];function dg(e){return t=>!(!lg.has(t[0])||("connector"===e.shape||"path"===e.shape)&&t.length>1&&"shapeProps"===t[0]&&hg.indexOf(t[1])>=0||"frame_player"===e.shape&&t.length>1&&"shapeProps"===t[0])}let ug=!1;function pg(e,t){for(let i=0;i<e.frames.length;i++)if(e.frames[i].frame===t)return i;return-1}const mg={props:{editorId:{type:String,required:!0},schemeContainer:{type:Object,required:!0},framePlayer:{type:Object,required:!0},light:{type:Boolean,default:!0}},components:{ContextMenu:ig,PropertyInput:Qp,ArgumentsEditor:up,Modal:je.Z,ElementPicker:Vu,Dropdown:wd.Z},beforeMount(){this.compileAnimations(),mh.Z.schemeChangeCommitted.$on(this.editorId,this.onSchemeChange),mh.Z.item.changed.specific.$on(this.editorId,this.framePlayer.id,this.onFramePlayerChanged),mh.Z.schemeRebased.$on(this.editorId,this.compileAnimations)},beforeDestroy(){mh.Z.schemeChangeCommitted.$off(this.editorId,this.onSchemeChange),mh.Z.item.changed.specific.$off(this.editorId,this.framePlayer.id,this.onFramePlayerChanged),mh.Z.schemeRebased.$off(this.editorId,this.compileAnimations),this.$emit("recording-state-updated",!1)},data(){return{originSchemeContainer:null,currentFrame:1,totalFrames:this.framePlayer.shapeProps.totalFrames,framesMatrix:this.buildFramesMatrix(),compiledAnimations:[],isPlaying:!1,isRecording:!1,recordingPushbackTimer:null,recordingPushbackInterval:100,selectedTrackIdx:-1,frameDrag:{on:!1,source:{blank:!0,trackIdx:-1,frameIdx:-1},destination:{frameIdx:-1}},trackDrag:{on:!1,srcAnimationId:null,srcTrackIdx:-1,kind:null,text:"Drag it",dstTrackIdx:-1,dropHead:!1},frameContextMenu:{shown:!1,mouseX:0,mouseY:0,options:[]},selectedFrameControl:{value:null,trackIdx:-1,frame:-1,blank:!0,propertyDescriptor:null},shouldRecompileAnimations:!1,functionEditorModal:{shown:!1,funcName:null,functionId:null,args:null,isAdding:!0,functionDescription:null},addTrackModal:{element:null,property:null,selectedPropertyOption:null,properties:[],shown:!1}}},methods:{openAnimationEditor(){this.$emit("animation-editor-opened",this.framePlayer)},selectFrame(e){this.currentFrame=e,this.shouldRecompileAnimations&&this.compileAnimations(),(0,Fe.Ed)(this.compiledAnimations,(t=>{t.toggleFrame(e)})),this.schemeContainer.updateEditBox(),this.selectedFrameControl.trackIdx>=0&&this.selectFrameControl(this.selectedFrameControl.trackIdx,e-1),this.isRecording&&(this.originSchemeContainer=new Nd.ZP(Uc.Z.clone(this.schemeContainer.scheme),this.editorId,"edit",this.$store.state.apiClient))},selectTrackAndFrame(e,t){this.selectedTrackIdx=e;const i=this.framesMatrix[e];this.selectFrameControl(e,t),this.selectFrame(i.frames[t].frame)},selectFrameControl(e,t){const i=this.framesMatrix[e];if(!i.frames)return;const n=i.frames[t];this.selectedFrameControl.propertyDescriptor=i.propertyDescriptor,n.blank?this.selectedFrameControl.blank=!0:(this.selectedFrameControl.blank=!1,this.selectedFrameControl.value=n.value),this.selectedFrameControl.trackIdx=e,this.selectedFrameControl.frame=n.frame},resetFrameControl(){this.selectedFrameControl.trackIdx=-1,this.selectedFrameControl.frame=-1,this.selectedFrameControl.propertyDescriptor=null},onFrameDoubleClick(e,t){const i=this.framesMatrix[e];if("sections"===i.kind)this.addSectionFrame(e,t),this.selectTrackAndFrame(e,t);else if("function"===i.kind)this.addFunctionFrame(e,t),this.selectTrackAndFrame(e,t);else{const n=i.frames[t];n.blank&&(this.recordCurrentValueForTrack(i,n),this.selectTrackAndFrame(e,t))}},fillMatrixFrames(e,t){const i=[];e.sort(((e,t)=>e.frame-t.frame));const n=e=>{const t=i.length;for(let n=0;n<e;n++)i.push({frame:n+t+1,blank:!0})},r=this.framePlayer.shapeProps.totalFrames;let s=null;return(0,Fe.Ed)(e,(e=>{if(e.frame-1>i.length&&e.frame<=r&&n(e.frame-1-i.length),(!s||s.frame!==e.frame)&&e.frame<=r){const n=Uc.Z.clone(e);this.enrichFrameWithIcon(n,t),i.push(n)}s=e})),i.length<r&&n(r-i.length),i},enrichFrameWithIcon(e,t){"visibility"===t?e.icon="visibility-"+e.value:"opacity"===t&&(e.value<=25?e.icon="opacity-none":e.value<75?e.icon="opacity-low":e.icon="opacity-high")},buildFramesMatrix(){const e=[];return this.fixAllAnimationFrames(),(0,Fe.Ed)(this.framePlayer.shapeProps.animations,(t=>{if("function"===t.kind)return;let i=null,n=null,r=null;if("item"===t.kind){const e=this.schemeContainer.findItemById(t.itemId);e&&(i=e.name,n=(0,og.qK)(e,t.property),"visible"===t.property?r="visibility":"opacity"===t.property||"selfOpacity"===t.property?r="opacity":n&&(r=n.type))}else"scheme"===t.kind&&(n=(0,og.uR)(t.property));const s=this.fillMatrixFrames(t.frames,r),o={kind:t.kind,id:t.id,itemId:t.itemId,property:t.property,color:cg(t.kind,t.itemId,t.property),propertyDescriptor:n,valueType:r,itemName:i,frames:s};e.push(o)})),e.push(this.buildSectionsTrack()),this.framePlayer.shapeProps.animations.length>5&&e.push({kind:"panel-buttons"}),e.concat(this.buildFunctionTracks())},fixAllAnimationFrames(){const e=e=>{if(e.sort(((e,t)=>e.frame-t.frame)),!(e.length<2))for(let t=1;t<e.length;t++)e[t].frame===e[t-1].frame&&(e.splice(t,1),t-=1)};(0,Fe.Ed)(this.framePlayer.shapeProps.animations,(t=>{e(t.frames)})),e(this.framePlayer.shapeProps.sections)},buildSectionsTrack(){let e=this.framePlayer.shapeProps.sections;return e||(e=[]),{kind:"sections",propertyDescriptor:{type:"string",name:"Section Name"},frames:this.fillMatrixFrames(e,"section")}},buildFunctionTracks(){const e=[];return(0,Fe.Ed)(this.framePlayer.shapeProps.animations,(t=>{if("function"!==t.kind)return;const i=this.framePlayer.shapeProps.functions[t.funcId];if(!i)return;const n=ag.Z[i.functionId];if(!n)return;e.push({kind:"function-header",id:t.id,funcId:t.funcId,name:n.getFullName(i.args,this.schemeContainer)});const r=n.inputs[t.property];r&&e.push({kind:"function",id:t.id,funcId:t.funcId,property:t.property,frames:this.fillMatrixFrames(t.frames,"number"),propertyDescriptor:r})})),e},startRecording(){this.isRecording=!0,this.$emit("recording-state-updated",!0),this.originSchemeContainer=new Nd.ZP(Uc.Z.clone(this.schemeContainer.scheme),this.editorId,"edit",this.$store.state.apiClient)},stopRecording(){this.isRecording=!1,this.$emit("recording-state-updated",!1)},onSchemeChange(){this.isRecording&&(this.recordingPushbackTimer&&clearTimeout(this.recordingPushbackTimer),this.recordingPushbackTimer=setTimeout((()=>{this.recordCurrentFrame(),this.recordingPushbackTimer=null}),this.recordingPushbackInterval))},recordCurrentFrame(){const e=function(e,t){const i=[];return(0,Fe.Ed)(t.getItems(),(t=>{const n=e.findItemById(t.id);if(!n)return;const r=function(e,t,i){return rg(e,t,[],i?i.fieldCheck:null)}(t,n,{fieldCheck:dg(n)});r.changes&&r.changes.length>0&&(0,Fe.Ed)(r.changes,(e=>{0!==e.path.length&&i.push({kind:"item",id:n.id,property:e.path.join("."),value:e.value,oldValue:e.oldValue})}))})),e.scheme.style.backgroundColor!==t.scheme.style.backgroundColor&&i.push({kind:"scheme",id:null,property:"style.backgroundColor",value:e.scheme.style.backgroundColor}),i}(this.schemeContainer,this.originSchemeContainer);(0,Fe.Ed)(e,(e=>{if("number"==typeof e.value&&"number"==typeof e.oldValue&&zh.Z.tooSmall(e.value-e.oldValue))return;let t=(0,Fe.sE)(this.framePlayer.shapeProps.animations,(t=>((e,t)=>e.kind===t.kind&&e.property===t.property&&("item"===e.kind?e.id===t.itemId:"scheme"===e.kind))(e,t)));if(t){let i=-1,n=!1,r=null;for(let e=0;e<t.frames.length&&!n;e++){const s=t.frames[e];s.frame===this.currentFrame?(i=e,n=!0,r=s,this.shouldRecompileAnimations=!0):n=!0}r&&i>=0?r.frame===this.currentFrame?r.value=e.value:t.frames.splice(i,0,{frame:this.currentFrame,value:e.value,kind:"linear"}):t.frames.splice(0,0,{frame:this.currentFrame,value:e.value,kind:"linear"})}else{const t=[{frame:this.currentFrame,value:e.value,kind:"linear"}];this.currentFrame>1&&t.splice(0,0,{frame:1,value:e.oldValue,kind:"linear"});const i={kind:e.kind,id:jl().generate(),property:e.property,frames:t};"item"===e.kind&&(i.itemId=e.id),this.framePlayer.shapeProps.animations.push(i)}})),this.updateFramesMatrix()},updateFramesMatrix(){this.framesMatrix=this.buildFramesMatrix(),this.shouldRecompileAnimations=!0},compileAnimations(){this.compiledAnimations=(0,og.yl)(this.framePlayer,this.schemeContainer),this.shouldRecompileAnimations=!1},removeAnimationTrack(e){if("function-header"===e.kind){this.framePlayer.shapeProps.functions.hasOwnProperty(e.funcId)&&delete this.framePlayer.shapeProps.functions[e.funcId];const t=this.framePlayer.shapeProps.animations;for(let i=0;i<t.length;i++)"function"===t[i].kind&&t[i].id===e.id&&(t.splice(i,1),i-=1);this.updateFramesMatrix()}else if("item"===e.kind){const t=this.findAnimationIndexForTrack(e);if(t<0)return null;this.framePlayer.shapeProps.animations.splice(t,1),this.updateFramesMatrix()}},findAnimationIndexForTrack(e){for(let t=0;t<this.framePlayer.shapeProps.animations.length;t++){const i=this.framePlayer.shapeProps.animations[t];if(i.kind===e.kind&&i.id===e.id&&i.property===e.property)return t}return-1},preventEvent(e){e.preventDefault(),e.stopPropagation()},onMatrixFrameMouseDown(e,t,i){const n=this.framesMatrix[e].frames[t];(0,jh.E)(i).withDraggedElement(this.$refs.frameDragPreview).withDroppableClass("frame-droppable-area").onSimpleClick((()=>{this.selectTrackAndFrame(e,t)})).onDragStart((()=>{this.frameDrag.on=!0,this.frameDrag.source.blank=n.blank,this.frameDrag.source.trackIdx=e,this.frameDrag.source.frameIdx=t})).onDragOver(((e,t)=>{const i=parseInt(t.getAttribute("data-track-idx")),n=parseInt(t.getAttribute("data-frame-idx"));i===this.frameDrag.source.trackIdx?this.frameDrag.destination.frameIdx=n:this.frameDrag.destination.frameIdx=-1})).onDrop(((e,t)=>{const i=parseInt(t.getAttribute("data-track-idx")),n=parseInt(t.getAttribute("data-frame-idx"));i===this.frameDrag.source.trackIdx&&this.onMatrixDragEnd(this.frameDrag.source.trackIdx,this.frameDrag.source.frameIdx,n)})).onDone((e=>{this.frameDrag.on=!1,this.frameDrag.source.trackIdx=-1,this.frameDrag.source.frameIdx=-1,this.frameDrag.destination.frameIdx=-1})).build()},onMatrixDragEnd(e,t,i){if(i===t||i<0)return;const n=this.framesMatrix[e],r=n.frames[t],s=n.frames[i];if("sections"===n.kind){const e=this.framePlayer.shapeProps.sections;if(r.blank){let t=-1;for(let i=0;i<e.length&&t<0;i++)e[i].frame===s.frame&&(t=i);t>=0&&e.splice(t,1)}else{const t={frame:s.frame,value:r.value};let i=-1;for(let t=0;t<e.length&&i<0;t++)e[t].frame===r.frame&&(i=t);i>=0?e[i]=t:e.push(t),e.sort(((e,t)=>e.frame-t.frame))}}else{const e=this.findAnimationIndexForTrack(n);if(e<0)return;const t=this.framePlayer.shapeProps.animations[e];if(r.blank&&!s.blank){const e=pg(t,s.frame);if(e<0)return;t.frames.splice(e,1)}else if(!r.blank){if(s.blank){const e=pg(t,r.frame);if(e<0)return;t.frames[e].frame=i+1}else{const e=pg(t,r.frame);if(e<0)return;const n=pg(t,s.frame);if(n<0)return;t.frames[e].frame=i+1,t.frames.splice(n,1)}t.frames.sort(((e,t)=>e.frame-t.frame))}}this.updateFramesMatrix()},playAnimations(){this.resetFrameControl(),this.shouldRecompileAnimations&&this.compileAnimations(),this.isPlaying=!0,function(e,t,i,n,r,{onFrame:s,onFinish:o}){if(ug)return;ug=!0;let a=0,l=i;s(l);const c=(h,d)=>{a+=d;let u=i+a*Math.max(n,.01)/1e3,p=Math.floor(u);p>l&&(l=p,s(l)),(0,Fe.Ed)(t,(e=>{e.toggleFrame(u)})),e.updateEditBox(),p<r&&ug?window.requestAnimationFrame((()=>{const e=performance.now();c(e,e-h)})):(ug=!1,o())};c(performance.now(),0)}(this.schemeContainer,this.compiledAnimations,this.currentFrame,this.framePlayer.shapeProps.fps,this.framePlayer.shapeProps.totalFrames,{onFrame:e=>{this.currentFrame=e},onFinish:()=>{this.isPlaying=!1}})},stopAnimations(){ug=!1},moveFrameLeft(){this.isPlaying||this.currentFrame>1&&this.selectFrame(this.currentFrame-1)},moveFrameRight(){this.isPlaying||this.currentFrame<this.framePlayer.shapeProps.totalFrames&&this.selectFrame(this.currentFrame+1)},onFrameRightClick(e,t,i){e.preventDefault();const n=this.framesMatrix[t],r=n.frames[i],s=[{name:"Insert empty frames",iconClass:"fa-solid fa-plus",clicked:()=>{this.insertEmptyFramesAtFrame(i+1)}}];this.framePlayer.shapeProps.totalFrames>1&&s.push({name:"Delete frame for all tracks",iconClass:"fas fa-trash",clicked:()=>{this.deleteFrames(i+1)}}),"function"!==n.kind&&s.push({name:"Record current value",iconClass:"far fa-dot-circle",clicked:()=>{this.recordCurrentValueForTrack(n,r)}}),r.blank||(s.push({name:"Clear frame",iconClass:"fa-solid fa-broom",clicked:()=>{if("sections"===n.kind){const e=this.framePlayer.shapeProps.sections;for(let t=0;t<e.length;t++)if(e[t].frame===r.frame){e.splice(t,1),n.frames[i]={frame:r.frame,blank:!0};break}}else{const e=this.findAnimationIndexForTrack(n);if(e<0)return;const t=pg(this.framePlayer.shapeProps.animations[e],r.frame);if(t<0)return;this.framePlayer.shapeProps.animations[e].frames.splice(t,1),this.updateFramesMatrix()}this.selectedTrackIdx===t&&this.selectedFrameControl.frame===r.frame&&this.selectTrackAndFrame(t,i)}}),(0,Fe.Ed)(jd.jU.values(),(e=>{r.kind!==e&&s.push({name:"Convert to "+e,interpolation:e,clicked:e=>{const t=this.findAnimationIndexForTrack(n);if(t<0)return;const i=pg(this.framePlayer.shapeProps.animations[t],r.frame);i<0||(this.framePlayer.shapeProps.animations[t].frames[i].kind=e.interpolation,this.updateFramesMatrix())}})}))),0!==s.length&&(this.frameContextMenu.options=s,this.frameContextMenu.mouseX=e.pageX,this.frameContextMenu.mouseY=e.pageY,this.frameContextMenu.shown=!0)},deleteFrames(e){const t=t=>{for(let i=t.length-1;i>=0;i-=1)t[i].frame>e?t[i].frame-=1:t[i].frame===e&&t.splice(i,1)};t(this.framePlayer.shapeProps.sections),this.framePlayer.shapeProps.animations.forEach((e=>{t(e.frames)})),this.framePlayer.shapeProps.totalFrames-=1,this.totalFrames=this.framePlayer.shapeProps.totalFrames,this.updateFramesMatrix(),mh.Z.schemeChangeCommitted.$emit(this.editorId)},insertEmptyFramesAtFrame(e){const t=t=>{for(let i=0;i<t.length;i++)t[i].frame>=e&&(t[i].frame+=1)};t(this.framePlayer.shapeProps.sections),this.framePlayer.shapeProps.animations.forEach((e=>{t(e.frames)})),this.framePlayer.shapeProps.totalFrames+=1,this.totalFrames=this.framePlayer.shapeProps.totalFrames,this.updateFramesMatrix(),mh.Z.schemeChangeCommitted.$emit(this.editorId)},onContextMenuOptionClick(e){e.clicked&&e.clicked(e)},recordCurrentValueForTrack(e,t){const i=this.findAnimationIndexForTrack(e);if(i<0)return;const n=this.framePlayer.shapeProps.animations[i];let r=0;if("item"===e.kind){const t=this.schemeContainer.findItemById(e.itemId);if(!t)return;r=Uc.Z.getObjectProperty(t,e.property)}else{if("scheme"!==e.kind)return;r=Uc.Z.getObjectProperty(this.schemeContainer.scheme,e.property)}const s=pg(n,t.frame);if(s>=0)n.frames[s].value=r;else{let e=0,i="linear";for(let r=0;r<n.frames.length;r++)if(i=n.frames[r].kind,n.frames[r].frame>t.frame){e=r;break}n.frames.splice(e,0,{frame:t.frame,kind:i,value:r})}this.updateFramesMatrix()},onFramePropertyInput(e){const t=this.selectedFrameControl.trackIdx,i=this.selectedFrameControl.frame;if(t<0||i<0)return;const n=this.framesMatrix[t];if(this.selectedFrameControl.value=e,"item"===n.kind||"scheme"===n.kind||"function"===n.kind){const r=this.findAnimationIndexForTrack(n);if(r<0)return;const s=this.framePlayer.shapeProps.animations[r],o=pg(s,i);if(o<0)return;if(this.framePlayer.shapeProps.animations[r].frames[o].value=e,this.framesMatrix[t].frames[i-1].value=e,"item"===s.kind){const t=this.schemeContainer.findItemById(s.itemId);t&&(Uc.Z.setObjectProperty(t,s.property,e),mh.Z.item.changed.specific.$emit(this.editorId,t.id,s.property),s.property.startsWith("area.")&&this.schemeContainer.updateEditBox())}else"scheme"===s.kind?Uc.Z.setObjectProperty(this.schemeContainer.scheme,s.property,e):"function"===s.kind&&this.selectFrame(i);n.valueType&&this.enrichFrameWithIcon(this.framesMatrix[t].frames[i-1],n.valueType),mh.Z.schemeChangeCommitted.$emit(this.editorId,`animation.${this.framePlayer.id}.track.${t}.frames.${o}.${s.property}`),this.shouldRecompileAnimations=!0}else if("sections"===n.kind){const t=this.framePlayer.shapeProps.sections;for(let r=0;r<t.length;r++)if(t[r].frame===i){t[r].value=e,n.frames[i-1].value=e;break}mh.Z.schemeChangeCommitted.$emit(this.editorId,`animation.${this.framePlayer.id}.sections.${i}`)}},addSectionFrame(e,t){const i=t+1,n={frame:i,value:`${i}`,kind:"step"};let r=0;const s=this.framePlayer.shapeProps.sections;for(let e=0;e<s.length;e++){if(s[e].frame===i)return;if(s[e].frame>i){r=e;break}}this.framesMatrix[e].frames[t]=n,s.splice(r,0,n),mh.Z.schemeChangeCommitted.$emit(this.editorId,`animation.${this.framePlayer.id}.sections.${n}`)},addFunctionFrame(e,t){const i=this.framesMatrix[e],n=this.framePlayer.shapeProps.functions[i.id];if(!n)return;const r=this.findAnimationIndexForTrack(i);if(r<0)return;const s=this.framePlayer.shapeProps.animations[r];let o=0,a=null,l=null;const c=t+1;for(let e=0;e<s.frames.length;e++){if(s.frames[e].frame===c)return;if(s.frames[e].frame>c){o=e,l=s.frames[e];break}a=s.frames[e]}const h={frame:c,kind:"linear",value:0},d=ag.Z[n.functionId];if(!d)return;const u=d.inputs[s.property];if(u){if(a&&l){const e=(c-a.frame)/Math.max(1,l.frame-a.frame);h.value=(0,og.QI)(u.type,a.value,l.value,e)}else h.value=a||l?a.value:u.value;s.frames.splice(o,0,h),this.updateFramesMatrix()}},toggleAddTrackModal(){this.addTrackModal.element=null,this.addTrackModal.property=null,this.addTrackModal.properties=[],this.addTrackModal.selectedPropertyOption=null,this.addTrackModal.shown=!0},addTrackFromModal(){const e=this.schemeContainer.findFirstElementBySelector(this.addTrackModal.element);if(e&&this.addTrackModal.property&&!(this.framePlayer.shapeProps.animations.findIndex((t=>"item"===t.kind&&t.itemId===e.id&&t.property===this.addTrackModal.property))>=0)){const t={kind:"item",id:jl().generate(),itemId:e.id,property:this.addTrackModal.property,frames:[]};this.framePlayer.shapeProps.animations.push(t),this.updateFramesMatrix()}this.addTrackModal.shown=!1},onAddTrackModalElementSelected(e){this.addTrackModal.element=e;const t=this.schemeContainer.findFirstElementBySelector(e);t&&(this.addTrackModal.properties=function(e){const t=[{name:"Position X",id:"area.x",iconClass:"fa-solid fa-arrows-left-right"},{name:"Position Y",id:"area.y",iconClass:"fa-solid fa-arrows-up-down"},{name:"Rotation",id:"area.r",iconClass:"fa-solid fa-arrows-rotate"},{name:"Scale X",id:"area.sx",iconClass:"fa-solid fa-down-left-and-up-right-to-center"},{name:"Scale Y",id:"area.sy",iconClass:"fa-solid fa-down-left-and-up-right-to-center"},{name:"Opacity",id:"opacity",iconClass:"fa-solid fa-lightbulb"},{name:"Self Opacity",id:"selfOpacity",iconClass:"fa-solid fa-lightbulb"},{name:"Visible",id:"selfOpacity",iconClass:"fa-regular fa-lightbulb"},{name:"Blend Mode",id:"blendMode",iconClass:"fa-solid fa-gear"}],i=Id.Z.find(e);return i?((0,Fe.b0)(Id.Z.getShapeArgs(i),((i,n)=>{("connector"===e||"path"===e)&&hg.indexOf(n)>=0||t.push({name:i.name,id:`shapeProps.${n}`,iconClass:"fa-solid fa-gear"})})),t):t}(t.shape))},onAddTrackModalPropertySelected(e){this.addTrackModal.property=e.id,this.addTrackModal.selectedPropertyOption=e},toggleFunctionAddModal(){this.functionEditorModal.funcName="moveAlongPath",this.functionEditorModal.functionId=null;const e=ag.Z[this.functionEditorModal.funcName];this.functionEditorModal.functionDescription=e;const t={};(0,Fe.Ed)(e,((e,i)=>{t[i]=e.value})),this.functionEditorModal.args=t,this.functionEditorModal.isAdding=!0,this.functionEditorModal.shown=!0},toggleEditFunctionArgumentsForTrack(e){const t=this.framePlayer.shapeProps.functions[e.funcId];if(!t)return null;this.functionEditorModal.funcName=e.functionId,this.functionEditorModal.functionDescription=ag.Z[t.functionId],this.functionEditorModal.functionId=e.funcId,this.functionEditorModal.args=t.args,this.functionEditorModal.isAdding=!1,this.functionEditorModal.functionDescription&&(this.functionEditorModal.shown=!0)},onFunctionModalArgumentChanged(e,t){this.functionEditorModal.args[e]=t,this.functionEditorModal.functionId&&(mh.Z.schemeChangeCommitted.$emit(this.editorId),this.framePlayer.shapeProps.functions[this.functionEditorModal.functionId].args[e]=t),this.compileAnimations()},onFunctionModalSubmit(){if(this.functionEditorModal.shown=!1,this.functionEditorModal.isAdding){const e=jl().generate(),t=ag.Z[this.functionEditorModal.funcName];if(!t)return;this.framePlayer.shapeProps.functions[e]={functionId:this.functionEditorModal.funcName,args:Uc.Z.clone(this.functionEditorModal.args)},(0,Fe.Ed)(t.inputs,((t,i)=>{this.framePlayer.shapeProps.animations.push({kind:"function",id:jl().generate(),funcId:e,property:i,frames:[{frame:1,kind:"linear",value:t.value},{frame:this.framePlayer.shapeProps.totalFrames,kind:"linear",value:t.endValue}]})})),mh.Z.schemeChangeCommitted.$emit(this.editorId)}this.updateFramesMatrix()},onHistoryUndone(){this.updateFramesMatrix()},onFramePlayerChanged(){this.totalFrames!==this.framePlayer.shapeProps.totalFrames&&(this.totalFrames=this.framePlayer.shapeProps.totalFrames,this.updateFramesMatrix())},onTrackLabelMouseDown(e,t){const i=this.framesMatrix[e];if("sections"===i.kind||"function"===i.kind)return;const n=(e,t)=>{const n=parseInt(t.getAttribute("data-track-index")),r=this.framesMatrix[n];if("item"===this.trackDrag.kind){if(r.kind!==this.trackDrag.kind)return void(this.trackDrag.dstTrackIdx=-1);const i=t.getBoundingClientRect(),s=e.pageY<i.top+i.height/2;this.trackDrag.dstTrackIdx=n,this.trackDrag.dropHead=!1,s&&(n>0?this.trackDrag.dstTrackIdx=n-1:this.trackDrag.dropHead=!0)}else if("function-header"===this.trackDrag.kind)if(this.trackDrag.dropHead=!1,"function-header"===r.kind&&r.id!==i.id)this.trackDrag.dstTrackIdx=n-1;else if("function"===r.kind&&r.id!==i.id){let e=!1,t=n+1;for(;t<this.framesMatrix.length&&!e;t++)"function-header"===this.framesMatrix[t].kind&&(e=!0);this.trackDrag.dstTrackIdx=e?t-2:this.framesMatrix.length-1}else this.trackDrag.dstTrackIdx=-1};(0,jh.E)(t).withScrollableElement(this.$refs.frameAnimatorCanvas).withDraggedElement(this.$refs.trackDragPreview).withDroppableClass("track-droppable-area").onDragStart((()=>{this.trackDrag.srcTrackIdx=e,this.trackDrag.kind=i.kind,this.trackDrag.on=!0,"item"===i.kind?this.trackDrag.text=i.itemName+" "+i.property:"function-header"===i.kind&&(this.trackDrag.text=i.name)})).onDragOver(n).onDrop(((e,t)=>{if(n(e,t),"item"===i.kind){if(this.trackDrag.dstTrackIdx<0)return;const e=this.framesMatrix[this.trackDrag.dstTrackIdx],t=this.findAnimationIndexForTrack(i);let n=this.findAnimationIndexForTrack(e);if(t>=0&&n>=0){const e=this.framePlayer.shapeProps.animations.splice(t,1);this.trackDrag.dropHead||(n+=1),this.framePlayer.shapeProps.animations.splice(n,0,e[0]),this.updateFramesMatrix(),mh.Z.schemeChangeCommitted.$emit(this.editorId),this.$forceUpdate()}}else if("function-header"===i.kind){const e=this.framesMatrix[this.trackDrag.dstTrackIdx];if(!e)return;let t=-1,n=!1;"function"!==e.kind&&"function-header"!==e.kind&&(t=0,n=!0);const r=[],s=[];let o=null;if((0,Fe.Ed)(this.framePlayer.shapeProps.animations,(a=>{"function"===a.kind?a.id!==i.id?(s.push(a),a.id===e.id&&(t=s.length-1,n=!1)):o=a:r.push(a)})),!o||t<0)return;n?s.splice(t,0,o):s.splice(t+1,0,o),this.framePlayer.shapeProps.animations=r.concat(s),this.updateFramesMatrix(),mh.Z.schemeChangeCommitted.$emit(this.editorId),this.$forceUpdate()}})).onDone((()=>{this.trackDrag.on=!1})).build()}}},fg=mg,gg=(0,Re.Z)(fg,Xf,[],!1,null,null,null).exports;var vg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"quick-helper-panel-wrapper text-nonselectable"},[i("div",{staticClass:"quick-helper-panel"},[e.menuOptions&&e.menuOptions.length>0?i("div",{staticClass:"quick-helper-panel-section"},[i("ul",{staticClass:"button-group"},[i("li",[i("a",{staticClass:"schemio-logo",attrs:{href:e.rootPath}},[i("img",{attrs:{src:e.assetsPath+"/images/schemio-logo-white.small.png"}})])]),e._v(" "),i("li",[i("menu-dropdown",{attrs:{name:"","icon-class":"fas fa-bars",options:e.menuOptions}})],1)])]):e._e(),e._v(" "),i("div",{staticClass:"quick-helper-panel-section"},[i("ul",{staticClass:"button-group"},[i("li",[i("span",{staticClass:"toggle-button",attrs:{title:"Zoom to Selection"},on:{click:function(t){return e.$emit("clicked-zoom-to-selection")}}},[i("i",{staticClass:"fas fa-bullseye"})])]),e._v(" "),e.editAllowed&&e.shouldShowBaseControls&&e.modeControlEnabled?i("li",[i("div",{staticClass:"toggle-group"},e._l(e.knownModes,(function(t){return i("span",{staticClass:"toggle-button",class:["mode-"+t,e.mode===t?"toggled":""],on:{click:function(i){return e.$emit("mode-changed",t)}}},["edit"===t?i("i",{staticClass:"fas fa-edit"}):e._e(),e._v(" "),"view"===t?i("i",{staticClass:"fas fa-eye"}):e._e(),e._v("\n                            "+e._s(t)+"\n                        ")])})),0)]):e._e(),e._v(" "),i("li",[i("div",{staticClass:"zoom-control"},[i("span",{staticClass:"zoom-button zoom-out",on:{click:e.onZoomOutClicked}},[i("i",{staticClass:"fas fa-search-minus"})]),e._v(" "),i("dropdown",{attrs:{options:e.zoomOptions,inline:!0,"hover-effect":!1,"search-enabled":!1},on:{selected:e.onZoomOptionSelected}},[i("input",{staticStyle:{"min-width":"45px","font-size":"12px","padding-left":"1px","padding-right":"1px"},domProps:{value:e.zoom},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onZoomSubmit.apply(null,arguments)}}})]),e._v(" "),i("span",{staticClass:"zoom-button zoom-in",on:{click:e.onZoomInClicked}},[i("i",{staticClass:"fas fa-search-plus"})])],1)]),e._v(" "),e.shouldShowBaseControls?i("li",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],staticClass:"textfield",staticStyle:{width:"110px"},attrs:{type:"text",placeholder:"Search..."},domProps:{value:e.searchKeyword},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.toggleSearchedItems.apply(null,arguments)},input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}}),e._v(" "),e.searchKeyword?i("span",{staticClass:"reset-search",attrs:{title:"Reset search"},on:{click:function(t){e.searchKeyword=""}}},[i("i",{staticClass:"fa-solid fa-circle-xmark"})]):e._e()]):e._e()])]),e._v(" "),"view"===e.mode?i("div",{staticClass:"quick-helper-panel-section"},[i("ul",{staticClass:"button-group"},[i("li",[i("span",{staticClass:"toggle-button",attrs:{title:"Toggle clickable items"},on:{click:function(t){return e.toggleClickableMarkers()}}},[i("i",{staticClass:"fa-solid fa-hand-pointer"})])]),e._v(" "),i("li",[i("span",{staticClass:"toggle-button",class:{toggled:e.textSelectionEnabled},attrs:{title:"Toggle text selection"},on:{click:e.toggleTextSelection}},[i("i",{staticClass:"fa-solid fa-i-cursor"})])])])]):e._e(),e._v(" "),"edit"===e.mode&&"draw"!==e.state?i("div",{staticClass:"quick-helper-panel-section"},[i("ul",{staticClass:"button-group"},["dragItem"===e.state?i("li",[i("span",{staticClass:"toggle-button",class:{toggled:e.isScreenGrabbing},attrs:{title:"Grab screen"},on:{click:function(t){return e.$emit("clicked-grab-screen")}}},[i("i",{staticClass:"fa-solid fa-hand"})])]):e._e(),e._v(" "),i("li",[i("span",{staticClass:"toggle-button",class:{disabled:!e.historyUndoable},attrs:{title:"Undo"},on:{click:function(t){return e.$emit("clicked-undo")}}},[i("i",{staticClass:"fas fa-undo"})])]),e._v(" "),i("li",[i("span",{staticClass:"toggle-button",class:{disabled:!e.historyRedoable},attrs:{title:"Redo"},on:{click:function(t){return e.$emit("clicked-redo")}}},[i("i",{staticClass:"fas fa-redo"})])]),e._v(" "),i("li",[i("span",{staticClass:"toggle-button",class:{toggled:e.shouldSnapToGrid},attrs:{title:"Snap to Grid"},on:{click:function(t){return e.toggleSnapToGrid(!e.shouldSnapToGrid)}}},[i("i",{staticClass:"fas fa-magnet"}),e._v(" "),i("i",{staticClass:"small-letter"},[e._v("G")])])]),e._v(" "),i("li",[i("span",{staticClass:"toggle-button",class:{toggled:e.shouldSnapToItems},attrs:{title:"Snap to Items"},on:{click:function(t){return e.toggleSnapToItems(!e.shouldSnapToItems)}}},[i("i",{staticClass:"fas fa-magnet"})])])])]):e._e(),e._v(" "),"edit"===e.mode&&e.selectedItemsCount>0&&e.shouldShowBaseControls?i("div",{staticClass:"quick-helper-panel-section"},[i("ul",{staticClass:"button-group"},[i("li",[i("span",{staticClass:"toggle-button",attrs:{title:"Remove"},on:{click:function(t){return e.removeSelectedItems()}}},[i("i",{staticClass:"fas fa-trash"})])]),e._v(" "),i("li",[i("span",{staticClass:"toggle-button",attrs:{title:"Bring To Front"},on:{click:function(t){return e.$emit("clicked-bring-to-front")}}},[i("img",{attrs:{src:e.assetsPath+"/images/helper-panel/bring-to-front.svg",width:"18px"}})])]),e._v(" "),i("li",[i("span",{staticClass:"toggle-button",attrs:{title:"Bring To Back"},on:{click:function(t){return e.$emit("clicked-bring-to-back")}}},[i("img",{attrs:{src:e.assetsPath+"/images/helper-panel/bring-to-back.svg",width:"18px"}})])])])]):e._e(),e._v(" "),"edit"===e.mode&&e.selectedItemsCount>0&&e.shouldShowBaseControls?i("div",{staticClass:"quick-helper-panel-section"},[i("ul",{staticClass:"button-group"},[e.supportsFill?i("li",[i("advanced-color-editor",{attrs:{editorId:e.editorId,value:e.fillColor,width:"18px",height:"18px"},on:{changed:function(t){return e.emitShapePropChange("fill","advanced-color",arguments[0])}}})],1):e._e(),e._v(" "),e.firstSelectedItem?i("li",[i("StrokeControl",{key:"stroke-control-"+e.firstSelectedItem.id+"-"+e.firstSelectedItem.shape,attrs:{editorId:e.editorId,item:e.firstSelectedItem},on:{"color-changed":function(t){return e.emitShapePropChange("strokeColor","color",arguments[0])},"size-changed":function(t){return e.emitShapePropChange("strokeSize","number",arguments[0])},"pattern-changed":function(t){return e.emitShapePropChange("strokePattern","stroke-pattern",arguments[0])},collapsed:e.onStrokeControlCollapsed,expanded:e.onStrokeControlExpanded}})],1):e._e(),e._v(" "),e.firstSelectedItem?i("li",[i("TextStyleControl",{key:"text-style-control-"+e.firstSelectedItem.id+"-"+e.firstSelectedItem.shape,attrs:{editorId:e.editorId,item:e.firstSelectedItem},on:{"property-changed":e.onTextStylePropertyChange}})],1):e._e(),e._v(" "),e.shouldShowPathCaps?i("li",[i("path-cap-dropdown",{key:"qhp-path-cap-source-"+e.firstSelectedItem.meta.revision,attrs:{value:e.pathSourceCap,"is-source":!0,"is-thick":"connector"===e.firstSelectedItem.shape&&e.firstSelectedItem.shapeProps.thick,width:"16px",height:15},on:{selected:function(t){return e.emitShapePropChange("sourceCap","path-cap",arguments[0])}}})],1):e._e(),e._v(" "),e.shouldShowPathCaps?i("li",[i("path-cap-dropdown",{key:"qhp-path-cap-destination-"+e.firstSelectedItem.meta.revision,attrs:{value:e.pathDestinationCap,"is-source":!1,"is-thick":"connector"===e.firstSelectedItem.shape&&e.firstSelectedItem.shapeProps.thick,width:"16px",height:15},on:{selected:function(t){return e.emitShapePropChange("destinationCap","path-cap",arguments[0])}}})],1):e._e()])]):e._e(),e._v(" "),"edit"===e.mode&&e.shouldShowConnectorControls?i("div",{staticClass:"quick-helper-panel-section"},[i("ul",{staticClass:"button-group"},e._l(e.connectorTypes,(function(t){return i("li",[i("span",{staticClass:"toggle-button",class:{dimmed:e.currentConnectorSmoothing!=t},attrs:{title:t},on:{click:function(i){return e.setConnectorSmoothing(t)}}},[i("img",{attrs:{src:e.assetsPath+"/images/helper-panel/connector-"+t+".svg"}})])])})),0)]):e._e(),e._v(" "),"edit"===e.mode&&e.isDrawing?i("div",{staticClass:"quick-helper-panel-section"},[i("ul",{staticClass:"button-group"},[i("li",[i("span",{staticClass:"btn btn-small btn-secondary",attrs:{title:"Stop drawing"},on:{click:e.stopDrawing}},[e._v("Stop drawing")])])])]):e._e(),e._v(" "),"edit"===e.mode&&"connecting"===e.state?i("div",{staticClass:"quick-helper-panel-section"},[i("ul",{staticClass:"button-group"},[i("li",[i("span",{staticClass:"btn btn-small btn-secondary",attrs:{title:"Stop connecting"},on:{click:e.stopConnecting}},[e._v("Stop")])])])]):e._e(),e._v(" "),"edit"===e.mode&&e.shouldShowBaseControls?i("div",{staticClass:"quick-helper-panel-section"},[i("ul",{staticClass:"button-group"},[i("li",[i("div",{staticClass:"toggle-group"},[i("span",{staticClass:"toggle-button",class:{toggled:e.autoRemount},attrs:{title:"Automatically mount items into other items"},on:{click:e.toggleAutoRemount}},[i("i",{staticClass:"fa-solid fa-person-arrow-down-to-line"})]),e._v(" "),i("span",{staticClass:"toggle-button",class:{toggled:e.showPivot},attrs:{title:"Pivot"},on:{click:e.togglePivot}},[i("i",{staticClass:"fa-solid fa-crosshairs"})]),e._v(" "),i("span",{staticClass:"toggle-button",class:{toggled:e.showItemDetailMarkers},attrs:{title:"Show icons of items that have description or links"},on:{click:e.toggleItemDetailMarkers}},[i("i",{staticClass:"icon fa-solid fa-paragraph"})])])])])]):e._e(),e._v(" "),"edit"===e.mode&&e.itemSurround.shown?i("div",{staticClass:"quick-helper-panel-section"},[i("ul",{staticClass:"button-group"},[i("li",[i("number-textfield",{attrs:{value:e.itemSurround.padding,name:"Padding"},on:{changed:e.onItemSurroundPaddingChanged}})],1)])]):e._e(),e._v(" "),e._t("default")],2)])};vg._withStripped=!0;var yg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"stroke-control"},[e.supportsStrokeColor?i("div",{staticClass:"stroke-control-toggle-button",style:{border:"4px solid "+e.strokeColor},attrs:{title:"Stroke"},on:{click:e.toggleDropdown}}):e._e(),e._v(" "),e.toggled?i("div",{staticClass:"stroke-control-dropdown"},[i("div",{staticClass:"stroke-control-color-container"},[e.supportsStrokeColor?i("color-picker",{on:{input:e.updateColor},model:{value:e.vuePickerColor,callback:function(t){e.vuePickerColor=t},expression:"vuePickerColor"}}):e._e()],1),e._v(" "),i("div",{staticClass:"stroke-control-other-controls"},[i("div",[e.supportsStrokeSize?i("NumberTextfield",{attrs:{name:"Size",value:e.strokeSize,min:0},on:{changed:function(t){return e.onStrokeSizeChange(arguments[0])}}}):e._e()],1),e._v(" "),e.supportsStrokePattern?i("div",{staticClass:"stroke-control-patterns"},e._l(e.strokePatterns,(function(t){return i("div",{staticClass:"stroke-control-pattern-option",class:{selected:t.name===e.strokePattern},domProps:{innerHTML:e._s(t.html)},on:{click:function(i){return e.selectPattern(t.name)}}})})),0):e._e()])]):e._e()])};yg._withStripped=!0;var xg=i(4023),bg=i.n(xg);function wg(e,t,i){if(!e)return!1;const n=Id.Z.getShapePropDescriptor(e,t);return null!==n&&n.type===i}const Cg={props:{editorId:{type:String,required:!0},item:{type:Object,required:!0}},components:{"color-picker":bg().Chrome,NumberTextfield:fd.Z},mounted(){document.body.addEventListener("click",this.onBodyClick),mh.Z.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChanged)},beforeDestroy(){document.body.removeEventListener("click",this.onBodyClick),mh.Z.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChanged),mh.Z.colorControlToggled.$emit(this.editorId,!1)},data(){const e=this.buildProps();return{toggled:!1,supportsStrokeColor:e.supportsStrokeColor,supportsStrokeSize:e.supportsStrokeSize,supportsStrokePattern:e.supportsStrokePattern,strokeColor:e.strokeColor,strokeSize:e.strokeSize,strokePattern:e.strokePattern,vuePickerColor:{hex:e.strokeColor},strokePatterns:this.buildStrokePatterns(e.strokeSize)}},methods:{buildProps(){const e=Id.Z.find(this.item.shape),t=wg(e,"strokeColor","color"),i=wg(e,"strokeSize","number"),n=wg(e,"strokePattern","stroke-pattern");let r="rgba(0, 0, 0, 1.0)",s=0,o=null;return t&&(r=this.item.shapeProps.strokeColor),i&&(s=this.item.shapeProps.strokeSize),n&&(o=this.item.shapeProps.strokePattern),{strokeColor:r,strokeSize:s,strokePattern:o,supportsStrokeColor:t,supportsStrokeSize:i,supportsStrokePattern:n}},onItemChanged(e){if("shapeProps.strokeColor"===e||"shapeProps.strokeSize"===e||"shapeProps.strokePattern"===e){const e=this.buildProps();this.strokeColor=e.strokeColor,this.strokeSize=e.strokeSize,this.strokePattern=e.strokePattern,this.vuePickerColor.hex=e.strokeColor,this.strokePatterns=this.buildStrokePatterns(Math.max(1,e.strokeSize))}},buildStrokePatterns:e=>(0,Fe.UI)(Sd.Z.patterns,(t=>({name:t,html:Sd.Z.generateStrokeHtml(t,e,15,300,30)}))),toggleDropdown(){this.toggled=!this.toggled,this.toggled?this.$emit("expanded"):this.$emit("collapsed")},updateColor(e){this.strokeColor=`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${e.rgba.a})`,this.$emit("color-changed",this.strokeColor)},onStrokeSizeChange(e){this.strokeSize=e,this.strokePatterns=this.buildStrokePatterns(Math.max(1,Math.min(this.strokeSize,10))),this.$emit("size-changed",this.strokeSize)},selectPattern(e){this.strokePattern=e,this.$emit("pattern-changed",e)},onBodyClick(e){!this.toggled||e.target&&e.target.closest(".stroke-control")||(this.toggled=!1,this.$emit("collapsed"))}}},Pg=(0,Re.Z)(Cg,yg,[],!1,null,null,null).exports;var kg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"text-style-control"},[e.supportsTextSlots?i("div",{staticClass:"text-style-control-toggle-button",style:{"border-bottom":"4px solid "+e.textColor},attrs:{title:"Stroke"},on:{click:e.toggleDropdown}},[e._v("A")]):e._e(),e._v(" "),e.toggled?i("div",{staticClass:"text-style-control-dropdown"},[i("div",{staticClass:"text-style-control-color-container"},[i("color-picker",{on:{input:e.updateColor},model:{value:e.vuePickerColor,callback:function(t){e.vuePickerColor=t},expression:"vuePickerColor"}})],1),e._v(" "),i("div",{staticClass:"text-style-control-other-controls"},[i("div",[i("dropdown",{attrs:{options:e.allFonts,value:e.font},on:{selected:function(t){return e.onFontChange(arguments[0].name)}}})],1),e._v(" "),i("div",[i("NumberTextfield",{attrs:{name:"Font Size",value:e.fontSize,min:0},on:{changed:function(t){return e.onFontSizeChange(arguments[0])}}})],1),e._v(" "),i("div",[i("ul",{staticClass:"button-group"},e._l(e.halignOptions,(function(t){return i("li",[i("span",{staticClass:"toggle-button",class:{toggled:e.halign===t.value},attrs:{title:t.name},on:{click:function(i){return e.onHAlignChange(t.value)}}},[i("i",{class:t.iconCss})])])})),0)]),e._v(" "),i("div",[i("ul",{staticClass:"button-group"},e._l(e.valignOptions,(function(t){return i("li",[i("span",{staticClass:"toggle-button",class:{toggled:e.valign===t.value},attrs:{title:t.name},on:{click:function(i){return e.onVAlignChange(t.value)}}},[i("i",{class:t.iconCss})])])})),0)])])]):e._e()])};kg._withStripped=!0;const Sg={props:{editorId:{type:String,required:!0},item:{type:Object,required:!0}},components:{"color-picker":bg().Chrome,NumberTextfield:fd.Z,Dropdown:wd.Z},beforeMount(){mh.Z.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChange),document.body.addEventListener("click",this.onBodyClick)},beforeDestroy(){mh.Z.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChange),document.body.removeEventListener("click",this.onBodyClick)},data(){const e=this.buildAllProps();return{toggled:!1,textColor:e.textColor,fontSize:e.fontSize,font:e.font,halign:e.halign,valign:e.valign,supportsTextSlots:e.supportsTextSlots,vuePickerColor:{hex:e.textColor},allFonts:(0,Fe.UI)((0,Em._W)(),(e=>({name:e.name,style:{"font-family":e.family}}))),halignOptions:[{name:"Left",value:"left",iconCss:"fas fa-align-left"},{name:"Center",value:"center",iconCss:"fas fa-align-center"},{name:"Right",value:"right",iconCss:"fas fa-align-right"}],valignOptions:[{name:"Top",value:"top",iconCss:"schemio-icon schemio-icon-valign-top"},{name:"Middle",value:"middle",iconCss:"schemio-icon schemio-icon-valign-middle"},{name:"Bottom",value:"bottom",iconCss:"schemio-icon schemio-icon-valign-bottom"}]}},methods:{buildAllProps(){let e=!1,t="rgba(0, 0, 0, 1.0)",i=14,n=(0,Em.vq)(),r="left",s="top";const o=Id.Z.find(this.item.shape);if(o&&o.getTextSlots){const a=o.getTextSlots(this.item);if(a&&a.length>0){const o=a[0].name;this.item.textSlots&&this.item.textSlots[o]&&(this.item.textSlots[o].font&&(n=this.item.textSlots[o].font),this.item.textSlots[o].color&&(t=this.item.textSlots[o].color),this.item.textSlots[o].fontSize&&(i=this.item.textSlots[o].fontSize),this.item.textSlots[o].halign&&(r=this.item.textSlots[o].halign),this.item.textSlots[o].valign&&(s=this.item.textSlots[o].valign)),e=!0}}return{textColor:t,fontSize:i,font:n,halign:r,valign:s,supportsTextSlots:e}},toggleDropdown(){this.toggled=!this.toggled,this.updateProps()},updateProps(){const e=this.buildAllProps();this.textColor=e.textColor,this.fontSize=e.fontSize,this.font=e.font,this.halign=e.halign,this.valign=e.valign,this.supportsTextSlots=e.supportsTextSlots,this.vuePickerColor.hex=this.textColor},onItemChange(e){e&&e.startsWith("textSlots.")&&this.updateProps()},updateColor(e){this.textColor=`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${e.rgba.a})`,this.emitPropertyChange("color",this.textColor)},onFontSizeChange(e){this.fontSize=e,this.emitPropertyChange("fontSize",e)},onFontChange(e){this.font=e,this.emitPropertyChange("font",e)},onHAlignChange(e){this.halign=e,this.emitPropertyChange("halign",e)},onVAlignChange(e){this.valign=e,this.emitPropertyChange("valign",e)},emitPropertyChange(e,t){this.$emit("property-changed",e,t)},onBodyClick(e){e.target&&e.target.closest(".text-style-control")||(this.toggled=!1)}}},Ig=(0,Re.Z)(Sg,kg,[],!1,null,null,null).exports,Ag={props:{editorId:{type:String,required:!0},schemeContainer:{type:Object,required:!0},mode:{type:String,required:!0},state:{type:String,required:!0},textSelectionEnabled:{type:Boolean,default:!1},zoom:{type:Number,required:!0},editAllowed:{type:Boolean,default:!1},menuOptions:{type:Array,default:[]},historyUndoable:{type:Boolean,required:!0},historyRedoable:{type:Boolean,required:!0},isRecording:{type:Boolean,required:!0},isScreenGrabbing:{type:Boolean,required:!0},modeControlEnabled:{type:Boolean,default:!0}},components:{AdvancedColorEditor:Ku.Z,ColorPicker:Fu.Z,StrokePatternDropdown:qp,PathCapDropdown:hp,NumberTextfield:fd.Z,MenuDropdown:Ul,Dropdown:wd.Z,StrokeControl:Pg,TextStyleControl:Ig},beforeMount(){mh.Z.item.selected.any.$on(this.editorId,this.onItemSelectionChanged),mh.Z.item.deselected.any.$on(this.editorId,this.onItemSelectionChanged),mh.Z.itemSurround.created.$on(this.editorId,this.onItemSurroundCreated)},beforeDestroy(){mh.Z.item.selected.any.$off(this.editorId,this.onItemSelectionChanged),mh.Z.item.deselected.any.$off(this.editorId,this.onItemSelectionChanged),mh.Z.itemSurround.created.$off(this.editorId,this.onItemSurroundCreated)},data:()=>({knownModes:["view","edit"],searchKeyword:"",searchHighlights:[],connectorTypes:["linear","smooth","step","step-cut","step-smooth"],zoomOptions:[{name:"10%",value:10},{name:"25%",value:25},{name:"35%",value:35},{name:"50%",value:50},{name:"75%",value:75},{name:"100%",value:100},{name:"125%",value:125},{name:"150%",value:150},{name:"200%",value:200},{name:"300%",value:300},{name:"400%",value:400},{name:"500%",value:500},{name:"750%",value:750},{name:"1000%",value:1e3}],selectedItemsCount:0,firstSelectedItem:null,supportsFill:!1,fillColor:{type:"solid",color:"rgba(255,255,255,1.0)"},pathSourceCap:"empty",pathDestinationCap:"empty",currentConnectorSmoothing:"smooth",itemSurround:{shown:!1,padding:20,boundingBox:{x:0,y:0,w:0,h:0,r:0},item:null,childItemOriginalPositions:{}}}),methods:{toggleSnapToGrid(e){this.$store.dispatch("setGridSnap",e)},toggleSnapToItems(e){this.$store.dispatch("setItemSnap",e)},onItemSelectionChanged(){if(this.itemSurround.shown=!1,this.selectedItemsCount=this.schemeContainer.getSelectedItems().length,this.schemeContainer.getSelectedItems().length>0){const e=this.schemeContainer.getSelectedItems()[0],t=Id.Z.find(e.shape);this.firstSelectedItem=e,t&&"advanced-color"===t.argType("fill")?(this.fillColor=e.shapeProps.fill,this.supportsFill=!0):this.supportsFill=!1,"connector"!==e.shape&&"path"!==e.shape||(this.pathSourceCap=e.shapeProps.sourceCap,this.pathDestinationCap=e.shapeProps.destinationCap)}this.selectedItemsCount>0&&"connector"===this.firstSelectedItem.shape&&(this.currentConnectorSmoothing=this.firstSelectedItem.shapeProps.smoothing)},setConnectorSmoothing(e){this.currentConnectorSmoothing=e,nh.Z.setDefaultConnectorSmoothing(this.$store,e),this.isCreatingConnector()?(this.$store.state.connecting.connectorItem.shapeProps.smoothing=e,mh.Z.item.changed.specific.$emit(this.editorId,this.$store.state.connecting.connectorItem.id)):this.emitShapePropChange("smoothing","choice",e)},isCreatingConnector(){return"connecting"===this.state&&this.$store.state.connecting.connectorItem},stopDrawing(){this.$emit("stop-drawing-requested")},stopConnecting(){this.$emit("stop-connecting-requested")},removeSelectedItems(){0!==this.selectedItemsCount&&this.schemeContainer.deleteSelectedItems()},emitShapePropChange(e,t,i){this.$emit("shape-prop-changed",e,t,i),"sourceCap"===e?this.pathSourceCap=i:"destinationCap"===e&&(this.pathDestinationCap=i)},onTextStylePropertyChange(e,t){this.$emit("text-style-prop-change",e,t)},onItemSurroundCreated(e,t,i){this.itemSurround.childItemOriginalPositions={},this.itemSurround.item=e,this.itemSurround.boundingBox=t,this.itemSurround.padding=i,this.itemSurround.shown=!0,(0,Fe.Ed)(e.childItems,(e=>{this.itemSurround.childItemOriginalPositions[e.id]=this.schemeContainer.worldPointOnItem(0,0,e)}))},onItemSurroundPaddingChanged(e){const t=this.itemSurround.item;if(!t)return;this.$store.dispatch("setItemSurroundPadding",e);let i=null;if(t.meta.parentId&&(i=this.schemeContainer.findItemById(t.meta.parentId)),i){const n=this.schemeContainer.localPointOnItem(this.itemSurround.boundingBox.x-e,this.itemSurround.boundingBox.y-e,i);t.area.x=n.x,t.area.y=n.y,t.area.w=this.itemSurround.boundingBox.w+2*e,t.area.h=this.itemSurround.boundingBox.h+2*e}else t.area.x=this.itemSurround.boundingBox.x-e,t.area.y=this.itemSurround.boundingBox.y-e,t.area.w=this.itemSurround.boundingBox.w+2*e,t.area.h=this.itemSurround.boundingBox.h+2*e;mh.Z.item.changed.specific.$emit(this.editorId,t.id,"area"),this.schemeContainer.updateEditBox(),(0,Fe.Ed)(t.childItems,(e=>{const i=this.itemSurround.childItemOriginalPositions[e.id],n=this.schemeContainer.localPointOnItem(i.x,i.y,t);e.area.x=n.x,e.area.y=n.y,mh.Z.item.changed.specific.$emit(this.editorId,e.id,"area")}))},toggleAutoRemount(e){nh.Z.toggleAutoRemount(this.$store,e.target.checked)},togglePivot(){nh.Z.togglePivot(this.$store)},toggleItemDetailMarkers(){nh.Z.toggleItemDetailMarkers(this.$store)},toggleClickableMarkers(){mh.Z.clickableMarkers.toggled.$emit(this.editorId)},onZoomOutClicked(){let e=this.zoomOptions[0].value,t=!1;for(let i=0;i<this.zoomOptions.length&&!t;i++)this.zoomOptions[i].value<this.zoom?e=this.zoomOptions[i].value:t=!0;this.changeZoomTo(e)},onZoomInClicked(){let e=this.zoomOptions[this.zoomOptions.length-1].value,t=!1,i=this.zoomOptions.length-1;for(;!t;)this.zoomOptions[i].value>this.zoom?e=this.zoomOptions[i].value:t=!0,i-=1,i<0&&(t=!0);this.changeZoomTo(e)},onZoomOptionSelected(e){this.changeZoomTo(e.value)},changeZoomTo(e){this.$emit("zoom-changed",e)},onZoomSubmit(e){const t=e.target.value,i=parseInt(t);isNaN(i)||i>0&&this.changeZoomTo(i)},toggleSearchedItems(){this.$emit("zoomed-to-items",this.searchHighlights)},toggleTextSelection(){this.$emit("text-selection-changed",!this.textSelectionEnabled)},onStrokeControlCollapsed(){mh.Z.colorControlToggled.$emit(this.editorId,!1)},onStrokeControlExpanded(){mh.Z.colorControlToggled.$emit(this.editorId,!0)}},watch:{searchKeyword(e){if((e=e.trim().toLowerCase()).length>0){const t=[],i=[];(0,Fe.Ed)(this.schemeContainer.getItems(),(n=>{let r=!1;if("view"!==this.mode||!this.schemeContainer.isItemInHUD(n)){if(((n.name||"").toLowerCase().indexOf(e)>=0||n.tags&&n.tags.length>0&&(0,Fe.sE)(n.tags,(t=>t&&t.toLowerCase().indexOf(e)>=0)))&&(r=!0),!r&&n.textSlots)for(let t in n.textSlots)if(n.textSlots.hasOwnProperty(t)){const i=n.textSlots[t].text;if(i&&i.toLowerCase().indexOf(e)>=0){r=!0;break}}r&&(i.push(n),t.push(n.id))}})),this.searchHighlights=i,this.$emit("items-highlighted",{itemIds:t,showPins:!1})}else this.searchHighlights=[],this.$emit("items-highlighted",{itemIds:[],showPins:!1})},state(e){this.isCreatingConnector()&&(this.currentConnectorSmoothing=this.$store.state.connecting.connectorItem.shapeProps.smoothing)}},computed:{rootPath(){return this.$store.getters.rootPath},assetsPath(){return this.$store.getters.assetsPath},shouldSnapToGrid(){return this.$store.getters.shouldSnapToGrid},shouldSnapToItems(){return this.$store.getters.shouldSnapToItems},shouldShowBaseControls(){return"editPath"!==this.state&&"draw"!==this.state&&"connecting"!==this.state},isEdittingPath(){return"editPath"===this.state},isDrawing(){return"draw"===this.state},shouldShowPathCaps(){return"editPath"===this.state||this.selectedItemsCount>0&&"connector"===this.firstSelectedItem.shape},shouldShowConnectorControls(){return this.selectedItemsCount>0&&"connector"===this.firstSelectedItem.shape||"connecting"===this.state},autoRemount(){return this.$store.getters.autoRemount},showPivot(){return this.$store.getters.showPivot},showItemDetailMarkers(){return this.$store.getters.showItemDetailMarkers}}},_g=Ag,Eg=(0,Re.Z)(_g,vg,[],!1,null,null,null).exports;var Tg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"floating-helper-panel"}},[i("div",{ref:"floatingHelperPanel",staticClass:"floating-helper-panel",style:{top:e.posY+"px",left:e.posX+"px"}},[i("div",{staticClass:"floating-helper-panel-inner"},[i("span",{staticClass:"panel-close",on:{click:function(t){return e.$emit("close")}}},[i("i",{staticClass:"fa-solid fa-xmark"})]),e._v(" "),i("ul",{staticClass:"button-group"},[i("li",[i("div",{staticClass:"item-name"},[e.nameEdited?i("input",{directives:[{name:"model",rawName:"v-model",value:e.itemName,expression:"itemName"}],ref:"nameInput",attrs:{type:"text",placeholder:"Name..."},domProps:{value:e.itemName},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.nameEdited=!1},blur:function(t){e.nameEdited=!1},input:function(t){t.target.composing||(e.itemName=t.target.value)}}}):i("span",{attrs:{title:e.itemName},on:{click:e.triggerNameEdit}},[e._v(e._s(e.item.name))])])]),e._v(" "),i("li",[i("span",{staticClass:"toggle-button",attrs:{title:"Description"},on:{click:function(t){e.descriptionEditorShown=!0}}},[i("i",{staticClass:"fas fa-paragraph"})])]),e._v(" "),e.supportsFill&&"connector"!==e.item.shape?i("li",[i("advanced-color-editor",{attrs:{editorId:e.editorId,value:e.fillColor,width:"18px",height:"18px",title:"Fill"},on:{changed:function(t){return e.updateShapeProp("fill",arguments[0])}}})],1):e._e(),e._v(" "),e.supportsStroke?i("li",[i("StrokeControl",{attrs:{editorId:e.editorId,item:e.item,title:"Stroke"},on:{"color-changed":function(t){return e.updateShapeProp("strokeColor",arguments[0])},"size-changed":function(t){return e.updateShapeProp("strokeSize",arguments[0])},"pattern-changed":function(t){return e.updateShapeProp("strokePattern",arguments[0])},collapsed:e.onStrokeControlCollapsed,expanded:e.onStrokeControlExpanded}})],1):e._e(),e._v(" "),"path"!==e.item.shape||e.item.locked?e._e():i("li",[i("span",{staticClass:"toggle-button",attrs:{title:"Edit path"},on:{click:e.editPath}},[i("img",{attrs:{width:"20px",src:e.assetsPath+"/images/icons/create-curve.svg"}})])]),e._v(" "),"image"===e.item.shape?i("li",[i("span",{staticClass:"toggle-button",attrs:{title:"Crop image"},on:{click:e.cropImage}},[i("i",{staticClass:"fas fa-crop"})])]):e._e(),e._v(" "),e.supportsFill&&"connector"!==e.item.shape?i("li",[i("span",{staticClass:"toggle-button",attrs:{title:"Styles"},on:{click:function(t){return e.toggleStylesPopup()}}},[i("i",{staticClass:"fas fa-palette"})])]):e._e(),e._v(" "),i("li",[i("span",{staticClass:"toggle-button",attrs:{title:"Remove"},on:{click:function(t){return e.deleteItem()}}},[i("i",{staticClass:"fas fa-trash"})])])])]),e._v(" "),e.descriptionEditorShown?i("modal",{attrs:{title:"Description"},on:{close:function(t){e.descriptionEditorShown=!1}}},[i("h5",[e._v("Name")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.item.name,expression:"item.name"}],staticClass:"textfield",attrs:{type:"text"},domProps:{value:e.item.name},on:{input:[function(t){t.target.composing||e.$set(e.item,"name",t.target.value)},function(t){return e.emitChangeCommited("name")}]}}),e._v(" "),i("h5",[e._v("Tags")]),e._v(" "),i("vue-tags-input",{attrs:{tags:e.itemTags,"autocomplete-items":e.filteredItemTags},on:{"tags-changed":e.onItemTagChange},model:{value:e.itemTag,callback:function(t){e.itemTag=t},expression:"itemTag"}}),e._v(" "),i("h5",[e._v("Description")]),e._v(" "),i("rich-text-editor",{attrs:{id:"floating-helper-panel-"+e.item.id,value:e.item.description},on:{changed:function(t){e.item.description=arguments[0],e.commitSchemeChange("description")}}}),e._v(" "),i("LinksPanel",{attrs:{editorId:e.editorId,item:e.item}})],1):e._e(),e._v(" "),e.stylesPopup.shown?i("div",{staticClass:"styles-popup",style:{top:e.stylesPopup.y+"px",left:e.stylesPopup.x+"px"}},[i("styles-mini-palette",{on:{"style-applied":e.applyItemStyle}})],1):e._e()],1)])};Tg._withStripped=!0;var Mg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",e._l(e.defaultStyleSections,(function(t){return i("div",[i("ul",{staticClass:"shape-styles-preview"},e._l(t.styles,(function(t){return i("li",[i("div",{staticClass:"shape-style",on:{click:function(i){return e.applyStyle(t.style)}}},[i("svg",{attrs:{width:"40",height:"30"}},[i("advanced-fill",{attrs:{"fill-id":t.style.id,fill:t.style.fill,area:{x:4,y:4,w:32,h:22}}}),e._v(" "),i("rect",{attrs:{x:"4",y:"4",width:"32",height:"22",fill:t.previewFill,stroke:t.previewStroke,"stroke-width":"1"}})],1)])])})),0)])})),0),e._v(" "),i("div",[i("ul",{staticClass:"shape-styles-preview"},e._l(e.stylePreviews,(function(t,n){return i("li",[i("div",{staticClass:"shape-style",on:{click:function(i){return e.applyUserStyle(t.style)}}},[i("svg",{attrs:{width:"40",height:"30"}},[i("advanced-fill",{attrs:{"fill-id":t.style.id,fill:t.style.fill,area:{x:4,y:4,w:32,h:22}}}),e._v(" "),i("rect",{attrs:{x:"4",y:"4",width:"32",height:"22",fill:t.previewFill,stroke:t.previewStroke,"stroke-width":"1"}})],1)])])})),0)])])};Mg._withStripped=!0;let $g=null;const Og={components:{AdvancedFill:kd.ZP},beforeMount(){this.init()},data(){return{previewItems:null,previewComponent:null,stylePreviews:[],defaultStyleSections:(0,Fe.UI)(Op,(e=>({name:e.name,styles:(0,Fe.UI)(e.styles,this.convertStyleToPreview)})))}},methods:{init(){null===$g&&this.$store.state.apiClient&&this.$store.state.apiClient.getStyles?this.$store.state.apiClient.getStyles().then((e=>{$g=e,this.stylePreviews=(0,Fe.UI)(e,this.convertStyleToPreview)})):Array.isArray($g)&&(this.stylePreviews=(0,Fe.UI)($g,this.convertStyleToPreview))},convertStyleToPreview:e=>({style:e,previewFill:(0,kd.pz)(e.fill,e.id),previewStroke:e.strokeColor}),applyStyle(e){this.$emit("style-applied",e)},applyUserStyle(e){this.applyStyle(e)}}},Dg=(0,Re.Z)(Og,Mg,[],!1,null,null,null).exports,Bg={props:{editorId:{type:String,required:!0},x:{type:Number},y:{type:Number},item:{type:Object},schemeContainer:{type:Object}},components:{AdvancedColorEditor:Ku.Z,StrokeControl:Pg,Modal:je.Z,RichTextEditor:Ll,VueTagsInput:Su(),StylesMiniPalette:Dg,LinksPanel:Zu},mounted(){this.updatePosition()},data(){let e=null,t=!1,i=!1;const n=Id.Z.find(this.item.shape);return n&&"advanced-color"===n.argType("fill")&&(e=this.item.shapeProps.fill,t=!0),n&&"color"===n.argType("strokeColor")&&(i=!0),{fillColor:e,supportsFill:t,supportsStroke:i,posX:this.x,posY:this.y,nameEdited:!1,itemName:this.item.name,descriptionEditorShown:!1,itemTag:"",existingItemTags:(0,Fe.UI)(this.schemeContainer.itemTags,(e=>({text:e}))),stylesPopup:{shown:!1,x:0,y:0}}},methods:{onStrokeControlCollapsed(){mh.Z.colorControlToggled.$emit(this.editorId,!1)},onStrokeControlExpanded(){mh.Z.colorControlToggled.$emit(this.editorId,!0)},onItemTagChange(e){this.schemeContainer.updateItem(this.item.id,"tags",(t=>{t.tags=e.map((e=>e.text))})),this.emitChangeCommited("tags")},emitChangeCommited(e){mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${this.item.id}.${e}`)},updatePosition(){const e=this.$refs.floatingHelperPanel.getBoundingClientRect();this.posX=zh.Z.clamp(this.x-e.width/2,10,window.innerWidth-10),this.posY=this.y},editPath(){this.$emit("edit-path-requested",this.item)},cropImage(){this.$emit("image-crop-requested",this.item)},commitSchemeChange(e){mh.Z.item.changed.specific.$emit(this.editorId,this.item.id,e),mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${this.item.id}.${e}`)},updateShapeProp(e,t){this.schemeContainer.updateItem(this.item.id,`shapeProps.${e}`,(i=>{i.shapeProps[e]=t})),this.$emit("item-updated",this.item),mh.Z.item.changed.specific.$emit(this.editorId,this.item.id,`shapeProps.${e}`),mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${this.item.id}.shapeProps.${e}`)},deleteItem(){this.schemeContainer.deleteSelectedItems(),mh.Z.schemeChangeCommitted.$emit(this.editorId)},triggerNameEdit(){this.nameEdited=!0,this.$nextTick((()=>{this.$refs.nameInput.focus()}))},toggleStylesPopup(){this.stylesPopup.shown?this.stylesPopup.shown=!1:(this.stylesPopup.x=0,this.stylesPopup.y=35,this.stylesPopup.shown=!0)},applyItemStyle(e){Dp(this.item,e)&&(this.$emit("item-updated",this.item),mh.Z.item.changed.specific.$emit(this.editorId,this.item.id),mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${this.item.id}.styles`)),this.stylesPopup.shown=!1}},watch:{x(e){this.updatePosition()},y(e){this.updatePosition()},itemName(e){this.schemeContainer.updateItem(this.item.id,"name",(t=>{t.name=e})),mh.Z.item.changed.specific.$emit(this.editorId,this.item.id,"name"),mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${this.item.id}.name`)}},computed:{assetsPath(){return this.$store.getters.assetsPath},filteredItemTags(){const e=this.itemTag.toLowerCase();return this.existingItemTags.filter((t=>t.text.toLowerCase().indexOf(e)>=0))},itemTags(){return Array.isArray(this.item.tags)?this.item.tags.map((e=>({text:e}))):[]}}},Lg=(0,Re.Z)(Bg,Tg,[],!1,null,null,null).exports,Rg=[.1,.25,.35,.5,.75,1,1.25,1.5,2,3,4,5,7.5,10];function Ng(e){return e.metaKey||e.ctrlKey||e.shiftKey}function Zg(e){return 1===e.button}function Fg(e,t,i){return t*(1-e)+i*e}let jg=null;class zg{constructor(e,t,i,n){this.schemeContainer=null,this.name=i||"",this.store=t,this.editorId=e,this.subState=null,this.previousSubStates=[],this.listener=n,this.pinchToZoomId=0,this.pinchToZoom={id:0,wp1:{x:0,y:0},wp2:{x:0,y:0},x0:0,y0:0,scale:1},this.inertiaDrag={on:!1,speed:0,direction:{x:0,y:0},positionTracker:{idx:0,positions:[]}}}onItemChanged(e){}resetInertiaDrag(){this.inertiaDrag.positionTracker.idx=0,this.inertiaDrag.positionTracker.positions=[],this.inertiaDrag.speed=0,this.inertiaDrag.on=!1}registerInertiaPositions(e,t){this.inertiaDrag.positionTracker.positions.length<5?this.inertiaDrag.positionTracker.positions.push({x:e,y:t,time:performance.now()}):this.inertiaDrag.positionTracker.positions[this.inertiaDrag.positionTracker.idx]={x:e,y:t,time:performance.now()},this.inertiaDrag.positionTracker.idx=(this.inertiaDrag.positionTracker.idx+1)%5}initScreenInertia(){if(this.inertiaDrag.on)return;const e=this.inertiaDrag.positionTracker.positions;if(e.length>2){e.sort(((e,t)=>t.time-e.time));let t=0,i=0,n=0;const r=[1,.5,.3,.1,.05];let s=0;for(let o=0;o<e.length-1;o++){const a=e[o+1],l=e[o],c=Math.sqrt((a.x-l.x)*(a.x-l.x)+(a.y-l.y)*(a.y-l.y));c>.01&&(t+=(l.x-a.x)/c,i+=(l.y-a.y)/c);const h=l.time-a.time;if(h>.01){const e=c/h;if(0===o&&e<.5)return void(this.inertiaDrag.speed=0);n+=e*r[o],s+=r[o]}}t/=e.length-1,i/=e.length-1,this.inertiaDrag.direction.x=t,this.inertiaDrag.direction.y=i,s>0?(this.inertiaDrag.speed=Math.min(10,n/s),this.inertiaDrag.on=!0):(this.inertiaDrag.speed=0,this.inertiaDrag.on=!1)}else this.inertiaDrag.speed=0,this.inertiaDrag.on=!1}loop(e){if(this.inertiaDrag.on)if(this.inertiaDrag.speed>.05){const t=this.schemeContainer.screenTransform.x+this.inertiaDrag.speed*e*this.inertiaDrag.direction.x/2,i=this.schemeContainer.screenTransform.y+this.inertiaDrag.speed*e*this.inertiaDrag.direction.y/2;this.dragScreenTo(t,i),this.inertiaDrag.speed=Math.max(0,this.inertiaDrag.speed-e/200)}else this.inertiaDrag.on=!1}migrateSubState(e){this.subState&&(this.previousSubStates.push(this.subState),this.previousSubStates.length>10&&this.previousSubStates.shift()),this.subState=e,this.subState.listener=this.listener,this.store.dispatch("setEditorSubStateName",this.subState?this.subState.name:"null"),this.listener.onSubStateMigrated()}migrateToPreviousSubState(){this.previousSubStates.length>0&&(this.subState=this.previousSubStates.pop(),this.subState.listener=this.listener,this.store.dispatch("setEditorSubStateName",this.subState?this.subState.name:"null"),this.listener.onSubStateMigrated())}resetPreviousSubStates(){this.previousSubStates=[]}setSchemeContainer(e){this.schemeContainer=e}reset(){}cancel(){this.reset(),this.listener.onCancel(this.name)}keyPressed(e,t){this.subState&&this.subState.keyPressed(e,t)}keyUp(e,t){this.subState&&this.subState.keyUp(e,t)}mouseDoubleClick(e,t,i,n,r,s){this.subState&&this.subState.mouseDoubleClick(e,t,i,n,r,s)}mouseDown(e,t,i,n,r,s){this.pinchToZoomId+=1,this.subState&&this.subState.mouseDown(e,t,i,n,r,s)}mouseMove(e,t,i,n,r,s){this.subState&&this.subState.mouseMove(e,t,i,n,r,s)}mouseUp(e,t,i,n,r,s){this.subState&&this.subState.mouseUp(e,t,i,n,r,s)}mobilePinchToZoom(e){if(e.preventDefault(),this.pinchToZoom.id!==this.pinchToZoomId)return void this.initPinchToZoom(e);if(2!==e.touches.length)return;const t=this.pinchToZoom.wp1,i=this.pinchToZoom.wp2,n=e.touches[0].pageX,r=e.touches[0].pageY,s=e.touches[1].pageX,o=e.touches[1].pageY,a=t.x-i.x,l=t.y-i.y;if(Math.abs(a)>Math.abs(l)){if(zh.Z.tooSmall(a))return;this.schemeContainer.screenTransform.scale=zh.Z.clamp(Math.abs((n-s)/a),5e-4,1e5)}else{if(zh.Z.tooSmall(l))return;this.schemeContainer.screenTransform.scale=zh.Z.clamp(Math.abs((r-o)/l),5e-4,1e5)}const c=n-t.x*this.schemeContainer.screenTransform.scale,h=s-i.x*this.schemeContainer.screenTransform.scale,d=r-t.y*this.schemeContainer.screenTransform.scale,u=o-i.y*this.schemeContainer.screenTransform.scale;this.schemeContainer.screenTransform.x=(c+h)/2,this.schemeContainer.screenTransform.y=(d+u)/2,this.listener.onScreenTransformUpdated(this.schemeContainer.screenTransform)}initPinchToZoom(e){if(2!==e.touches.length)return;const t=this.schemeContainer.screenTransform.x,i=this.schemeContainer.screenTransform.y,n=this.schemeContainer.screenTransform.scale;this.pinchToZoom.id=this.pinchToZoomId,this.pinchToZoom.wp1={x:(e.touches[0].pageX-t)/n,y:(e.touches[0].pageY-i)/n},this.pinchToZoom.wp2={x:(e.touches[1].pageX-t)/n,y:(e.touches[1].pageY-i)/n},this.pinchToZoom.scale=this.schemeContainer.screenTransform.scale,this.pinchToZoom.x0=this.schemeContainer.screenTransform.x,this.pinchToZoom.y0=this.schemeContainer.screenTransform.y}mouseWheel(e,t,i,n,r){r&&this.zoomByWheel(i,n,r.deltaY)}zoomByWheel(e,t,i){const n=(100+Math.min(120,Math.sqrt(Math.abs(i))))/100;var r=0,s=this.schemeContainer.screenTransform.x,o=this.schemeContainer.screenTransform.y;if(i<0){const i=e-(r=this.schemeContainer.screenTransform.scale*n)*(e-s)/this.schemeContainer.screenTransform.scale,a=t-r*(t-o)/this.schemeContainer.screenTransform.scale;this.schemeContainer.screenTransform.scale=r,this.dragScreenTo(i,a)}else if(this.schemeContainer.screenTransform.scale>.05){const i=e-(r=this.schemeContainer.screenTransform.scale/n)*(e-s)/this.schemeContainer.screenTransform.scale,a=t-r*(t-o)/this.schemeContainer.screenTransform.scale;this.schemeContainer.screenTransform.scale=r,this.dragScreenTo(i,a)}}resetZoom(){this.changeZoomTo(1)}zoomOut(){const e=this.schemeContainer.screenTransform.scale;let t=Rg[0],i=!1;for(let n=0;n<Rg.length&&!i;n++)Rg[n]<e?t=Rg[n]:i=!0;this.changeZoomTo(t)}zoomIn(){const e=this.schemeContainer.screenTransform.scale;let t=Rg[Rg.length-1],i=!1,n=Rg.length-1;for(;!i;)Rg[n]>e?t=Rg[n]:i=!0,n-=1,n<0&&(i=!0);this.changeZoomTo(t)}changeZoomTo(e){!function(e,t,i){const n=e.screenTransform.x,r=e.screenTransform.y,s=document.getElementById(`svg-plot-${e.editorId}`).getBoundingClientRect(),o=s.width/2,a=s.height/2,l=o-t*(o-n)/e.screenTransform.scale,c=a-t*(a-r)/e.screenTransform.scale,h={t:0,finished:!1,oldScale:e.screenTransform.scale,oldX:e.screenTransform.x,oldY:e.screenTransform.y,newScale:t,newX:l,newY:c};jg&&(jg.finished=!0);const d=t=>{const n=performance.now(),r=n-t;h.t+=8*r/1e3;const s=(0,jd.rJ)(zh.Z.clamp(h.t,0,1),jd.jU.EASE_OUT);e.screenTransform.scale=Fg(s,h.oldScale,h.newScale),e.screenTransform.x=Fg(s,h.oldX,h.newX),e.screenTransform.y=Fg(s,h.oldY,h.newY),i(e.screenTransform),!h.finished&&h.t<1&&window.requestAnimationFrame((()=>{d(n)}))};d(performance.now()),jg=h}(this.schemeContainer,e,(e=>{this.listener.onScreenTransformUpdated(this.schemeContainer.screenTransform)}))}dragScreenOffset(e,t){let i=this.schemeContainer.screenTransform.x+e,n=this.schemeContainer.screenTransform.y+t;this.dragScreenTo(i,n)}getScreenBounds(){return null}getScreenBoundsPadding(){return{x:10,y:10}}dragScreenTo(e,t){const i=this.getScreenBounds(),n=this.schemeContainer.screenTransform.scale,r=this.getScreenBoundsPadding();if(i){const s=-i.x*n,o=-i.y*n,a=this.schemeContainer.screenSettings.width-(i.x+i.w)*n,l=this.schemeContainer.screenSettings.height-(i.y+i.h)*n,c={min:Math.min(s,a),max:Math.max(s,a)},h={min:Math.min(o,l),max:Math.max(o,l)};this.schemeContainer.screenTransform.x=Math.max(c.min-r.x,Math.min(e,c.max+r.x)),this.schemeContainer.screenTransform.y=Math.max(h.min-r.y,Math.min(t,h.max+r.y))}else this.schemeContainer.screenTransform.x=e,this.schemeContainer.screenTransform.y=t;this.listener.onScreenTransformUpdated(this.schemeContainer.screenTransform)}isSnappingToItemsEnabled(){return this.store.state.snap.items}snapToGrid(e){const t=zh.Z.getSnappingWidthForScale(this.schemeContainer.screenTransform.scale);return this.store.state.snap.grid?Math.round(e/t)*t:e}snapPoints(e,t,i,n){if(!e)return{dx:i,dy:n};let r=i,s=n,o=this.schemeContainer.screenTransform.scale,a=null,l=1e3,c=null,h=1e3;if(this.isSnappingToItemsEnabled()&&((0,Fe.Ed)(this.schemeContainer.relativeSnappers.horizontal,(i=>{t.has(i.item.id)||(0,Fe.Ed)(e.horizontal,(e=>{let t=Math.abs(i.value-e.y-n);t*o<6&&t<l&&(a={snapper:i,dy:i.value-e.y},l=t)}))})),(0,Fe.Ed)(this.schemeContainer.relativeSnappers.vertical,(n=>{t.has(n.item.id)||(0,Fe.Ed)(e.vertical,(e=>{let t=Math.abs(n.value-e.x-i);t*o<6&&t<h&&(c={snapper:n,dx:n.value-e.x},h=t)}))}))),a)nh.Z.setItemSnapper(this.store,a.snapper),s=a.dy;else if(this.store.state.snap.grid){let t=1e3;(0,Fe.Ed)(e.horizontal,(e=>{const i=this.snapToGrid(e.y+n),r=Math.abs(i-e.y);r<t&&(t=r,s=i-e.y)}))}if(c)nh.Z.setItemSnapper(this.store,c.snapper),r=c.dx;else if(this.store.state.snap.grid){let t=1e3;(0,Fe.Ed)(e.vertical,(e=>{const n=this.snapToGrid(e.x+i),s=Math.abs(n-e.x);s<t&&(t=s,r=n-e.x)}))}return{dx:r,dy:s}}getUpdatePrecision(){return this.schemeContainer.screenTransform.scale<.5?0:Math.max(0,Math.round(Math.log10(100*this.schemeContainer.screenTransform.scale)-1))}round(e){return zh.Z.roundPrecise(e,this.getUpdatePrecision())}}class Ug extends zg{constructor(e,t){super(e.editorId,e.store,t),this.schemeContainer=e.schemeContainer,this.parentState=e}getScreenBounds(){return this.parentState.getScreenBounds()}getScreenBoundsPadding(){return this.parentState.getScreenBoundsPadding()}migrate(e){this.parentState.migrateSubState(e)}migrateSubState(e){this.parentState.migrateSubState(e)}migrateToPreviousSubState(){this.parentState.migrateToPreviousSubState()}cancel(){this.parentState.cancel()}getSchemeContainer(){return this.parentState.schemeContainer}}class Hg extends Ug{constructor(e,t,i){super(e,"drag-screen"),this.schemeContainer=e.schemeContainer,this.originalClickPoint=i,this.exitOnMouseUp=t,this.originalScreenOffset={x:this.schemeContainer.screenTransform.x,y:this.schemeContainer.screenTransform.y},this.parentState.resetInertiaDrag()}keyUp(e,t){e===od&&this.migrateToPreviousSubState()}mouseDown(e,t,i,n,r,s){this.originalClickPoint={x:e,y:t,mx:i,my:n},this.originalScreenOffset={x:this.schemeContainer.screenTransform.x,y:this.schemeContainer.screenTransform.y},this.parentState.resetInertiaDrag()}mouseMove(e,t,i,n,r,s){if(this.originalClickPoint){if(0===s.buttons)return void this.mouseUp(e,t,i,n,r,s);this.parentState.registerInertiaPositions(i,n),this.dragScreenTo(Math.floor(this.originalScreenOffset.x+i-this.originalClickPoint.mx),Math.floor(this.originalScreenOffset.y+n-this.originalClickPoint.my))}}mouseUp(e,t,i,n,r,s){this.originalClickPoint=null,this.parentState.initScreenInertia(),this.listener.onScreenTransformUpdated(this.schemeContainer.screenTransform),this.exitOnMouseUp&&this.migrateToPreviousSubState()}}class qg extends Ug{constructor(e,t,i,n,r,s){super(e,"multi-select"),this.clickedObject=null,this.shouldSelectOnlyOne=!1,this.multiSelectBox={x:t,y:i,w:0,h:0},this.originalClickPoint={x:t,y:i,mx:n,my:r},this.item=e.item,this.schemeContainer=e.schemeContainer,this.selectorCallback=s}mouseMove(e,t,i,n,r,s){0!==s.buttons?(e>this.originalClickPoint.x?(this.multiSelectBox.x=this.originalClickPoint.x,this.multiSelectBox.w=e-this.originalClickPoint.x):(this.multiSelectBox.x=e,this.multiSelectBox.w=this.originalClickPoint.x-e),t>this.originalClickPoint.y?(this.multiSelectBox.y=this.originalClickPoint.y,this.multiSelectBox.h=t-this.originalClickPoint.y):(this.multiSelectBox.y=t,this.multiSelectBox.h=this.originalClickPoint.y-t),nh.Z.setMultiSelectBox(this.store,this.multiSelectBox)):this.mouseUp(e,t,i,n,r,s)}mouseUp(e,t,i,n,r,s){this.selectorCallback(this.multiSelectBox,Ng(s)),nh.Z.setMultiSelectBox(this.store,null),this.migrateToPreviousSubState()}}const Wg=zg;class Vg extends Wg{constructor(e,t,i){super(e,t,"create-item",i),this.item=null,this.template=null,this.addedToScheme=!1,this.originalPoint=null}reset(){this.item=null,this.template=null,this.addedToScheme=!1}setItem(e,t){this.item=e,this.template=t,!t&&e.args&&e.args.templated&&e.args.templateRef&&this.schemeContainer.getTemplate(e.args.templateRef).then((e=>{this.template=e}));const i=Id.Z.find(e.shape);i&&i.shapeEvents&&i.shapeEvents.beforeCreate&&i.shapeEvents.beforeCreate(this.store,e)}mouseDown(e,t,i,n,r,s){const o=this.snapPoints({vertical:[{x:e,y:t}],horizontal:[{x:e,y:t}]},new Set,0,0);this.originalPoint={x:e+o.dx,y:t+o.dy},this.item.name=this.schemeContainer.generateUniqueName(this.item.name),this.item.area.w=0,this.item.area.h=0,this.schemeContainer.addNonIndexableItem(this.item),this.addedToScheme=!0,this.schemeContainer.setActiveBoundaryBox(this.item.area)}mouseMove(e,t,i,n,r,s){if(nh.Z.clearItemSnappers(this.store),this.addedToScheme){if(0===s.buttons)return void this.submitItemAndFinishCreating();const i=this.snapPoints({vertical:[{x:e,y:t}],horizontal:[{x:e,y:t}]},new Set,0,0);this.updateItemArea(e+i.dx,t+i.dy,s)}}mouseUp(e,t,i,n,r,s){if(this.addedToScheme){const i=this.snapPoints({vertical:[{x:e,y:t}],horizontal:[{x:e,y:t}]},new Set,0,0);this.updateItemArea(e+i.dx,t+i.dy,s),this.submitItemAndFinishCreating()}else this.cancel();nh.Z.clearItemSnappers(this.store)}submitItemAndFinishCreating(){if(this.schemeContainer.setActiveBoundaryBox(null),this.template){const e=this.item.args&&this.item.args.templateArgs?this.item.args.templateArgs:{};this.schemeContainer.regenerateTemplatedItem(this.item,this.template,e,this.item.area.w,this.item.area.h)}if(this.store.state.autoRemount&&"hud"!==this.item.shape){const e=this.schemeContainer.findItemSuitableForParent(this.item);this.schemeContainer.deselectAllItems(),e&&this.schemeContainer.remountItemInsideOtherItem(this.item.id,e.id)}this.schemeContainer.reindexItems(),this.schemeContainer.selectItem(this.item),this.listener.onItemChanged(this.item.id),this.listener.onSchemeChangeCommitted(),this.template&&mh.Z.item.templateSelected.$emit(this.editorId,this.item,this.template.templateRef),this.cancel()}updateItemArea(e,t,i){e>this.originalPoint.x?(this.item.area.w=this.round(e-this.originalPoint.x),this.item.area.x=this.round(this.originalPoint.x)):(this.item.area.w=this.round(this.originalPoint.x-e),this.item.area.x=this.round(e)),t>this.originalPoint.y?(this.item.area.h=this.round(t-this.originalPoint.y),this.item.area.y=this.round(this.originalPoint.y)):(this.item.area.h=this.round(this.originalPoint.y-t),this.item.area.y=this.round(t)),(i.metaKey||i.ctrlKey)&&(this.item.area.w=Math.max(this.item.area.w,this.item.area.h),this.item.area.h=this.item.area.w),this.template?(this.schemeContainer.regenerateTemplatedItem(this.item,this.template,this.item.args.templateArgs||{},this.item.area.w,this.item.area.h),(0,fh.Hp)([this.item],(e=>this.listener.onItemChanged(e.id)))):this.listener.onItemChanged(this.item.id)}}const Gg=new Oh.Yd("UserEventBus");class Kg{constructor(e){this.editorId=e,this.itemEventSubscribers={},this.revision=jl().generate()}subscribeItemEvent(e,t,i){this.itemEventSubscribers.hasOwnProperty(e)||(this.itemEventSubscribers[e]={}),this.itemEventSubscribers[e].hasOwnProperty(t)||(this.itemEventSubscribers[e][t]=[]),this.itemEventSubscribers[e][t].push({callback:i})}emitItemEvent(e,t,...i){Gg.infoEvent(t,[e]);const n=this.itemEventSubscribers[e];n&&n[t]&&(0,Fe.Ed)(n[t],(n=>{n.callback.apply(null,[this,this.revision,e,t,i])}))}clear(){this.itemEventSubscribers={},this.revision=jl().generate()}clearEventsForItem(e){this.itemEventSubscribers.hasOwnProperty(e)&&delete this.itemEventSubscribers[e]}isActionAllowed(e){return this.revision===e}}const Jg=zd.Z.standardEvents.mousein.id,Yg=zd.Z.standardEvents.mouseout.id,Qg=zd.Z.standardEvents.clicked.id;function Xg(e,t){window.requestAnimationFrame((()=>{const i=performance.now();e.loop(i-t)&&Xg(e,i)}))}class ev{constructor(e,t){this.schemeContainer=e,this.shouldLoop=!0,this.pos={x:0,y:0},this.localClickPoint=t}start(){Xg(this,performance.now())}updateItemPosition(e){this.pos=(0,gh.rs)(this.localClickPoint.x,this.localClickPoint.y,e)}loop(e){const t=this.pos.x*this.schemeContainer.screenTransform.scale+this.schemeContainer.screenTransform.x,i=this.pos.y*this.schemeContainer.screenTransform.scale+this.schemeContainer.screenTransform.y;return t<20&&(this.schemeContainer.screenTransform.x+=e/2),i<20&&(this.schemeContainer.screenTransform.y+=e/2),t>this.schemeContainer.screenSettings.width-20&&(this.schemeContainer.screenTransform.x-=e/2),i>this.schemeContainer.screenSettings.height-20&&(this.schemeContainer.screenTransform.y-=e/2),this.shouldLoop}stop(){this.shouldLoop=!1}}class tv extends Ug{constructor(e,t,i,n,r){super(e,"drag-item"),this.listener=t,this.initialClickPoint={x:n,y:r},this.originalItemPosition={x:i.area.x,y:i.area.y},this.item=i,this.moved=!1,this.lastDropCandidate=null,this.looper=new ev(this.schemeContainer,(0,gh.N5)(n,r,i));const s=(0,gh.rs)(i.area.px*i.area.w,i.area.py*i.area.h,i);this.worldPivotCorrection={x:n-s.x,y:r-s.y}}cancel(){super.cancel(),this.looper.stop()}emit(e,t,...i){this.parentState.emit(e,t,...i)}mouseMove(e,t,i,n,r,s){if(0===s.buttons)return void this.mouseUp(e,t,i,n,r,s);this.moved||(this.emit(this.item,zd.Z.standardEvents.dragStart.id),this.looper.start()),this.moved=!0,this.emit(this.item,zd.Z.standardEvents.drag.id);const o=this.schemeContainer.relativePointForItem(this.initialClickPoint.x,this.initialClickPoint.y,this.item),a=this.schemeContainer.relativePointForItem(e,t,this.item),l=this.originalItemPosition.x+a.x-o.x,c=this.originalItemPosition.y+a.y-o.y;this.item.behavior.dragging===fh.qv.dragndrop.id?this.handleDroppableMouseMove(l,c):this.item.behavior.dragging===fh.qv.path.id&&this.item.behavior.dragPath?this.handlePathMouseMove(e,t):(this.item.area.x=l,this.item.area.y=c),this.schemeContainer.readjustItemAndDescendants(this.item.id,!0),this.looper.updateItemPosition(this.item),mh.Z.item.changed.specific.$emit(this.editorId,this.item.id,"area")}handlePathMouseMove(e,t){const i=this.schemeContainer.findElementsBySelector(this.item.behavior.dragPath);if(0===i.length)return;let n=-1,r=null,s=null,o=null,a=-1;if(i.forEach((i=>{if(i.id===this.item.id||i.meta.ancestorIds&&(0,Fe.cq)(i.meta.ancestorIds)>=0)return;const l=(0,gh.Ls)(i);if(!l)return;const c=(0,gh.N5)(e-this.worldPivotCorrection.x,t-this.worldPivotCorrection.y,i),h=zh.Z.closestPointOnPath(c.x,c.y,l);if(!h)return;const d=(0,gh.rs)(h.x,h.y,i),u=(d.x-e)*(d.x-e)+(d.y-t)*(d.y-t);(u<n||n<0)&&(n=u,r=d,s=i,o=l,a=h.distance)})),!r)return;const l=zh.Z.findTranslationMatchingWorldPoint(r.x,r.y,this.item.area.w*this.item.area.px,this.item.area.h*this.item.area.py,this.item.area,this.item.meta.transformMatrix);if(this.item.area.x=l.x,this.item.area.y=l.y,this.item.behavior.dragPathAlign){const e=o.getPointAtLength(a+1),t=o.getPointAtLength(a-1),i=(0,gh.rs)(e.x,e.y,s),n=(0,gh.rs)(t.x,t.y,s),r=i.x-n.x,l=i.y-n.y,c=r*r+l*l;if(!zh.Z.tooSmall(c)){const e=Math.sqrt(c),t=r/e,i=l/e,n=180*zh.Z.fullAngleForNormalizedVector(t,i)/Math.PI;this.item.area.r=n,isFinite(this.item.behavior.dragPathRotation)&&(this.item.area.r+=this.item.behavior.dragPathRotation)}}}handleDroppableMouseMove(e,t){this.item.area.x=e,this.item.area.y=t;const i=this.findDesignatedDropItem();if(!this.lastDropCandidate||i&&i.id===this.lastDropCandidate.id||(this.emit(this.item,zd.Z.standardEvents.dragObjectOut.id,this.lastDropCandidate),this.emit(this.lastDropCandidate,zd.Z.standardEvents.dragObjectOut.id,this.item)),!i)return void(this.lastDropCandidate=null);const n=this.getDropPosition(i);n&&(this.item.area.x=n.x,this.item.area.y=n.y),this.lastDropCandidate&&this.lastDropCandidate.id===i.id||(this.emit(this.item,zd.Z.standardEvents.dragObjectIn.id,i),this.emit(i,zd.Z.standardEvents.dragObjectIn.id,this.item)),this.lastDropCandidate=i}getDropPosition(e){const t=(0,gh.rs)(e.area.w/2,e.area.h/2,e);return zh.Z.findTranslationMatchingWorldPoint(t.x,t.y,this.item.area.w/2,this.item.area.h/2,this.item.area,this.item.meta.transformMatrix)}mouseUp(e,t,i,n,r,s){if(this.looper.stop(),this.emit(this.item,zd.Z.standardEvents.dragEnd.id),!this.moved)return this.parentState.handleItemClick(this.item,i,n),void this.migrateToPreviousSubState();if(this.item.behavior.dragging===fh.qv.dragndrop.id){const e=this.lastDropCandidate;if(e){const t=this.getDropPosition(e);t&&(this.item.area.x=t.x,this.item.area.y=t.y),this.emit(this.item,zd.Z.standardEvents.drop.id,e),this.emit(e,zd.Z.standardEvents.receiveDrop.id,this.item)}else this.item.area.x=this.originalItemPosition.x,this.item.area.y=this.originalItemPosition.y}mh.Z.item.changed.specific.$emit(this.editorId,this.item.id,"area"),this.migrateToPreviousSubState()}findDesignatedDropItem(){if("self"===this.item.behavior.dropTo)return null;const e=this.schemeContainer.findElementsBySelector(this.item.behavior.dropTo,null),t=(0,gh.av)([this.item]);let i=null;const n=t.w*t.h;return e.forEach((e=>{if(e.id===this.item.id||e.meta.ancestorIds&&(0,Fe.cq)(e.meta.ancestorIds)>=0)return;const r=(0,gh.av)([e]),s=zh.Z.overlappingArea(t,r);s&&s.w*s.h>n/2&&(i=e)})),i}}class iv extends Ug{constructor(e,t,i){super(e,"idle"),this.listener=t,this.mouseMovedAfterClick=!1,this.initialClickPoint=null,this.currentHoveredItem=null,this.hoveredItemIds=new Set,this.userEventBus=i,this.schemeContainer=this.parentState.schemeContainer}reset(){this.softReset(),this.hoveredItemIds=new Set}softReset(){this.mouseMovedAfterClick=!1,this.initialClickPoint=null}keyPressed(e,t){e===ad?this.zoomOut():e===ld?this.zoomIn():e===ed&&this.resetZoom()}mouseDown(e,t,i,n,r,s){if(super.mouseDown(e,t,i,n,r,s),this.mouseMovedAfterClick=!1,this.initialClickPoint={x:i,y:n},!Zg(s)&&r&&"item"===r.type){if("none"!==r.item.behavior.dragging)return void this.migrateSubState(new tv(this,this.listener,r.item,e,t));if(r.item.meta.ancestorDraggableId){const i=this.schemeContainer.findItemById(r.item.meta.ancestorDraggableId);if(i)return void this.migrateSubState(new tv(this,this.listener,i,e,t))}}}mouseUp(e,t,i,n,r,s){if(!this.mouseMovedAfterClick){if(r&&r.item){this.listener.onItemClicked(r.item,e,t);const s=Id.Z.find(r.item.shape);if(s&&s.onMouseDown){const i=(0,gh.N5)(e,t,r.item);s.onMouseDown(this.editorId,r.item,r.areaId,i.x,i.y)}this.parentState.handleItemClick(r.item,i,n)}else s.target&&s.target.closest(".item-link")||this.listener.onVoidClicked();this.softReset()}}mouseMove(e,t,i,n,r,s){if(s.touches&&2===s.touches.length)this.mobilePinchToZoom(s);else if(this.initialClickPoint&&Math.abs(i-this.initialClickPoint.x)+Math.abs(n-this.initialClickPoint.y)>3)this.mouseMovedAfterClick=!0,s.preventDefault(),0===s.buttons?this.softReset():this.migrate(new Hg(this.parentState,!0,{x:e,y:t,mx:i,my:n}));else{if(r.item){const i=Id.Z.find(r.item.shape);if(i&&i.onMouseMove){const n=(0,gh.N5)(e,t,r.item);i.onMouseMove(this.editorId,r.item,r.areaId,n.x,n.y)}}this.handleItemHoverEvents(r)}}sendItemEventById(e,t){const i=this.schemeContainer.findItemById(e);i&&this.emit(i,t)}handleItemHoverEvents(e){if(e&&("item"===e.type||"custom-item-area"===e.type)&&e.item)if(this.currentHoveredItem){if(this.currentHoveredItem.id!==e.item.id){let t=new Set;e.item.meta&&Array.isArray(e.item.meta.ancestorIds)&&(t=new Set(e.item.meta.ancestorIds)),t.add(e.item.id),this.hoveredItemIds.forEach((e=>{t.has(e)||(this.hoveredItemIds.delete(e),this.sendMouseOutEvent(e))})),t.forEach((e=>{this.hoveredItemIds.has(e)||(this.hoveredItemIds.add(e),this.sendItemEventById(e,Jg))})),this.currentHoveredItem=e.item}}else e.item.meta&&Array.isArray(e.item.meta.ancestorIds)?(this.hoveredItemIds=new Set(e.item.meta.ancestorIds.concat([e.item.id])),e.item.meta.ancestorIds.forEach((e=>{this.sendItemEventById(e,Jg)}))):this.hoveredItemIds=new Set([e.item.id]),this.emit(e.item,Jg),this.currentHoveredItem=e.item;else this.hoveredItemIds.forEach((e=>{this.sendMouseOutEvent(e)})),this.hoveredItemIds.clear(),this.currentHoveredItem=null}sendMouseOutEvent(e){this.sendItemEventById(e,Yg);const t=this.schemeContainer.findItemById(e);if(!t)return;const i=Id.Z.find(t.shape);i&&i.onMouseOut&&i.onMouseOut(this.editorId,t)}emit(e,t,...i){this.parentState.emit(e,t,...i)}handleItemClick(e,t,i){this.parentState.handleItemClick(e,t,i)}}const nv=class extends Wg{constructor(e,t,i,n){super(e,t,"interact",n),this.subState=null,this.userEventBus=i,this.screenBoundsUpdateTimer=null,this.screenBounds=null,this.screenBoundsPadding={x:10,y:10}}cancel(){super.cancel(),this.screenBoundsUpdateTimer&&(clearTimeout(this.screenBoundsUpdateTimer),this.screenBoundsUpdateTimer=null)}reset(){this.screenBoundsUpdateTimer&&(clearTimeout(this.screenBoundsUpdateTimer),this.screenBoundsUpdateTimer=null),this.screenBounds=null,this.updateScreenBounds(),this.migrateSubState(new iv(this,this.listener,this.userEventBus))}scheduleScreenBoundsUpdate(){this.screenBoundsUpdateTimer&&clearTimeout(this.screenBoundsUpdateTimer),this.screenBoundsUpdateTimer=setTimeout((()=>this.updateScreenBounds()),500)}onItemChanged(e){this.scheduleScreenBoundsUpdate()}getScreenBounds(){return this.screenBounds}getScreenBoundsPadding(){return this.screenBoundsPadding}updateScreenBounds(){let e=null;const t=[],i=n=>{for(let r=0;r<n.length;r++){const s=n[r];if("dummy"===s.shape&&s.shapeProps.screenBounds)return e=s,!1;s.visible&&"hud"!==s.shape&&(t.push(s),s.clip||(Array.isArray(s.childItems)&&i(s.childItems),Array.isArray(s._childItems)&&i(s._childItems)))}return!0};i(this.schemeContainer.scheme.items);const n=(0,gh.av)(e?[e]:t);this.screenBounds=n,e?(this.screenBoundsPadding.x=0,this.screenBoundsPadding.y=0):(this.screenBoundsPadding.x=.95*this.schemeContainer.screenSettings.width,this.screenBoundsPadding.y=.95*this.schemeContainer.screenSettings.height),this.dragScreenTo(this.schemeContainer.screenTransform.x,this.schemeContainer.screenTransform.y)}handleItemClick(e,t,i){this.emit(e,Qg),e.links&&e.links.length>0&&this.listener.onItemLinksShowRequested(e),(0,fh.U3)(e)&&(e.interactionMode===fh.pp.SIDE_PANEL?this.listener.onItemSidePanelRequested(e):e.interactionMode===fh.pp.TOOLTIP&&this.listener.onItemTooltipRequested(e,t,i))}emit(e,t,...i){e&&e.id&&this.userEventBus.emitItemEvent(e.id,t,...i)}};function rv(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function sv(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?rv(Object(i),!0).forEach((function(t){ov(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rv(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function ov(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const av=new Oh.Yd("StateDragItem"),lv=!0,cv=!1,hv={moved:!0,rotated:!1,resized:!1,id:""},dv={moved:!1,rotated:!1,resized:!1,controlPoint:!0,id:""},uv=hv;function pv(e){return e.metaKey||e.ctrlKey||e.shiftKey}function mv(e){e&&(e.worldPivotPoint=zh.Z.worldPointInArea(e.pivotPoint.x*e.area.w,e.pivotPoint.y*e.area.h,e.area))}class fv extends Ug{constructor(e,t,i,n,r,s,o){super(e,t),this.originalPoint={x:n,y:r,mx:s,my:o},this.schemeContainer=e.schemeContainer,this.editBox=i,this.editBoxOriginalArea=Uc.Z.clone(i.area),this.boxPointsForSnapping=this.generateBoxPointsForSnapping(i),this.modificationContextId=jl().generate()}mouseUp(e,t,i,n,r,s){if(nh.Z.clearItemSnappers(this.store),this.editBox&&this.editBox.connectorPoints.length>0){const e=sv(sv({},Nd.W4),{},{id:this.modificationContextId});this.schemeContainer.updateEditBoxItems(this.editBox,cv,e,this.getUpdatePrecision())}this.schemeContainer.reindexItems(),this.schemeContainer.updateEditBox(),this.listener.onSchemeChangeCommitted(),this.migrateToPreviousSubState()}generateBoxPointsForSnapping(e){const t=[[0,0],[e.area.w,0],[e.area.w,e.area.h],[0,e.area.h]],i={x:0,y:0},n={x:0,y:0};return(0,Fe.Ed)(t,((t,r)=>{const s=zh.Z.worldPointInArea(t[0],t[1],e.area);0===r?(i.x=s.x,i.y=s.y,n.x=s.x,n.y=s.y):(i.x=Math.min(i.x,s.x),i.y=Math.min(i.y,s.y),n.x=Math.max(n.x,s.x),n.y=Math.max(n.y,s.y))})),{vertical:[{x:i.x,y:i.y},{x:n.x,y:n.y}],horizontal:[{x:i.x,y:i.y},{x:n.x,y:n.y}]}}}class gv extends Ug{constructor(e,t,i,n,r,s,o){super(e,"resize-edit-box"),this.item=t,this.pointId=i,this.originalPoint={x:n,y:r,mx:s,my:o},this.schemeContainer=e.schemeContainer,this.controlPoint=this.findItemControlPoint(this.pointId),this.controlPoint?(this.controlPointOriginalX=this.controlPoint.x,this.controlPointOriginalY=this.controlPoint.y):this.migrateToPreviousSubState()}mouseMove(e,t,i,n,r,s){0!==s.buttons?this.handleControlPointDrag(e,t):this.mouseUp(e,t,i,n,r,s)}mouseUp(e,t,i,n,r,s){this.item.meta.revision+=1,this.schemeContainer.updateEditBoxItems(this.schemeContainer.editBox,cv,dv,this.getUpdatePrecision()),this.schemeContainer.reindexItems(),this.schemeContainer.updateEditBox(),nh.Z.setItemControlPoints(this.store,this.item),this.listener.onSchemeChangeCommitted(),this.listener.onItemsHighlighted({itemIds:[],showPins:!1}),this.migrateToPreviousSubState()}findItemControlPoint(e){if("connector"===this.item.shape){e=parseInt(e);const t=this.item.shapeProps.points[e];return t?{id:e,x:t.x,y:t.y,editBoxConnectorPointIdx:this.findEditBoxConnectorPointIdx(this.item.id,e),isEdgeStart:0===e,isEdgeEnd:e===this.item.shapeProps.points.length-1}:null}for(let t=0;t<this.store.state.itemControlPoints.length;t++){const i=this.store.state.itemControlPoints[t];if(i.id===e)return i.point}return null}findEditBoxConnectorPointIdx(e,t){if(!this.schemeContainer.editBox)return-1;for(let i=0;i<this.schemeContainer.editBox.connectorPoints.length;i++){const n=this.schemeContainer.editBox.connectorPoints[i];if(n.itemId===e&&n.pointIdx===t)return i}return-1}handleControlPointDrag(e,t){if(nh.Z.clearItemSnappers(this.store),this.controlPoint)if("connector"===this.item.shape&&(this.controlPoint.isEdgeStart||this.controlPoint.isEdgeEnd))this.handleConnectorEdgeControlPointDrag(e,t,this.controlPoint),this.schemeContainer.updateItemClones(this.item);else{const i=this.schemeContainer.localPointOnItem(this.originalPoint.x,this.originalPoint.y,this.item),n=this.schemeContainer.localPointOnItem(e,t,this.item),r=n.x-i.x,s=n.y-i.y,o=Id.Z.find(this.item.shape),a=(0,gh.pD)(this.item),l=Math.max(1e-7,a.x),c=Math.max(1e-7,a.y);"connector"===this.item.shape?this.handleConnectorPointDrag(this.pointId,r,s,this.controlPointOriginalX/l,this.controlPointOriginalY/c):o.controlPoints.handleDrag(this.item,this.pointId,this.controlPointOriginalX/l,this.controlPointOriginalY/c,r,s,this,this.schemeContainer),this.listener.onItemChanged(this.item.id),this.schemeContainer.readjustItem(this.item.id,lv,uv,this.getUpdatePrecision()),nh.Z.setItemControlPoints(this.store,this.item),this.schemeContainer.updateItemClones(this.item)}}handleConnectorPointDrag(e,t,i,n,r){const s=this.item.shapeProps.points[e];if(s){const e=this.schemeContainer.worldPointOnItem(n+t,r+i,this.item),o=this.snapPoints({vertical:[e],horizontal:[e]},new Set,0,0),a=e.x+o.dx,l=e.y+o.dy,c=this.schemeContainer.localPointOnItem(a,l,this.item);if(s.x=c.x,s.y=c.y,this.controlPoint.editBoxConnectorPointIdx>=0){const e=zh.Z.localPointInArea(a,l,this.schemeContainer.editBox.area);this.schemeContainer.editBox.connectorPoints[this.controlPoint.editBoxConnectorPointIdx].x=e.x,this.schemeContainer.editBox.connectorPoints[this.controlPoint.editBoxConnectorPointIdx].y=e.y}nh.Z.setSelectedConnector(this.store,this.item)}}handleConnectorEdgeControlPointDrag(e,t,i){let n=10;this.schemeContainer.screenTransform.scale>0&&(n/=this.schemeContainer.screenTransform.scale);const r=this.item.shapeProps.points[this.pointId];if(!r)return;let s=null;this.editBox?s=this.editBox.itemIds:(s=new Set,s.add(this.item.id));const o=this.snapPoints({horizontal:[{x:e,y:t}],vertical:[{x:e,y:t}]},s,0,0),a=this.schemeContainer.findClosestPointToItems(e+o.dx,t+o.dy,n,this.item.id,!0);let l,c;if(a&&a.itemId!==this.item.id&&!this.schemeContainer.doesItemDependOn(a.itemId,this.item.id)){l=a.x,c=a.y;const e=this.schemeContainer.localPointOnItem(a.x,a.y,this.item);r.x=e.x,r.y=e.y,a.hasOwnProperty("nx")&&(r.nx=a.nx,r.ny=a.ny),this.listener.onItemsHighlighted({itemIds:[a.itemId],showPins:!0}),i.isEdgeStart?(this.item.shapeProps.sourceItem="#"+a.itemId,a.pinId?(this.item.shapeProps.sourcePin=a.pinId,this.item.shapeProps.sourceItemPosition=0):(this.item.shapeProps.sourcePin="",this.item.shapeProps.sourceItemPosition=a.distanceOnPath)):(this.item.shapeProps.destinationItem="#"+a.itemId,a.pinId?(this.item.shapeProps.destinationPin=a.pinId,this.item.shapeProps.destinationItemPosition=0):(this.item.shapeProps.destinationPin="",this.item.shapeProps.destinationItemPosition=a.distanceOnPath))}else{l=e+o.dx,c=t+o.dy;const n=this.schemeContainer.localPointOnItem(l,c,this.item);r.x=n.x,r.y=n.y,this.listener.onItemsHighlighted({itemIds:[],showPins:!1}),i.isEdgeStart?(this.item.shapeProps.sourceItem=null,this.item.shapeProps.sourcePin="",this.item.shapeProps.sourceItemPosition=0):(this.item.shapeProps.destinationItem=null,this.item.shapeProps.destinationPin="",this.item.shapeProps.destinationItemPosition=0),r.hasOwnProperty("nx")&&(delete r.nx,delete r.ny)}if(this.controlPoint.editBoxConnectorPointIdx>=0){const e=zh.Z.localPointInArea(l,c,this.schemeContainer.editBox.area);this.schemeContainer.editBox.connectorPoints[this.controlPoint.editBoxConnectorPointIdx].x=e.x,this.schemeContainer.editBox.connectorPoints[this.controlPoint.editBoxConnectorPointIdx].y=e.y}Id.Z.find(this.item.shape),this.listener.onItemChanged(this.item.id),this.schemeContainer.readjustItem(this.item.id,lv,sv(sv({},uv),{},{controlPoint:!0}),this.getUpdatePrecision()),nh.Z.setSelectedConnector(this.store,this.item)}}class vv extends fv{constructor(e,t,i,n,r,s){super(e,"drag-pivot-edit-box",t,i,n,r,s),this.oldPivotPoint={x:t.pivotPoint.x,y:t.pivotPoint.y}}mouseMove(e,t,i,n,r,s){if(0===s.buttons)return void this.mouseUp(e,t,i,n,r,s);if(!this.editBox)return;if(0===this.editBox.area.w||0===this.editBox.area.h)return;const o=zh.Z.localPointInArea(e,t,this.editBox.area),a=zh.Z.localPointInArea(this.originalPoint.x,this.originalPoint.y,this.editBox.area);this.editBox.pivotPoint.x=zh.Z.clamp(this.oldPivotPoint.x+(o.x-a.x)/this.editBox.area.w,0,1),this.editBox.pivotPoint.y=zh.Z.clamp(this.oldPivotPoint.y+(o.y-a.y)/this.editBox.area.h,0,1),mv(this.editBox)}mouseUp(e,t,i,n,r,s){1===this.editBox.items.length&&(this.editBox.items[0].area.px=this.editBox.pivotPoint.x,this.editBox.items[0].area.py=this.editBox.pivotPoint.y,this.schemeContainer.updateEditBoxItems(this.editBox,cv,hv,this.getUpdatePrecision())),super.mouseUp(e,t,i,n,r,s)}}class yv extends fv{constructor(e,t,i,n,r,s,o){super(e,"resize-edit-box",t,n,r,s,o),this.draggerEdges=i;let a=0;zh.Z.tooSmall(t.area.h)||(a=t.area.w/t.area.h),this.originalRatio=a,this.template=null,t.templateRef&&this.schemeContainer.getTemplate(t.templateRef).then((e=>{this.template=e}))}mouseMove(e,t,i,n,r,s){if(nh.Z.clearItemSnappers(this.store),0===s.buttons)return void this.mouseUp(e,t,i,n,r,s);if(this.editBox&&this.editBox.locked)return;const o=s.metaKey||s.ctrlKey?this.originalRatio:0;if(Pv(this.editBox,this.editBoxOriginalArea,this.originalPoint,this.store,this,e,t,this.draggerEdges,o),this.schemeContainer.updateEditBoxItems(this.editBox,lv,{moved:!1,rotated:!1,resized:!0,id:this.modificationContextId},this.getUpdatePrecision()),1===this.editBox.items.length&&nh.Z.setItemControlPoints(this.store,this.editBox.items[0]),this.schemeContainer.updateEditBoxConnectorPoints(),mv(this.editBox),this.editBox.templateItemRoot&&this.template&&this.editBox.templateItemRoot.args&&this.editBox.templateItemRoot.args.templateArgs){const e=this.editBox.templateItemRoot;this.schemeContainer.regenerateTemplatedItem(e,this.template,e.args.templateArgs,e.area.w,e.area.h),(0,fh.Hp)([e],(e=>mh.Z.item.changed.specific.$emit(this.editorId,e.id)))}}}class xv extends fv{constructor(e,t,i,n,r,s){super(e,"rotate-edit-box",t,i,n,r,s)}mouseMove(e,t,i,n,r,s){if(0===s.buttons)return void this.mouseUp(e,t,i,n,r,s);if(this.editBox&&this.editBox.locked)return;const o=this.editBoxOriginalArea,a=zh.Z.worldPointInArea(o.w*this.editBox.pivotPoint.x,o.h*this.editBox.pivotPoint.y,o),l=this.calculateRotatedAngle(e,t,this.originalPoint.x,this.originalPoint.y,a.x,a.y,s),c=l*Math.PI/180,h=zh.Z.calculateRotationOffsetForSameCenter(this.editBoxOriginalArea.x,this.editBoxOriginalArea.y,a.x,a.y,c);this.editBox.area.x=h.x,this.editBox.area.y=h.y,this.editBox.area.r=o.r+l,this.schemeContainer.updateEditBoxItems(this.editBox,lv,{id:this.modificationContextId,moved:!1,rotated:!0,resized:!1},this.getUpdatePrecision()),this.schemeContainer.updateEditBoxConnectorPoints(),av.info("Rotated multi item edit box",this.editBox)}calculateRotatedAngle(e,t,i,n,r,s,o){const a=i-r,l=n-s,c=e-r,h=t-s,d=a*a+l*l,u=c*c+h*h;if(d<1e-4||u<1e-4)return;const p=a*h-c*l>=0?1:-1,m=(a*c+l*h)/(Math.sqrt(d)*Math.sqrt(u));let f=p*Math.acos(m)*180/Math.PI;return isNaN(f)?0:(pv(o)||(f=5*Math.round(f/5)),f)}}class bv extends fv{constructor(e,t,i,n,r,s){super(e,"drag-edit-box",t,i,n,r,s),this.proposedItemForMounting=null,this.proposedToRemountToRoot=!1}mouseMove(e,t,i,n,r,s){if(nh.Z.clearItemSnappers(this.store),!this.editBox)return void this.migrateToPreviousSubState();if(this.editBox.locked)return;if(0===s.buttons)return void this.mouseUp(e,t,i,n,r,s);const o=e-this.originalPoint.x,a=t-this.originalPoint.y;nh.Z.clearItemSnappers(this.store);const l=this.snapPoints(this.boxPointsForSnapping,this.editBox.itemIds,o,a);if(this.editBox.area.x=this.editBoxOriginalArea.x+l.dx,this.editBox.area.y=this.editBoxOriginalArea.y+l.dy,this.schemeContainer.updateEditBoxItems(this.editBox,lv,hv,this.getUpdatePrecision()),1===this.editBox.items.length&&"connector"===this.editBox.items[0].shape&&(nh.Z.setItemControlPoints(this.store,this.editBox.items[0]),nh.Z.setSelectedConnector(this.store,this.editBox.items[0])),this.store.state.autoRemount&&!this.parentState.isRecording){const e={meta:{},area:this.editBox.area};this.proposedItemForMounting=this.schemeContainer.findItemSuitableForParent(e,(e=>{if(this.editBox.itemIds.has(e.id))return!1;const t=Array.from(this.editBox.itemIds);if(t.findIndex((t=>(0,gh.I4)(e,t)))>=0)return!1;for(let i=0;i<t.length;i++)if(this.schemeContainer.hasDependencyOnItem(t[i],e.id))return!1;return!0}))}else this.proposedItemForMounting=null;this.proposedItemForMounting?(this.listener.onItemsHighlighted({itemIds:[this.proposedItemForMounting.id],showPins:!1}),this.proposedToRemountToRoot=!1):(this.listener.onItemsHighlighted({itemIds:[],showPins:!1}),this.proposedToRemountToRoot=!0),this.schemeContainer.updateEditBoxConnectorPoints(),mv(this.editBox)}mouseUp(e,t,i,n,r,s){if(this.listener.onItemsHighlighted({itemIds:[],showPins:!1}),super.mouseUp(e,t,i,n,r,s),this.schemeContainer.updateEditBoxItems(this.editBox,cv,hv,this.getUpdatePrecision()),!this.store.state.autoRemount||this.parentState.isRecording)return;const o=this.editBox.items.filter((e=>!e.locked&&!(e=>e.meta&&e.meta.templated&&e.meta.templateRootId)(e)));0!==o.length&&(this.editBox&&this.proposedItemForMounting?this.remountItems(o,this.proposedItemForMounting):this.editBox&&this.proposedToRemountToRoot&&this.remountItems(o))}remountItems(e,t){const i=new Set;(0,Fe.Ed)(e,(e=>{if(!(e.meta&&e.meta.ancestorIds&&(0,Fe.sE)(e.meta.ancestorIds,(e=>i.has(e)))))if(i.add(e.id),t)e.meta&&e.meta.parentId!==t.id&&this.schemeContainer.remountItemInsideOtherItem(e.id,t.id);else if(e.meta&&e.meta.parentId&&e.meta.ancestorIds){const t=this.schemeContainer.findItemById(e.meta.ancestorIds[0]);t?this.schemeContainer.remountItemAfterOtherItem(e.id,t.id):this.schemeContainer.remountItemToRoot(e.id)}}))}}class wv extends Ug{constructor(e,t){super(e,"idle"),this.clickedObject=null,this.listener=t,this.lastHoveredObject=null}reset(){this.clickedObject=null,this.lastHoveredObject=null,this.schemeContainer=this.parentState.schemeContainer}keyPressed(e,t){if(e!==od){var i=t.ctrlCmdPressed?10:1;rd===e?this.dragItemsByKeyboard(-i,0):sd===e?this.dragItemsByKeyboard(i,0):id===e?this.dragItemsByKeyboard(0,-i):nd===e?this.dragItemsByKeyboard(0,i):e!==od||this.startedDragging?e===ad?this.zoomOut():e===ld?this.zoomIn():e===ed?this.resetZoom():e!==Wh&&e!==qh&&e!==Vh||mh.Z.editBox.fillDisabled.$emit(this.editorId):this.shouldDragScreen=!0}else this.parentState.subState&&"drag-screen"===this.parentState.subState.name||this.migrate(new Hg(this.parentState,!1))}keyUp(e,t){e!==Wh&&e!==qh&&e!==Vh||mh.Z.editBox.fillEnabled.$emit(this.editorId)}mouseDown(e,t,i,n,r,s){if(function(e){return 1===e.button}(s))this.migrate(new Hg(this.parentState,!0,{x:e,y:t,mx:i,my:n}));else if(function(e){return 2===e.button}(s))this.handleRightClick(e,t,i,n,r,s);else{if(!r||"void"===r.type)return pv(s)||this.deselectAllItems(),void this.migrate(new qg(this.parentState,e,t,i,n,((e,t)=>this.selectByBoundaryBox(e,t))));if(this.clickedObject=r,"item"!==r.type&&r.type!==Wd||!r.item){if(r.connectorStarter)return void this.listener.onStartConnecting(r.connectorStarter.item,r.connectorStarter.point);"edit-box-context-menu-button"===r.type&&this.schemeContainer.selectedItems.length>0&&this.listener.onItemRightClick(this.schemeContainer.selectedItems[0],i,n)}else if(!this.schemeContainer.isItemSelected(r.item)){const e=pv(s);this.schemeContainer.selectItem(r.item,e),e||this.handleItemClick(r.item)}}}handleItemClick(e){let t=null,i=null;e.args&&e.args.templated&&e.args.templateRef?(t=e.args.templateRef,i=e):e.meta&&e.meta.templated&&e.meta.templateRef&&(i=this.schemeContainer.findItemById(e.meta.templateRootId),t=e.meta.templateRef),t&&i&&mh.Z.item.templateSelected.$emit(this.editorId,i,t)}handleSimpleClickOnEditBox(e,t,i){const n=this.schemeContainer.getItems();let r=null;for(let i=n.length-1;i>=0;i--){let s=n[i];const o=(0,gh.N5)(e,t,s);if(o.x>=0&&o.x<=s.area.w&&o.y>=0&&o.y<s.area.h&&s.visible&&s.meta.calculatedVisibility){if("connector"!==s.shape){r=s;break}{const i=this.schemeContainer.closestPointToItemOutline(s,{x:e,y:t},{});if(zh.Z.distanceBetweenPoints(e,t,i.x,i.y)/this.schemeContainer.screenTransform.scale<5){r=s;break}}}}if(!r)return;const s=pv(i);this.schemeContainer.selectItem(r,s),s||this.handleItemClick(r)}onItemDoubleClick(e,t,i){if("path"===e.shape){if(e.locked)return;this.listener.onEditPathRequested(e)}else"connector"===e.shape?this.handleDoubleClickOnConnector(e,t,i):this.findTextSlotAndEmitInPlaceEdit(e,t,i)}mouseDoubleClick(e,t,i,n,r,s){r.item?this.onItemDoubleClick(r.item,e,t):"edit-box"===r.type&&1===r.editBox.items.length?this.onItemDoubleClick(r.editBox.items[0],e,t):r.controlPoint&&"connector"===r.controlPoint.item.shape?this.handleDoubleClickOnConnectorControlPoint(r.controlPoint.item,parseInt(r.controlPoint.pointId)):r.itemTextElement?this.findTextSlotAndEmitInPlaceEdit(r.itemTextElement.item,e,t):"void"===r.type&&this.listener.onVoidDoubleClicked(e,t,i,n)}mouseMove(e,t,i,n,r,s){if(this.clickedObject){if(("item"===this.clickedObject.type||this.clickedObject.type===Wd||"edit-box"===this.clickedObject.type)&&this.schemeContainer.editBox)return this.migrate(new bv(this.parentState,this.schemeContainer.editBox,e,t,i,n)),void this.reset();if("edit-box-rotational-dragger"===this.clickedObject.type)return this.migrate(new xv(this.parentState,this.schemeContainer.editBox,e,t,i,n)),void this.reset();if("edit-box-resize-dragger"===this.clickedObject.type)return this.migrate(new yv(this.parentState,this.schemeContainer.editBox,this.clickedObject.draggerEdges,e,t,i,n)),void this.reset();if("edit-box-pivot-dragger"===this.clickedObject.type)return this.migrate(new vv(this.parentState,this.schemeContainer.editBox,e,t,i,n)),void this.reset();if("control-point"===this.clickedObject.type)return this.migrate(new gv(this.parentState,this.clickedObject.controlPoint.item,this.clickedObject.controlPoint.pointId,e,t,i,n)),void this.reset()}else{let s=null;this.lastHoveredObject&&this.lastHoveredObject.type===Wd&&(s=this.lastHoveredObject.item.id),r&&r.type===Wd?r.item.id!==s&&(this.listener.onItemDetailsMouseOver(r.item,e,t,i,n),s&&this.listener.onItemDetailsMouseOut(this.lastHoveredObject.item,e,t,i,n)):this.lastHoveredObject&&this.lastHoveredObject.type===Wd&&this.listener.onItemDetailsMouseOut(this.lastHoveredObject.item,e,t,i,n),this.lastHoveredObject=r}}mouseUp(e,t,i,n,r,s){"edit-box"===r.type&&this.clickedObject&&this.clickedObject.type===r.type&&this.handleSimpleClickOnEditBox(e,t,s),this.clickedObject=null}handleRightClick(e,t,i,n,r,s){"item"===r.type||r.type===Wd?(this.schemeContainer.isItemSelected(r.item)||this.schemeContainer.selectItem(r.item,pv(s)),this.listener.onItemRightClick(r.item,i,n)):"edit-box"===r.type?this.listener.onItemRightClick(r.editBox.items[0],i,n):"void"===r.type&&(this.schemeContainer.deselectAllItems(),this.listener.onVoidRightClicked(i,n))}deselectAllItems(){this.schemeContainer.deselectAllItems(),(0,Fe.Ed)(this.schemeContainer.selectedItems,(e=>this.listener.onItemDeselected(e)))}dragItemsByKeyboard(e,t){const i=this.schemeContainer.editBox;i&&!i.locked&&(i.area.x+=e,i.area.y+=t,this.schemeContainer.updateEditBoxItems(i,cv,hv,this.getUpdatePrecision()),this.schemeContainer.updateEditBox())}handleDoubleClickOnConnector(e,t,i){if(e.locked)return;const n=Id.Z.find(e.shape);if(!n)return;let r=parseInt(e.shapeProps.strokeSize)+1;const s=document.createElementNS("http://www.w3.org/2000/svg","path");let o="";if(e.shapeProps.thick&&e.shapeProps.points.length>1){const t=e.shapeProps.points;o=`M ${t[0].x} ${t[0].y}`;for(let e=1;e<t.length;e++)o+=` L ${t[e].x} ${t[e].y}`;r+=e.shapeProps.thickWidth}else o=n.computeOutline(e);if(!o)return;s.setAttribute("d",o);const a=this.schemeContainer.localPointOnItem(t,i,e),l=zh.Z.closestPointOnPath(a.x,a.y,s),c=a.x-l.x,h=a.y-l.y;if(Math.sqrt(c*c+h*h)<=r){const t=this.findClosestLineSegment(l.distance,e.shapeProps.points,s);e.shapeProps.points.splice(t+1,0,{id:jl().generate(),x:l.x,y:l.y}),this.listener.onItemChanged(e.id),this.schemeContainer.readjustItem(e.id,lv,uv,this.getUpdatePrecision()),nh.Z.setSelectedConnector(this.store,e),this.schemeContainer.reindexItems(),this.schemeContainer.updateEditBox(),this.listener.onSchemeChangeCommitted()}}findClosestLineSegment(e,t,i){let n=t.length-1;for(;n>0;){if(zh.Z.closestPointOnPath(t[n].x,t[n].y,i).distance<e)return n;n--}return 0}handleDoubleClickOnConnectorControlPoint(e,t){"connector"===e.shape&&(0===t||t>=e.shapeProps.points.length-1||(e.shapeProps.points.splice(t,1),this.listener.onItemChanged(e.id),this.schemeContainer.readjustItem(e.id,lv,uv,this.getUpdatePrecision()),nh.Z.setSelectedConnector(this.store,e),this.schemeContainer.reindexItems(),this.schemeContainer.updateEditBox(),this.listener.onSchemeChangeCommitted()))}findTextSlotAndEmitInPlaceEdit(e,t,i){const n=this.findItemTextSlotByPoint(e,t,i);n&&this.listener.onItemTextSlotEditTriggered(e,n.name,n.area,n.markupDisabled,!1)}findItemTextSlotByPoint(e,t,i){const n=this.schemeContainer.localPointOnItem(t,i,e),r=Id.Z.find(e.shape).getTextSlots(e);let s=null;for(let e=0;e<r.length&&!s;e++){const t=r[e];zh.Z.isPointInArea(n.x,n.y,t.area)&&(s=t)}return!s&&r.length>0&&(s=r[0]),s}selectByBoundaryBox(e,t){this.schemeContainer.selectByBoundaryBox(e,t)}}class Cv extends Wg{constructor(e,t,i){super(e,t,"drag-item",i),this.subState=null,this.listener=i,this.isRecording=!1}toggleGrabScreen(e){e?this.migrateSubState(new Hg(this,!1,null)):this.migrateSubState(new wv(this,this.listener))}migrateSubState(e){super.migrateSubState(e)}migrateToPreviousSubState(){super.migrateToPreviousSubState()}reset(){this.migrateSubState(new wv(this,this.listener))}mouseMove(e,t,i,n,r,s){super.mouseMove(e,t,i,n,r,s),0===s.buttons&&nh.Z.clearItemSnappers(this.store)}mouseUp(e,t,i,n,r,s){super.mouseUp(e,t,i,n,r,s),nh.Z.clearItemSnappers(this.store)}shouldAllowFloatingHelperPanel(){return this.subState&&"idle"===this.subState.name}enableRecording(){this.isRecording=!0}disableRecording(){this.isRecording=!1}}function Pv(e,t,i,n,r,s,o,a,l){let c=e.area.x,h=e.area.y,d=e.area.w,u=e.area.h,p=s-i.x,m=o-i.y,f=zh.Z.worldPointInArea(0,0,e.area),g=zh.Z.worldPointInArea(1,0,e.area),v=zh.Z.worldPointInArea(0,1,e.area);const y=e.area.w,x=e.area.h,b={topLeft:zh.Z.worldPointInArea(0,0,e.area),topRight:zh.Z.worldPointInArea(y,0,e.area),bottomRight:zh.Z.worldPointInArea(y,x,e.area),bottomLeft:zh.Z.worldPointInArea(0,x,e.area)},w={x:g.x-f.x,y:g.y-f.y},C={x:v.x-f.x,y:v.y-f.y};nh.Z.clearItemSnappers(n);const P=(i,n,s,o,a)=>{const l=zh.Z.worldPointInArea(i,n,t),c=zh.Z.worldPointInArea(s,o,t);let h=null;zh.Z.sameFloatingValue(l.x,c.x)?h="vertical":zh.Z.sameFloatingValue(l.y,c.y)&&(h="horizontal");let d=p*a.x+m*a.y;if(h){const t={};let i;t[h]=[l],i=r?r.snapPoints(t,e.itemIds,d*a.x,d*a.y):{dx:d*a.x,dy:d*a.y},d=i.dx*a.x+i.dy*a.y}return d},k={top:0,bottom:1,left:2,right:3};let S=0;if((0,Fe.Ed)(a,(e=>{if(S|=1<<k[e],"top"===e){const e=P(0,0,t.w,0,C);c=t.x+e*C.x,h=t.y+e*C.y,u=t.h-e,u<0&&(u=0)}else if("bottom"===e){const e=P(0,t.h,t.w,t.h,C);u=t.h+e,u<0&&(u=0)}else if("left"===e){const e=P(0,0,0,t.h,w);c=t.x+e*w.x,h=t.y+e*w.y,d=t.w-e,d<0&&(d=0)}else if("right"===e){const e=P(t.w,0,t.w,t.h,w);d=t.w+e,d<0&&(d=0)}})),e.area.x=c,e.area.y=h,d>0&&(e.area.w=d),u>0&&(e.area.h=u),l){const t=p*w.x+m*w.y,i=p*C.x+m*C.y;Math.abs(t)>Math.abs(i)?e.area.h=e.area.w/l:e.area.w=e.area.h*l}let I=null;if(S==(1<<k.top|1<<k.left)){const t=b.bottomRight;I=zh.Z.findTranslationMatchingWorldPoint(t.x,t.y,e.area.w,e.area.h,e.area,null)}else if(S==(1<<k.top|1<<k.right)){const t=b.bottomLeft;I=zh.Z.findTranslationMatchingWorldPoint(t.x,t.y,0,e.area.h,e.area,null)}else if(S==(1<<k.bottom|1<<k.right)){const t=b.topLeft;I=zh.Z.findTranslationMatchingWorldPoint(t.x,t.y,0,0,e.area,null)}else if(S==(1<<k.bottom|1<<k.left)){const t=b.topRight;I=zh.Z.findTranslationMatchingWorldPoint(t.x,t.y,e.area.w,0,e.area,null)}I&&(e.area.x=I.x,e.area.y=I.y)}var kv=i(3730);class Sv{constructor(e){e=e||{},this.checkpoints=[],this.size=e.size||30,this.currentPosition=0,this.lastAffinityId=null}commit(e,t){t&&t===this.lastAffinityId?this.checkpoints[this.currentPosition]=Uc.Z.clone(e):(this.lastAffinityId=t,this.currentPosition<this.checkpoints.length-1&&this.currentPosition>=0&&this.checkpoints.splice(this.currentPosition+1,this.checkpoints.length-this.currentPosition),this.checkpoints.length>=this.size&&this.checkpoints.shift(),this.checkpoints.push(Uc.Z.clone(e)),this.currentPosition=this.checkpoints.length-1)}undo(){return this.lastAffinityId=null,this.currentPosition>0&&(this.currentPosition-=1),this.current()}redo(){return this.lastAffinityId=null,this.currentPosition<this.checkpoints.length-1&&(this.currentPosition+=1),this.current()}current(){return this.currentPosition<this.checkpoints.length?Uc.Z.clone(this.checkpoints[this.currentPosition]):null}undoable(){return this.currentPosition>0}redoable(){return this.currentPosition<this.checkpoints.length-1}reset(){this.checkpoints=[],this.currentPosition=0}}function Iv(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Av(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Iv(Object(i),!0).forEach((function(t){_v(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Iv(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function _v(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ev=!0,Tv={id:"",moved:!0,rotated:!1,resized:!1};function Mv(e){return e&&("path-point"===e.type||"path-control-point"===e.type||"path-segment"===e.type)}function $v(e,t){e.shapeProps.paths.forEach(((e,i)=>{e.points.forEach(((e,n)=>{t(e,i,n)}))}))}function Ov(e,t,i,n){const r=n+3*(t-i)-e,s=3*(e-2*t+i),o=4*s*s-12*r*(3*(t-e));if(o<=0)return[];const a=Math.sqrt(o),l=(-2*s+a)/(6*r),c=(-2*s-a)/(6*r),h=[],d=r=>e*(1-r)*(1-r)*(1-r)+3*t*r*(1-r)*(1-r)+3*i*r*r*(1-r)+r*r*r*n;return l>=0&&l<=1&&h.push(d(l)),c>=0&&c<=1&&h.push(d(c)),h}function Dv(e,t,i){const n=e-2*t+i;if(zh.Z.tooSmall(n))return[];const r=(i-t)/n;return r>=0&&r<=1?[e*r*r+2*t*r*(1-r)+i*(1-r)*(1-r)]:[]}function Bv(e){const{w:t,h:i}=e.area;let n=null;const r=e=>{n.x1=Math.min(n.x1,e),n.x2=Math.max(n.x2,e)},s=e=>{n.y1=Math.min(n.y1,e),n.y2=Math.max(n.y2,e)},o=(e,t)=>{n?(r(e),s(t)):n={x1:e,y1:t,x2:e,y2:t}},a=[];$v(e,((n,l,c)=>{0===c&&(a[l]=[]);const h=(0,lu.oJ)(n,t,i);o(h.x,h.y);const d=(0,gh.rs)(h.x,h.y,e);d.t=n.t;let u=null;if(c===e.shapeProps.paths[l].points.length-1?e.shapeProps.paths[l].closed&&(u=(0,lu.oJ)(e.shapeProps.paths[l].points[0],t,i)):u=(0,lu.oJ)(e.shapeProps.paths[l].points[c+1],t,i),"B"===n.t||u&&"B"===u.t){const t=(0,gh.rs)(h.x+h.x1,h.y+h.y1,e);d.x1=t.x,d.y1=t.y;const i=(0,gh.rs)(h.x+h.x2,h.y+h.y2,e);d.x2=i.x,d.y2=i.y,"B"===n.t&&u&&"B"===u.t?(Ov(h.x,h.x+h.x2,u.x+u.x1,u.x).forEach(r),Ov(h.y,h.y+h.y2,u.y+u.y1,u.y).forEach(s)):"B"===n.t&&u?(Dv(h.x,h.x+h.x2,u.x).forEach(r),Dv(h.y,h.y+h.y2,u.y).forEach(s)):"B"!==n.t&&u&&"B"===u.t&&(Dv(h.x,u.x+u.x1,u.x).forEach(r),Dv(h.y,u.y+u.y1,u.y).forEach(s))}if("A"===n.t&&u){d.h=n.h;const e=zh.Z.distanceBetweenPoints(h.x,h.y,u.x,u.y),t=e*n.h/100;if(!zh.Z.tooSmall(t)&&!zh.Z.tooSmall(e)){const i=Math.abs(t/2+e*e/(8*t)),n=[{x:0,y:i},{x:0,y:-i},{x:i,y:0},{x:-i,y:0}],r=zh.Z.createLineEquation(h.x,h.y,u.x,u.y),s={x:(u.x+h.x)/2,y:(u.y+h.y)/2},a=zh.Z.rotateVector90CounterClockwise((u.x-h.x)/e,(u.y-h.y)/e),l={x:s.x+a.x*t,y:s.y+a.y*t};t<0&&(a.x=-a.x,a.y=-a.y);const c=s.x+a.x*(Math.abs(t)-i),d=s.y+a.y*(Math.abs(t)-i),p=zh.Z.identifyPointSideAgainstLine(l.x,l.y,r);n.forEach((e=>{e.x+=c,e.y+=d,p*zh.Z.identifyPointSideAgainstLine(e.x,e.y,r)>0&&o(e.x,e.y)}))}}a[l][c]=d}));const l=(0,gh.rs)(n.x1,n.y1,e);e.area.w=Math.max(0,n.x2-n.x1),e.area.h=Math.max(0,n.y2-n.y1);const c=zh.Z.findTranslationMatchingWorldPoint(l.x,l.y,0,0,e.area,e.meta.transformMatrix);e.area.x=c.x,e.area.y=c.y,$v(e,((t,i,n)=>{const r=a[i][n],s=(0,gh.N5)(r.x,r.y,e);if(s.t=r.t,"B"===s.t){const t=(0,gh.N5)(r.x1,r.y1,e);s.x1=t.x-s.x,s.y1=t.y-s.y;const i=(0,gh.N5)(r.x2,r.y2,e);s.x2=i.x-s.x,s.y2=i.y-s.y}"A"===t.t&&(s.h=t.h),e.shapeProps.paths[i].points[n]=(0,lu.Vk)(s,e.area.w,e.area.h)}))}function Lv(e){if(e.area.w>100&&e.area.h>100)return;const t=Math.max(100,e.area.w),i=Math.max(100,e.area.h);if(e.shapeProps.paths.length>0&&e.shapeProps.paths[0].points.length>0){const n=(0,lu.oJ)(e.shapeProps.paths[0].points[0],e.area.w,e.area.h),r=(0,gh.rs)(n.x,n.y,e);$v(e,((n,r,s)=>{const o=(0,lu.oJ)(n,e.area.w,e.area.h);e.shapeProps.paths[r].points[s]=(0,lu.Vk)(o,t,i)})),e.area.w=t,e.area.h=i;const s=(0,lu.oJ)(e.shapeProps.paths[0].points[0],e.area.w,e.area.h),o=zh.Z.findTranslationMatchingWorldPoint(r.x,r.y,s.x,s.y,e.area,e.meta.transformMatrix);e.area.x=o.x,e.area.y=o.y}}class Rv extends Ug{constructor(e,t,i,n){super(e,"bezier-conversion"),this.point=t,this.pathId=i,this.pointId=n,this.item=e.item}mouseMove(e,t,i,n,r,s){this.updateBezierPoint(e,t)}updateBezierPoint(e,t){const i=this.schemeContainer.localPointOnItem(e,t,this.item),n=(0,lu.Vk)(this.parentState.snapCurvePoint(-1,-1,i.x,i.y),this.item.area.w,this.item.area.h);this.point.t="B",this.point.x2=this.round(n.x-this.point.x),this.point.y2=this.round(n.y-this.point.y),this.point.x1=-this.point.x2,this.point.y1=-this.point.y2,this.listener.onItemChanged(this.item.id),this.listener.updateCurveEditPoint(this.item,this.pathId,this.pointId,this.point)}mouseUp(e,t,i,n,r,s){this.updateBezierPoint(e,t);const o=(0,lu.Vk)((0,gh.N5)(e,t,this.item),this.item.area.w,this.item.area.h);this.item.shapeProps.paths[this.pathId].points.push(Av(Av({},o),{},{t:"L",id:jl().generate()})),this.migrate(new Nv(this.parentState,this.pathId))}}class Nv extends Ug{constructor(e,t){super(e,"creating-path"),this.item=e.item,this.pathId=t,this.shouldClosePath=!1,this.mouseIsDown=!1,this.originalMouseX=0,this.originalMouseY=0}keyPressed(e,t){e===od&&this.migrate(new Hg(this.parentState,!1))}mouseDown(e,t,i,n,r,s){this.originalMouseX=i,this.originalMouseY=n,this.mouseIsDown=!0,this.pathId>=this.item.shapeProps.paths.length&&this.item.shapeProps.paths.push({id:jl().generate(),closed:!1,points:[],pos:"relative"});const o=(0,gh.N5)(e,t,this.item),a=this.parentState.snapCurvePoint(this.pathId,0,o.x,o.y),l=this.item.shapeProps.paths[this.pathId].points,c=(0,lu.Vk)({x:a.x,y:a.y,t:"L"},this.item.area.w,this.item.area.h);if(0===l.length)l.push(Av(Av({},c),{},{id:jl().generate}));else{const e=l.length-1;l[e].x=c.x,l[e].y=c.y,this.snapToFirstPoint(l[e])}this.listener.onItemChanged(this.item.id),this.listener.updateAllCurveEditPoints(this.item),this.parentState.historyCommit()}snapToFirstPoint(e){if(this.item.shapeProps.paths[this.pathId].points.length>2){const t=this.item.shapeProps.paths[this.pathId].points[0],i=(e.x-t.x)*this.item.area.w/lu.DC,n=(e.y-t.y)*this.item.area.h/lu.DC;Math.sqrt(i*i+n*n)*this.getSchemeContainer().screenTransform.scale<=5?(e.x=t.x,e.y=t.y,this.shouldClosePath=!0):this.shouldClosePath=!1}}mouseMove(e,t,i,n,r,s){if(nh.Z.clearItemSnappers(this.store),this.item.shapeProps.paths.length>this.pathId&&this.item.shapeProps.paths[this.pathId].points.length>0){const r=this.item.shapeProps.paths[this.pathId].points.length-1,s=this.item.shapeProps.paths[this.pathId].points[r];if(this.mouseIsDown&&Math.max(Math.abs(i-this.originalMouseX),Math.abs(n-this.originalMouseY))>3)return void this.migrate(new Rv(this.parentState,s,this.pathId,r));{const i=(0,gh.N5)(e,t,this.item),n=this.parentState.snapCurvePoint(this.pathId,r,i.x,i.y),o=(0,lu.Vk)({x:n.x,y:n.y,t:"L"},this.item.area.w,this.item.area.h);s.x=o.x,s.y=o.y,this.snapToFirstPoint(s),this.listener.onItemChanged(this.item.id),this.listener.updateCurveEditPoint(this.item,this.pathId,r,s)}}}mouseUp(e,t,i,n,r,s){if(nh.Z.clearItemSnappers(this.store),this.mouseIsDown=!1,this.shouldClosePath)return this.item.shapeProps.paths[this.pathId].closed=!0,this.shouldClosePath=!1,void this.cancel();const o=(0,gh.N5)(e,t,this.item),a=(0,lu.Vk)({x:o.x,y:o.y,t:"L"},this.item.area.w,this.item.area.h);this.item.shapeProps.paths[this.pathId].points.push(Av(Av({},a),{},{id:jl().generate()})),this.listener.onItemChanged(this.item.id),this.listener.updateAllCurveEditPoints(this.item)}reset(){this.pathId<this.item.shapeProps.paths.length&&this.item.shapeProps.paths[this.pathId].points.length>0&&this.item.shapeProps.paths[this.pathId].points.pop(),this.schemeContainer.reindexItems()}}class Zv extends Ug{constructor(e,t,i,n){super(e,"drag-object"),this.draggedObject=t,this.item=e.item,this.schemeContainer=e.schemeContainer,this.originalClickPoint={x:i,y:n},this.worldSelectedPoints=null,this.originalCurvePaths=Uc.Z.clone(this.item.shapeProps.paths),"path-point"!==this.draggedObject.type&&"path-segment"!==this.draggedObject.type||(this.worldSelectedPoints=this.createWorldSelectedBoundsPoints())}forEachSelectedPoint(e){this.parentState.listener.getCurveEditPaths().forEach(((t,i)=>{t.points.forEach((t=>{t.selected&&e(this.item.shapeProps.paths[i].points[t.id],i,t.id)}))}))}createWorldSelectedBoundsPoints(){const e=[],t=[],i=(e,t)=>{0===e.length?(e.push(t),e.push(t)):(e[0]=Math.min(e[0],t),e[1]=Math.max(e[1],t))};return this.forEachSelectedPoint((n=>{const r=(0,lu.oJ)(n,this.item.area.w,this.item.area.h),s=(0,gh.rs)(r.x,r.y,this.item);i(e,s.x),i(t,s.y)})),[{x:e[0],y:t[0]},{x:e[1],y:t[0]},{x:e[1],y:t[1]},{x:e[0],y:t[1]}]}mouseMove(e,t,i,n,r,s){0!==s.buttons?(nh.Z.clearItemSnappers(this.store),"path-point"===this.draggedObject.type||"path-segment"===this.draggedObject.type?this.handleAllSelectedPoints(e,t):"path-control-point"===this.draggedObject.type&&this.handleCurveControlPointDrag(e,t,s)):this.mouseUp(e,t,i,n,r,s)}mouseUp(e,t,i,n,r,s){this.parentState.historyCommit(),nh.Z.clearItemSnappers(this.store),this.migrateToPreviousSubState()}snapCurvePoint(e,t,i,n){return this.parentState.snapCurvePoint(e,t,i,n)}_cx(e){return e*lu.DC/this.item.area.w}_cy(e){return e*lu.DC/this.item.area.h}cx_(e){return e*this.item.area.w/lu.DC}cy_(e){return e*this.item.area.h/lu.DC}handleCurveControlPointDrag(e,t,i){const n=this.item.shapeProps.paths[this.draggedObject.pathIndex].points[this.draggedObject.pointIndex];if("A"===n.t)return void this.handleArcControlPointDrag(e,t,i);const r=this.schemeContainer.localPointOnItem(this.originalClickPoint.x,this.originalClickPoint.y,this.item),s=this.schemeContainer.localPointOnItem(e,t,this.item),o=this.draggedObject.controlPointIndex,a=1===o?2:1,l=this.snapCurvePoint(-1,-1,this.cx_(n.x+this.originalCurvePaths[this.draggedObject.pathIndex].points[this.draggedObject.pointIndex][`x${o}`])+s.x-r.x,this.cy_(n.y+this.originalCurvePaths[this.draggedObject.pathIndex].points[this.draggedObject.pointIndex][`y${o}`])+s.y-r.y);n[`x${o}`]=this._cx(l.x)-n.x,n[`y${o}`]=this._cy(l.y)-n.y,"B"!==n.t||i.metaKey||i.ctrlKey||i.shiftKey||(n[`x${a}`]=-n[`x${o}`],n[`y${a}`]=-n[`y${o}`]),this.listener.onItemChanged(this.item.id),this.listener.updateCurveEditPoint(this.item,this.draggedObject.pathIndex,this.draggedObject.pointIndex,n),this.schemeContainer.readjustItem(this.item.id,Ev,Tv,this.getUpdatePrecision())}handleArcControlPointDrag(e,t,i){const n=this.item.shapeProps.paths[this.draggedObject.pathIndex].points[this.draggedObject.pointIndex];let r=null;r=this.draggedObject.pointIndex>=this.item.shapeProps.paths[this.draggedObject.pathIndex].points.length-1?this.item.shapeProps.paths[this.draggedObject.pathIndex].points[0]:this.item.shapeProps.paths[this.draggedObject.pathIndex].points[this.draggedObject.pointIndex+1];const s=this.schemeContainer.localPointOnItem(e,t,this.item),o=this.snapCurvePoint(-1,-1,s.x,s.y),a=(0,lu.oJ)(r,this.item.area.w,this.item.area.h),l=(0,lu.oJ)(n,this.item.area.w,this.item.area.h),c=zh.Z.distanceBetweenPoints(l.x,l.y,a.x,a.y),h=zh.Z.createLineEquation(l.x,l.y,a.x,a.y),d=zh.Z.distanceFromPointToLine(o.x,o.y,h);zh.Z.tooSmall(c)||(n.h=-d/c*100*zh.Z.identifyPointSideAgainstLine(o.x,o.y,h)),this.listener.onItemChanged(this.item.id),this.listener.updateCurveEditPoint(this.item,this.draggedObject.pathIndex,this.draggedObject.pointIndex,n),this.schemeContainer.readjustItem(this.item.id,Ev,Tv,this.getUpdatePrecision())}handleAllSelectedPoints(e,t){if(nh.Z.clearItemSnappers(this.store),!this.worldSelectedPoints||0===this.worldSelectedPoints.length)return;const i=this.parentState.snapPoints({vertical:this.worldSelectedPoints,horizontal:this.worldSelectedPoints},new Set,e-this.originalClickPoint.x,t-this.originalClickPoint.y);this.parentState.listener.onCursorUpdated(this.originalClickPoint.x+i.dx,this.originalClickPoint.y+i.dy),this.forEachSelectedPoint(((e,t,n)=>{const r=(0,lu.oJ)(this.originalCurvePaths[t].points[n],this.item.area.w,this.item.area.h),s=(0,gh.rs)(r.x,r.y,this.item),o=(0,gh.N5)(s.x+i.dx,s.y+i.dy,this.item),a=(0,lu.Vk)(o,this.item.area.w,this.item.area.h);e.x=a.x,e.y=a.y,this.listener.updateCurveEditPoint(this.item,t,n,e)})),this.listener.onItemChanged(this.item.id),this.schemeContainer.readjustItem(this.item.id,Ev,Tv,this.getUpdatePrecision())}}class Fv extends Ug{constructor(e,t){super(e,"idle"),this.clickedObject=null,this.shouldSelectOnlyOne=!1,this.contextMenuHandler=t}reset(){this.clickedObject=null,this.shouldSelectOnlyOne=!1}keyPressed(e,t){e===od&&this.migrate(new Hg(this.parentState,!1))}mouseDoubleClick(e,t,i,n,r,s){r&&"path-segment"===r.type&&this.parentState.insertPointAtCoords(e,t,r.pathIndex,r.segmentIndex)}mouseDown(e,t,i,n,r,s){if(Zg(s))this.migrate(new Hg(this.parentState,!0,{x:e,y:t,mx:i,my:n}));else{if(!this.parentState.item.id){this.getSchemeContainer().addItem(this.parentState.item);const o=new Nv(this.parentState,0);return this.migrate(o),void o.mouseDown(e,t,i,n,r,s)}!function(e){return 2===e.button}(s)?(r&&(this.clickedObject=r),!r||"path-point"!==r.type&&"path-control-point"!==r.type?r&&"path-segment"===r.type&&this.selectPath(r,!0):this.listener.getCurveEditPaths()[r.pathIndex].points[r.pointIndex].selected?Ng(s)||(this.shouldSelectOnlyOne=!0):(this.listener.selectCurveEditPoint(r.pathIndex,r.pointIndex,Ng(s)),this.listener.onPathPointsUpdated())):this.contextMenuHandler(e,t,i,n,r,s)}}mouseMove(e,t,i,n,r,s){return!this.clickedObject||"path-point"!==this.clickedObject.type&&"path-control-point"!==this.clickedObject.type&&"path-segment"!==this.clickedObject.type?this.clickedObject&&!Mv(this.clickedObject)?(this.reset(),void this.migrate(new qg(this.parentState,e,t,i,n,((e,t)=>this.selectByBoundaryBox(e,t))))):void 0:(this.migrate(new Zv(this.parentState,this.clickedObject,e,t)),void this.reset())}selectByBoundaryBox(e,t){t||(this.listener.resetCurveEditPointSelection(),this.listener.onPathPointsUpdated()),this.parentState.item.shapeProps.paths.forEach(((t,i)=>{t.points.forEach(((t,n)=>{const r=(0,lu.oJ)(t,this.parentState.item.area.w,this.parentState.item.area.h),s=this.parentState.schemeContainer.worldPointOnItem(r.x,r.y,this.parentState.item);zh.Z.isPointInArea(s.x,s.y,e)&&this.listener.selectCurveEditPoint(i,n,!0)}))})),this.listener.onPathPointsUpdated()}mouseUp(e,t,i,n,r,s){this.clickedObject&&"path-segment"===this.clickedObject.type?this.selectPath(r,!1):this.shouldSelectOnlyOne&&this.clickedObject?"path-point"===this.clickedObject.type&&(this.listener.selectCurveEditPoint(r.pathIndex,r.pointIndex,!1),this.listener.onPathPointsUpdated()):this.clickedObject&&!Mv(this.clickedObject)&&this.listener.resetCurveEditPointSelection(),this.reset()}selectPath(e,t){t||this.listener.resetCurveEditPointSelection();for(let t=0;t<this.parentState.item.shapeProps.paths[e.pathIndex].points.length;t++)this.listener.selectCurveEditPoint(e.pathIndex,t,!0);this.listener.onPathPointsUpdated()}}class jv extends Wg{constructor(e,t,i){super(e,t,"editPath",i),this.item=null,this.history=new Sv}reset(){this.listener.onItemsHighlighted({itemIds:[],showPins:!1}),this.item=null,this.history=new Sv({size:100}),this.updateHistoryState(),this.migrateSubState(new Fv(this,((e,t,i,n,r,s)=>this.contextMenuHandler(e,t,i,n,r,s)))),this.resetPreviousSubStates()}historyCommit(){this.history.commit(this.item.shapeProps.paths),this.updateHistoryState()}updateHistoryState(){this.listener.onHistoryStateChange(this.history.undoable(),this.history.redoable())}undo(){const e=this.history.undo();this.item.shapeProps.paths=e,this.listener.onItemChanged(this.item.id),this.listener.updateAllCurveEditPoints(this.item),this.updateHistoryState()}redo(){const e=this.history.redo();this.item.shapeProps.paths=e,this.listener.onItemChanged(this.item.id),this.listener.updateAllCurveEditPoints(this.item),this.updateHistoryState()}cancel(){if(this.subState&&this.subState.reset(),this.listener.onItemsHighlighted({itemIds:[],showPins:!1}),this.item&&this.item.id){const e=this.item.shapeProps.paths;for(let t=e.length-1;t>=0;t--)e[t].points.length<2&&e.splice(t,1);if(0===e.length)this.schemeContainer.deleteItem(this.item);else{const e=[];if(this.item.childItems&&this.item.childItems.forEach((t=>{e.push((0,gh.rs)(0,0,t))})),Bv(this.item),this.schemeContainer.readjustItem(this.item.id,!1,Tv,this.getUpdatePrecision()),this.item.childItems){const t=zh.Z.standardTransformWithArea(this.item.meta.transformMatrix,this.item.area);this.item.childItems.forEach(((i,n)=>{const r=zh.Z.findTranslationMatchingWorldPoint(e[n].x,e[n].y,0,0,i.area,t);r&&(i.area.x=r.x,i.area.y=r.y)}))}this.schemeContainer.reindexItems()}this.schemeContainer.updateEditBox(),this.listener.onItemChanged(this.item.id)}this.listener.onSchemeChangeCommitted(),super.cancel()}setItem(e){this.item=e,Lv(e),this.historyCommit()}getSelectedPoints(){const e=[];return this.listener.getCurveEditPaths().forEach(((t,i)=>{t.points.forEach(((t,n)=>{t.selected&&e.push({pathId:i,pointId:n})}))})),e}contextMenuHandler(e,t,i,n,r,s){Mv(r)||this.listener.onContextMenuRequested(i,n,[{name:"Add new path",clicked:()=>this.startCreatingNewPath()}]);const o=this.getSelectedPoints();let a=!1;for(let e=0;e<o.length&&!a;e++)a=r.pathIndex===o[e].pathId&&r.pointIndex===o[e].pointId;if(o.length>1&&a){const e=[{name:"Delete points",clicked:()=>this.deleteSelectedPoints()},{name:"Convert to bezier",clicked:()=>o.forEach((e=>this.convertPointToBezier(e.pathId,e.pointId)))},{name:"Convert to simple",clicked:()=>o.forEach((e=>this.convertPointToSimple(e.pathId,e.pointId)))},{name:"Convert to arc",clicked:()=>o.forEach((e=>this.convertPointToArc(e.pathId,e.pointId)))}];return 2===o.length&&e.push({name:"Merge points",clicked:()=>this.mergePoints(o[0],o[1])}),void this.listener.onContextMenuRequested(i,n,e)}if(r&&"path-point"===r.type){this.listener.selectCurveEditPoint(r.pathIndex,r.pointIndex,!1),this.listener.onPathPointsUpdated();const e=this.item.shapeProps.paths[r.pathIndex].points[r.pointIndex];let t=null;r.pointIndex<this.item.shapeProps.paths[r.pathIndex].points.length-1&&(t=this.item.shapeProps.paths[r.pathIndex].points[r.pointIndex+1]);let s=null;r.pointIndex>0&&(s=this.item.shapeProps.paths[r.pathIndex].points[r.pointIndex-1]);const o=[{name:"Delete point",clicked:()=>this.deletePoint(r.pathIndex,r.pointIndex)}];s&&s.break||t&&t.break||o.push({name:"Break path",clicked:()=>this.breakPath(r.pathIndex,r.pointIndex)}),"L"!==e.t&&o.push({name:"Convert to simple point",clicked:()=>this.convertPointToSimple(r.pathIndex,r.pointIndex)}),"B"!==e.t&&o.push({name:"Convert to bezier point",clicked:()=>this.convertPointToBezier(r.pathIndex,r.pointIndex)}),"A"!==e.t&&o.push({name:"Convert to arc point",clicked:()=>this.convertPointToArc(r.pathIndex,r.pointIndex)}),this.listener.onContextMenuRequested(i,n,o)}else r&&"path-segment"===r.type&&this.listener.onContextMenuRequested(i,n,[{name:"Extract path",clicked:()=>this.extractPath(r.pathIndex)},{name:"Invert path",clicked:()=>this.invertPath(r.pathIndex)},{name:"Duplicate path",clicked:()=>this.duplicatePath(r.pathIndex)}])}startCreatingNewPath(){this.subState&&"idle"===this.subState.name&&this.migrateSubState(new Nv(this,this.item.shapeProps.paths.length))}convertSelectedPointsToSimple(){this.getSelectedPoints().forEach((({pathId:e,pointId:t})=>this.convertPointToSimple(e,t)))}convertSelectedPointsToBezier(){this.getSelectedPoints().forEach((({pathId:e,pointId:t})=>this.convertPointToBezier(e,t)))}extractPath(e){if(this.item.shapeProps.paths.length<2)return;const t=this.item.shapeProps.paths[e],i=Uc.Z.clone(this.item);delete i.id,i.meta={},i.area={x:0,y:0,w:100,h:100,r:0,sx:1,sy:1,px:.5,py:.5},i.name=this.item.name+" segment",i.description="",i.childItems=[],i._childItems=[],i.shapeProps.paths=[{pos:"relative",closed:t.closed,points:t.points.map((e=>{const t=(0,lu.oJ)(e,this.item.area.w,this.item.area.h),n=(0,gh.rs)(t.x,t.y,this.item);if(n.t=t.t,t.hasOwnProperty("x1")){const e=(0,gh.rs)(t.x+t.x1,t.y+t.y1,this.item);n.x1=e.x-n.x,n.y1=e.y-n.y}if(t.hasOwnProperty("x2")){const e=(0,gh.rs)(t.x+t.x2,t.y+t.y2,this.item);n.x2=e.x-n.x,n.y2=e.y-n.y}return(0,lu.Vk)(n,i.area.w,i.area.h)}))}],Bv(i),this.item.shapeProps.paths.splice(e,1),this.cancel();const n=this.schemeContainer.addItem(i);this.schemeContainer.selectItem(n)}invertPath(e){const t=this.item.shapeProps.paths[e].points;t.reverse(),t.forEach((e=>{if("B"===e.t){const t=e.x1,i=e.y1;e.x1=e.x2,e.y1=e.y2,e.x2=t,e.y2=i}}));let i=null;for(let e=0;e<t.length;e++)"A"===t[e].t&&(0===e?i=Uc.Z.clone(t[0]):(t[e-1].t="A",t[e-1].h=-t[e].h),t[e]={t:"L",x:t[e].x,y:t[e].y});i&&(t[t.length-1].t="A",t[t.length-1].h=-i.h),this.listener.onItemChanged(this.item.id),this.listener.updateAllCurveEditPoints(this.item),this.listener.onSchemeChangeCommitted()}duplicatePath(e){const t=Uc.Z.clone(this.item.shapeProps.paths[e]);t.points.forEach((e=>{e.x+=10,e.y+=10})),t.id=jl().generate(),this.item.shapeProps.paths.push(t),this.listener.onItemChanged(this.item.id),this.listener.updateAllCurveEditPoints(this.item),this.listener.onSchemeChangeCommitted()}mergePoints(e,t){e.pathId===t.pathId?this.mergePointsInSamePath(this.item.shapeProps.paths[e.pathId],e.pointId,t.pointId):this.mergePointsOfTwoPaths(e.pathId,e.pointId,t.pathId,t.pointId),this.historyCommit()}mergePointsInSamePath(e,t,i){if(e.closed)return;const n=Math.min(t,i);if(0!==n)return;const r=Math.max(t,i);if(r!==e.points.length-1)return;const s=e.points[n],o=e.points[r],a=(s.x+o.x)/2,l=(s.y+o.y)/2;s.x=a,s.y=l,e.points.pop(),e.closed=!0,this.listener.onItemChanged(this.item.id),this.listener.updateAllCurveEditPoints(this.item),this.listener.onSchemeChangeCommitted()}mergePointsOfTwoPaths(e,t,i,n){const r=this.item.shapeProps.paths[e],s=this.item.shapeProps.paths[i];if(r.closed||s.closed)return;if(0!==t&&t!==r.points.length-1)return;if(0!==n&&n!==s.points.length-1)return;const o=r.points[t],a=s.points[n],l=(o.x+a.x)/2,c=(o.y+a.y)/2;0===n?(0===t&&(r.points=r.points.reverse()),r.points.pop(),s.points[0].x=l,s.points[0].y=c,r.points=r.points.concat(s.points),this.item.shapeProps.paths.splice(i,1)):0===t?(0===n&&(s.points=s.points.reverse()),s.points.pop(),r.points[0].x=l,r.points[0].y=c,s.points=s.points.concat(r.points),this.item.shapeProps.paths.splice(e,1)):(s.points=s.points.reverse(),r.points.pop(),s.points[0].x=l,s.points[0].y=c,r.points=r.points.concat(s.points),this.item.shapeProps.paths.splice(i,1)),this.listener.onItemChanged(this.item.id),this.listener.updateAllCurveEditPoints(this.item),this.listener.onSchemeChangeCommitted()}breakPath(e,t){const i=this.item.shapeProps.paths[e];i.closed?this.breakClosedPath(i,t):this.breakPathIntoTwo(i,t),this.listener.onItemChanged(this.item.id),this.listener.updateAllCurveEditPoints(this.item),this.listener.onSchemeChangeCommitted(),this.historyCommit()}breakClosedPath(e,t){const i=[];for(let n=0;n<e.points.length;n++){const r=(n+t+1)%e.points.length;r!==t&&i.push(e.points[r])}e.closed=!1,e.points=i}breakPathIntoTwo(e,t){if(0===t){if(e.points.length<3)return;e.points.splice(0,1)}else if(1===t){if(e.points.length<4)return;e.points.splice(0,2)}else if(t===e.points.length-1){if(e.points.length<3)return;e.points.splice(t,1)}else if(t===e.points.length-2){if(e.points.length<4)return;e.points.splice(t,2)}else{const i={id:jl().generate(),pos:"relative",closed:!1,points:e.points.splice(t+1,e.points.length-t-1)};e.points.pop(),this.item.shapeProps.paths.push(i)}}deletePoint(e,t){this.item.shapeProps.paths[e].points.splice(t,1),this.listener.onItemChanged(this.item.id),this.schemeContainer.readjustItem(this.item.id,Ev,Tv,this.getUpdatePrecision()),this.listener.updateAllCurveEditPoints(this.item),this.listener.onSchemeChangeCommitted()}deleteSelectedPoints(){this.getSelectedPoints().reverse().forEach((e=>{this.item.shapeProps.paths[e.pathId].points.splice(e.pointId,1)})),this.listener.onItemChanged(this.item.id),this.schemeContainer.readjustItem(this.item.id,Ev,Tv,this.getUpdatePrecision()),this.listener.updateAllCurveEditPoints(this.item),this.listener.onSchemeChangeCommitted(),this.historyCommit()}insertPointAtCoords(e,t,i,n){const r=(0,lu.Vk)((0,gh.N5)(e,t,this.item),this.item.area.w,this.item.area.h);this.item.shapeProps.paths[i].points.splice(n+1,0,{id:jl().generate(),x:r.x,y:r.y,t:"L"}),"B"===this.item.shapeProps.paths[i].points[n].t&&this.convertPointToBezier(i,n+1),this.listener.onItemChanged(this.item.id),this.schemeContainer.readjustItem(this.item.id,Ev,Tv,this.getUpdatePrecision()),this.listener.updateAllCurveEditPoints(this.item),this.listener.onSchemeChangeCommitted(),this.historyCommit()}convertPointToSimple(e,t){const i=this.item.shapeProps.paths[e].points[t];i&&(i.t="L",i.hasOwnProperty("x1")&&(delete i.x1,delete i.y1),i.hasOwnProperty("x2")&&(delete i.x2,delete i.y2),this.listener.onItemChanged(this.item.id),this.schemeContainer.readjustItem(this.item.id,Ev,Tv,this.getUpdatePrecision()),this.listener.updateCurveEditPoint(this.item,e,t,this.item.shapeProps.paths[e].points[t]),this.listener.onSchemeChangeCommitted(),this.historyCommit())}convertPointToBezier(e,t){const i=this.item.shapeProps.paths[e].points[t];if(!i)return;let n=10,r=0;if(this.item.shapeProps.paths[e].points.length>2){let i=t-1;i<0&&(i=this.item.shapeProps.paths[e].points.length+i);let s=t+1;s>=this.item.shapeProps.paths[e].points.length-1&&(s-=this.item.shapeProps.paths[e].points.length-1),n=(this.item.shapeProps.paths[e].points[s].x-this.item.shapeProps.paths[e].points[i].x)/4,r=(this.item.shapeProps.paths[e].points[s].y-this.item.shapeProps.paths[e].points[i].y)/4}i.x1=-n,i.y1=-r,i.x2=n,i.y2=r,i.t="B",this.listener.onItemChanged(this.item.id),this.schemeContainer.readjustItem(this.item.id,Ev,Tv,this.getUpdatePrecision()),this.listener.updateCurveEditPoint(this.item,e,t,this.item.shapeProps.paths[e].points[t]),this.listener.onSchemeChangeCommitted(),this.historyCommit()}convertPointToArc(e,t){const i=this.item.shapeProps.paths[e].points[t];"A"!==i.t&&(i.h=50),i.t="A",this.listener.onItemChanged(this.item.id),this.schemeContainer.readjustItem(this.item.id,Ev,Tv,this.getUpdatePrecision()),this.listener.updateCurveEditPoint(this.item,e,t,this.item.shapeProps.paths[e].points[t]),this.listener.onSchemeChangeCommitted(),this.historyCommit()}snapCurvePoint(e,t,i,n){const r=(0,gh.rs)(i,n,this.item);let s=1e5,o=1e5,a=null,l=null;this.isSnappingToItemsEnabled()&&this.item.shapeProps.paths.forEach(((i,n)=>{i.points.forEach(((i,c)=>{if(e===n&&t===c)return;const h=this.schemeContainer.worldPointOnItem(i.x,i.y,this.item);let d=Math.abs(h.y-r.y);d<6&&d<s&&(s=d,a={localValue:i.y,value:h.y,item:this.item,snapperType:"horizontal"}),d=Math.abs(h.x-r.x),d<6&&d<o&&(o=d,l={localValue:i.x,value:h.x,item:this.item,snapperType:"vertical"})}))}));const c=this.snapPoints({vertical:[r],horizontal:[r]},new Set,0,0);let h=r.x+c.dx,d=r.y+c.dy;const u=this.schemeContainer.localPointOnItem(h,d,this.item);a&&(u.y=a.localValue,nh.Z.setItemSnapper(this.store,a)),l&&(u.x=l.localValue,nh.Z.setItemSnapper(this.store,l));const p=this.round(u.x),m=this.round(u.y);return this.listener.onCursorUpdated(p,m),{x:p,y:m}}}function zv(e,t,i,n=(e=>e)){return e*n(.5-t*(.5-i))}function Uv(e,t){return[e[0]+t[0],e[1]+t[1]]}function Hv(e,t){return[e[0]-t[0],e[1]-t[1]]}function qv(e,t){return[e[0]*t,e[1]*t]}function Wv(e){return[e[1],-e[0]]}function Vv(e,t){return e[0]*t[0]+e[1]*t[1]}function Gv(e,t){return e[0]===t[0]&&e[1]===t[1]}function Kv(e,t){return function(e){return e[0]*e[0]+e[1]*e[1]}(Hv(e,t))}function Jv(e){return function(e,t){return[e[0]/t,e[1]/t]}(e,function(e){return Math.hypot(e[0],e[1])}(e))}function Yv(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function Qv(e,t,i){let n=Math.sin(i),r=Math.cos(i),s=e[0]-t[0],o=e[1]-t[1],a=s*n+o*r;return[s*r-o*n+t[0],a+t[1]]}function Xv(e,t,i){return Uv(e,qv(Hv(t,e),i))}function ey(e,t,i){return Uv(e,qv(t,i))}var{min:ty,PI:iy}=Math,ny=iy+1e-4;function ry(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function sy(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ry(Object(i),!0).forEach((function(t){oy(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ry(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function oy(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ay={id:"",moved:!0,rotated:!1,resized:!1};class ly extends Wg{constructor(e,t,i){super(e,t,"draw",i),this.item=null,this.isDrawing=!1,this.color=null,this.currentPathId=0,this.isBrush=!1,this.recordedPaths=[]}startBrush(){this.reset(),this.isBrush=!0}startPencil(){this.reset(),this.isBrush=!1}reset(){this.recordedPaths=[],this.item=null,this.isDrawing=!1,this.currentPathId=0}mouseDown(e,t,i,n,r,s){if(this.item){const i={x:this.round(e),y:this.round(t)};this.recordedPaths.push([i]),this.item.shapeProps.paths.push({id:jl().generate(),pos:"relative",points:[(0,lu.Vk)(sy(sy({},i),{},{t:"L"}),this.item.area.w,this.item.area.h)]}),this.currentPathId=this.recordedPaths.length-1}else this.initFirstClick(e,t);this.isDrawing=!0,this.listener.onItemChanged(this.item.id,"shapeProps.points")}initFirstClick(e,t){this.currentPathId=0;const i=this.color||"#000000",n={area:{x:0,y:0,w:100,h:100,r:0,px:.5,py:.5,sx:1,sy:1},name:this.schemeContainer.generateUniqueName("Drawing"),shape:"path",shapeProps:{paths:[{id:jl().generate(),pos:"relative",closed:!1,points:[]}],strokeSize:this.isBrush?0:this.store.getters.drawPencilSize,fill:this.isBrush?{type:"solid",color:i}:{type:"none"},strokeColor:i}};this.color&&(n.shapeProps.strokeColor=this.color),this.schemeContainer.addItem(n),this.item=n;const r={x:this.round(e),y:this.round(t)};this.item.shapeProps.paths[0].points.push((0,lu.Vk)(sy(sy({},r),{},{t:"L"}),this.item.area.w,this.item.area.h)),this.recordedPaths=[[r]]}mouseMove(e,t,i,n,r,s){if(this.isDrawing&&this.item){if(0===s.buttons)return void(this.isDrawing=!1);const i=this.recordedPaths[this.currentPathId],n=i[i.length-1],r=this.round(e),o=this.round(t);zh.Z.sameFloatingValue(r,n.x)&&zh.Z.sameFloatingValue(o,n.y)||(this.recordedPaths[this.currentPathId].push({x:r,y:o}),this.buildCurrentItem())}}mouseUp(e,t,i,n,r,s){this.isDrawing=!1,this.item&&this.item.shapeProps.paths[this.currentPathId].points.length>0&&(this.submitDrawing(),this.listener.onItemChanged(this.item.id,"shapeProps.paths"),this.reset())}cancel(){this.listener.onItemsHighlighted({itemIds:[],showPins:!1}),super.cancel()}pickColor(e){this.color=e}buildCurrentItem(){this.isBrush?this.buildBrushDrawing():this.bulidRegularDrawing()}buildBrushDrawing(){const e=function(e,t={}){return function(e,t={}){let{size:i=16,smoothing:n=.5,thinning:r=.5,simulatePressure:s=!0,easing:o=(e=>e),start:a={},end:l={},last:c=!1}=t,{cap:h=!0,easing:d=(e=>e*(2-e))}=a,{cap:u=!0,easing:p=(e=>--e*e*e+1)}=l;if(0===e.length||i<=0)return[];let m,f=e[e.length-1].runningLength,g=!1===a.taper?0:!0===a.taper?Math.max(i,f):a.taper,v=!1===l.taper?0:!0===l.taper?Math.max(i,f):l.taper,y=Math.pow(i*n,2),x=[],b=[],w=e.slice(0,10).reduce(((e,t)=>{let n=t.pressure;if(s){let r=ty(1,t.distance/i),s=ty(1,1-r);n=ty(1,e+.275*r*(s-e))}return(e+n)/2}),e[0].pressure),C=zv(i,r,e[e.length-1].pressure,o),P=e[0].vector,k=e[0].point,S=k,I=k,A=S,_=!1;for(let t=0;t<e.length;t++){let{pressure:n}=e[t],{point:a,vector:l,distance:c,runningLength:h}=e[t];if(t<e.length-1&&f-h<3)continue;if(r){if(s){let e=ty(1,c/i),t=ty(1,1-e);n=ty(1,w+.275*e*(t-w))}C=zv(i,r,n,o)}else C=i/2;void 0===m&&(m=C);let u=h<g?d(h/g):1,E=f-h<v?p((f-h)/v):1;C=Math.max(.01,C*Math.min(u,E));let T=(t<e.length-1?e[t+1]:e[t]).vector,M=t<e.length-1?Vv(l,T):1,$=null!==M&&M<0;if(Vv(l,P)<0&&!_||$){let e=qv(Wv(P),C);for(let t=1/13,i=0;i<=1;i+=t)I=Qv(Hv(a,e),a,ny*i),x.push(I),A=Qv(Uv(a,e),a,ny*-i),b.push(A);k=I,S=A,$&&(_=!0);continue}if(_=!1,t===e.length-1){let e=qv(Wv(l),C);x.push(Hv(a,e)),b.push(Uv(a,e));continue}let O=qv(Wv(Xv(T,l,M)),C);I=Hv(a,O),(t<=1||Kv(k,I)>y)&&(x.push(I),k=I),A=Uv(a,O),(t<=1||Kv(S,A)>y)&&(b.push(A),S=A),w=n,P=l}let E=e[0].point.slice(0,2),T=e.length>1?e[e.length-1].point.slice(0,2):Uv(e[0].point,[1,1]),M=[],$=[];if(1===e.length){if(!g&&!v||c){let e=ey(E,Jv(Wv(Hv(E,T))),-(m||C)),t=[];for(let i=1/13,n=i;n<=1;n+=i)t.push(Qv(e,E,2*ny*n));return t}}else{if(!(g||v&&1===e.length))if(h)for(let e=1/13,t=e;t<=1;t+=e){let e=Qv(b[0],E,ny*t);M.push(e)}else{let e=Hv(x[0],b[0]),t=qv(e,.5),i=qv(e,.51);M.push(Hv(E,t),Hv(E,i),Uv(E,i),Uv(E,t))}let t=Wv(function(e){return[-e[0],-e[1]]}(e[e.length-1].vector));if(v||g&&1===e.length)$.push(T);else if(u){let e=ey(T,t,C);for(let t=1/29,i=t;i<1;i+=t)$.push(Qv(e,T,3*ny*i))}else $.push(Uv(T,qv(t,C)),Uv(T,qv(t,.99*C)),Hv(T,qv(t,.99*C)),Hv(T,qv(t,C)))}return x.concat($,b.reverse(),M)}(function(e,t={}){var i;let{streamline:n=.5,size:r=16,last:s=!1}=t;if(0===e.length)return[];let o=.15+.85*(1-n),a=Array.isArray(e[0])?e:e.map((({x:e,y:t,pressure:i=.5})=>[e,t,i]));if(2===a.length){let e=a[1];a=a.slice(0,-1);for(let t=1;t<5;t++)a.push(Xv(a[0],e,t/4))}1===a.length&&(a=[...a,[...Uv(a[0],[1,1]),...a[0].slice(2)]]);let l=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,h=0,d=l[0],u=a.length-1;for(let e=1;e<a.length;e++){let t=s&&e===u?a[e].slice(0,2):Xv(d.point,a[e],o);if(Gv(d.point,t))continue;let i=Yv(t,d.point);if(h+=i,e<u&&!c){if(h<r)continue;c=!0}d={point:t,pressure:a[e][2]>=0?a[e][2]:.5,vector:Jv(Hv(d.point,t)),distance:i,runningLength:h},l.push(d)}return l[0].vector=(null==(i=l[1])?void 0:i.vector)||[0,0],l}(e,t),t)}(this.recordedPaths[this.currentPathId].map((e=>[e.x,e.y])),{size:this.store.getters.drawBrushSize,smoothing:.99,thinning:.12,streamline:.28,start:{taper:31,cap:!1},end:{taper:30,cap:!1}}).map((e=>({x:e[0],y:e[1],t:"L"}))),t=(0,kv.T)(e,zh.Z.clamp(this.store.getters.drawEpsilon,.5,1e3));this.item.shapeProps.paths[this.currentPathId].closed=!0,this.item.shapeProps.paths[this.currentPathId].points=t.map((e=>(0,lu.Vk)(e,this.item.area.w,this.item.area.h))),this.listener.onItemChanged(this.item.id,"shapeProps.points")}bulidRegularDrawing(){const e=this.item.shapeProps.paths[this.currentPathId],t=this.recordedPaths[this.currentPathId],i=(0,kv.T)(t,zh.Z.clamp(this.store.getters.drawEpsilon,.5,1e3));e.points=i.map((e=>(0,lu.Vk)(e,this.item.area.w,this.item.area.h))),this.listener.onItemChanged(this.item.id,"shapeProps.points")}submitDrawing(){return this.item?(this.buildCurrentItem(),Bv(this.item),this.schemeContainer.readjustItem(this.item.id,!1,ay,this.getUpdatePrecision()),this.schemeContainer.reindexItems(),this.listener.onSchemeChangeCommitted(),this.listener.onItemChanged(this.item.id,"shapeProps.points"),this.item):null}}var cy=i(2513);const hy={id:"",moved:!0,rotated:!1,resized:!1};class dy extends Wg{constructor(e,t,i){super(e,t,"connecting",i),this.item=null,this.parentItem=null,this.addedToScheme=!1,this.originalClickPoint={x:0,y:0,mx:0,my:0},this.candidatePointSubmited=!1,this.wasMouseMoved=!1,this.shouldDragScreen=!1,this.startedDraggingScreen=!1,this.originalScreenOffset={x:0,y:0},this.shadowSvgPath=document.createElementNS("http://www.w3.org/2000/svg","path")}reset(){this.listener.onItemsHighlighted({itemIds:[],showPins:!1}),this.item=null,this.parentItem=null,this.addedToScheme=!1,this.softReset()}softReset(){this.shouldDragScreen=!1,this.wasMouseMoved=!1,this.startedDraggingScreen=!1,this.candidatePointSubmited=!1}cancel(){nh.Z.setCurrentConnector(this.store,null),this.listener.onItemsHighlighted({itemIds:[],showPins:!1}),this.item&&(this.item.shapeProps.points.splice(this.item.shapeProps.points.length-1,1),this.item.shapeProps.points.length>0&&this.submitItem()),super.cancel()}setItem(e){e.area.x=0,e.area.y=0,this.item=e,nh.Z.setCurrentConnector(this.store,e),this.schemeContainer.findItemById(e.id)&&(this.addedToScheme=!0,this.creatingNewPoints=!1)}initConnectingFromSourceItem(e,t){t||(t={x:this.round(e.area.w/2),y:this.round(e.area.h/2)});const i=this.schemeContainer.worldPointOnItem(t.x,t.y,e);let n={shape:"connector",name:`${e.name} -> `,area:{x:0,y:0,w:200,h:200,r:0},shapeProps:{destinationCap:"triangle"}};(0,xd.z9)(n),n=this.schemeContainer.addItem(n),n.shapeProps.sourceItem=`#${e.id}`;let r=null;e.meta.parentId&&(r=this.schemeContainer.findItemById(e.meta.parentId),r&&(this.schemeContainer.remountItemInsideOtherItemAtTheBottom(n.id,r.id),n.area.x=0,n.area.y=0,n.area.w=r.area.w,n.area.h=r.area.h));const s=this.findAttachmentPointToItem(e,t);s.pinId?(n.shapeProps.sourcePin=s.pinId,n.shapeProps.sourceItemPosition=0):(n.shapeProps.sourcePin="",n.shapeProps.sourceItemPosition=s.distanceOnPath);let o=s,a=i;return r&&(o=this.schemeContainer.localPointOnItem(s.x,s.y,r),a=this.schemeContainer.localPointOnItem(i.x,i.y,r)),n.shapeProps.points=[{t:"L",x:this.round(o.x),y:this.round(o.y)},{t:"L",x:this.round(a.x),y:this.round(a.y)}],void 0!==s.nx&&(n.shapeProps.points[0].nx=zh.Z.roundPrecise(s.nx,4),n.shapeProps.points[0].ny=zh.Z.roundPrecise(s.ny,4)),this.item=n,nh.Z.setCurrentConnector(this.store,this.item),this.parentItem=r,this.addedToScheme=!0,this.creatingNewPoints=!0,this.item}findAttachmentPointToItem(e,t){const i=this.schemeContainer.worldPointOnItem(t.x,t.y,e),n=this.schemeContainer.closestPointToItemOutline(e,i,{withNormal:!0}),r=this.findClosestItemPin(e,i);if(r){if(n){const t=this.schemeContainer.worldPointOnItem(e.area.w/2,e.area.h/2,e);if((r.x-t.x)*(r.x-t.x)+(r.y-t.y)*(r.y-t.y)<.5)return n}return r.x=this.round(r.x),r.y=this.round(r.y),r}return n?(n.x=this.round(n.x),n.y=this.round(n.y),n):{x:this.round(e.area.w/2),y:this.round(e.area.h/2)}}findClosestItemPin(e,t){const i=Id.Z.find(e.shape);if(!i)return null;const n=i.getPins(e);let r=null,s=0;return(0,Fe.Ed)(n,((i,n)=>{const o=this.schemeContainer.worldPointOnItem(i.x,i.y,e),a=(o.x-t.x)*(o.x-t.x)+(o.y-t.y)*(o.y-t.y);(!r||s>a)&&(s=a,r={x:o.x,y:o.y,distanceOnPath:0,pinId:n},i.hasOwnProperty("nx")&&(r.nx=i.nx,r.ny=i.ny))})),r}initFirstClick(e,t){this.item.shapeProps.points=[],this.schemeContainer.addItem(this.item);const i=this.snapCurvePoint(-1,e,t);this.item.shapeProps.points.push({id:jl().generate(),x:i.x,y:i.y,t:"L"}),this.item.shapeProps.points.push({id:jl().generate(),x:i.x,y:i.y,t:"L"}),this.handleEdgePointDrag(this.item.shapeProps.points[0],!0),this.addedToScheme=!0}initScreenDrag(e,t){this.startedDraggingScreen=!0,this.originalClickPoint.x=e,this.originalClickPoint.y=t,this.originalClickPoint.mx=e,this.originalClickPoint.my=t,this.originalScreenOffset={x:this.schemeContainer.screenTransform.x,y:this.schemeContainer.screenTransform.y}}keyPressed(e,t){e!==od||this.startedDraggingScreen||(this.shouldDragScreen=!0)}keyUp(e,t){e===od&&(this.shouldDragScreen=!1)}mouseDown(e,t,i,n,r,s){if(this.originalClickPoint.x=e,this.originalClickPoint.y=t,this.originalClickPoint.mx=i,this.originalClickPoint.my=n,this.shouldDragScreen)this.initScreenDrag(i,n);else if(this.addedToScheme)if(function(e){return 2===e.button}(s))this.proposeNewDestinationItemForConnector(this.item,i,n);else{let i=e,n=t;if(this.parentItem){const r=this.schemeContainer.localPointOnItem(e,t,this.parentItem);i=r.x,n=r.y}const r=this.snapCurvePoint(this.item.shapeProps.points.length-1,i,n);if(this.item.shapeProps.destinationItem)return this.item.shapeProps.sourceItem&&(this.item.name=this.createNameFromAttachedItems(this.item.shapeProps.sourceItem,this.item.shapeProps.destinationItem)),this.submitItem(),void this.cancel();const s=this.item.shapeProps.points[this.item.shapeProps.points.length-1];s.x=r.x,s.y=r.y,this.candidatePointSubmited=!0}else this.initFirstClick(e,t)}createNameFromAttachedItems(e,t){const i=this.schemeContainer.findFirstElementBySelector(e),n=this.schemeContainer.findFirstElementBySelector(t);return i&&n?`${i.name} -> ${n.name}`:"Curve"}mouseMove(e,t,i,n,r,s){if(!this.store.state.connectorProposedDestination.shown)if(this.wasMouseMoved=!0,this.shouldDragScreen&&this.startedDraggingScreen)this.dragScreen(i,n);else if(nh.Z.clearItemSnappers(this.store),this.addedToScheme){const i=this.item.shapeProps.points.length-1,n=this.item.shapeProps.points[i];let r=e,s=t;if(this.parentItem){const i=this.schemeContainer.localPointOnItem(e,t,this.parentItem);r=i.x,s=i.y}const o=this.snapCurvePoint(i,r,s);n.x=this.round(o.x),n.y=this.round(o.y),this.handleEdgePointDrag(n,!1),this.listener.onItemChanged(this.item.id)}else this.handleConnectorSourceMouseMove(e,t)}mouseUp(e,t,i,n,r,s){if(this.listener.onItemsHighlighted({itemIds:[],showPins:!1}),this.addedToScheme&&this.candidatePointSubmited){this.candidatePointSubmited=!1;let i=e,n=t;if(this.parentItem){const r=this.schemeContainer.localPointOnItem(e,t,this.parentItem);i=r.x,n=r.y}const r=this.snapCurvePoint(-1,i,n);this.item.shapeProps.points.push({id:jl().generate(),x:this.round(r.x),y:this.round(r.y),t:"L"}),this.listener.onItemChanged(this.item.id)}nh.Z.clearItemSnappers(this.store),this.softReset()}snapCurvePoint(e,t,i){const n=this.schemeContainer.worldPointOnItem(t,i,this.item);let r=1e5,s=1e5,o=null,a=null;this.isSnappingToItemsEnabled()&&(0,Fe.Ed)(this.item.shapeProps.points,((t,i)=>{if(e===i)return;const l=this.schemeContainer.worldPointOnItem(t.x,t.y,this.item);let c=Math.abs(l.y-n.y);c<6&&c<r&&(r=c,o={localValue:t.y,value:l.y,item:this.item,snapperType:"horizontal"}),c=Math.abs(l.x-n.x),c<6&&c<s&&(s=c,a={localValue:t.x,value:l.x,item:this.item,snapperType:"vertical"})}));const l=this.snapPoints({vertical:[n],horizontal:[n]},new Set,0,0);let c=n.x+l.dx,h=n.y+l.dy;const d=this.schemeContainer.localPointOnItem(c,h,this.item);return o&&(d.y=o.localValue,nh.Z.setItemSnapper(this.store,o)),a&&(d.x=a.localValue,nh.Z.setItemSnapper(this.store,a)),{x:this.round(d.x),y:this.round(d.y)}}handleConnectorSourceMouseMove(e,t){const i=this.findClosestAttachmentPoint(e,t);i?(this.listener.onItemsHighlighted({itemIds:[i.itemId],showPins:!0}),this.item.shapeProps.sourceItem="#"+i.itemId,i.pinId?(this.item.shapeProps.sourcePin=i.pinId,this.item.shapeProps.sourceItemPosition=0):(this.item.shapeProps.sourcePin="",this.item.shapeProps.sourceItemPosition=i.distanceOnPath)):(this.listener.onItemsHighlighted({itemIds:[],showPins:!1}),this.item.shapeProps.sourceItem=null,this.item.shapeProps.sourcePin="",this.item.shapeProps.sourceItemPosition=0)}findClosestAttachmentPoint(e,t){let i=10;return this.schemeContainer.screenTransform.scale>0&&(i/=this.schemeContainer.screenTransform.scale),this.schemeContainer.findClosestPointToItems(e,t,i,this.item.id,!0)}handleEdgePointDrag(e,t){const i=this.schemeContainer.worldPointOnItem(e.x,e.y,this.item),n=this.findClosestAttachmentPoint(i.x,i.y);if(n){const i=this.schemeContainer.localPointOnItem(n.x,n.y,this.item);e.x=i.x,e.y=i.y;const r=this.schemeContainer.findItemById(n.itemId);if(n.hasOwnProperty("nx"))e.nx=n.nx,e.ny=n.ny;else{const t=this.schemeContainer.calculateNormalOnPointInItemOutline(r,n.distanceOnPath);e.nx=t.x,e.ny=t.y}this.listener.onItemsHighlighted({itemIds:[n.itemId],showPins:!0}),t?(this.item.shapeProps.sourceItem="#"+n.itemId,n.pinId?(this.item.shapeProps.sourcePin=n.pinId,this.item.shapeProps.sourceItemPosition=0):(this.item.shapeProps.sourcePin="",this.item.shapeProps.sourceItemPosition=n.distanceOnPath)):(this.item.shapeProps.destinationItem="#"+n.itemId,n.pinId?(this.item.shapeProps.destinationPin=n.pinId,this.item.shapeProps.destinationItemPosition=0):(this.item.shapeProps.destinationPin="",this.item.shapeProps.destinationItemPosition=n.distanceOnPath))}else e.hasOwnProperty("nx")&&(delete e.nx,delete e.ny),this.listener.onItemsHighlighted({itemIds:[],showPins:!1}),t?(this.item.shapeProps.sourceItem=null,this.item.shapeProps.sourcePin="",this.item.shapeProps.sourceItemPosition=0):(this.item.shapeProps.destinationItem=null,this.item.shapeProps.destinationPin="",this.item.shapeProps.destinationItemPosition=0);(0,cy.t)(this.item.shapeProps.points[0],this.item.shapeProps.points[1]),(0,cy.t)(this.item.shapeProps.points[this.item.shapeProps.points.length-1],this.item.shapeProps.points[this.item.shapeProps.points.length-2])}submitItem(){if(this.item.shapeProps.points.length<2)return this.schemeContainer.deleteItem(this.item),this.schemeContainer.reindexItems(),void this.reset();this.schemeContainer.readjustItem(this.item.id,!1,hy,this.getUpdatePrecision());let e=!0;if(this.store.state.autoRemount){const t=this.schemeContainer.findItemSuitableForParent(this.item);t&&(this.schemeContainer.remountItemInsideOtherItemAtTheBottom(this.item.id,t.id),e=!1)}e&&this.schemeContainer.reindexItems(),this.listener.onItemChanged(this.item.id,"area"),this.listener.onSchemeChangeCommitted(),this.schemeContainer.selectItem(this.item),this.reset()}dragScreen(e,t){this.schemeContainer.screenTransform.x=Math.floor(this.originalScreenOffset.x+e-this.originalClickPoint.x),this.schemeContainer.screenTransform.y=Math.floor(this.originalScreenOffset.y+t-this.originalClickPoint.y)}proposeNewDestinationItemForConnector(e,t,i){nh.Z.proposeConnectorDestinationItems(this.store,e.id,t,i)}submitConnectorDestinationItem(e){"uml_actor"===(e=Uc.Z.clone(e)).shape?(e.area.w=50,e.area.h=100):(e.area.w=100,e.area.h=50);const t=this.item.shapeProps.points[this.item.shapeProps.points.length-2],i=this.item.shapeProps.points[this.item.shapeProps.points.length-1],n=(0,gh.rs)(t.x,t.y,this.item),r=(0,gh.rs)(i.x,i.y,this.item);let s=zh.Z.normalizedVector(r.x-n.x,r.y-n.y);s||(s={x:1,y:0});const o=(Math.abs(s.x)*e.area.w+Math.abs(s.y)*e.area.h)/2;let a={x:r.x,y:n.y};s&&(a.x=r.x+s.x*o,a.y=r.y+s.y*o),e.area.x=a.x-e.area.w/2,e.area.y=a.y-e.area.h/2;const l=this.schemeContainer.addItem(e),c=this.schemeContainer.closestPointToItemOutline(l,r,{}),h=(0,gh.N5)(c.x,c.y,this.item);i.x=h.x,i.y=h.y;const d=Uc.Z.clone(this.item.shapeProps.points[this.item.shapeProps.points.length-1]);d.id=jl().generate(),this.item.shapeProps.points.push(d),this.item.shapeProps.destinationItem=`#${l.id}`,c.pinId?(this.item.shapeProps.destinationPin=c.pinId,this.item.shapeProps.destinationItemPosition=0):(this.item.shapeProps.destinationPin="",this.item.shapeProps.destinationItemPosition=c.distanceOnPath),this.item.name+=l.name,this.cancel()}}class uy extends Wg{constructor(e,t,i){super(e,t,"connecting",i),this.elementPickCallback=null,this.highlightedItemId=null}reset(){this.elementPickCallback=null,this.migrateSubState(new py(this,this.listener))}setElementPickCallback(e){this.elementPickCallback=e}}class py extends Ug{constructor(e,t){super(e,"idle"),this.listener=t}reset(){this.resetHighlight()}mouseMove(e,t,i,n,r,s){r.item?this.highlightItem(r.item):this.resetHighlight()}mouseDown(e,t,i,n,r,s){this.resetHighlight(),r.item&&(this.parentState.elementPickCallback&&this.parentState.elementPickCallback(`#${r.item.id}`),setTimeout((()=>{this.cancel()}),200))}highlightItem(e){e.id!==this.highlightedItemId&&(this.highlightedItemId=e.id,this.listener.onItemsHighlighted({itemIds:[e.id],showPins:!1}))}resetHighlight(){this.highlightedItemId&&(this.highlightedItemId=null,this.listener.onItemsHighlighted({itemIds:[],showPins:!1}))}keyPressed(e,t){e!==od||this.parentState.subState&&"drag-screen"===this.parentState.subState.name||this.migrate(new Hg(this.parentState,!1))}}class my extends Wg{constructor(e,t,i){super(e,t,"crop-image",i),this.item=null,this.editBox=null,this.originalPoint={x:0,y:0,mx:0,my:0},this.startedDragging=!0,this.draggerEdges=null,this.editBoxOriginalArea=null,this.modificationContextId=null}reset(){this.originalPoint={x:0,y:0,mx:0,my:0},this.startedDragging=!0,this.draggerEdges=null,this.editBoxOriginalArea=null,this.modificationContextId=null}setImageItem(e){this.item=e,this.originalItemCrop=Uc.Z.clone(e.shapeProps.crop),this.originalItemArea=Uc.Z.clone(e.area),this.origianlItemTransformMatrix=Uc.Z.clone(e.meta.transformMatrix)}setImageEditBox(e){this.editBox=e}mouseDown(e,t,i,n,r,s){this.modificationContextId=jl().generate(),"edit-box-resize-dragger"===r.type?this.initMultiItemBoxResize(r.draggerEdges,e,t,i,n):"edit-box-reset-image-crop-link"===r.type?this.resetCrop():this.cancel()}cancel(){this.submit(),super.cancel()}submit(){this.schemeContainer.reindexItems(),this.schemeContainer.updateEditBox()}initDragging(e,t,i,n){this.originalPoint.x=e,this.originalPoint.y=t,this.originalPoint.mx=i,this.originalPoint.my=n,this.startedDragging=!0}initMultiItemBoxResize(e,t,i,n,r){this.initDragging(t,i,n,r),this.initOriginalAreasForEditBox(this.editBox),this.draggerEdges=e}initOriginalAreasForEditBox(e){this.editBoxOriginalArea=Uc.Z.clone(e.area)}mouseMove(e,t,i,n,r,s){this.startedDragging&&this.draggerEdges&&this.dragEditBoxByDragger(e,t,this.draggerEdges,s)}dragEditBoxByDragger(e,t,i,n){Pv(this.editBox,this.editBoxOriginalArea,this.originalPoint,this.store,null,e,t,i)}mouseUp(e,t,i,n,r,s){const o=this.startedDragging;this.reset();const a=zh.Z.worldPointInArea(0,0,this.editBox.area),l=zh.Z.localPointInArea(a.x,a.y,this.originalItemArea,this.origianlItemTransformMatrix),c=-this.originalItemCrop.x*this.originalItemArea.w,h=-this.originalItemCrop.y*this.originalItemArea.h,d=this.originalItemArea.w*(1+this.originalItemCrop.x+this.originalItemCrop.w),u=this.originalItemArea.h*(1+this.originalItemCrop.y+this.originalItemCrop.h);this.schemeContainer.updateEditBoxItems(this.editBox,!0,{moved:!1,rotated:!1,resized:!0,id:this.modificationContextId},this.getUpdatePrecision()),zh.Z.tooSmall(this.item.area.w)||(this.item.shapeProps.crop.x=(l.x-c)/this.item.area.w,this.item.shapeProps.crop.w=d/this.item.area.w-this.item.shapeProps.crop.x-1),zh.Z.tooSmall(this.item.area.h)||(this.item.shapeProps.crop.y=(l.y-h)/this.item.area.h,this.item.shapeProps.crop.h=u/this.item.area.h-this.item.shapeProps.crop.y-1),o&&this.listener.onSchemeChangeCommitted()}resetCrop(){this.item.area.x-=this.item.shapeProps.crop.x*this.item.area.w,this.item.area.y-=this.item.shapeProps.crop.y*this.item.area.h,this.item.area.w=this.item.area.w*(1+this.item.shapeProps.crop.x+this.item.shapeProps.crop.w),this.item.area.h=this.item.area.h*(1+this.item.shapeProps.crop.y+this.item.shapeProps.crop.h),this.item.shapeProps.crop.x=0,this.item.shapeProps.crop.y=0,this.item.shapeProps.crop.w=0,this.item.shapeProps.crop.h=0,this.listener.onSchemeChangeCommitted(),this.cancel()}}class fy extends Wg{constructor(e,t,i){super(e,t,"image-box",i),this.item=null,this.editBox=null,this.originalImageBox={x:0,y:0,w:1,h:1},this.originalPoint={x:0,y:0,mx:0,my:0},this.startedDragging=!0,this.draggerEdges=null,this.editBoxOriginalArea=null,this.modificationContextId=null}reset(){this.originalPoint={x:0,y:0,mx:0,my:0},this.startedDragging=!0,this.draggerEdges=null,this.editBoxOriginalArea=null,this.modificationContextId=null}setImageItem(e){this.item=e,e.shapeProps.fill.imageBox||(e.shapeProps.fill.imageBox={x:0,y:0,w:1,h:1}),this.originalImageBox=Uc.Z.clone(e.shapeProps.fill.imageBox)}setImageEditBox(e){this.editBox=e}mouseDown(e,t,i,n,r,s){this.modificationContextId=jl().generate(),"edit-box-resize-dragger"===r.type?this.initMultiItemBoxResize(r.draggerEdges,e,t,i,n):"edit-box-reset-image-crop-link"===r.type?this.resetImageBox():this.cancel()}cancel(){this.submit(),super.cancel()}submit(){this.schemeContainer.reindexItems(),this.schemeContainer.updateEditBox()}initDragging(e,t,i,n){this.originalPoint.x=e,this.originalPoint.y=t,this.originalPoint.mx=i,this.originalPoint.my=n,this.startedDragging=!0}initMultiItemBoxResize(e,t,i,n,r){this.initDragging(t,i,n,r),this.initOriginalAreasForEditBox(this.editBox),this.draggerEdges=e}initOriginalAreasForEditBox(e){this.editBoxOriginalArea=Uc.Z.clone(e.area)}mouseMove(e,t,i,n,r,s){if(this.startedDragging&&this.draggerEdges){if(0===s.buttons)return void this.mouseUp(e,t,i,n,r,s);this.dragEditBoxByDragger(e,t,this.draggerEdges,s),this.updateItemImageBox()}}dragEditBoxByDragger(e,t,i,n){Pv(this.editBox,this.editBoxOriginalArea,this.originalPoint,this.store,null,e,t,i)}updateItemImageBox(){const e=(0,gh.N5)(this.editBox.area.x,this.editBox.area.y,this.item),t=(0,gh.N5)(this.editBox.area.x+this.editBox.area.w,this.editBox.area.y+this.editBox.area.h,this.item);zh.Z.tooSmall(this.item.area.w)||(this.item.shapeProps.fill.imageBox.x=e.x/this.item.area.w,this.item.shapeProps.fill.imageBox.w=Math.abs(t.x-e.x)/this.item.area.w),zh.Z.tooSmall(this.item.area.h)||(this.item.shapeProps.fill.imageBox.y=e.y/this.item.area.h,this.item.shapeProps.fill.imageBox.h=Math.abs(t.y-e.y)/this.item.area.h),this.listener.onItemChanged(this.item.id,"shapeProps.fill"),this.listener.onSchemeChangeCommitted()}mouseUp(e,t,i,n,r,s){this.updateItemImageBox(),this.reset()}resetImageBox(){this.item.shapeProps.fill.imageBox={x:0,y:0,w:1,h:1},this.listener.onSchemeChangeCommitted(),this.cancel()}}var gy=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{title:"Export template",width:600},on:{close:function(t){return e.$emit("close")}}},[i("div",{staticClass:"template-export-container"},[i("div",[i("div",{staticClass:"ctrl-label"},[e._v("Name")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"textfield",domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),i("div",{staticClass:"ctrl-label"},[e._v("Preview")]),e._v(" "),i("div",{staticClass:"preview"},[i("img",{attrs:{src:e.imagePreview}})])]),e._v(" "),i("div",{staticClass:"template-export-code"},[i("div",{staticClass:"ctrl-label"},[e._v("Content")]),e._v(" "),i("p",{staticClass:"hint hint-small"},[e._v("Template exporting is only used by the developers of Schemio")]),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],staticClass:"textfield",domProps:{value:e.content},on:{input:function(t){t.target.composing||(e.content=t.target.value)}}})])])])};function vy(e,t,i,n,r){let s="";(e=Uc.Z.clone(e)).description&&(s=(0,ph.v)(e.description).trim()),e.description="",(0,fh.Hp)([e],(e=>{e.meta&&delete e.meta}));const o=`<svg ref="svgContainer" class="export-svg-preview"\n        width="100%" height="200px"\n        viewBox="${-i} ${-i} ${n+2*i} ${r+2*i}"\n        preserveAspectRatio="xMidYMid"\n        xmlns="http://www.w3.org/2000/svg"\n        xmlns:xhtml="http://www.w3.org/1999/xhtml"\n        xmlns:xlink="http://www.w3.org/1999/xlink" >\n        ${t}\n    </svg>`;return{name:e.name,args:{},description:s,preview:"data:image/svg+xml;base64,"+btoa(o),item:e}}gy._withStripped=!0;const yy={components:{Modal:je.Z},props:{item:{type:Object,required:!0}},data(){const e=Ih([this.item]),t=(0,Fe.UI)(e.exportedItems,(e=>e.html)).join("\n");let i=0;(0,Fe.Ed)(e.exportedItems,(e=>{!isNaN(e.item.shapeProps.strokeSize)&&e.item.shapeProps.strokeSize>i&&(i=e.item.shapeProps.strokeSize)}));const n=Math.max(10,2*i),r=vy(this.item,t,n,e.width,e.height);return{preparedItems:e,name:r.name,svgHtml:t,padding:n,width:e.width,height:e.height,imagePreview:r.preview,content:JSON.stringify(r),refreshTimeoutId:null}},methods:{generateCode(){const e=vy(this.item,this.svgHtml,this.padding,this.width,this.height);e.name=this.name,this.content=JSON.stringify(e)}},watch:{name(e){this.refreshTimeoutId&&clearTimeout(this.refreshTimeoutId),this.refreshTimeoutId=setTimeout((()=>{this.generateCode(),this.refreshTimeoutId=null}),300)}}},xy=(0,Re.Z)(yy,gy,[],!1,null,null,null).exports;var by=i(5958);class wy{constructor(e,t,i,n,r,s,o){this.editorId=e,this.duration=n,this.boundsElement=i,this.fps=r,this.deltaTime=1e3/r,this.intervalId=null,this.elapsedTime=0,this.schemeContainer=t,this.delay=0,this.width=s,this.height=o,this.bbox=null,this.framePromises=[],this.finishCallback=null,this.shouldStop=!1,this.backgroundColor="#ffffff"}setDelay(e){this.delay=e}setBackgroundColor(e){this.backgroundColor=e}onFinish(e){this.finishCallback=e}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null,this.shouldStop=!0)}export(e){return 0===this.framePromises.length?Promise.resolve():Promise.all(this.framePromises).then((t=>{const i=(0,by.GIFEncoder)();t.forEach((e=>{const{data:t,width:n,height:r}=e,s=(0,by.quantize)(t,256),o=(0,by.applyPalette)(t,s);i.writeFrame(o,n,r,{palette:s,delay:this.deltaTime})})),i.finish();const n=i.bytesView();let r=e.replace(/[\W_]+/g,"-");r||(r="animation"),function(e,t,i){const n=e instanceof Blob?e:new Blob([e],{type:{type:"image/gif"}}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=t,s.click()}(n,`${r}.gif`)}))}start(){if(!this.intervalId){if(this.shouldStop=!1,this.boundsElement){const e=this.schemeContainer.findElementsBySelector(this.boundsElement);this.bbox=(0,gh.av)(e)}else this.bbox=(0,gh.av)(this.schemeContainer.getItems());this.elapsedTime=0,this.intervalId=setInterval((()=>{if(!this.shouldStop){if(this.elapsedTime+=this.deltaTime,this.elapsedTime>this.duration+this.delay)return this.stop(),void(this.finishCallback&&this.finishCallback());this.elapsedTime>this.delay&&this.onFrame()}}),this.deltaTime)}}onFrame(){this.framePromises.push(function(e,t,i,n,r,s,o,a){const l=document.getElementById(`svg-plot-${e}`).cloneNode(!0).innerHTML,c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.innerHTML=l,c.setAttribute("xmlns","http://www.w3.org/2000/svg"),c.setAttribute("xmlns:xhtml","http://www.w3.org/1999/xhtml"),c.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");const h=n,d=r;return c.setAttribute("viewBox",`${t} ${i} ${h} ${d}`),c.setAttribute("width",`${s}px`),c.setAttribute("height",`${o}px`),c.querySelector('g[data-type="scene-transform"]').removeAttribute("transform"),vh(c),bh(c).then((()=>Th(c))).then((()=>{const e=(new XMLSerializer).serializeToString(c);return t=e,i={width:s,height:o,paddingTop:0,paddingLeft:0,paddingBottom:0,paddingRight:0,backgroundColor:a},new Promise(((e,n)=>{const r=`data:image/svg+xml;base64,${(0,wh.cv)(t)}`,s=document.createElement("canvas");s.width=i.width,s.height=i.height;const o=s.getContext("2d"),a=new Image;a.onload=()=>{i.backgroundColor&&(o.fillStyle=i.backgroundColor,o.fillRect(0,0,s.width,s.height)),o.drawImage(a,i.paddingLeft,i.paddingTop),e(o.getImageData(0,0,i.width,i.height))},a.src=r,a.onerror=e=>n(e)}));var t,i}))}(this.editorId,this.bbox.x,this.bbox.y,this.bbox.w,this.bbox.h,this.width,this.height,this.backgroundColor).then((e=>e)).catch((e=>{console.error(e)})))}}var Cy=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{title:"Export Animation",width:600,primaryButton:"Export","use-mask":!1},on:{close:function(t){return e.$emit("close")},"primary-submit":e.exportSubmitted}},[i("p",[e._v("\n        Exports document as animated GIF\n    ")]),e._v(" "),i("div",{staticClass:"row gap centered"},[i("div",{staticClass:"col-5"},[i("NumberTextfield",{attrs:{name:"Width",value:e.width},on:{changed:e.onWidthChange}})],1),e._v(" "),i("div",[i("span",{staticClass:"toggle-button small",class:{toggled:e.sizeLocked},on:{click:e.toggleSizeLock}},[i("i",{staticClass:"fa-solid fa-lock"})])]),e._v(" "),i("div",{staticClass:"col-5"},[i("NumberTextfield",{attrs:{name:"Height",value:e.height},on:{changed:e.onHeightChange}})],1)]),e._v(" "),i("div",{staticClass:"row gap"},[i("div",{staticClass:"col-1"},[i("NumberTextfield",{attrs:{name:"Duration (sec)",value:e.duration},on:{changed:function(t){e.duration=arguments[0]}}})],1),e._v(" "),i("div",{staticClass:"col-1"},[i("NumberTextfield",{attrs:{name:"Delay (sec)",value:e.delay},on:{changed:function(t){e.delay=arguments[0]}}})],1),e._v(" "),i("div",{staticClass:"col-1"},[i("NumberTextfield",{attrs:{name:"Frames per second",value:e.fps},on:{changed:function(t){e.fps=arguments[0]}}})],1)]),e._v(" "),i("div",{staticClass:"row gap centered"},[i("div",{staticClass:"col-1",staticStyle:{"text-align":"right"}},[e._v("\n            Limit area by:\n        ")]),e._v(" "),i("div",{staticClass:"col-1"},[i("ElementPicker",{attrs:{editorId:e.editorId,element:e.boundsElement,schemeContainer:e.schemeContainer,"use-self":!1},on:{selected:e.onBoundsElementSelected}})],1)])])};Cy._withStripped=!0;const Py={props:{editorId:{type:String},schemeContainer:{type:Object}},components:{Modal:je.Z,NumberTextfield:fd.Z,ElementPicker:Vu},data(){const e=(0,gh.av)(this.schemeContainer.getItems()),t=Math.max(1,Math.round(e.w)),i=Math.max(1,Math.round(e.h));return{duration:2,fps:12,delay:0,width:t,height:i,ratio:t/i,sizeLocked:!0,boundsElement:null}},methods:{onWidthChange(e){this.width=Math.max(1,e),this.sizeLocked&&(this.height=Math.max(1,Math.round(this.width/this.ratio)))},onHeightChange(e){this.height=Math.max(1,e),this.sizeLocked&&(this.width=Math.max(1,Math.round(this.height*this.ratio)))},toggleSizeLock(){this.sizeLocked=!this.sizeLocked,this.sizeLocked&&(this.ratio=Math.max(1,this.width)/Math.max(1,this.height))},exportSubmitted(){this.$emit("export-requested",{duration:this.duration,fps:this.fps,width:this.width,height:this.height,delay:this.delay,boundsElement:this.boundsElement})},onBoundsElementSelected(e){this.boundsElement=e;const t=e?this.schemeContainer.findElementsBySelector(e):this.schemeContainer.getItems(),i=(0,gh.av)(t);i.w>0&&i.h>0&&(this.width=i.w,this.height=i.h)}}},ky=(0,Re.Z)(Py,Cy,[],!1,null,null,null).exports;var Sy=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"starter-proposal-modal-wrapper",attrs:{"data-type":"wrapper"},on:{click:e.onModalWrapperClick}},[i("div",{staticClass:"starter-proposal-modal"},[i("div",{staticClass:"starter-proposal-header"},[i("span",{staticClass:"title"},[e._v("Select a template...")]),e._v(" "),i("span",{staticClass:"link",on:{click:function(t){return e.$emit("close")}}},[i("i",{staticClass:"fas fa-times"})])]),e._v(" "),i("div",{staticClass:"starter-proposal-body"},[i("ul",{staticClass:"starter-proposals"},e._l(e.proposals,(function(t){return i("li",{on:{click:function(i){return e.selectStarter(t)}}},[i("div",{staticClass:"starter-proposal-container"},[i("div",{staticClass:"title"},[e._v(e._s(t.name))]),e._v(" "),t.iconUrl?i("img",{staticClass:"icon",attrs:{src:t.iconUrl}}):i("div",{staticClass:"empty-icon"}),e._v(" "),t.isLoading?i("div",{staticClass:"start-proposal-loading-overlay"},[i("i",{staticClass:"fas fa-spinner fa-spin fa-2x"})]):e._e()])])})),0)])])])};function Iy(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ay(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Iy(Object(i),!0).forEach((function(t){_y(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Iy(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function _y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Sy._withStripped=!0;const Ey={props:{templates:{type:Array,default:()=>[]}},data(){return{proposals:this.templates.map((e=>Ay(Ay({},e),{},{isLoading:!1})))}},methods:{onModalWrapperClick(e){"wrapper"===e.target.getAttribute("data-type")&&this.$emit("close")},selectStarter(e){e.docUrl?(e.isLoading=!0,this.$store.state.apiClient.get(e.docUrl).then((t=>{e.isLoading=!1,t&&t.items||this.emitItems([]),this.emitItems(t.items)})).catch((t=>{console.error(t),e.isLoading=!1,nh.Z.addErrorSystemMessage(this.$store,"Failed to load template")}))):this.emitItems([])},emitItems(e){this.$emit("selected",e)}}},Ty=Ey,My=(0,Re.Z)(Ty,Sy,[],!1,null,null,null).exports;function $y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Oy(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?$y(Object(i),!0).forEach((function(t){Dy(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):$y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Dy(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const By={id:"",moved:!0,rotated:!1,resized:!1};function Ly(e,t){return e=parseFloat(e),t<=100?e.toFixed(0):t<500?e.toFixed(1):e.toFixed(2)}function Ry(e){return t=>{const i=Uc.Z.clone(t),n=(0,gh.rs)(t.x,t.y,e);if(i.x=n.x,i.y=n.y,"B"===t.t){const r=(0,gh.rs)(t.x+t.x1,t.y+t.y1,e);i.x1=r.x-n.x,i.y1=r.y-n.y}if("B"===t.t){const r=(0,gh.rs)(t.x+t.x2,t.y+t.y2,e);i.x2=r.x-n.x,i.y2=r.y-n.y}return i}}function Ny(e){if("B"===e.t){let t=Math.sqrt(e.x1*e.x1+e.y1*e.y1),i=1,n=0;t>1e-6&&(i=e.x1/t,n=e.y1/t),t=Math.sqrt(e.x2*e.x2+e.y2*e.y2);let r=1,s=0;t>1e-6&&(r=e.x2/t,s=e.y2/t),e.vx1=i,e.vy1=n,e.vx2=r,e.vy2=s}}function Zy(e,t,i){return e>=0&&e<i.paths.length&&t>=0&&t<i.paths[e].points.length}function Fy(e){return new Promise(((t,i)=>{const n=new Image;n.onload=t,n.onerror=i,n.src=e}))}const jy=Wc("scheme-settings",40);let zy=null;const Uy={components:{SvgEditor:Yd,ItemProperties:Pm,ItemDetails:Dm,SchemeProperties:Rm,SchemeDetails:Fm,CreateItemMenu:ff,QuickHelperPanel:Eg,FloatingHelperPanel:Lg,LinkEditModal:Ru,InPlaceTextEditBox:fu,TemplateProperties:Am,ItemTooltip:wf,Panel:wu,ItemSelector:Mf,TextSlotProperties:Mm,Dropdown:wd.Z,ConnectorDestinationProposal:kf,StarterProposalModal:My,Modal:je.Z,ShapeExporterModal:Qf,FrameAnimatorPanel:gg,PathEditBox:uu,EditBox:ou,ElementPicker:Vu,DiagramPicker:tp,ExportTemplateModal:xy,DrawingControlsPanel:yd,ExportAnimationModal:ky},props:{editorId:{type:String,required:!0},mode:{type:String,default:"view"},scheme:{type:Object,required:!0},patchIndex:{type:Object,default:null},editAllowed:{type:Boolean,default:!1},isSaving:{type:Boolean,required:!0},active:{type:Boolean,default:!0},modified:{type:Boolean,default:!1},userStylesEnabled:{type:Boolean,default:!1},projectArtEnabled:{type:Boolean,default:!0},schemeTagsEnabled:{type:Boolean,default:!0},menuOptions:{type:Array,default:[]},historyUndoable:{type:Boolean,required:!0},historyRedoable:{type:Boolean,required:!0},modeControlEnabled:{type:Boolean,default:!0},saveControlEnabled:{type:Boolean,default:!0},schemeReloadKey:{type:String,default:null},extraTabs:{type:Array,default:()=>[]},customItemMenuPanels:{type:Array,default:()=>[]},contextMenuExtraProvider:{type:Object,default:null},starterTemplates:{type:Array,default:()=>[]}},created(){this.animationRegistry=(0,Fd.XS)(this.editorId);const e=()=>{this.cancelCurrentState(),this.historyState.undoable=this.historyUndoable,this.historyState.redoable=this.historyRedoable},t=(e,t)=>mh.Z.item.changed.specific.$emit(this.editorId,e,t),i=e=>mh.Z.schemeChangeCommitted.$emit(this.editorId,e),n=e=>this.onScreenTransformUpdated(e),r=e=>this.highlightedItems=e,s=()=>{};this.states={interact:new nv(this.editorId,this.$store,this.userEventBus,{onCancel:e,onItemClicked:e=>this.onInteractItemClicked(e),onVoidClicked:()=>this.onInteractVoidClicked(),onItemTooltipRequested:(e,t,i)=>this.onItemTooltipTriggered(e,t,i),onItemSidePanelRequested:e=>this.onItemSidePanelTriggered(e),onItemLinksShowRequested:e=>mh.Z.item.linksShowRequested.any.$emit(this.editorId,e),onItemChanged:t,onItemsHighlighted:r,onSubStateMigrated:s,onScreenTransformUpdated:n}),createItem:new Vg(this.editorId,this.$store,{onCancel:e,onSchemeChangeCommitted:i,onItemChanged:t,onItemsHighlighted:r,onSubStateMigrated:s,onScreenTransformUpdated:n}),editPath:new jv(this.editorId,this.$store,{onCancel:e,onSchemeChangeCommitted:i,onHistoryStateChange:(e,t)=>{this.historyState.undoable=e,this.historyState.redoable=t},onCursorUpdated:(e,t)=>{this.cursorX=e,this.cursorY=t},onPathPointsUpdated:()=>{this.pathPointsUpdateKey++},onContextMenuRequested:(e,t,i)=>this.onContextMenuRequested(e,t,i),onItemChanged:t,onItemsHighlighted:r,onSubStateMigrated:s,onScreenTransformUpdated:n,updateAllCurveEditPoints:e=>this.setCurveEditItem(e),updateCurveEditPoint:(e,t,i,n)=>this.updateCurveEditPoint(e,t,i,n),resetCurveEditPointSelection:()=>this.resetCurveEditPointSelection(),selectCurveEditPoint:(e,t,i)=>this.selectCurveEditPoint(e,t,i),getCurveEditPaths:()=>this.curveEditing.paths}),connecting:new dy(this.editorId,this.$store,{onCancel:e,onSchemeChangeCommitted:i,onItemChanged:t,onItemsHighlighted:r,onSubStateMigrated:s,onScreenTransformUpdated:n}),dragItem:new Cv(this.editorId,this.$store,{onCancel:()=>{e(),this.isScreenGrabbing=!1},onSchemeChangeCommitted:i,onStartConnecting:(e,t)=>this.startConnecting(e,t),onVoidRightClicked:(e,t)=>this.onVoidRightClicked(e,t),onVoidDoubleClicked:(e,t,i,n)=>mh.Z.void.doubleClicked.$emit(this.editorId,e,t,i,n),onEditPathRequested:e=>this.onEditPathRequested(e),onItemDeselected:e=>mh.Z.item.deselected.specific.$emit(this.editorId,e.id),onItemTextSlotEditTriggered:(e,t,i,n,r)=>{mh.Z.textSlot.triggered.specific.$emit(this.editorId,e,t,i,n,r)},onItemRightClick:(e,t,i)=>this.onItemRightClick(e,t,i),onItemChanged:t,onItemsHighlighted:r,onSubStateMigrated:()=>{this.updateFloatingHelperPanel()},onScreenTransformUpdated:n,onItemDetailsMouseOver:(e,t,i,n,r)=>this.onItemDetailsMouseOver(e,t,i,n,r),onItemDetailsMouseOut:(e,t,i,n,r)=>this.onItemDetailsMouseOut(e,t,i,n,r)}),pickElement:new uy(this.editorId,this.$store,{onCancel:e,onItemChanged:t,onItemsHighlighted:r,onSubStateMigrated:s,onScreenTransformUpdated:n}),cropImage:new my(this.editorId,this.$store,{onCancel:e,onSchemeChangeCommitted:i,onItemChanged:t,onItemsHighlighted:r,onSubStateMigrated:s,onScreenTransformUpdated:n}),imageBox:new fy(this.editorId,this.$store,{onCancel:e,onSchemeChangeCommitted:i,onItemChanged:t,onItemsHighlighted:r,onSubStateMigrated:s,onScreenTransformUpdated:n}),draw:new ly(this.editorId,this.$store,{onCancel:e,onSchemeChangeCommitted:i,onItemChanged:t,onItemsHighlighted:r,onSubStateMigrated:s,onScreenTransformUpdated:n})}},beforeMount(){var e;mh.Z.schemeChangeCommitted.$on(this.editorId,this.onSchemeChangeCommitted),mh.Z.item.clicked.any.$on(this.editorId,this.onAnyItemClicked),mh.Z.item.changed.any.$on(this.editorId,this.onAnyItemChanged),mh.Z.item.selected.any.$on(this.editorId,this.onItemSelectionUpdated),mh.Z.item.deselected.any.$on(this.editorId,this.onItemSelectionUpdated),mh.Z.item.templateSelected.$on(this.editorId,this.onItemTemplateSelected),mh.Z.void.clicked.$on(this.editorId,this.onVoidClicked),mh.Z.textSlot.triggered.any.$on(this.editorId,this.onItemTextSlotEditTriggered),mh.Z.elementPick.requested.$on(this.editorId,this.switchStatePickElement),mh.Z.elementPick.canceled.$on(this.editorId,this.onElementPickCanceled),mh.Z.screenTransformUpdated.$on(this.editorId,this.onScreenTransformUpdated),mh.Z.editorResized.$on(this.editorId,this.onWindowResize),mh.Z.schemeRebased.$on(this.editorId,this.rebaseScheme),mh.Z.editBox.fillDisabled.$on(this.editorId,this.onEditBoxFillDisabled),mh.Z.editBox.fillEnabled.$on(this.editorId,this.onEditBoxFillEnabled),mh.Z.item.userEvent.$on(this.editorId,this.onCustomShapeEvent),e=this.keyPressHandler,dd.$on("key-press",e)},beforeDestroy(){var e;mh.Z.schemeChangeCommitted.$off(this.editorId,this.onSchemeChangeCommitted),mh.Z.item.clicked.any.$off(this.editorId,this.onAnyItemClicked),mh.Z.item.changed.any.$off(this.editorId,this.onAnyItemChanged),mh.Z.item.selected.any.$off(this.editorId,this.onItemSelectionUpdated),mh.Z.item.deselected.any.$off(this.editorId,this.onItemSelectionUpdated),mh.Z.item.templateSelected.$off(this.editorId,this.onItemTemplateSelected),mh.Z.void.clicked.$off(this.editorId,this.onVoidClicked),mh.Z.textSlot.triggered.any.$off(this.editorId,this.onItemTextSlotEditTriggered),mh.Z.elementPick.requested.$off(this.editorId,this.switchStatePickElement),mh.Z.elementPick.canceled.$off(this.editorId,this.onElementPickCanceled),mh.Z.screenTransformUpdated.$off(this.editorId,this.onScreenTransformUpdated),mh.Z.editorResized.$off(this.editorId,this.onWindowResize),mh.Z.schemeRebased.$off(this.editorId,this.rebaseScheme),mh.Z.editBox.fillDisabled.$off(this.editorId,this.onEditBoxFillDisabled),mh.Z.editBox.fillEnabled.$off(this.editorId,this.onEditBoxFillEnabled),mh.Z.item.userEvent.$off(this.editorId,this.onCustomShapeEvent),e=this.keyPressHandler,dd.$off("key-press",e),this.animationRegistry.destroy(),window.addEventListener("resize",this.onWindowResize),this.stopStateLoop()},mounted(){this.init(),this.onWindowResize(),window.addEventListener("resize",this.onWindowResize),this.startStateLoop()},data(){return{editorRevision:0,svgEditorRevision:0,cursorX:0,cursorY:0,state:"interact",userEventBus:new Kg(this.editorId),schemeRevision:(new Date).getTime(),isLoading:!1,isCopying:!1,loadingStep:"load",schemeLoadErrorMessage:null,initialScreenTransform:null,highlightedItems:{itemIds:[],showPins:!1},zoomedItems:null,zoomToItemsTrigger:"",cropImage:{editBox:null,item:null},imageBox:{editBox:null,item:null},historyState:{undoable:this.historyUndoable,redoable:this.historyRedoable},pathPointsUpdateKey:0,inPlaceTextEditor:{item:null,slotName:"",markupDisabled:!1,shown:!1,area:{x:0,y:0,w:100,h:100},text:"",creatingNewItem:!1,scalingVector:{x:1,y:1},style:{}},mouseDownId:0,sidePanelItemForViewMode:null,sidePanelRightWidth:400,sidePanelRightWidthLastUsed:400,sidePanelLeftWidth:220,sidePanelLeftWidthLastUsed:220,schemeContainer:null,interactiveSchemeContainer:null,zoom:100,textSelectionEnabled:!1,addLinkPopup:{item:null,shown:!1},currentTab:"Doc",tabs:["Doc","Item"],offsetSaveTimerId:null,itemTooltip:{id:null,item:null,shown:!1,x:0,y:0},itemTextSlotsAvailable:[],exportShapeModal:{shown:!1,shapeGroupItem:null},selectedItem:null,floatingHelperPanel:{shown:!1,item:null,x:0,y:0},bottomPanelHeight:300,isRecording:!1,currentAnimatorFramePlayer:null,curveEditing:{item:null,paths:[],selectedPoints:[]},mobileDebuggerShown:!1,mobileLogEntries:[],isScreenGrabbing:!1,isStateLooping:!1,exportTemplateModal:{item:null,shown:!1},editBoxUseFill:!0,isDrawingBrush:!1,selectedTemplateRootItem:null,selectedTemplateRef:null,animationRecorder:null,exportAnimationModalShown:!1,animationRecorderIsExporting:!1,fullScreen:!1,itemDetails:{item:null,x:0,y:0},itemDetailsMouseOutTimer:null,templatePropertiesKey:0,starterProposalModalShown:!1}},methods:{switchToFullScreen(){const e=this.$refs.editorComponent;this.fullScreen=!0,e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},exitFullScreen(){this.fullScreen=!1,document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},toggleMobileDebugger(){this.mobileLogEntries=Oh.Jw.getLogEntries(),this.mobileDebuggerShown=!0},init(){this.initSchemeContainer(this.scheme)},getInitialZoom(){const e=jy.get(this.scheme.id);return e&&e.screenPosition?parseFloat(e.screenPosition.zoom):100},getInitialScreenTransform(){if(this.scheme&&this.scheme.id){const e=jy.get(this.scheme.id);if(e&&e.screenPosition){const t=parseFloat(e.screenPosition.zoom);return{x:e.screenPosition.offsetX,y:e.screenPosition.offsetY,scale:parseFloat(t)/100}}}if(zy)return zy;if(this.scheme.items&&this.scheme.items.length>0){const e=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),t=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),i=(0,gh.av)(this.scheme.items);return{x:e/2-(i.x+i.w/2),y:t/2-(i.y+i.h/2),scale:1}}return{x:0,y:0,scale:1}},initSchemeContainer(e){this.schemeLoadErrorMessage=null,this.loadingStep="load-shapes",this.isLoading=!0,qd(e.items,this.$store).catch((e=>{console.error(e),nh.Z.addErrorSystemMessage(this.$store,"Failed to load shapes")})).then((()=>{this.isLoading=!1,this.schemeContainer=new Nd.ZP(e,this.editorId,"edit",this.$store.state.apiClient,{onSchemeChangeCommitted:e=>mh.Z.schemeChangeCommitted.$emit(this.editorId,e)}),(0,Fe.Ed)(this.states,(e=>{e.setSchemeContainer(this.schemeContainer),e.reset()}));const t=this.getInitialScreenTransform();if("view"===this.mode?this.switchToViewMode(t):this.switchToEditMode(t),this.zoom=this.getInitialZoom(),this.scheme&&this.scheme.id){const e=jy.get(this.scheme.id);e&&"Text"!==e.currentTab&&(this.currentTab=e.currentTab),"view"==this.mode&&(this.currentTab="Doc")}return this.schemeContainer})).then((e=>{this.loadingStep="img-preload";const t=function(e){const t=[];return(0,Fe.Ed)(e,(e=>{const i=Id.Z.find(e.shape);i&&"advanced-color"===i.argType("fill")&&"image"===e.shapeProps.fill.type&&e.shapeProps.fill.image&&t.push(e.shapeProps.fill.image)})),t}(e.getItems());return Promise.race([Promise.all((0,Fe.UI)(t,Fy)),(1e4,new Promise((e=>{setTimeout(e,1e4)})))])})).then((()=>{this.isLoading=!1,"edit"===this.mode&&(!e.items||0===e.items.length)&&this.starterTemplates&&this.starterTemplates.length>0&&(this.starterProposalModalShown=!0,this.sidePanelRightWidth=0,this.sidePanelLeftWidth=0)})).catch((e=>{console.error(e)}))},onTextSelectionForViewChanged(e){this.textSelectionEnabled=e},cancelCurrentState(){"edit"===this.mode?this.state="dragItem":this.state="interact",this.states[this.state].reset()},resetItemHighlight(){this.highlightedItems={itemIds:[],showPins:!1}},switchStateDragItem(){this.resetItemHighlight(),this.states.dragItem.schemeContainer=this.schemeContainer,this.states[this.state].cancel(),this.state="dragItem",this.states.dragItem.reset()},switchStateInteract(){this.resetItemHighlight(),this.states.interact.schemeContainer=this.interactiveSchemeContainer,this.states[this.state].cancel(),this.state="interact",this.states[this.state].reset(),this.updateFloatingHelperPanel()},switchStatePickElement(e){this.resetItemHighlight(),this.states.pickElement.reset(),this.states.pickElement.schemeContainer=this.schemeContainer,this.states.pickElement.setElementPickCallback(e),this.state="pickElement",this.updateFloatingHelperPanel()},switchStateCreateItem(e,t){this.resetItemHighlight(),this.states[this.state].cancel(),"path"===e.shape?(this.setCurveEditItem(e),this.state="editPath",this.onEditPathRequested(e)):"connector"===e.shape?(e.shapeProps.points=[],this.state="connecting",this.states.connecting.setItem(e)):this.state="createItem",this.states[this.state].schemeContainer=this.schemeContainer,this.states[this.state].reset(),this.states[this.state].setItem(e,t),this.updateFloatingHelperPanel()},startPathEditing(e){this.resetItemHighlight(),this.states[this.state].cancel(),this.setCurveEditItem(e),this.state="editPath",this.onEditPathRequested(e),this.states[this.state].schemeContainer=this.schemeContainer,this.states[this.state].reset(),this.states[this.state].setItem(e),this.updateFloatingHelperPanel()},switchStatePencilDrawing(){this.resetItemHighlight(),this.isDrawingBrush=!1,this.states[this.state].cancel(),this.state="draw",this.states.draw.schemeContainer=this.schemeContainer,this.states.draw.startPencil(),this.updateFloatingHelperPanel()},switchStateBrushDrawing(){this.resetItemHighlight(),this.isDrawingBrush=!0,this.states[this.state].cancel(),this.state="draw",this.states.draw.schemeContainer=this.schemeContainer,this.states.draw.startBrush(),this.updateFloatingHelperPanel()},stopDrawing(){"draw"===this.state&&this.states.draw.cancel(),this.updateFloatingHelperPanel()},stopConnecting(){"connecting"===this.state&&this.states.connecting.cancel(),this.updateFloatingHelperPanel()},startConnecting(e,t){this.resetItemHighlight(),this.states[this.state].cancel();let i=null;t&&(i=this.schemeContainer.localPointOnItem(t.x,t.y,e)),this.states.connecting.schemeContainer=this.schemeContainer,this.states.connecting.reset(),this.states.connecting.initConnectingFromSourceItem(e,i).shapeProps.smoothing=this.$store.state.defaultConnectorSmoothing,this.state="connecting",this.updateFloatingHelperPanel()},onDrawColorPicked(e){"draw"===this.state&&this.states.draw.pickColor(e)},onEditPathRequested(e){this.resetItemHighlight(),this.states[this.state].cancel(),this.state="editPath",this.states.editPath.reset(),this.states.editPath.setItem(e),this.setCurveEditItem(e),this.updateFloatingHelperPanel()},onPathEditStopped(){"editPath"===this.state&&this.states.editPath.cancel()},startCroppingImage(e){this.resetItemHighlight(),this.states[this.state].cancel(),this.state="cropImage",this.states[this.state].schemeContainer=this.schemeContainer,this.states.cropImage.reset(),this.cropImage.editBox=this.schemeContainer.generateEditBox([e],[]),this.cropImage.item=e,this.states.cropImage.setImageEditBox(this.cropImage.editBox),this.states.cropImage.setImageItem(e),this.updateFloatingHelperPanel()},startImageBoxEdit(e){this.resetItemHighlight(),this.states[this.state].cancel(),this.state="imageBox",e.shapeProps.fill.imageBox||(e.shapeProps.fill.imageBox={x:0,y:0,w:1,h:1});const t=e.shapeProps.fill.imageBox;this.states.imageBox.schemeContainer=this.schemeContainer,this.states.imageBox.reset();const i=this.schemeContainer.generateEditBox([e],[]),n=(0,gh.rs)(e.area.w*t.x,e.area.h*t.y,e),r=(0,gh.rs)(e.area.w*t.w,0,e),s=(0,gh.rs)(0,e.area.h*t.h,e);i.area.x=n.x,i.area.y=n.y,i.area.w=zh.Z.distanceBetweenPoints(n.x,n.y,r.x,r.y),i.area.h=zh.Z.distanceBetweenPoints(n.x,n.y,s.x,s.y),i.area.r=(0,gh.mo)(e),this.imageBox.editBox=i,this.imageBox.item=e,this.states.imageBox.setImageEditBox(this.imageBox.editBox),this.states.imageBox.setImageItem(e),this.updateFloatingHelperPanel()},onElementPickCanceled(){"pickElement"===this.state&&this.states.pickElement.cancel()},onItemTextSlotEditTriggered(e,t,i,n,r){e.textSlots[t]||(e.textSlots[t]=Uc.Z.clone(fh.td));const s=e.textSlots[t],o=(0,gh.rs)(i.x,i.y,e),a=(0,gh.rs)(i.x+i.w,i.y,e),l=(0,gh.rs)(i.x+i.w,i.y+i.h,e),c=(0,gh.rs)(i.x,i.y+i.h,e),h=zh.Z.averagePoint(o,a,l,c),d=zh.Z.distanceBetweenPoints(o.x,o.y,a.x,a.y),u=zh.Z.distanceBetweenPoints(o.x,o.y,c.x,c.y),p=(0,gh.pD)(e),m=h.x-d/2,f=h.y-u/2;this.inPlaceTextEditor.slotName=t,this.inPlaceTextEditor.item=e,this.inPlaceTextEditor.text=s.text,this.inPlaceTextEditor.markupDisabled=n,this.inPlaceTextEditor.style=(0,bd.A)(s),this.inPlaceTextEditor.creatingNewItem=r;const g=1/Math.max(1e-7,p.x),v=1/Math.max(1e-7,p.y);this.inPlaceTextEditor.area.x=this._x(m)-g,this.inPlaceTextEditor.area.y=this._y(f)-v,this.inPlaceTextEditor.area.w=this._z(d),this.inPlaceTextEditor.area.h=this._z(u),this.inPlaceTextEditor.shown=!0,this.inPlaceTextEditor.scalingVector=p,this.updateFloatingHelperPanel()},onInPlaceTextEditorUpdate(e){if(this.inPlaceTextEditor.shown){const t=this.inPlaceTextEditor.slotName;this.schemeContainer.updateItem(this.inPlaceTextEditor.item.id,`textSlots.${t}.text`,(i=>{i.textSlots[t].text=e}))}},onInPlaceTextEditorItemAreaChanged(e,t,i){"none"===e.shape&&(e.area.w=t,e.area.h=i,this.schemeContainer.updateEditBox())},onInPlaceTextEditorItemRenamed(e,t){e.name=t},onInPlaceTextEditorItemTextCleared(e){"none"!==!e.shape&&(e.childItems&&e.childItems.length>0||this.schemeContainer.deleteItem(e))},closeItemTextEditor(){this.inPlaceTextEditor.item&&(mh.Z.textSlot.canceled.specific.$emit(this.editorId,this.inPlaceTextEditor.item,this.inPlaceTextEditor.slotName),mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${this.inPlaceTextEditor.item.id}.textSlots.${this.inPlaceTextEditor.slotName}.text`),mh.Z.item.changed.specific.$emit(this.editorId,this.inPlaceTextEditor.item.id,`textSlots.${this.inPlaceTextEditor.slotName}.text`),this.schemeContainer.reindexItems()),this.inPlaceTextEditor.shown=!1,this.inPlaceTextEditor.markupDisabled=!1},updateInPlaceTextEditorStyle(){const e=this.inPlaceTextEditor.item.textSlots[this.inPlaceTextEditor.slotName];this.inPlaceTextEditor.style=(0,bd.A)(e)},onAnyItemChanged(e){this.states[this.state].onItemChanged(e),this.inPlaceTextEditor.item&&this.inPlaceTextEditor.item.id===e&&this.updateInPlaceTextEditorStyle()},emitModeChangeRequested(e){this.$emit("mode-change-requested",e)},saveScheme(){this.$emit("scheme-save-requested",this.schemeContainer.scheme)},zoomToSelection(){"edit"===this.mode?this.schemeContainer.selectedItems.length>0?this.zoomToItems(this.schemeContainer.selectedItems):this.zoomToItems(this.schemeContainer.getItems()):"view"===this.mode&&this.zoomToItems(this.interactiveSchemeContainer.getItems())},zoomToItems(e){this.zoomedItems=e,this.zoomToItemsTrigger=jl().generate()},onClickedAddItemLink(e){this.addLinkPopup.item=e,this.addLinkPopup.shown=!0},onClickedStartConnecting(e,t,i){const n={x:0,y:0};n.x=t,n.y=i,this.startConnecting(e,n)},onItemLinkSubmit(e){this.addLinkPopup.item.links.push({id:jl().generate(),title:e.title,url:e.url,type:e.type}),mh.Z.item.changed.specific.$emit(this.editorId,this.addLinkPopup.item.id,"links"),mh.Z.schemeChangeCommitted.$emit(this.editorId)},startCreatingExternalComponentForItem(e){this.startCreatingChildSchemeForItem(e,!0)},startCreatingChildSchemeForItem(e,t){this.$emit("new-diagram-requested-for-item",e,t)},onUpdateOffset(e,t){this.initOffsetSave()},onZoomChanged(e){this.states[this.state].changeZoomTo(e/100),this.zoom=e,this.initOffsetSave()},initOffsetSave(){this.offsetSaveTimerId&&clearTimeout(this.offsetSaveTimerId),this.offsetSaveTimerId=setTimeout((()=>{this.offsetSaveTimerId=null,this.saveSchemeSettings()}),200)},saveSchemeSettings(){let e=this.schemeContainer;"view"===this.mode&&(e=this.interactiveSchemeContainer),jy.save(e.scheme.id,{currentTab:this.currentTab,screenPosition:{offsetX:e.screenTransform.x,offsetY:e.screenTransform.y,zoom:this.zoom}}),zy=Oy({},e.screenTransform)},onAnyItemClicked(e){this.sidePanelItemForViewMode=null,this.hideSidePanelRight()},onVoidClicked(){"view"===this.mode&&(this.hideSidePanelRight(),this.sidePanelItemForViewMode=null)},keyPressHandler(e,t,i,n){this.active&&(e?this.onKeyPressed(t,i,n):this.onKeyUp(t,i,n))},onKeyPressed(e,t,i){i.target&&i.target.classList.contains("script-editor")||("edit"===this.mode&&("dragItem"===this.state?e===Kh?this.copySelectedItems():e===Qh?(this.copySelectedItems(),this.deleteSelectedItems()):e===Jh?this.pasteItemsFromClipboard():Yh===e?this.saveScheme():Xh===e?this.historyUndo():td===e?this.historyRedo():Gh===e?this.schemeContainer.selectAllItems():Hh===e&&this.deleteSelectedItems():"editPath"===this.state&&Hh===e&&this.states.editPath.deleteSelectedPoints()),e===Uh?this.states[this.state].cancel():this.states[this.state].keyPressed(e,t))},onKeyUp(e,t){e!==Uh&&e!=Hh&&this.states[this.state].keyUp(e,t)},copySelectedItems(){this.isCopying=!0,this.schemeContainer.copySelectedItems().then((e=>{lh(e),this.isCopying=!1})).catch((e=>{console.error(e),this.isCopying=!1}))},copySelectedItemStyle(){const e=this.schemeContainer.getSelectedItems();e.length>0&&nh.Z.copyItemStyle(this.$store,e[0])},createComponentFromItem(e){const t=(0,gh.rs)(0,1.2*e.area.h,e),i={area:{x:t.x,y:t.y,w:e.area.w,h:e.area.h},name:`Component[${e.name}]`,shape:"component",shapeProps:{kind:"embedded",referenceItem:"#"+e.id,autoZoom:!1,showButton:!1}};(0,xd.z9)(i),this.schemeContainer.addItem(i)},applyCopiedItemStyle(){this.$store.state.copiedStyleItem&&((0,Fe.Ed)(this.schemeContainer.getSelectedItems(),(e=>{(0,fh.FR)(this.$store.state.copiedStyleItem,e),mh.Z.item.changed.specific.$emit(this.editorId,e.id)})),mh.Z.schemeChangeCommitted.$emit(this.editorId))},loadCopiedItemsFromClipboard(){return ch().then((e=>{if(!e)return[];const t=this.schemeContainer.decodeItemsFromText(e);return t?(this.isLoading=!0,this.loadingStep="load-shapes",qd(t,this.$store).then((()=>(this.isLoading=!1,t))).catch((e=>(this.isLoading=!1,console.error(e),nh.Z.addErrorSystemMessage(this.$store,"Failed to load shapes"),[])))):[]}))},pasteItemsFromClipboardInto(e){this.loadCopiedItemsFromClipboard().then((t=>{t&&this.schemeContainer.pasteItemsInto(t,e)}))},pasteItemsFromClipboardAt(e,t){this.loadCopiedItemsFromClipboard().then((i=>{if(!i)return;const n=(e-this.schemeContainer.screenTransform.x)/this.schemeContainer.screenTransform.scale,r=(t-this.schemeContainer.screenTransform.y)/this.schemeContainer.screenTransform.scale;this.schemeContainer.pasteItems(i,n,r)}))},pasteItemsFromClipboard(){this.pasteItemsFromClipboardAt(this.schemeContainer.screenSettings.width/2,this.schemeContainer.screenSettings.height/2)},onInteractVoidClicked(){this.itemTooltip.shown=!1,mh.Z.void.clicked.$emit(this.editorId)},onInteractItemClicked(e){this.itemTooltip.shown=!1,mh.Z.item.clicked.any.$emit(this.editorId,e)},onItemTooltipTriggered(e,t,i){this.itemTooltip.item=e,this.itemTooltip.id=e.id,this.itemTooltip.x=t;const n=this.$refs.middleSection.getBoundingClientRect();this.itemTooltip.y=Math.max(n.top,i),this.itemTooltip.shown=!0},onItemSidePanelTriggered(e){this.sidePanelItemForViewMode=e,this.showSidePanelRight(),this.currentTab="Item"},onSchemeChangeCommitted(){this.commitHistory(),this.saveSchemeSettings()},commitHistory(e){this.$emit("history-committed",this.schemeContainer.scheme,e)},historyEditAllowed(){return"dragItem"===this.state},historyUndo(){"editPath"===this.state?this.states.editPath.undo():this.historyEditAllowed()&&this.$emit("undo-history-requested")},historyRedo(){"editPath"===this.state?this.states.editPath.redo():this.historyEditAllowed()&&this.$emit("redo-history-requested")},reloadSchemeContainer(){this.schemeContainer.scheme=this.scheme,this.schemeContainer.reindexItems(),"view"===this.mode&&this.switchToViewMode(),this.editorRevision++,this.updateRevision(),this.restoreItemSelection(),this.restoreCurveEditing()},restoreCurveEditing(){if("editPath"===this.state){if(!this.curveEditing.item)return;const e=this.schemeContainer.findItemById(this.curveEditing.item.id);e?(this.setCurveEditItem(e),this.onEditPathRequested(e)):(this.setCurveEditItem(null),this.onPathEditStopped())}else this.setCurveEditItem(null)},restoreItemSelection(){const e=(0,Fe.UI)(this.schemeContainer.selectedItems,(e=>e.id));this.schemeContainer.deselectAllItems(),(0,Fe.Ed)(e,(e=>{const t=this.schemeContainer.findItemById(e);t&&this.schemeContainer.selectItem(t,!0)}))},updateRevision(){this.schemeRevision=(new Date).getTime()},bringSelectedItemsToFront(){this.schemeContainer.bringSelectedItemsToFront(),this.schemeContainer.reindexItems(),this.commitHistory(),this.updateRevision(),mh.Z.schemeChangeCommitted.$emit(this.editorId)},bringSelectedItemsToBack(){this.schemeContainer.bringSelectedItemsToBack(),this.schemeContainer.reindexItems(),this.commitHistory(),this.updateRevision(),mh.Z.schemeChangeCommitted.$emit(this.editorId)},toggleGrabScreen(){"dragItem"===this.state&&(this.isScreenGrabbing=!this.isScreenGrabbing,this.states[this.state].toggleGrabScreen(this.isScreenGrabbing))},onScreenTransformUpdated(e){e&&(this.zoom=Math.round(1e4*e.scale)/100),this.initOffsetSave(),"edit"===this.mode&&this.updateFloatingHelperPanel()},onItemTemplateSelected(e,t){let i=!this.selectedTemplateRootItem||this.selectedTemplateRootItem.id!==e.id;this.selectedTemplateRef=t,this.selectedTemplateRootItem=e,i&&(this.currentTab="template")},updateSelectedTemplate(){if(1!==this.schemeContainer.selectedItems.length)return this.selectedTemplateRef=null,void(this.selectedTemplateRootItem=null);const e=this.schemeContainer.selectedItems[0];e.args&&e.args.templated||e.meta&&e.meta.templated||(this.selectedTemplateRef=null,this.selectedTemplateRootItem=null)},onItemSelectionUpdated(){if(this.schemeContainer.selectedItems.length>0){this.templatePropertiesKey+=1,this.$emit("items-selected"),this.currentTab="Item";const e=this.schemeContainer.selectedItems[0],t=Id.Z.find(e.shape);if(!t)return;const i=t.getTextSlots(e);1===this.schemeContainer.selectedItems.length?this.selectedItem=this.schemeContainer.selectedItems[0]:this.selectedItem=null,!(i&&i.length>0)||t.editorProps&&t.editorProps.textSlotTabsDisabled?this.itemTextSlotsAvailable.length=0:this.itemTextSlotsAvailable=(0,Fe.UI)(i,(t=>({tabName:`Text: ${t.name}`,slotName:t.name,item:e}))),this.updateSelectedTemplate()}else this.$emit("items-deselected"),this.selectedTemplateRef=null,this.selectedTemplateRootItem=null,this.selectedItem=null,this.itemTextSlotsAvailable.length=0;this.updateFloatingHelperPanel()},onTextSlotMoved(e,t,i){i!==t&&(e.textSlots[i]=Uc.Z.clone(e.textSlots[t]),e.textSlots[t].text="",mh.Z.item.changed.specific.$emit(this.editorId,e.id,`textSlots.${i}`),this.inPlaceTextEditor.item||(this.currentTab=`Text: ${i}`),mh.Z.textSlot.moved.$emit(this.editorId,e,t,i))},onItemShapePropChanged(e,t,i){let n="",r=!1;if((0,Fe.Ed)(this.schemeContainer.selectedItems,(s=>{s.meta.revision+=1;const o=Id.Z.find(s.shape);if(o){const a=Id.Z.getShapePropDescriptor(o,e);a&&a.type===t&&(this.schemeContainer.setPropertyForItem(s,(t=>{t.shapeProps[e]=Uc.Z.clone(i),mh.Z.item.changed.specific.$emit(this.editorId,t.id,`shapeProps.${e}`)})),n+=s.id,Qm.registerItemShapeProp(s.shape,e,i)),"component"===s.shape&&("embedded"!==s.shapeProps.kind&&s._childItems&&(s._childItems=[],mh.Z.item.changed.specific.$emit(this.editorId,s.id)),"kind"!==e&&"referenceItem"!==e&&"placement"!==e||(this.schemeContainer.reindexSpecifiedItems([s]),r=!0))}"connector"===s.shape&&"smoothing"===e&&(r=!0)})),1===this.schemeContainer.selectedItems.length){const e=this.schemeContainer.selectedItems[0];"connector"===e.shape&&nh.Z.setSelectedConnector(this.$store,e)}mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${n}.shapeProps.${e}`),r&&this.schemeContainer.reindexItems()},onItemFieldChanged(e,t){let i="";(0,Fe.Ed)(this.schemeContainer.selectedItems,(n=>{this.schemeContainer.setPropertyForItem(n,(i=>{i[e]=Uc.Z.clone(t),mh.Z.item.changed.specific.$emit(this.editorId,i.id,e)})),i+=n.id})),"tags"===e&&this.schemeContainer.reindexTags(),mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${i}.${e}`)},onItemShapeChanged(e){let t="";(0,Fe.Ed)(this.schemeContainer.selectedItems,(i=>{i.meta.revision+=1,this.schemeContainer.setPropertyForItem(i,(t=>{t.shape=e,(0,xd.EC)(t),(0,xd.z9)(t),mh.Z.item.changed.specific.$emit(this.editorId,t.id,"shape")})),t+=i.id})),mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${t}.shape`)},onItemStyleApplied(e){let t="";(0,Fe.Ed)(this.schemeContainer.selectedItems,(i=>{Dp(i,e)&&(mh.Z.item.changed.specific.$emit(this.editorId,i.id),t+=i.id)})),mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${t}.${name}`)},onInPlaceEditTextPropertyChanged(e,t,i,n){e.textSlots&&e.textSlots.hasOwnProperty(t)&&(e.textSlots[t][i]=Uc.Z.clone(n),Qm.registerItemTextProp(e.shape,t,i,n)),mh.Z.item.changed.specific.$emit(this.editorId,e.id),mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${e.id}.textSlots.${t}.${i}`)},onItemGenericTextSlotPropChanged(e,t){let i="";(0,Fe.Ed)(this.schemeContainer.selectedItems,(n=>{this.schemeContainer.setPropertyForItem(n,(i=>{i.textSlots&&(0,Fe.Ed)(i.textSlots,((n,r)=>{i.textSlots[r][e]=Uc.Z.clone(t),Qm.registerItemTextProp(i.shape,r,e,t)})),mh.Z.item.changed.specific.$emit(this.editorId,i.id,`textSlots.*.${e}`)})),i+=n.id})),mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${i}.textSlots.*.${e}`)},onItemUpdatedInFloatingHelperPanel(e){this.schemeContainer.updateItemClones(e)},onTextPropertyChanged(e,t,i){let n="";(0,Fe.Ed)(this.schemeContainer.selectedItems,(r=>{this.schemeContainer.setPropertyForItem(r,(n=>{n.textSlots&&n.textSlots.hasOwnProperty(e)&&(n.textSlots[e][t]=Uc.Z.clone(i),Qm.registerItemTextProp(n.shape,e,t,i)),mh.Z.item.changed.specific.$emit(this.editorId,n.id,`textSlots.${e}.${t}`)})),n+=r.id})),mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${n}.textSlots.${e}.${t}`)},onEditBoxTemplateRebuildRequested(e,t,i){this.rebuildTemplate(e,t,i),this.schemeContainer.reindexItems(),this.schemeContainer.updateEditBox()},onTemplatePropertiesUpdated(e,t,i){this.rebuildTemplate(e,t,i),this.schemeContainer.delayFullReindex()},rebuildTemplate(e,t,i){const n=this.schemeContainer.findItemById(e);n&&(this.schemeContainer.regenerateTemplatedItem(n,t,i,n.area.w,n.area.h),this.editorRevision++,(0,fh.Hp)([n],(e=>{mh.Z.item.changed.specific.$emit(this.editorId,e.id)})),this.schemeContainer.reindexItems())},updateTemplate(e,t,i){this.rebuildTemplate(e,t,i)},breakTemplate(e){const t=this.schemeContainer.selectedItems.length>0?this.schemeContainer.selectedItems[0]:null;this.schemeContainer.deselectAllItems(),(0,Xd.sV)(e),this.schemeContainer.reindexItems(),(0,fh.Hp)([e],(e=>{mh.Z.item.changed.specific.$emit(this.editorId,e.id)})),this.editorRevision++,mh.Z.schemeChangeCommitted.$emit(this.editorId),t&&this.schemeContainer.selectItem(t)},convertCurvePointToSimple(){"editPath"===this.state&&this.states[this.state].convertSelectedPointsToSimple()},convertCurvePointToBezier(){"editPath"===this.state&&this.states[this.state].convertSelectedPointsToBezier()},closeConnectorProposedDestination(){nh.Z.disableProposeConnectorDestinationItems(this.$store)},onConnectorDestinationItemSelected(e){"connecting"===this.state&&this.states[this.state].submitConnectorDestinationItem(e)},clearStatusMessage(){this.$store.dispatch("clearStatusMessage")},switchToViewMode(e){this.hideSidePanelRight(),this.animationRegistry.stopAllAnimations(),this.interactiveSchemeContainer=new Nd.ZP(Uc.Z.clone(this.schemeContainer.scheme),this.editorId,"view",this.$store.state.apiClient,{onSchemeChangeCommitted:e=>mh.Z.schemeChangeCommitted.$emit(this.editorId,e)}),this.interactiveSchemeContainer.screenTransform=e||Uc.Z.clone(this.schemeContainer.screenTransform);const t=this.schemeContainer.filterNonHUDItems(this.schemeContainer.getItems()),i=(0,fh.f0)(t,(e=>"dummy"===e.shape&&e.shapeProps.screenBounds)),n=(0,gh.av)(i?[i]:t);this.interactiveSchemeContainer.screenSettings.boundingBox=n,this.animationRegistry.enableAnimations(),this.switchStateInteract()},switchToEditMode(e){this.userEventBus.clear(),this.animationRecorder&&this.stopAnimationRecording(),this.itemTooltip.shown=!1,e?this.schemeContainer.screenTransform=e:this.interactiveSchemeContainer&&(this.schemeContainer.screenTransform=Uc.Z.clone(this.interactiveSchemeContainer.screenTransform)),this.interactiveSchemeContainer=null,this.animationRegistry.stopAllAnimations(),this.switchStateDragItem(),0===this.sidePanelRightWidth&&(this.sidePanelRightWidth=zh.Z.clamp(this.sidePanelRightWidthLastUsed,0,Math.floor(window.innerWidth/2-20)))},onSvgSizeUpdated({width:e,height:t}){this.interactiveSchemeContainer&&(this.interactiveSchemeContainer.screenSettings.width=e,this.interactiveSchemeContainer.screenSettings.height=t)},onAnimatiorEditorOpened(e){this.currentAnimatorFramePlayer=e},closeAnimatorEditor(){this.currentAnimatorFramePlayer=null},onItemRightClick(e,t,i){const n=this.x_(t),r=this.y_(i),s=this.schemeContainer.editBox&&1===this.schemeContainer.editBox.items.length||!this.schemeContainer.editBox;let o=[{name:"Bring to Front",clicked:()=>{this.bringSelectedItemsToFront()}},{name:"Bring to Back",clicked:()=>{this.bringSelectedItemsToBack()}},{name:"Add link",iconClass:"fas fa-link",clicked:()=>{this.onClickedAddItemLink(e)}}];if(!this.offline&&s&&("component"===e.shape&&"external"===e.shapeProps.kind?o.push({name:"Create external diagram for this component...",iconClass:"far fa-file",clicked:()=>{this.startCreatingExternalComponentForItem(e)}}):o.push({name:"Create diagram for this element...",iconClass:"far fa-file",clicked:()=>{this.startCreatingChildSchemeForItem(e)}})),o=o.concat([{name:"Copy",iconsClass:"fas fa-copy",clicked:()=>{this.copySelectedItems(e)}},{name:"Copy item style",clicked:()=>{this.copySelectedItemStyle(e)}}]),s&&o.push({name:"Paste into",clicked:()=>{this.pasteItemsFromClipboardInto(e)}}),this.$store.state.copiedStyleItem&&o.push({name:"Apply copied item style",clicked:()=>{this.applyCopiedItemStyle(e)}}),s){const t=Id.Z.find(e.shape),i=Id.Z.getShapeArgs(t);if("image"!==e.shape&&i.hasOwnProperty("fill")&&"advanced-color"===i.fill.type&&"image"===e.shapeProps.fill.type&&o.push({name:"Edit fill image box",iconClass:"fa-regular fa-image",clicked:()=>this.startImageBoxEdit(e)}),t.editorProps&&t.editorProps.contextMenu){const i=(0,gh.N5)(n,r,e);o=o.concat(this.convertEditorPropsContextMenuOptions(e,t.editorProps.contextMenu(i.x,i.y,e)))}o.push({name:"Create component from this item",clicked:()=>{this.createComponentFromItem(e)}}),"image"===e.shape&&o.push({name:"Crop image",iconClass:"fas fa-crop",clicked:()=>this.startCroppingImage(e)})}else{let e=!0;for(let t=0;t<this.schemeContainer.editBox.items.length&&e;t++)e="path"===this.schemeContainer.editBox.items[t].shape;e&&o.push({name:"Merge paths",clicked:()=>this.mergePaths(this.schemeContainer.editBox.items)})}o=o.concat([{name:"Delete",iconClass:"fas fa-trash",clicked:()=>{this.deleteSelectedItems()}},{name:"Surround items",clicked:()=>{this.surroundSelectedItems()}},{name:"Export",subOptions:[{name:"Export as SVG ...",iconClass:"fas fa-file-export",clicked:()=>{this.exportSelectedItemsAsSVG()}},{name:"Export as PNG ...",iconClass:"fas fa-file-export",clicked:()=>{this.exportSelectedItemsAsPNG()}}].concat(s?[{name:"Export as template ...",iconClass:"fa-solid fa-object-group",clicked:()=>{this.exportSelectedItemsAsTemplate(e)}}]:[]).concat(s&&"ext:group:shape_designer"===e.shape?[{name:"Export Shape Group ...",iconClass:"fa-solid fa-shapes",clicked:()=>{this.openExportAllShapesModal(e)}}]:[])}]).concat(s&&"ext:container:shape_designer"===e.shape?[{name:"Test shape",iconClass:"fa-solid fa-flask",clicked:()=>{this.testUserDesignedShape(e)}}]:[]);let a=[e];this.schemeContainer.editBox&&(a=this.schemeContainer.editBox.items);const l=[{name:"Horizontally in parent",clicked:()=>this.schemeContainer.alignItemsHorizontallyInParent(a)},{name:"Vertically in parent",clicked:()=>this.schemeContainer.alignItemsVerticallyInParent(a)},{name:"Centered in parent",clicked:()=>this.schemeContainer.alignItemsCenteredInParent(a)}];a.length>1&&(l.push({name:"All items horizontally",clicked:()=>this.schemeContainer.alignItemsHorizontally(a)}),l.push({name:"All items vertically",clicked:()=>this.schemeContainer.alignItemsVertically(a)})),o.push({name:"Align",subOptions:l}),s&&o.push({name:"Events",subOptions:[{name:"Init",clicked:()=>{this.addItemBehaviorEvent(e,"init")}},{name:"Clicked",clicked:()=>{this.addItemBehaviorEvent(e,"clicked")}},{name:"Mouse In",clicked:()=>{this.addItemBehaviorEvent(e,"mousein")}},{name:"Mouse Out",clicked:()=>{this.addItemBehaviorEvent(e,"mouseout")}}]}),"path"!==e.shape||e.locked||o.push({name:"Edit Path",clicked:()=>{this.onEditPathRequested(e)}}),o=o.concat(this.generateCustomContextMenuOptions(this.schemeContainer.editBox.items)),this.$emit("context-menu-requested",t,i,o)},generateCustomContextMenuOptions(e){return this.contextMenuExtraProvider&&this.contextMenuExtraProvider.provide?this.contextMenuExtraProvider.provide(e):[]},convertEditorPropsContextMenuOptions(e,t){return t.forEach((t=>{t.clicked&&(t.clicked=this.createEditorPropsMenuWrapperFunction(e,t.clicked)),t.subOptions&&this.convertEditorPropsContextMenuOptions(e,t.subOptions)})),t},createEditorPropsMenuWrapperFunction(e,t){return()=>{t()&&(mh.Z.item.changed.specific.$emit(this.editorId,e.id),mh.Z.schemeChangeCommitted.$emit(this.editorId),this.schemeContainer.updateEditBox())}},onVoidRightClicked(e,t){"edit"===this.mode&&this.onContextMenuRequested(e,t,[{name:"Paste",clicked:()=>this.pasteItemsFromClipboardAt(e,t)},{name:"Select all",clicked:()=>this.schemeContainer.selectAllItems()}])},onContextMenuRequested(e,t,i){const n=document.getElementById(`svg-plot-${this.editorId}`).getBoundingClientRect();this.$emit("context-menu-requested",e+n.left+5,t+n.top+5,i)},addItemBehaviorEvent(e,t){find(e.behavior.events,(e=>e.event===t))||e.behavior.events.push({id:jl().generate(),event:t,actions:[]}),mh.Z.behaviorPanel.requested.$emit(this.editorId)},mergePaths(e){const t=e[0];e.shift(),function(e,t){t.sort(((e,t)=>e.meta.ancestorIds.length-t.meta.ancestorIds.length)),Lv(e);for(let i=0;i<t.length;i++)Lv(t[i]),t[i].shapeProps.paths.forEach((n=>{const r={id:jl().generate(),pos:"relative",closed:n.closed,points:[]};n.points.forEach((n=>{const s=(0,lu.oJ)(n,t[i].area.w,t[i].area.h),o=(0,gh.ht)(s.x,s.y,t[i],e);if(o.t=s.t,"A"===o.t&&(o.h=s.h),s.hasOwnProperty("x1")){const n=(0,gh.ht)(s.x+s.x1,s.y+s.y1,t[i],e);o.x1=n.x-o.x,o.y1=n.y-o.y}if(s.hasOwnProperty("x2")){const n=(0,gh.ht)(s.x+s.x2,s.y+s.y2,t[i],e);o.x2=n.x-o.x,o.y2=n.y-o.y}r.points.push(Av(Av({},(0,lu.Vk)(o,e.area.w,e.area.h)),{},{id:jl().generate()}))})),e.shapeProps.paths.push(r)}));Bv(e)}(t,e),this.schemeContainer.readjustItem(t.id,!1,By),this.schemeContainer.deleteItems(e),this.schemeContainer.selectItem(t),mh.Z.item.changed.specific.$emit(this.editorId,t.id),mh.Z.schemeChangeCommitted.$emit(this.editorId)},surroundSelectedItems(){const e=this.schemeContainer.editBox;if(null!==e&&e.items.length>0){const t=this.$store.state.itemSurround.padding,i=Uc.Z.clone(fh.XZ);i.name="Group",i.area={x:e.area.x-t,y:e.area.y-t,w:e.area.w+2*t,h:e.area.h+2*t,r:e.area.r},i.shape="uml_group",i.shapeProps={strokePattern:Sd.Z.SOLID,strokeColor:"rgba(160,160,160,1.0)",strokeSize:3,fill:{type:"none"},pos:"top",align:"middle"},i.textSlots={title:{halign:"center",valign:"middle",color:"#969696",text:"Group",fontSize:16,bold:!0}},this.schemeContainer.addItem(i),this.schemeContainer.remountItemBeforeOtherItem(i.id,e.items[0].id);const n={};(0,Fe.Ed)(e.items,(e=>{let t=!0;if(e.meta&&e.meta.ancestorIds)for(let i=0;i<e.meta.ancestorIds.length&&t;i++)n[e.meta.ancestorIds[i]]&&(t=!1);t&&(i.childItems&&i.childItems.length>0?this.schemeContainer.remountItemAfterOtherItem(e.id,i.childItems[i.childItems.length-1].id):this.schemeContainer.remountItemInsideOtherItem(e.id,i.id),n[e.id]=1)})),this.schemeContainer.selectItem(i),mh.Z.itemSurround.created.$emit(this.editorId,i,e.area,t)}},exportSelectedItemsAsTemplate(e){this.exportTemplateModal.item=e,this.exportTemplateModal.shown=!0},exportSelectedItemsAsSVG(){this.exportSelectedItemsAsPicture("svg")},exportSelectedItemsAsPNG(){this.exportSelectedItemsAsPicture("png")},exportSelectedItemsAsPicture(e){const t=this.collectSelectedItems();0!==t.length&&this.$emit("export-picture-requested",t,e)},collectSelectedItems(){if(!this.schemeContainer.editBox)return[];const e=this.schemeContainer.editBox;if(0===e.items.length)return[];const t=[],i={};return(0,Fe.Ed)(e.items,(e=>{let n=!0;for(let t=0;t<e.meta.ancestorIds.length&&n;t++)i[e.meta.ancestorIds[t]]&&(n=!1);n&&(t.push(e),i[e.id]=1)})),t},deleteSelectedItems(){this.schemeContainer.deleteSelectedItems(),mh.Z.schemeChangeCommitted.$emit(this.editorId)},itemCreationDraggedToSvgEditor(e,t,i,n){const r=this.mouseCoordsFromPageCoords(t,i),s=this.toLocalPoint(r.x,r.y);e.area.x=s.x,e.area.y=s.y,n||(e.area.w=e.area.w/Math.max(1e-7,this.schemeContainer.screenTransform.scale),e.area.h=e.area.h/Math.max(1e-7,this.schemeContainer.screenTransform.scale));const o=e.area.w,a=e.area.h;if(this.schemeContainer.addItem(e),this.$store.state.autoRemount){const t=this.schemeContainer.findItemSuitableForParent(e);t&&this.schemeContainer.remountItemInsideOtherItemAtTheBottom(e.id,t.id)}const l=(0,gh.pD)(e);e.area.w=o/Math.max(1e-7,l.x),e.area.h=a/Math.max(1e-7,l.y),this.schemeContainer.selectItem(e),this.schemeContainer.readjustItem(e.id,!1,By),mh.Z.schemeChangeCommitted.$emit(this.editorId),n&&e.args&&e.args.templateRef&&(this.currentTab="template")},toLocalPoint(e,t){return{x:(e-this.schemeContainer.screenTransform.x)/this.schemeContainer.screenTransform.scale,y:(t-this.schemeContainer.screenTransform.y)/this.schemeContainer.screenTransform.scale}},mouseWheel(e,t,i,n,r){this.active&&this.states[this.state].mouseWheel(e,t,i,n,r)},mouseDown(e,t,i,n,r,s){this.mouseDownId++,this.active&&this.states[this.state].mouseDown(e,t,i,n,r,s)},mouseUp(e,t,i,n,r,s){this.active&&this.states[this.state].mouseUp(e,t,i,n,r,s)},mouseMove(e,t,i,n,r,s){this.active&&(this.editBoxUseFill||s.ctrlKey||s.metaKey||s.shiftKey||(this.editBoxUseFill=!0),this.states[this.state].mouseMove(e,t,i,n,r,s),"dragItem"===this.state&&(this.cursorX=e,this.cursorY=t))},mouseDoubleClick(e,t,i,n,r,s){this.active&&this.states[this.state].mouseDoubleClick(e,t,i,n,r,s)},mouseCoordsFromPageCoords(e,t){var i=document.getElementById(`svg-plot-${this.editorId}`).getBoundingClientRect(),n=e-i.left,r=t-i.top;return{x:Math.round(n),y:Math.round(r)}},updateFloatingHelperPanel(){if(!this.schemeContainer)return;if("dragItem"!==this.state||!this.states.dragItem.shouldAllowFloatingHelperPanel()||1!==this.schemeContainer.selectedItems.length||this.schemeContainer.selectedConnectorPoints.length>0||this.inPlaceTextEditor.shown)return void this.resetFloatingHelperPanel();const e=this.schemeContainer.selectedItems[0],t=[(0,gh.rs)(0,0,e),(0,gh.rs)(e.area.w,0,e),(0,gh.rs)(e.area.w,e.area.h,e),(0,gh.rs)(0,e.area.h,e)],i={x:t[0].x,y:t[0].y},n={x:t[0].x,y:t[0].y};t.forEach((e=>{i.x=Math.min(i.x,e.x),i.y=Math.min(i.y,e.y),n.x=Math.max(n.x,e.x),n.y=Math.max(n.y,e.y)}));const r={x:this._x(i.x),y:this._y(i.y)-115},s={x:this._x(n.x),y:this._y(n.y)+60},o=(r.x+s.x)/2,a=document.getElementById(`svg-plot-${this.editorId}`).getBoundingClientRect();if(o<0||o>a.width)return void this.resetFloatingHelperPanel();let l=r.y;l<5&&(l=s.y),l<5||l>a.height-40?this.resetFloatingHelperPanel():(this.floatingHelperPanel.x=o,this.floatingHelperPanel.y=l,this.floatingHelperPanel.item=e,this.floatingHelperPanel.shown=!0)},resetFloatingHelperPanel(){this.floatingHelperPanel.shown&&(this.floatingHelperPanel.shown=!1,this.floatingHelperPanel.item=null)},onBottomPanelMouseDown(e){(0,jh.E)(e).onDrag(((e,t,i)=>{this.bottomPanelHeight=zh.Z.clamp(window.innerHeight-i,100,window.innerHeight-100)})).build()},openExportAllShapesModal(e){this.exportShapeModal.shapeGroupItem=e,this.exportShapeModal.shown=!0},testUserDesignedShape(e){const t=Uf(e),i="test-shape-"+e.id;Id.Z.registerTemplatedShape(i,t.shapeConfig);const n=Oy(Oy({},Uc.Z.clone(fh.XZ)),{},{name:"Test shape: "+e.name,shape:i,shapeProps:{}});(0,xd.z9)(n),this.switchStateCreateItem(n)},hideSidePanelRight(){this.sidePanelRightWidth=0},showSidePanelRight(){this.sidePanelRightWidth=this.sidePanelRightWidthLastUsed},onRightSidePanelExpanderMouseDown(e){this.onSidePanelExpanderMouseDown(e,this.$refs.sidePanelRight,1,{onValue:e=>{this.sidePanelRightWidth=zh.Z.clamp(e,0,Math.floor(window.innerWidth/2-20)),this.sidePanelRightWidth>0&&(this.sidePanelRightWidthLastUsed=this.sidePanelRightWidth)},onToggle:()=>{this.sidePanelRightWidth>0?this.sidePanelRightWidth=0:this.sidePanelRightWidth=zh.Z.clamp(this.sidePanelRightWidthLastUsed,0,Math.floor(window.innerWidth/2-20))}})},onLeftSidePanelExpanderMouseDown(e){this.onSidePanelExpanderMouseDown(e,this.$refs.sidePanelLeft,-1,{onValue:e=>{this.sidePanelLeftWidth=zh.Z.clamp(e,0,Math.floor(window.innerWidth/2-20)),this.sidePanelLeftWidth>0&&(this.sidePanelLeftWidthLastUsed=this.sidePanelLeftWidth)},onToggle:()=>{this.sidePanelLeftWidth>0?this.sidePanelLeftWidth=0:this.sidePanelLeftWidth=zh.Z.clamp(this.sidePanelLeftWidthLastUsed,0,Math.floor(window.innerWidth/2-20))}})},onSidePanelExpanderMouseDown(e,t,i,n){const r=t.getBoundingClientRect().width;(0,jh.E)(e).onDrag(((e,t,s,o,a)=>{const l=t-o,c=zh.Z.clamp(r-l*i,0,window.innerWidth/2.5);c<80?n.onValue(0):n.onValue(c)})).onSimpleClick((()=>{n.onToggle()})).build()},onItemsHighlighted(e){this.highlightedItems=e},onFrameAnimatorRectordingStateUpdated(e){this.isRecording=e,e?this.states.dragItem.enableRecording():this.states.dragItem.disableRecording()},switchSelectedComponentKind(e){this.selectedItem&&"component"===this.selectedItem.shape&&(this.selectedItem.shapeProps.kind=e,mh.Z.item.changed.specific.$emit(this.editorId,this.selectedItem.id,"shapeProps.kind"),mh.Z.schemeChangeCommitted.$emit(this.editorId,`items.${this.selectedItem.id}.shapeProps.kind`),this.updateSelectedComponent(),this.$forceUpdate())},setSelectedComponentReferenceItem(e){this.selectedItem&&"component"===this.selectedItem.shape&&(this.selectedItem.shapeProps.referenceItem=e,mh.Z.item.changed.specific.$emit(this.editorId,this.selectedItem.id,"shapeProps.referenceItem"),mh.Z.schemeChangeCommitted.$emit(this.editorId,`items.${this.selectedItem.id}.shapeProps.referenceItem`),this.updateSelectedComponent(),this.$forceUpdate())},updateSelectedComponent(){this.selectedItem&&"component"===this.selectedItem.shape&&("embedded"!==this.selectedItem.shapeProps.kind&&this.selectedItem._childItems&&(this.selectedItem._childItems=[]),this.schemeContainer.reindexSpecifiedItems([this.selectedItem]),this.schemeContainer.reindexItems())},setCurveEditItem(e){this.curveEditing.item=e,this.curveEditing.paths.length=0;const t=[];if(e){e.shapeProps.paths.forEach(((i,n)=>{const r=[];i.points.forEach(((t,i)=>{const n=(0,lu.oJ)(t,e.area.w,e.area.h);n.id=i,n.selected=!1,Ny(n),r.push(n)})),t.push({id:n,points:r})}));const i=Ry(e);t.forEach(((e,t)=>{this.curveEditing.paths[t]={id:e.id,points:e.points.map(i)}}))}},updateCurveEditPoint(e,t,i,n){if(!Zy(t,i,this.curveEditing))return;const r=Ry(e)((0,lu.oJ)(n,e.area.w,e.area.h));(0,Fe.Ed)(r,((e,n)=>{this.curveEditing.paths[t].points[i][n]=e,Ny(this.curveEditing.paths[t].points[i])})),1===this.curveEditing.selectedPoints.length&&this.curveEditing.selectedPoints[0].pathId===t&&this.curveEditing.selectedPoints[0].pointId===i&&(this.curveEditing.selectedPoints[0]=Oy(Oy({},r),{},{pathId:t,pointId:i})),this.$forceUpdate()},resetCurveEditPointSelection(){this.curveEditing.selectedPoints=[],this.curveEditing.paths.forEach((e=>{e.points.forEach((e=>{e.selected=!1}))})),this.pathPointsUpdateKey++},selectCurveEditPoint(e,t,i){Zy(e,t,this.curveEditing)&&(i?this.curveEditing.paths[e].points[t].selected=!0:this.curveEditing.paths.forEach(((i,n)=>{i.points.forEach(((i,r)=>{i.selected=n===e&&r===t}))})),this.updateSelectedCurveEditPoints())},updateSelectedCurveEditPoints(){const e=[];this.curveEditing.paths.forEach(((t,i)=>{t.points.forEach(((t,n)=>{t.selected&&e.push(Oy(Oy({},t),{},{pathId:i,pointId:n}))}))})),this.curveEditing.selectedPoints=e},onCurveEditingPointInput(e,t){const i=parseFloat(e);if(isNaN(i)||1!==this.curveEditing.selectedPoints.length||!this.curveEditing.item)return;const{pathId:n,pointId:r}=this.curveEditing.selectedPoints[0],s=this.curveEditing.item.shapeProps.paths[n].points[r];let{x:o,y:a}=this.curveEditing.selectedPoints[0];const l={x:o,y:a};l[t]=i;const c=(0,gh.N5)(l.x,l.y,this.curveEditing.item),h=(0,lu.Vk)(c,this.curveEditing.item.area.w,this.curveEditing.item.area.h);s.x=h.x,s.y=h.y,mh.Z.item.changed.specific.$emit(this.editorId,this.curveEditing.item.id,"shapeProps.paths"),mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${this.curveEditing.item.id}.shapeProps.paths.points`),this.updateCurveEditPoint(this.curveEditing.item,n,r,s)},onCurveEditingArcHeightInput(e){const t=parseFloat(e);if(isNaN(t)||1!==this.curveEditing.selectedPoints.length||"A"!==this.curveEditing.selectedPoints[0].t||!this.curveEditing.item)return;const{pathId:i,pointId:n}=this.curveEditing.selectedPoints[0],r=this.curveEditing.item.shapeProps.paths[i].points[n];r.h=t,mh.Z.item.changed.specific.$emit(this.editorId,this.curveEditing.item.id,"shapeProps.paths"),mh.Z.schemeChangeCommitted.$emit(this.editorId,`item.${this.curveEditing.item.id}.shapeProps.paths.points`),this.updateCurveEditPoint(this.curveEditing.item,i,n,r)},prettifyAxisValue:(e,t)=>Ly(e,t),onDiagramPickedForSelectedComponent(e){this.selectedItem&&"component"===this.selectedItem.shape&&(this.selectedItem.shapeProps.schemeId=e.id,this.$forceUpdate())},onEditBoxCustomControlClicked(e){this.schemeContainer.reindexSpecifiedItems([e]),this.schemeContainer.reindexItems(),this.schemeContainer.updateEditBox()},onWindowResize(){this.sidePanelRightWidth+20>window.innerWidth/2&&(this.sidePanelRightWidth=Math.floor(window.innerWidth/2-20)),this.sidePanelLeftWidth+20>window.innerWidth/2&&(this.sidePanelLeftWidth=Math.floor(window.innerWidth/2-20))},startStateLoop(){this.isStateLooping=!0,this.stateLoop(0)},stateLoop(e){const t=performance.now();this.states[this.state].loop(Math.min(100,e)),this.isStateLooping&&window.requestAnimationFrame((()=>{this.stateLoop(performance.now()-t)}))},stopStateLoop(){this.isStateLooping=!1},rebaseScheme(e){(function(e,t){gu.forEach((i=>{!function(e,t,i){const n=e.hasOwnProperty(i);if(t.hasOwnProperty(i))if(n){const n=JSON.stringify(e[i]),r=JSON.stringify(t[i]);n!==r&&(e[i]=JSON.parse(r))}else e[i]=t[i];else n&&delete e[i]}(e,t,i)}));const i=new Map;(0,fh.Hp)(t.items,(e=>{const t=i.get(e.id);t&&(e.meta=Uc.Z.clone(t))})),e.items=Uc.Z.clone(t.items)})(this.schemeContainer.scheme,e),this.schemeContainer.reindexItems(),"editPath"===this.state&&this.restoreCurveEditing(),this.schemeContainer.rebaseScheme(),this.svgEditorRevision++},changeTab(e){this.currentTab=e,this.saveSchemeSettings()},onEditBoxFillDisabled(){this.editBoxUseFill=!1},onEditBoxFillEnabled(){this.editBoxUseFill=!0},onCustomShapeEvent(e,t,...i){"view"===this.mode&&this.userEventBus.emitItemEvent(e,t,...i)},onAnimationExportRequested({duration:e,delay:t,fps:i,width:n,height:r,boundsElement:s}){this.exportAnimationModalShown=!1,this.animationRecorderIsExporting=!1,this.$emit("mode-change-requested","view"),this.$nextTick((()=>{this.animationRecorder=function(e,t,i,n,r,s,o){return new wy(e,t,i,n,r,s,o)}(this.editorId,this.interactiveSchemeContainer,s,1e3*e,i,n,r),this.animationRecorder.setDelay(1e3*t),this.animationRecorder.setBackgroundColor(this.schemeContainer.scheme.style.backgroundColor),this.animationRecorder.onFinish((()=>{this.animationRecorder.export(this.schemeContainer.scheme.name),this.animationRecorder=null})),this.animationRecorder.start()}))},stopAnimationRecording(){if(!this.animationRecorder)return;this.animationRecorder.stop();const e=this.animationRecorder;this.animationRecorder=null,this.animationRecorderIsExporting=!0,this.$nextTick((()=>{e.export(this.schemeContainer.scheme.name).then((()=>{this.animationRecorderIsExporting=!1})).catch((e=>{console.error(e),nh.Z.addErrorSystemMessage(this.$store,"Something went wrong, could not process animation","animation-export-error")}))}))},onItemDetailsMouseOver(e,t,i,n,r){this.itemDetailsMouseOutTimer&&(clearTimeout(this.itemDetailsMouseOutTimer),this.itemDetailsMouseOutTimer=null),this.itemDetails.item=e,this.itemDetails.x=n;const s=document.getElementById(`svg-plot-${this.editorId}`);let o=0;s&&(o=s.getBoundingClientRect().y),this.itemDetails.y=Math.max(0,r+o-5)},onItemDetailsMouseOut(e,t,i,n,r){this.onItemDetailsTooltipMouseLeave()},onItemDetailsTooltipMouseOver(){this.itemDetailsMouseOutTimer&&(clearTimeout(this.itemDetailsMouseOutTimer),this.itemDetailsMouseOutTimer=null)},onItemDetailsTooltipMouseLeave(){this.itemDetailsMouseOutTimer&&clearTimeout(this.itemDetailsMouseOutTimer),this.itemDetailsMouseOutTimer=setTimeout((()=>{this.itemDetails.item=null}),1e3)},closeStarterProposalModal(){this.sidePanelRightWidth=this.sidePanelRightWidthLastUsed,this.sidePanelLeftWidth=this.sidePanelLeftWidthLastUsed,this.starterProposalModalShown=!1},onStarterProposalSelected(e){this.closeStarterProposalModal();const t=new Nd.ZP({name:"",items:e},"temp-editor","edit",this.schemeContainer.apiClient);t.reindexItems(),this.schemeContainer.scheme.items=t.cloneItems(t.scheme.items),this.schemeContainer.reindexItems();const i=(0,gh.av)(this.schemeContainer.getItems()),n=document.getElementById(`svg-plot-${this.editorId}`);if(this.schemeContainer.screenTransform.scale=1,n){const e=n.getBoundingClientRect();this.schemeContainer.screenTransform.x=e.width/2-(i.x+i.w/2),this.schemeContainer.screenTransform.y=e.height/2-(i.y+i.h/2)}else this.schemeContainer.screenTransform.x=i.x+i.w/2,this.schemeContainer.screenTransform.y=i.y+i.h/2;mh.Z.schemeChangeCommitted.$emit(this.editorId)},_x(e){return e*this.schemeContainer.screenTransform.scale+this.schemeContainer.screenTransform.x},_y(e){return e*this.schemeContainer.screenTransform.scale+this.schemeContainer.screenTransform.y},_z(e){return e*this.schemeContainer.screenTransform.scale},x_(e){return(e-this.schemeContainer.screenTransform.x)/this.schemeContainer.screenTransform.scale},y_(e){return(e-this.schemeContainer.screenTransform.y)/this.schemeContainer.screenTransform.scale},z_(e){return e/this.schemeContainer.screenTransform.scale}},filters:{prettifyAxisValue:(e,t)=>Ly(e,t)},watch:{mode(e){"view"===e?this.switchToViewMode():this.switchToEditMode()},state(e){this.$emit("editor-state-changed",e)},schemeReloadKey(e){this.reloadSchemeContainer()},historyUndoable(e){this.historyState.undoable=e},historyRedoable(e){this.historyState.redoable=e}},computed:{finalMenuOptions(){return this.menuOptions.concat({name:"Export animation",iconClass:"fas fa-file-export",callback:()=>{this.exportAnimationModalShown=!0}})},currentSchemeContainer(){return"view"===this.mode?this.interactiveSchemeContainer:this.schemeContainer},connectorProposedDestination(){return this.$store.getters.connectorProposedDestination},statusMessage(){return this.$store.getters.statusMessage},apiClient(){return this.$store.getters.apiClient},editorSubStateName(){return this.$store.getters.editorSubStateName},assetsPath(){return this.$store.getters.assetsPath},selectedItemTemplateArgs(){if(1!==this.schemeContainer.selectedItems.length)return null;const e=this.schemeContainer.selectedItems[0];return e.args&&e.args.templateArgs?e.args.templateArgs:null}}},Hy=Uy,qy=(0,Re.Z)(Hy,Fh,[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",[i("span",{staticClass:"tab active"},[e._v("Text")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",[i("span",{staticClass:"tab active"},[e._v("Draw")])])}],!1,null,null,null).exports,Wy={type:"object",patching:["modify"],fields:{name:{type:"string",patching:["patch-text","replace"]},description:{type:"string",patching:["patch-text"]},tags:{type:"array",of:"string",patching:["patch-set"]},style:{type:"object",patching:["modify"],fields:{backgroundColor:{type:"string",patching:["replace"]},gridColor:{type:"string",patching:["replace"]},boundaryBoxColor:{type:"string",patching:["replace"]},controlPointsColor:{type:"string",patching:["replace"]},itemMarkerColor:{type:"ignored"},itemMarkerToggled:{type:"ignored"}}},settings:{type:"object",patching:["modify"],fields:{screen:{type:"object",patching:["modify"],fields:{draggable:{type:"boolean",patching:["replace"]}}}}},items:{type:"array",of:"object",patching:["patch-id-array"],childrenField:"childItems",fields:{id:{type:"string"},meta:{type:"ignored"},_childItems:{type:"ignored"},name:{type:"string",patching:["patch-text","replace"]},description:{type:"string",patching:["patch-text"]},opacity:{type:"number",min:0,max:100,patching:["replace"]},selfOpacity:{type:"number",min:0,max:100,patching:["replace"]},locked:{type:"boolean",patching:["replace"]},mount:{type:"boolean",patching:["replace"]},visible:{type:"boolean",patching:["replace"]},blendMode:{type:"string",patching:["replace"]},cursor:{type:"string",patching:["replace"]},clip:{type:"boolean",patching:["replace"]},interactionMode:{type:"string",patching:["replace"]},shape:{type:"string",patching:["replace"]},tooltipBackground:{type:"string",patching:["replace"]},tooltipColor:{type:"string",patching:["replace"]},tags:{type:"array",of:"string",patching:["patch-set"]},args:{type:"map",of:"any",patching:["patch-map","replace"],fields:{"*":{patching:["replace","delete"]}}},area:{type:"object",patching:["modify"],fields:{x:{type:"number",patching:["replace"]},y:{type:"number",patching:["replace"]},w:{type:"number",patching:["replace"]},h:{type:"number",patching:["replace"]},r:{type:"number",patching:["replace"]},px:{type:"number",patching:["replace"]},py:{type:"number",patching:["replace"]},sx:{type:"number",patching:["replace"]},sy:{type:"number",patching:["replace"]}}},links:{type:"array",of:"object",patching:["patch-array","replace"],fields:{title:{type:"string",patching:["replace"]},url:{type:"string",patching:["replace"]},type:{type:"string",patching:["replace"]}}},textSlots:{type:"map",of:"object",patching:["patch-map"],fields:{}},behavior:{type:"object",patching:["modify"],fields:{dragging:{type:"string",patching:["replace"]},dropTo:{type:"string",patching:["replace"]},dragPath:{type:"string",patching:["replace"]},dragPathAlign:{type:"boolean",patching:["replace"]},dragPathRotation:{type:"number",patching:["replace"]},events:{type:"array",of:"object",patching:["patch-id-array","replace"],fields:{id:{type:"string"},event:{type:"string",patching:["replace"]},actions:{type:"array",of:"object",patching:["patch-id-array","replace"],fields:{id:{type:"string"},element:{type:"string",patching:["replace"]},method:{type:"string",patching:["replace"]},on:{type:"boolean",patching:["replace"]},args:{type:"conditional",contidionalParentField:"method",conditions:[]}}}}}}},shapeProps:{type:"conditional",contidionalParentField:"shape",conditions:[]},effects:{type:"array",of:"object",patching:["patch-id-array","replace"],fields:{id:{type:"string"},effect:{type:"string",patching:["replace"]},name:{type:"string",patching:["patch-text","replace"]},args:{type:"conditional",contidionalParentField:"effect",conditions:[]}}},autoLayout:{type:"object",patching:["modify","replace"],fields:{on:{type:"boolean",patching:["replace"]},rules:{type:"map",of:"any",patching:["patch-map"],fields:{"*":{type:"any",patching:["replace"]}}}}}}}}};function Vy(){const e=[];return(0,Fe.Ed)(ag.Z,((t,i)=>{const n={};(0,Fe.Ed)(t.args,((e,t)=>{n[t]=Ky(e)})),e.push({on:i,type:"object",patching:["modify","delete"],fields:n})})),e}const Gy={string:{type:"string",patching:["replace"]},text:{type:"string",patching:["replace"]},image:{type:"string",patching:["replace"]},color:{type:"string",patching:["replace"]},object:{type:"object",patching:["replace"],fields:{"*":{type:"any"}}},"advanced-color":{type:"object",patching:["replace"],fields:{"*":{type:"any"}}},boolean:{type:"boolean",patching:["replace"]},number:{type:"number",patching:["replace"]},choice:{type:"string",patching:["replace"]},"stroke-pattern":{type:"string",patching:["replace"]},"path-cap":{type:"string",patching:["replace"]},"scheme-ref":{type:"string",patching:["replace"]},"color-matrix":{type:"array",of:"array",patching:["replace"]},element:{type:"string",patching:["replace"]},"crop-area":{type:"object",patching:["modify"],fields:{x:{type:"number",patching:["replace"]},y:{type:"number",patching:["replace"]},w:{type:"number",patching:["replace"]},h:{type:"number",patching:["replace"]}}},custom:{type:"any",patching:["replace"]}};function Ky(e){let t={type:null,patching:["replace"]};const i=Gy[e.type];return i&&(t.type=i.type,t.patching=[].concat(i.patching).concat(["delete"]),i.fields&&(t.fields=i.fields)),"number"===e.type&&e.hasOwnProperty("min")&&(t.min=e.min),"number"===e.type&&e.hasOwnProperty("max")&&(t.max=e.max),"choice"===e.type&&e.options&&(t.validation="choice",t.validValues=e.options),"stroke-pattern"===e.type&&(t.validation="choice",t.validValues=Sd.Z.patterns),"path-cap"===e.type&&(t.validation="choice",t.validValues=(0,rp.j)()),"path-array"===e.type&&(t={type:"array",of:"object",patching:["patch-id-array","replace","delete"],fields:{id:{type:"string"},closed:{type:"boolean",patching:["replace"]},points:{type:"array",of:"object",patching:["patch-array","replace","delete"],fields:{id:{type:"string"},t:{type:"string",patching:["replace"]},x:{type:"number",patching:["replace"]},y:{type:"number",patching:["replace"]},x1:{type:"number",patching:["replace"]},y1:{type:"number",patching:["replace"]},x2:{type:"number",patching:["replace"]},y2:{type:"number",patching:["replace"]},h:{type:"number",patching:["replace"]}}},pos:{type:"string",patching:["replace"]}}}),"path-points"===e.type&&(t={type:"array",of:"object",patching:["patch-array","replace","delete"],fields:{id:{type:"string"},x:{type:"number",patching:["replace"]},y:{type:"number",patching:["replace"]},t:{type:"string",patching:["replace"]},nx:{type:"number",patching:["replace"]},ny:{type:"number",patching:["replace"]},bx:{type:"number",patching:["replace"]},by:{type:"number",patching:["replace"]}}}),"animations"===e.type&&(t={type:"array",of:"object",patching:["patch-id-array","replace","delete"],fields:{id:{type:"string"},kind:{type:"string",patching:["replace"]},itemId:{type:"string",patching:["replace"]},funcId:{type:"string",patching:["replace"]},property:{type:"string",patching:["replace"]},frames:{type:"array",of:"object",patching:["patch-array","replace","delete"],fields:{frame:{type:"number",min:0},kind:{type:"string"},value:{type:"any"}}}}}),"animation-functions"===e.type&&(t={type:"map",of:"object",patching:["patch-map","replace","delete"],fields:{functionId:{type:"string",patching:["replace"]},args:{type:"conditional",contidionalParentField:"functionId",conditions:Vy()}}}),"animation-sections"===e.type&&(t={type:"array",of:"object",patching:["patch-array","replace","delete"],fields:{frame:{type:"number"},value:{type:"string"},kind:{type:"string"}}}),t}function Jy(e){const t=[];return(0,Fe.Ed)(e,((e,i)=>{const n={};(0,Fe.Ed)(e.args,((e,t)=>{n[t]=Ky(e)})),t.push({on:i,type:"object",patching:["modify","delete"],fields:n})})),t}let Yy=null;function Qy(){if(Yy)return Yy;const e=[{on:null,type:"object",patching:["modify","delete"],fields:{"*":{type:"any",patching:["replace","delete"]}}}];return Id.Z.getShapeIds().forEach((t=>{const i=Id.Z.find(t),n={on:t,type:"object",patching:["modify","delete"],fields:{"*":{type:"any",patching:["replace","delete"]}}};(0,Fe.Ed)(Id.Z.getShapeArgs(i),((e,t)=>{n.fields[t]=Ky(e)})),e.push(n)})),Wy.fields.items.fields.textSlots.fields=function(){const e={text:{type:"string",patching:["patch-text"]}};return fh.eN.forEach((t=>{e[t.field]=Ky(t)})),e}(),Wy.fields.items.fields.shapeProps.conditions=e,Wy.fields.items.fields.effects.fields.args.conditions=Jy(Md()),Wy.fields.items.fields.behavior.fields.events.fields.actions.fields.args.conditions=Jy(zu.Z.main),Yy=Wy,Yy}function Xy(e,t){if(!t.type||"any"===t.type)return!0;const i=typeof e;return"array"===t.type&&Array.isArray(e)?function(e,t){if(!t.of)return!0;let i=!0;const n={type:t.of,fields:t.fields};for(let t=0;t<e.length&&i;t++)i=Xy(e[0],n);return i}(e,t):t.type===i||"map"===t.type&&"object"===i}const ex=4,tx=RegExp(/^\p{L}/,"u");class ix{constructor(e,t,i){this.currentType=t||0,this.currentToken=i||null,this.tokens=e||[],i&&this.tokens.push(i)}process(e,t,i){return 1===this.currentType?this.processUntil(e,t,i,">"):2===this.currentType?this.processUntil(e,t,i,";"):3===this.currentType?this.processWord(e,t,i):this.processSymbol(e,t,i)}processSymbol(e,t,i){return"<"===t?new ix(this.tokens,1,{idx:e,text:t}):"&"===t?new ix(this.tokens,2,{idx:e,text:t}):this.isPartOfWord(t,i)?new ix(this.tokens,3,{idx:e,text:t}):(this.tokens.push({idx:e,text:t}),this)}processUntil(e,t,i,n){return this.currentToken.text+=t,t===n?new ix(this.tokens,ex):this}processWord(e,t,i){return this.isPartOfWord(t,i)?(this.currentToken.text+=t,this):new ix(this.tokens,ex).process(e,t,i)}isPartOfWord(e,t){return t>=48&&t<=57||tx.test(e)}getTokens(){return this.tokens}}function nx(e){let t=new ix([],ex);for(let i=0;i<e.length;i++)t=t.process(i,e.charAt(i),e.charCodeAt(i));return t.getTokens()}function rx(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function sx(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?rx(Object(i),!0).forEach((function(t){ox(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rx(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function ox(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ax{constructor(e,t){this.name=e,this.fieldSchema=t,this.fields=new Map,this.defaultField=null}indexFieldEntry(e,t){const i=new ax(e,t);"*"===e?this.defaultField=i:this.fields.set(e,i),t.fields&&i.indexFieldEntries(t.fields)}indexFieldEntries(e){(0,Fe.Ed)(e,((e,t)=>{this.indexFieldEntry(t,e)}))}findRelevantFieldEntry(e){return 0===e.length||1===e.length&&this.name===e[0]?this.fieldSchema:this.fields.has(e[0])?this.fields.get(e[0]).findRelevantFieldEntry(e.slice(1)):this.defaultField?this.defaultField.findRelevantFieldEntry(e.slice(1)):null}}function lx(e,t,i){cx(e,t,null,i)}function cx(e,t,i,n){(0,Fe.Ed)(e,((e,r)=>{n(e,i,r),t&&e[t]&&cx(e[t],t,e,n)}))}function hx(e,t){return Uc.Z.equals(e,t)}function dx(e,t){const i=new Map;return lx(e,t,((e,t,n)=>{const r=t?t.id:null;i.set(e.id,{item:e,parentId:r,sortOrder:n})})),i}function ux(e,t,i,n){let r=[];const s=new Set;(0,Fe.b0)(e,((e,i)=>{t.hasOwnProperty(i)?s.add(i):r.push({op:"delete",path:n.concat(i)})})),(0,Fe.b0)(t,((e,t)=>s.add(t)));const o=new Map;let a=null;(0,Fe.Ed)(i.fields,((e,t)=>{"*"===t?a=e:o.set(t,e)}));const l=(i,o)=>{if(s.delete(o),!Array.isArray(i.patching)||0===i.patching.length)return;const a=i.patching[0];if("replace"===a||typeof t[o]==typeof e[o]||void 0!==e[o]&&null!==e[o]){if(e.hasOwnProperty(o)&&!t.hasOwnProperty(o))r.push({path:n.concat([o]),op:"delete"});else if("replace"===a)!hx(e[o],t[o])&&Xy(t[o],i)&&r.push({path:n.concat([o]),op:"replace",value:Uc.Z.clone(t[o])});else if("patch-text"===a)hx(e[o],t[o])||r.push({path:n.concat([o]),op:"patch-text",patch:(l=e[o],c=t[o],kx(l,c,!1))});else if("modify"===a&&e[o]&&t[o])r=r.concat(ux(e[o],t[o],i,n.concat([o])));else if("patch-set"===a){const i=function(e,t){const i=[],n=new Set,r=new Set;return(0,Fe.Ed)(e,(e=>n.add(e))),(0,Fe.Ed)(t,(e=>{n.has(e)||i.push({op:"add",value:e}),r.add(e)})),(0,Fe.Ed)(e,(e=>{r.has(e)||i.push({op:"delete",value:e})})),i}(e[o],t[o]);i&&i.length>0&&r.push({path:n.concat([o]),op:"patch-set",changes:i})}else if("patch-id-array"===a){const s=function(e,t,i){e||(e=[]),t||(t=[]);const n=dx(e,i.childrenField),r=dx(t,i.childrenField);let s=[];const o=new Set;var a,l,c;a=e,l=i.childrenField,c=e=>{r.has(e.id)||(s.push({id:e.id,op:"delete"}),o.add(e.id))},(0,Fe.Ed)(a,((e,t)=>{l&&e[l]&&cx(e[l],l,e,c),c(e)}));const h=e=>{const t={};for(let n in e)if(e.hasOwnProperty(n)){let r=!1;r=!(n===i.childrenField||i.fields&&i.fields.hasOwnProperty(n)&&"ignored"===i.fields[n].type),r&&(t[n]=e[n])}return t};r.forEach(((e,t)=>{const i=n.get(t);i?i.parentId!==e.parentId&&s.push({id:t,op:"mount",parentId:e.parentId,sortOrder:e.sortOrder}):s.push({id:t,op:"add",value:h(e.item),parentId:e.parentId,sortOrder:e.sortOrder})}));const d=(e,t,n)=>{t(e,n||null);for(let n=0;n<e.length;n++)i.childrenField&&e[n][i.childrenField]&&d(e[n][i.childrenField],t,e[n].id)};return d(e,((e,n)=>{e.forEach((e=>{if(o.has(e.id))return;const t=r.get(e.id);if(!t)return;const n={type:"object",patching:["modify"],fields:i.fields},a=ux(e,t.item,n,[]);a.length>0&&s.push({id:e.id,op:"modify",changes:a})}));let a=null;if(n){const e=r.get(n);e&&i.childrenField&&(a=e.item[i.childrenField])}else a=t;if(a){const t=function(e,t){const i=e=>{const t=new Map;return e.forEach(((e,i)=>{t.set(e.id,{item:e,sortOrder:i})})),t},n=i(e),r=i(t),s=[];e.forEach((e=>{r.has(e.id)&&s.push(e.id)})),t.forEach(((e,t)=>{n.has(e.id)||s.splice(t,0,e.id)}));const o=[];s.forEach(((e,t)=>{if(!r.has(e)||!n.has(e))return;const i=r.get(e).sortOrder;t!==i&&o.push({id:e,steps:i-t,absSteps:Math.abs(i-t),from:t,to:i})})),o.sort(((e,t)=>e.absSteps===t.absSteps?e.from-t.from:t.absSteps-e.absSteps));const a=[];return o.forEach((e=>{const t=s.indexOf(e.id);if(t<0)return;const i=r.get(e.id);i&&i.sortOrder!==t&&(s.splice(t,1),s.splice(i.sortOrder,0,e.id),a.push({id:e.id,op:"reorder",sortOrder:i.sortOrder}))})),a}(e,a).map((e=>sx(sx({},e),{},{parentId:n})));s=s.concat(t)}})),s}(e[o],t[o],i);s&&s.length>0&&r.push({path:n.concat([o]),op:"patch-id-array",changes:s})}else if("patch-map"===a){const s=function(e,t,i){if(!e||!t)return[];const n=Uc.Z.clone(i);n.type="object",n.patching=["modify"];const r=[];for(let i in e){const s=e.hasOwnProperty(i),o=t.hasOwnProperty(i);if(s&&!o)r.push({id:i,op:"delete"});else if(s&&o){const s=ux(e[i],t[i],n,[]);s.length>0&&r.push({id:i,op:"modify",changes:s})}}for(let i in t)t.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&r.push({id:i,op:"add",value:Uc.Z.clone(t[i])});return r}(e[o],t[o],i);s&&s.length>0&&r.push({path:n.concat([o]),op:"patch-map",changes:s})}else if("patch-array"===a&&Xy(t[o],i)){const i=function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return null;const i=function(e,t,i){return Cx(e,t,0,0,new Map,i)}(e,t,Ix),n=[],r=[],s=[];let o=null,a=0,l=0;i.forEach((e=>{let t=e[0];const i=e[1];i===xx?(a++,o||(o=[t,0],s.push(o)),t===o[0]+o[1]?o[1]++:(o=[t,1],s.push(o))):i===bx?r.push([t,e[2]]):i===wx&&(t=t-a+l,n.push([t,[e[2]]]),l++)}));const c=[];if(n.length>0){let e=n[0];c.push(e);for(let t=1;t<n.length;t++)e[0]+e[1].length===n[t][0]?e[1]=e[1].concat(n[t][1]):(e=n[t],c.push(e))}const h={};return s.length>0&&(h.delete=s),r.length>0&&(h.replace=r),n.length>0&&(h.add=c),h}(e[o],t[o]);(i&&(i.delete&&i.delete.length>0||i.add&&i.add.length>0)||i.replace&&i.replace.length>0)&&r.push({path:n.concat([o]),op:"patch-array",patch:i})}var l,c}else{if((0,Fe.cq)(i.patching,"replace")<0)throw new Error("Cannot patch undefined object with "+a);r.push({op:"replace",path:n.concat([o]),value:Uc.Z.clone(t[o])})}},c=[];return o.forEach(((e,t)=>{"conditional"!==e.type?l(e,t):c.push({fieldSchema:e,field:t})})),c.forEach((({fieldSchema:i,field:s})=>{if(t.hasOwnProperty(s)){if(!i.contidionalParentField)return!1;const o=function(e,t,i,n,r,s){if(!s||!s.contidionalParentField||!Array.isArray(s.conditions))return[];const o=Uc.Z.getObjectProperty(t,s.contidionalParentField);let a=null;for(let e=0;e<s.conditions.length;e++)if(a||null!==s.conditions[e].on||(a=s.conditions[e]),s.conditions[e].on===o){a=s.conditions[e];break}return a?ux(i,n,a,r):[]}(0,t,e[s],t[s],n.concat([s]),i);if(0===o.length)return;const a=(0,Fe.cq)(r,(e=>1===e.path.length&&e.path[0]===i.contidionalParentField));if(a<0)r=r.concat(o);else{const e=[],t=[];o.forEach((i=>{"delete"===i.op?e.push(i):t.push(i)})),r.splice(a,0,...e),r.splice(a+e.length+1,0,...t)}}})),a&&s.forEach((e=>{l(a,e)})),r}function px(e,t){return function(e,t,i){return{version:"1",protocol:"schemio/patch",changes:ux(e,t,i,[])}}(e,t,Qy())}function mx(e,t,i,n){const r=Uc.Z.clone(e);return(0,Fe.Ed)(t.changes,(e=>{fx(r,e,i,n)})),r}function fx(e,t,i,n){switch(t.op){case"delete":Uc.Z.deleteObjectProperty(e,t.path,t.value);break;case"replace":Uc.Z.setObjectProperty(e,t.path,t.value);break;case"patch-text":const r=Uc.Z.getObjectProperty(e,t.path);Uc.Z.setObjectProperty(e,t.path,function(e,t){return Sx(e,t,!1)}(r,t.patch));break;case"patch-set":!function(e,t){let i=Uc.Z.getObjectProperty(e,t.path);if(!Array.isArray(i))return;const n=new Set(i);(0,Fe.Ed)(t.changes,(e=>{"delete"===e.op?n.delete(e.value):"add"===e.op&&n.add(e.value)})),i=[],n.forEach((e=>i.push(e))),Uc.Z.setObjectProperty(e,t.path,i)}(e,t);break;case"patch-id-array":!function(e,t,i,n){let r=Uc.Z.getObjectProperty(e,t.path);Array.isArray(r)||(r=[],Uc.Z.setObjectProperty(e,t.path,r));const s=n.findRelevantFieldEntry(i);let o=null;s&&s.childrenField&&(o=s.childrenField);const a=new Map,l=new Map;lx(r,o,((e,t)=>{a.set(e.id,e),l.set(e.id,t)})),(0,Fe.Ed)(t.changes,(e=>{switch(e.op){case"modify":gx.modify(a,r,e,i,n,s);break;case"reorder":gx.reorder(a,r,e,i,n,s);break;case"delete":gx.delete(a,r,e,i,n,s,l);break;case"add":gx.add(a,r,e,i,n,s);break;case"mount":gx.mount(a,r,e,i,n,s,l)}}))}(e,t,i.concat(t.path),n);break;case"patch-map":const s=Uc.Z.getObjectProperty(e,t.path);if(null!=s){const r=function(e,t,i,n){if(null==e)return null;if(!Array.isArray(t))return e;const r=Uc.Z.clone(e);return t.forEach((e=>{"delete"===e.op&&r.hasOwnProperty(e.id)&&delete r[e.id],"modify"===e.op&&r.hasOwnProperty(e.id)&&(r[e.id]=mx(r[e.id],e,i,n)),"add"!==e.op||r.hasOwnProperty(e.id)||(r[e.id]=e.value)})),r}(s,t.changes,i.concat(t.path),n);Uc.Z.setObjectProperty(e,t.path,r)}break;case"patch-array":if(t.patch){const i=Uc.Z.getObjectProperty(e,t.path);if(Array.isArray(i)){const n=function(e,t){return Sx(e,t,!0)}(i,t.patch);Uc.Z.setObjectProperty(e,t.path,n)}}}}const gx={modify(e,t,i,n,r,s){const o=e.get(i.id);o&&(0,Fe.Ed)(i.changes,(e=>{fx(o,e,n,r)}))},reorder(e,t,i,n,r,s){const o=gx.findParentItem(e,t,i.parentId,s);if(!Array.isArray(o))return;const a=gx.findItemIndexInParrent(o,i.id);if(a>=0){const e=o[a];o.splice(a,1),o.splice(Math.min(i.sortOrder,o.length),0,e)}},delete(e,t,i,n,r,s,o){gx.demount(t,i.id,o),e.delete(i.id)},demount(e,t,i){const n=i.get(t);n&&(e=n.childItems);for(let i=0;i<e.length;i++)if(e[i].id===t)return void e.splice(i,1)},mount(e,t,i,n,r,s,o){if(!e.has(i.id))return;gx.demount(t,i.id,o);const a=e.get(i.id),l=gx.findParentItem(e,t,i.parentId,s);Array.isArray(l)&&l.splice(Math.min(i.sortOrder,l.length),0,a)},add(e,t,i,n,r,s){let o=t;i.parentId&&(o=gx.findParentItem(e,t,i.parentId,s)),Array.isArray(o)&&(e.set(i.id,i.value),o.splice(Math.min(i.sortOrder,o.length),0,i.value))},findParentItem(e,t,i,n){if(i){if(n&&n.childrenField&&e.has(i)){const t=e.get(i);return t[n.childrenField]||(t[n.childrenField]=[]),t[n.childrenField]}return null}return t},findItemIndexInParrent(e,t){let i=-1;for(let n=0;n<e.length&&i<0;n++)e[n].id===t&&(i=n);return i}};function vx(e){const t={document:{fieldChanges:0,fields:[]},items:{added:{count:0,items:[]},deleted:{count:0,items:[]},modified:{count:0,items:[]}}},i=new Map,n=new Set,r=(e,s,o,a)=>{if(a||(a=[]),"modified"===s){if(o.changes&&o.changes.length>0)(0,Fe.Ed)(o.changes,(t=>{let i=a;t.path?i=i.concat(t.path):t.id&&(i=i.concat(t.id)),r(e,s,t,i)}));else{const r=a.join("."),o=`${e}.${r}`;if(!n.has(o)){if(n.add(o),!i.has(e)){const n={id:e,fields:[]};i.set(e,n),t.items.modified.items.push(n)}r&&i.get(e).fields.push(r),t.items[s].count+=1}}i.get(e)}else t.items[s].count+=1,t.items[s].items.push(e)};return(0,Fe.Ed)(e.changes,(e=>{"items"===e.path[0]?(0,Fe.Ed)(e.changes,(e=>{switch(e.op){case"add":r(e.id,"added");break;case"delete":r(e.id,"deleted");break;default:r(e.id,"modified",e)}})):(t.document.fieldChanges+=1,t.document.fields.push(e.path.join(".")))})),t}function yx(e,t,i,n,r,s,o){const a=`${i}-${n}`;if(r.has(a))return r.get(a);if(i<0||n<0)return s?[]:"";if(o(e[i],t[n])){let l=yx(e,t,i-1,n-1,r,s,o);return s?l=l.concat([e[i]]):l+=e[i],r.set(a,l),l}{const a=yx(e,t,i-1,n,r,s,o);r.set(`${i-1}-${n}`,a);const l=yx(e,t,i,n-1,r,s,o);return r.set(`${i}-${n-1}`,l),a.length>l.length?a:l}}const xx=0,bx=1,wx=2;function Cx(e,t,i,n,r,s){const o=`${i}-${n}`;if(r.has(o))return r.get(o);if(i>=e.length){const e=[];for(let r=n;r<t.length;r++)e.push([i+r-n,wx,t[r]]);return r.set(o,e),e}if(n>=t.length){const t=[];for(let n=i;n<e.length;n++)t.push([n,xx]);return r.set(o,t),t}if(s(e[i],t[n])){const a=Cx(e,t,i+1,n+1,r,s);return r.set(o,a),a}{const a=[[[i,xx]].concat(Cx(e,t,i+1,n,r,s)),[[i,bx,t[n]]].concat(Cx(e,t,i+1,n+1,r,s)),[[i,wx,t[n]]].concat(Cx(e,t,i,n+1,r,s))];let l=a[0];for(let e=0;e<a.length;e++)l.length>a[e].length&&(l=a[e]);return r.set(o,l),l}}function Px(e,t,i){return yx(e,t,e.length-1,t.length-1,new Map,!0,i)}function kx(e,t,i,n){n||(n=(e,t)=>e===t);const r=i?Px(e,t,n):function(e,t){const i=Px(nx(e),nx(t),((e,t)=>e.text===t.text));let n="";return i.forEach((e=>{n+=e.text})),n}(e,t),s=[];let o=null,a=0,l=0;for(;a<e.length&&l<r.length;)n(e[a],r[l])?(o=null,l++):o?o[1]+=1:(o=[a,1],s.push(o)),a++;a<e.length&&s.push([a,e.length-a]);const c=[];for(a=0,l=0;a<t.length&&l<r.length;)n(t[a],r[l])?(o=null,l++):o?i?o[1].push(t[a]):o[1]+=t[a]:(o=i?[a,[t[a]]]:[a,t[a]],c.push(o)),a++;return a<t.length&&(i?c.push([a,t.slice(a)]):c.push([a,t.substr(a)])),{delete:s,add:c}}function Sx(e,t,i){let n=e,r=e;if(i&&(n=Uc.Z.clone(e),r=n),t.replace&&Array.isArray(t.replace)&&t.replace.forEach((([e,t])=>{e>=0&&e<r.length&&(i?n[e]=t:n=n.substring(0,e)+t+n.substring(e+1))})),t.delete&&t.delete.length>0){const e=[];let s=0,o=0;for(;s<r.length&&o<t.delete.length;){if(t.delete[o][0]===s){if(s+=t.delete[o][1]-1,o++,o>=t.delete.length)break}else e.push(r[s]);s++}r=i?e:e.join(""),s<n.length&&(i?r=r.concat(n.slice(s+1)):r+=n.substring(s+1))}return t.add&&Array.isArray(t.add)&&t.add.forEach((e=>{const t=e[0],n=e[1];r=i?r.slice(0,t).concat(n).concat(r.slice(t)):r.substring(0,t)+n+r.substring(t)})),r}function Ix(e,t){const i=typeof e;if(i!==typeof t)return!1;if("object"===i){for(let i in e)if(e.hasOwnProperty(i)){if(!t.hasOwnProperty(i))return!1;if(!Ix(e[i],t[i]))return!1}for(let i in t)if(t.hasOwnProperty(i)&&!e.hasOwnProperty(i))return!1;return!0}if("array"===i){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Ix(e[i],t[i]))return!1}return e===t}var Ax=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"ctrl-label"},[e._v("Origin Doc")]),e._v("\n    "+e._s(e.originSchemeContainer.scheme.name)+"\n\n    "),i("div",{staticClass:"ctrl-label"},[e._v("Changes")]),e._v(" "),i("div",{staticClass:"patch-label"},[e._v("\n        Total modified fields: "),i("span",[e._v(e._s(e.stats.document.fieldChanges+e.stats.items.modified.count))])]),e._v(" "),i("div",{staticClass:"patch-additions section"},[i("div",{staticClass:"patch-label clickable",on:{click:function(t){e.addedItemsCollapsed=!e.addedItemsCollapsed}}},[i("span",{staticClass:"patch-expander"},[e.addedItemsCollapsed?i("i",{staticClass:"fas fa-caret-right"}):i("i",{staticClass:"fas fa-caret-down"})]),e._v("\n            New items: "),i("span",[e._v(e._s(e.stats.items.added.count))])]),e._v(" "),e.addedItemsCollapsed?e._e():i("div",{staticClass:"patch-items-container"},e._l(e.stats.items.added.items,(function(t){return i("div",[i("div",[i("i",{staticClass:"fas fa-cube"}),e._v(" "+e._s(t.name)+" ")])])})),0)]),e._v(" "),i("div",{staticClass:"patch-deletions section"},[i("div",{staticClass:"patch-label clickable",on:{click:function(t){e.deletedItemsCollapsed=!e.deletedItemsCollapsed}}},[i("span",{staticClass:"patch-expander"},[e.deletedItemsCollapsed?i("i",{staticClass:"fas fa-caret-right"}):i("i",{staticClass:"fas fa-caret-down"})]),e._v("\n            Deleted items: "),i("span",[e._v(e._s(e.stats.items.deleted.count))])]),e._v(" "),e.deletedItemsCollapsed?e._e():i("div",{staticClass:"patch-items-container"},e._l(e.stats.items.deleted.items,(function(t){return i("div",[i("div",[i("i",{staticClass:"fas fa-cube"}),e._v(" "+e._s(t.name)+" ")])])})),0)]),e._v(" "),i("div",{staticClass:"patch-modifications section"},[i("div",{staticClass:"patch-label clickable",on:{click:function(t){e.modifiedItemsCollapsed=!e.modifiedItemsCollapsed}}},[i("span",{staticClass:"patch-expander"},[e.modifiedItemsCollapsed?i("i",{staticClass:"fas fa-caret-right"}):i("i",{staticClass:"fas fa-caret-down"})]),e._v("\n            Modified items: "),i("span",[e._v(e._s(e.stats.items.modified.items.length))])]),e._v(" "),e.modifiedItemsCollapsed?e._e():i("div",{staticClass:"patch-items-container"},e._l(e.stats.items.modified.items,(function(t){return i("div",[i("div",[i("div",{staticClass:"clickable",on:{click:function(e){t.collapsed=!t.collapsed}}},[i("span",{staticClass:"patch-expander"},[t.collapsed?i("i",{staticClass:"fas fa-caret-right"}):i("i",{staticClass:"fas fa-caret-down"})]),e._v(" "),i("i",{staticClass:"fas fa-cube"}),e._v(" "+e._s(t.name)+" "),i("span",[e._v(e._s(t.fields.length))])]),e._v(" "),t.collapsed?e._e():i("div",[i("ul",{staticClass:"patch-field-list"},e._l(t.fields,(function(t){return i("li",[i("i",{staticClass:"fas fa-cog"}),e._v(" "+e._s(t))])})),0)])])])})),0)])])};function _x(e,t,i){const n=t.split(".");if(!("shapeProps"===n[0]&&n.length>1))return"textSlots"===n[0]&&n.length>2?`Text / ${n[1]} / ${(0,fh.Kp)(n[2])}`:n[0];{const t=i.findItemById(e);if(!t)return null;const r=Id.Z.find(t.shape);if(!r)return null;const s=Id.Z.getShapePropDescriptor(r,n[1]);if(s)return s.name}return null}Ax._withStripped=!0;const Ex={props:["patch","originSchemeContainer","modifiedSchemeContainer"],beforeMount(){this.stats=function(e,t,i){(0,Fe.Ed)(e.items.modified.items,(e=>{e.collapsed=!0;const n=t.findItemById(e.id);n&&(e.name=n.name);const r=new Set;(0,Fe.Ed)(e.fields,(n=>{let s=_x(e.id,n,i);s||(s=_x(e.id,n,t)),s?r.add(s):r.add(n)})),e.fields=Array.from(r)}));const n=(e,t)=>(0,Fe.UI)(e,(e=>{const i=t.findItemById(e);return i?{id:e,name:i.name}:{id:e,name:"Unknown item"}}));return e.items.added.items=n(e.items.added.items,i),e.items.deleted.items=n(e.items.deleted.items,t),e}(vx(this.patch),this.originSchemeContainer,this.modifiedSchemeContainer)},data:()=>({stats:null,addedItemsCollapsed:!0,deletedItemsCollapsed:!0,modifiedItemsCollapsed:!0})},Tx=(0,Re.Z)(Ex,Ax,[],!1,null,null,null).exports,Mx={components:{Debugger:Lh,SystemMessagePanel:Zh,SchemeEditor:qy,ColorPicker:Fu.Z,Modal:je.Z,PatchDetails:Tx},props:{editorId:{type:String,required:!0},mode:{type:String,default:"view"},scheme:{type:Object,default:()=>null},editAllowed:{type:Boolean,default:!1},modified:{type:Boolean,default:!1},active:{type:Boolean,default:!0},userStylesEnabled:{type:Boolean,default:!1},projectArtEnabled:{type:Boolean,default:!0},schemeTagsEnabled:{type:Boolean,default:!0},menuOptions:{type:Array,default:()=>[]},schemeReloadKey:{type:String,default:null},schemePatch:{type:Object,default:null},historyUndoable:{type:Boolean,required:!0},historyRedoable:{type:Boolean,required:!0},isSaving:{type:Boolean,required:!0},modeControlEnabled:{type:Boolean,default:!0},saveControlEnabled:{type:Boolean,default:!0},overridePatchControls:{type:Boolean,default:!1},patchControls:{type:Array,default:()=>[]},extraTabs:{type:Array,default:()=>[]},customItemMenuPanels:{type:Array,default:()=>[]},contextMenuExtraProvider:{type:Object,default:null},starterTemplates:{type:Array,default:()=>[]}},beforeMount(){this.schemePatch&&this.generatePatchData(this.schemePatch)},mounted(){(0,Oh.$D)((()=>{this.debuggerShown=!0})),mh.Z.patchedSchemeUpdated.$on(this.editorId,this.onPatchedSchemeUpdated)},beforeDestroy(){mh.Z.patchedSchemeUpdated.$off(this.editorId,this.onPatchedSchemeUpdated)},data:()=>({debuggerShown:!1,patch:{index:null,patch:null,patchedScheme:null,isToggled:!0,stats:null,originSchemeContainer:null,modifiedSchemeContainer:null,detailsModalShown:!1,menuCollapsed:!1,reloadKey:0}}),methods:{onNewSchemeSubmitted(e,t,i){this.$emit("new-scheme-submitted",e,t,i)},onPatchedSchemeUpdated(e){this.patch.patchedScheme=e,this.patch.reloadKey++},onModeChangeRequested(e){this.$emit("mode-change-requested",e)},generatePatchData(e){this.scheme&&e&&(this.patch.patch=e,this.patch.stats=vx(e),this.patch.index=function(e){const t={addedItems:new Set,deletedItems:new Set,modifiedItems:new Set,modifiedFields:new Set};return(0,Fe.Ed)(e.items.added.items,(e=>t.addedItems.add(e))),(0,Fe.Ed)(e.items.deleted.items,(e=>t.deletedItems.add(e))),(0,Fe.Ed)(e.document.fields,(e=>t.modifiedFields.add(e))),(0,Fe.Ed)(e.items.modified.items,(e=>{t.modifiedItems.add(e.id),(0,Fe.Ed)(e.fields,(i=>{t.modifiedFields.add(`items.${e.id}.${i}`)}))})),t}(this.patch.stats),this.patch.patchedScheme=function(e,t){return mx(e,t,[],function(e){const t=new ax;return t.indexFieldEntries(e.fields),t}(Qy()))}(this.scheme,e),this.$emit("patch-modified-generated",this.patch.patchedScheme),this.showPatchModified(),this.patch.originSchemeContainer=new Nd.ZP(this.scheme,this.editorId,this.$store.state.apiClient,"edit"),this.patch.modifiedSchemeContainer=new Nd.ZP(this.patch.patchedScheme,this.editorId,"edit"),this.$forceUpdate())},updatePatchDiffColoring(e){this.$store.dispatch("setPatchDiffColoringEnabled",e)},updatePatchDiffColor(e,t){this.$store.dispatch("updatePatchDiffColor",{changeType:e,color:t})},cancelPatch(){this.resetPatch()},resetPatch(){this.patch.isToggled=!1,this.patch.patch=null,this.patch.patchedScheme=null,this.patch.stats=null,this.patch.index=null,this.patch.originSchemeContainer=null,this.patch.modifiedSchemeContainer=null},applyPatch(){this.$emit("patch-applied",this.patch.patchedScheme),this.resetPatch()},showPatchOrigin(){this.patch.isToggled=!1,this.$emit("patch-origin-toggled")},showPatchModified(){this.patch.isToggled=!0,this.$emit("patch-modified-toggled")}},computed:{patchIsDiffColoringEnabled(){return this.$store.getters.patchIsDiffColoringEnabled},patchAdditionsColor(){return this.$store.getters.patchAdditionsColor},patchDeletionsColor(){return this.$store.getters.patchDeletionsColor},patchModificationsColor(){return this.$store.getters.patchModificationsColor}}},$x=Mx,Ox=(0,Re.Z)($x,$h,[],!1,null,null,null).exports;var Dx=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{title:"Create patch",primaryButton:"Download",primaryButtonDisabled:e.primaryButtonDisabled},on:{close:function(t){return e.$emit("close")},"primary-submit":e.onDownloadPatch}},[e.originScheme?e._e():i("span",{staticClass:"btn btn-primary",on:{click:function(t){e.schemeSearchModalShown=!0}}},[e._v("Choose base diagram")]),e._v(" "),e.isLoading?i("div",{staticClass:"loader"},[i("div",{staticClass:"loader-element"})]):i("div",[e.patch&&e.originSchemeContainer?i("div",[i("patch-details",{attrs:{originSchemeContainer:e.originSchemeContainer,modifiedSchemeContainer:e.modifiedSchemeContainer,patch:e.patch}})],1):e.errorMessage?i("div",{staticClass:"msg msg-error"},[e._v("\n            "+e._s(e.errorMessage)+"\n        ")]):i("div",{staticClass:"hint"},[e._v("\n            Select a base diagram for which you want to generate a patch\n        ")])]),e._v(" "),e.schemeSearchModalShown?i("scheme-search-modal",{on:{close:function(t){e.schemeSearchModalShown=!1},"selected-scheme":e.onBaseSelected}}):e._e()],1)};function Bx(e,t,i){e=e.replace(/[^a-zA-Z0-9\-\_\.]/g,"-").replace(/\s/g,"-");const n=`data:${t};base64,${(0,wh.cv)(i)}`,r=document.createElement("a");document.body.appendChild(r);try{r.href=n,r.download=e,r.click()}catch(e){console.error(e)}setTimeout((()=>document.body.removeChild(r)),100)}Dx._withStripped=!0;const Lx={props:["scheme","originScheme","editorId"],components:{Modal:je.Z,SchemeSearchModal:Bu,PatchDetails:Tx},data(){return{schemeSearchModalShown:!1,patch:null,isLoading:!1,errorMessage:null,originSchemeContainer:null,modifiedSchemeContainer:new Nd.ZP(this.scheme,this.editorId,"edit",this.$store.state.apiClient)}},beforeMount(){this.originScheme&&(this.originSchemeContainer=new Nd.ZP(this.originScheme,this.editorId,"edit",this.$store.state.apiClient),this.patch=px(this.originSchemeContainer.scheme,this.scheme))},methods:{onDownloadPatch(){this.patch&&Bx("patch.json","application/json",JSON.stringify(this.patch))},onBaseSelected(e){this.schemeSearchModalShown=!1,this.loadBaseScheme(e.id)},loadBaseScheme(e){this.isLoading=!0,this.errorMessage=null,this.$store.state.apiClient.getScheme(e).then((e=>{this.isLoading=!1,this.originSchemeContainer=new Nd.ZP(e.scheme,this.editorId,"edit",this.$store.state.apiClient),this.patch=px(this.originSchemeContainer.scheme,this.scheme)})).catch((e=>{console.error(e),this.errorMessage="Something went wrong, failed to load base diagram"}))}},computed:{primaryButtonDisabled(){return null===this.patch}}},Rx=(0,Re.Z)(Lx,Dx,[],!1,null,null,null).exports;var Nx=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{title:"Import Diagram",primaryButton:"Import"},on:{close:function(t){return e.$emit("close")},"primary-submit":e.onImportSubmitted}},[e._v("\n    Are you sure you want to import "),i("b",[e._v(e._s(e.scheme.name))]),e._v("? All your current changes will be lost and overwritten with this new diagram.\n")])};Nx._withStripped=!0;const Zx={props:["scheme"],components:{Modal:je.Z},methods:{onImportSubmitted(){this.$emit("import-scheme-submitted",this.scheme),this.$emit("close")}}},Fx=(0,Re.Z)(Zx,Nx,[],!1,null,null,null).exports;var jx=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{title:"Export as JSON",primaryButton:"Export"},on:{close:function(t){return e.$emit("close")},"primary-submit":e.onExportSubmitted}},[i("p",[e._v("\n        Exports diagram in JSON format.\n    ")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.optimized,expression:"optimized"}],attrs:{type:"checkbox",id:"chk-export-json-optimized"},domProps:{checked:Array.isArray(e.optimized)?e._i(e.optimized,null)>-1:e.optimized},on:{change:function(t){var i=e.optimized,n=t.target,r=!!n.checked;if(Array.isArray(i)){var s=e._i(i,null);n.checked?s<0&&(e.optimized=i.concat([null])):s>-1&&(e.optimized=i.slice(0,s).concat(i.slice(s+1)))}else e.optimized=r}}}),i("label",{attrs:{for:"chk-export-json-optimized"}},[e._v(" Optimized")]),e._v(" "),e.optimized?i("p",[e._v("\n        With "),i("b",[e._v("optimized")]),e._v(" export it will remove all the fields that have default values, and thus will only export fields that you have modified\n    ")]):i("p",[e._v("\n        With "),i("b",[e._v("unoptimized")]),e._v(" export it will export all fields in the document.\n    ")])])};jx._withStripped=!0;const zx={props:["scheme"],components:{Modal:je.Z},data:()=>({optimized:!0}),methods:{onExportSubmitted(){let e=Uc.Z.sanitizeScheme(Uc.Z.clone(this.scheme));this.optimized&&(e=(0,rh.mY)(e)),this.saveAs(`${this.scheme.name}.json`,JSON.stringify(e)),this.$emit("close")},saveAs(e,t){Bx(e,"aplication/json",t)}}},Ux=(0,Re.Z)(zx,jx,[],!1,null,null,null).exports;var Hx=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{title:e.title,"primary-button":"Save",width:800},on:{close:function(t){return e.$emit("close")},"primary-submit":e.saveIt}},[i("div",{staticClass:"progress-bar-container"},[e.isLoading?i("div",{staticClass:"progress-bar progress-bar-hovering"}):e._e()]),e._v(" "),e.errorMessage?i("div",{staticClass:"msg msg-error"},[e._v("\n        "+e._s(e.errorMessage)+"\n    ")]):e._e(),e._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-1"},[e.simplePadding?i("div",{staticClass:"row padded centered gap"},[i("i",{staticClass:"fa-solid fa-border-none",staticStyle:{cursor:"pointer"},attrs:{title:"Advanced padding"},on:{click:function(t){e.simplePadding=!1}}}),e._v(" "),i("number-textfield",{staticStyle:{"max-width":"150px"},attrs:{value:e.padding,name:"Padding"},on:{changed:function(t){e.padding=arguments[0]}}})],1):i("div",{staticClass:"row centered gap"},[i("i",{staticClass:"fa-solid fa-border-all",staticStyle:{cursor:"pointer"},attrs:{title:"Simple padding"},on:{click:function(t){e.simplePadding=!0}}}),e._v(" "),i("div",{staticClass:"col-1"},[i("div",{staticClass:"row padded centered gap"},[i("number-textfield",{attrs:{value:e.paddingLeft,name:"Left"},on:{changed:function(t){e.paddingLeft=arguments[0]}}}),e._v(" "),i("number-textfield",{attrs:{value:e.paddingTop,name:"Top"},on:{changed:function(t){e.paddingTop=arguments[0]}}})],1),e._v(" "),i("div",{staticClass:"row padded centered gap"},[i("number-textfield",{attrs:{value:e.paddingRight,name:"Right"},on:{changed:function(t){e.paddingRight=arguments[0]}}}),e._v(" "),i("number-textfield",{attrs:{value:e.paddingBottom,name:"Bottom"},on:{changed:function(t){e.paddingBottom=arguments[0]}}})],1)])])]),e._v(" "),i("div",{staticClass:"col-1"},[i("div",{staticClass:"row padded centered gap"},[i("div",{staticClass:"col-1"},[i("number-textfield",{attrs:{value:e.rasterWidth,name:"Width"},on:{changed:e.onWidthChange}})],1),e._v(" "),i("div",[i("span",{staticClass:"toggle-button small",class:{toggled:e.sizeLocked},on:{click:e.toggleSizeLock}},[i("i",{staticClass:"fa-solid fa-lock"})])]),e._v(" "),i("div",{staticClass:"col-1"},[i("number-textfield",{attrs:{value:e.rasterHeight,name:"Height"},on:{changed:e.onHeightChange}})],1)]),e._v(" "),i("div",{staticClass:"row padded centered gap"},[i("div",{staticClass:"col-1"},["svg"===e.kind?i("div",{staticClass:"row centered gap"},[i("span",[e._v("Placement")]),e._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:e.placement,expression:"placement"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.placement=t.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"top-left"}},[e._v("Top Left")]),e._v(" "),i("option",{attrs:{value:"centered"}},[e._v("Centered")]),e._v(" "),i("option",{attrs:{value:"stretched"}},[e._v("Stretched")])])]):e._e()]),e._v(" "),i("div",{staticClass:"col-1"},[i("div",{staticClass:"row padded centered gap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.shouldExportBackground,expression:"shouldExportBackground"}],attrs:{type:"checkbox",id:"chk-export-svg-background"},domProps:{checked:Array.isArray(e.shouldExportBackground)?e._i(e.shouldExportBackground,null)>-1:e.shouldExportBackground},on:{change:function(t){var i=e.shouldExportBackground,n=t.target,r=!!n.checked;if(Array.isArray(i)){var s=e._i(i,null);n.checked?s<0&&(e.shouldExportBackground=i.concat([null])):s>-1&&(e.shouldExportBackground=i.slice(0,s).concat(i.slice(s+1)))}else e.shouldExportBackground=r}}}),i("label",{attrs:{for:"chk-export-svg-background"}},[e._v("Background")])])]),e._v(" "),i("div",{staticClass:"col-1"},[i("div",{staticClass:"row padded centered gap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.shouldExportDataURL,expression:"shouldExportDataURL"}],attrs:{type:"checkbox",id:"chk-export-data-url"},domProps:{checked:Array.isArray(e.shouldExportDataURL)?e._i(e.shouldExportDataURL,null)>-1:e.shouldExportDataURL},on:{change:function(t){var i=e.shouldExportDataURL,n=t.target,r=!!n.checked;if(Array.isArray(i)){var s=e._i(i,null);n.checked?s<0&&(e.shouldExportDataURL=i.concat([null])):s>-1&&(e.shouldExportDataURL=i.slice(0,s).concat(i.slice(s+1)))}else e.shouldExportDataURL=r}}}),i("label",{attrs:{for:"chk-export-data-url"}},[e._v("DataURL")])])])])])]),e._v(" "),i("div"),e._v(" "),i("svg",{ref:"svgContainer",staticClass:"export-svg-preview",style:e.svgStyle,attrs:{width:"100%",height:"300px",viewBox:-e.paddingLeft-e.previewPadding+" "+(-e.paddingTop-e.previewPadding)+" "+(e.viewBoxWidth+4*e.previewPadding)+" "+(e.viewBoxHeight+4*e.previewPadding),preserveAspectRatio:e.preserveAspectRatio,xmlns:"http://www.w3.org/2000/svg","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("g",{attrs:{"data-preview-ignore":"true"}},[i("rect",{staticStyle:{fill:"none","stroke-width":"1",stroke:"rgba(100,100,255, 0.2)"},style:{"stroke-width":e.previewStrokeSize},attrs:{x:-e.paddingLeft,y:-e.paddingTop,width:e.viewBoxWidth+e.paddingLeft,height:e.viewBoxHeight+e.paddingTop}})]),e._v(" "),i("g",{domProps:{innerHTML:e._s(e.svgHtml)}})]),e._v(" "),e.dataURLModal.shown?i("modal",{attrs:{title:"Image Data URL"},on:{close:function(t){e.dataURLModal.shown=!1}}},[i("p",[e._v("Your image data URL is ready! Copy it from this textarea")]),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.dataURLModal.text,expression:"dataURLModal.text"}],ref:"dataURLTextarea",staticClass:"textfield",domProps:{value:e.dataURLModal.text},on:{input:function(t){t.target.composing||e.$set(e.dataURLModal,"text",t.target.value)}}})]):e._e()],1)};Hx._withStripped=!0;const qx={props:{items:{value:[],type:Array},kind:{value:"svg",type:String},backgroundColor:{value:"rgba(255,255,255,1.0)",type:String}},components:{Modal:je.Z,NumberTextfield:fd.Z},data(){const e=_h(this.items);let t=0;(0,Fe.Ed)(this.items,(e=>{!isNaN(e.shapeProps.strokeSize)&&e.shapeProps.strokeSize>t&&(t=e.shapeProps.strokeSize)}));const i=Math.max(2,2*t);let n=i,r=i,s=i,o=i;return(e.width<60||e.height<60)&&(n=2*t,r=2*t,s=2*t,o=2*t),{exporter:e,shouldExportBackground:!1,shouldExportDataURL:!1,simplePadding:!0,padding:n,paddingTop:n,paddingLeft:r,paddingBottom:o,paddingRight:s,largestStrokeSize:t,placement:"centered",svgHtml:e.previewSvgHtml,previewPadding:20,width:e.width,height:e.height,rasterWidth:e.width,rasterHeight:e.height,isLoading:!1,errorMessage:null,dataURLModal:{shown:!1,text:""},sizeLocked:!0,ratio:Math.max(1,e.width)/Math.max(1,e.height)}},methods:{saveIt(){this.isLoading=!0,this.errorMessage=null,this.exporter.exportImage({width:this.rasterWidth,height:this.rasterHeight,paddingLeft:this.paddingLeft,paddingRight:this.paddingRight,paddingTop:this.paddingTop,paddingBottom:this.paddingBottom,backgroundColor:this.shouldExportBackground?this.backgroundColor:null,format:this.kind}).then((e=>{this.isLoading=!1,this.shouldExportDataURL?(this.dataURLModal.text=e,this.dataURLModal.shown=!0,this.$nextTick((()=>{this.$refs.dataURLTextarea.focus()}))):this.downloadViaLink(`${this.items[0].name}.${this.kind}`,e)})).catch((e=>{console.error("Failed to generate image",e),this.isLoading=!1,this.errorMessage="Something went wrong, was not able to generate image"}))},downloadViaLink(e,t){const i=document.createElement("a");document.body.appendChild(i);try{i.href=t,i.download=e,i.click(),this.$emit("close")}catch(e){console.error(e)}setTimeout((()=>document.body.removeChild(i)),100)},onWidthChange(e){this.rasterWidth=Math.max(1,e),this.sizeLocked&&(this.rasterHeight=Math.max(1,Math.round(this.rasterWidth/this.ratio)))},onHeightChange(e){this.rasterHeight=Math.max(1,e),this.sizeLocked&&(this.rasterWidth=Math.max(1,Math.round(this.rasterHeight*this.ratio)))},toggleSizeLock(){this.sizeLocked=!this.sizeLocked,this.sizeLocked&&(this.ratio=Math.max(1,this.rasterWidth)/Math.max(1,this.rasterHeight))}},watch:{padding(e){this.paddingLeft=e,this.paddingRight=e,this.paddingTop=e,this.paddingBottom=e},simplePadding(e){e&&(this.paddingLeft=this.padding,this.paddingRight=this.padding,this.paddingTop=this.padding,this.paddingBottom=this.padding)}},computed:{preserveAspectRatio(){return"stretched"===this.placement?"none":"centered"===this.placement?"xMidYMid":"xMinYMin"},svgStyle(){return this.shouldExportBackground?{background:this.backgroundColor}:{}},previewStrokeSize(){const e=this.width+2*this.previewPadding+this.paddingLeft+this.paddingRight,t=this.height+2*this.previewPadding+this.paddingTop+this.paddingBottom;return Math.abs(e)<.001||Math.abs(t)<.001?1:2*Math.max(Math.abs(e/600),Math.abs(t/380))},viewBoxWidth(){return this.width+this.paddingRight},viewBoxHeight(){return this.height+this.paddingBottom},title(){return"svg"===this.kind?"Export as SVG":"Export as PNG"}}},Wx=(0,Re.Z)(qx,Hx,[],!1,null,null,null).exports;var Vx=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{title:"Export as HTML",primaryButton:"Export"},on:{close:function(t){return e.$emit("close")},"primary-submit":e.exportSubmitted}},[i("p",[e._v("\n        Exports diagram into a separate HTML page with standalone Schemio player.\n        It packages your diagram together with Schemio javascript files into a zip archive.\n    ")])])};Vx._withStripped=!0;const Gx={props:["scheme"],components:{Modal:je.Z},data:()=>({}),methods:{exportSubmitted(){const e=new(ih()),t=Uc.Z.clone(this.scheme);e.file("scheme.json",JSON.stringify(t)),this.$store.state.apiClient.getExportHTMLResources(this.$store.state.assetsPath).then((t=>{e.file("schemio-standalone.css",t.css),e.file("index.html",t.html),e.file("schemio-standalone.js",t.js),e.file("syntax-highlight-worker.js",t.syntaxHighlightWorker),e.file("syntax-highlight.css",t.syntaxHighlightCSS),e.generateAsync({type:"base64",compression:"DEFLATE",compressionOptions:{level:9}}).then((e=>{this.saveAs("scheme.zip",e),this.$emit("close")}))}))},saveAs(e,t){const i=`data:application/zip;base64,${t}`,n=document.createElement("a");document.body.appendChild(n);try{n.href=i,n.download=e,n.click()}catch(e){console.error(e)}setTimeout((()=>document.body.removeChild(n)),100)}}},Kx=(0,Re.Z)(Gx,Vx,[],!1,null,null,null).exports,Jx={components:{SchemioEditorApp:Ox,CreatePatchModal:Rx,ImportSchemeModal:Fx,ContextMenu:ig,ExportPictureModal:Wx,Modal:je.Z,"export-json-modal":Ux,"export-html-modal":Kx},props:{editorId:{type:String,default:"default"},scheme:{type:Object,required:!0},schemeReloadKey:{type:String,default:""},detectBrowserClose:{type:Boolean,default:!0},editorMode:{type:String,default:"view"},menuOptions:{type:Array,default:()=>[]},userStylesEnabled:{type:Boolean,default:!1},projectArtEnabled:{type:Boolean,default:!0},schemeTagsEnabled:{type:Boolean,default:!0},editAllowed:{type:Boolean,default:!1},isStaticEditor:{type:Boolean,default:!1},isOfflineEditor:{type:Boolean,default:!1},modeControlEnabled:{type:Boolean,default:!0},saveControlEnabled:{type:Boolean,default:!0},isSaving:{type:Boolean,default:!1},modificationKey:{type:String,default:""},patch:{type:Object,default:null},overridePatchControls:{type:Boolean,default:!1},patchControls:{type:Array,default:()=>[]},extraTabs:{type:Array,default:()=>[]},customItemMenuPanels:{type:Array,default:()=>[]},contextMenuExtraProvider:{type:Object,default:null},starterTemplates:{type:Array,default:()=>[]}},beforeMount(){this.detectBrowserClose&&(window.onbeforeunload=this.onBrowseClose),this.isStaticEditor&&(this.originScheme=Uc.Z.clone(this.scheme),(0,rh.GL)(this.originScheme))},beforeDestroy(){},created(){this.histories={origin:new Sv({size:30}),modified:new Sv({size:30})},this.currentHistory="origin",this.histories[this.currentHistory].commit(this.scheme)},data(){return{modified:this.isModified,mode:this.editorMode,originScheme:null,customContextMenu:{id:jl().generate(),show:!1,mouseX:0,mouseY:0,menuOptions:[]},editorMenuOptions:this.menuOptions.concat([{name:"Import diagram",callback:()=>this.showImportJSONModal(),iconClass:"fas fa-file-import"}]).concat(this.overridePatchControls?[]:[{name:"Create patch",callback:()=>this.openSchemePatchModal(this.scheme),iconClass:"fas fa-file-export",disabled:!this.editAllowed||this.isStaticEditor||this.isOfflineEditor},{name:"Apply patch",callback:()=>this.triggerApplyPatchUpload(),iconClass:"fas fa-file-import"}]).concat([{name:"Export as JSON",callback:()=>{this.exportJSONModalShown=!0},iconClass:"fas fa-file-export"},{name:"Export as SVG",callback:()=>this.exportAsSVG(),iconClass:"fas fa-file-export"},{name:"Export as PNG",callback:()=>this.exportAsPNG(),iconClass:"fas fa-file-export"},{name:"Export as HTML",callback:()=>{this.exportHTMLModalShown=!0},iconClass:"fas fa-file-export"}]),createPatchModalShown:!1,exportJSONModalShown:!1,importSchemeFileShown:!1,importSchemeModal:{sheme:null,shown:!1},loadPatchFileShown:!1,schemePatch:this.patch,exportPictureModal:{kind:"svg",shown:!1,items:[],backgroundColor:"rgba(255,255,255,1.0)"},exportHTMLModalShown:!1,historyUndoable:!1,historyRedoable:!1,appReloadKey:""}},methods:{onBrowseClose(){return this.modified?"The changes were not saved":null},onCustomContextMenuOptionSelected(e){e.subOptions||e.clicked(),this.customContextMenu.show=!1},onContextMenuRequested(e,t,i){this.customContextMenu.id=jl().generate(),this.customContextMenu.mouseX=e,this.customContextMenu.mouseY=t,this.customContextMenu.menuOptions=i,this.customContextMenu.show=!0},exportAsSVG(){this.openExportPictureModal(this.scheme.items,"svg")},exportAsPNG(){this.openExportPictureModal(this.scheme.items,"png")},openExportPictureModal(e,t){Array.isArray(e)&&0!==e.length?(this.exportPictureModal.items=e,this.exportPictureModal.backgroundColor=this.scheme.style.backgroundColor,this.exportPictureModal.kind=t,this.exportPictureModal.shown=!0):nh.Z.addErrorSystemMessage(this.$store,"You have no items in your document")},showImportJSONModal(){this.importSchemeFileShown=!0,this.$nextTick((()=>{this.$refs.importSchemeFileInput.click()}))},onImportSchemeFileInputChanged(e){this.loadSchemeFile(e.target.files[0])},loadSchemeFile(e){const t=new FileReader;t.onload=e=>{this.importSchemeFileShown=!1;try{const t=JSON.parse(e.target.result);0===this.scheme.items.length?this.importScheme(t):(this.importSchemeModal.scheme=t,this.importSchemeModal.shown=!0)}catch(e){alert("Not able to import scheme. Malformed json")}},t.readAsText(e)},importScheme(e){e.id=this.scheme.id,(0,rh.GL)(e),this.histories[this.currentHistory].commit(e),this.$emit("scheme-update-requested",e),this.appReloadKey=jl().generate(),this.modified=!0,this.updateHistoryState()},updateHistoryState(){this.historyUndoable=this.histories[this.currentHistory].undoable(),this.historyRedoable=this.histories[this.currentHistory].redoable()},onHistoryCommitted(e,t){this.histories.origin.commit(e,t),this.modified=!0,this.updateHistoryState()},onPatchedHistoryCommitted(e,t){this.histories.modified.commit(e,t),this.modified=!0,this.$emit("patched-history-committed",e,t),this.updateHistoryState()},onPatchModifiedGenerated(e){this.histories.modified.commit(e),this.updateHistoryState()},undoHistory(){const e=this.histories[this.currentHistory].undo();this.updateHistoryState(),e&&("modified"===this.currentHistory?mh.Z.patchedSchemeUpdated.$emit(this.editorId,e):this.$emit("scheme-update-requested",e),this.$emit("history-undone"),this.modified=!0)},redoHistory(){const e=this.histories[this.currentHistory].redo();this.updateHistoryState(),e&&("modified"===this.currentHistory?mh.Z.patchedSchemeUpdated.$emit(this.editorId,e):this.$emit("scheme-update-requested",e),this.$emit("history-redone"),this.modified=!0)},onEditorStateChanged(e){"editPath"!==e&&this.updateHistoryState()},triggerApplyPatchUpload(){this.loadPatchFileShown=!0,this.$nextTick((()=>{this.$refs.loadPatchFileInput.click()}))},onLoadPatchFileInputChanged(e){const t=e.target.files[0],i=new FileReader;i.onload=e=>{this.loadPatchFileShown=!1;try{const t=JSON.parse(e.target.result);this.histories.modified.reset(),this.schemePatch=t,this.appReloadKey=jl().generate()}catch(e){console.error(e),alert("Not able to load patch. Malformed json")}},i.readAsText(t)},openSchemePatchModal(e){this.modifiedScheme=e,this.createPatchModalShown=!0},onPatchApplied(e){this.scheme=e,this.schemePatch=null,this.histories.modified.reset(),this.appReloadKey=jl().generate()},onModeChangeRequested(e){this.mode=e},saveScheme(e){this.isStaticEditor?this.openSchemePatchModal(e):this.$emit("scheme-save-requested",e)},deleteDiagram(){this.$emit("delete-diagram-requested",this.scheme.id)},onPatchOriginToggled(){this.currentHistory="origin",this.updateHistoryState()},onPatchModifiedToggled(){this.currentHistory="modified",this.updateHistoryState()}},watch:{mode(e){this.$emit("mode-changed",e)},editorMode(e){this.mode=e},modificationKey(e){this.modified=!1}}},Yx=(0,Re.Z)(Jx,Mh,[],!1,null,null,null).exports;function Qx(){const e=window.localStorage.getItem("offlineScheme");if(e)try{return JSON.parse(e)}catch(e){}return{}}const Xx={components:{Modal:je.Z,CreateNewSchemeModal:Nl,"export-as-link-modal":uh,SchemioEditorWebApp:Yx},props:{clientProvider:{type:Object,required:!0},isOfflineEditor:{type:Boolean,default:!1},editAllowed:{type:Boolean,default:!0},userStylesEnabled:{type:Boolean,default:!0},projectArtEnabled:{type:Boolean,default:!0},starterTemplates:{type:Array,default:()=>[]}},beforeMount(){const e=this.hasher.decodeURLHash(window.location.hash);this.editAllowed&&e.m&&"edit"===e.m?this.editorMode="edit":this.editorMode="view",this.isLoading=!0,"static"===this.clientProvider.type&&(this.isStaticEditor=!0);let t=this.clientProvider.create().then((e=>(this.$store.dispatch("setApiClient",e),this.apiClient=e,e)));t="offline"===this.clientProvider.type?t.then((e=>{this.loadSchemeFromLink(),this.isLoading=!1})):t.then((e=>e.getScheme(this.schemeId))).then((e=>{this.isLoading=!1,this.path=e.folderPath,this.buildBreadcrumbs(e.folderPath),this.scheme=e.scheme,(0,rh.GL)(this.scheme),e.viewOnly&&(this.shouldAllowEdit=!1)})),t.catch((e=>{this.isLoading=!1,e.response&&404===e.response.status?this.is404=!0:(console.error(e),this.errorMessage="Oops, something went wrong")}))},data(){const e=this.$route.params.schemeId;return{hasher:sh(this.$router?this.$router.mode:"history"),schemeId:e,path:"",breadcrumbs:[],isStaticEditor:!1,scheme:this.isOfflineEditor?Qx():null,apiClient:null,is404:!1,errorMessage:null,isLoading:!1,isSaving:!1,modificationKey:"",editorMode:"view",appReloadKey:jl().generate(),schemeReloadKey:jl().generate(),newSchemePopup:{name:"",description:"",show:!1,item:null},duplicateDiagramModal:{shown:!1,name:"",errorMessage:null},menuOptions:[{name:"New diagram",callback:()=>{this.newSchemePopup.item=null,this.newSchemePopup.show=!0},iconClass:"fas fa-file",disabled:!this.editAllowed||this.isOfflineEditor||"static"===this.clientProvider.type},{name:"Duplicate diagram",callback:()=>this.showDuplicateDiagramModal(),iconClass:"fas fa-copy",disabled:!this.editAllowed||this.isStaticEditor||this.isOfflineEditor},{name:"Delete diagram",callback:()=>{this.deleteSchemeWarningShown=!0},iconClass:"fas fa-trash",disabled:!this.editAllowed||this.isStaticEditor||this.isOfflineEditor},{name:"Export as link",callback:()=>{this.exportAsLinkModalShown=!0},iconClass:"fas fa-file-export"}],exportAsLinkModalShown:!1,deleteSchemeWarningShown:!1}},methods:{buildBreadcrumbs(e){if(e||(e=""),Array.isArray(e))return void(this.breadcrumbs=e);const t=e.split("/"),i=[];let n="";(0,Fe.Ed)(t,(e=>{""!==e&&(n=""===n?e:`${n}/${e}`,i.push({kind:"dir",name:e,path:n}))})),i.length>2&&(i.splice(1,i.length-2),i.splice(1,0,{kind:"ellipsis"})),this.breadcrumbs=i},submitNewScheme(e){return this.newSchemePopup.show=!1,this.apiClient.createNewScheme(this.path,e).then((e=>{if(this.newSchemePopup.item){const t=this.newSchemePopup.item;"component"===t.shape?(t.shapeProps.schemeId=e.id,mh.Z.item.changed.specific.$emit(`scheme-${this.appReloadKey}`,t.id,"shapeProps.schemeId")):(t.links||(t.links=[]),t.links.push({title:e.name,url:`/docs/${e.id}`,type:"doc"})),mh.Z.schemeChangeCommitted.$emit(`scheme-${this.appReloadKey}`),this.newSchemePopup.item=null}const t=this.$router&&"history"===this.$router.mode?`/docs/${e.id}#m=edit`:`#/docs/${e.id}?m=edit`;window.open(t,"_blank")})).catch((e=>{console.error("Failed to create new diagram",e),nh.Z.addErrorSystemMessage(this.$store,"Failed to create new diagram"),errorCallback&&errorCallback()}))},loadSchemeFromLink(){const e=this.$router?this.$router.mode:"history",t={".":"+",_:"/","-":"="},i=sh(e).decodeURLHash(window.location.hash);if(i.doc){const e=i.doc.replace(/[\._\-]/g,(e=>t[e]));ih().loadAsync(e,{base64:!0}).then((e=>{if(e.files["doc.json"])return e.files["doc.json"].async("text");throw new Error("Missing doc.json file")})).then((e=>{this.scheme=JSON.parse(e),this.appReloadKey=jl().generate()})).catch((e=>{console.error(e),nh.Z.addErrorSystemMessage(this.$store,"Failed to load document from URL","link-loader")}))}},showDuplicateDiagramModal(){this.duplicateDiagramModal.name=this.scheme.name+" Copy",this.duplicateDiagramModal.errorMessage=null,this.duplicateDiagramModal.shown=!0},duplicateDiagram(){const e=this.duplicateDiagramModal.name.trim();if(!e)return void(this.duplicateDiagramModal.errorMessage="Name should not be empty");const t=Uc.Z.clone(this.scheme);t.id=null,t.name=e,this.submitNewScheme(t).then((()=>{this.duplicateDiagramModal.shown=!1})).catch((e=>{this.duplicateDiagramModal.errorMessage="Oops, something went wrong."}))},deleteScheme(){this.$store.state.apiClient.deleteScheme(this.scheme.id).then((()=>{this.$router.push("/")}))},onNewDiagramRequestedForItem(e,t){if(this.newSchemePopup.name=e.name,this.newSchemePopup.description=e.description,t&&"component"===e.shape){const t=(0,ph.v)(e.textSlots.body.text);t.length>0&&(this.newSchemePopup.name=t)}this.newSchemePopup.item=e,this.newSchemePopup.show=!0},onSchemeEditorModeChanged(e){const t=this.hasher.decodeURLHash(window.location.hash);t.m=e,this.hasher.changeURLHash(t)},onSaveSchemeRequested(e){this.$store.dispatch("clearStatusMessage"),this.isSaving=!0,this.$store.state.apiClient&&this.$store.state.apiClient.saveScheme&&_h(e.items).exportImage({width:400,height:300,format:"png",backgroundColor:e.style.backgroundColor}).catch((e=>(console.error(e),null))).then((t=>this.$store.state.apiClient.saveScheme((0,rh.wS)(e)).then((()=>t)))).then((e=>{this.modificationKey=jl().generate(),this.scheme.id&&e&&this.$store.state.apiClient&&this.$store.state.apiClient.uploadSchemePreview&&this.$store.state.apiClient.uploadSchemePreview(this.scheme.id,e,"png"),this.isSaving=!1})).catch((e=>{this.$store.dispatch("setErrorStatusMessage","Failed to save, please try again"),this.isSaving=!1}))},onSchemeUpdateRequested(e){this.scheme=e,this.schemeReloadKey=jl().generate()}},computed:{assetsPath(){return this.$store.getters.assetsPath}}},eb=(0,Re.Z)(Xx,eh,[],!1,null,null,null).exports;var tb=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("schemio-header"),e._v(" "),e._m(0)],1)};tb._withStripped=!0;const ib=(0,Re.Z)({},tb,[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"middle-content"},[i("h3",[e._v("Sorry, the page you have requested was not found")])])}],!1,null,null,null).exports;function nb(e){return e>=0&&e<10?"0"+e:""+e}var rb=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header"},[i("div",{staticClass:"header-body"},[i("a",{staticClass:"header-caption",attrs:{href:e.rootPath}},[i("img",{attrs:{src:e.assetsPath+"/images/schemio-logo-white.small.png",height:"25"}}),e._v(" "),i("span",[e._v("Schemio")])]),e._v(" "),i("div",{staticClass:"header-middle-section"},[e._t("middle-section")],2),e._v(" "),e.staticExportAllowed?i("div",{staticClass:"right-section"},[i("div",{staticClass:"current-user"},[e._m(0),e._v(" "),i("ul",{staticClass:"user-profile-menu"},[e.staticExportAllowed?i("li",[i("span",{staticClass:"link",on:{click:function(t){e.staticExportModalShown=!0}}},[e._v("Export all diagrams")])]):e._e()])])]):e._e()]),e._v(" "),i("div",{staticClass:"header-loader-container"},[e._t("loader")],2),e._v(" "),e.staticExportModalShown?i("StaticExportModal",{on:{close:function(t){e.staticExportModalShown=!1}}}):e._e()],1)};rb._withStripped=!0;var sb=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{title:"Export all diagrams"},on:{close:function(t){return e.$emit("close")}}},[e._v("\n    You can export all your documents into a single archive. You can use it to host all your diagrams in a read-only mode.\n\n    "),e.exportStatus?i("div",["running"===e.exportStatus.status?i("div",[i("div",{staticClass:"progress-bar progress-bar-default"})]):i("p",{staticStyle:{"text-align":"center"}},[i("span",{staticClass:"btn btn-primary",on:{click:e.submitExport}},[e._v("Export all diagrams")])]),e._v(" "),"finished"===e.exportStatus.status?i("div",[e._v("\n            Done, you can download all your exported documents using this "),i("a",{staticClass:"link",attrs:{href:"/v1/static-export/download/"+e.exportStatus.version}},[e._v("link")])]):e._e()]):e._e()])};sb._withStripped=!0;const ob={components:{Modal:je.Z},beforeMount(){this.updateExportStatus()},data:()=>({errorMessage:null,exportStatus:null,intervalId:null}),methods:{submitExport(){this.$store.state.apiClient.submitStaticExport().then((e=>{this.exportStatus.status="running",this.intervalId||(this.intervalId=setInterval((()=>{this.updateExportStatus()}),1e3))})).catch((e=>{console.error(e),this.errorMessage="Something went wrong with exporting your diagrams"}))},updateExportStatus(){this.$store.state.apiClient.getStaticExportStatus().then((e=>{this.intervalId&&"running"!==e.status&&(clearInterval(this.intervalId),this.intervalId=null),this.exportStatus=e})).catch((e=>{console.error(e)}))}}},ab={components:{StaticExportModal:(0,Re.Z)(ob,sb,[],!1,null,null,null).exports},data:()=>({staticExportModalShown:!1}),computed:{staticExportAllowed(){return this.$store.getters.staticExportAllowed},rootPath(){return this.$store.getters.rootPath},assetsPath(){return this.$store.getters.assetsPath}}},lb=(0,Re.Z)(ab,rb,[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"user-profile"},[i("span",{staticClass:"user-name"},[e._v("Admin")])])}],!1,null,null,null).exports;var cb=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"footer"},[i("div",{staticClass:"footer-body"},[i("ul",[i("li",[i("router-link",{attrs:{to:"/about"}},[e._v("About")])],1),e._v(" "),e._m(0)])])])};cb._withStripped=!0;const hb=(0,Re.Z)({},cb,[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",[i("a",{attrs:{href:"https://github.com/ishubin/schemio"}},[e._v("Project on GitHub")])])}],!1,null,null,null).exports,db=new Map;function ub(e){return Array.isArray(e.results)&&e.results.forEach((e=>{db.set(e.id,{id:e.id,name:e.name,link:e.link})})),e}const pb=new class{constructor(e=100){this.limit=e,this.items=new Map,this.counter=0}get(e,t){return this.items.has(e)?Promise.resolve(this.items.get(e).value):t().then((t=>(this._makeSpace(),this.counter+=1,this.items.set(e,{value:t,rev:this.counter}),t)))}_makeSpace(){if(this.items.size<this.limit)return;let e=null,t=0;this.items.forEach(((i,n)=>{(!e||t>i.rev)&&(e=n,t=i.rev)})),e&&this.items.delete(e)}}(100);function mb(e){return e.data}function fb(e){e||(e="/assets");const t=1719831843346;return Promise.all([Ph().get(`${e}/schemio-standalone.css?v=${t}`),Ph().get(`${e}/schemio-standalone.html?v=${t}`),Ph().get(`${e}/schemio-standalone.js?v=${t}`),Ph().get(`${e}/js/syntax-highlight-worker.js?v=${t}`),Ph().get(`${e}/syntax-highlight.css?v=${t}`)]).then((e=>({css:e[0].data,html:e[1].data,js:e[2].data,syntaxHighlightWorker:e[3].data,syntaxHighlightCSS:e[4].data})))}function gb(){return Ph().get("assets/templates/index.json").then(mb)}function vb(e){return pb.get(e,(()=>Ph().get(e).then(mb)))}const yb={type:"fs",create:()=>Promise.resolve({_getSchemeUrl:e=>`/v1/fs/docs/${e}?_v=${(new Date).getTime()}`,listEntries(e){let t="/v1/fs/list";return e&&(t=t+"/"+e),Ph().get(t).then(mb)},moveDir:(e,t)=>Ph().post(`/v1/fs/movedir?src=${encodeURIComponent(e)}&parent=${encodeURIComponent(t)}`).then(mb),deleteDir:e=>Ph().delete(`/v1/fs/dir?path=${encodeURIComponent(e)}`).then(mb),createDirectory:(e,t)=>Ph().post("/v1/fs/dir",{name:t,path:e}).then(mb),renameDirectory:(e,t)=>Ph().patch(`/v1/fs/dir?path=${encodeURIComponent(e)}`,{name:t}).then(mb),getSchemeInfo:e=>e?function(e,t){return db.has(e)?Promise.resolve(db.get(e)):t().then((t=>(db.set(e,t),t)))}(e,(()=>Ph().get(`/v1/fs/docs/${e}/info?_v=${(new Date).getTime()}`).then(mb))):Promise.reject("Invalid empty document ID"),getScheme(e){return e?Ph().get(this._getSchemeUrl(e)).then(mb):Promise.reject("Invalid empty document ID")},renameScheme(e,t){return Ph().patch(this._getSchemeUrl(e),{name:t}).then(mb)},moveScheme:(e,t)=>Ph().post(`/v1/fs/movescheme?id=${encodeURIComponent(e)}&parent=${encodeURIComponent(t)}`).then(mb),createNewScheme:(e,t)=>Ph().post(`/v1/fs/docs?path=${encodeURIComponent(e||"")}`,t).then(mb),createArt:e=>Ph().post("/v1/fs/art",e).then(mb),getAllArt:()=>Ph().get("/v1/fs/art").then(mb),getAllTemplates:gb,getTemplate:vb,saveArt:(e,t)=>Ph().put(`/v1/fs/art/${e}`,t).then(mb),deleteArt:e=>Ph().delete(`/v1/fs/art/${e}`).then(mb),saveScheme(e){return Ph().put(this._getSchemeUrl(e.id),e).then(mb)},deleteScheme(e){return Ph().delete(this._getSchemeUrl(e)).then(mb)},findSchemes(e){let t="/v1/fs/docs",i={};e.query&&(i.q=e.query),e.page&&(i.page=e.page);let n=!0;return(0,Fe.Ed)(i,((e,i)=>{t+=n?"?":"&",t+=i+"=",t+=encodeURIComponent(e),n=!1})),Ph().get(t).then(mb).then(ub)},getTags:()=>Promise.resolve([]),uploadSchemePreview(e,t,i){let n="/v1/fs/doc-preview?id="+encodeURIComponent(e);return Ph().post(n,{preview:t,format:i}).then(mb)},uploadFile(e){const t=new FormData;return t.append("file",e,e.name),Ph().post("/v1/media",t).then(mb).then((e=>e.url))},saveStyle:(e,t,i)=>Ph().post("/v1/fs/styles",{fill:e,strokeColor:t,textColor:i}).then(mb),getStyles:()=>Ph().get("/v1/fs/styles").then(mb),deleteStyle:e=>Ph().delete(`/v1/fs/styles/${e}`).then(mb),getExportHTMLResources:fb,submitStaticExport:()=>Ph().post("/v1/static-export/start").then(mb),getStaticExportStatus:()=>Ph().get("/v1/static-export/status").then(mb),get:e=>Ph().get(e).then(mb)})},xb={type:"offline",create:()=>Promise.resolve({getExportHTMLResources:fb,saveScheme:e=>(window.localStorage.setItem("offlineScheme",JSON.stringify(e)),Promise.resolve(e)),getAllTemplates:gb,getTemplate:vb,get:e=>Ph().get(e).then(mb)})};var bb=i(9532),wb=i(387),Cb=i(8814);const Pb=[{name:"Empty canvas",docUrl:null},{name:"Mind map",iconUrl:"assets/templates/previews/mind-map.svg",docUrl:"assets/starters/mind-map.json"},{name:"Mind map (progress tracker)",iconUrl:"assets/starters/mind-map-progress.svg",docUrl:"assets/starters/mind-map-progress.json"},{name:"Hierarchy Chart",iconUrl:"assets/starters/hierarchy-chart.svg",docUrl:"assets/starters/hierarchy-chart.json"},{name:"Layered diagram",iconUrl:"assets/starters/layered-diagram.svg",docUrl:"assets/starters/layered-diagram.json"},{name:"App prototype",iconUrl:"assets/starters/app-prototype.svg",docUrl:"assets/starters/app-prototype.json"},{name:"Slide show",iconUrl:"assets/starters/slide-show.svg",docUrl:"assets/starters/slide-show.json"},{name:"Frame-by-frame",iconUrl:"assets/starters/frame-by-frame.svg",docUrl:"assets/starters/frame-by-frame.json"}];function kb(e,t,i,n){return{name:e,path:t,component:i,props:n}}t().use(Oe),t().filter("formatDateTime",(e=>{const t=new Date(e),i=nb;return`${t.getFullYear()}.${i(t.getMonth()+1)}.${i(t.getDate())} ${i(t.getHours())}:${i(t.getMinutes())}`})),t().component("schemio-header",lb),t().component("schemio-footer",hb),window.schemioDebug={generateSchemePatch:px,testAST:bb.hz,processJSONTemplate:Cb.DQ,testEvalAST:(e,t)=>(0,bb.hz)(e).evalNode(new wb.s(t))};const Sb=new Oe({mode:"history",routes:[kb("SchemeEditorWebView","/docs/:schemeId",eb,{clientProvider:yb,starterTemplates:Pb}),kb("OfflineSchemeEditorWebView","/offline-editor",eb,{clientProvider:xb,starterTemplates:Pb,isOfflineEditor:!0,userStylesEnabled:!1,projectArtEnabled:!1}),kb("AboutView","/about",dc),kb("NotFoundView","/not-found",ib),kb("HomeView","/",ic,{clientProvider:yb}),kb("SearchView","/search",cc,{clientProvider:yb}),kb("FolderView","/f/*",ic,{clientProvider:yb}),{path:"*",redirect:"/not-found"}]});new(t())(t().util.extend({router:Sb,store:Xc},Ne)).$mount("#app")})()})();